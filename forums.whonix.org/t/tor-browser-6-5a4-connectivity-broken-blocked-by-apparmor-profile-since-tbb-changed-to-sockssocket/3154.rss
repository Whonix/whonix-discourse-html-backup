<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
    <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154</link>
    <description>The latest Tor Browser 6.06 is fully functional with Whonix appamor profiles. However, 6.5.a4 hardened advises upon start-up:

&gt; The proxy server is refusing connections

&gt; Firefox is configured to use a proxy server that is refusing connections.

&gt;     Check the proxy settings to make sure that they are correct.
&gt;     Contact your network administrator to make sure the proxy server is working.

System logs show:

&gt; apparmor=&quot;DENIED&quot; operation=&quot;mkdir&quot; profile=&quot;/home/**/tor-browser*/Browser/firefox&quot; name=&quot;/run/user/1000/Tor/&quot; pid=1247 comm=&quot;firefox&quot; requested_mask=&quot;c&quot; denied_mask=&quot;c&quot; fsuid=1000 ouid=1000 

I assume that temporarily disabling the profile will work, but it kind of defeats the purpose. Funny that the hardened version requires the making of an additional directory? Malicious version?</description>
    <language>en</language>
    <lastBuildDate>Wed, 30 Nov 2016 15:02:15 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>anon-ws-disable-stacked-tor <code>2.4-1</code> with above changes now in jessie-proposed-updates and testers repository.</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/22</link>
        <pubDate>Wed, 30 Nov 2016 15:02:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-22</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>Yes, sorry that’s right.</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/21</link>
        <pubDate>Mon, 28 Nov 2016 17:28:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-21</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>torjunkie:</p>
<blockquote>
<p>/usr/etc/anon-ws-disable-stacked-tor.d/30_anon-dist.conf</p>
</blockquote>
<p>Drop the <code>/usr</code>. Correct is:</p>
<pre><code>/etc/anon-ws-disable-stacked-tor.d/30_anon-dist.conf</code></pre>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/20</link>
        <pubDate>Mon, 28 Nov 2016 15:34:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-20</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>Manual edits work. Whonixcheck works okay on both the GW and WS.</p>
<p>For impatient linux newbies, it should be pointed out they are manually editing the file:</p>
<p>/usr/etc/anon-ws-disable-stacked-tor.d/30_anon-dist.conf</p>
<p>on the Whonix-WS template with those changes in the hyperlink.</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/19</link>
        <pubDate>Mon, 28 Nov 2016 02:43:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-19</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Another unrelated change. A less important (at this time) enhancement. Just for to make it more future proof.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/anon-ws-disable-stacked-tor/commit/678d81fd2d1a87517c54874792b6d18935507878" target="_blank" rel="nofollow noopener">github.com/Whonix/anon-ws-disable-stacked-tor</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/anon-ws-disable-stacked-tor/commit/678d81fd2d1a87517c54874792b6d18935507878" target="_blank" rel="nofollow noopener">socat TCP4 and TCP6 forward to Whonix-Gateway (not just TCP4)</a>
</h4>

  <pre class="message" style="white-space: pre-wrap;">https://phabricator.whonix.org/T192</pre>

<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="https://github.com/Whonix/anon-ws-disable-stacked-tor/commit/678d81fd2d1a87517c54874792b6d18935507878" target="_blank" rel="nofollow noopener">11:40PM - 27 Nov 16</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>10 additions</strong>
  and <strong>10 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/18</link>
        <pubDate>Sun, 27 Nov 2016 23:51:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-18</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="16" data-topic="3154">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I haven’t found a solution yet.</p>
</blockquote>
</aside>
<p>Solution found. You can emulate these changes for now.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/anon-ws-disable-stacked-tor/commit/24421e2dadbcec6911ecb41bc8f7fce5b23a018f" target="_blank" rel="nofollow noopener">github.com/Whonix/anon-ws-disable-stacked-tor</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/anon-ws-disable-stacked-tor/commit/24421e2dadbcec6911ecb41bc8f7fce5b23a018f" target="_blank" rel="nofollow noopener">socat listen on localhost only</a>
</h4>

  <pre class="message" style="white-space: pre-wrap;">https://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/16?u=patrick</pre>

<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="https://github.com/Whonix/anon-ws-disable-stacked-tor/commit/24421e2dadbcec6911ecb41bc8f7fce5b23a018f" target="_blank" rel="nofollow noopener">11:35PM - 27 Nov 16</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>7 additions</strong>
  and <strong>7 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Package upgrade coming soonish.</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/17</link>
        <pubDate>Sun, 27 Nov 2016 23:45:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-17</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>There is a problem with the current jessie-proposed-updates / testers anon-ws-distable-stacked-tor version <code>2.3-1</code>. [Current Whonix stable anon-ws-disable-stacked-tor version <code>2.0-1</code> does not have that issue.]</p>
<p>In <code>socat TCP-LISTEN:9050,fork TCP:$GATEWAY_IP:9050</code> etc. the <code>TCP-LISTEN</code> part listens on all interfaces as opposed to on localhost only.</p>
<p><code>socat</code> <a href="http://unix.stackexchange.com/questions/210741/tell-socat-to-listen-to-connections-from-a-single-ip-address">supports <code>range</code></a>, which is better, since it ignores IPs outside of the specified range, but still is not great. The great solution would be to listen on localhost only.</p>
<p>Whonix 13:</p>
<ul>
<li>Qubes-Whonix: not great but no huge issue since Whonix-Workstation is firewalled by default.</li>
<li>Non-Qubes-Whonix: issue when using multiple Whonix-Workstations at the same time since another workstation could connect to another workstations socat which is a security issue.</li>
</ul>
<p>Whonix 14:</p>
<ul>
<li>not great but no huge issue since Whonix-Workstation is firewalled by default.</li>
</ul>
<p>I haven’t found a solution yet.</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/16</link>
        <pubDate>Sun, 27 Nov 2016 23:26:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-16</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <a href="https://forums.whonix.org/t/why-is-tor-browser-allowed-to-connect-to-var-run-anon-ws-disable-stacked-tor-127-0-0-1-9150-sock-by-the-current-apparmor-profile">https://forums.whonix.org/t/why-is-tor-browser-allowed-to-connect-to-var-run-anon-ws-disable-stacked-tor-127-0-0-1-9150-sock-by-the-current-apparmor-profile</a>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/apparmor-profile-torbrowser/commit/a6f7d51c9eb863f1101b7148cbce3b6bce263b38" target="_blank" rel="nofollow noopener">github.com/Whonix/apparmor-profile-torbrowser</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/apparmor-profile-torbrowser/commit/a6f7d51c9eb863f1101b7148cbce3b6bce263b38" target="_blank" rel="nofollow noopener">add SocksSocket anon-ws-disable-stacked-tor support</a>
</h4>


<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="https://github.com/Whonix/apparmor-profile-torbrowser/commit/a6f7d51c9eb863f1101b7148cbce3b6bce263b38" target="_blank" rel="nofollow noopener">02:11PM - 23 Nov 16</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>3 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/15</link>
        <pubDate>Wed, 23 Nov 2016 14:21:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-15</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>OK, will do if the problem re-emerges.</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/14</link>
        <pubDate>Wed, 23 Nov 2016 03:51:04 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-14</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Since the <a href="http://whonx.org">whonx.org</a> forums connectivity issues are unrelated to the issue in this very thread, please create a new thread for that.</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/13</link>
        <pubDate>Tue, 22 Nov 2016 20:33:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-13</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>Hi Patrick,</p>
<p>Also working here on Qubes-Whonix! Great job. <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>However, note there is the occasional network error on these forums - not present in general browsing - stating:</p>
<blockquote>
<p>Sorry, we couldn’t load that topic, possibly due to a connection problem. Please try again. If the problem persists, let us know.</p>
</blockquote>
<p>The problem is resolved by manually selecting a new Tor circuit. There might be some gremlins in that code, as I’ve never seen that error before using Tor Browser in Qubes.</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/12</link>
        <pubDate>Tue, 22 Nov 2016 10:01:04 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-12</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[entr0py]]></dc:creator>
        <description><![CDATA[
            <p>Tested in a plain Debian VM and it works! <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/11</link>
        <pubDate>Tue, 22 Nov 2016 06:13:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-11</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Tested wanted!</p>
<p>I managed to create a Whonix stable upgrade. <code>anon-ws-disable-stacked-tor</code> version <code>3:2.3-1</code> is now available from Whonix <code>jessie-proposed-updates</code> and <code>testers</code> apt repository.</p>
<p>( <a href="https://www.whonix.org/wiki/Whonix-APT-Repository">https://www.whonix.org/wiki/Whonix-APT-Repository</a> )</p>
<p>Once you <a href="https://www.whonix.org/wiki/Update">updated</a> that package and rebooted, Tor Browser version <code>6.5a4</code> will have fixed connectivity. Please test!</p>
<p>(Whether you run <code>sudo apt-get autoremove</code> after upgrade to get rid of <code>rinetd</code> [previously used to implement <code>anon-ws-disable-stacked-tor</code> doesn’t matter since it will be doing nothing but waste a very little memory if it stays.)</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/10</link>
        <pubDate>Tue, 22 Nov 2016 04:40:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-10</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Progress has been made. anon-ws-disable-stacked-tor package is “mostly” ready, but I am running into a strange Qubes bug.</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/QubesOS/qubes-issues/issues/2447" target="_blank" rel="nofollow noopener">github.com/QubesOS/qubes-issues</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/adrelanos" rel="nofollow noopener">
<img src="https://avatars1.githubusercontent.com/u/1985040?v=2&amp;s=96" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="https://github.com/QubesOS/qubes-issues/issues/2447" target="_blank" rel="nofollow noopener">Issue: unrelated changes are breaking qubes-gui-agent</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/QubesOS/qubes-issues/issues/2447" target="_blank" rel="nofollow noopener">2016-11-21</a>
	</div>
	<div class="user">
	closed by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/QubesOS/qubes-issues/issues/2447" target="_blank" rel="nofollow noopener">2016-11-22</a>
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Qubes OS version (e.g., R3.1):
R3.2 with Qubes testing repository
Affected TemplateVMs (e.g., fedora-23, if applicable):
whonix-ws
Expected behavior:
qubes-gui-agent should not break.
Actual behavior:
qubes-gui-agent service fails...</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/9</link>
        <pubDate>Tue, 22 Nov 2016 00:11:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-9</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>It’s also worth noting that the alpha Tor Browser series is due to have application level sandboxing by the end of this year.</p>
<p>So, if all goes to plan, Tor Browser based on Firefox 45.6 ESR (due for release on 13 December) will have this available and, fingers crossed, will be compatible with Whonix.</p>
<p>See here:</p>
<p><a href="https://blog.torproject.org/category/tags/sandbox" class="onebox" target="_blank">https://blog.torproject.org/category/tags/sandbox</a></p>
<blockquote>
<p>The amount of information Tor Browser will learn about your computer, and thereby you, will be limited. For example, the sandbox will hide things like your files, and real IP and MAC addresses from Tor Browser.</p>
</blockquote>
<blockquote>
<p>…</p>
</blockquote>
<blockquote>
<p>When will the sandbox be available to users?</p>
</blockquote>
<blockquote>
<p>This is experimental. Right now I have something that works on my laptop. It is not user friendly at all. It’s a functional prototype. By the end of the year it will be available in alpha form for early adopters to experiment with.</p>
</blockquote>
<p>I think overall there is a strong rationale for Whonix users to default to something offering ASAN, Selfrando &amp; a compatible sandbox, in contrast to the standard ‘stable’ version.</p>
<p>As a reminder, Rule 41 scheduled for December 1 will authorize mass hacking on a global scale, given judges are notoriously retarded when it comes to considering the implications of warrants they issue for technical matters:</p>
<p><a href="https://blog.torproject.org/blog/fbis-quiet-plan-begin-mass-hacking" class="onebox" target="_blank">https://blog.torproject.org/blog/fbis-quiet-plan-begin-mass-hacking</a></p>
<blockquote>
<p>The changes to Rule 41 would allow judges to grant warrants to search and seize electronic media located outside of their home districts when the location of the information is “concealed through technological means."</p>
</blockquote>
<blockquote>
<p>For instance, when a person is using Tor.</p>
</blockquote>
<blockquote>
<p><strong>The broad search warrants allowable under these new rules will apply to people using Tor in any country—even if they are journalists, members of a legislature, or human rights activists.</strong> The FBI will be permitted to hack into a person’s computer or phone remotely and to search through and remove their data. The FBI will be able to introduce malware into computers. It will create vulnerabilities that will leave users exposed.</p>
</blockquote>
<p>It’s not just the FBI, but every other state engaging in the same behaviour. All of these draconian laws passed in the last few years are just authorizing what has been going on for probably more than a decade.</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/8</link>
        <pubDate>Sat, 19 Nov 2016 09:51:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-8</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>entr0py:</p>
<blockquote>
<p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> I think you need to make an <strong>official Whonix</strong> statement about Tor Browser versioning.</p>
</blockquote>
<p>My recommendation is what tb-updater is stating.</p>
<blockquote>
<p>Only versions still considered secure should be listed here. Higher<br>
version numbers does not necessarily mean more secure here. Could be<br>
alpha or beta versions. <strong><em>In most cases you are best off choosing the<br>
lowest version number among them.</em></strong></p>
</blockquote>
<ul>
<li>It has more users, therefore hopefully better anonymity.</li>
<li>Default download by The Tor Project and I am not trying to outsmart<br>
them on that.</li>
<li>Less troublesome Whonix maintenance wise (support requests).</li>
<li>Most likely be functional at installation time. (Like now, the<br>
anon-ws-disable-stacked-tor package needs an update to make that TBB<br>
alpha work while TBB stable is still functional.)</li>
</ul>
<blockquote>
<p>Are we making an exception for Tor Browser?</p>
</blockquote>
<p>No.</p>
<blockquote>
<p>I have not seen any official guidance from Tor Project.</p>
</blockquote>
<p>I go with their default download on <a href="http://torproject.org">torproject.org</a>. We could ask for<br>
clarification about this on the Tor mailing list, but I doubt it is<br>
required.</p>
<blockquote>
<p>Unless you make an exception, torbrowser-experimental should<br>
correspond with whonix-experimental/testing; and there should be no<br>
reason to rush whonix-stable unless it were to be incompatible with<br>
torbrowser-stable. It would be good to get rid of this ambiguity.</p>
</blockquote>
<p>It’s been appreciated that some users use hardened alpha - contributing<br>
as a tester - so we get notified about any issues here. So these can be<br>
fixed before most users using stable bump into them.</p>
<p>When the current TBB alpha gets blessed TBB stable and users<br>
automatically update using TBB internal update, it really ought to not<br>
break connectivity. So I am prioritizing getting this fixed. Either by<br>
an updated anon-ws-disable-stacked Tor package or releasing Whonix 14<br>
sooner.</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/7</link>
        <pubDate>Fri, 18 Nov 2016 16:30:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-7</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>torjunkie:</p>
<blockquote>
<p>Does the apparmor profile need an additional permission also for<br>
writing to that specific (Tor data?) directory for socks port<br>
purposes?</p>
</blockquote>
<p>No. The apparmor warning was just a follow up issue of not using unix<br>
domain sockets, i.e. trying to use Tor that comes with TBB rather than<br>
not using Tor that comes with TBB.</p>
<blockquote>
<p>Also, can we follow your directions from the phabricator entry to<br>
get it working?</p>
</blockquote>
<p>Try installing anon-ws-stacked-tor from git. And reboot (easy) or<br>
reload TBB specific environment variables (harder).</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/6</link>
        <pubDate>Fri, 18 Nov 2016 16:04:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-6</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>Hi entr0py,</p>
<p>That is a valid viewpoint. In making any decision, let’s review the differences as it stands right now.</p>
<p><strong>Tor Browser</strong></p>
<p>The main differences between the hardened Tor browser and the standard  Tor browser are:</p>
<p><a href="https://lists.torproject.org/pipermail/tbb-dev/2016-June/000382.html" class="onebox" target="_blank">https://lists.torproject.org/pipermail/tbb-dev/2016-June/000382.html</a></p>
<blockquote>
<p>David Fifield:</p>
<blockquote>
<p>I wanted to know what exactly is different in the hardened series.</p>
<p>The master…hardened-builds diff has many spurious changes and is not<br>
that clear:<br>
<a href="https://gitweb.torproject.org/builders/tor-browser-bundle.git/diff/?id=hardened-builds&amp;id2=master">https://gitweb.torproject.org/builders/tor-browser-bundle.git/diff/?id=hardened-builds&amp;id2=master</a></p>
<p>The best I can tell, the differences are:</p>
<ul>
<li>ASan</li>
<li>–enable-expensive-hardening for tor (enables -fsanitize=address,<br>
-fsanitize=undefined, and -fno-omit-frame-pointer)</li>
<li>selfrando</li>
</ul>
</blockquote>
</blockquote>
<blockquote>
<p>This is correct. Additionally, we compile the browser part with -fwrapv.  Note, selfrando is not in the alpha series available yet only in nightly  builds. This will change with the next release, though.</p>
</blockquote>
<blockquote>
<p>Georg</p>
</blockquote>
<p>And what is -fwrapv?</p>
<p><a href="https://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html" class="onebox" target="_blank">https://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html</a></p>
<blockquote>
<p>-fwrapv<br>
This option instructs the compiler to assume that signed arithmetic overflow of addition, subtraction and multiplication wraps around using twos-complement representation. This flag enables some optimizations and disables others. The options -ftrapv and -fwrapv override each other, so using -ftrapv -fwrapv on the command-line results in -fwrapv being effective. Note that only active options override, so using -ftrapv -fwrapv -fno-wrapv on the command-line results in -ftrapv being effective.</p>
</blockquote>
<p>So, with respect to the hardened browser, you get the benefits of (an experimental build) providing:</p>
<p><strong>I.</strong> Selfrando - providing significant protection against de-anonymization exploits (see paper below)</p>
<aside class="onebox pdf">
  <header class="source">
      <a href="https://www.ics.uci.edu/~perl/pets16_selfrando.pdf" target="_blank" rel="nofollow noopener">ics.uci.edu</a>
  </header>
  <article class="onebox-body">
    <a href="https://www.ics.uci.edu/~perl/pets16_selfrando.pdf" target="_blank" rel="nofollow noopener"><span class="pdf-onebox-logo"></span></a>
<h3><a href="https://www.ics.uci.edu/~perl/pets16_selfrando.pdf" target="_blank" rel="nofollow noopener">pets16_selfrando.pdf</a></h3>

<p class="filesize">548.30 KB</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p><strong>II.</strong> ASAN - address sanitizer to help detect use-after-free and out-of-bounds memory errors in C/C++ programs</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://cdn.mdn.mozilla.net/static/img/favicon32.7f3da72dcea1.png" class="site-icon" width="32" height="32">
      <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Testing/Firefox_and_Address_Sanitizer" target="_blank" rel="nofollow noopener">MDN Web Docs</a>
  </header>
  <article class="onebox-body">
    <img src="https://cdn.mdn.mozilla.net/static/img/opengraph-logo.72382e605ce3.png" class="thumbnail onebox-avatar" width="500" height="500">

<h3><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Testing/Firefox_and_Address_Sanitizer" target="_blank" rel="nofollow noopener">Firefox and Address Sanitizer</a></h3>

<p>Address Sanitizer (ASan) is a fast memory error detector that detects use-after-free and out-of-bound bugs in C/C++ programs. It uses a compile-time instrumentation to check all reads and writes during the execution. In addition, the runtime part...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Downsides:</p>
<ul>
<li>Potentially more fingerprintable</li>
<li>Greater memory use</li>
<li>Potentially less stable experience</li>
</ul>
<p><strong>Tor Process</strong></p>
<p>With respect to the tor process, it is true the hardened-series is currently defaulting to an alpha version - 0.2.9.5-alpha, instead of the stable version 0.2.8.9</p>
<p>That comes with the usual Tor Project rider:</p>
<p><a href="https://blog.torproject.org/blog/tor-0295-alpha-released-numerous-bugfixes" class="onebox" target="_blank">https://blog.torproject.org/blog/tor-0295-alpha-released-numerous-bugfixes</a></p>
<blockquote>
<p>Please note: This is an alpha release. You should only try this one if you are interested in tracking Tor development, testing new features, making sure that Tor still builds on unusual platforms, or generally trying to hunt down bugs. If you want a stable experience, please stick to the stable releases.</p>
</blockquote>
<p>Personally, I would err on the side of less caution i.e. sacrificing potential stability to have huge gains in security. Also, the Tor devs themselves state they think they have squashed almost all the main bugs in the 0.2.9 series.</p>
<p>The call can only be made by the core Whonix developers who are over-worked, underpaid and generally unappreciated. But, I do note the Whonix website already states something like:</p>
<blockquote>
<p>Whonix is experimental software. Do not rely on it for strong anonymity.</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/5</link>
        <pubDate>Fri, 18 Nov 2016 15:26:45 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-5</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[entr0py]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="3" data-topic="3154">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Most Whonix users I suspect are already defaulting to the hardened Tor Browser series to get additional memory (and other) protections not present in the default version.</p>
</blockquote>
</aside>
<p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> I think you need to make an <strong>official Whonix</strong> statement about Tor Browser versioning. Whonix does not endorse using experimental software in any other capacity (including system tor-alpha). Are we making an exception for Tor Browser? I have not seen any official guidance from Tor Project. These snippets are from the comments section of <a href="https://blog.torproject.org/blog/tor-browser-55a5-hardened-released#comments">5.5a5-hardened release notes</a>:</p>
<blockquote>
<p>At present there is no stable release of Hardened Tor Browser. Alpha releases have new features that can be buggier than stable. In a sense, it may have more security features but those features are more likely to fail.</p>
</blockquote>
<hr>
<p>gk reply to “hardened <em>stable</em> release coming?”:</p>
<blockquote>
<p>Probably not as the hardened series is considerably slower and uses considerably more memory than the stable one due to the Address Sanitizer and other additional hardening features.</p>
</blockquote>
<hr>
<blockquote>
<p>Different versions have different fingerprints. Give some other uses a chance to check out Panopticlick and your rating will get better.</p>
</blockquote>
<blockquote>
<p>With that said, this is a alpha version of Tor Browser. It’s likely to not have as many users as stable, and is a platform to experiment with new features that may have unintended side effects.</p>
</blockquote>
<hr>
<p>Unless you make an exception, torbrowser-experimental should correspond with whonix-experimental/testing; and there should be no reason to rush whonix-stable unless it were to be incompatible with torbrowser-stable. It would be good to get rid of this ambiguity.</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/4</link>
        <pubDate>Fri, 18 Nov 2016 06:10:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-4</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>Hi Patrick,</p>
<p>I’m glad to hear you got it working in Whonix 14!</p>
<p><a href="https://phabricator.whonix.org/T192" class="onebox" target="_blank">https://phabricator.whonix.org/T192</a></p>
<blockquote>
<p>The variable names ended up being:</p>
</blockquote>
<blockquote>
<p>TOR_SOCKS_IPC_PATHTOR_CONTROL_IPC_PATH</p>
</blockquote>
<blockquote>
<p>Happy to report that Whonix 14 with Tor Browser 6.5a4-hardened unix domain socket files redirection works for me.</p>
</blockquote>
<p>Regarding the release of Whonix 14, I for one would vote for sooner, based upon:</p>
<ul>
<li>
<p>Dec 1 deadline for FBI passing new rules which they will interpret as wholesale permission to attack anybody disguising their locale via Tor i.e. all Tor users</p>
</li>
<li>
<p>Most Whonix users I suspect are already defaulting to the hardened Tor Browser series to get additional memory (and other) protections not present in the default version. This is likely since they already invest a lot of time to get Whonix or Qubes-Whonix up and running</p>
</li>
<li>
<p>Whonix 14 looks like it comes with a host of new features already, including nice things like .onion lookups for updates</p>
</li>
</ul>
<p>Does the apparmor profile need an additional permission also for writing to that specific (Tor data?) directory for socks port purposes?</p>
<p>Also, can we follow your directions from the phabricator entry to get it working?</p>
<p>Regards</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/3</link>
        <pubDate>Fri, 18 Nov 2016 03:45:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-3</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>It most likely primarily broke because they changed to unix domain sockets / SocksSocket.</p>
<ul>
<li><a href="https://blog.torproject.org/blog/tor-browser-65a4-hardened-released">https://blog.torproject.org/blog/tor-browser-65a4-hardened-released</a></li>
<li><a href="https://phabricator.whonix.org/T192">https://phabricator.whonix.org/T192</a></li>
</ul>
<p>Fixing requires a major upgrade of Whonix. So Whonix 14 probably has to be released sooner than later. (But without implementing the outstanding Whonix 14 tickets - those would have to be postponed.)</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/2</link>
        <pubDate>Thu, 17 Nov 2016 18:01:51 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-2</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
      <item>
        <title>Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>The latest Tor Browser 6.06 is fully functional with Whonix appamor profiles. However, 6.5.a4 hardened advises upon start-up:</p>
<blockquote>
<p>The proxy server is refusing connections</p>
</blockquote>
<blockquote>
<p>Firefox is configured to use a proxy server that is refusing connections.</p>
</blockquote>
<blockquote>
<pre><code>Check the proxy settings to make sure that they are correct.
Contact your network administrator to make sure the proxy server is working.
</code></pre>
</blockquote>
<p>System logs show:</p>
<blockquote>
<p>apparmor=“DENIED” operation=“mkdir” profile="/home/**/tor-browser*/Browser/firefox" name="/run/user/1000/Tor/" pid=1247 comm=“firefox” requested_mask=“c” denied_mask=“c” fsuid=1000 ouid=1000</p>
</blockquote>
<p>I assume that temporarily disabling the profile will work, but it kind of defeats the purpose. Funny that the hardened version requires the making of an additional directory? Malicious version?</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154/1</link>
        <pubDate>Thu, 17 Nov 2016 04:37:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3154-1</guid>
        <source url="http://forums.whonix.org/t/tor-browser-6-5a4-connectivity-broken-blocked-by-apparmor-profile-since-tbb-changed-to-sockssocket/3154.rss">Tor Browser 6.5a4 connectivity broken, blocked by apparmor profile (since TBB changed to SocksSocket)</source>
      </item>
  </channel>
</rss>
