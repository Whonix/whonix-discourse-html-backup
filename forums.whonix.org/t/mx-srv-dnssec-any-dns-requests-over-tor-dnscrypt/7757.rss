<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
    <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757</link>
    <description>Cam across some workarounf for SRV requests over Tor:

https://github.com/lightningnetwork/lnd/blob/master/docs/configuring_tor.md

&gt; Outbound connections are possible with the use of the `--tor.socks` and `--tor.dns` arguments. The `--tor.socks` argument should point to the interface that the `Tor` daemon is listening on to proxy connections. The `--tor.dns` flag is required in order to be able to properly automatically bootstrap a set of peer connections. The `tor` daemon doesn&#39;t currently support proxying `SRV` queries over Tor. So instead, we need to connect directly to the authoritative DNS server over TCP, in order query for `SRV` records that we can use to bootstrap our connections.

Any idea if it can work inside WS with stacked Tor?</description>
    <language>en</language>
    <lastBuildDate>Sat, 14 Sep 2019 12:30:50 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/DNSCrypt/dnscrypt-proxy/issues/930" target="_blank" rel="nofollow noopener">github.com/DNSCrypt/dnscrypt-proxy</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/adrelanos" rel="nofollow noopener">
<img src="https://avatars1.githubusercontent.com/u/1985040?v=2&amp;s=96" class="thumbnail onebox-avatar" width="60" height="60">
</a>

<h4><a href="https://github.com/DNSCrypt/dnscrypt-proxy/issues/930" target="_blank" rel="nofollow noopener">Issue: DNS over TCP /etc/resolv.conf 'options use-vc' broken</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/DNSCrypt/dnscrypt-proxy/issues/930" target="_blank" rel="nofollow noopener">2019-09-14</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Using the Debian package https://packages.debian.org/buster/dnscrypt-proxy I cannot make dnscrypt-proxy work when /etc/resolv.conf contains
options use-vc
DNS stops working completely.
/lib/systemd/system/dnscrypt-proxy.socket contains by debian default...</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/23</link>
        <pubDate>Sat, 14 Sep 2019 12:30:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-23</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>HulaHoop via Whonix Forum:</p>
<blockquote>
<p>Did you see if dino works for you (since you have working DNS and I don’t)?</p>
</blockquote>
<p>Doesn’t work for me.</p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/22</link>
        <pubDate>Wed, 17 Jul 2019 21:09:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-22</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group quote-modified" data-post="20" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Also, copy/paste FTW. Added another hint for a likely mistake to be made.</p>
<blockquote>
<p>It is not 127.0.0.1 . It really is 127.0. <strong>2</strong> .1.</p>
</blockquote>
<p>Did you comment out the cloudflare default server?</p>
</blockquote>
</aside>
<p>Yes and yes. I copiedstriaght from the documentaiton.</p>
<p>Did you see if dino works for you (since you have working DNS and I don’t)?</p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/21</link>
        <pubDate>Wed, 17 Jul 2019 19:31:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-21</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>I saw these before. Dunno how I fixed those. Can’t reproduce. Even though I am using a fresh VM (Qubes DispVM), reapplying my own instructions copy/paste.</p>
<p>Forgot the restart commands most likely. Now added.</p>
<pre><code>sudo systemctl restart dnscrypt-proxy.service
sudo systemctl restart dnscrypt-proxy.socket
</code></pre>
<p>But not sure in which order.<br>
Maybe that helps.</p>
<p><a href="https://github.com/jedisct1/dnscrypt-proxy/wiki/systemd" rel="nofollow noopener">https://github.com/jedisct1/dnscrypt-proxy/wiki/systemd</a> says TCP_DEFER_ACCEPT and TCP_NODELAY don’t matter. Not sure it mattered for me.</p>
<p>Also, copy/paste FTW. Added another hint for a likely mistake to be made.</p>
<blockquote>
<p>It is not 127.0.0.1 . It really is 127.0.<strong>2</strong>.1.</p>
</blockquote>
<p>Did you comment out the cloudflare default server?</p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/20</link>
        <pubDate>Wed, 17 Jul 2019 19:00:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-20</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Thanks for documenting. Great job. There are some quirks I’m seeing that need some  troubleshooting before it works on my end and I can test.</p>
<hr>
<p>OK so dnscrypt daemon is running but it is complaining about tcp sockets</p>
<pre><code> dnscrypt-proxy.socket - dnscrypt-proxy listening socket
   Loaded: loaded (/lib/systemd/system/dnscrypt-proxy.socket; enabled; vendor preset: enabled)
   Active: active (listening) since Wed 2019-07-17 18:13:24 UTC; 7min ago
     Docs: https://github.com/jedisct1/dnscrypt-proxy/wiki
   Listen: 127.0.2.1:53 (Stream)
           127.0.2.1:53 (Datagram)
    Tasks: 0 (limit: 2355)
   Memory: 0B
   CGroup: /system.slice/dnscrypt-proxy.socket

Jul 17 18:13:24 host systemd[1]: dnscrypt-proxy.socket: TCP_DEFER_ACCEPT failed: Protocol not available
Jul 17 18:13:24 host systemd[1]: dnscrypt-proxy.socket: TCP_NODELAY failed: Protocol not available
Jul 17 18:13:24 host systemd[1]: Listening on dnscrypt-proxy listening socket.
</code></pre>
<p>Its probably non-functional with the output:</p>
<pre><code>; &lt;&lt;&gt;&gt; DiG 9.11.5-P4-3-Debian &lt;&lt;&gt;&gt; +multiline . DNSKEY
;; global options: +cmd
;; connection timed out; no servers could be reached</code></pre>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/19</link>
        <pubDate>Wed, 17 Jul 2019 18:31:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-19</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://packages.debian.org/sid/libresolv-wrapper" rel="nofollow noopener">libresolv-wrapper</a> does <a href="https://bugzilla.samba.org/show_bug.cgi?id=13482" rel="nofollow noopener">not work with curl </a> but perhaps with dino-im?</p>
<p>If that was to work, then an alternative resolv.conf elsewhere could be used by dino-im and thereby could use TCP and DNS (through DNSCrypt) through Tor’s <code>TransPort</code>.</p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/18</link>
        <pubDate>Wed, 17 Jul 2019 18:02:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-18</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>DNSCrypt documentation for Whonix and the whole page was revised. DNSCrypt are now good enough to make it work.</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Alternative_DNS_Resolver" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:94/62;"><img src="https://www.whonix.org/w/images/b/ba/Connect-20333640.jpg" class="thumbnail"></div>

<h3><a href="https://www.whonix.org/wiki/Alternative_DNS_Resolver" target="_blank" rel="nofollow noopener">Alternative DNS Resolver</a></h3>

<p>Authenticated/Encrypted DNS over Tor, DNSSEC over Tor, DNSCrypt by OpenDNS, httpsdnsd by JonDos</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Note: don’t skip the introduction chapter warning.</p>
<blockquote>
<p>Note that most applications, such as <a href="https://www.whonix.org/wiki/Tor_Browser" rel="nofollow noopener">Tor Browser</a>, will <strong>not</strong> <em>automatically</em> profit from setting up an alternative DNS resolver.</p>
<ul>
<li>This is because applications in Whonix ™ are configured to use <code>SocksPort</code> instead of <code>Trans</code> - or <code>DnsPort</code> , see <a href="https://www.whonix.org/wiki/Stream_Isolation" rel="nofollow noopener">Stream Isolation</a> for details.</li>
<li>Another reason is, that most applications do not yet make use of authenticated DNS (DNSSEC).</li>
</ul>
<p>However, you could use alternative DNS revolvers with these applications when <a href="https://www.whonix.org/wiki/Stream_Isolation/Disable_Easy" rel="nofollow noopener">deconfiguring</a> socks proxy settings.</p>
</blockquote>
<p>Users can now set up encrypted DNS over Tor using any DNS server from DNSCrypt list <a href="https://dnscrypt.info/public-servers/" rel="nofollow noopener">https://dnscrypt.info/public-servers/</a>. Any type of DNS (such as MX, tested) should be possible to resolve. Bonus: DNSSEC also working.</p>
<hr>
<p>They way Tor implemented <code>DnsPort</code> is seems it will not be possible to use DNSCrypt as a fallback only. <code>dig MX google.com</code> will answer and claim there is no MX DNS entries for that domain. Therefore, no other DNS server from /etc/resolv.conf will be tried out. This might be a good default for Tor connectivity since applications might re-try other types of DNS, hopefully Tor supported ones. Might be the reason it is acting in that way. Any change by upstream might be bad for Tor connectivity form their point of view. A configuration option would change the web fingerprint (actually any "use another DNS resolver other than Tor as a fallback would change the web fingerprint).</p>
<p>For now it is either the whole system default networking (i.e. not Tor Browser etc. by default since these are configured to use SocksPort) Whonix-Workstation uses Tor <code>DnsPort</code> OR DNSCrypt.</p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/17</link>
        <pubDate>Wed, 17 Jul 2019 17:56:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-17</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="14" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>What steps do I need to do to make it a fallback?</p>
</blockquote>
</aside>
<p>That’s kinda already an alternative step 3.<br>
Not sure. Perhaps leaving /etc/resolv.conf as is but only appending it.</p>
<aside class="quote no-group" data-post="14" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Will it be automatically used for a program that can’t resolve through Tor?</p>
</blockquote>
</aside>
<p>Instructions as is would replace system Tor DNS with DNScrypt.</p>
<aside class="quote no-group" data-post="15" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>user@host:~$ sudo dnscrypt-proxy --tcp-only</p>
</blockquote>
</aside>
<p>That’s not how it is supposed to be used nowadays anymore since packaged for Debian there is also a systemd unit file. See: <code>apt-file list dnscrypt-proxy</code></p>
<p>Interesting files to look at:</p>
<ul>
<li>/etc/dnscrypt-proxy/dnscrypt-proxy.toml</li>
<li>/lib/systemd/system/dnscrypt-proxy.service</li>
<li>/lib/systemd/system/dnscrypt-proxy.socket</li>
<li>and the example configs in folder /usr/share/doc/dnscrypt-proxy/examples/</li>
</ul>
<p>Add to /etc/dnscrypt-proxy/dnscrypt-proxy.toml at the very top most likely (since this is “general” and not a [section]).</p>
<pre><code>force_tcp = true</code></pre>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/16</link>
        <pubDate>Wed, 17 Jul 2019 14:59:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-16</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>starting dnscrypt wth tcp gives this:</p>
<pre><code>user@host:~$ sudo dnscrypt-proxy --tcp-only
flag provided but not defined: 
</code></pre>
<p>Testing site report with systemctl reporting it as enabled (which it would be with any daemon on Debian) I get this:</p>
<pre><code>You aren't using OpenDNS yet. Let's fix that
If you haven't restarted your computer yet, please do that now</code></pre>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/15</link>
        <pubDate>Wed, 17 Jul 2019 13:32:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-15</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="13" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Why is that?</p>
</blockquote>
</aside>
<p>Teor said so, but on the other hand even the reduced exit policy allows TCP 53</p>
<p><a href="https://trac.torproject.org/projects/tor/wiki/doc/ReducedExitPolicy" class="onebox" target="_blank" rel="nofollow noopener">https://trac.torproject.org/projects/tor/wiki/doc/ReducedExitPolicy</a></p>
<aside class="quote no-group" data-post="13" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>DNSCrypt is Open Source, supports TCP, can use outgoing port 443, therefore works over Tor, supports DNSSEC, encrypts communications between client and DNS server, therefore Tor exit relays cannot forge the DNS requests, is packaged in Debian already for years, was tested and documented in Whonix years ago, although documentation needs a revision.</p>
</blockquote>
</aside>
<p>OK sounds perfect. What steps do I need to do to make it a fallback? Will it be automatically used for a program that can’t resolve through Tor?</p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/14</link>
        <pubDate>Wed, 17 Jul 2019 12:11:40 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-14</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>HulaHoop via Whonix Forum:&gt;</p>
<blockquote>
<p>I mean connecting to a DNS server over Tor rather than asking the exit to broker the request on its behalf.</p>
</blockquote>
<p>Use DNSCrypt.</p>
<blockquote>
<p>probability of running into an exit with TCP 53 permitted is low.</p>
</blockquote>
<p>Why is that?</p>
<blockquote>
<p>probability of running into an exit with TCP 53 permitted is low.</p>
</blockquote>
<p>Doesn’t Tor pick an exit relay depending on the one which supports the port the Tor client wants to use?</p>
<blockquote>
<p>Then we would need to redirect the DNS queries to their server with socat or systemd but in a way compatible with how Whonix works.</p>
</blockquote>
<p>Sounds like:</p>
<p>Use DNSCrypt.</p>
<blockquote>
<p>The best option we have is to use their Tor DNS code  with the servers their package supports and somehow wrap it around just dino-im.</p>
</blockquote>
<p>When taking their code the outcome could be:</p>
<ul>
<li>application specific code for dino-im (or similar)</li>
<li>a standalone command line tool similar to <code>tor-resolve</code>. I.e. <code>too-to-resolve-dns-from-command-line domain-name</code> outputs IP address. - Not too helpful since iptables cannot redirect to a command line tool. For that, we’d need a tool that provides a listener.</li>
</ul>
<p>What’s not easy:</p>
<p>[1] Redirecting DNS (or any) traffic to such code. For that, a listener port which accepts traffic similar to Tor’s <code>DnsPort</code> would be required. Non-trivial.</p>
<p>But, if we want [1], that sounds like:</p>
<p>Use DNSCrypt.</p>
<p>While lnd’s approach is interesting, I don’t see any reason to cling on their code when there is DNSCrypt which is packaged in Debian already for years, which can do [1].</p>
<p>DNSCrypt is Open Source, supports TCP, can use outgoing port 443, therefore works over Tor, supports DNSSEC, encrypts communications between client and DNS server, therefore Tor exit relays cannot forge the DNS requests, is packaged in Debian already for years, was tested and documented in Whonix years ago, although documentation needs a revision.</p>
<p>DNSCrypt documentation: Already added some guesses. Was written when installed form source (complicated). Nowadays <code>sudo apt install dnscrypt-proxy</code> could suffice.</p>
<p>I could be wrong about some things about DNSCrypt and I happy to be corrected but for now it looks like it is doing all that is required.</p>
<p>Therefore, I’d suggest:</p>
<p>Step 1) get DNSCrypt working in a separate Whonix-Workstation as global (fallback, system default networking) DNS.</p>
<p>Step 2) try specific use case (dino-im)</p>
<p>Step 3) use linux user account or linux network namespaces (preferably) (similar to orjail. ( <a href="https://github.com/orjail/orjail" rel="nofollow noopener">https://github.com/orjail/orjail</a> / <a href="https://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840" class="inline-onebox">Managing programs without Tor DNS Support / orjail</a> )) so it only applies to dino-im and not globally.</p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/13</link>
        <pubDate>Wed, 17 Jul 2019 10:03:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-13</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Reply from the lightning network devs. One would query their server to find DNS nodes.</p>
<p><code>dig nodes.lightning.directory</code></p>
<p><a href="https://pastebin.com/XDRHL3Et" class="onebox" target="_blank" rel="nofollow noopener">https://pastebin.com/XDRHL3Et</a></p>
<p>The best option we have is to use their Tor DNS code  with the servers their package supports and somehow wrap it around just dino-im.</p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/12</link>
        <pubDate>Tue, 16 Jul 2019 23:32:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-12</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="9" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Can you translate this into user documentation (even non-Whonix)?</p>
</blockquote>
</aside>
<p>The best I could do is follow cloudflare’s guide for their onion resolver since the probability of running into an exit with TCP 53 permitted is low.</p>
<p>Problem is cloudflare requires running their binary daemon <code>cloudflared</code> which is <a href="https://developers.cloudflare.com/argo-tunnel/license/" rel="nofollow noopener">not</a> free software</p>
<p>Then we would need to redirect the DNS queries to their server with socat or systemd but in a way compatible with how Whonix works.</p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/11</link>
        <pubDate>Tue, 16 Jul 2019 23:22:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-11</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>HulaHoop via Whonix Forum:</p>
<blockquote>
<p>Just found out that DNS isn;t redirected over openvpn by default. Needs adding routes and other hackery. Not a great solution for widespread use anyway but explains why it didn’t work.</p>
</blockquote>
<p><a href="https://www.whonix.org/wiki/Tunnels/Introduction" rel="nofollow noopener">https://www.whonix.org/wiki/Tunnels/Introduction</a> covers DNS.</p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/10</link>
        <pubDate>Tue, 16 Jul 2019 16:57:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-10</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>HulaHoop via Whonix Forum:</p>
<blockquote>
<p>An interesting reply by a TPO dev on resolving all types of DNS records.</p>
<p><a href="https://lists.torproject.org/pipermail/tor-dev/2019-July/013938.html" rel="nofollow noopener">https://lists.torproject.org/pipermail/tor-dev/2019-July/013938.html</a></p>
<blockquote>
<p>A few exits allow connections to TCP port 53, so you can do arbitrary DNS queries to any DNS server using those exits.</p>
</blockquote>
</blockquote>
<p>Can you translate this into user documentation (even non-Whonix)?</p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/9</link>
        <pubDate>Tue, 16 Jul 2019 16:56:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-9</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Just found out that DNS isn;t redirected over openvpn by default. Needs adding routes and other hackery. Not a great solution for widespread use anyway but explains why it didn’t work.</p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/8</link>
        <pubDate>Tue, 16 Jul 2019 14:59:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-8</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>An interesting reply by a TPO dev on resolving all types of DNS records.</p>
<p><a href="https://lists.torproject.org/pipermail/tor-dev/2019-July/013938.html" class="onebox" target="_blank" rel="nofollow noopener">https://lists.torproject.org/pipermail/tor-dev/2019-July/013938.html</a></p>
<blockquote>
<p>A few exits allow connections to TCP port 53, so you can do arbitrary DNS queries to any DNS server using those exits.</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/7</link>
        <pubDate>Tue, 16 Jul 2019 14:16:51 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-7</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/lightningnetwork/lnd/issues/3317" target="_blank" rel="nofollow noopener">github.com/lightningnetwork/lnd</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/HulaHoopWhonix" rel="nofollow noopener">
<img src="https://avatars1.githubusercontent.com/u/7875239?v=2&amp;s=96" class="thumbnail onebox-avatar" width="420" height="420">
</a>

<h4><a href="https://github.com/lightningnetwork/lnd/issues/3317" target="_blank" rel="nofollow noopener">Issue: DNS over Tor</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/HulaHoopWhonix" target="_blank" rel="nofollow noopener">HulaHoopWhonix</a>
	on <a href="https://github.com/lightningnetwork/lnd/issues/3317" target="_blank" rel="nofollow noopener">2019-07-16</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Hi. Anonymity distro dev here. Your package for interacting with Tor for natively unsupported DNS record types looks interesting. I was...</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/6</link>
        <pubDate>Tue, 16 Jul 2019 14:12:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-6</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="2" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Meaning, directly using clearnet, not using Tor?</p>
<p>Probably not what you mean?</p>
</blockquote>
</aside>
<p>No of course not. I mean connecting to a DNS server over Tor rather than asking the exit to broker the request on its behalf.</p>
<aside class="quote no-group" data-post="4" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Looks like an application specific implementation which is not trivially refactored for use by arbitrary applications.</p>
</blockquote>
</aside>
<p>Dug in the code and found a dedicated package whose purpose is to interact with Tor for SRV requests among others. Looks geenric</p>
<p><a href="https://github.com/lightningnetwork/lnd/tree/c1c4b84757dd5b1e1fcb285b4a1fa6a56b35432c/tor" rel="nofollow noopener">https://github.com/lightningnetwork/lnd/tree/c1c4b84757dd5b1e1fcb285b4a1fa6a56b35432c/tor</a></p>
<aside class="quote no-group" data-post="4" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Looks like it needs special(?), specific DNS servers providing this service. Thereby DNS related non-stream isolation, identity correlation.</p>
</blockquote>
</aside>
<p>I’ll ask</p>
<aside class="quote no-group" data-post="4" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Reminding me about this gave me the idea that “hardened debian” (rename required) (<a href="http://forums.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/t/hardened-debian-security-focused-linux-distribution-based-on-debian-in-development-feedback-wanted/5943" rel="nofollow noopener">Hardened Debian - Security Focused Linux Distribution based on Debian - In Development - Feedback Wanted!</a>) might come with preconfigured with DNSCrypt + DNSSEC by default, but that is best discussed in a separate thread.</p>
</blockquote>
</aside>
<p>Feel free to  this part of the comment. Summary DNSSEC is extremely hierarchical and  relies on trusting  central authorities that its ultimately useless  in providing real/strong security , Not worth the deployment effort IMO</p>
<p><a href="https://moxie.org/blog/ssl-and-the-future-of-authenticity/" class="onebox" target="_blank" rel="nofollow noopener">https://moxie.org/blog/ssl-and-the-future-of-authenticity/</a></p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/5</link>
        <pubDate>Tue, 16 Jul 2019 14:01:10 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-5</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>I don’t understand the source code. Look for <code>tor.dns</code>, <code>defaultTorDNSHost</code>, <code>dnsHost</code> if anyone wants to check.</p>
<p>Looks like an application specific implementation which is not trivially refactored for use by arbitrary applications.</p>
<p>Feel free to ask upstream about it.</p>
<blockquote>
<p>defaultTorDNSHost              = “soa.nodes.lightning.directory”</p>
</blockquote>
<p>Looks like it needs special(?), specific DNS servers providing this service. Thereby DNS related non-stream isolation, identity correlation.</p>
<p>Since…</p>
<blockquote>
<p>Looks like it needs special(?), specific DNS servers providing this service. Thereby DNS related non-stream isolation, identity correlation.</p>
</blockquote>
<p>If that’s not a concern, another option would be to use DNSCrypt. Looks like nowadays DNSCrypt can do both encrypted DNS as well as DNSSEC (authentication). I haven’t look into it for years. See:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Secondary_DNS_Resolver" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:74/49;"><img src="https://www.whonix.org/w/images/b/ba/Connect-20333640.jpg" class="thumbnail"></div>

<h3><a href="https://www.whonix.org/wiki/Secondary_DNS_Resolver" target="_blank" rel="nofollow noopener">Secondary DNS Resolver</a></h3>

<p>Authenticated/Enecrypted DNS over Tor, DNSSEC over Tor, DNSCrypt by OpenDNS, httpsdnsd by JonDos</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Reminding me about this gave me the idea that “hardened debian” (rename required) (<a href="https://forums.whonix.org/t/hardened-debian-security-focused-linux-distribution-based-on-debian-in-development-feedback-wanted/5943" class="inline-onebox">Hardened Debian - Security Focused Linux Distribution based on Debian - In Development - Feedback Wanted!</a>) might come with preconfigured with DNSCrypt  + DNSSEC by default, but that is best discussed in a separate thread.</p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/4</link>
        <pubDate>Tue, 16 Jul 2019 10:15:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-4</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>On the other hand…</p>
<blockquote>
<p>–tor.dns=<br>
The DNS server as host:port that Tor will use for SRV queries - NOTE must have TCP resolution enabled (default: soa.nodes.lightning.directory:53)</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/3</link>
        <pubDate>Tue, 16 Jul 2019 09:06:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-3</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Certainty: low</p>
<aside class="quote no-group" data-post="1" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>The <code>--tor.socks</code> argument should point to the interface that the <code>Tor</code> daemon is listening on to proxy connections.</p>
</blockquote>
</aside>
<p>That would be which interface? In case of non-Whonix, plain Debian for example that would probably be localhost or eth0.</p>
<aside class="quote no-group" data-post="1" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>connect directly</p>
</blockquote>
</aside>
<p>Meaning, directly using clearnet, not using Tor?</p>
<p>Probably not what you mean?</p>
<p>Related:<br>
<a href="https://trac.torproject.org/projects/tor/ticket/7829" rel="nofollow noopener">Support all kinds of DNS over Tor</a></p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/2</link>
        <pubDate>Tue, 16 Jul 2019 09:04:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-2</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
      <item>
        <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Cam across some workarounf for SRV requests over Tor:</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/lightningnetwork/lnd/blob/master/docs/configuring_tor.md" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/lightningnetwork/lnd/blob/master/docs/configuring_tor.md" target="_blank" rel="nofollow noopener">lightningnetwork/lnd/blob/master/docs/configuring_tor.md</a></h4>
<pre><code class="lang-md"># Table of Contents
1. [Overview](#overview)
2. [Getting Started](#getting-started)
3. [Tor Stream Isolation](#tor-stream-isolation)
4. [Listening for Inbound Connections](#listening-for-inbound-connections)

## Overview

`lnd` currently has complete support for using Lightning over
[Tor](https://www.torproject.org/). Usage of Lightning over Tor is valuable as
routing nodes no longer need to potentially expose their location via their
advertised IP address. Additionally, leaf nodes can also protect their location
by using Tor for anonymous networking to establish connections.

With widespread usage of Onion Services within the network, concerns about the
difficulty of proper NAT traversal are alleviated, as usage of onion services
allows nodes to accept inbound connections even if they're behind a NAT. At the
time of writing this documentation, `lnd` supports both types of onion services:
v2 and v3.

</code></pre>

  This file has been truncated. <a href="https://github.com/lightningnetwork/lnd/blob/master/docs/configuring_tor.md" target="_blank" rel="nofollow noopener">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<blockquote>
<p>Outbound connections are possible with the use of the <code>--tor.socks</code> and <code>--tor.dns</code> arguments. The <code>--tor.socks</code> argument should point to the interface that the <code>Tor</code> daemon is listening on to proxy connections. The <code>--tor.dns</code> flag is required in order to be able to properly automatically bootstrap a set of peer connections. The <code>tor</code> daemon doesn’t currently support proxying <code>SRV</code> queries over Tor. So instead, we need to connect directly to the authoritative DNS server over TCP, in order query for <code>SRV</code> records that we can use to bootstrap our connections.</p>
</blockquote>
<p>Any idea if it can work inside WS with stacked Tor?</p>
          <p><a href="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/1</link>
        <pubDate>Tue, 16 Jul 2019 02:21:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7757-1</guid>
        <source url="http://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757.rss">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</source>
      </item>
  </channel>
</rss>
