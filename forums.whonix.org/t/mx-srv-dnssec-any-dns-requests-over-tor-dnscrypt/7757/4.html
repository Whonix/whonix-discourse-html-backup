<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt - #4 by Patrick - Development - Whonix Forum</title>
    <meta name="description" content="Cam across some workarounf for SRV requests over Tor: 



Outbound connections are possible with the use of the --tor.socks and --tor.dns arguments. The --tor.socks argument should point to the interface that the Tor dae&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../7757.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt&#39;" href="../7757.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/4" />
<meta name="twitter:url" content="https://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757/4" />
<meta property="og:title" content="MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt" />
<meta name="twitter:title" content="MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt" />
<meta property="og:description" content="I don’t understand the source code. Look for tor.dns, defaultTorDNSHost, dnsHost if anyone wants to check.  Looks like an application specific implementation which is not trivially refactored for use by arbitrary applications.  Feel free to ask upstream about it.   defaultTorDNSHost              = “soa.nodes.lightning.directory”   Looks like it needs special(?), specific DNS servers providing this service. Thereby DNS related non-stream isolation, identity correlation.  Since…   Looks like it ne..." />
<meta name="twitter:description" content="I don’t understand the source code. Look for tor.dns, defaultTorDNSHost, dnsHost if anyone wants to check.  Looks like an application specific implementation which is not trivially refactored for use by arbitrary applications.  Feel free to ask upstream about it.   defaultTorDNSHost              = “soa.nodes.lightning.directory”   Looks like it needs special(?), specific DNS servers providing this service. Thereby DNS related non-stream isolation, identity correlation.  Since…   Looks like it ne..." />
<meta property="article:published_time" content="2019-07-16T10:15:52+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="next" href="../77574658.html?page=2">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../7757.html">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-16T02:21:57Z' class='post-time'>
                July 16, 2019,  2:21am
              </time>
              <meta itemprop='dateModified' content='2019-07-17T18:14:43Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Cam across some workarounf for SRV requests over Tor:</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/lightningnetwork/lnd/blob/master/docs/configuring_tor.md" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../../external.html?link=https://github.com/lightningnetwork/lnd/blob/master/docs/configuring_tor.md" target="_blank" rel="nofollow noopener">lightningnetwork/lnd/blob/master/docs/configuring_tor.md</a></h4>
<pre><code class="lang-md"># Table of Contents
1. [Overview](#overview)
2. [Getting Started](#getting-started)
3. [Tor Stream Isolation](#tor-stream-isolation)
4. [Listening for Inbound Connections](#listening-for-inbound-connections)

## Overview

`lnd` currently has complete support for using Lightning over
[Tor](https://www.torproject.org/). Usage of Lightning over Tor is valuable as
routing nodes no longer need to potentially expose their location via their
advertised IP address. Additionally, leaf nodes can also protect their location
by using Tor for anonymous networking to establish connections.

With widespread usage of Onion Services within the network, concerns about the
difficulty of proper NAT traversal are alleviated, as usage of onion services
allows nodes to accept inbound connections even if they're behind a NAT. At the
time of writing this documentation, `lnd` supports both types of onion services:
v2 and v3.

</code></pre>

  This file has been truncated. <a href="../../../../external.html?link=https://github.com/lightningnetwork/lnd/blob/master/docs/configuring_tor.md" target="_blank" rel="nofollow noopener">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<blockquote>
<p>Outbound connections are possible with the use of the <code>--tor.socks</code> and <code>--tor.dns</code> arguments. The <code>--tor.socks</code> argument should point to the interface that the <code>Tor</code> daemon is listening on to proxy connections. The <code>--tor.dns</code> flag is required in order to be able to properly automatically bootstrap a set of peer connections. The <code>tor</code> daemon doesn’t currently support proxying <code>SRV</code> queries over Tor. So instead, we need to connect directly to the authoritative DNS server over TCP, in order query for <code>SRV</code> records that we can use to bootstrap our connections.</p>
</blockquote>
<p>Any idea if it can work inside WS with stacked Tor?</p>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../client-server-instant-messengers-im/3081/31.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../client-server-instant-messengers-im/3081/31.html'>
                      <span itemprop='name'>Client-Server Instant Messengers (IM)</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../use-dnscrypt-by-default-in-kicksecure-not-whonix/8117/2.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../use-dnscrypt-by-default-in-kicksecure-not-whonix/8117/2.html'>
                      <span itemprop='name'>Use DNSCrypt by default in Kicksecure? (not Whonix!)</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/3.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/3.html'>
                      <span itemprop='name'>Setting up DNSCrypt on Whonix Gateway. And also another question</span>
                    </a>
                    <meta itemprop='position' content='4'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../whonix-desktop-installer-with-calamares-field-report/7350/98.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../whonix-desktop-installer-with-calamares-field-report/7350/98.html'>
                      <span itemprop='name'>Whonix Desktop Installer with Calamares - field report</span>
                    </a>
                    <meta itemprop='position' content='5'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-16T09:04:53Z' class='post-time'>
                July 16, 2019,  9:04am
              </time>
              <meta itemprop='dateModified' content='2019-07-16T09:04:53Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Certainty: low</p>
<aside class="quote no-group" data-post="1" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>The <code>--tor.socks</code> argument should point to the interface that the <code>Tor</code> daemon is listening on to proxy connections.</p>
</blockquote>
</aside>
<p>That would be which interface? In case of non-Whonix, plain Debian for example that would probably be localhost or eth0.</p>
<aside class="quote no-group" data-post="1" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>connect directly</p>
</blockquote>
</aside>
<p>Meaning, directly using clearnet, not using Tor?</p>
<p>Probably not what you mean?</p>
<p>Related:<br>
<a href="../../../../external.html?link=https://trac.torproject.org/projects/tor/ticket/7829" rel="nofollow noopener">Support all kinds of DNS over Tor</a></p>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-16T09:06:27Z' class='post-time'>
                July 16, 2019,  9:06am
              </time>
              <meta itemprop='dateModified' content='2019-07-16T09:06:27Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>On the other hand…</p>
<blockquote>
<p>–tor.dns=<br>
The DNS server as host:port that Tor will use for SRV queries - NOTE must have TCP resolution enabled (default: soa.nodes.lightning.directory:53)</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-16T10:15:52Z' class='post-time'>
                July 16, 2019, 10:15am
              </time>
              <meta itemprop='dateModified' content='2019-07-16T10:15:52Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I don’t understand the source code. Look for <code>tor.dns</code>, <code>defaultTorDNSHost</code>, <code>dnsHost</code> if anyone wants to check.</p>
<p>Looks like an application specific implementation which is not trivially refactored for use by arbitrary applications.</p>
<p>Feel free to ask upstream about it.</p>
<blockquote>
<p>defaultTorDNSHost              = “soa.nodes.lightning.directory”</p>
</blockquote>
<p>Looks like it needs special(?), specific DNS servers providing this service. Thereby DNS related non-stream isolation, identity correlation.</p>
<p>Since…</p>
<blockquote>
<p>Looks like it needs special(?), specific DNS servers providing this service. Thereby DNS related non-stream isolation, identity correlation.</p>
</blockquote>
<p>If that’s not a concern, another option would be to use DNSCrypt. Looks like nowadays DNSCrypt can do both encrypted DNS as well as DNSSEC (authentication). I haven’t look into it for years. See:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://www.whonix.org/wiki/Secondary_DNS_Resolver" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:74/49;"><img src="../../../../external.html?link=https://www.whonix.org/w/images/b/ba/Connect-20333640.jpg" class="thumbnail"></div>

<h3><a href="../../../../external.html?link=https://www.whonix.org/wiki/Secondary_DNS_Resolver" target="_blank" rel="nofollow noopener">Secondary DNS Resolver</a></h3>

<p>Authenticated/Enecrypted DNS over Tor, DNSSEC over Tor, DNSCrypt by OpenDNS, httpsdnsd by JonDos</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Reminding me about this gave me the idea that “hardened debian” (rename required) (<a href="../../kicksecure-security-focused-linux-distribution-based-on-debian-in-development-feedback-wanted/5943.html" class="inline-onebox">Hardened Debian - Security Focused Linux Distribution based on Debian - In Development - Feedback Wanted!</a>) might come with preconfigured with DNSCrypt  + DNSSEC by default, but that is best discussed in a separate thread.</p>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-16T14:01:10Z' class='post-time'>
                July 16, 2019,  2:01pm
              </time>
              <meta itemprop='dateModified' content='2019-07-16T16:59:15Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="2" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Meaning, directly using clearnet, not using Tor?</p>
<p>Probably not what you mean?</p>
</blockquote>
</aside>
<p>No of course not. I mean connecting to a DNS server over Tor rather than asking the exit to broker the request on its behalf.</p>
<aside class="quote no-group" data-post="4" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Looks like an application specific implementation which is not trivially refactored for use by arbitrary applications.</p>
</blockquote>
</aside>
<p>Dug in the code and found a dedicated package whose purpose is to interact with Tor for SRV requests among others. Looks geenric</p>
<p><a href="../../../../external.html?link=https://github.com/lightningnetwork/lnd/tree/c1c4b84757dd5b1e1fcb285b4a1fa6a56b35432c/tor" rel="nofollow noopener">https://github.com/lightningnetwork/lnd/tree/c1c4b84757dd5b1e1fcb285b4a1fa6a56b35432c/tor</a></p>
<aside class="quote no-group" data-post="4" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Looks like it needs special(?), specific DNS servers providing this service. Thereby DNS related non-stream isolation, identity correlation.</p>
</blockquote>
</aside>
<p>I’ll ask</p>
<aside class="quote no-group" data-post="4" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Reminding me about this gave me the idea that “hardened debian” (rename required) (<a href="../../../../external.html?link=http://forums.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/t/hardened-debian-security-focused-linux-distribution-based-on-debian-in-development-feedback-wanted/5943" rel="nofollow noopener">Hardened Debian - Security Focused Linux Distribution based on Debian - In Development - Feedback Wanted!</a>) might come with preconfigured with DNSCrypt + DNSSEC by default, but that is best discussed in a separate thread.</p>
</blockquote>
</aside>
<p>Feel free to  this part of the comment. Summary DNSSEC is extremely hierarchical and  relies on trusting  central authorities that its ultimately useless  in providing real/strong security , Not worth the deployment effort IMO</p>
<p><a href="../../../../external.html?link=https://moxie.org/blog/ssl-and-the-future-of-authenticity/" class="onebox" target="_blank" rel="nofollow noopener">https://moxie.org/blog/ssl-and-the-future-of-authenticity/</a></p>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-16T14:12:43Z' class='post-time'>
                July 16, 2019,  2:12pm
              </time>
              <meta itemprop='dateModified' content='2019-07-16T14:12:43Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubissue">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/lightningnetwork/lnd/issues/3317" target="_blank" rel="nofollow noopener">github.com/lightningnetwork/lnd</a>
  </header>
  <article class="onebox-body">
    <a href="../../../../external.html?link=https://github.com/HulaHoopWhonix" rel="nofollow noopener">
<img src="../../../../external.html?link=https://avatars1.githubusercontent.com/u/7875239?v=2&amp;s=96" class="thumbnail onebox-avatar" width="420" height="420">
</a>

<h4><a href="../../../../external.html?link=https://github.com/lightningnetwork/lnd/issues/3317" target="_blank" rel="nofollow noopener">Issue: DNS over Tor</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="../../../../external.html?link=https://github.com/HulaHoopWhonix" target="_blank" rel="nofollow noopener">HulaHoopWhonix</a>
	on <a href="../../../../external.html?link=https://github.com/lightningnetwork/lnd/issues/3317" target="_blank" rel="nofollow noopener">2019-07-16</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Hi. Anonymity distro dev here. Your package for interacting with Tor for natively unsupported DNS record types looks interesting. I was...</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-16T14:16:51Z' class='post-time'>
                July 16, 2019,  2:16pm
              </time>
              <meta itemprop='dateModified' content='2019-07-16T14:16:51Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>An interesting reply by a TPO dev on resolving all types of DNS records.</p>
<p><a href="../../../../external.html?link=https://lists.torproject.org/pipermail/tor-dev/2019-July/013938.html" class="onebox" target="_blank" rel="nofollow noopener">https://lists.torproject.org/pipermail/tor-dev/2019-July/013938.html</a></p>
<blockquote>
<p>A few exits allow connections to TCP port 53, so you can do arbitrary DNS queries to any DNS server using those exits.</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-16T14:59:26Z' class='post-time'>
                July 16, 2019,  2:59pm
              </time>
              <meta itemprop='dateModified' content='2019-07-16T14:59:26Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Just found out that DNS isn;t redirected over openvpn by default. Needs adding routes and other hackery. Not a great solution for widespread use anyway but explains why it didn’t work.</p>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-16T16:56:00Z' class='post-time'>
                July 16, 2019,  4:56pm
              </time>
              <meta itemprop='dateModified' content='2019-07-16T16:56:00Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>HulaHoop via Whonix Forum:</p>
<blockquote>
<p>An interesting reply by a TPO dev on resolving all types of DNS records.</p>
<p><a href="../../../../external.html?link=https://lists.torproject.org/pipermail/tor-dev/2019-July/013938.html" rel="nofollow noopener">https://lists.torproject.org/pipermail/tor-dev/2019-July/013938.html</a></p>
<blockquote>
<p>A few exits allow connections to TCP port 53, so you can do arbitrary DNS queries to any DNS server using those exits.</p>
</blockquote>
</blockquote>
<p>Can you translate this into user documentation (even non-Whonix)?</p>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-16T16:57:00Z' class='post-time'>
                July 16, 2019,  4:57pm
              </time>
              <meta itemprop='dateModified' content='2019-07-16T16:57:00Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>HulaHoop via Whonix Forum:</p>
<blockquote>
<p>Just found out that DNS isn;t redirected over openvpn by default. Needs adding routes and other hackery. Not a great solution for widespread use anyway but explains why it didn’t work.</p>
</blockquote>
<p><a href="../../../../external.html?link=https://www.whonix.org/wiki/Tunnels/Introduction" rel="nofollow noopener">https://www.whonix.org/wiki/Tunnels/Introduction</a> covers DNS.</p>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-16T23:22:32Z' class='post-time'>
                July 16, 2019, 11:22pm
              </time>
              <meta itemprop='dateModified' content='2019-07-16T23:22:32Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="9" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Can you translate this into user documentation (even non-Whonix)?</p>
</blockquote>
</aside>
<p>The best I could do is follow cloudflare’s guide for their onion resolver since the probability of running into an exit with TCP 53 permitted is low.</p>
<p>Problem is cloudflare requires running their binary daemon <code>cloudflared</code> which is <a href="../../../../external.html?link=https://developers.cloudflare.com/argo-tunnel/license/" rel="nofollow noopener">not</a> free software</p>
<p>Then we would need to redirect the DNS queries to their server with socat or systemd but in a way compatible with how Whonix works.</p>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-16T23:32:46Z' class='post-time'>
                July 16, 2019, 11:32pm
              </time>
              <meta itemprop='dateModified' content='2019-07-16T23:32:46Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Reply from the lightning network devs. One would query their server to find DNS nodes.</p>
<p><code>dig nodes.lightning.directory</code></p>
<p><a href="../../../../external.html?link=https://pastebin.com/XDRHL3Et" class="onebox" target="_blank" rel="nofollow noopener">https://pastebin.com/XDRHL3Et</a></p>
<p>The best option we have is to use their Tor DNS code  with the servers their package supports and somehow wrap it around just dino-im.</p>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-17T10:03:44Z' class='post-time'>
                July 17, 2019, 10:03am
              </time>
              <meta itemprop='dateModified' content='2019-07-17T10:03:44Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>HulaHoop via Whonix Forum:&gt;</p>
<blockquote>
<p>I mean connecting to a DNS server over Tor rather than asking the exit to broker the request on its behalf.</p>
</blockquote>
<p>Use DNSCrypt.</p>
<blockquote>
<p>probability of running into an exit with TCP 53 permitted is low.</p>
</blockquote>
<p>Why is that?</p>
<blockquote>
<p>probability of running into an exit with TCP 53 permitted is low.</p>
</blockquote>
<p>Doesn’t Tor pick an exit relay depending on the one which supports the port the Tor client wants to use?</p>
<blockquote>
<p>Then we would need to redirect the DNS queries to their server with socat or systemd but in a way compatible with how Whonix works.</p>
</blockquote>
<p>Sounds like:</p>
<p>Use DNSCrypt.</p>
<blockquote>
<p>The best option we have is to use their Tor DNS code  with the servers their package supports and somehow wrap it around just dino-im.</p>
</blockquote>
<p>When taking their code the outcome could be:</p>
<ul>
<li>application specific code for dino-im (or similar)</li>
<li>a standalone command line tool similar to <code>tor-resolve</code>. I.e. <code>too-to-resolve-dns-from-command-line domain-name</code> outputs IP address. - Not too helpful since iptables cannot redirect to a command line tool. For that, we’d need a tool that provides a listener.</li>
</ul>
<p>What’s not easy:</p>
<p>[1] Redirecting DNS (or any) traffic to such code. For that, a listener port which accepts traffic similar to Tor’s <code>DnsPort</code> would be required. Non-trivial.</p>
<p>But, if we want [1], that sounds like:</p>
<p>Use DNSCrypt.</p>
<p>While lnd’s approach is interesting, I don’t see any reason to cling on their code when there is DNSCrypt which is packaged in Debian already for years, which can do [1].</p>
<p>DNSCrypt is Open Source, supports TCP, can use outgoing port 443, therefore works over Tor, supports DNSSEC, encrypts communications between client and DNS server, therefore Tor exit relays cannot forge the DNS requests, is packaged in Debian already for years, was tested and documented in Whonix years ago, although documentation needs a revision.</p>
<p>DNSCrypt documentation: Already added some guesses. Was written when installed form source (complicated). Nowadays <code>sudo apt install dnscrypt-proxy</code> could suffice.</p>
<p>I could be wrong about some things about DNSCrypt and I happy to be corrected but for now it looks like it is doing all that is required.</p>
<p>Therefore, I’d suggest:</p>
<p>Step 1) get DNSCrypt working in a separate Whonix-Workstation as global (fallback, system default networking) DNS.</p>
<p>Step 2) try specific use case (dino-im)</p>
<p>Step 3) use linux user account or linux network namespaces (preferably) (similar to orjail. ( <a href="../../../../external.html?link=https://github.com/orjail/orjail" rel="nofollow noopener">https://github.com/orjail/orjail</a> / <a href="../../managing-programs-without-tor-dns-support-orjail/4840.html" class="inline-onebox">Managing programs without Tor DNS Support / orjail</a> )) so it only applies to dino-im and not globally.</p>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-17T12:11:40Z' class='post-time'>
                July 17, 2019, 12:11pm
              </time>
              <meta itemprop='dateModified' content='2019-07-17T12:11:40Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="13" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Why is that?</p>
</blockquote>
</aside>
<p>Teor said so, but on the other hand even the reduced exit policy allows TCP 53</p>
<p><a href="../../../../external.html?link=https://trac.torproject.org/projects/tor/wiki/doc/ReducedExitPolicy" class="onebox" target="_blank" rel="nofollow noopener">https://trac.torproject.org/projects/tor/wiki/doc/ReducedExitPolicy</a></p>
<aside class="quote no-group" data-post="13" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>DNSCrypt is Open Source, supports TCP, can use outgoing port 443, therefore works over Tor, supports DNSSEC, encrypts communications between client and DNS server, therefore Tor exit relays cannot forge the DNS requests, is packaged in Debian already for years, was tested and documented in Whonix years ago, although documentation needs a revision.</p>
</blockquote>
</aside>
<p>OK sounds perfect. What steps do I need to do to make it a fallback? Will it be automatically used for a program that can’t resolve through Tor?</p>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-17T13:32:49Z' class='post-time'>
                July 17, 2019,  1:32pm
              </time>
              <meta itemprop='dateModified' content='2019-07-17T13:32:49Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>starting dnscrypt wth tcp gives this:</p>
<pre><code>user@host:~$ sudo dnscrypt-proxy --tcp-only
flag provided but not defined: 
</code></pre>
<p>Testing site report with systemctl reporting it as enabled (which it would be with any daemon on Debian) I get this:</p>
<pre><code>You aren't using OpenDNS yet. Let's fix that
If you haven't restarted your computer yet, please do that now</code></pre>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-17T14:59:00Z' class='post-time'>
                July 17, 2019,  2:59pm
              </time>
              <meta itemprop='dateModified' content='2019-07-17T15:18:23Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="14" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>What steps do I need to do to make it a fallback?</p>
</blockquote>
</aside>
<p>That’s kinda already an alternative step 3.<br>
Not sure. Perhaps leaving /etc/resolv.conf as is but only appending it.</p>
<aside class="quote no-group" data-post="14" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Will it be automatically used for a program that can’t resolve through Tor?</p>
</blockquote>
</aside>
<p>Instructions as is would replace system Tor DNS with DNScrypt.</p>
<aside class="quote no-group" data-post="15" data-topic="7757">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>user@host:~$ sudo dnscrypt-proxy --tcp-only</p>
</blockquote>
</aside>
<p>That’s not how it is supposed to be used nowadays anymore since packaged for Debian there is also a systemd unit file. See: <code>apt-file list dnscrypt-proxy</code></p>
<p>Interesting files to look at:</p>
<ul>
<li>/etc/dnscrypt-proxy/dnscrypt-proxy.toml</li>
<li>/lib/systemd/system/dnscrypt-proxy.service</li>
<li>/lib/systemd/system/dnscrypt-proxy.socket</li>
<li>and the example configs in folder /usr/share/doc/dnscrypt-proxy/examples/</li>
</ul>
<p>Add to /etc/dnscrypt-proxy/dnscrypt-proxy.toml at the very top most likely (since this is “general” and not a [section]).</p>
<pre><code>force_tcp = true</code></pre>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-17T17:56:44Z' class='post-time'>
                July 17, 2019,  5:56pm
              </time>
              <meta itemprop='dateModified' content='2019-07-17T17:56:44Z'>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>DNSCrypt documentation for Whonix and the whole page was revised. DNSCrypt are now good enough to make it work.</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://www.whonix.org/wiki/Alternative_DNS_Resolver" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:94/62;"><img src="../../../../external.html?link=https://www.whonix.org/w/images/b/ba/Connect-20333640.jpg" class="thumbnail"></div>

<h3><a href="../../../../external.html?link=https://www.whonix.org/wiki/Alternative_DNS_Resolver" target="_blank" rel="nofollow noopener">Alternative DNS Resolver</a></h3>

<p>Authenticated/Encrypted DNS over Tor, DNSSEC over Tor, DNSCrypt by OpenDNS, httpsdnsd by JonDos</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Note: don’t skip the introduction chapter warning.</p>
<blockquote>
<p>Note that most applications, such as <a href="../../../../external.html?link=https://www.whonix.org/wiki/Tor_Browser" rel="nofollow noopener">Tor Browser</a>, will <strong>not</strong> <em>automatically</em> profit from setting up an alternative DNS resolver.</p>
<ul>
<li>This is because applications in Whonix ™ are configured to use <code>SocksPort</code> instead of <code>Trans</code> - or <code>DnsPort</code> , see <a href="../../../../external.html?link=https://www.whonix.org/wiki/Stream_Isolation" rel="nofollow noopener">Stream Isolation</a> for details.</li>
<li>Another reason is, that most applications do not yet make use of authenticated DNS (DNSSEC).</li>
</ul>
<p>However, you could use alternative DNS revolvers with these applications when <a href="../../../../external.html?link=https://www.whonix.org/wiki/Stream_Isolation/Disable_Easy" rel="nofollow noopener">deconfiguring</a> socks proxy settings.</p>
</blockquote>
<p>Users can now set up encrypted DNS over Tor using any DNS server from DNSCrypt list <a href="../../../../external.html?link=https://dnscrypt.info/public-servers/" rel="nofollow noopener">https://dnscrypt.info/public-servers/</a>. Any type of DNS (such as MX, tested) should be possible to resolve. Bonus: DNSSEC also working.</p>
<hr>
<p>They way Tor implemented <code>DnsPort</code> is seems it will not be possible to use DNSCrypt as a fallback only. <code>dig MX google.com</code> will answer and claim there is no MX DNS entries for that domain. Therefore, no other DNS server from /etc/resolv.conf will be tried out. This might be a good default for Tor connectivity since applications might re-try other types of DNS, hopefully Tor supported ones. Might be the reason it is acting in that way. Any change by upstream might be bad for Tor connectivity form their point of view. A configuration option would change the web fingerprint (actually any "use another DNS resolver other than Tor as a fallback would change the web fingerprint).</p>
<p>For now it is either the whole system default networking (i.e. not Tor Browser etc. by default since these are configured to use SocksPort) Whonix-Workstation uses Tor <code>DnsPort</code> OR DNSCrypt.</p>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../client-server-instant-messengers-im/3081/32.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../client-server-instant-messengers-im/3081/32.html'>
                      <span itemprop='name'>Client-Server Instant Messengers (IM)</span>
                    </a>
                    <meta itemprop='position' content='6'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-17T18:02:55Z' class='post-time'>
                July 17, 2019,  6:02pm
              </time>
              <meta itemprop='dateModified' content='2019-07-17T18:02:55Z'>
          <span itemprop='position'>#18</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a href="../../../../external.html?link=https://packages.debian.org/sid/libresolv-wrapper" rel="nofollow noopener">libresolv-wrapper</a> does <a href="../../../../external.html?link=https://bugzilla.samba.org/show_bug.cgi?id=13482" rel="nofollow noopener">not work with curl </a> but perhaps with dino-im?</p>
<p>If that was to work, then an alternative resolv.conf elsewhere could be used by dino-im and thereby could use TCP and DNS (through DNSCrypt) through Tor’s <code>TransPort</code>.</p>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-17T18:31:23Z' class='post-time'>
                July 17, 2019,  6:31pm
              </time>
              <meta itemprop='dateModified' content='2019-07-17T18:31:23Z'>
          <span itemprop='position'>#19</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks for documenting. Great job. There are some quirks I’m seeing that need some  troubleshooting before it works on my end and I can test.</p>
<hr>
<p>OK so dnscrypt daemon is running but it is complaining about tcp sockets</p>
<pre><code> dnscrypt-proxy.socket - dnscrypt-proxy listening socket
   Loaded: loaded (/lib/systemd/system/dnscrypt-proxy.socket; enabled; vendor preset: enabled)
   Active: active (listening) since Wed 2019-07-17 18:13:24 UTC; 7min ago
     Docs: https://github.com/jedisct1/dnscrypt-proxy/wiki
   Listen: 127.0.2.1:53 (Stream)
           127.0.2.1:53 (Datagram)
    Tasks: 0 (limit: 2355)
   Memory: 0B
   CGroup: /system.slice/dnscrypt-proxy.socket

Jul 17 18:13:24 host systemd[1]: dnscrypt-proxy.socket: TCP_DEFER_ACCEPT failed: Protocol not available
Jul 17 18:13:24 host systemd[1]: dnscrypt-proxy.socket: TCP_NODELAY failed: Protocol not available
Jul 17 18:13:24 host systemd[1]: Listening on dnscrypt-proxy listening socket.
</code></pre>
<p>Its probably non-functional with the output:</p>
<pre><code>; &lt;&lt;&gt;&gt; DiG 9.11.5-P4-3-Debian &lt;&lt;&gt;&gt; +multiline . DNSKEY
;; global options: +cmd
;; connection timed out; no servers could be reached</code></pre>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7757.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-17T19:00:52Z' class='post-time'>
                July 17, 2019,  7:00pm
              </time>
              <meta itemprop='dateModified' content='2019-07-17T19:00:52Z'>
          <span itemprop='position'>#20</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I saw these before. Dunno how I fixed those. Can’t reproduce. Even though I am using a fresh VM (Qubes DispVM), reapplying my own instructions copy/paste.</p>
<p>Forgot the restart commands most likely. Now added.</p>
<pre><code>sudo systemctl restart dnscrypt-proxy.service
sudo systemctl restart dnscrypt-proxy.socket
</code></pre>
<p>But not sure in which order.<br>
Maybe that helps.</p>
<p><a href="../../../../external.html?link=https://github.com/jedisct1/dnscrypt-proxy/wiki/systemd" rel="nofollow noopener">https://github.com/jedisct1/dnscrypt-proxy/wiki/systemd</a> says TCP_DEFER_ACCEPT and TCP_NODELAY don’t matter. Not sure it mattered for me.</p>
<p>Also, copy/paste FTW. Added another hint for a likely mistake to be made.</p>
<blockquote>
<p>It is not 127.0.0.1 . It really is 127.0.<strong>2</strong>.1.</p>
</blockquote>
<p>Did you comment out the cloudflare default server?</p>
        </div>

        <meta itemprop='headline' content='MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../77574658.html?page=2">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
