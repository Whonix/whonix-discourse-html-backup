<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Tor Browser getClientRects fingerprinting</title>
    <link>http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158</link>
    <description>OK thanks. If you couldn&#39;t work it out, my chances are minimal to none.

BTW was this issue below ever fixed in Tor Browser? If not, it&#39;s a major oversight (and we should also document it). 

I note it is the usual story i.e. JavaScript-based, just like the mouse tracking i.e. JS is a tracking nightmare and should basically never be allowed unless absolutely necessary since it is at the core of most tracking efforts.

  http://jcarlosnorte.com/security/2016/03/06/advanced-tor-browser-fingerprinting.html
  https://developer.mozilla.org/en-US/docs/Web/API/Element/getClientRects

&gt; **getClientRects fingerprinting**
&gt; 
&gt; The most intersting fingerprinting vector I found on Tor Browser is getClientRects. Is strange that reading back from a canvas has been prevented but simply asking the browser javascript API how a specific DOM elements has been drawn on the screen has not been prevented or protected in any way.
&gt; 
&gt; getClientRects allows to get the exact pixel position and size of the box of a given DOM element. Depending on the resolution, font configuration and lots of other factors, the results of getClientRects are different, allowing for a very quick and easy fingerprinting vector, even better than the canvas fingerprinting that is fixed.</description>
    <language>en</language>
    <lastBuildDate>Wed, 29 Sep 2021 14:00:46 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Tor Browser getClientRects fingerprinting</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Updated my previous post just now.</p>
          <p><a href="http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158/6</link>
        <pubDate>Wed, 29 Sep 2021 14:00:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-12158-6</guid>
        <source url="http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158.rss">Tor Browser getClientRects fingerprinting</source>
      </item>
      <item>
        <title>Tor Browser getClientRects fingerprinting</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Seems like a non-issue in Whonix.</p>
<p>For me, <a href="https://browserleaks.com/rects" class="inline-onebox">ClientRects Fingerprinting - BrowserLeaks</a> shows the same <code>Full Hash</code> in,</p>
<ul>
<li>a Qubes-Whonix-Workstation Tor Browser as well as in a</li>
<li>a Non-Qubes-Whonix-Workstation Tor Browser</li>
</ul>
<p>on completely different hardware.</p>
<p>I don’t really want to publish my <code>Full Hash</code> and if this thing is real then I would discourage anyone else to abstain from this too as this could link your <code>Full Hash</code> to your unchangeable Tor Browser “pseudonym” (<code>Full Hash</code>). It would be similar to a “permanent IP address”. Running the <code>Full Hash</code> through a hashing function such as sha512 also would not help. Any adversary that knew the full hash could easily run it themselves through sha512. Comparing the secret securely without revealing it would require something innovative such as zero knowledge proofs but I am not aware of any  application that allows to do that.</p>
<p>Excluded possibilities:</p>
<ul>
<li>Test totally broken, showing every visitor the same value. Imagine that. We would worry about nothing. This is clearly not the case since the test shows different things for different browsers for example when viewing the test website through <a href="http://web.archive.org">web.archive.org</a> so it’s fingerprinting something.</li>
</ul>
          <p><a href="http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158/5</link>
        <pubDate>Mon, 23 Aug 2021 20:48:37 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-12158-5</guid>
        <source url="http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158.rss">Tor Browser getClientRects fingerprinting</source>
      </item>
      <item>
        <title>Tor Browser getClientRects fingerprinting</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>Mozilla bug (no action for 2 years, so don’t hold your breath):</p>
<aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="https://bugzilla.mozilla.org/extensions/BMO/web/images/favicon.ico" class="site-icon" width="16" height="16">

      <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1507879" target="_blank" rel="noopener">bugzilla.mozilla.org</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1507879" target="_blank" rel="noopener">1507879 - Investigate getClientRects for fingerprinting</a></h3>

  <p>NEW (nobody) in Core - DOM: CSS Object Model. Last updated 2020-04-23.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>I note the CanvasBlocker addon randomizes those values:</p>
<blockquote>
<p>CanvasBlocker randomizes the values (but doesn’t change those three values that are only 2 decimal places)</p>
<ul>
<li>
<p>looks like it fuzzes by +/- 0.100 (we could easily check the code on github)</p>
<p>original ticket: <a href="https://github.com/kkapsner/CanvasBlocker/issues/236" class="inline-onebox">getClientRects() provides a persistent fingerprint · Issue #236 · kkapsner/CanvasBlocker · GitHub</a><br>
other tickets / teething issues etc (as a heads up)<br>
<a href="https://github.com/kkapsner/CanvasBlocker/issues/275" class="inline-onebox">Any jQuery UI website trigger the domRect warning · Issue #275 · kkapsner/CanvasBlocker · GitHub</a> (fixed)<br>
<a href="https://github.com/kkapsner/CanvasBlocker/issues/270" class="inline-onebox">New DomRect Protecting Feature Is Breaking StartPage · Issue #270 · kkapsner/CanvasBlocker · GitHub</a> (breaks startpage, fixed)</p>
</li>
</ul>
</blockquote>
<p>Also note this (old) research which suggests TBB fingerprinting defenses are inadequate and can be defeated, leading to clear differences between using TBB on Tails vs Whonix vs TBB in isolation for example:</p>
<aside class="onebox githubfolder">
  <header class="source">
      <img src="https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="16" height="16">

      <a href="https://github.com/KOLANICH-research/Article-2015-Dull-captaincy-or-the-way-Tor-Project-fights-browser-fingerprinting" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <img src="https://opengraph.githubassets.com/12cef8094d9ae8aa4794fe4cebc744d0f50bcb20526996c8316a88b0d4ee76da/KOLANICH-research/Article-2015-Dull-captaincy-or-the-way-Tor-Project-fights-browser-fingerprinting" class="thumbnail onebox-full-image" width="60" height="60">

<h3><a href="https://github.com/KOLANICH-research/Article-2015-Dull-captaincy-or-the-way-Tor-Project-fights-browser-fingerprinting" target="_blank" rel="noopener">GitHub -...</a></h3>


  <p><span class="label1">Bypassing TBB's protection for font canvas fingerprinting - GitHub - KOLANICH-research/Article-2015-Dull-captaincy-or-the-way-Tor-Project-fights-browser-fingerprinting: Bypassing TBB's prot...</span></p>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Interesting part (my bold):</p>
<blockquote>
<p>This matches the partial results obtained by <span class="mention">@starius</span>, and it is a good thing. Fingerprints of TBB and IceWeasel are not fully equal: there is 1 font more available in IceWeasel than in TBB. <strong>We can see a strong difference between fingerprints of TAILS, Whonix and TBB in different environments, and it is the bad thing.</strong> This means that an adversary can distinguish between TBB on different OS’es.</p>
</blockquote>
<p>And in their conclusion:</p>
<blockquote>
<p>Disabling JavaScript is a mandatory measure, at least you should disable fonts and most dangerous API using about:config.  None of this was done neither in TAILS nor in TBB…</p>
<p>Disabling JS won’t help because there are CSS (sophisticated technology of styling elements, allowing even creating simple games without any line of JS code!), using which it is also possible to extract info about computer, but this will make tracking a bit harder because CSS allows to extract less informationthan JS and it is harder to send it to server. Even if we disable CSS, there will be other holes. So, I don’t think that disabling CSS will help you much.</p>
<p>There is a strong need in a standard on anonymized browser behaviour.</p>
<p>Disabling JS is incompatible with highly commercialised the Web of today. Business is business, if for making money (or not prosecuting and changing high ranked managers) it was necessary to collaborate with intelligence and law enforcement agencies, enlist itself into non secretor secret registry, track users, analyse their actions and spread malware, this would be done. Some sites  were intentionally made non-functional without  JS,  some of  them have a note that they won’t work without JS (but sometimes you can bypass it).</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158/4</link>
        <pubDate>Sun, 22 Aug 2021 22:53:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-12158-4</guid>
        <source url="http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158.rss">Tor Browser getClientRects fingerprinting</source>
      </item>
      <item>
        <title>Tor Browser getClientRects fingerprinting</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://browserleaks.com/rects" class="inline-onebox">ClientRects Fingerprinting - BrowserLeaks</a> seems very severe.</p>
<ul>
<li>Tor Browser in one Qubes-Whonix VM → Tor Browser in another Qubes-Whonix VM → Same fingerprint.</li>
<li>Tor Browser in one Qubes Debian VM → Tor Browser in another Qubes-Whonix VM → Same fingerprint.</li>
<li>Chromium in Qubes Debian VM vs Tor Browser in another Qubes-Whonix VM → Different fingerprint.</li>
<li>Chromium in Qubes Debian VM vs Firefox in same VM  → Different fingerprint.</li>
<li>Different browser window size → Same fingerprint.</li>
<li>Tor Browser, different tabs → Same fingerprint.</li>
</ul>
          <p><a href="http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158/3</link>
        <pubDate>Sun, 22 Aug 2021 17:31:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-12158-3</guid>
        <source url="http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158.rss">Tor Browser getClientRects fingerprinting</source>
      </item>
      <item>
        <title>Tor Browser getClientRects fingerprinting</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="https://gitlab.torproject.org/uploads/-/system/appearance/favicon/1/favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://gitlab.torproject.org/tpo/applications/tor-browser/-/issues/18500" target="_blank" rel="noopener">GitLab</a>
  </header>

  <article class="onebox-body">
    <img src="https://gitlab.torproject.org/assets/gitlab_logo-7ae504fe4f68fdebb3c2034e36621930cd36ea87924c11ff65dbcb8ed50dca58.png" class="thumbnail onebox-avatar" width="128" height="128">

<h3><a href="https://gitlab.torproject.org/tpo/applications/tor-browser/-/issues/18500" target="_blank" rel="noopener">Investigate impact of fingerprinting via getClientRects() (#18500) · Issues ·...</a></h3>

  <p>http://jcarlosnorte.com/security/2016/03/06/advanced-tor-browser-fingerprinting.html claims that getClientRects() provides a lot of differences between two computers. This is "[d]epending on the resolution, font configuration and lots of...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="https://gitlab.torproject.org/uploads/-/system/appearance/favicon/1/favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://gitlab.torproject.org/tpo/applications/tor-browser/-/issues/29564" target="_blank" rel="noopener">GitLab</a>
  </header>

  <article class="onebox-body">
    <img src="https://gitlab.torproject.org/assets/gitlab_logo-7ae504fe4f68fdebb3c2034e36621930cd36ea87924c11ff65dbcb8ed50dca58.png" class="thumbnail onebox-avatar" width="128" height="128">

<h3><a href="https://gitlab.torproject.org/tpo/applications/tor-browser/-/issues/29564" target="_blank" rel="noopener">DOMRect on at least Linux is not consistent (#29564) · Issues · The Tor...</a></h3>

  <p>Test site: https://ghacksuserjs.github.io/TorZillaPrint/TorZillaPrint.html#domrect Note: this is the same code as used by [2] which is based on [3] [2]...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="https://browserleaks.com/favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://browserleaks.com/rects" target="_blank" rel="noopener">BrowserLeaks</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://browserleaks.com/rects" target="_blank" rel="noopener">ClientRects Fingerprinting</a></h3>

  <p>Fingerprinting web browser using getClientRects measurements.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p><a href="https://canvasblocker.kkapsner.de/test/domRectTest.php" class="onebox" target="_blank" rel="noopener">https://canvasblocker.kkapsner.de/test/domRectTest.php</a></p>
<hr>
<blockquote>
<p>Not only DOMRect readouts of HTML elements (text transformations, buttons, progress elements, …)  itself are fingerprintable</p>
</blockquote>
<p><a href="https://privacycheck.sec.lrz.de/active/fp_gcr/fp_getclientrects.html" class="onebox" target="_blank" rel="noopener">https://privacycheck.sec.lrz.de/active/fp_gcr/fp_getclientrects.html</a></p>
<blockquote>
<p>but DOMRect also makes for example MathML Fingerprinting</p>
</blockquote>
<p><a href="https://privacycheck.sec.lrz.de/active/fp_ml/fp_ml.html" class="onebox" target="_blank" rel="noopener">https://privacycheck.sec.lrz.de/active/fp_ml/fp_ml.html</a></p>
<blockquote>
<p>Emoji Fingerprinting</p>
</blockquote>
<p><a href="https://privacycheck.sec.lrz.de/active/fp_e/fp_emoji.html" class="onebox" target="_blank" rel="noopener">https://privacycheck.sec.lrz.de/active/fp_e/fp_emoji.html</a></p>
          <p><a href="http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158/2</link>
        <pubDate>Sat, 21 Aug 2021 18:43:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-12158-2</guid>
        <source url="http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158.rss">Tor Browser getClientRects fingerprinting</source>
      </item>
      <item>
        <title>Tor Browser getClientRects fingerprinting</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>OK thanks. If you couldn’t work it out, my chances are minimal to none.</p>
<p>BTW was this issue below ever fixed in Tor Browser? If not, it’s a major oversight (and we should also document it).</p>
<p>I note it is the usual story i.e. JavaScript-based, just like the mouse tracking i.e. JS is a tracking nightmare and should basically never be allowed unless absolutely necessary since it is at the core of most tracking efforts.</p>
<p><a href="http://jcarlosnorte.com/security/2016/03/06/advanced-tor-browser-fingerprinting.html" class="inline-onebox">Advanced Tor Browser Fingerprinting</a><br>
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getClientRects" class="inline-onebox">Element.getClientRects() - Web APIs | MDN</a></p>
<blockquote>
<p><strong>getClientRects fingerprinting</strong></p>
<p>The most intersting fingerprinting vector I found on Tor Browser is getClientRects. Is strange that reading back from a canvas has been prevented but simply asking the browser javascript API how a specific DOM elements has been drawn on the screen has not been prevented or protected in any way.</p>
<p>getClientRects allows to get the exact pixel position and size of the box of a given DOM element. Depending on the resolution, font configuration and lots of other factors, the results of getClientRects are different, allowing for a very quick and easy fingerprinting vector, even better than the canvas fingerprinting that is fixed.</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158/1</link>
        <pubDate>Wed, 18 Aug 2021 09:09:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-12158-1</guid>
        <source url="http://forums.whonix.org/t/tor-browser-getclientrects-fingerprinting/12158.rss">Tor Browser getClientRects fingerprinting</source>
      </item>
  </channel>
</rss>
