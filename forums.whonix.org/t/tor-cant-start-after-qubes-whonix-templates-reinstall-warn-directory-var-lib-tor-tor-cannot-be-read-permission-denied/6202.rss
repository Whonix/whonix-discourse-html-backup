<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
    <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202</link>
    <description>Hi, I&#39;m running Whonix on Qubes (R4.0), but I assume this is more about Tor Config than something else (but not sure maybe a critical template install error?), 
anyway, I just updated my Whonix templates (all of them) from 13 to 14 through the Uninstall - Install Guide way. 
this is supposed to be complete and working now but Tor on sys-whonix can&#39;t start anymore :

ERROR: Tor Config Check Result: 
Your Tor config file contains at least one error. 
(Tor exit code: 1) 
Tor concise reports (below warns and errors must be fixed before you can use Tor): 
Oct 24 07:22:15.693 [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied
Oct 24 07:22:15.693 [warn] Failed to parse/validate config: Couldn&#39;t access private data directory &quot;/var/lib/tor/.tor&quot;
Oct 24 07:22:15.693 [err] Reading config failed--see warnings above. 
Tor full reports: 
Oct 24 07:22:15.690 [notice] Tor 0.3.3.9 (git-ca1a436fa8e53a32) running on Linux with Libevent 2.0.21-stable, OpenSSL 1.1.0f, Zlib 1.2.8, Liblzma 5.2.2, and Libzstd 1.1.2.
Oct 24 07:22:15.690 [notice] Tor can&#39;t help you if you use it wrong! Learn how to be safe at https://www.torproject.org/download/download#warning
Oct 24 07:22:15.690 [notice] Read configuration file &quot;/etc/tor/torrc&quot;.
Oct 24 07:22:15.693 [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied
Oct 24 07:22:15.693 [warn] Failed to parse/validate config: Couldn&#39;t access private data directory &quot;/var/lib/tor/.tor&quot;
Oct 24 07:22:15.693 [err] Reading config failed--see warnings above.
Try to look at this report yourself by running. dom0 -&gt; Start Menu -&gt; ServiceVM: sys-whonix -&gt; Terminal 
sudo -u debian-tor tor --verify-config 
To try to fix this, please open your Tor config file. 
dom0 -&gt; Start Menu -&gt; ServiceVM: sys-whonix -&gt; Torrc 
or in Terminal: sudo nano /usr/local/etc/torrc.d/50_user.conf 

I&#39;m wondering why this permission is now denied (aren&#39;t templates supposed to still be unmodified just after install and working by default ? (but I guess I miss some knowledge about Qubes specificities)

How can I fix this to recover the initial working behavior ?

Thanks a lot for your help.</description>
    <language>en</language>
    <lastBuildDate>Fri, 26 Oct 2018 09:41:49 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[vimuz]]></dc:creator>
        <description><![CDATA[
            <p>Great ! that is the one, Tor is working right now, Thanks a lot !</p>
          <p><a href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/16</link>
        <pubDate>Fri, 26 Oct 2018 09:41:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6202-16</guid>
        <source url="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss">Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Wrong command. Sorry. Again please.</p>
<pre><code>sudo chown --recursive debian-tor:debian-tor /var/lib/tor</code></pre>
          <p><a href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/15</link>
        <pubDate>Fri, 26 Oct 2018 08:49:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6202-15</guid>
        <source url="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss">Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[vimuz]]></dc:creator>
        <description><![CDATA[
            <p>user@host:~$ sudo chown --recursive debian-tor:debian-tor /var/run/tor<br>
user@host:~$ sudo mv /var/lib/tor/.tor /home/user/tor-strange-backup<br>
mv: cannot stat ‘/var/lib/tor/.tor’: No such file or directory<br>
user@host:~$ sudo ls -la /var/lib/tor<br>
total 7872<br>
drwx–S—  2 messagebus sdwdate    4096 Oct 23 21:09 .<br>
drwxr-xr-x 40 root       root       4096 Jul 17 18:37 …<br>
-rw-------  1 messagebus sdwdate   20442 Oct 16 17:15 cached-certs<br>
-rw-------  1 messagebus sdwdate 2039492 Oct 23 19:43 cached-microdesc-consensus<br>
-rw-------  1 messagebus sdwdate 5259537 Oct 21 11:00 cached-microdescs<br>
-rw-------  1 messagebus sdwdate  704322 Oct 23 20:50 cached-microdescs.new<br>
-rw-------  1 messagebus sdwdate       0 Oct 18 07:05 lock<br>
-rw-------  1 messagebus sdwdate   17682 Oct 23 21:09 state</p>
          <p><a href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/14</link>
        <pubDate>Fri, 26 Oct 2018 08:35:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6202-14</guid>
        <source url="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss">Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="11" data-topic="6202">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/v/8dc957/40.png" class="avatar"> vimuz:</div>
<blockquote>
<p><em>Oct 25 16:35:39.651 [warn] Directory /var/lib/tor cannot be read: Permission denied</em></p>
</blockquote>
</aside>
<p>/var/lib/tor/.tor folder is gone now looks like.</p>
<pre><code>sudo chown --recursive debian-tor:debian-tor /var/run/tor
</code></pre>
<pre><code class="lang-auto">sudo mv /var/lib/tor/.tor /home/user/tor-strange-backup
</code></pre>
<pre><code>sudo ls -la /var/lib/tor
</code></pre>
<p>Output of that?</p>
          <p><a href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/13</link>
        <pubDate>Fri, 26 Oct 2018 07:32:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6202-13</guid>
        <source url="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss">Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[vimuz]]></dc:creator>
        <description><![CDATA[
            <p>mv: cannot stat ‘/var/lib/tor/.tor’: No such file or directory</p>
          <p><a href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/12</link>
        <pubDate>Thu, 25 Oct 2018 17:47:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6202-12</guid>
        <source url="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss">Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[vimuz]]></dc:creator>
        <description><![CDATA[
            <p>I’m not using bridges neither pluggable transport,<br>
I ran some cat, here are the results (I removed the usual comments to keep only effective lines)</p>
<p>/etc/tor/torrc :</p>
<p>%include /etc/torrc.d/95_whonix.conf</p>
<hr>
<p>/etc/torrc.d/95_whonix.conf :</p>
<p>%include /usr/local/etc/torrc.d/40_anon_connection_wizard.conf<br>
%include /usr/local/etc/torrc.d/50_user.conf</p>
<hr>
<p>/usr/local/etc/torrc.d/40_anon_connection_wizard.conf :</p>
<p>DisableNetwork 0</p>
<hr>
<p>/usr/local/etc/torrc.d/50_user.conf     is empty</p>
<hr>
<p>/usr/share/tor/tor-service-defaults-torrc :</p>
<p>DataDirectory /var/lib/tor<br>
PidFile /var/run/tor/tor.pid<br>
RunAsDaemon 1<br>
User debian-tor</p>
<p>ControlSocket /var/run/tor/control GroupWritable RelaxDirModeCheck<br>
ControlSocketsGroupWritable 1<br>
SocksPort unix:/var/run/tor/socks WorldWritable<br>
SocksPort 9050</p>
<p>CookieAuthentication 1<br>
CookieAuthFileGroupReadable 1<br>
CookieAuthFile /var/run/tor/control.authcookie</p>
<p>Log notice file /var/log/tor/log</p>
<p>DisableNetwork 1</p>
<p>Log notice syslog<br>
Log notice file /run/tor/log</p>
<p>mapaddress 1.1.1.1 k54ids7luh523dbi.onion<br>
mapaddress 2.2.2.2 gbhpq7eihle4btsn.onion</p>
<p>VirtualAddrNetwork 10.192.0.0/10<br>
AutomapHostsOnResolve 1</p>
<p>TransPort 10.137.0.8:9040</p>
<p>DnsPort 10.137.0.8:5300 IsolateDestPort</p>
<p>SocksPort 10.137.0.8:9050<br>
SocksPort 10.137.0.8:9100<br>
SocksPort 10.137.0.8:9101 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9102 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9103 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9104<br>
SocksPort 10.137.0.8:9105 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9106 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9107 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9108 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9109 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9110 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9111<br>
SocksPort 10.137.0.8:9112<br>
SocksPort 10.137.0.8:9113<br>
SocksPort 10.137.0.8:9114 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9115 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9116 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9117 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9118 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9119<br>
SocksPort 10.137.0.8:9120 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9121 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9122<br>
SocksPort 10.137.0.8:9123<br>
SocksPort 10.137.0.8:9124<br>
SocksPort 10.137.0.8:9125</p>
<p>SocksPort 10.137.0.8:9150 IPv6Traffic PreferIPv6 KeepAliveIsolateSOCKSAuth</p>
<p>SocksPort 10.137.0.8:9152 IsolateDestAddr IsolateDestPort</p>
<p>SocksPort 10.137.0.8:9153<br>
SocksPort 10.137.0.8:9154<br>
SocksPort 10.137.0.8:9155<br>
SocksPort 10.137.0.8:9156<br>
SocksPort 10.137.0.8:9157<br>
SocksPort 10.137.0.8:9158<br>
SocksPort 10.137.0.8:9159</p>
<p>SocksPort 10.137.0.8:9160 IsolateDestAddr<br>
SocksPort 10.137.0.8:9161 IsolateDestAddr<br>
SocksPort 10.137.0.8:9162 IsolateDestAddr<br>
SocksPort 10.137.0.8:9163 IsolateDestAddr<br>
SocksPort 10.137.0.8:9164 IsolateDestAddr<br>
SocksPort 10.137.0.8:9165 IsolateDestAddr<br>
SocksPort 10.137.0.8:9166 IsolateDestAddr<br>
SocksPort 10.137.0.8:9167 IsolateDestAddr<br>
SocksPort 10.137.0.8:9168 IsolateDestAddr<br>
SocksPort 10.137.0.8:9169 IsolateDestAddr</p>
<p>SocksPort 10.137.0.8:9170 IsolateDestPort<br>
SocksPort 10.137.0.8:9171 IsolateDestPort<br>
SocksPort 10.137.0.8:9172 IsolateDestPort<br>
SocksPort 10.137.0.8:9173 IsolateDestPort<br>
SocksPort 10.137.0.8:9174 IsolateDestPort<br>
SocksPort 10.137.0.8:9175 IsolateDestPort<br>
SocksPort 10.137.0.8:9176 IsolateDestPort<br>
SocksPort 10.137.0.8:9177 IsolateDestPort<br>
SocksPort 10.137.0.8:9178 IsolateDestPort<br>
SocksPort 10.137.0.8:9179 IsolateDestPort</p>
<p>SocksPort 10.137.0.8:9180 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9181 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9182 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9183 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9184 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9185 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9186 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9187 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9188 IsolateDestAddr IsolateDestPort<br>
SocksPort 10.137.0.8:9189 IsolateDestAddr IsolateDestPort</p>
<p>TransPort 127.0.0.1:9041</p>
<p>DnsPort 127.0.0.1:5400</p>
<p>SocksPort 127.0.0.1:9100</p>
<p>SocksPort 127.0.0.1:9101 IsolateDestAddr IsolateDestPort<br>
SocksPort 127.0.0.1:9102 IsolateDestAddr IsolateDestPort<br>
SocksPort 127.0.0.1:9103 IsolateDestAddr IsolateDestPort<br>
SocksPort 127.0.0.1:9104<br>
SocksPort 127.0.0.1:9105 IsolateDestAddr IsolateDestPort<br>
SocksPort 127.0.0.1:9106 IsolateDestAddr IsolateDestPort<br>
SocksPort 127.0.0.1:9107 IsolateDestAddr IsolateDestPort<br>
SocksPort 127.0.0.1:9108 IsolateDestAddr IsolateDestPort<br>
SocksPort 127.0.0.1:9109 IsolateDestAddr IsolateDestPort<br>
SocksPort 127.0.0.1:9110 IsolateDestAddr IsolateDestPort<br>
SocksPort 127.0.0.1:9111<br>
SocksPort 127.0.0.1:9112<br>
SocksPort 127.0.0.1:9113<br>
SocksPort 127.0.0.1:9114 IsolateDestAddr IsolateDestPort<br>
SocksPort 127.0.0.1:9115 IsolateDestAddr IsolateDestPort<br>
SocksPort 127.0.0.1:9116 IsolateDestAddr IsolateDestPort<br>
SocksPort 127.0.0.1:9117 IsolateDestAddr IsolateDestPort<br>
SocksPort 127.0.0.1:9118 IsolateDestAddr IsolateDestPort<br>
SocksPort 127.0.0.1:9119<br>
SocksPort 127.0.0.1:9120 IsolateDestAddr IsolateDestPort<br>
SocksPort 127.0.0.1:9121 IsolateDestAddr IsolateDestPort</p>
<p>SocksPort 127.0.0.1:9122<br>
SocksPort 127.0.0.1:9123<br>
SocksPort 127.0.0.1:9124<br>
SocksPort 127.0.0.1:9125<br>
SocksPort 127.0.0.1:9150 IPv6Traffic PreferIPv6 KeepAliveIsolateSOCKSAuth</p>
<hr>
<p>And here is the anon-verify :</p>
<p>_/===================================================================_<br>
<em>|                      Report Summary                               |</em><br>
<em>===================================================================/</em><br>
<em>Your Tor config files contain at least one error.</em><br>
<em>Tor verify exit code: 1</em><br>
_/===================================================================_<br>
<em>|                    Tor Concise Report                             |</em><br>
<em>===================================================================/</em><br>
<em>Below warns and errors must be fixed before you can use Tor:</em><br>
<em>Oct 25 16:35:39.651 [warn] Directory /var/lib/tor cannot be read: Permission denied</em><br>
<em>Oct 25 16:35:39.651 [warn] Failed to parse/validate config: Couldn’t access private data directory “/var/lib/tor”</em><br>
<em>Oct 25 16:35:39.651 [err] Reading config failed–see warnings above.</em><br>
_/===================================================================\                                                                                                                           _<br>
_|                      Tor Full Report                              |                                                                                                                           _<br>
_===================================================================/                                                                                                                           _<br>
_Oct 25 16:35:39.642 [notice] Tor 0.3.3.9 (git-ca1a436fa8e53a32) running on Linux with Libevent 2.0.21-stable, OpenSSL 1.1.0f, Zlib 1.2.8, Liblzma 5.2.2, and Libzstd 1.1.2.                     _<br>
_Oct 25 16:35:39.642 [notice] Tor can’t help you if you use it wrong! Learn how to be safe at <a href="https://www.torproject.org/download/download#warning" rel="nofollow noopener">https://www.torproject.org/download/download#warning</a>                                               _<br>
<em>Oct 25 16:35:39.642 [notice] Read configuration file “/usr/share/tor/tor-service-defaults-torrc”.</em><br>
<em>Oct 25 16:35:39.642 [notice] Read configuration file “/etc/tor/torrc”.</em><br>
<em>Oct 25 16:35:39.649 [notice] You configured a non-loopback address ‘10.137.0.8:5300’ for DNSPort. This allows everybody on your local network to use your machine as a proxy. Make sure this is what you wanted.</em><br>
<em>Oct 25 16:35:39.649 [notice] You configured a non-loopback address ‘10.137.0.8:9040’ for TransPort. This allows everybody on your local network to use your machine as a proxy. Make sure this is what you wanted.</em><br>
<em>Oct 25 16:35:39.651 [warn] Directory /var/lib/tor cannot be read: Permission denied</em><br>
<em>Oct 25 16:35:39.651 [warn] Failed to parse/validate config: Couldn’t access private data directory “/var/lib/tor”</em><br>
<em>Oct 25 16:35:39.651 [err] Reading config failed–see warnings above.</em><br>
_/===================================================================_<br>
<em>|                 Used Tor Configuration Files                      |</em><br>
<em>===================================================================/</em><br>
_5 files are used as Tor configuration files: _<br>
<em>/usr/share/tor/tor-service-defaults-torrc /etc/tor/torrc /etc/torrc.d/95_whonix.conf /usr/local/etc/torrc.d/40_anon_connection_wizard.conf /usr/local/etc/torrc.d/50_user.conf</em><br>
<em>=====================================================================</em></p>
          <p><a href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/11</link>
        <pubDate>Thu, 25 Oct 2018 17:36:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6202-11</guid>
        <source url="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss">Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Please also apply:</p>
<p>. <a href="https://www.whonix.org/wiki/Tor#Configuration_Check">https://www.whonix.org/wiki/Tor#Configuration_Check</a></p>
          <p><a href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/9</link>
        <pubDate>Thu, 25 Oct 2018 10:16:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6202-9</guid>
        <source url="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss">Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>Hi <code>vimuz</code></p>
<p>Do you have any configuration options in <code>/etc/tor/torrc</code>? There should not be any.</p>
<p>Could you run this command please.</p>
<p><code>cat /etc/tor/torrc</code></p>
<p>Also, are you using Tor bridges or pluggable transport? If you are and are not in an area that censors Tor it might be easier to troubleshoot without those enabled. Please <strong>do not</strong> disable if you are in a censored area.</p>
          <p><a href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/8</link>
        <pubDate>Thu, 25 Oct 2018 10:15:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6202-8</guid>
        <source url="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss">Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Try to move that folder out of the way.</p>
<pre><code>sudo mv /var/lib/tor/.tor /home/user/tor-strange-backup</code></pre>
          <p><a href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/7</link>
        <pubDate>Thu, 25 Oct 2018 10:15:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6202-7</guid>
        <source url="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss">Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[vimuz]]></dc:creator>
        <description><![CDATA[
            <p>Nothing new actually</p>
<p>Oct 25 09:59:35.889 [notice] Tor 0.3.3.9 (git-ca1a436fa8e53a32) running on Linux with Libevent 2.0.21-stable, OpenSSL 1.1.0f, Zlib 1.2.8, Liblzma 5.2.2, and Libzstd 1.1.2.<br>
Oct 25 09:59:35.889 [notice] Tor can’t help you if you use it wrong! Learn how to be safe at <a href="https://www.torproject.org/download/download#warning" rel="nofollow noopener">https://www.torproject.org/download/download#warning</a><br>
Oct 25 09:59:35.889 [notice] Read configuration file “/etc/tor/torrc”.<br>
Oct 25 09:59:35.899 [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied<br>
Oct 25 09:59:35.899 [warn] Failed to parse/validate config: Couldn’t access private data directory “/var/lib/tor/.tor”<br>
Oct 25 09:59:35.899 [err] Reading config failed–see warnings above.</p>
          <p><a href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/6</link>
        <pubDate>Thu, 25 Oct 2018 10:03:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6202-6</guid>
        <source url="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss">Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[vimuz]]></dc:creator>
        <description><![CDATA[
            <p>Hi, I executed<br>
sudo chown --recursive debian-tor:debian-tor /var/run/tor<br>
then restart Tor, still something wrong :</p>
<p>● tor@default.service - Anonymizing overlay network for TCP<br>
Loaded: loaded (/lib/systemd/system/tor@default.service; static; vendor preset: enabled)<br>
Drop-In: /lib/systemd/system/tor@default.service.d<br>
└─30_qubes.conf, 40_obfs4proxy-workaround.conf, 40_qubes.conf, 50_controlsocket-workaround.conf<br>
Active: activating (auto-restart) (Result: exit-code) since Thu 2018-10-25 09:51:05 UTC; 15ms ago<br>
Process: 3986 ExecStartPre=/usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0 --verify-config (code=exited, status=1/FAILURE)<br>
Process: 3984 ExecStartPre=/usr/bin/install -Z -m 02755 -o debian-tor -g debian-tor -d /var/run/tor (code=exited, status=0/SUCCESS)</p>
<p>Oct 25 09:51:05 host systemd[1]: tor@default.service: Unit entered failed state.<br>
Oct 25 09:51:05 host systemd[1]: tor@default.service: Failed with result ‘exit-code’.</p>
<ul>
<li>true 3</li>
<li>true ‘Feel free to close this window.’</li>
<li>sleep 86400</li>
</ul>
          <p><a href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/5</link>
        <pubDate>Thu, 25 Oct 2018 09:57:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6202-5</guid>
        <source url="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss">Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>vimuz:</p>
<blockquote>
<p>Oct 24 07:22:15.693 [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</p>
</blockquote>
<p>That folder /var/lib/tor/.tor has no place there. Wondering how it was<br>
created. (If someone can figure out how users can possibly create that<br>
folder, let me know.)</p>
<p><a class="mention" href="http://forums.whonix.org/u/vimuz">@vimuz</a> could you try this please and see if that fixes it for you:</p>
<p><a href="https://www.whonix.org/wiki/Tor#Permissions_Fix">https://www.whonix.org/wiki/Tor#Permissions_Fix</a></p>
          <p><a href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/4</link>
        <pubDate>Thu, 25 Oct 2018 09:33:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6202-4</guid>
        <source url="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss">Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[vimuz]]></dc:creator>
        <description><![CDATA[
            <p>Hi, i did not create new ones, I followed the Option 1a in<br>
<a href="https://www.whonix.org/wiki/Qubes/Uninstall" rel="nofollow noopener">https://www.whonix.org/wiki/Qubes/Uninstall</a> and set all Whonix VMs templates to fedora during whonix uninstall, and thought the qubesctl command will handle to switch it back by itself as it is written that this command " - Configures <code>sys-whonix</code> and <code>anon-whonix</code> safely." <a href="https://www.whonix.org/wiki/Qubes/Install" rel="nofollow noopener">https://www.whonix.org/wiki/Qubes/Install</a> .<br>
But after the end of the whole process I realised VMs templates were still set to fedora and I manually switched it back to new whonix templates.</p>
<p>I’m quite glad it’s something known about VMs setting rather than just a Tor Config setting, it sounded like a little side effect of a wider problem.</p>
<p>So should I delete my VMs and create new ones ?<br>
Is there any command to do it properly ?</p>
<p>Thank you really much.</p>
          <p><a href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/3</link>
        <pubDate>Thu, 25 Oct 2018 09:18:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6202-3</guid>
        <source url="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss">Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>Hi <code>vimuz</code></p>
<p>Did you create new <code>sys-whonix</code>, <code>anon-whonix</code> VMs? Or are you using the older VMs from Whonix 13?</p>
          <p><a href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/2</link>
        <pubDate>Thu, 25 Oct 2018 01:00:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6202-2</guid>
        <source url="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss">Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[vimuz]]></dc:creator>
        <description><![CDATA[
            <p>Hi, I’m running Whonix on Qubes (R4.0), but I assume this is more about Tor Config than something else (but not sure maybe a critical template install error?),<br>
anyway, I just updated my Whonix templates (all of them) from 13 to 14 through the Uninstall - Install Guide way.<br>
this is supposed to be complete and working now but Tor on sys-whonix can’t start anymore :</p>
<p>ERROR: Tor Config Check Result:<br>
Your Tor config file contains at least one error.<br>
(Tor exit code: 1)<br>
Tor concise reports (below warns and errors must be fixed before you can use Tor):<br>
Oct 24 07:22:15.693 [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied<br>
Oct 24 07:22:15.693 [warn] Failed to parse/validate config: Couldn’t access private data directory “/var/lib/tor/.tor”<br>
Oct 24 07:22:15.693 [err] Reading config failed–see warnings above.<br>
Tor full reports:<br>
Oct 24 07:22:15.690 [notice] Tor 0.3.3.9 (git-ca1a436fa8e53a32) running on Linux with Libevent 2.0.21-stable, OpenSSL 1.1.0f, Zlib 1.2.8, Liblzma 5.2.2, and Libzstd 1.1.2.<br>
Oct 24 07:22:15.690 [notice] Tor can’t help you if you use it wrong! Learn how to be safe at <a href="https://www.torproject.org/download/download#warning" rel="nofollow noopener">https://www.torproject.org/download/download#warning</a><br>
Oct 24 07:22:15.690 [notice] Read configuration file “/etc/tor/torrc”.<br>
Oct 24 07:22:15.693 [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied<br>
Oct 24 07:22:15.693 [warn] Failed to parse/validate config: Couldn’t access private data directory “/var/lib/tor/.tor”<br>
Oct 24 07:22:15.693 [err] Reading config failed–see warnings above.<br>
Try to look at this report yourself by running. dom0 -&gt; Start Menu -&gt; ServiceVM: sys-whonix -&gt; Terminal<br>
sudo -u debian-tor tor --verify-config<br>
To try to fix this, please open your Tor config file.<br>
dom0 -&gt; Start Menu -&gt; ServiceVM: sys-whonix -&gt; Torrc<br>
or in Terminal: sudo nano /usr/local/etc/torrc.d/50_user.conf</p>
<p>I’m wondering why this permission is now denied (aren’t templates supposed to still be unmodified just after install and working by default ? (but I guess I miss some knowledge about Qubes specificities)</p>
<p>How can I fix this to recover the initial working behavior ?</p>
<p>Thanks a lot for your help.</p>
          <p><a href="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/1</link>
        <pubDate>Wed, 24 Oct 2018 22:19:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6202-1</guid>
        <source url="http://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202.rss">Tor can&#39;t start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
  </channel>
</rss>
