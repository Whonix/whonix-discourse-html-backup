<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Two questions about Corridor + Qubes-Whonix - Qubes-Whonix - Whonix Forum</title>
    <meta name="description" content="Hello everybody. 

I am a Qubes user and I am writing on the forum because today I&amp;#39;ve played a bit with Corridor, following the documentation published on Whonix wiki. 

Every thing seems to work very well. I did all the&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="2817.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Two questions about Corridor + Qubes-Whonix&#39;" href="2817.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/two-questions-about-corridor-qubes-whonix/2817" />
<meta name="twitter:url" content="https://forums.whonix.org/t/two-questions-about-corridor-qubes-whonix/2817" />
<meta property="og:title" content="Two questions about Corridor + Qubes-Whonix" />
<meta name="twitter:title" content="Two questions about Corridor + Qubes-Whonix" />
<meta property="og:description" content="Hello everybody.  I am a Qubes user and I am writing on the forum because today I‚Äôve played a bit with Corridor, following the documentation published on Whonix wiki.  Every thing seems to work very well. I did all the required tests and the results were those expected. First, I tried with an ‚Äúuntrusted‚Äù VM: traffic in clear was blocked - and logged by iptables - while Tor Browser was perfectly running. Then I set sys-corridor as NetVM for sys-whonix: again, everything was fine.  Anyway, I would..." />
<meta name="twitter:description" content="Hello everybody.  I am a Qubes user and I am writing on the forum because today I‚Äôve played a bit with Corridor, following the documentation published on Whonix wiki.  Every thing seems to work very well. I did all the required tests and the results were those expected. First, I tried with an ‚Äúuntrusted‚Äù VM: traffic in clear was blocked - and logged by iptables - while Tor Browser was perfectly running. Then I set sys-corridor as NetVM for sys-whonix: again, everything was fine.  Anyway, I would..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ‚ù§" />
<meta property="article:published_time" content="2016-08-03T21:58:43+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="2817.html">Two questions about Corridor + Qubes-Whonix</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/qubes-whonix/12.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #63a0ff'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Qubes-Whonix</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/minimal'><span itemprop='name'>minimal</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="2817.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-08-03T21:58:43Z' class='post-time'>
                August 3, 2016,  9:58pm
              </time>
              <meta itemprop='dateModified' content='2016-08-03T21:58:43Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hello everybody.</p>
<p>I am a Qubes user and I am writing on the forum because today I‚Äôve played a bit with Corridor, following the documentation published on <a href="../../../external.html?link=https://www.whonix.org/wiki/Corridor" rel="nofollow noopener">Whonix wiki</a>.</p>
<p>Every thing seems to work very well. I did all the required tests and the results were those expected. First, I tried with an ‚Äúuntrusted‚Äù VM: traffic in clear was blocked - and logged by iptables - while Tor Browser was perfectly running. Then I set sys-corridor as NetVM for sys-whonix: again, everything was fine.</p>
<p>Anyway, I would like to ask a couple of clarifications.</p>
<ol>
<li>In the Whonix tutorial it is suggested to create a <strong>standalone</strong> ProxyVM for sys-corridor. I did it, and this worked for me. However, once I set up everything, I saw that <a href="../../../external.html?link=https://github.com/rustybird/corridor" rel="nofollow noopener">rustybird‚Äôs suggestion</a> was instead that of using a simple <strong>non-standalone</strong> ProxyVM for this scope.</li>
</ol>
<blockquote>
<h1>In dom0:</h1>
<p>qvm-create --proxy --template your-template --label blue corridor-gateway<br>
qvm-service --enable corridor-gateway corridor</p>
</blockquote>
<p>I‚Äôve tried and tested also this option and everything seem to work fine as well. I was wondering if there are particular reasons (may be security related) for which Whonix suggests to use a standalone template.</p>
<ol start="2">
<li>
<p>In order to check if corridor was working or not, I‚Äôve launched in sys-corridor the following commands.</p>
<p>sudo systemctl status corridor-data<br>
sudo systemctl status corridor-init-forwarding<br>
sudo systemctl status corridor-init-snat<br>
sudo systemctl status corridor-init-logged</p>
</li>
</ol>
<p>The outputs of the first three are fine (‚ÄúStatus active‚Äù), whereas the last one returns:</p>
<blockquote>
<p>Aug 03 20:26:13 sys-corridor corridor-init-logged[705]: corridor_logged<br>
updated.<br>
Aug 03 20:26:13 sys-corridor systemd[1]: Started corridor‚Äôs logging.<br>
Hint: Some lines were ellipsized, use -l to show in full.<br>
user@sys-corridor:~$ sudo systemctl -l status corridor-init-logged<br>
‚óè corridor-init-logged.service - corridor‚Äôs logging<br>
Loaded: loaded (/lib/systemd/system/corridor-init-logged.service;<br>
enabled)<br>
Drop-In: /lib/systemd/system/corridor-init-logged.service.d<br>
‚îî‚îÄqubes-service.conf, qubes.conf<br>
Active: inactive (dead) since Wed 2016-08-03 20:26:13 IST; 51min ago<br>
Process: 705 ExecStart=/usr/sbin/corridor-init-logged (code=exited,<br>
status=0/SUCCESS)<br>
Main PID: 705 (code=exited, status=0/SUCCESS)</p>
</blockquote>
<blockquote>
<p>Aug 03 20:26:13 sys-corridor corridor-init-logged[705]: corridor_logged<br>
updated.<br>
Aug 03 20:26:13 sys-corridor systemd[1]: Started corridor‚Äôs logging.</p>
</blockquote>
<p>Why the status of this process is marked as ‚ÄúInactive (dead)‚Äù ?</p>
<p>On rustybird documentation I read:</p>
<pre><code>#Log attempted leaks from selected clients.
#This command will block until corridor_relays gets populated!
corridor-init-logged
</code></pre>
<p>But if I run</p>
<p><code>sudo ipset list corridor_relays</code></p>
<p>I can see that my corridor_relays is actually populated.<br>
I am a bit confused about this.</p>
<p>Sorry in advance for the (likely) naive questions and thanks for your time.</p>
<p>minimal</p>
        </div>

        <meta itemprop='headline' content='Two questions about Corridor + Qubes-Whonix'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="2817.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-08-04T17:37:59Z' class='post-time'>
                August 4, 2016,  5:37pm
              </time>
              <meta itemprop='dateModified' content='2016-08-04T17:37:59Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <ol>
<li>
</li>
</ol>
<ul>
<li>rustybird/corridor instructions installs from source. ‚ÄúQubes This has barely even been tested, be careful!‚Äù</li>
<li>adrelanos/corridor instructions install form Whonix apt repository.</li>
</ul>
<p>A StandaloneVM or separate template using Whonix apt repsoitory would be security wise better. (Better to have not all your Debian based VMs depend on the security of the Whonix repository.) Since a separate template plus template based VM just for this creates more overhead, I thought it would be simplest to recommend a StandaloneVM.</p>
<ol start="2">
<li>
</li>
</ol>
<p>This does not differ from how rustybird/corridor works. Please <a href="../../../external.html?link=https://github.com/rustybird/corridor/issues">open</a> a ticket at rustybird/corridor and ask for clarification on what is and how corridor-init-logged works and how to use it.</p>
        </div>

        <meta itemprop='headline' content='Two questions about Corridor + Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
