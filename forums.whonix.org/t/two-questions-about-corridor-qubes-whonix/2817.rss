<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Two questions about Corridor + Qubes-Whonix</title>
    <link>http://forums.whonix.org/t/two-questions-about-corridor-qubes-whonix/2817</link>
    <description>Hello everybody.

I am a Qubes user and I am writing on the forum because today I&#39;ve played a bit with Corridor, following the documentation published on [Whonix wiki](https://www.whonix.org/wiki/Corridor).

Every thing seems to work very well. I did all the required tests and the results were those expected. First, I tried with an &quot;untrusted&quot; VM: traffic in clear was blocked - and logged by iptables - while Tor Browser was perfectly running. Then I set sys-corridor as NetVM for sys-whonix: again, everything was fine.

Anyway, I would like to ask a couple of clarifications.

1) In the Whonix tutorial it is suggested to create a **standalone** ProxyVM for sys-corridor. I did it, and this worked for me. However, once I set up everything, I saw that [rustybird&#39;s suggestion](https://github.com/rustybird/corridor) was instead that of using a simple **non-standalone** ProxyVM for this scope. 

&gt; # In dom0:
&gt; qvm-create --proxy --template your-template --label blue corridor-gateway
&gt; qvm-service --enable corridor-gateway corridor

I&#39;ve tried and tested also this option and everything seem to work fine as well. I was wondering if there are particular reasons (may be security related) for which Whonix suggests to use a standalone template.

2) In order to check if corridor was working or not, I&#39;ve launched in sys-corridor the following commands.

    sudo systemctl status corridor-data
    sudo systemctl status corridor-init-forwarding
    sudo systemctl status corridor-init-snat
    sudo systemctl status corridor-init-logged

The outputs of the first three are fine (&quot;Status active&quot;), whereas the last one returns:

&gt; Aug 03 20:26:13 sys-corridor corridor-init-logged[705]: corridor_logged
&gt; updated.
&gt; Aug 03 20:26:13 sys-corridor systemd[1]: Started corridor&#39;s logging.
&gt; Hint: Some lines were ellipsized, use -l to show in full.
&gt; user@sys-corridor:~$ sudo systemctl -l status corridor-init-logged
&gt; ● corridor-init-logged.service - corridor&#39;s logging
&gt;    Loaded: loaded (/lib/systemd/system/corridor-init-logged.service;
&gt; enabled)
&gt;   Drop-In: /lib/systemd/system/corridor-init-logged.service.d
&gt;            └─qubes-service.conf, qubes.conf
&gt;    Active: inactive (dead) since Wed 2016-08-03 20:26:13 IST; 51min ago
&gt;   Process: 705 ExecStart=/usr/sbin/corridor-init-logged (code=exited,
&gt; status=0/SUCCESS)
&gt;  Main PID: 705 (code=exited, status=0/SUCCESS)

&gt; Aug 03 20:26:13 sys-corridor corridor-init-logged[705]: corridor_logged
&gt; updated.
&gt; Aug 03 20:26:13 sys-corridor systemd[1]: Started corridor&#39;s logging.


Why the status of this process is marked as &quot;Inactive (dead)&quot; ?

On rustybird documentation I read:

    #Log attempted leaks from selected clients.
    #This command will block until corridor_relays gets populated!
    corridor-init-logged


But if I run

`sudo ipset list corridor_relays`

I can see that my corridor_relays is actually populated.
I am a bit confused about this.

Sorry in advance for the (likely) naive questions and thanks for your time.

minimal</description>
    <language>en</language>
    <lastBuildDate>Thu, 04 Aug 2016 17:37:59 +0000</lastBuildDate>
    <category>Qubes-Whonix</category>
    <atom:link href="http://forums.whonix.org/t/two-questions-about-corridor-qubes-whonix/2817.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Two questions about Corridor + Qubes-Whonix</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <ol>
<li>
</li>
</ol>
<ul>
<li>rustybird/corridor instructions installs from source. “Qubes This has barely even been tested, be careful!”</li>
<li>adrelanos/corridor instructions install form Whonix apt repository.</li>
</ul>
<p>A StandaloneVM or separate template using Whonix apt repsoitory would be security wise better. (Better to have not all your Debian based VMs depend on the security of the Whonix repository.) Since a separate template plus template based VM just for this creates more overhead, I thought it would be simplest to recommend a StandaloneVM.</p>
<ol start="2">
<li>
</li>
</ol>
<p>This does not differ from how rustybird/corridor works. Please <a href="https://github.com/rustybird/corridor/issues">open</a> a ticket at rustybird/corridor and ask for clarification on what is and how corridor-init-logged works and how to use it.</p>
          <p><a href="http://forums.whonix.org/t/two-questions-about-corridor-qubes-whonix/2817/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/two-questions-about-corridor-qubes-whonix/2817/2</link>
        <pubDate>Thu, 04 Aug 2016 17:37:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2817-2</guid>
        <source url="http://forums.whonix.org/t/two-questions-about-corridor-qubes-whonix/2817.rss">Two questions about Corridor + Qubes-Whonix</source>
      </item>
      <item>
        <title>Two questions about Corridor + Qubes-Whonix</title>
        <dc:creator><![CDATA[minimal]]></dc:creator>
        <description><![CDATA[
            <p>Hello everybody.</p>
<p>I am a Qubes user and I am writing on the forum because today I’ve played a bit with Corridor, following the documentation published on <a href="https://www.whonix.org/wiki/Corridor" rel="nofollow noopener">Whonix wiki</a>.</p>
<p>Every thing seems to work very well. I did all the required tests and the results were those expected. First, I tried with an “untrusted” VM: traffic in clear was blocked - and logged by iptables - while Tor Browser was perfectly running. Then I set sys-corridor as NetVM for sys-whonix: again, everything was fine.</p>
<p>Anyway, I would like to ask a couple of clarifications.</p>
<ol>
<li>In the Whonix tutorial it is suggested to create a <strong>standalone</strong> ProxyVM for sys-corridor. I did it, and this worked for me. However, once I set up everything, I saw that <a href="https://github.com/rustybird/corridor" rel="nofollow noopener">rustybird’s suggestion</a> was instead that of using a simple <strong>non-standalone</strong> ProxyVM for this scope.</li>
</ol>
<blockquote>
<h1>In dom0:</h1>
<p>qvm-create --proxy --template your-template --label blue corridor-gateway<br>
qvm-service --enable corridor-gateway corridor</p>
</blockquote>
<p>I’ve tried and tested also this option and everything seem to work fine as well. I was wondering if there are particular reasons (may be security related) for which Whonix suggests to use a standalone template.</p>
<ol start="2">
<li>
<p>In order to check if corridor was working or not, I’ve launched in sys-corridor the following commands.</p>
<p>sudo systemctl status corridor-data<br>
sudo systemctl status corridor-init-forwarding<br>
sudo systemctl status corridor-init-snat<br>
sudo systemctl status corridor-init-logged</p>
</li>
</ol>
<p>The outputs of the first three are fine (“Status active”), whereas the last one returns:</p>
<blockquote>
<p>Aug 03 20:26:13 sys-corridor corridor-init-logged[705]: corridor_logged<br>
updated.<br>
Aug 03 20:26:13 sys-corridor systemd[1]: Started corridor’s logging.<br>
Hint: Some lines were ellipsized, use -l to show in full.<br>
user@sys-corridor:~$ sudo systemctl -l status corridor-init-logged<br>
● corridor-init-logged.service - corridor’s logging<br>
Loaded: loaded (/lib/systemd/system/corridor-init-logged.service;<br>
enabled)<br>
Drop-In: /lib/systemd/system/corridor-init-logged.service.d<br>
└─qubes-service.conf, qubes.conf<br>
Active: inactive (dead) since Wed 2016-08-03 20:26:13 IST; 51min ago<br>
Process: 705 ExecStart=/usr/sbin/corridor-init-logged (code=exited,<br>
status=0/SUCCESS)<br>
Main PID: 705 (code=exited, status=0/SUCCESS)</p>
</blockquote>
<blockquote>
<p>Aug 03 20:26:13 sys-corridor corridor-init-logged[705]: corridor_logged<br>
updated.<br>
Aug 03 20:26:13 sys-corridor systemd[1]: Started corridor’s logging.</p>
</blockquote>
<p>Why the status of this process is marked as “Inactive (dead)” ?</p>
<p>On rustybird documentation I read:</p>
<pre><code>#Log attempted leaks from selected clients.
#This command will block until corridor_relays gets populated!
corridor-init-logged
</code></pre>
<p>But if I run</p>
<p><code>sudo ipset list corridor_relays</code></p>
<p>I can see that my corridor_relays is actually populated.<br>
I am a bit confused about this.</p>
<p>Sorry in advance for the (likely) naive questions and thanks for your time.</p>
<p>minimal</p>
          <p><a href="http://forums.whonix.org/t/two-questions-about-corridor-qubes-whonix/2817/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/two-questions-about-corridor-qubes-whonix/2817/1</link>
        <pubDate>Wed, 03 Aug 2016 21:58:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2817-1</guid>
        <source url="http://forums.whonix.org/t/two-questions-about-corridor-qubes-whonix/2817.rss">Two questions about Corridor + Qubes-Whonix</source>
      </item>
  </channel>
</rss>
