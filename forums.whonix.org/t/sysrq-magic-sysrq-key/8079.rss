<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>SysRq (Magic SysRq key)</title>
    <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079</link>
    <description>https://www.whonix.org/wiki/SysRq</description>
    <language>en</language>
    <lastBuildDate>Sat, 05 Dec 2020 17:35:02 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="69" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Is SysRq tamed enough currently?</p>
</blockquote>
</aside>
<p>Yes. security-misc restricts it sufficiently.</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/71">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/71</link>
        <pubDate>Sat, 05 Dec 2020 17:35:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-71</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Quote <a href="https://www.kernel.org/doc/Documentation/SAK.txt">https://www.kernel.org/doc/Documentation/SAK.txt</a></p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="39" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>One is the ALT-SYSRQ-K sequence. You shouldn’t use this sequence.</p>
</blockquote>
</aside>
<p>Why?</p>
<p>Because…</p>
<blockquote>
<p>It is only available if the kernel was compiled with sysrq support.</p>
</blockquote>
<p>?</p>
<p>Just because SysRq isn’t universally available on all Linux distributions isn’t any reason to go for that?</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/70">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/70</link>
        <pubDate>Wed, 02 Dec 2020 13:07:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-70</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Is SysRq tamed enough currently?</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="10" data-topic="7997">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"><a href="//forums.whonix.org/t/should-lesser-adversaries-with-physical-access-be-part-of-the-threat-model-of-whonix-whonix-host-kicksecure/7997/10">Should (lesser) Adversaries with Physical Access be part of the Threat Model of Whonix / Whonix-Host / Kicksecure?</a>
</div>
<blockquote>
<aside class="quote no-group" data-username="madaidan" data-post="8" data-topic="7997">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"><a href="//forums.whonix.org/t/should-lesser-adversaries-with-physical-access-be-part-of-the-threat-model-of-whonix-whonix-host-kicksecure/7997/8">Should (lesser) Adversaries with Physical Access be part of the Threat Model of Whonix / Whonix-Host / Kicksecure?</a>
</div>
<blockquote>
<p>It does seem like the sysrq key isn’t as bad as I originally though it was. I don’t really like having all of those debugging capabilities exposed to anyone with local access though.</p>
</blockquote>
</aside>
<p>Is SysRq tamed enough currently?</p>
<p>Security discussion summary:<br>
<a href="https://www.whonix.org/wiki/SysRq#security">https://www.whonix.org/wiki/SysRq#security</a></p>
<p>If not, please summarize/bump here: <a href="https://forums.whonix.org/t/sysrq-magic-sysrq-key/8079">SysRq (Magic SysRq key)</a></p>
</blockquote>
</aside>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/69">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/69</link>
        <pubDate>Wed, 02 Dec 2020 11:48:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-69</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Login_spoofing" target="_blank" title="01:31PM - 01 December 2020">Whonix – 1 Dec 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:102/54;"><img src="https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" class="thumbnail" width="102" height="54"></div>

<h3><a href="https://www.whonix.org/wiki/Login_spoofing" target="_blank">Login Spoofing</a></h3>

<p>Prevent Malware from Sniffing the Root Password. Using SysRq + r. (unraw)</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/68">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/68</link>
        <pubDate>Tue, 01 Dec 2020 13:49:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-68</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Yes, now merged.</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/67">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/67</link>
        <pubDate>Sat, 15 Feb 2020 19:42:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-67</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>Did you miss <a href="https://github.com/Whonix/hardened-kernel/pull/43">https://github.com/Whonix/hardened-kernel/pull/43</a>?</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/66">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/66</link>
        <pubDate>Sat, 15 Feb 2020 17:36:10 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-66</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>madaidan via Whonix Forum:</p>
<blockquote>
<p><a href="https://github.com/Whonix/security-misc/pull/60">https://github.com/Whonix/security-misc/pull/60</a></p>
<p><a href="https://github.com/Whonix/hardened-kernel/pull/43">https://github.com/Whonix/hardened-kernel/pull/43</a></p>
</blockquote>
<p>Awesome! Merged. <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/65">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/65</link>
        <pubDate>Sat, 15 Feb 2020 10:43:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-65</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/pull/60" target="_blank">github.com/Whonix/security-misc</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/security-misc/pull/60" target="_blank">Restrict the SysRq key</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:sysrq</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-02-14" data-time="18:20:53" data-timezone="UTC">06:20PM - 14 Feb 20 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/madaidan" target="_blank">
          <img alt="madaidan" src="https://avatars0.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="2 commits changed 2 files with 9 additions and 0 deletions">
        <a href="https://github.com/Whonix/security-misc/pull/60/files" target="_blank">
          <span class="added">+9</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>

  </div>
</div>
  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/hardened-kernel/pull/43" target="_blank">github.com/Whonix/hardened-kernel</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/hardened-kernel/pull/43" target="_blank">Restrict the SysRq key</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:sysrq</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-02-14" data-time="18:25:54" data-timezone="UTC">06:25PM - 14 Feb 20 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/madaidan" target="_blank">
          <img alt="madaidan" src="https://avatars0.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="2 commits changed 2 files with 2 additions and 2 deletions">
        <a href="https://github.com/Whonix/hardened-kernel/pull/43/files" target="_blank">
          <span class="added">+2</span>
          <span class="removed">-2</span>
        </a>
      </div>
    </div>

  </div>
</div>
  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/64">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/64</link>
        <pubDate>Fri, 14 Feb 2020 18:26:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-64</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="60" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Better a security-misc sysctl.</p>
</blockquote>
</aside>
<p>Why not both? <code>CONFIG_MAGIC_SYSRQ_DEFAULT_ENABLE</code> can still be overridden at runtime via the sysctl. It just sets the default.</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/63">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/63</link>
        <pubDate>Fri, 14 Feb 2020 18:13:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-63</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://github.githubassets.com/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://github.com/xairy/unlockdown" target="_blank">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="https://avatars2.githubusercontent.com/u/4965052?s=400&amp;v=4" class="thumbnail" width="" height="">

<h3><a href="https://github.com/xairy/unlockdown" target="_blank">xairy/unlockdown</a></h3>

<p>Disabling kernel lockdown on Ubuntu without physical access - xairy/unlockdown</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>This shows more ways to remotely trigger sysrq.</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/62">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/62</link>
        <pubDate>Tue, 11 Feb 2020 18:16:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-62</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="60" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>We can’t pick and choose any arbitrary combination of commands?</p>
</blockquote>
</aside>
<p>Not specific commands. Only groups of commands.</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/61">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/61</link>
        <pubDate>Fri, 31 Jan 2020 17:07:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-61</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>madaidan via Whonix Forum:</p>
<blockquote>
<aside class="quote no-group" data-post="57" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Not sure how fine granular we can whitelist whatever we want?</p>
</blockquote>
</aside>
<p>See <a href="https://www.kernel.org/doc/html/latest/admin-guide/sysrq.html#how-do-i-enable-the-magic-sysrq-key">https://www.kernel.org/doc/html/latest/admin-guide/sysrq.html#how-do-i-enable-the-magic-sysrq-key</a></p>
</blockquote>
<p>I see. However, it doesn’t look very flexible. We can’t pick and choose<br>
any arbitrary combination of commands?</p>
<blockquote>
<p>We can set the bitmask of allowed functions. If  we just want the shutdown function, we can set the sysctl to 128.</p>
</blockquote>
<p>Could you please white list SAK and shutdown?</p>
<blockquote>
<p>If we want to set the default in the kernel config, we change CONFIG_MAGIC_SYSRQ_DEFAULT_ENABLE to be the bitmask in hexadecimal form.</p>
</blockquote>
<p>Better a security-misc sysctl.</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/60">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/60</link>
        <pubDate>Thu, 23 Jan 2020 03:36:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-60</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="57" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Not sure how fine granular we can whitelist whatever we want?</p>
</blockquote>
</aside>
<p>See <a href="https://www.kernel.org/doc/html/latest/admin-guide/sysrq.html#how-do-i-enable-the-magic-sysrq-key">https://www.kernel.org/doc/html/latest/admin-guide/sysrq.html#how-do-i-enable-the-magic-sysrq-key</a></p>
<p>We can set the bitmask of allowed functions. If  we just want the shutdown function, we can set the sysctl to 128.</p>
<p>If we want to set the default in the kernel config, we change CONFIG_MAGIC_SYSRQ_DEFAULT_ENABLE to be the bitmask in hexadecimal form.</p>
<aside class="quote no-group" data-post="57" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Could this be abused too to kill important processes?</p>
</blockquote>
</aside>
<p>Yes.</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/59">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/59</link>
        <pubDate>Wed, 22 Jan 2020 20:08:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-59</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="56" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>The <code>f</code> command can be used to kill a process taking up too much memory which might be useful to save the system from crashing.</p>
</blockquote>
</aside>
<p>In my experience this command does fuck all. I end up using a hotkey combo and click the frozen app window to shut it off.</p>
<p>The only useful one is the the emergency shutdown.</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/58">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/58</link>
        <pubDate>Wed, 22 Jan 2020 19:38:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-58</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Not sure how fine granular we can whitelist whatever we want?</p>
<p>madaidan via Whonix Forum:</p>
<blockquote>
<aside class="quote no-group" data-post="55" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>Anything else that makes sense?</p>
</blockquote>
</aside>
<p>The <code>o</code> command can be used to quickly shutdown if in an emergency but this makes it easier for DoS and is much better done on the host.</p>
</blockquote>
<p>Yes but if we set it in security-misc it applies to host and VM.</p>
<blockquote>
<p>The <code>f</code> command can be used to kill a process taking up too much memory which might be useful to save the system from crashing.</p>
</blockquote>
<p>Could this be abused too to kill important processes?</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/57">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/57</link>
        <pubDate>Wed, 22 Jan 2020 18:41:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-57</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="55" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>Anything else that makes sense?</p>
</blockquote>
</aside>
<p>The <code>o</code> command can be used to quickly shutdown if in an emergency but this makes it easier for DoS and is much better done on the host.</p>
<p>The <code>f</code> command can be used to kill a process taking up too much memory which might be useful to save the system from crashing.</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/56">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/56</link>
        <pubDate>Wed, 22 Jan 2020 17:00:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-56</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[Patrick_mobile]]></dc:creator>
        <description><![CDATA[
            <p>Need SAK for <a href="https://www.whonix.org/wiki/Root#Prevent_Malware_from_Sniffing_the_Root_Password" rel="nofollow noopener">https://www.whonix.org/wiki/Root#Prevent_Malware_from_Sniffing_the_Root_Password</a></p>
<p>Anything else that makes sense?</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/55">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/55</link>
        <pubDate>Tue, 21 Jan 2020 21:03:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-55</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="53" data-topic="8079" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Alright. Then unfortunately sysrq restriction is required.</p>
</blockquote>
</aside>
<p>Should CONFIG_MAGIC_SYSRQ be disabled in hardened-kernel to get rid of it entirely or should we just whitelist a few functions like SAK?</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/54">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/54</link>
        <pubDate>Tue, 21 Jan 2020 19:54:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-54</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Alright. Then unfortunately sysrq restriction is required.</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/53">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/53</link>
        <pubDate>Tue, 21 Jan 2020 17:00:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-53</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="51" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>In that situation could a compromised process simulate pressing sysrq key?</p>
</blockquote>
</aside>
<p>Yes, should be possible via /dev/uinput.</p>
<aside class="onebox stackexchange">
  <header class="source">
      <a href="https://unix.stackexchange.com/questions/116060/remote-executing-magic-sys-rq" target="_blank">unix.stackexchange.com</a>
  </header>
  <article class="onebox-body">
      <a href="https://unix.stackexchange.com/users/55273/c0rp" target="_blank">
    <img alt="c0rp" src="https://i.stack.imgur.com/1K3KG.jpg?s=128&amp;g=1" class="thumbnail onebox-avatar" width="60" height="60">
  </a>
<h4>
  <a href="https://unix.stackexchange.com/questions/116060/remote-executing-magic-sys-rq" target="_blank">Remote executing Magic Sys Rq</a>
</h4>

<div class="tags">
  <strong>linux, ssh, reboot, magic-sysrq</strong>
</div>

<div class="date">
  asked by
  
  <a href="https://unix.stackexchange.com/users/55273/c0rp" target="_blank">
    c0rp
  </a>
  on <a href="https://unix.stackexchange.com/questions/116060/remote-executing-magic-sys-rq" target="_blank">08:08AM - 20 Feb 14 UTC</a>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/52">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/52</link>
        <pubDate>Tue, 21 Jan 2020 16:43:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-52</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>madaidan via Whonix Forum:</p>
<blockquote>
<aside class="quote no-group" data-post="49" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Without apparmor-profile-everything, a malicious root can just <a href="https://www.whonix.org/wiki/SysRq#Enable_SysRq">easyly enable sysrq as per instructions</a>.</p>
</blockquote>
</aside>
<p>Not necessarily. An attacker running as root without read-write access to /proc/sys/kernel/sysrq (as is the case for many systemd services due to <code>ProtectKernelTunables</code> for example) can still be limited by this.</p>
</blockquote>
<p>In that situation could a compromised process simulate pressing sysrq key?</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/51">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/51</link>
        <pubDate>Tue, 21 Jan 2020 06:22:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-51</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="49" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Without apparmor-profile-everything, a malicious root can just <a href="https://www.whonix.org/wiki/SysRq#Enable_SysRq">easyly enable sysrq as per instructions</a>.</p>
</blockquote>
</aside>
<p>Not necessarily. An attacker running as root without read-write access to /proc/sys/kernel/sysrq (as is the case for many systemd services due to <code>ProtectKernelTunables</code> for example) can still be limited by this.</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/50">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/50</link>
        <pubDate>Mon, 20 Jan 2020 16:50:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-50</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="48" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>apparmor-profile-everything doesn’t really have anything to do with sysrq or other kernel hardening.</p>
</blockquote>
</aside>
<p>Without apparmor-profile-everything, a malicious root can just <a href="https://www.whonix.org/wiki/SysRq#Enable_SysRq">easyly enable sysrq as per instructions</a>. There for users who only use security-misc don’t benefit from this. Only hinders debugging for these. Therefore I think this fits better into apparmor-profile-everything. Only with apparmor-profile-everything we can have a complete untrusted root implementation.</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/49">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/49</link>
        <pubDate>Mon, 20 Jan 2020 12:16:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-49</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="47" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Would it make sense to add this to apparmor-profile-everything? Since only apparmor-profile-everything implements untrusted root?</p>
</blockquote>
</aside>
<p>apparmor-profile-everything doesn’t really have anything to do with sysrq or other kernel hardening.</p>
<p>I don’t think we should make this related to apparmor.</p>
<aside class="quote no-group" data-post="47" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>security-misc alone doesn’t implement untrusted root?</p>
</blockquote>
</aside>
<p>It does a bit.</p>
<p>It disables kexec.</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/blob/master/etc/sysctl.d/kexec.conf" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/security-misc/blob/master/etc/sysctl.d/kexec.conf" target="_blank">Whonix/security-misc/blob/master/etc/sysctl.d/kexec.conf</a></h4>
<pre><code class="lang-conf">## Copyright (C) 2019 - 2019 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## Quote https://www.kernel.org/doc/html/latest/admin-guide/sysctl/kernel.html
##
## kexec_load_disabled:
##
## A toggle indicating if the kexec_load syscall has been disabled. This value defaults to 0 (false: kexec_load enabled), but can be set to 1 (true: kexec_load disabled). Once true, kexec can no longer be used, and the toggle cannot be set back to false. This allows a kexec image to be loaded before disabling the syscall, allowing a system to set up (and later use) an image without it being altered. Generally used together with the "modules_disabled" sysctl.

## Disables kexec which can be used to replace the running kernel.
kernel.kexec_load_disabled=1
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Hides kernel symbols from root.</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/blob/master/etc/sysctl.d/kptr_restrict.conf" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/security-misc/blob/master/etc/sysctl.d/kptr_restrict.conf" target="_blank">Whonix/security-misc/blob/master/etc/sysctl.d/kptr_restrict.conf</a></h4>
<pre><code class="lang-conf">## Copyright (C) 2019 - 2019 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## Hides kernel addresses in various files in /proc.
## Kernel addresses can be very useful in certain exploits.
##
## https://kernsec.org/wiki/index.php/Bug_Classes/Kernel_pointer_leak
kernel.kptr_restrict=2
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Prevents root processes from creating coredumps.</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/blob/master/etc/sysctl.d/suid_dumpable.conf" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/security-misc/blob/master/etc/sysctl.d/suid_dumpable.conf" target="_blank">Whonix/security-misc/blob/master/etc/sysctl.d/suid_dumpable.conf</a></h4>
<pre><code class="lang-conf">## Copyright (C) 2019 - 2019 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## Prevent setuid processes from creating coredumps.
fs.suid_dumpable=0
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Hardens the BPF JIT compiler for root (that’s what <code>bpf_jit_harden=2 </code>does).</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/blob/master/etc/sysctl.d/harden_bpf.conf" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/security-misc/blob/master/etc/sysctl.d/harden_bpf.conf" target="_blank">Whonix/security-misc/blob/master/etc/sysctl.d/harden_bpf.conf</a></h4>
<pre><code class="lang-conf">## Copyright (C) 2019 - 2019 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## Hardens the BPF JIT compiler and restricts it to root.
kernel.unprivileged_bpf_disabled=1
net.core.bpf_jit_harden=2
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-post="47" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Can’t find. Any reference?</p>
</blockquote>
</aside>
<p><a href="https://docs.clip-os.org/clipos/kernel.html#kernel-hacking" class="onebox" target="_blank">https://docs.clip-os.org/clipos/kernel.html#kernel-hacking</a></p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/48">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/48</link>
        <pubDate>Sun, 19 Jan 2020 15:09:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-48</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
      <item>
        <title>SysRq (Magic SysRq key)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="46" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Now that untrusted root is in our threat model, we might want to look at disabling SysRq again as abusing it can be done remotely by root (/proc/sysrq-trigger or /dev/uinput).</p>
</blockquote>
</aside>
<p>Would it make sense to add this to apparmor-profile-everything? Since only apparmor-profile-everything implements untrusted root? security-misc alone doesn’t implement untrusted root?</p>
<aside class="quote no-group" data-post="46" data-topic="8079">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>CLIPOS also recommends to disable this.</p>
</blockquote>
</aside>
<p>Can’t find. Any reference?</p>
          <p><a href="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/47">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079/47</link>
        <pubDate>Sun, 19 Jan 2020 13:59:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8079-47</guid>
        <source url="http://forums.whonix.org/t/sysrq-magic-sysrq-key/8079.rss">SysRq (Magic SysRq key)</source>
      </item>
  </channel>
</rss>
