<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
    <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745</link>
    <description>Using Kicksecure as Host, and Whonix as a virtual machine running in KVM, the workstation does not launch due to error with shared folder.

&gt; &quot;Error starting domain: internal error: qemu unexpectedly closed the monitor: [...] qemu-system-x86_64: -device virtio-9p-pc,id=fs0,fdev=fsdev-fs0,mount_tag=shared,bus=pci.0,addr=0x8: cannot initialize fsdev &#39;fsdev-fs0&#39;: failed to open &#39;/home/user/shared&#39;: Permission denied
&gt; 
&gt; Traceback (most recent call last): File &quot;/usr/share/virt-manager/virtManager/asyncjob.psy&quot;, line 75 in cb_wrapper
&gt;    callback(asyncjob, *args, **kwargs)
&gt;  File &quot;/usr/share/virt-manager/virtManager/asyncjob.psy&quot;, line 111, in tmpcb
&gt;    calback(*args, **kwargs)
&gt;  File &quot;/usr/share/virt-manager/virtManager/domain.py&quot;,
&gt; line 1400, in startup
&gt;   self._backend.create()
&gt;  File &quot;/usr/lib/python3/dist-packages/libvirt.py&quot;, line 1080, in create
&gt;    if ret == -1: raise libvirtError (&#39;virDomainCreate() failed&#39;, dom=self)
&gt; libvirt.libvirtError: internal error: qemu unexpectedly closed the monitor: [...] and then repeats the section from the start.
&gt; &quot;



Kicksecure Host was installed like this: debian netinst with no desktop environment, then installing according to distro morphing documentation with Whonix Onion Repository. 

sudo apt-get install --no-install-recommends kicksecure-xfce

Was used.

KVM and Whonix were installed according to whonix KVM documentation, and shared folder was also set up according to the documentation.</description>
    <language>en</language>
    <lastBuildDate>Fri, 26 Jun 2020 13:05:21 +0000</lastBuildDate>
    <category>KVM</category>
    <atom:link href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Good! Sometimes weird stuff happens and it’s best to move on.</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/38">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/38</link>
        <pubDate>Fri, 26 Jun 2020 13:05:21 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-38</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[59mpci2GJ5xlHhY]]></dc:creator>
        <description><![CDATA[
            <p>I uninstalled whonix &amp; ks and then reinstalled with version 15.0.1.3.9, and now the shared folder shows up in /mnt/shared and moving files across works. Not sure what happened</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/37">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/37</link>
        <pubDate>Thu, 25 Jun 2020 23:26:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-37</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>What’s happening at most is this:</p>
<pre><code class="lang-auto">sudo mkdir --parents /mnt/shared
sudo chmod 777 /mnt/shared
sudo /bin/mount -t 9p -o trans=virtio shared /mnt/shared -oversion=9p2000.L
</code></pre>
<p>Therefore I strongly suggest to not concentrate on vm-config-dist. It is very most likely not the cause of issues.</p>
<p>Once commands are known to (auto) mount a shared folder, I am happy to automate these in vm-config-dist package.</p>
<p>In other words: Forget about vm-config-dist. What are the commands required to auto mount the shared folder?</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/36">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/36</link>
        <pubDate>Thu, 25 Jun 2020 08:14:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-36</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>package vm-config-dist</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://gitlab.com/assets/favicon-7901bd695fb93edb07975966062049829afb56cf11511236e61bcf425070e36e.png" class="site-icon" width="32" height="32">
      <a href="https://gitlab.com/whonix/vm-config-dist" target="_blank">GitLab</a>
  </header>
  <article class="onebox-body">
    <img src="https://assets.gitlab-static.net/assets/gitlab_logo-7ae504fe4f68fdebb3c2034e36621930cd36ea87924c11ff65dbcb8ed50dca58.png" class="thumbnail onebox-avatar" width="128" height="128">

<h3><a href="https://gitlab.com/whonix/vm-config-dist" target="_blank">Projects · Whonix / vm-config-dist</a></h3>

<p>GitLab.com</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Related files:</p>
<ul>
<li><a href="https://gitlab.com/whonix/vm-config-dist/-/blob/master/debian/vm-config-dist.postinst#L39">https://gitlab.com/whonix/vm-config-dist/-/blob/master/debian/vm-config-dist.postinst#L39</a></li>
<li><a href="https://gitlab.com/whonix/vm-config-dist/-/blob/master/lib/systemd/system/mnt-shared-kvm.service">https://gitlab.com/whonix/vm-config-dist/-/blob/master/lib/systemd/system/mnt-shared-kvm.service</a></li>
</ul>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/35">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/35</link>
        <pubDate>Thu, 25 Jun 2020 07:27:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-35</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="59mpci2GJ5xlHhY" data-post="33" data-topic="8745">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/5/49beb7/40.png" class="avatar"> 59mpci2GJ5xlHhY:</div>
<blockquote>
<p>Inside the vm, what program or configuration are you using to try to automatically detect and mount the shared folder?</p>
</blockquote>
</aside>
<p>Yep we’ve had it for some time.</p>
<p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> can you please show him the shared folder help code? The package was merged, but I don’t remember where.</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/34">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/34</link>
        <pubDate>Wed, 24 Jun 2020 11:12:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-34</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[59mpci2GJ5xlHhY]]></dc:creator>
        <description><![CDATA[
            <p>Inside the vm, what program or configuration are you using to try to automatically detect and mount the shared folder?</p>
<p>I posted on manjaro forum and they suggested qemu being version 5.0 is new and maybe it’s not working with that</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/33">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/33</link>
        <pubDate>Tue, 23 Jun 2020 19:45:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-33</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Working according to:</p>
<p><code>  type=VIRT_RESOURCE msg=audit(1592414710.025:377): pid=866 uid=0 auid=4294967295 ses=4294967295 subj==unconfined msg='virt=kvm resrc=fs reason=start vm="0KS-X" uuid=b47c8674-9fac-4246-9afa-f6acdeb4497b old-fs="?" new-fs="/home/user/Documents/SharedFiles/X" exe="/usr/bin/libvirtd" hostname=? addr=? terminal=? res=success'</code></p>
<p>I think the bug is something in libvirt or qemu. Please file a bug report with Manjaro so they can take a look. I can;t help beyond this point.</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/32">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/32</link>
        <pubDate>Thu, 18 Jun 2020 18:01:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-32</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Follow instructions here to see f you get any access denied notifications when the guest boots up:</p>
<p><a href="https://wiki.archlinux.org/index.php/AppArmor#Get_desktop_notification_on_DENIED_actions" class="onebox" target="_blank">https://wiki.archlinux.org/index.php/AppArmor#Get_desktop_notification_on_DENIED_actions</a></p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/30">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/30</link>
        <pubDate>Wed, 17 Jun 2020 15:16:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-30</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[59mpci2GJ5xlHhY]]></dc:creator>
        <description><![CDATA[
            <p>/var/log$ ls<br>
prints:</p>
<pre><code>    alternatives.log            btmp            lastlog  tallylog    Xorg.0.log.old
    apparmor                    dpkg.log        lightdm  tor
    apt                         faillog         openvpn  wtmp
    bootclockrandomization.log  fontconfig.log  private  Xorg.0.log
</code></pre>
<p>I haven’t modified this, this is what is in my log directory after a fresh 15.0.1.3.4 install of Whonix kvm.</p>
<aside class="quote no-group" data-username="HulaHoop" data-post="28" data-topic="8745">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Are you using Apparmor or SELinux?</p>
</blockquote>
</aside>
<p>I’m using Apparmor</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/29">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/29</link>
        <pubDate>Wed, 17 Jun 2020 00:29:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-29</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="59mpci2GJ5xlHhY" data-post="27" data-topic="8745">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/5/49beb7/40.png" class="avatar"> 59mpci2GJ5xlHhY:</div>
<blockquote>
<p>Could not find kernel or sys logs in /var/log/ on either my host or vm, where exactly can I find this?</p>
</blockquote>
</aside>
<p>Under /var/log/kern.log</p>
<p>Are you using Apparmor or SELinux? Sometimes the Apparmor profiles could be wrongly configured and interfere with normal VM functions.</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/28">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/28</link>
        <pubDate>Tue, 16 Jun 2020 22:33:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-28</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[59mpci2GJ5xlHhY]]></dc:creator>
        <description><![CDATA[
            <p>Not sure where kconfig but I’m guessing this is it in the vm</p>
<p>/usr/src/linux-headers-4.19.0-9-amd64/.config</p>
<p>shows the following:</p>
<p>CONFIG_NET_9P=m<br>
CONFIG_NET_9P_VIRTIO=m</p>
<p>In the host I’m guessing this is it</p>
<p>/usr/share/grub/grub-mkconfig_lib</p>
<p>did not find 9p there</p>
<p>but sudo modprobe 9p, sudo modprobe 9pnet_virtio does not return an error<br>
and 9p folder is located in lib modules kernel kernel fs</p>
<p>despite running modprobe 9p and modprobe 9pnet_virtio on the host before opening the vm, the shared folders did not show up, so it might not be this.</p>
<p>Could not find kernel or sys logs in /var/log/ on either my host or vm, where exactly can I find this?</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/27">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/27</link>
        <pubDate>Tue, 16 Jun 2020 18:39:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-27</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Check the kernel Kconfig in guest and host side and make sure you have the required modules</p>
<blockquote>
<p>CONFIG_NET_9P=m<br>
CONFIG_NET_9P_VIRTIO=m</p>
</blockquote>
<p>Check kernel log guest side to see if there are any mounting errors during boot. Do you see anything wrong during vm boot?</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/26">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/26</link>
        <pubDate>Mon, 15 Jun 2020 17:56:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-26</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[59mpci2GJ5xlHhY]]></dc:creator>
        <description><![CDATA[
            <p>I’ve fixed the “cannot initialize fsdev ‘fsdev-fs0’: failed to open ‘/home/user/shared’: Permission denied” problem by editing /etc/libvirt/qemu.conf and adding the line:</p>
<p>user = “user”</p>
<p>I figured this from this post I found on a similar issue on redhat forum</p>
<p>" Daniel Berrangé 2015-01-05 11:01:16 UTC</p>
<blockquote>
<p>2014-12-15 qemu-system-x86_64: -device virtio-9p-pci,id=fs0,fsdev=fsdev-fs0,mount_tag=shared,bus=pci.0,addr=0x9: Virtio-9p Failed to initialize fs-driver with id:fsdev-fs0 and export path:/home/user/Documents/shared</p>
</blockquote>
<p>My guess is that since the QEMU process is probably running under a qemu:qemu user/group account, it will not have permission to access /home/user/… and this then causes QEMU to shutdown."</p>
<p>However, now the other problem persists, while the VM now successfully launches with an attached shared folder inside the user directory, I still can’t find the shared folder anywhere in the vm. Any ideas which logs I should look at to find anything out about this or something?</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/25">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/25</link>
        <pubDate>Mon, 15 Jun 2020 15:48:10 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-25</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="59mpci2GJ5xlHhY" data-post="23" data-topic="8745">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/5/49beb7/40.png" class="avatar"> 59mpci2GJ5xlHhY:</div>
<blockquote>
<p>Perhaps I should try to fix the permission error with /home/user/shared first?</p>
</blockquote>
</aside>
<p>Yes and try searching Manjaro bugtracker for tickets mentioning this</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/24">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/24</link>
        <pubDate>Mon, 15 Jun 2020 03:06:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-24</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[59mpci2GJ5xlHhY]]></dc:creator>
        <description><![CDATA[
            <p>While on kicksecure host I was able to work around this problem by putting the shared folder at /home/shared rather than anywhere in the user directory, putting at /mnt/shared yielded a successful launch but without the shared folder actually showing up in the vm.</p>
<p>To restate: I have never been able to solve the original problem that I could not make the shared folder as /home/user/shared because whenever I put it in the user directory even after doing chmod 777 it fails to launch due to a permission error (the same original error)</p>
<aside class="quote no-group" data-username="59mpci2GJ5xlHhY" data-post="1" data-topic="8745">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/5/49beb7/40.png" class="avatar"> 59mpci2GJ5xlHhY:</div>
<blockquote>
<p>"Error starting domain: internal error: qemu unexpectedly closed the monitor: […] qemu-system-x86_64: -device virtio-9p-pc,id=fs0,fdev=fsdev-fs0,mount_tag=shared,bus=pci.0,addr=0x8: cannot initialize fsdev ‘fsdev-fs0’: failed to open ‘/home/user/shared’: Permission denied</p>
</blockquote>
</aside>
<p>Even on a Manjaro host I get this issue, but it is even worse because while I can still open the VM with the shared folder attached to /home/shared and /mnt/shared, the shared folder does not actually appear anywhere in the vms in either case, so I can’t get the shared folder working. This problem is occuring both with KVM Kicksecure and KVM Whonix.</p>
<p>Perhaps I should try to fix the permission error with /home/user/shared first?</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/23</link>
        <pubDate>Sun, 14 Jun 2020 23:43:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-23</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://www.whonix.org/wiki/KVM#Shared_Folders">https://www.whonix.org/wiki/KVM#Shared_Folders</a></p>
<p><del>sudo </del>mkdir /home/user/shared</p>
<p>fixed to:</p>
<p>mkdir /home/user/shared</p>
<blockquote>
<p>no reason to use sudo to create a folder inside the home folder. This would make the owner “root” instead of “user”. Leading to permission issues.</p>
</blockquote>
<p><a href="https://www.whonix.org/w/index.php?title=KVM&amp;type=revision&amp;diff=54248&amp;oldid=54185">https://www.whonix.org/w/index.php?title=KVM&amp;type=revision&amp;diff=54248&amp;oldid=54185</a></p>
<hr>
<p>With a Kicksecure Host, creating a shared folder for Whonix KVM VMs is still completely unassisted as far as the host is concerned.</p>
<p>Kicksecure Host with Whonix KVM VMs should be same as Kicksecure Host with Whonix KVM VMs.</p>
<p>The only applicable documentation chapter is <a href="https://www.whonix.org/wiki/KVM#Shared_Folders">https://www.whonix.org/wiki/KVM#Shared_Folders</a></p>
<aside class="quote no-group quote-modified" data-post="21" data-topic="8745">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/5/49beb7/40.png" class="avatar"> 59mpci2GJ5xlHhY:</div>
<blockquote>
<blockquote>
<p>Please check:</p>
<pre><code class="lang-auto">dpkg -l | grep whonix-libvirt
</code></pre>
</blockquote>
<p>No output,</p>
</blockquote>
</aside>
<p>Expected. That package isn’t installed on Kicksecure Host. It’s not supposed to be either. Therefore folders /mnt/workstation-shared  / /mnt/gateway-shared aren’t automatically created.</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/22</link>
        <pubDate>Sun, 19 Jan 2020 09:52:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-22</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[59mpci2GJ5xlHhY]]></dc:creator>
        <description><![CDATA[
            <p>Yes, I wanted to clarify that I am using Kicksecure as the host operating system rather than using Kicksecure as a VM, and that I am using Whonix as a VM inside Kicksecure</p>
<aside class="quote no-group" data-post="18" data-topic="8745">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Please check:</p>
<pre><code class="lang-auto">dpkg -l | grep whonix-libvirt
</code></pre>
</blockquote>
</aside>
<p>No output, mounting in /mnt/workstation-shared still results in no files showing up in the shared folder unless I’m looking in the wrong place, looking in /mnt/shared in whonix don’t see anything in media either.</p>
<p>/home/user/shared still fails with the original error to even open the vm.</p>
<p>/home/shared still works fine</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/21</link>
        <pubDate>Sat, 18 Jan 2020 22:50:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-21</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group quote-modified" data-post="19" data-topic="8745">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<blockquote>
<p>Kicksecure is NOT Whonix-Host. Whonix-Host and Kicksecure are separate<br>
projects.</p>
</blockquote>
<p>I got confused by his thread title saying Kicksecure “Host”</p>
</blockquote>
</aside>
<p>And Kicksecure Host is NOT Whonix-Host too.</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/20</link>
        <pubDate>Sat, 18 Jan 2020 19:38:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-20</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="18" data-topic="8745">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Kicksecure is NOT Whonix-Host. Whonix-Host and Kicksecure are separate<br>
projects.</p>
</blockquote>
</aside>
<p>I got confused by his thread title saying Kicksecure “Host”</p>
<aside class="quote no-group" data-post="18" data-topic="8745">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>What would be an appropriate way to set this up anyhow? What would be<br>
the most secure and canonical location for these shared folders?<br>
Somewhere in user’s home folder /home/user? Or under /mnt/ better? Group<br>
owner user “user” and user/group “user” the only one allowed to<br>
read/write but not execute?</p>
</blockquote>
</aside>
<p>I always did it under home folder. Seems more contained than using /mnt/? As for permissions I am open to more secure suggestions that don’t break functionality.</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/19</link>
        <pubDate>Sat, 18 Jan 2020 17:54:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-19</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Kicksecure is NOT Whonix-Host.<br>
Kicksecure Host is NOT Whonix-Host.<br>
Whonix-Host and Kicksecure are separate projects.</p>
<p>HulaHoop via Whonix Forum:</p>
<blockquote>
<p>That’s great news. <a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> are we shipping Kicksecure Host with a shared folder already?</p>
</blockquote>
<p>No, I don’t think so, because Kicksecure is NOT Whonix-Host. Package<br>
<code>whonix-libvirt</code> is not installed on Kicksecure.</p>
<p>Please check:</p>
<pre><code>dpkg -l | grep whonix-libvirt
</code></pre>
<blockquote>
<p>Perhaps the problem is caused by the mkdir command run as root?</p>
</blockquote>
<p>Could be in theory but chmod should fix that.</p>
<blockquote>
<p><a href="https://github.com/Whonix/whonix-libvirt/blob/2fc6fc5318665db8bfb697d7d6b71495c7c8d229/usr/lib/whonix-libvirt/install">https://github.com/Whonix/whonix-libvirt/blob/2fc6fc5318665db8bfb697d7d6b71495c7c8d229/usr/lib/whonix-libvirt/install</a></p>
<pre><code>mkdir --parents /mnt/gateway-shared

mkdir --parents /mnt/workstation-shared

chmod 777 /mnt/gateway-shared

chmod 777 /mnt/workstation-shared
</code></pre>
</blockquote>
<p>Development of Whonix-Host didn’t progress as far yet as testing shared<br>
folders.</p>
<p><a href="http://permissions-calculator.org/decode/0777/" class="onebox" target="_blank">http://permissions-calculator.org/decode/0777/</a></p>
<p>chmod <code>0777</code> means that user, group and others (everyone) can<br>
read/write/execute. That doesn’t seem very appropriate anyhow.</p>
<p>What would be an appropriate way to set this up anyhow? What would be<br>
the most secure and canonical location for these shared folders?<br>
Somewhere in user’s home folder /home/user? Or under /mnt/ better? Group<br>
owner user “user” and user/group “user” the only one allowed to<br>
read/write but not execute?</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/18</link>
        <pubDate>Sat, 18 Jan 2020 11:51:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-18</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[59mpci2GJ5xlHhY]]></dc:creator>
        <description><![CDATA[
            <p>Okay I just did that, but it had insufficient permissions without sudo, so I ran all those commands with sudo.</p>
<p>The machine launched successfully without error however, when testing by putting a file from the host, the file did not appear inside the vm shared folder.</p>
<p>Note, test file did show successfully up when mounting to /home/shared, but not /mnt/workstation-shared.</p>
<p>Going to reinstall everything from source next time I have some free time, so I will continue with more tests.</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/17</link>
        <pubDate>Sat, 18 Jan 2020 06:53:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-17</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>That’s great news. <a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> are we shipping Kicksecure Host with a shared folder already? Perhaps the problem is caused by the mkdir command run as root?</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/Whonix/whonix-libvirt/blob/2fc6fc5318665db8bfb697d7d6b71495c7c8d229/usr/lib/whonix-libvirt/install" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/whonix-libvirt/blob/2fc6fc5318665db8bfb697d7d6b71495c7c8d229/usr/lib/whonix-libvirt/install" target="_blank">Whonix/whonix-libvirt/blob/2fc6fc5318665db8bfb697d7d6b71495c7c8d229/usr/lib/whonix-libvirt/install</a></h4>
<pre><code class="lang-">#!/bin/bash

## Copyright (C) 2019 - 2019 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

set -x
set -e

## {{ Taken from qemu-system-common.postinst.
# Add the kvm group unless it's already there
if ! getent group kvm &gt;/dev/null; then
   addgroup --quiet --system kvm || true
fi
## }} Taken from qemu-system-common.postinst.

## {{ Taken from libvirt-bin.postinst.
if ! getent group libvirt &gt;/dev/null; then
   addgroup --system libvirt
fi
## }} Taken from libvirt-bin.postinst.
</code></pre>

  This file has been truncated. <a href="https://github.com/Whonix/whonix-libvirt/blob/2fc6fc5318665db8bfb697d7d6b71495c7c8d229/usr/lib/whonix-libvirt/install" target="_blank">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<pre><code>mkdir --parents /mnt/gateway-shared

mkdir --parents /mnt/workstation-shared

chmod 777 /mnt/gateway-shared

chmod 777 /mnt/workstation-shared
</code></pre>
<p><a class="mention" href="http://forums.whonix.org/u/59mpci2gj5xlhhy">@59mpci2GJ5xlHhY</a> have you used the shared folders on the host at these paths?</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/16</link>
        <pubDate>Fri, 17 Jan 2020 17:56:40 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-16</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[59mpci2GJ5xlHhY]]></dc:creator>
        <description><![CDATA[
            <p>Good idea, I made /home/shared and it worked, then I deleted and remade the shared folder in /home/user/shared the same way but it did not work (same error),  so it has to do with the user directory and probably permissions, any idea to fix it in the user directory?</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/15</link>
        <pubDate>Fri, 17 Jan 2020 01:22:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-15</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Strange because you are essentially using a Debian stable with our customizations that shouldn’t really interfere with this.</p>
<p>Try adding any other shred folder manually created in your home folder. Does it give the same error?</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/14</link>
        <pubDate>Thu, 16 Jan 2020 16:13:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-14</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
      <item>
        <title>Kicksecure Host - Shared folder not working with Whonix KVM</title>
        <dc:creator><![CDATA[59mpci2GJ5xlHhY]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group quote-modified" data-post="11" data-topic="8745">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>sudo addgroup “$(whoami)” libvirt sudo addgroup “$(whoami)” kvm</p>
</blockquote>
</aside>
<blockquote>
<p>The user ‘user’ is already a member of ‘libvirt’.<br>
The user ‘user’ is already a member of ‘kvm’.</p>
</blockquote>
<aside class="quote no-group" data-post="11" data-topic="8745">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>sudo modprobe 9p sudo modprobe 9pnet sudo modprobe 9pnet_virtio</p>
</blockquote>
</aside>
<p>No output (and nothing interesting in journalctl either)<br>
Did this, same error still.</p>
<p>libvirt was already used as per documentation, only additionaly created libvirtd as hula mentioned it</p>
          <p><a href="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745/13</link>
        <pubDate>Thu, 16 Jan 2020 02:10:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8745-13</guid>
        <source url="http://forums.whonix.org/t/kicksecure-host-shared-folder-not-working-with-whonix-kvm/8745.rss">Kicksecure Host - Shared folder not working with Whonix KVM</source>
      </item>
  </channel>
</rss>
