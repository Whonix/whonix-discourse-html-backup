<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Change default shell from bash to zsh by default?</title>
    <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792</link>
    <description>Why?

zsh seems to have much better usability, a much better completion features and other features. See demonstration here:

https://www.youtube.com/watch?v=E2WXc3qAg8A

Looks great:

https://forums.whonix.org/t/xfce-theming-a-few-suggestions/7205/73

Size?

2 Packages, ~ 5 MB.

Non-issues:

* breaking bash scripts: each script nowadays has a shebang in its first line such as for example /usr/sbin/apparmor-info is a bash script, its first line is `#!/bin/bash`. Therefore the script will still run under bash, not zsh.
* changing back default shell to bash by the user will still be simple
* it will be trivial to start bash from zsh by typing command `bash`</description>
    <language>en</language>
    <lastBuildDate>Thu, 03 Nov 2022 17:50:04 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Thoughts?</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/107">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/107</link>
        <pubDate>Thu, 03 Nov 2022 17:50:04 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-107</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubpullrequest" data-onebox-src="https://github.com/Kicksecure/desktop-config-dist/pull/11">
  <header class="source">

      <a href="https://github.com/Kicksecure/desktop-config-dist/pull/11" target="_blank" rel="noopener">github.com/Kicksecure/desktop-config-dist</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Kicksecure/desktop-config-dist/pull/11" target="_blank" rel="noopener">Fix /etc/zsh_prompt for shells with `no_unset` shell option (aka `set -u`) set</a>
    </h4>

    <div class="branches">
      <code>Kicksecure:master</code> ← <code>ntninja:patch-1</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-11-02" data-time="22:03:56" data-timezone="UTC">10:03PM - 02 Nov 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/ntninja" target="_blank" rel="noopener">
          <img alt="ntninja" src="https://avatars.githubusercontent.com/u/246386?v=4" class="onebox-avatar-inline" width="20" height="20">
          ntninja
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 2 additions and 2 deletions">
        <a href="https://github.com/Kicksecure/desktop-config-dist/pull/11/files" target="_blank" rel="noopener">
          <span class="added">+2</span>
          <span class="removed">-2</span>
        </a>
      </div>
    </div>
  </div>
</div>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/106">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/106</link>
        <pubDate>Thu, 03 Nov 2022 17:49:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-106</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Thanks, merged!</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/105">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/105</link>
        <pubDate>Wed, 02 Nov 2022 17:15:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-105</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubpullrequest" data-onebox-src="https://github.com/Kicksecure/desktop-config-dist/pull/10">
  <header class="source">

      <a href="https://github.com/Kicksecure/desktop-config-dist/pull/10" target="_blank" rel="noopener">github.com/Kicksecure/desktop-config-dist</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Kicksecure/desktop-config-dist/pull/10" target="_blank" rel="noopener">enabled bracketed paste by default</a>
    </h4>

    <div class="branches">
      <code>Kicksecure:master</code> ← <code>nyxnor:master</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-10-31" data-time="16:15:53" data-timezone="UTC">04:15PM - 31 Oct 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/nyxnor" target="_blank" rel="noopener">
          <img alt="nyxnor" src="https://avatars.githubusercontent.com/u/69700936?v=4" class="onebox-avatar-inline" width="20" height="20">
          nyxnor
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 5 additions and 0 deletions">
        <a href="https://github.com/Kicksecure/desktop-config-dist/pull/10/files" target="_blank" rel="noopener">
          <span class="added">+5</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">not sure it works using every paste method, but will leave enabled as it may cau<span class="show-more-container"><a href="https://github.com/Kicksecure/desktop-config-dist/pull/10" target="_blank" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">se more good than harm</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/104">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/104</link>
        <pubDate>Tue, 01 Nov 2022 00:04:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-104</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p>yes, todo.</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/103">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/103</link>
        <pubDate>Mon, 31 Oct 2022 12:00:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-103</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>For better security, could you please consider enabling <a href="https://cirw.in/blog/bracketed-paste" class="inline-onebox">bracketed paste mode</a>?</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/102">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/102</link>
        <pubDate>Mon, 31 Oct 2022 11:51:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-102</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Thanks, merged!</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/101">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/101</link>
        <pubDate>Sun, 23 Oct 2022 22:42:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-101</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubpullrequest" data-onebox-src="https://github.com/Kicksecure/desktop-config-dist/pull/9">
  <header class="source">

      <a href="https://github.com/Kicksecure/desktop-config-dist/pull/9" target="_blank" rel="noopener">github.com/Kicksecure/desktop-config-dist</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Kicksecure/desktop-config-dist/pull/9" target="_blank" rel="noopener">remove extendedglob, too advanced</a>
    </h4>

    <div class="branches">
      <code>Kicksecure:master</code> ← <code>nyxnor:master</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-10-23" data-time="22:36:58" data-timezone="UTC">10:36PM - 23 Oct 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/nyxnor" target="_blank" rel="noopener">
          <img alt="nyxnor" src="https://avatars.githubusercontent.com/u/69700936?v=4" class="onebox-avatar-inline" width="20" height="20">
          nyxnor
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 0 additions and 1 deletions">
        <a href="https://github.com/Kicksecure/desktop-config-dist/pull/9/files" target="_blank" rel="noopener">
          <span class="added">+0</span>
          <span class="removed">-1</span>
        </a>
      </div>
    </div>
  </div>
</div>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/100">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/100</link>
        <pubDate>Sun, 23 Oct 2022 22:37:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-100</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Yes, please. Otherwise I guess too some commands that users/copy paste might break. Even if the scripting is different, should be similar enough to bash in order not to break things.</p>
<p>Note: Since this is related… No, zsh won’t break random shell scripts.</p>
<aside class="quote no-group" data-username="Patrick" data-post="1" data-topic="14792">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>breaking bash scripts: each script nowadays has a shebang in its first line such as for example /usr/sbin/apparmor-info is a bash script, its first line is <code>#!/bin/bash</code>. Therefore the script will still run under bash, not zsh.</p>
</blockquote>
</aside>
<p>(nyxnor knows that but mentioning here in case somebody else would wonder.)</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/99">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/99</link>
        <pubDate>Sun, 23 Oct 2022 22:30:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-99</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p>zsh default is thin, slim, so not set.</p>
<p>so should I remove it?</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/98">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/98</link>
        <pubDate>Sun, 23 Oct 2022 22:27:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-98</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>What’s the zsh default?</p>
<p>Maybe best to stick to zsh defaults?</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/97">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/97</link>
        <pubDate>Sun, 23 Oct 2022 22:19:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-97</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p>Found this<br>
<a href="https://zsh.sourceforge.io/Guide/zshguide05.html#l137" class="onebox" target="_blank" rel="noopener">https://zsh.sourceforge.io/Guide/zshguide05.html#l137</a></p>
<p>Apparently <code>^</code> means negation.</p>
<blockquote>
<p>So <code>[^[:digit:]]`' matches any single character other than a decimal digit. Standards say you should use </code>!<code>' instead of ``^</code>’ to signify negation, but most people I know don’t; also, this can clash with history substitution. However, it is accepted by zsh anywhere where history substitution doesn’t get its hands on the ``!`’ first (which includes all scripts and autoloaded functions).</p>
</blockquote>
<p>And also</p>
<blockquote>
<p>Another two cryptic symbols are the two that do negation. These only work with the option ``EXTENDED_GLOB`’ set: this is necessary to get the most out of zsh’s patterns, but it can be a trap for the unwary by turning otherwise innocuous characters into patterns:</p>
</blockquote>
<blockquote>
<p>print ^foo</p>
</blockquote>
<blockquote>
<p>This means any file in the current directory <em>except</em> the file <code>foo</code>. One way of coming unstuck with ``^`’ is something like</p>
</blockquote>
<blockquote>
<p>stty kill ^u</p>
</blockquote>
<blockquote>
<p>where you would hope <code>^u`' means control with </code>u<code>', i.e. ASCII character 21. But it doesn't, if </code>EXTENDED_GLOB<code>is set: it means</code>any file in the current directory except one called ``u`’ ', which is definitely a different thing.</p>
</blockquote>
<p>So if you want to not have to quote you can insert <code>unsetopt extendedglob</code> in your <code>~/.zshrc</code> as it will override the option set on <code>/etc/zsh/zshrc.dist</code>.</p>
<p>Or if you prefer to remove from the default build?</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/96">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/96</link>
        <pubDate>Sun, 23 Oct 2022 21:39:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-96</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Small issue…</p>
<p>functional in bash:</p>
<pre><code>git verify-commit 16.0.8.2-stable^{commit}
</code></pre>
<p>broken in zsh:</p>
<pre><code>git verify-commit 16.0.8.2-stable^{commit}
</code></pre>
<blockquote>
<p>zsh: no matches found: 16.0.8.2-stable^{commit}<br>
zsh: exit 1     git verify-commit 16.0.8.2-stable^{commit}</p>
</blockquote>
<p>Needs to be quoted in zsh. Functional:</p>
<pre><code>git verify-commit "16.0.8.2-stable^{commit}"
</code></pre>
<p>Is it possible to change zsh behavior here?</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/95">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/95</link>
        <pubDate>Sun, 23 Oct 2022 20:43:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-95</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group quote-modified" data-username="bee" data-post="92" data-topic="14792" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/bee/40/2338_2.png" class="avatar"> bee:</div>
<blockquote>
<aside class="quote no-group" data-username="Patrick" data-post="91" data-topic="14792">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p><code>/home/user/.zshrc</code>.</p>
</blockquote>
</aside>
<p>I think it is <code>/home/$USER/.zshrc</code></p>
</blockquote>
</aside>
<p>APT / deb postinst scripts doesn’t have a <code>$USER</code> variable.</p>
<aside class="quote no-group quote-modified" data-username="nyxnor" data-post="93" data-topic="14792">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/nyxnor/40/2874_2.png" class="avatar"> nyxnor:</div>
<blockquote>
<p><code>/etc/skel/.zshrc</code> created empty</p>
<p><a href="https://github.com/Kicksecure/desktop-config-dist/pull/8" class="inline-onebox">create empty .zshrc to skip zsh-newuser-install by nyxnor · Pull Request #8 · Kicksecure/desktop-config-dist · GitHub</a></p>
</blockquote>
</aside>
<p>Great, merged!</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/94">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/94</link>
        <pubDate>Tue, 18 Oct 2022 13:01:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-94</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p><code>/etc/skel/.zshrc</code> created empty</p><aside class="onebox githubpullrequest" data-onebox-src="https://github.com/Kicksecure/desktop-config-dist/pull/8">
  <header class="source">

      <a href="https://github.com/Kicksecure/desktop-config-dist/pull/8" target="_blank" rel="noopener">github.com/Kicksecure/desktop-config-dist</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Kicksecure/desktop-config-dist/pull/8" target="_blank" rel="noopener">create empty .zshrc to skip zsh-newuser-install</a>
    </h4>

    <div class="branches">
      <code>Kicksecure:master</code> ← <code>nyxnor:master</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-10-18" data-time="12:38:32" data-timezone="UTC">12:38PM - 18 Oct 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/nyxnor" target="_blank" rel="noopener">
          <img alt="nyxnor" src="https://avatars.githubusercontent.com/u/69700936?v=4" class="onebox-avatar-inline" width="20" height="20">
          nyxnor
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 0 additions and 0 deletions">
        <a href="https://github.com/Kicksecure/desktop-config-dist/pull/8/files" target="_blank" rel="noopener">
          <span class="added">+0</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">https://www.kicksecure.com/wiki/Shell</p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/93">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/93</link>
        <pubDate>Tue, 18 Oct 2022 12:39:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-93</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="91" data-topic="14792">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p><code>/home/user/.zshrc</code>.</p>
</blockquote>
</aside>
<p>I think it is <code>/home/$USER/.zshrc</code></p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/92">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/92</link>
        <pubDate>Tue, 18 Oct 2022 01:40:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-92</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="nyxnor" data-post="90" data-topic="14792" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/nyxnor/40/2874_2.png" class="avatar"> nyxnor:</div>
<blockquote>
<p>Can we simply <code>touch ~/.zshrc</code> again?</p>
</blockquote>
</aside>
<p>File <code>~/.zshrc</code> seems the best solution indeed after checking your research on this issue.<br>
Not sure we can run <code>touch ~/.zshrc</code> from debian postinst script. Would be <code>touch /home/user/.zshrc</code>. But the APT sandbox (probably) might block it similarly to:</p>
<aside class="quote no-group" data-username="Patrick" data-post="41" data-topic="14792">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<ol start="2">
<li>changing default shell is failing in Whonix Xfce for VirtualBox</li>
</ol>
<p><code>debian/dist-base-files.postinst</code> command <code>chsh --shell /bin/zsh user</code> is failing due to permission denied (seen during <code>apt dist-upgrade</code>). (The chsh command doesn’t require <code>sudoi</code> because Debian maintainer scripts run as root anyhow.)</p>
</blockquote>
</aside>
<p>Would could add <code>.zshrc' to </code>/etc/skel`. I.e.</p>
<blockquote>
<p><code>/etc/skel/.zshrc</code></p>
</blockquote>
<p>A skel based solution would also be compatible with multi-user setups.</p>
<p>That would work for new builds. So zsh could be enabled by default in the next point release.</p>
<p>As for changing existing users default shell from bash to zsh, I am not sure that’s important or if we even should do that. If so, we’d need to add the <code>csh</code> and <code>touch</code> command here: <a href="https://github.com/Kicksecure/legacy-dist/blob/master/usr/libexec/legacy-dist/fixes" class="inline-onebox">legacy-dist/fixes at master · Kicksecure/legacy-dist · GitHub</a> (as it won’t work from APT).</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/91">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/91</link>
        <pubDate>Tue, 18 Oct 2022 00:38:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-91</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p>Can we simply <code>touch ~/.zshrc</code> again?</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/90">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/90</link>
        <pubDate>Mon, 17 Oct 2022 18:04:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-90</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://www.zsh.org/mla/users/2007/msg00398.html" class="onebox" target="_blank" rel="noopener">https://www.zsh.org/mla/users/2007/msg00398.html</a></p>
<p><a href="https://www.zsh.org/mla/users/2007/msg00400.html" class="onebox" target="_blank" rel="noopener">https://www.zsh.org/mla/users/2007/msg00400.html</a></p>
<p>Upstream did not give a good response, just simply remote the file they said, but does not fix pkg mngmt problems after package is reinstalled, will require a patch on <code>/usr/share/zsh/5.8/scripts/newuser</code>, but the bad thing is that the path is by version and this could soon lead to an error for Zsh 5.9.</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/89">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/89</link>
        <pubDate>Mon, 17 Oct 2022 17:58:07 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-89</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p>Trying to avoid this <a href="https://unix.stackexchange.com/questions/57918/disable-the-configuration-tool-in-zsh" class="inline-onebox">debian - Disable the configuration tool in Zsh - Unix &amp; Linux Stack Exchange</a></p>
<p>changing /etc/zsh/zshenv because the answer is not good at all, it will clear the function and the user won’t be able to use it if they want to run manually.</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/88">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/88</link>
        <pubDate>Mon, 17 Oct 2022 17:37:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-88</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <pre><code class="lang-auto">THE ZSH/NEWUSER MODULE
       The  zsh/newuser  module  is loaded at boot if it is available, the RCS option is set, and
       the PRIVILEGED option is not set (all three are true by default).  This takes place  imme‐
       diately after commands in the global zshenv file (typically /etc/zsh/zshenv), if any, have
       been executed.  If the module is not available it is silently ignored by  the  shell;  the
       module may safely be removed from $MODULE_PATH by the administrator if it is not required.

       On  loading,  the  module tests if any of the start-up files .zshenv, .zprofile, .zshrc or
       .zlogin exist in the directory given by the environment variable ZDOTDIR,  or  the  user's
       home  directory  if  that is not set.  The test is not performed and the module halts pro‐
       cessing if the shell was in an emulation mode (i.e. had been invoked as some  other  shell
       than zsh).

       If none of the start-up files were found, the module then looks for the file newuser first
       in a sitewide directory, usually the parent directory of the site-functions directory, and
       if that is not found the module searches in a version-specific directory, usually the par‐
       ent of the functions directory containing version-specific functions.  (These  directories
       can  be  configured  when  zsh  is  built  using the --enable-site-scriptdir=dir and --en‐
       able-scriptdir=dir flags to configure, respectively; the defaults are prefix/share/zsh and
       prefix/share/zsh/$ZSH_VERSION where the default prefix is /usr/local.)

       If  the  file  newuser is found, it is then sourced in the same manner as a start-up file.
       The file is expected to contain code to install start-up files for the user,  however  any
       valid shell code will be executed.

       The zsh/newuser module is then unconditionally unloaded.

       Note  that  it is possible to achieve exactly the same effect as the zsh/newuser module by
       adding code to /etc/zsh/zshenv.  The module exists simply to allow the shell to  make  ar‐
       rangements for new users without the need for intervention by package maintainers and sys‐
       tem administrators.

       The script supplied with the module invokes the shell function zsh-newuser-install.   This
       may  be  invoked  directly  by the user even if the zsh/newuser module is disabled.  Note,
       however, that if the module is not installed the function will not  be  installed  either.
       The function is documented in the section User Configuration Functions in zshcontrib(1).
</code></pre>
<p>still searching how to disable a zsh module</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/87">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/87</link>
        <pubDate>Mon, 17 Oct 2022 17:27:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-87</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p>Will disable the zsh-newuser module as per man:</p>
<pre><code class="lang-auto">WHEN THE SHELL STARTS
       When it starts, the shell reads commands from various files.   These  can  be  created  or
       edited to customize the shell.  See the section Startup/Shutdown Files in zsh(1).

       If  no personal initialization files exist for the current user, a function is run to help
       you change some of the most common settings.  It won't appear if  your  administrator  has
       disabled  the  zsh/newuser  module.  The function is designed to be self-explanatory.  You
       can run it by hand with `autoload -Uz zsh-newuser-install; zsh-newuser-install  -f'.   See
       also the section User Configuration Functions in zshcontrib(1).
</code></pre>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/86">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/86</link>
        <pubDate>Mon, 17 Oct 2022 17:08:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-86</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="83" data-topic="14792">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Now I keep getting this prompt:</p>
</blockquote>
</aside>
<p>At which moment do you get this prompt?</p>
<p>I deleted ~/.zshrc and ran zsh but not warning appeared.</p>
<p>Edit: on one machine I could reproduce.</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/85">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/85</link>
        <pubDate>Mon, 17 Oct 2022 16:56:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-85</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>For testing, please make sure you don’t have a local <code>~/.zshrc</code> file. That would avoid reproduction of this issue.</p>
<pre><code>ls ~/.zshrc</code></pre>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/84">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/84</link>
        <pubDate>Mon, 17 Oct 2022 15:23:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-84</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
      <item>
        <title>Change default shell from bash to zsh by default?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Now I keep getting this prompt:</p>
<blockquote>
<p>This is the Z Shell configuration function for new users,<br>
zsh-newuser-install.</p>
</blockquote>
<p>But it’s weird because otherwise all functionality (colors, command completion) are functional as expected.</p>
<p>Any idea?</p>
          <p><a href="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/83">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792/83</link>
        <pubDate>Mon, 17 Oct 2022 15:18:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14792-83</guid>
        <source url="http://forums.whonix.org/t/change-default-shell-from-bash-to-zsh-by-default/14792.rss">Change default shell from bash to zsh by default?</source>
      </item>
  </channel>
</rss>
