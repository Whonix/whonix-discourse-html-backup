<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Random Hidden Service Resolvers Default [RFC]</title>
    <link>http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652</link>
    <description>Default should be to choose from a random list of .onion service resolvers known to be running their own local resolver. Possibly rotate resolver each Q query or N seconds. This is a decent upgrade from defaulting to exit nodes which often resolve directly by upstream google or comcast.

If we agree, let&#39;s talk about implementation and I will contribute it if necessary. If not, let&#39;s riddle out why not.

testing note: dns ip leak test to determine that resolver is handling his own resolver cache. Resolver&#39;s clearnet IP probably doesn&#39;t need to be secret. 

inquiry: best way to perform test? Perform dig on host which returns final upstream resolver? What if no cache hit though?</description>
    <language>en</language>
    <lastBuildDate>Tue, 01 Dec 2020 05:18:13 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Random Hidden Service Resolvers Default [RFC]</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="5" data-topic="10652">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>There might even be DNSCrypt servers reachable over <code>.onion</code> .</p>
</blockquote>
</aside>
<p>There is at least one. <code>1.1.1.1</code></p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://blog.cloudflare.com/favicon.png" class="site-icon" width="16" height="16">
      <a href="https://blog.cloudflare.com/welcome-hidden-resolver/" target="_blank" title="02:46PM - 05 June 2018">The Cloudflare Blog – 5 Jun 18</a>
  </header>
  <article class="onebox-body">
    <img src="https://blog.cloudflare.com/content/images/2018/06/tor-address-3.gif" class="thumbnail" width="" height="">

<h3><a href="https://blog.cloudflare.com/welcome-hidden-resolver/" target="_blank">Introducing DNS Resolver for Tor</a></h3>

<p>As was mentioned in the original 1.1.1.1 blog post, our policy is to never write client IP addresses to disk and wipe all logs within 24 hours. Still some folks might not want to reveal their IP address to the resolver at all. This is why we are...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>DNSCrypt is apparently supported even though it does not say so explicitly on that very page. That link links these two pages:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://blog.cloudflare.com/favicon.png" class="site-icon" width="16" height="16">
      <a href="https://blog.cloudflare.com/dns-resolver-1-1-1-1/" target="_blank" title="01:00PM - 01 April 2018">The Cloudflare Blog – 1 Apr 18</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/345;"><img src="https://blog.cloudflare.com/content/images/2018/03/1.1.1.1.png" class="thumbnail" width="690" height="345"></div>

<h3><a href="https://blog.cloudflare.com/dns-resolver-1-1-1-1/" target="_blank">Introducing DNS Resolver, 1.1.1.1 (not a joke)</a></h3>

<p>Cloudflare’s mission is to help build a better Internet and today we are releasing our DNS resolver, 1.1.1.1 - a recursive DNS service. With this offering, we’re fixing the foundation of the Internet by building a faster, more secure and...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://developers.cloudflare.com/1.1.1.1/favicon-32x32.png?v=8a23e4822f3854c58b8f63b57e286bef" class="site-icon" width="16" height="16">
      <a href="https://developers.cloudflare.com/1.1.1.1/dns-over-https/cloudflared-proxy" target="_blank">developers.cloudflare.com</a>
  </header>
  <article class="onebox-body">
    <img src="https://developers.cloudflare.com/1.1.1.1/dns-over-https/cloudflared-proxy/data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAAF0lEQVRIx2NgGAWjYBSMglEwCkbBSAcACBAAAeaR9cIAAAAASUVORK5CYII=" class="thumbnail" width="" height="">

<h3><a href="https://developers.cloudflare.com/1.1.1.1/dns-over-https/cloudflared-proxy" target="_blank">Running a DNS over HTTPS client · 1.1.1.1 docs</a></h3>

<p>A blazing fast DNS resolver built for private browsing.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>which then mentions <code>1.1.1.1</code> is based on DNS over HTTPS (DoH) which DNSCrypt supports. DNSCrypt mentioned on the last link.</p>
          <p><a href="http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652/7</link>
        <pubDate>Tue, 01 Dec 2020 05:18:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10652-7</guid>
        <source url="http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652.rss">Random Hidden Service Resolvers Default [RFC]</source>
      </item>
      <item>
        <title>Random Hidden Service Resolvers Default [RFC]</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="4" data-topic="10652">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Since when does Tor Browser use Cloudflare’s onion resolver? I cannot find any reference for that.</p>
</blockquote>
</aside>
<p>OK so I was a little blurry on the details, it’s up to site operators to set this option to make it easier on Tor visitors:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://theme.zdassets.com/theme_assets/184946/2dec4705e9ab399efdc6eef36e079aa31d1df8d9.ico" class="site-icon" width="64" height="64">
      <a href="https://support.cloudflare.com/hc/en-us/articles/203306930-Understanding-Cloudflare-Tor-support-and-Onion-Routing" target="_blank">Cloudflare Help Center</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:226/75;"><img src="https://theme.zdassets.com/theme_assets/184946/714cba5e835ceb090dd94c29eb1d177c002a93b6.png" class="thumbnail" width="226" height="75"></div>

<h3><a href="https://support.cloudflare.com/hc/en-us/articles/203306930-Understanding-Cloudflare-Tor-support-and-Onion-Routing" target="_blank">Understanding Cloudflare Tor support and Onion Routing</a></h3>

<p>Cloudflare does not automatically&nbsp;block visitors who use the Tor network.&nbsp; Control Tor access via the Firewall app and enable Onion Routing in the Network app.OverviewDue to the behavior of some in...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
          <p><a href="http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652/6</link>
        <pubDate>Mon, 30 Nov 2020 15:02:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10652-6</guid>
        <source url="http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652.rss">Random Hidden Service Resolvers Default [RFC]</source>
      </item>
      <item>
        <title>Random Hidden Service Resolvers Default [RFC]</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>This is actually very similar to this:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Alternative_DNS_Resolver" target="_blank" title="11:40PM - 19 June 2020">Whonix – 19 Jun 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:129/86;"><img src="https://www.whonix.org/w/images/b/ba/Connect-20333640.jpg" class="thumbnail" width="129" height="86"></div>

<h3><a href="https://www.whonix.org/wiki/Alternative_DNS_Resolver" target="_blank">Alternative DNS Resolver - Whonix</a></h3>

<p>Authenticated/Encrypted DNS over Tor, DNSSEC over Tor, DNSCrypt by OpenDNS, httpsdnsd by JonDos</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Similar to combining Whonix with DNSCrypt.</p>
<blockquote>
<p>Note that most applications, such as <a href="https://www.whonix.org/wiki/Tor_Browser">Tor Browser</a>, will <strong>not</strong> <em>automatically</em> profit from setting up an alternative DNS resolver. […]</p>
</blockquote>
<ul>
<li><a href="https://www.whonix.org/wiki/Alternative_DNS_Resolver#Why_not_Use_DNSCrypt_by_Default_in_Whonix_.E2.84.A2.3F"> Why not Use DNSCrypt by Default in Whonix ™?</a></li>
</ul>
<p>There might even be DNSCrypt servers reachable over <code>.onion</code>.</p>
          <p><a href="http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652/5</link>
        <pubDate>Sun, 29 Nov 2020 23:40:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10652-5</guid>
        <source url="http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652.rss">Random Hidden Service Resolvers Default [RFC]</source>
      </item>
      <item>
        <title>Random Hidden Service Resolvers Default [RFC]</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Just to make sure we’re all on the same page:<br>
If system DNS settings are changed in Whonix, this has no effect on Tor Browser whatsoever. One could even disable system DNS in Whonix.<br>
(This is an optional configuration documented here: <a href="https://www.whonix.org/wiki/Stream_Isolation#Better_Protection">https://www.whonix.org/wiki/Stream_Isolation#Better_Protection</a>)<br>
Tor Browser would still be fully functional. This is because Tor Browser talks directly to a Tor <code>SocksPort</code>.<br>
In other words, even if we filled up lets say <code>/etc/resolv.conf</code> with onion DNS servers (if this is how this is supposed to be implemented), Tor Browser wouldn’t benefit from it. The only applications benefiting from it would be those using system default networking (system default DNS). I.e. applications not configured to use a Tor <code>SocksPort</code> using proxy settings or a socksifier (<code>torsocks</code>).</p>
<p>Therefore if resolving DNS over onion is an improvement indeed (Tor Project opinion required), then it’s still best if this is directly implemented in Tor. In theory would be best if Tor Project modified Tor so that all, Tor <code>SocksPort</code>s and Tor’s <code>DnsPort</code> use onions rather than Tor exit relays for DNS resolution.</p>
<p>It could be more fingerprintable because DNS resolution over onion might take longer than DNS resolution over Tor exit relays. For system default networking Whonix is using Tor’s <code>TransPort</code> and for system default DNS Whonix is using Tor’s <code>DnsPort</code>. This is how it is supposed to be implemented.<br>
(According to <a href="https://trac.torproject.org/projects/tor/wiki/doc/TransparentProxy">https://trac.torproject.org/projects/tor/wiki/doc/TransparentProxy</a>)</p>
<aside class="quote no-group" data-username="HulaHoop" data-post="3" data-topic="10652">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>changing a system’s DNS resolution mechanism is out of scope for the Tor project</p>
</blockquote>
</aside>
<p>Tor provides <code>DnsPort</code>.<br>
While redirecting traffic to Tor’s <code>DnsPort</code> isn’t something that Tor currently doing (that is the task for the system administrator or a distribution such as Whonix), yet Tor provides a fine platform for system DNS resolution. Therefore I don’t think this is out of scope for Tor Project. To paraphrase "catch the traffic using iptables and redirect it to Tor’s <code>TransPort</code> / <code>DnsPort</code>".</p>
<aside class="quote no-group" data-username="HulaHoop" data-post="3" data-topic="10652">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>In the case of the latter TBB using Cloudflare’s onion resolver seemed the compromise they reached to stop ruining everyone’s browsing experience AFAIK.</p>
</blockquote>
</aside>
<p>Since when does Tor Browser use Cloudflare’s onion resolver? I cannot find any reference for that.</p>
<p>In any case, if something can be improved related to DNS over Tor, then it’s best to report this to Tor Project first. Both Tor Browser or even better Tor developers could decide to pick this up.</p>
          <p><a href="http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652/4</link>
        <pubDate>Sun, 29 Nov 2020 23:35:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10652-4</guid>
        <source url="http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652.rss">Random Hidden Service Resolvers Default [RFC]</source>
      </item>
      <item>
        <title>Random Hidden Service Resolvers Default [RFC]</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Trioxin" data-post="1" data-topic="10652">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/trioxin/40/2346_2.png" class="avatar"> Trioxin:</div>
<blockquote>
<p>If we agree, let’s talk about implementation and I will contribute it if necessary. If not, let’s riddle out why not.</p>
</blockquote>
</aside>
<p>If it doesn’t make  users more fingerprintable and doesn’t impact cloudflare hosted site access then I don’t see why not. In the case of the latter TBB using Cloudflare’s onion resolver seemed the compromise they  reached to stop ruining everyone’s browsing experience AFAIK. Exit DNS resolution has a documented impact on anonymity and so it might be best to avoid indeed.</p>
<p><a class="mention" href="http://forums.whonix.org/u/trioxin">@Trioxin</a> if you can confirm from Tor upstream that doing o doesn’t have any negative impacts then it would give us a green light. The way things are currently implemented isn;t the ideal, but because changing a system’s DNS resolution mechanism is out of scope for the Tor project. We however are in a position to do so if good.</p>
          <p><a href="http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652/3</link>
        <pubDate>Sun, 29 Nov 2020 22:42:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10652-3</guid>
        <source url="http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652.rss">Random Hidden Service Resolvers Default [RFC]</source>
      </item>
      <item>
        <title>Random Hidden Service Resolvers Default [RFC]</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>This is against design philosophy of Whonix. References:</p>
<ul>
<li><a href="https://www.whonix.org/wiki/Tor#Does_Whonix_.E2.84.A2_Modify_Tor.3F">Does Whonix ™ Modify Tor?</a></li>
<li><a href="https://www.whonix.org/wiki/Tor#Can_Whonix_.E2.84.A2_Improve_Tor.3F">Can Whonix ™ Improve Tor?</a></li>
<li><a href="https://www.whonix.org/wiki/Tor#Tor_Routing_Algorithm"> Tor Routing Algorithm</a></li>
</ul>
<p>Should be implemented in Tor and/or Tor Browser by upstream <a href="http://torproject.org">torproject.org</a> first. Therefore, could you please suggest this, contribute this to upstream please and keep us posted here?</p>
          <p><a href="http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652/2</link>
        <pubDate>Sun, 29 Nov 2020 13:53:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10652-2</guid>
        <source url="http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652.rss">Random Hidden Service Resolvers Default [RFC]</source>
      </item>
      <item>
        <title>Random Hidden Service Resolvers Default [RFC]</title>
        <dc:creator><![CDATA[Trioxin]]></dc:creator>
        <description><![CDATA[
            <p>Default should be to choose from a random list of .onion service resolvers known to be running their own local resolver. Possibly rotate resolver each Q query or N seconds. This is a decent upgrade from defaulting to exit nodes which often resolve directly by upstream google or comcast.</p>
<p>If we agree, let’s talk about implementation and I will contribute it if necessary. If not, let’s riddle out why not.</p>
<p>testing note: dns ip leak test to determine that resolver is handling his own resolver cache. Resolver’s clearnet IP probably doesn’t need to be secret.</p>
<p>inquiry: best way to perform test? Perform dig on host which returns final upstream resolver? What if no cache hit though?</p>
          <p><a href="http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652/1</link>
        <pubDate>Sat, 28 Nov 2020 18:39:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10652-1</guid>
        <source url="http://forums.whonix.org/t/random-hidden-service-resolvers-default-rfc/10652.rss">Random Hidden Service Resolvers Default [RFC]</source>
      </item>
  </channel>
</rss>
