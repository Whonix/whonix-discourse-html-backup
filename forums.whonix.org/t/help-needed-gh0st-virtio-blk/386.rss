<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[Help Needed - gh0st] virtio-blk</title>
    <link>http://forums.whonix.org/t/help-needed-gh0st-virtio-blk/386</link>
    <description>gh0st I need your help trying something if you still have the Whonix archives at hand. Extract a new pristine image and before you import it change the storage attributes to what I&#39;ll post here. I don&#39;t have pristine non-booted images of Whonix and downloading will take time. Then import and see if it boots. Reason is I&#39;m trying to get virtio-blk working for a faster harddisk.


http://wiki.libvirt.org/page/Virtio#Disk_.28block.29_device_driver
&lt;blockquote&gt;Note, this step is only needed in order to transition a guest from IDE or SCSI to virtio. If you initially install the guest using a virtio disk, or if you update the kernel package while booted from a virtio disk, then this step is not needed.&lt;/blockquote&gt;


[code]
&lt;disk type=&#39;file&#39; device=&#39;disk&#39;&gt;
      &lt;driver type=&#39;qcow2&#39;/&gt;
      &lt;source file=&#39;/var/lib/libvirt/images/Whonix-Custom-Workstation.qcow2&#39;/&gt;
      &lt;target dev=&#39;vda&#39; bus=&#39;virtio&#39;/&gt;
    &lt;/disk&gt;[/code]
This means that changing to virtio from IDE becomes a hassle requiring changes to the guest. I want to see if starting out with virtio instead means that we never have to go through this.

This gives me the idea that</description>
    <language>en</language>
    <lastBuildDate>Fri, 01 Aug 2014 13:57:07 +0000</lastBuildDate>
    <category>KVM</category>
    <atom:link href="http://forums.whonix.org/t/help-needed-gh0st-virtio-blk/386.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[Help Needed - gh0st] virtio-blk</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>One peace of good news:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Dev/KVM#Using_UUIDs" target="_blank" title="01:47PM - 23 April 2020">Whonix – 23 Apr 20</a>
  </header>
  <article class="onebox-body">
    <img src="" class="thumbnail" width="" height="">

<h3><a href="https://www.whonix.org/wiki/Dev/KVM#Using_UUIDs" target="_blank">Dev/KVM - Whonix</a></h3>

<p>Development Notes for adding KVM support to Whonix ™.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<p>HulaHoop, why do you think you need a pristine unbooted image?</p>
<p>I think we need 3 steps here.</p>
<ol>
<li>activate virtio-blk in a booted image</li>
<li>check virtio-blk is really in use (<a href="https://www.whonix.org/wiki/Dev/KVM#How_to_check_if_virtio_storage_access_is_in_use_or_an_eventually_existing_fallback_driver.3F">https://www.whonix.org/wiki/Dev/KVM#How_to_check_if_virtio_storage_access_is_in_use_or_an_eventually_existing_fallback_driver.3F</a>)</li>
<li>see how we can automate this using Whonix’s build script / Whonix’s packages</li>
</ol>
<p>Have we already succeeded with step 1 and step 2?</p>
<p>We can not do step 3 before step 1 and 2. We should not do step 3 before step 1 and 2 because then we’re acting blindfolded.</p>
<pre><code class="lang-auto">Gave up waiting for root device.</code></pre>
<p>Does this happensbecause /boot/grub/grub.cfg is still using</p>
<pre><code class="lang-auto">set root='(/dev/sda,msdos1)'</code></pre>
<p>and not</p>
<p>set root=’(/dev/vda,msdos1)’</p>
<p>?</p>
<p>The question is, if/how we can configure grub to work with UUIDs only, not requiring either /dev/sda or /dev/vda, only using UUIDs.</p>
          <p><a href="http://forums.whonix.org/t/help-needed-gh0st-virtio-blk/386/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/help-needed-gh0st-virtio-blk/386/4</link>
        <pubDate>Fri, 01 Aug 2014 13:57:07 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-386-4</guid>
        <source url="http://forums.whonix.org/t/help-needed-gh0st-virtio-blk/386.rss">[Help Needed - gh0st] virtio-blk</source>
      </item>
      <item>
        <title>[Help Needed - gh0st] virtio-blk</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Ok thanks for helping and trying this for me. Its a libvirt bug with no solution I guess.</p>
          <p><a href="http://forums.whonix.org/t/help-needed-gh0st-virtio-blk/386/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/help-needed-gh0st-virtio-blk/386/3</link>
        <pubDate>Fri, 01 Aug 2014 03:43:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-386-3</guid>
        <source url="http://forums.whonix.org/t/help-needed-gh0st-virtio-blk/386.rss">[Help Needed - gh0st] virtio-blk</source>
      </item>
      <item>
        <title>[Help Needed - gh0st] virtio-blk</title>
        <dc:creator><![CDATA[gh0st66]]></dc:creator>
        <description><![CDATA[
            <p>I’m using the archive I downloaded from sourceforge whonix v8.6</p>
<p>[code]<br>
Gave up waiting for root device. Commin Problems:</p>
<ul>
<li>Boot args (cat /proc/cmdline)</li>
<li>Check rootdelay+ (did the system wait long enough?)</li>
<li>Check root=did the system wait for the right device?)</li>
<li>Missing modules (cat /proc/modules; ls /dev)<br>
ALERT! /dev/sda1/ does not exist. Dropping to a shell!<br>
[ 31.399304] ohci_hcd: USB 1/1 ‘Open’ Host Controller (DHCI) Driver[/code]</li>
</ul>
          <p><a href="http://forums.whonix.org/t/help-needed-gh0st-virtio-blk/386/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/help-needed-gh0st-virtio-blk/386/2</link>
        <pubDate>Fri, 01 Aug 2014 02:16:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-386-2</guid>
        <source url="http://forums.whonix.org/t/help-needed-gh0st-virtio-blk/386.rss">[Help Needed - gh0st] virtio-blk</source>
      </item>
      <item>
        <title>[Help Needed - gh0st] virtio-blk</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>gh0st I need your help trying something if you still have the Whonix archives at hand. Extract a new pristine image and before you import it change the storage attributes to what I’ll post here. I don’t have pristine non-booted images of Whonix and downloading will take time. Then import and see if it boots. Reason is I’m trying to get virtio-blk working for a faster harddisk.</p>
<p><a href="http://wiki.libvirt.org/page/Virtio#Disk_.28block.29_device_driver" class="onebox" target="_blank">http://wiki.libvirt.org/page/Virtio#Disk_.28block.29_device_driver</a></p>
<blockquote>Note, this step is only needed in order to transition a guest from IDE or SCSI to virtio. If you initially install the guest using a virtio disk, or if you update the kernel package while booted from a virtio disk, then this step is not needed.</blockquote>
<p><code>
&lt;disk type='file' device='disk'&gt;
      &lt;driver type='qcow2'/&gt;
      &lt;source file='/var/lib/libvirt/images/Whonix-Custom-Workstation.qcow2'/&gt;
      &lt;target dev='vda' bus='virtio'/&gt;
    &lt;/disk&gt;</code><br>
This means that changing to virtio from IDE becomes a hassle requiring changes to the guest. I want to see if starting out with virtio instead means that we never have to go through this.</p>
<p>This gives me the idea that</p>
          <p><a href="http://forums.whonix.org/t/help-needed-gh0st-virtio-blk/386/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/help-needed-gh0st-virtio-blk/386/1</link>
        <pubDate>Fri, 01 Aug 2014 01:17:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-386-1</guid>
        <source url="http://forums.whonix.org/t/help-needed-gh0st-virtio-blk/386.rss">[Help Needed - gh0st] virtio-blk</source>
      </item>
  </channel>
</rss>
