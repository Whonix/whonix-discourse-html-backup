<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Suggestion: update-torbrowser shouldn&#39;t downgrade by default - #2 by Patrick - Development - Whonix Forum</title>
    <meta name="description" content="For a long time, I’ve only ever used update-torbrowser --onion --noask to update Tor Browser in my whonix-ws template. As discussed in the [https://forums.whonix.org/t/download-torbrowser-via-onion/10178/10?u=adw] thread&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../10279.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Suggestion: update-torbrowser shouldn&#39;t downgrade by default&#39;" href="../10279.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/suggestion-update-torbrowser-shouldnt-downgrade-by-default/10279/2" />
<meta name="twitter:url" content="https://forums.whonix.org/t/suggestion-update-torbrowser-shouldnt-downgrade-by-default/10279/2" />
<meta property="og:title" content="Suggestion: update-torbrowser shouldn&#39;t downgrade by default" />
<meta name="twitter:title" content="Suggestion: update-torbrowser shouldn&#39;t downgrade by default" />
<meta property="og:description" content="It’s hard to know which is the right version.   Version numbers are taken from this URL: https://www.torproject.org/projects/torbrowser/RecommendedTBBVersions/  And there is no strong authentication. TLS only. No onion version. No gpg signed version.   RecommendedTBBVersions format is not finalized.  It uses the lowest version number pointed out in RecommendedTBBVersions because other versions could be alpha or beta versions.  A messy situation worked around with this:    Download Confirmation N..." />
<meta name="twitter:description" content="It’s hard to know which is the right version.   Version numbers are taken from this URL: https://www.torproject.org/projects/torbrowser/RecommendedTBBVersions/  And there is no strong authentication. TLS only. No onion version. No gpg signed version.   RecommendedTBBVersions format is not finalized.  It uses the lowest version number pointed out in RecommendedTBBVersions because other versions could be alpha or beta versions.  A messy situation worked around with this:    Download Confirmation N..." />
<meta property="article:published_time" content="2020-09-15T09:51:01+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../10279.html">Suggestion: update-torbrowser shouldn&#39;t downgrade by default</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/adw'><span itemprop='name'>adw</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../10279.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-15T05:45:52Z' class='post-time'>
                September 15, 2020,  5:45am
              </time>
              <meta itemprop='dateModified' content='2020-09-15T05:45:52Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>For a long time, I’ve only ever used <code>update-torbrowser --onion --noask</code> to update Tor Browser in my <code>whonix-ws</code> template. As discussed in the [<a href="../../download-torbrowser-via-onion/10178/10.html" class="inline-onebox">download torbrowser via onion</a>] thread, I recently noticed that the onion address was unreachable, so my Tor Browser wasn’t being updated. So, I dropped the <code>--onion</code> option and ran <code>update-torbrowser --noask</code>. The result was that Tor Borwser was downgraded from 9.5.4 to 9.5.3. In other words, 9.5.4 was already installed, and <code>update-torbrowser</code> uninstalled it in order to install 9.5.3.</p>
<p>I’m a bit confused about why this happened. Since I always run the same command (except for <code>--onion</code>), then shouldn’t it always do the same thing? For example, if the default is to grab the lowest stable version, then since I never override the default, shouldn’t it always grab the lowest stable version? Maybe it actually is doing this, and The Tor Project bumped the lowest version up to 9.5.4, then bumped it back down to 9.5.3 for some reason? Or maybe the onion server (from when I was using <code>--onion</code>) had 9.5.4 as the lowest, while the clearnet server, for some reason, had 9.5.3 as the lowest?</p>
<p>In any case, my suggestion is that perhaps <code>update-torbrowser</code> should never downgrade Tor Browser versions by default. In other words, if the lowest stable version available from the server is lower than what we already have, do nothing.</p>
        </div>

        <meta itemprop='headline' content='Suggestion: update-torbrowser shouldn&#39;t downgrade by default'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../10279.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-15T09:51:01Z' class='post-time'>
                September 15, 2020,  9:51am
              </time>
              <meta itemprop='dateModified' content='2020-09-15T09:51:01Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>It’s hard to know which is the right version.</p>
<ul>
<li>Version numbers are taken from this URL: <a href="../../../../external.html?link=https://www.torproject.org/projects/torbrowser/RecommendedTBBVersions/">https://www.torproject.org/projects/torbrowser/RecommendedTBBVersions/</a>
<ul>
<li>And there is no strong authentication. TLS only. No onion version. No gpg signed version.</li>
</ul>
</li>
<li><a href="../../../../external.html?link=https://trac.torproject.org/projects/tor/ticket/14383">RecommendedTBBVersions format is not finalized.</a></li>
</ul>
<p>It uses the lowest version number pointed out in <code>RecommendedTBBVersions</code> because other versions could be alpha or beta versions.</p>
<p>A messy situation worked around with this:</p>
<ul>
<li><a href="../../../../external.html?link=https://www.whonix.org/wiki/Tor_Browser#Download_Confirmation_Notification"> Download Confirmation Notification</a></li>
<li><a href="../../../../external.html?link=https://www.whonix.org/wiki/Tor_Browser#Installation_Confirmation_Notification"> Installation Confirmation Notification</a></li>
</ul>
<p>…which are both manual interactive methods, not <code>--noask</code>.</p>
<p>And then there is also the <a href="../../../../external.html?link=https://gitlab.com/whonix/tb-updater/-/tree/master/usr/share/tb-updater">hardcoded version number(s)</a> for the <a href="../../../../external.html?link=https://www.whonix.org/wiki/Tor_Browser/Advanced_Users#tb-updater_in_Qubes_TemplateVM">tb-updater in Qubes TemplateVM</a> mechanism.</p>
<p>Thanks for your suggestion. Implementing downgrade protection when using <code>--noask</code> would be rather difficult.</p>
<p>I’ll change the man page from</p>
<blockquote>
<ul>
<li>
<p>–noask</p>
<p>Installs whatever <a href="../../../../external.html?link=https://www.torproject.org/projects/torbrowser/RecommendedTBBVersions">https://www.torproject.org/projects/torbrowser/RecommendedTBBVersions</a><br>
claims to be the latest version without user interaction.</p>
</li>
</ul>
</blockquote>
<p>to</p>
<blockquote>
<ul>
<li>
<p>–noask</p>
<p>Installs whatever <a href="../../../../external.html?link=https://www.torproject.org/projects/torbrowser/RecommendedTBBVersions">https://www.torproject.org/projects/torbrowser/RecommendedTBBVersions</a><br>
claims to be the lowest version without user interaction.</p>
</li>
</ul>
</blockquote>
<p>Long term my plan is rather to deprecate tb-updater since it has been causing significant development, support, maintenance effort and to rather use a solution similar to the one for electrum appimage by using package <code>binaries-freedom</code>.</p>
<aside class="quote" data-post="1" data-topic="6635">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar">
    <a href="../../policy-for-inclusion-of-compiled-software/6635.html">Policy for Inclusion of Compiled Software</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    What is the policy for including non-packaged programs by default, that are distributed as Appimages or Jar files? Can you please document your policy on this on the wiki? Is Tor Browser the only exception? 
Interesting software we might want to consider in this form is: 

Freenet
Cryptocat

Edit by Patrick: 

<a href="../../../../external.html?link=https://phabricator.whonix.org/T215" rel="nofollow noopener">electrum</a>
  </blockquote>
</aside>

        </div>

        <meta itemprop='headline' content='Suggestion: update-torbrowser shouldn&#39;t downgrade by default'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/adw'><span itemprop='name'>adw</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../10279.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-16T04:08:39Z' class='post-time'>
                September 16, 2020,  4:08am
              </time>
              <meta itemprop='dateModified' content='2020-09-16T04:08:39Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="2" data-topic="10279">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>It’s hard to know which is the right version.</p>
<ul>
<li>Version numbers are taken from this URL: <a href="../../../../external.html?link=https://www.torproject.org/projects/torbrowser/RecommendedTBBVersions/" rel="nofollow noopener">https://www.torproject.org/projects/torbrowser/RecommendedTBBVersions/</a>
<ul>
<li>And there is no strong authentication. TLS only. No onion version. No gpg signed version.</li>
</ul>
</li>
</ul>
</blockquote>
</aside>
<p>I had considered that, but I figured we would want to verify the signatures on the actual bundles themselves in order to determine trusted version numbers anyway, because if we trust the version numbers without authentication, it opens us up to various other attacks, as well. But I suppose downloading and verifying all of the bundles might be considered unfeasible.</p>
<aside class="quote no-group" data-username="Patrick" data-post="2" data-topic="10279">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>And then there is also the <a href="../../../../external.html?link=https://gitlab.com/whonix/tb-updater/-/tree/master/usr/share/tb-updater" rel="nofollow noopener">hardcoded version number(s)</a></p>
</blockquote>
</aside>
<p>Now I am confused why that didn’t prevent <code>update-torbrowser</code> from downgrading from 9.5.4 to 9.5.3. Maybe I hadn’t yet gotten the update in which the hardcoded version got bumped up to 9.5.4?</p>
<aside class="quote no-group" data-username="Patrick" data-post="2" data-topic="10279">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>for the <a href="../../../../external.html?link=https://www.whonix.org/wiki/Tor_Browser/Advanced_Users#tb-updater_in_Qubes_TemplateVM" rel="nofollow noopener">tb-updater in Qubes TemplateVM</a> mechanism.</p>
</blockquote>
</aside>
<p>Now I am even more confused. Reading that, it sounds like updating my <code>whonix-ws-15</code> template should be automatically updating Tor Browser such that fresh DisposableVMs based on <code>whonix-ws-15</code> already have updated Tor Browsers. But this does not happen, hence why I had to add <code>update-torbrowser --noask</code> in my own custom update script.</p>
        </div>

        <meta itemprop='headline' content='Suggestion: update-torbrowser shouldn&#39;t downgrade by default'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../10279.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-16T07:45:03Z' class='post-time'>
                September 16, 2020,  7:45am
              </time>
              <meta itemprop='dateModified' content='2020-09-16T07:45:03Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="adw" data-post="3" data-topic="10279">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/adw/40/686_2.png" class="avatar"> adw:</div>
<blockquote>
<p>I had considered that, but I figured we would want to verify the signatures on the actual bundles themselves</p>
</blockquote>
</aside>
<p>Bundle signatures are always verified. That authenticates the bundle but version number can’t be authenticated that way. Hence:</p>
<ul>
<li><a href="../../../../external.html?link=https://www.whonix.org/wiki/Tor_Browser#Download_Confirmation_Notification"> Download Confirmation Notification</a></li>
<li><a href="../../../../external.html?link=https://www.whonix.org/wiki/Tor_Browser#Installation_Confirmation_Notification"> Installation Confirmation Notification</a></li>
</ul>
<aside class="quote no-group" data-username="adw" data-post="3" data-topic="10279">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/adw/40/686_2.png" class="avatar"> adw:</div>
<blockquote>
<p>But I suppose downloading and verifying all of the bundles might be considered unfeasible.</p>
</blockquote>
</aside>
<p>Indeed. And even when downloading all bundles, there would still be no way to verify it’s version number. gpg signs files. Not file names. The get a trusted version number we’d have to extract the bundle and then look at some file mentioning the version number inside the extracted archive. Possible in theory but a lot code. At some point the workarounds at downstream (Whonix) are no longer reasonable due to upstream issues (no singed version numbers provided by Tor Project).</p>
<aside class="quote no-group" data-username="adw" data-post="3" data-topic="10279">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/adw/40/686_2.png" class="avatar"> adw:</div>
<blockquote>
<p>Now I am confused why that didn’t prevent <code>update-torbrowser</code> from downgrading from 9.5.4 to 9.5.3. Maybe I hadn’t yet gotten the update in which the hardcoded version got bumped up to 9.5.4?</p>
</blockquote>
</aside>
<p>Hardcoded version numbers are only used when update-torbrowser script is run from postinst script, i.e. during tb-updater package upgrade.</p>
<aside class="quote no-group" data-username="adw" data-post="3" data-topic="10279">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/adw/40/686_2.png" class="avatar"> adw:</div>
<blockquote>
<p>Reading that, it sounds like updating my <code>whonix-ws-15</code> template should be automatically updating Tor Browser such that fresh DisposableVMs based on <code>whonix-ws-15</code> already have updated Tor Browsers.</p>
</blockquote>
</aside>
<p>Yes.</p>
<aside class="quote no-group" data-username="adw" data-post="3" data-topic="10279">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/adw/40/686_2.png" class="avatar"> adw:</div>
<blockquote>
<p>But this does not happen</p>
</blockquote>
</aside>
<p>Check:</p>
<pre><code>cat /usr/share/tb-updater/tbb_hardcoded_version
</code></pre>
<p>It can fail due to network issues but you’d see this during upgrading. Would have failed if <code>tb_onion=true</code> was set in config folder.</p>
<p>Perhaps would be best to abolish <code>--noask</code>. <code>--noask</code> is not something I have in mind and it’s vulnerable to downgrade attacks. And <code>--noask</code>, automated download, without user oversight, without hardcoded version numbers can’t be made secure with reasonable effort since upstream doesn’t offer authenticated/expiring version metadata. Upstream ticket was created by me years ago.</p>
<p><a href="../../../../external.html?link=https://trac.torproject.org/projects/tor/ticket/13065">counter downgrade / stale mirror attacks on RecommendedTBBVersions - sign / verify tbb versions file </a></p>
<p>There is <code>GETINFO consensus/packages</code> but it’s empty, not populated with actual information yet.</p>
<p>Another option could be making <code>--noask</code> use hardcoded version number. That would be safe. But there is little point since after tb-updater package upgrade it should have cached that version in /var/cache/tb-binary folder already anyhow.</p>
        </div>

        <meta itemprop='headline' content='Suggestion: update-torbrowser shouldn&#39;t downgrade by default'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/adw'><span itemprop='name'>adw</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../10279.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-17T01:58:22Z' class='post-time'>
                September 17, 2020,  1:58am
              </time>
              <meta itemprop='dateModified' content='2020-09-17T01:58:22Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="4" data-topic="10279">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Check:</p>
<pre><code class="lang-auto">cat /usr/share/tb-updater/tbb_hardcoded_version
</code></pre>
</blockquote>
</aside>
<pre><code class="lang-auto">tbb_hardcoded_version="9.5.4"
</code></pre>
<aside class="quote no-group" data-username="Patrick" data-post="4" data-topic="10279">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Would have failed if <code>tb_onion=true</code> was set in config folder.</p>
</blockquote>
</aside>
<p>I can check this too, but I’m not sure where to look. I don’t recall modifying it myself.</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="4" data-topic="10279">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Perhaps would be best to abolish <code>--noask</code>. […]</p>
</blockquote>
</aside>
<p>I can understand that. My personal use case is simply that upgrading TB can take a long time, and I usually don’t remember to do it until I need it, at which point it’s too late. So, it’s much easier if I can just script the update to happen unattended, then I can check the logs afterward (which is how I noticed the downgrade).</p>
        </div>

        <meta itemprop='headline' content='Suggestion: update-torbrowser shouldn&#39;t downgrade by default'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
