<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>KVM Networking Broken</title>
    <link>http://forums.whonix.org/t/kvm-networking-broken/644</link>
    <description>I installed Whonix-Gateway on a new installation of KVM (on Debian wheezy) on which I already had created a Debian VM that was working without any problems. I&#39;m using the graphical manager with terminal sessions when necessary and this is my first time using KVM.

For the installation of the Whonix-Gateway VM I followed the instructions at: https://www.whonix.org/wiki/KVM#Importing_Whonix_VM_Templates

Now both VMs (the existing VM and the new Whonix-Gateway) fail to start and instead give the following error: 

```
Error starting domain: Requested operation is not valid: network &#39;default&#39; is not active

Traceback (most recent call last):
  File &quot;/usr/share/virt-manager/virtManager/asyncjob.py&quot;, line 45, in cb_wrapper
    callback(asyncjob, *args, **kwargs)
  File &quot;/usr/share/virt-manager/virtManager/asyncjob.py&quot;, line 66, in tmpcb
    callback(*args, **kwargs)
  File &quot;/usr/share/virt-manager/virtManager/domain.py&quot;, line 1114, in startup
    self._backend.create()
  File &quot;/usr/lib/python2.7/dist-packages/libvirt.py&quot;, line 866, in create
    if ret == -1: raise libvirtError (&#39;virDomainCreate() failed&#39;, dom=self)
libvirtError: Requested operation is not valid: network &#39;default&#39; is not active
```

Under preferences, virtual networks, there are two entries: &quot;default&quot; and &quot;Whonix.&quot; When I select &quot;Whonix&quot; its properties say, &quot;unknown data type.&quot;

Can anyone suggest a way to proceed?</description>
    <language>en</language>
    <lastBuildDate>Fri, 19 Dec 2014 18:36:09 +0000</lastBuildDate>
    <category>KVM</category>
    <atom:link href="http://forums.whonix.org/t/kvm-networking-broken/644.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Works. Done:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/KVM#Network_Start" target="_blank" title="01:04PM - 04 May 2020">Whonix – 4 May 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/218;"><img src="https://www.whonix.org/w/images/b/be/234234234236kvm.png" class="thumbnail" width="690" height="218"></div>

<h3><a href="https://www.whonix.org/wiki/KVM#Network_Start" target="_blank">Whonix ™ for KVM</a></h3>

<p>Using Whonix ™ with KVM (Kernel Virtual Machine)</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/21</link>
        <pubDate>Fri, 19 Dec 2014 18:36:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-21</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>virsh -c qemu:///system net-autostart default</p>
<p>virsh -c qemu:///system net-start default</p>
<p>Please try those and include them.</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/20</link>
        <pubDate>Fri, 19 Dec 2014 15:24:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-20</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Can you try to figure out the command line equivalent for this please? Would be easier for instructions (copy and paste along with the other commands) and also useful for the unit_test.</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/19</link>
        <pubDate>Fri, 19 Dec 2014 07:23:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-19</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>I found the note about it in Debian manual. Strange but seems to affect Debian for some reason:</p>
<blockquote>Fixing this is simple, open up virt-manager and go to "Edit" -&gt; "Host details" -&gt; "Virtual networks" tab. From there you may create a virtual network of your own or attempt to fix the default one. Usually the problem exists where the default network is not started.</blockquote>
<p><a href="https://wiki.debian.org/KVM#Troubleshooting" class="onebox" target="_blank">https://wiki.debian.org/KVM#Troubleshooting</a></p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/18</link>
        <pubDate>Thu, 18 Dec 2014 16:34:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-18</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="16" data-topic="644">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/d/e56c9b/40.png" class="avatar"> Dennis:</div>
<blockquote>
<p>The original “network” error was due to my unfamiliarity with how KVM operates (rtfm) and was resolved by activating the default network manually.</p>
</blockquote>
</aside>
<p>You didn’t know it. I was confused by it as well. So we need to document this so no one else bumps into this.</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/17</link>
        <pubDate>Thu, 18 Dec 2014 16:05:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-17</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[Dennis]]></dc:creator>
        <description><![CDATA[
            <p>Everything works fine when the hugepages option is taken out of the xml before import.</p>
<p>The original “network” error was due to my unfamiliarity with how KVM operates (rtfm) and was resolved by activating the default network manually.</p>
<p>Whonix on one KVM (not Virtualbox) on Debian. Never done nesting of hypervisors.</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/16</link>
        <pubDate>Thu, 18 Dec 2014 15:59:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-16</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>As per Dennis’s report it’s unrelated to nested virtualization. He didn’t mention nested virtualization. Just a Debian host.</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/15</link>
        <pubDate>Thu, 18 Dec 2014 15:44:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-15</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>I want to understand more the problem so I can simulate. Is it one that appears only when you do nested virtualization or are you saying that on a Debian host KVM fails out with that error - even when hugepages is removed?</p>
<p>When I ran into the hugepages problem I was getting virbr0 failed errors when in reality it had nothing to do with networking.</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/14</link>
        <pubDate>Thu, 18 Dec 2014 15:21:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-14</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Maybe right. Anyhow. It happened for Dennis as well and he wasn’t doing this inside VirtualBox. So this still is a grave usability issue for Debian users that needs documentation.</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/13</link>
        <pubDate>Thu, 18 Dec 2014 15:06:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-13</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Having two NAT’d networks running recursively will not work trust me. It would have worked if VirtualBox has bridging mode configured. If you run a VirtualBox inside a VirtualBox you will see.</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/12</link>
        <pubDate>Thu, 18 Dec 2014 14:49:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-12</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>I wanted to test Debian jessie compatibility. Just did run into this myself. Used a fully updated Debian jessie. (Inside a VirtualBox VM, but QEMU should still work, no?)</p>
<p><code>error: Failed to start domain Whonix-Gateway
error: Requested operation is not valid: network 'default' is not active</code></p>
<p>Log:</p>
<pre><code class="lang-auto">user@debian:~$ virsh -c qemu:///system destroy Whonix-Gateway
error: Failed to destroy domain Whonix-Gateway
error: Requested operation is not valid: domain is not running

user@debian:~$ virsh -c qemu:///system undefine Whonix-Gateway
Domain Whonix-Gateway has been undefined

user@debian:~$ virsh -c qemu:///system net-destroy Whonix
Network Whonix destroyed

user@debian:~$ virsh -c qemu:///system net-undefine Whonix
Network Whonix has been undefined

user@debian:~$ virsh -c qemu:///system define ~/Downloads/Whonix-Gateway_qemu.xml 
Domain Whonix-Gateway defined from /home/user/Downloads/Whonix-Gateway_qemu.xml

user@debian:~$ virsh -c qemu:///system net-define ~/Downloads/Whonix_network.xml 
Network Whonix defined from /home/user/Downloads/Whonix_network.xml

user@debian:~$ virsh -c qemu:///system net-autostart Whonix
Network Whonix marked as autostarted

user@debian:~$ virsh -c qemu:///system net-start Whonix
Network Whonix started

user@debian:~$ virsh -c qemu:///system start Whonix-Gateway
error: Failed to start domain Whonix-Gateway
error: Requested operation is not valid: network 'default' is not active

user@debian:~$ </code></pre>
<aside class="quote no-group" data-username="HulaHoop" data-post="2" data-topic="644">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>According to the error message the “default” NAT network that’s setup in KVM by default is switched off. Nothing to do with Whonix directly. Please switch it on, using the the virtual machine manager GUI and try again.</p>
</blockquote>
</aside>
<p>We need instructions for this in the wiki. Ideally command line instructions for easy copy and paste.</p>
<p>Added to Dev/KVM as blocker:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Dev/KVM#Debian_Network_NAT_Issue" target="_blank" title="01:47PM - 23 April 2020">Whonix – 23 Apr 20</a>
  </header>
  <article class="onebox-body">
    <img src="" class="thumbnail" width="" height="">

<h3><a href="https://www.whonix.org/wiki/Dev/KVM#Debian_Network_NAT_Issue" target="_blank">Dev/KVM - Whonix</a></h3>

<p>Development Notes for adding KVM support to Whonix ™.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/11</link>
        <pubDate>Thu, 18 Dec 2014 14:42:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-11</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Disabling rng isn’t ideal for security.</p>
<p>All related to:<br>
<a href="https://www.whonix.org/forum/index.php/topic,422.0.html" class="onebox" target="_blank">https://www.whonix.org/forum/index.php/topic,422.0.html</a></p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/10</link>
        <pubDate>Fri, 07 Nov 2014 14:35:45 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-10</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[Dennis]]></dc:creator>
        <description><![CDATA[
            <p>I got Whonix working and whonixcheck passes on both gateway and workstation. The only flaw I can see is that the panel (i.e., startmenu and task bar) is missing from the bottom of the screen, seemingly truncated, since I still see notifications but partly truncated. I added a panel at the top of the screen to work around this issue.</p>
<p>To get to this point I had to make the following changes to the xml files. Each change was done after starting the VM and getting an error, and then making a change to the xml files (usually as a result of information found on this forum or in the Whonix FAQs), and deleting and re-importing the VM.</p>
<ol>
<li>
<p>tags removed (along with the lines between each pair of tags):</p>
<p>memory backing</p>
<p>pm</p>
<p>rng</p>
</li>
<li>
<p>Removed the line about “file transfer enabled”</p>
</li>
<li>
<p>Changed the sound controller to AC97.</p>
</li>
</ol>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/9</link>
        <pubDate>Fri, 07 Nov 2014 14:28:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-9</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[Dennis]]></dc:creator>
        <description><![CDATA[
            <p>Hulahoop and Patrick,</p>
<p>Thanks for the tips!</p>
<p>I’ll try Hulahoop’s debugging method later today. I have now reinstalled everything on a 320GB HDD because I was wondering if the fact that I was previously working with an 80GB disk was to blame, since the image disks are defined as 100GB. The result is that I still get exactly the same error that “hugetlbfs filesystem is not mounted.”</p>
<p>By the way, I confirmed once again that the names of the image files in the xml do need to be changed to reflect the actual names of the image qcow2 files. If I use the xml files as supplied then the error when starting the vm is “Error starting domain: Cannot access storage file ‘/var/lib/libvirt/images/Whonix-Gateway.qcow2’ (as uid:113. gid119): No such file or directory”</p>
<p>EDIT: Also by the way, the host computer is confirmed as VT-x capable. It is a Dell Dimension E520, E6320 cpu, 4GB of RAM. It ran Whonix in Virtualbox, with the host OS as Debian wheezy, without an problem. And that was with the 80GB HDD.</p>
<p>EDIT: Also worth mentioning, on the file-naming issue: Instead of editing the xml files I also tried renaming the qcow2 files to reflect their names in the xml files. Doing that eliminated the “no such file” error, just as editing the xml files does, but I still  got the “hugetlbfs filesystem is not mounted” error.</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/8</link>
        <pubDate>Fri, 07 Nov 2014 09:57:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-8</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>But be careful, have backups. Speaking by experience, mixing up stable/testing can lead to difficult to resolve unrelated issues.</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/7</link>
        <pubDate>Thu, 06 Nov 2014 16:31:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-7</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>ok. Lets try something first:</p>
<p>remove the machines from KVM. Edit the xml for both gw and ws to remove the  tags and the hugepagetables setting between them. After that rein-import and tell me if it works</p>
<p>If that doesn’t solve it, try the KVM version from the testing repos.</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/6</link>
        <pubDate>Thu, 06 Nov 2014 16:21:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-6</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[Dennis]]></dc:creator>
        <description><![CDATA[
            <p>“The xml filename shouldn’t matter what does is the image name and filepath specified inside in the settings.”</p>
<p>That’s what I was talking about: the file name INSIDE the xml, not the name OF the xml file. It surely does matter, since it is indicating a file by name.</p>
<p>Unfortunately, as I said, changing it to the correct value doesn’t eliminate the error.</p>
<p>I have been using wheezy-backports, except one time when I forgot to (but I got the same errors on that occasion). The package versions are at or later than the versions in the Whonix KVM setup instructions, just like they say. These are the versions from the latest attempt:</p>
<p>libvirt-bin 1.2.4-1~bpo70+1.1<br>
qemu-kvm 2.1+dfsg-5~bpo70+1<br>
virt-manager 0.9.1-4</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/5</link>
        <pubDate>Wed, 05 Nov 2014 23:12:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-5</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <blockquote>I then took an image backup of the computer to be able to return to if I should happen to trash the setup.</blockquote>
<p>Good.</p>
<blockquote>I also noticed that the filenames of the qcow2 files in the xml files are incorrect. they are something like Whonix-gateway.qcow2 while the actual files are something like Whonix-Gateway-9.3 so I amended those entries. I hadn't been looking at the xml files because editing them is listed as an optional step.</blockquote>
<p>The xml filename shouldn’t matter what does is the image name and filepath specified inside in the settings.</p>
<p>The error message you report is very similar to something another user reported a week ago. I suspect its a bug in the package. Can you please install the KVM version in wheezy-backports and report back if it works?</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/4</link>
        <pubDate>Wed, 05 Nov 2014 15:01:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-4</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[Dennis]]></dc:creator>
        <description><![CDATA[
            <p>Hi HulaHoop,</p>
<p>yes, I worked that out eventually and I did indeed got past that error by turning default on at the command line.</p>
<p>However, now I have a new error as well as an old one:</p>
<p>I totally reinstalled Debian wheezy, to have a known starting point. I then installed KVM using the exact steps listed at <a href="https://www.whonix.org/wiki/KVM" rel="nofollow noopener">https://www.whonix.org/wiki/KVM</a> including checking the versions of the installed KVM packages.</p>
<p>I then took an image backup of the computer to be able to return to if I should happen to trash the setup.</p>
<p>I also noticed that the filenames of the qcow2 files in the xml files are incorrect. they are something like Whonix-gateway.qcow2 while the actual files are something like Whonix-Gateway-9.3 so I amended those entries. I hadn’t been looking at the xml files because editing them is listed as an optional step.</p>
<p>I then went through the import steps (after turning on default) and, when I ran the gateway vm from virt-manager, I received the following error:</p>
<hr>
<p>Error starting domain: internal error hugetlbfs filesystem is not mounted</p>
<p>Traceback (most recent call last):<br>
File “/usr/share/virt-manager/virtManager/asyncjob.py”, line 45, in cb_wrapper<br>
callback(asyncjob, *args, **kwargs)<br>
File “/usr/share/virt-manager/virtManager/asyncjob.py”, line 66, in tmpcb<br>
callback(*args, **kwargs)<br>
File “/usr/share/virt-manager/virtManager/domain.py”, line 1114, in startup<br>
self._backend.create()<br>
File “/usr/lib/python2.7/dist-packages/libvirt.py”, line 620, in create<br>
if ret == -1: raise libvirtError (‘virDomainCreate() failed’, dom=self)<br>
libvirtError: internal error hugetlbfs filesystem is not mounted</p>
<hr>
<p>I note also that, in virt-manager, the virtual network “Whonix” has on its properties pane: “Error selecting network: Unsupported data type: &lt;type ‘NoneType’&gt;” which is the same error as previously mentioned (but after I have restored this computer from the image backup).</p>
<p>By the way, the way I have been putting the files in the Images directory is by copying the xz files into that directory and then running tar -xvf on them there. That should preserve their sparseness. Of course, I also adjusted the paths appropriately in the import commands. I had no errors when running those import commands.</p>
<p>I would appreciate any input on this!</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/3</link>
        <pubDate>Wed, 05 Nov 2014 12:14:45 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-3</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>According to the error message the “default” NAT network that’s setup in KVM by default is switched off. Nothing to do with Whonix directly. Please switch it on, using the the virtual machine manager GUI and try again.</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/2</link>
        <pubDate>Mon, 03 Nov 2014 18:23:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-2</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
      <item>
        <title>KVM Networking Broken</title>
        <dc:creator><![CDATA[Dennis]]></dc:creator>
        <description><![CDATA[
            <p>I installed Whonix-Gateway on a new installation of KVM (on Debian wheezy) on which I already had created a Debian VM that was working without any problems. I’m using the graphical manager with terminal sessions when necessary and this is my first time using KVM.</p>
<p>For the installation of the Whonix-Gateway VM I followed the instructions at: <a href="https://www.whonix.org/wiki/KVM#Importing_Whonix_VM_Templates" rel="nofollow noopener">https://www.whonix.org/wiki/KVM#Importing_Whonix_VM_Templates</a></p>
<p>Now both VMs (the existing VM and the new Whonix-Gateway) fail to start and instead give the following error:</p>
<pre><code class="lang-auto">Error starting domain: Requested operation is not valid: network 'default' is not active

Traceback (most recent call last):
  File "/usr/share/virt-manager/virtManager/asyncjob.py", line 45, in cb_wrapper
    callback(asyncjob, *args, **kwargs)
  File "/usr/share/virt-manager/virtManager/asyncjob.py", line 66, in tmpcb
    callback(*args, **kwargs)
  File "/usr/share/virt-manager/virtManager/domain.py", line 1114, in startup
    self._backend.create()
  File "/usr/lib/python2.7/dist-packages/libvirt.py", line 866, in create
    if ret == -1: raise libvirtError ('virDomainCreate() failed', dom=self)
libvirtError: Requested operation is not valid: network 'default' is not active
</code></pre>
<p>Under preferences, virtual networks, there are two entries: “default” and “Whonix.” When I select “Whonix” its properties say, “unknown data type.”</p>
<p>Can anyone suggest a way to proceed?</p>
          <p><a href="http://forums.whonix.org/t/kvm-networking-broken/644/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kvm-networking-broken/644/1</link>
        <pubDate>Mon, 03 Nov 2014 12:47:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-644-1</guid>
        <source url="http://forums.whonix.org/t/kvm-networking-broken/644.rss">KVM Networking Broken</source>
      </item>
  </channel>
</rss>
