<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Whonix Desktop Installer with Calamares - field report - #4 by Patrick - Development - Whonix Forum</title>
    <meta name="description" content="So after a few days playing with Calamares and my ‚ÄúWhonix Desktop‚Äù VM and ISO files, I thought it would be time to report back my experience. 
See also 


For the discussion related to the Whonix Host/Desktop project. 
I&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../7350.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Whonix Desktop Installer with Calamares - field report&#39;" href="../7350.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5564981a244c37b36b7c1610924d97da327c5b88.png" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5564981a244c37b36b7c1610924d97da327c5b88.png" />
<meta property="og:url" content="https://forums.whonix.org/t/whonix-desktop-installer-with-calamares-field-report/7350/4" />
<meta name="twitter:url" content="https://forums.whonix.org/t/whonix-desktop-installer-with-calamares-field-report/7350/4" />
<meta property="og:title" content="Whonix Desktop Installer with Calamares - field report" />
<meta name="twitter:title" content="Whonix Desktop Installer with Calamares - field report" />
<meta property="og:description" content="I would not  know. I was only addressing this:   Certainly good to avoid the extra complexity of interacting with another build system we don‚Äôt need it.   You mean https://github.com/onions-knight/whonix-stuff/blob/master/ok/whonix-iso-maker.sh?  I am eager to have that build step 2550_create_iso to create a bootable iso added to Whonix source code ASP. üôÇ  Then I‚Äôd implement --target iso which would run the build process as usual.  [And I would add skipping build-steps that don‚Äôt a..." />
<meta name="twitter:description" content="I would not  know. I was only addressing this:   Certainly good to avoid the extra complexity of interacting with another build system we don‚Äôt need it.   You mean https://github.com/onions-knight/whonix-stuff/blob/master/ok/whonix-iso-maker.sh?  I am eager to have that build step 2550_create_iso to create a bootable iso added to Whonix source code ASP. üôÇ  Then I‚Äôd implement --target iso which would run the build process as usual.  [And I would add skipping build-steps that don‚Äôt a..." />
<meta property="article:published_time" content="2019-05-10T01:30:24+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="next" href="../73504658.html?page=2">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../7350.html">Whonix Desktop Installer with Calamares - field report</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">

            <link itemprop="image" href="../../../uploads/default/original/2X/5/5564981a244c37b36b7c1610924d97da327c5b88.png">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-09T15:18:05Z' class='post-time'>
                May 9, 2019,  3:18pm
              </time>
              <meta itemprop='dateModified' content='2019-09-18T08:27:45Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>So after a few days playing with <code>Calamares</code> and my ‚ÄúWhonix Desktop‚Äù VM and ISO files, I thought it would be time to report back my experience.</p>
<p>See also</p>
<aside class="quote quote-modified" data-post="1" data-topic="3931">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/a183cd/40.png" class="avatar">
    <a href="../../whonix-host-operating-system/3931.html">Whonix host operating system</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    There is already some discussion ongoing in the Whonix-Live mode thread but I guess a dedicated thread is more suitable. 
What would you consider important for an (official) Whonix host OS? 
Which OS should be used? 
Similar to <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/hexagon">@Hexagon</a> I would also suggest something debian based. Linux Mint is said to be the most user friendly for linux newbies but as far as I know the security track is not good. 
However, Debian is usually not that up to date so it might not run on the latest and greatest hard‚Ä¶
  </blockquote>
</aside>

<p>For the discussion related to the Whonix Host/Desktop project.</p>
<p><strong>In short, the results are quite encouraging.</strong></p>
<p>What I did:</p>
<ul>
<li>I built a hardened debian 15 VM on debian buster (‚ÄúWhonix-Desktop VM‚Äù;</li>
<li>I run a few custom chroot bash scripts to customize the Whonix-Desktop VM, installed <code>virt-manager</code>,<code>lib-virt</code>, etc, copied the Gateway and Workstation VMs, installed non-free firmware and created an ISO file out of it (see link above for complete description)</li>
<li>On top of that I installed the <code>Calamares</code> installer to try it out (in buster repos)</li>
</ul>
<p><strong>After a few tests I have now a working ISO file that correctly installs the ‚ÄúWhonix-Desktop‚Äù on an external drive (also with encryption!) which is bootable and running, at least on qemu/kvm (didn‚Äôt have the opportunity to test it on real hardware yet).</strong></p>
<p>So it‚Äôs pretty amazing I would say, <strong>but there are still a few shortcomings that need to be addressed.</strong></p>
<p>Here are the few things I learnt while experiencing with <code>Calamares</code>:</p>
<ul>
<li>
<p>I did  not have time to try a UEFI install on a GPT disk, only BIOS on MBR</p>
</li>
<li>
<p>I found the documentation related to calamares quite sparse, but maybe because it is self explanatory to developers (the syntax is very clear)</p>
</li>
<li>
<p>On Debian Buster, the default  <code>calamares</code> package does not provide configuration files for <code>modules</code> which must be written by hand, following examples that can be found on <a href="../../../../external.html?link=https://github.com/calamares" rel="nofollow noopener">github</a></p>
</li>
<li>
<p>Installing the <code>calamares-settings-debian</code> package provides all configuration files used by the debian-live team for their new Buster live images with Calamares installer (<a href="../../../../external.html?link=https://jonathancarter.org/2019/04/13/help-test-debian-live/" rel="nofollow noopener">link</a>)</p>
</li>
<li>
<p>Only after installing <code>calamares-settings-debian</code> was I able to have a completely bootable system, so I think it would be a good idea to depart from their experience and configuration files and modify them to our needs (for instance to change the branding)</p>
</li>
<li>
<p>The way I understand it, the default installing sequence provided by <code>calamares-settings-debian</code> merely copies the content of the <code>filesystem.squashfs</code> file into the target and then executes the needed operations (creating new user, configuring fstab, bootloader, etc.), but does not install packages (it does remove the live-boot related packages though). A side-note: it also needs the <code>rsync</code> package otherwise the installer will fail.</p>
</li>
<li>
<p>The advantage of this is obvious, as the system is created in a matter of minutes (no need to redownload and recreates everything).</p>
</li>
<li>
<p>The problem is that it also copies the already existing ‚Äòuser‚Äô and his home directory, and maybe other stuff that we don‚Äôt need, very unclean</p>
</li>
<li>
<p>Debian-live installer does not have this problem as its live-user is created at boot-time (its <code>filesystem.squashfs</code> file does not contain anything under its <code>/home</code> directory)</p>
</li>
<li>
<p>It is my understanding that they achieve this behavior by building their iso using the <code>live-build</code> tools which are capable of creating complete debian live-systems and have options that enable to run a lot of stuff at boot-time only (and thus these specific configurations are not copied into the target by the installer)</p>
</li>
<li>
<p>Not sure if we can use <code>live-build</code> to create a hardened Whonix ISO from scratch without having to entirely rewrite the VM build process. Lot of work.</p>
</li>
<li>
<p>I did find a workaround by installing the <code>live-config</code> package, which enables to append parameters at boot time (or apply them by default) that can reprouce the behavior of debian live-systems. I think it works by reading script files in <code>/lib/live/config</code> which are basically a series of test (such as if no user, then launch the live system with default debian user, etc.)</p>
</li>
<li>
<p>The workaround I used was ‚Äúsimply‚Äù to copy the user .config files into <code>/etc/skel</code> on the Whonix-Desktop vm and then <code>userdel user</code>. Now the ISO automatically launches an X session with a user <code>user</code> (full name: <code>Debian Live User</code>) that it creates at boot time (note: I also had to suppress the vboxsf group as it 1000 GUID somehow seemed to conflict with the live-config scripts, preventing them to create the live-user)</p>
</li>
<li>
<p>The encryption does not seem to use LVM (is it a problem?)</p>
</li>
</ul>
<p>While it‚Äôs quite encouraging and definitely a proof of work, it is still quite experimental, and a lot of configuration work remains to be done, such as:</p>
<ul>
<li>Better understand the calamares installer sequence (taking the calamares-settings-debian as a base) in order to configure it exactly to our needs</li>
<li>Make sure we don‚Äôt copy anything unwanted into the target, make sure the new user‚Äôs environment on the install target behaves exactly as it is supposed to (also correct groups, etc.)</li>
<li>Fine-tune the overall ISO environment so it behaves exactly as we need (does the live-user needs sudo rights? Are the settings specific to the hardened debian version environment also applied in live-mode?)</li>
</ul>
<p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a> et al. what do you think of this? Are you still interested in pursuing this matter further? If yes, what would be the next steps, how could I help further?</p>
<p>Below some screenshots taken from the Whonix-Host Hardened Debian ISO installing itself on an external virtual hard drive (all done in qemu/kvm):</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/2X/5/5564981a244c37b36b7c1610924d97da327c5b88.png" data-download-href="//forums.whonix.org/uploads/default/5564981a244c37b36b7c1610924d97da327c5b88" title="Screenshot from 2019-05-09 16-56-16.png"><img src="../../../uploads/default/original/2X/5/5564981a244c37b36b7c1610924d97da327c5b88.png" alt="Screenshot%20from%202019-05-09%2016-56-16" data-base62-sha1="cbq6D98dbavOiuTccQoMr0VnoiQ" width="630" height="500" data-small-upload="../../../uploads/default/optimized/2X/5/5564981a244c37b36b7c1610924d97da327c5b88_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot from 2019-05-09 16-56-16.png</span><span class="informations">678√ó538 2.63 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div><br>
<em>boot screen with isolinux (BIOS mode)</em></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/2X/a/a35835fd9dd1d18743a3953833d599c5354d71b0.png" data-download-href="//forums.whonix.org/uploads/default/a35835fd9dd1d18743a3953833d599c5354d71b0" title="Screenshot from 2019-05-09 17-01-22.png"><img src="../../../uploads/default/optimized/2X/a/a35835fd9dd1d18743a3953833d599c5354d71b0_2_690x426.png" alt="Screenshot%20from%202019-05-09%2017-01-22" data-base62-sha1="nj0OKXkmDgMXFWJaaUhFDHiqtJC" width="690" height="426" srcset="//forums.whonix.org/uploads/default/optimized/2X/a/a35835fd9dd1d18743a3953833d599c5354d71b0_2_690x426.png, //forums.whonix.org/uploads/default/optimized/2X/a/a35835fd9dd1d18743a3953833d599c5354d71b0_2_1035x639.png 1.5x, //forums.whonix.org/uploads/default/optimized/2X/a/a35835fd9dd1d18743a3953833d599c5354d71b0_2_1380x852.png 2x" data-small-upload="../../../uploads/default/optimized/2X/a/a35835fd9dd1d18743a3953833d599c5354d71b0_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot from 2019-05-09 17-01-22.png</span><span class="informations">1593√ó984 96.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div><br>
<em>Calamares installer (default debian 10 branding, I did not try to change anything yet)</em></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/2X/1/10afc9228e3a5964e6b27747b1e15fc29f87fc2f.png" data-download-href="//forums.whonix.org/uploads/default/10afc9228e3a5964e6b27747b1e15fc29f87fc2f" title="Screenshot from 2019-05-09 17-01-51.png"><img src="../../../uploads/default/optimized/2X/1/10afc9228e3a5964e6b27747b1e15fc29f87fc2f_2_690x425.png" alt="Screenshot%20from%202019-05-09%2017-01-51" data-base62-sha1="2nCg27IvQYgW7ZpxfwvxMzViffN" width="690" height="425" srcset="//forums.whonix.org/uploads/default/optimized/2X/1/10afc9228e3a5964e6b27747b1e15fc29f87fc2f_2_690x425.png, //forums.whonix.org/uploads/default/optimized/2X/1/10afc9228e3a5964e6b27747b1e15fc29f87fc2f_2_1035x637.png 1.5x, //forums.whonix.org/uploads/default/optimized/2X/1/10afc9228e3a5964e6b27747b1e15fc29f87fc2f_2_1380x850.png 2x" data-small-upload="../../../uploads/default/optimized/2X/1/10afc9228e3a5964e6b27747b1e15fc29f87fc2f_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot from 2019-05-09 17-01-51.png</span><span class="informations">1598√ó986 103 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/2X/2/2f757177de56966d476bd565a0250c4606fe1122.png" data-download-href="//forums.whonix.org/uploads/default/2f757177de56966d476bd565a0250c4606fe1122" title="Screenshot from 2019-05-09 17-02-27.png"><img src="../../../uploads/default/optimized/2X/2/2f757177de56966d476bd565a0250c4606fe1122_2_690x424.png" alt="Screenshot%20from%202019-05-09%2017-02-27" data-base62-sha1="6LQ3QDWsymBO3HWMXyFQ07yv6rU" width="690" height="424" srcset="//forums.whonix.org/uploads/default/optimized/2X/2/2f757177de56966d476bd565a0250c4606fe1122_2_690x424.png, //forums.whonix.org/uploads/default/optimized/2X/2/2f757177de56966d476bd565a0250c4606fe1122_2_1035x636.png 1.5x, //forums.whonix.org/uploads/default/optimized/2X/2/2f757177de56966d476bd565a0250c4606fe1122_2_1380x848.png 2x" data-small-upload="../../../uploads/default/optimized/2X/2/2f757177de56966d476bd565a0250c4606fe1122_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot from 2019-05-09 17-02-27.png</span><span class="informations">1597√ó983 105 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/2X/9/9c7b8873a7a24f8ad3ae86f1ebab5ea708db80bc.png" data-download-href="//forums.whonix.org/uploads/default/9c7b8873a7a24f8ad3ae86f1ebab5ea708db80bc" title="Screenshot from 2019-05-09 17-03-05.png"><img src="../../../uploads/default/optimized/2X/9/9c7b8873a7a24f8ad3ae86f1ebab5ea708db80bc_2_690x426.png" alt="Screenshot%20from%202019-05-09%2017-03-05" data-base62-sha1="mkj9wDW4LZ815rggEaDunAnTi20" width="690" height="426" srcset="//forums.whonix.org/uploads/default/optimized/2X/9/9c7b8873a7a24f8ad3ae86f1ebab5ea708db80bc_2_690x426.png, //forums.whonix.org/uploads/default/optimized/2X/9/9c7b8873a7a24f8ad3ae86f1ebab5ea708db80bc_2_1035x639.png 1.5x, //forums.whonix.org/uploads/default/optimized/2X/9/9c7b8873a7a24f8ad3ae86f1ebab5ea708db80bc_2_1380x852.png 2x" data-small-upload="../../../uploads/default/optimized/2X/9/9c7b8873a7a24f8ad3ae86f1ebab5ea708db80bc_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot from 2019-05-09 17-03-05.png</span><span class="informations">1599√ó988 87.2 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/2X/8/8790a2bc0c8171e543b7ac3031b2770536073165.png" data-download-href="//forums.whonix.org/uploads/default/8790a2bc0c8171e543b7ac3031b2770536073165" title="Screenshot_2019-05-09_17-09-01.png"><img src="../../../uploads/default/optimized/2X/8/8790a2bc0c8171e543b7ac3031b2770536073165_2_690x425.png" alt="Screenshot_2019-05-09_17-09-01" data-base62-sha1="jlgl1ekdXebJed3XYDebKSQnaip" width="690" height="425" srcset="//forums.whonix.org/uploads/default/optimized/2X/8/8790a2bc0c8171e543b7ac3031b2770536073165_2_690x425.png, //forums.whonix.org/uploads/default/optimized/2X/8/8790a2bc0c8171e543b7ac3031b2770536073165_2_1035x637.png 1.5x, //forums.whonix.org/uploads/default/optimized/2X/8/8790a2bc0c8171e543b7ac3031b2770536073165_2_1380x850.png 2x" data-small-upload="../../../uploads/default/optimized/2X/8/8790a2bc0c8171e543b7ac3031b2770536073165_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot_2019-05-09_17-09-01.png</span><span class="informations">1594√ó984 76.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/2X/4/47663314110175dacb890982347473947cd2bab3.png" data-download-href="//forums.whonix.org/uploads/default/47663314110175dacb890982347473947cd2bab3" title="Screenshot_2019-05-09_17-11-18.png"><img src="../../../uploads/default/original/2X/4/47663314110175dacb890982347473947cd2bab3.png" alt="Screenshot_2019-05-09_17-11-18" data-base62-sha1="abCRr2L9rs3DqVuJxsdQBWXL3mr" width="690" height="304" data-small-upload="../../../uploads/default/optimized/2X/4/47663314110175dacb890982347473947cd2bab3_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot_2019-05-09_17-11-18.png</span><span class="informations">870√ó384 2.22 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div><br>
<em>rebooting into the installed system</em></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/2X/9/969a02f46db049e5e0411dedded227a98b0328ae.png" data-download-href="//forums.whonix.org/uploads/default/969a02f46db049e5e0411dedded227a98b0328ae" title="Screenshot_2019-05-09_17-15-19.png"><img src="../../../uploads/default/optimized/2X/9/969a02f46db049e5e0411dedded227a98b0328ae_2_690x426.png" alt="Screenshot_2019-05-09_17-15-19" data-base62-sha1="luhAvfuBhqWPyaDRBEOcjJdhzjw" width="690" height="426" srcset="//forums.whonix.org/uploads/default/optimized/2X/9/969a02f46db049e5e0411dedded227a98b0328ae_2_690x426.png, //forums.whonix.org/uploads/default/optimized/2X/9/969a02f46db049e5e0411dedded227a98b0328ae_2_1035x639.png 1.5x, //forums.whonix.org/uploads/default/optimized/2X/9/969a02f46db049e5e0411dedded227a98b0328ae_2_1380x852.png 2x" data-small-upload="../../../uploads/default/optimized/2X/9/969a02f46db049e5e0411dedded227a98b0328ae_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot_2019-05-09_17-15-19.png</span><span class="informations">1590√ó983 169 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div><br>
<em>The newly created user does not belong to the libvirt-qemu and kvm groups, there is an option to configure that in <code>/etc/calamares/modules/users.conf</code> I don‚Äôt remember if I modified this file accordingly or not‚Ä¶ In any case, it is one of the settings that must be addressed</em></p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="3" />
           <span class='post-likes'>3 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../whonix-host-operating-system/3931/57.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../whonix-host-operating-system/3931/57.html'>
                      <span itemprop='name'>Whonix host operating system</span>
                    </a>
                    <meta itemprop='position' content='12'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../whonix-15-has-been-released/7616.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../whonix-15-has-been-released/7616.html'>
                      <span itemprop='name'>Whonix 15 has been Released</span>
                    </a>
                    <meta itemprop='position' content='13'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../hiding-tor-is-difficult-beyond-practicality/7408/14.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../hiding-tor-is-difficult-beyond-practicality/7408/14.html'>
                      <span itemprop='name'>Hiding Tor is difficult beyond practicality?</span>
                    </a>
                    <meta itemprop='position' content='14'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../hiding-tor-is-difficult-beyond-practicality/7408/17.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../hiding-tor-is-difficult-beyond-practicality/7408/17.html'>
                      <span itemprop='name'>Hiding Tor is difficult beyond practicality?</span>
                    </a>
                    <meta itemprop='position' content='15'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../bug-not-all-files-form-etc-skel-are-copied-to-home-user/6778/4.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../bug-not-all-files-form-etc-skel-are-copied-to-home-user/6778/4.html'>
                      <span itemprop='name'>bug: not all files form /etc/skel are copied to /home/user</span>
                    </a>
                    <meta itemprop='position' content='16'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../hardened-malloc-package-build-failed-unpacking-llvm-7-dev-1-7-0-1-8-e-sub-process-usr-bin-dpkg-exited-unexpectedly/7950.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../hardened-malloc-package-build-failed-unpacking-llvm-7-dev-1-7-0-1-8-e-sub-process-usr-bin-dpkg-exited-unexpectedly/7950.html'>
                      <span itemprop='name'>hardened-malloc package build failed - Unpacking llvm-7-dev (1:7.0.1-8) ... - E: Sub-process /usr/bin/dpkg exited unexpectedly</span>
                    </a>
                    <meta itemprop='position' content='17'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-09T15:49:20Z' class='post-time'>
                May 9, 2019,  3:49pm
              </time>
              <meta itemprop='dateModified' content='2019-05-09T15:49:20Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>For Whonix host builds‚Ä¶ Can we replace/skip [yes we can skip] <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/1300_create-raw-image" rel="nofollow noopener">https://github.com/Whonix/Whonix/blob/master/build-steps.d/1300_create-raw-image</a> and run live-build instead? Rather than 1300_create-raw-image we‚Äôd have another build step that runs instead. Don‚Äôt worry about the build steps, I can sort that out.</p>
<p>My question is, is it possible to mount an iso image similar to it being possible mounting a raw image for read/write? Once a bootable (raw, iso, anything) ‚Äúbase‚Äù (just Debian) image exists, it is easy for the other Whonix build steps to take over. [which can then install a Whonix meta package]</p>
<p>Or has an iso to be created in on run? I.e. to we have to leave it all to live-boot and once the iso is finalized we cannot mount it, chroot it, modify it, unchroot it, unmount it, deploy it?</p>
<p>More answers to come later.</p>
<aside class="quote no-group" data-post="1" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>what do you think of this?</p>
</blockquote>
</aside>
<p>Looks amazing!</p>
<aside class="quote no-group" data-post="1" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Are you still interested in pursuing this matter further?</p>
</blockquote>
</aside>
<p>For sure!</p>
<aside class="quote no-group" data-post="1" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>The encryption does not seem to use LVM (is it a problem?)</p>
</blockquote>
</aside>
<p>Certainly not a blocker. I find without LVM even easier to grasp and recover from boot medium.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-09T18:58:43Z' class='post-time'>
                May 9, 2019,  6:58pm
              </time>
              <meta itemprop='dateModified' content='2019-05-09T18:58:43Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-post="2" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<p>Are you still interested in pursuing this matter further?</p>
</blockquote>
<p>For sure!</p>
</blockquote>
</aside>
<p>Great!<br>
I really think that we are close to be production ready, we have an actual proof of work, we ‚Äúonly‚Äù need to make sure everything works well and of course integrate everything in the host build process in a clean and professional way (I did everything by hand with dirty bash chroot scripts or directly on the cli).</p>
<aside class="quote no-group" data-post="2" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>For Whonix host builds‚Ä¶ Can we replace/skip [yes we can skip] <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/1300_create-raw-image" rel="nofollow noopener">https://github.com/Whonix/Whonix/blob/master/build-steps.d/1300_create-raw-image </a> and run live-build instead? Rather than 1300_create-raw-image we‚Äôd have another build step that runs instead. Don‚Äôt worry about the build steps, I can sort that out.</p>
<p>My question is, is it possible to mount an iso image similar to it being possible mounting a raw image for read/write? Once a bootable (raw, iso, anything) ‚Äúbase‚Äù (just Debian) image exists, it is easy for the other Whonix build steps to take over. [which can then install a Whonix meta package]</p>
<p>Or has an iso to be created in on run? I.e. to we have to leave it all to live-boot and once the iso is finalized we cannot mount it, chroot it, modify it, unchroot it, unmount it, deploy it?</p>
</blockquote>
</aside>
<p>I think it shouldn‚Äôt be a problem at all. <code>live-build</code> can be run integrally (<code>lb build)</code> or can be broken down into different steps that can be run separately, all of them completely customizable. It also allows for the creation of disk images. The ISO creation comes last in the build process. As quoted from <code>man live-build</code>:</p>
<pre><code>LIVE-BUILD COMMANDS
       We divide live-build into high level  ("porcelain")  commands  and  low
       level ("plumbing") commands.

       Here  is  the  complete  list of all available live-build commands. See
       their man pages for additional documentation.

HIGH-LEVEL COMMANDS (PORCELAIN)
       We separate the porcelain commands into  the  main  commands  and  some
       ancillary user utilities.

   Main porcelain commands
       lb config(1)
           creates configuration for live-build

       lb bootstrap(1)
           executes  the  first  build  stage, creating (bootstraping) a basic
           Debian root filesystem

       lb chroot(1)
           executes the second build stage, building the live OS filesystem

       lb installer(1)
           executes the third  build  stage,  obtaining  installer  components
           (optional)

       lb binary(1)
           executes the fourth build stage, generating a binary image

       lb source(1)
           executes   the   fifth  build  stage,  generating  a  source  image
           (optional)

       lb clean(1)
           cleans up system build directories
</code></pre>
<p>Documentation is quite good and abundant, see for example</p>
<p><a href="../../../../external.html?link=https://live-team.pages.debian.net/live-manual/html/live-manual/about-manual.en.html" class="onebox" target="_blank" rel="nofollow noopener">https://live-team.pages.debian.net/live-manual/html/live-manual/about-manual.en.html</a></p>
<p>But the question is <strong>do we need <code>live-build</code></strong>? What for? In your opinion, <strong>what specific needs would cover <code>live-build</code> tools that we don‚Äôt currently cover with the current Whonix Host build-steps?</strong></p>
<p>We already have a bootable raw image, that can be converted into a bootable BIOS/UEFI (‚Äúburnable‚Äù) ISO file with <code>mksquashfs</code> and <code>xorriso</code> commands (see my script above). What would be the purpose of live-build?</p>
<p>In my experience, the only real problem I was faced with was avoiding the copy of the existing user and his home directory into the target during the install part with Calamares. My solution was simply to suppress the <code>user</code> and his directory and let the <code>live-config</code> tools take care of the rest, which automatically creates a live-user. Quite basic, but functional.</p>
<p>If it‚Äôs not acceptable, maybe we can simply avoid creating the user during the Hardened Debian VM build? Or maybe we could play with the <code>live-config</code> scripts so they would ignore the existing user and his home directory and login with the live-user at boot time (just thinking out loud, I don‚Äôt know if it‚Äôs possible)? Or maybe even easier to somehow configure the Calamares installer so it would ignore the existing user and its home directory during the <code>unpack</code> step of the install process?</p>
<p>This being said, there might be a ton of things that I am missing. Such as making sure that the live system AND the installed system do honor the various hardening settings that are the main purpose of the ‚Äúhardened‚Äù Whonix version. Also making sure that we don‚Äôt copy useless stuff into the target (I am thinking about logs, files owned by the initial user, etc.).</p>
<p>I could easily verify that with my current build, if you or anyone knowledgeable enough would provide me with a check-list of the hardened settings that we expect to be working (apparmor stuff, etc.). I must say that I didn‚Äôt take the time to real dig into what makes the hardened version special compared to a stock debian version.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-10T01:30:24Z' class='post-time'>
                May 10, 2019,  1:30am
              </time>
              <meta itemprop='dateModified' content='2019-05-10T01:30:24Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="3" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>But the question is <strong>do we need <code>live-build</code></strong> ? What for? In your opinion, <strong>what specific needs would cover <code>live-build</code> tools that we don‚Äôt currently cover with the current Whonix Host build-steps?</strong></p>
</blockquote>
</aside>
<p>I would not  know. I was only addressing this:</p>
<aside class="quote no-group" data-post="1" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Not sure if we can use <code>live-build</code> to create a hardened Whonix ISO from scratch without having to entirely rewrite the VM build process. Lot of work.</p>
</blockquote>
</aside>
<p>Certainly good to avoid the extra complexity of interacting with another build system we don‚Äôt need it.</p>
<aside class="quote no-group" data-post="3" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>We already have a bootable raw image, that can be converted into a bootable BIOS/UEFI (‚Äúburnable‚Äù) ISO file with <code>mksquashfs</code> and <code>xorriso</code> commands (see my script above).</p>
</blockquote>
</aside>
<p>You mean <a href="../../../../external.html?link=https://github.com/onions-knight/whonix-stuff/blob/master/ok/whonix-iso-maker.sh" rel="nofollow noopener">https://github.com/onions-knight/whonix-stuff/blob/master/ok/whonix-iso-maker.sh</a>?</p>
<p>I am eager to have that build step <code>2550_create_iso</code> to create a bootable iso added to Whonix source code ASP. <img src="../../../images/emoji/twitter/slight_smilec164.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Then I‚Äôd implement <code>--target iso</code> which would run the build process as usual.</p>
<p>[And I would add skipping build-steps that don‚Äôt apply; <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/1150_export-libvirt-xml" rel="nofollow noopener">1150_export-libvirt-xml</a>; <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/2375_build_rpi_fs" rel="nofollow noopener">2375_build_rpi_fs</a>; <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/2400_convert-raw-to-qcow2" rel="nofollow noopener">2400_convert-raw-to-qcow2</a> <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/2500_convert-raw-to-vdi" rel="nofollow noopener">2500_convert-raw-to-vdi</a>; <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/2500_convert-raw-to-vdi" rel="nofollow noopener">2500_convert-raw-to-vdi</a>; <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/2600_create-vbox-vm" rel="nofollow noopener">2600_create-vbox-vm</a>; <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/2700_create-vm-text" rel="nofollow noopener">2700_create-vm-text</a>; <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/2800_create-report" rel="nofollow noopener">2800_create-report</a>]</p>
<ul>
<li>Could you add licensing comment on top of the script please?</li>
<li>And/or add license to repository?</li>
<li>Or send pull request to <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/tree/master/help-steps" rel="nofollow noopener">https://github.com/Whonix/Whonix/tree/master/help-steps</a> [with the usual license header]?</li>
<li>
<code>#create_squashfs_ok</code> is currently out commented. Why‚Äôs that?</li>
<li>Also other functions are out commented currently which is a bit confusing.</li>
</ul>
<p>[not sure yet if help-step or build-steps.d but it is easily moved later on]</p>
<p>Once it is in Whonix/help-steps I can easily make it use variables rather than hardcoded strings such as for CHROOT_FOLDER, ISO_FILE, and whatnot. Also re-use code for (un)<a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/help-steps/mount-raw" rel="nofollow noopener">mount-raw</a> (if possible, sensible, probably yes).</p>
<p>The would be step one. A hardened debian iso which can be live booted.<br>
Would look probably like this: <code>sudo ~/Whonix/whonix_build --flavor hardened-debian --target iso --build</code></p>
<p>But that‚Äôs not a Whonix-<a href="../../whonix-host-live-persistent-boot-looking-for-good-product-name/7348.html">Duo</a> Installer ISO yet. So step two would be to implement <code>--flavor whonix-duo-xfce-kvm</code> which would install a different meta package <code>whonix-duo-xfce-kvm</code>. (<a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/1700_install-packages" rel="nofollow noopener">1700_install-packages</a>)</p>
<p>Therefore a new package <code>whonix-duo-xfce-kvm</code> needs to be added to <a href="../../../../external.html?link=https://github.com/Whonix/anon-meta-packages/blob/master/debian/control" rel="nofollow noopener">anon-meta-packages</a>. What packages <code>whonix-duo-xfce-qcow2</code> should depend on? Could you send a pull request for anon-meta-packages please or let me know which packages it should depend on?</p>
<ul>
<li>I guess the usual KVM dependencies <code>qemu-kvm libvirt-daemon-system libvirt-clients virt-manager</code>,</li>
<li>and <code>calamares</code>?</li>
<li>Anything else?</li>
</ul>
<p>Then we‚Äôd have a bootable Whonix-Duo Live Installer ISO with calamares installer, KVM dependencies, but not Whonix KVM images yet. I am not sure yet how to best get the Whonix KVM images installed on Whonix-Duo (host) during the build process. See my idea to package Whonix KVM images as <a href="../../help-welcome-kvm-development-staying-the-course/166/289.html" class="inline-onebox">[Help Welcome] KVM Development - staying the course</a> <code>deb</code> packages.<br>
<code>sudo apt-mark hold whonix-gateway-xfce-qcow2</code><br>
<code>sudo apt-mark hold whonix-workstation-xfce-qcow2</code></p>
<p><code>whonix-duo-xfce-kvm</code> package dependencies:</p>
<ul>
<li><code>qemu-kvm libvirt-daemon-system libvirt-clients virt-manager</code></li>
<li><code>calamares</code></li>
<li><code>whonix-gateway-xfce-qcow2 whonix-workstation-xfce-qcow2</code></li>
</ul>
<p>The ‚Äúmore final‚Äù build process to create Whonix-Duo-KVM would then be:</p>
<ul>
<li>build Whonix-Gateway XFCE qcow2 / Whonix-Workstation XFCE qcow2</li>
<li>build packages <code>whonix-gateway-xfce-qcow2 whonix-workstation-xfce-qcow2</code>
</li>
<li>build <code>--flavor whonix-duo-xfce-kvm</code>
</li>
</ul>
<p>(I‚Äôd automate this with a step outside of <code>whonix_build</code>, there‚Äôd be a wrapper calling <code>whonix_build</code> multiple times.)</p>
<p>Does that make sense so far?</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-10T01:59:35Z' class='post-time'>
                May 10, 2019,  1:59am
              </time>
              <meta itemprop='dateModified' content='2019-05-10T01:59:35Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="3" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>In my experience, the only real problem I was faced with was avoiding the copy of the existing user and his home directory into the target during the install part with Calamares. My solution was simply to suppress the <code>user</code> and his directory and let the <code>live-config</code> tools take care of the rest, which automatically creates a live-user. Quite basic, but functional.</p>
<p>If it‚Äôs not acceptable, maybe we can simply avoid creating the user during the Hardened Debian VM build?</p>
</blockquote>
</aside>
<p>Sounds acceptable. [as long as the end-result is ok]<br>
But I did not understand "suppress the <code>user</code>".</p>
<aside class="quote no-group" data-post="3" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>If it‚Äôs not acceptable, maybe we can simply avoid creating the user during the Hardened Debian VM build?</p>
</blockquote>
</aside>
<p>Certainly doable by modification of <a href="../../../../external.html?link=https://github.com/Whonix/anon-base-files/blob/master/debian/anon-base-files.postinst" rel="nofollow noopener">anon-base-files.postinst</a>. I can work on a variable that skips the creation of user <code>user</code>. Easy.</p>
<p>As a temporary measure even <a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/Source_Code_Intro#Build_Configuration" rel="nofollow noopener">build config</a></p>
<pre><code>export SKIP_SCRIPTS+=" anon-base-files.postinst "
</code></pre>
<p>could skip the whole anon-base-files.postinst maintainer script.</p>
<aside class="quote no-group" data-post="3" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Or maybe we could play with the <code>live-config</code> scripts so they would ignore the existing user and his home directory and login with the live-user at boot time (just thinking out loud, I don‚Äôt know if it‚Äôs possible)? Or maybe even easier to somehow configure the Calamares installer so it would ignore the existing user and its home directory during the <code>unpack</code> step of the install process?</p>
</blockquote>
</aside>
<p>Yes.</p>
<aside class="quote no-group" data-post="3" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>This being said, there might be a ton of things that I am missing. Such as making sure that the live system AND the installed system do honor the various hardening settings that are the main purpose of the ‚Äúhardened‚Äù Whonix version.</p>
</blockquote>
</aside>
<p>Would not worry much. Could be called ‚Äúout of scope‚Äù for now. Hardened Debian still is underdeveloped. As long as package <code>hardened-debian-xfce</code> is installed, the job of Whonix host is done. Anything missing in hardened debian can be called ‚Äúfuture work‚Äù.</p>
<aside class="quote no-group" data-post="3" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Also making sure that we don‚Äôt copy useless stuff into the target (I am thinking about logs, files owned by the initial user, etc.).</p>
</blockquote>
</aside>
<p>That would be up to Calamares. But if that happens, that is not that bad. It‚Äôs non-deterministic contents created on the user‚Äôs machine. Not during the build process of the iso.<br>
What‚Äôs really bad is creating let‚Äôs say a random seed or Tor entry guards and shipping that in an iso which then gets shared by thousands of users.<br>
But there might be one unsupported use case:<br>
Boot Live; then install; and assume the iso live session activities did not leak into the install, right?</p>
<aside class="quote no-group" data-post="3" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>I must say that I didn‚Äôt take the time to real dig into what makes the hardened version special compared to a stock debian version.</p>
</blockquote>
</aside>
<p>There is not too much to it yet:</p>
<ul>
<li><a href="../../../../external.html?link=https://www.whonix.org/wiki/Hardened_Debian" rel="nofollow noopener">https://www.whonix.org/wiki/Hardened_Debian</a></li>
<li><a href="../../../../external.html?link=https://www.wilderssecurity.com/threads/hardened-debian-in-development-feedback-wanted.408245/" rel="nofollow noopener">https://www.wilderssecurity.com/threads/hardened-debian-in-development-feedback-wanted.408245/</a></li>
</ul>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-10T07:38:14Z' class='post-time'>
                May 10, 2019,  7:38am
              </time>
              <meta itemprop='dateModified' content='2019-05-10T07:38:14Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="4" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>You mean <a href="../../../../external.html?link=https://github.com/onions-knight/whonix-stuff/blob/master/ok/whonix-iso-maker.sh" rel="nofollow noopener">https://github.com/onions-knight/whonix-stuff/blob/master/ok/whonix-iso-maker.sh</a>?</p>
<p>I am eager to have that build step <code>2550_create_iso</code> to create a bootable iso added to Whonix source code ASP. <img src="../../../images/emoji/twitter/slight_smilec164.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Then I‚Äôd implement <code>--target iso</code> which would run the build process as usual.</p>
<p>[And I would add skipping build-steps that don‚Äôt apply; <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/1150_export-libvirt-xml" rel="nofollow noopener">1150_export-libvirt-xml</a>; <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/2375_build_rpi_fs" rel="nofollow noopener">2375_build_rpi_fs</a>; <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/2400_convert-raw-to-qcow2" rel="nofollow noopener">2400_convert-raw-to-qcow2</a> <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/2500_convert-raw-to-vdi" rel="nofollow noopener">2500_convert-raw-to-vdi</a>; <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/2500_convert-raw-to-vdi" rel="nofollow noopener">2500_convert-raw-to-vdi</a>; <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/2600_create-vbox-vm" rel="nofollow noopener">2600_create-vbox-vm</a>; <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/2700_create-vm-text" rel="nofollow noopener">2700_create-vm-text</a>; <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/2800_create-report" rel="nofollow noopener">2800_create-report</a>]</p>
<ul>
<li>Could you add licensing comment on top of the script please?</li>
<li>And/or add license to repository?</li>
<li>Or send pull request to <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/tree/master/help-steps" rel="nofollow noopener">https://github.com/Whonix/Whonix/tree/master/help-steps</a> [with the usual license header]?</li>
<li>
<code>#create_squashfs_ok</code> is currently out commented. Why‚Äôs that?</li>
<li>Also other functions are out commented currently which is a bit confusing.</li>
</ul>
</blockquote>
</aside>
<p>Great, I‚Äôll try to do that when I have sometime (maybe not today).</p>
<p>Yes, the script definitely needs some cleaning, the uncommented step is a mistake. Also the <code>-e boot</code> options has to be removed (it excludes the /boot directory from the copied squashfs file, Calamares needs it to make the target system bootable (it won‚Äôt reinstall the kernel by default).</p>
<aside class="quote no-group" data-post="4" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>The would be step one. A hardened debian iso which can be live booted.<br>
Would look probably like this: <code>sudo ~/Whonix/whonix_build --flavor hardened-debian --target iso --build</code></p>
<p>But that‚Äôs not a Whonix-<a href="../../whonix-host-live-persistent-boot-looking-for-good-product-name/7348.html">Duo</a> Installer ISO yet. So step two would be to implement <code>--flavor whonix-duo-xfce-kvm</code> which would install a different meta package <code>whonix-duo-xfce-kvm</code> . (<a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/1700_install-packages" rel="nofollow noopener">1700_install-packages</a>)</p>
<p>Therefore a new package <code>whonix-duo-xfce-kvm</code> needs to be added to <a href="../../../../external.html?link=https://github.com/Whonix/anon-meta-packages/blob/master/debian/control" rel="nofollow noopener">anon-meta-packages</a>. What packages <code>whonix-duo-xfce-qcow2</code> should depend on? Could you send a pull request for anon-meta-packages please or let me know which packages it should depend on?</p>
<ul>
<li>I guess the usual KVM dependencies <code>qemu-kvm libvirt-daemon-system libvirt-clients virt-manager</code> ,</li>
<li>and <code>calamares</code> ?</li>
<li>Anything else?</li>
</ul>
</blockquote>
</aside>
<p>I will make a list of all added packages for the ‚ÄúWhonix Desktop‚Äù image. Basically, it‚Äôs KVM/virt-manager dependencies + free/non-free firmware (needed for wifi support) + network manager related packages (user-friendly wifi setup) + Calamares dependencies + some theming.</p>
<p>I did not install these additional packages with the <code>--no-install-recommends</code> option, didn‚Äôt want anything to break and spend hours to debug what recommended package was missing for the sake of sparing a few hundreds MB.</p>
<p>On a side note, I think ideally the Calamares installer should have an  option asking the user whether he would like to install non-free packages or not on the target system. If yes = keep it as it is, if no = remove the non-free packages (this is taken care of during the <code>packages</code> step of the installer).</p>
<p>I am sure it is easily doable, though I don‚Äôt know how yet.</p>
<aside class="quote no-group" data-post="4" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I am not sure yet how to best get the Whonix KVM images installed on Whonix-Duo (host) during the build process.</p>
</blockquote>
</aside>
<p>OK</p>
<aside class="quote no-group" data-post="4" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Does that make sense so far?</p>
</blockquote>
</aside>
<p>Yes <img src="../../../images/emoji/twitter/slight_smilec164.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<aside class="quote no-group" data-post="5" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Sounds acceptable. [as long as the end-result is ok]<br>
But I did not understand "suppress the <code>user</code> ".</p>
</blockquote>
</aside>
<p>I ran <code>userdel -r user</code> with root</p>
<aside class="quote no-group" data-post="5" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Certainly doable by modification of <a href="../../../../external.html?link=https://github.com/Whonix/anon-base-files/blob/master/debian/anon-base-files.postinst" rel="nofollow noopener">anon-base-files.postinst</a>. I can work on a variable that skips the creation of user <code>user</code> . Easy.</p>
<p>As a temporary measure even <a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/Source_Code_Intro#Build_Configuration" rel="nofollow noopener">build config</a></p>
<pre><code class="lang-auto">export SKIP_SCRIPTS+=" anon-base-files.postinst "
</code></pre>
<p>could skip the whole anon-base-files.postinst maintainer script.</p>
</blockquote>
</aside>
<p>OK, seems the easiest way to me right now as I have no idea how to implement all the other options I was thinking of (or if it is even possible).</p>
<aside class="quote no-group" data-post="5" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>What‚Äôs really bad is creating let‚Äôs say a random seed or Tor entry guards and shipping that in an iso which then gets shared by thousands of users.<br>
But there might be one unsupported use case:<br>
Boot Live; then install; and assume the iso live session activities did not leak into the install, right?</p>
</blockquote>
</aside>
<p>Indeed, that would be really bad. But as far as I know, the live session activities do not leak as the installer only copies the <code>filesystem.squashfs</code> file which does not get modified by the file session.This file is just a <code>squashfs</code>'ed image of the .raw disk image packaged into an ISO.</p>
<p>So my understanding right now is that if the master .raw image is clean, then its <code>filesystem.squashfs</code> image should be clean too, and so should be the newly installed system. But I will do some more testing to verify this claim.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-10T10:37:58Z' class='post-time'>
                May 10, 2019, 10:37am
              </time>
              <meta itemprop='dateModified' content='2019-05-10T10:37:58Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>On reflection hardened debian based builds should not even have anon-base-files installed. It‚Äôs not a dependency in anon-meta-packages. Hardened debian and Whonix host is going to need its own base files package.</p>
<aside class="quote no-group" data-post="6" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>On a side note, I think ideally the Calamares installer should have an option asking the user whether he would like to install non-free packages or not on the target system.</p>
</blockquote>
</aside>
<p>Freedom Software purists won‚Äôt be satisfied by that. They don‚Äôt want to download any iso including anything nonfreedom in the first place let alone boot anything nonfreedom including. Therefore would be futile. Instead I‚Äôll be providing two meta packages and two build flavors pure and impure. Relatively minor extra effort for me. [However, I probably won‚Äôt be uploading purist builds. That should be done by someone else or self-made builds.]</p>
<p>Anything else on there should be (no) free vs nonfree discussion, please move here:</p>
<aside class="quote" data-post="1" data-topic="7251">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="../../whonix-host-nonfree-blobs-firmware-linux-nonfree/7251.html">Whonix host - nonfree blobs - firmware-linux-nonfree</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Context: <a href="../../whonix-host-operating-system/3931.html">Whonix ‚Ñ¢ Host Operating System Development</a>

Purpose of this thread: keeping the discussion of nonfree vs free out of above thread.
Non-Purpose of this: non-free software in Whonix ‚Ñ¢ VMs (there is none but if you think there is <a href="../../adding-non-freedom-contrib-non-free-apt-repositories-by-default-is-it-safe/3300.html">another thread</a>)
Related: <a href="../../whonix-and-free-system-distribution-guidelines-gnu-fsdg/5877.html">Whonix ‚Ñ¢ and Free System Distribution Guidelines (GNU FSDG)</a>


The position on nonfree firmware and discussion of arguments can be found here:
  </blockquote>
</aside>

<aside class="quote no-group" data-post="6" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Indeed, that would be really bad. But as far as I know, the live session activities do not leak as the installer only copies the <code>filesystem.squashfs</code> file which does not get modified by the file session.This file is just a <code>squashfs</code> 'ed image of the .raw disk image packaged into an ISO.</p>
<p>So my understanding right now is that if the master .raw image is clean, then its <code>filesystem.squashfs</code> image should be clean too, and so should be the newly installed system. But I will do some more testing to verify this claim.</p>
</blockquote>
</aside>
<p>Sounds awesome!</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-10T14:46:11Z' class='post-time'>
                May 10, 2019,  2:46pm
              </time>
              <meta itemprop='dateModified' content='2019-05-10T14:46:11Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="1" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>The encryption does not seem to use LVM (is it a problem?)</p>
</blockquote>
</aside>
<p>No. You‚Äôll be missing the volume snapshotting feature that LVM provides, but that‚Äôs it. This can be compensated by having a filesystem that support this instead.</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://www.redditstatic.com/desktop2x/img/favicon/android-icon-192x192.png" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://www.reddit.com/r/archlinux/comments/8xqujf/fulldisk_encryption_luks_vs_lvm_on_luks/" target="_blank" rel="nofollow noopener">reddit</a>
  </header>
  <article class="onebox-body">
    

<h3><a href="../../../../external.html?link=https://www.reddit.com/r/archlinux/comments/8xqujf/fulldisk_encryption_luks_vs_lvm_on_luks/" target="_blank" rel="nofollow noopener">r/archlinux - Fulldisk encryption: LUKS vs LVM on LUKS</a></h3>

<p>48 votes and 41 comments so far on Reddit</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-12T07:30:56Z' class='post-time'>
                May 12, 2019,  7:30am
              </time>
              <meta itemprop='dateModified' content='2019-05-12T07:30:56Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/shared-folder-help/commit/43d28a01dbece96048d10d8b8bda5aae63213f47" target="_blank" rel="nofollow noopener">github.com/Whonix/shared-folder-help</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/shared-folder-help/commit/43d28a01dbece96048d10d8b8bda5aae63213f47" target="_blank" rel="nofollow noopener">move group vboxsf creation user "user" adding to it from postinst</a>
</h4>

  <pre class="message" style="white-space: normal;">to conditional systemd unit file to avoid conflicts with KVM</pre>

<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/shared-folder-help/commit/43d28a01dbece96048d10d8b8bda5aae63213f47" target="_blank" rel="nofollow noopener">07:29AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>2 files</strong>
  with <strong>10 additions</strong>
  and <strong>11 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-12T07:35:06Z' class='post-time'>
                May 12, 2019,  7:35am
              </time>
              <meta itemprop='dateModified' content='2019-05-12T07:35:06Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/21e53c63fd85fb0bdb16c937730103bab3698269" target="_blank" rel="nofollow noopener">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/21e53c63fd85fb0bdb16c937730103bab3698269" target="_blank" rel="nofollow noopener">initial import from https://github.com/onions-knight/whonix-stuff</a>
</h4>


<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/21e53c63fd85fb0bdb16c937730103bab3698269" target="_blank" rel="nofollow noopener">07:33AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>2 files</strong>
  with <strong>401 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/4dad36875fe3b8d2b6f0a5024fc3626688332cc5" target="_blank" rel="nofollow noopener">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/4dad36875fe3b8d2b6f0a5024fc3626688332cc5" target="_blank" rel="nofollow noopener">delete vboxsf group workaround no longer needed, fixed upstream</a>
</h4>

  <pre class="message" style="white-space: normal;">https://github.com/Whonix/shared-folder-help/commit/43d28a01dbece96048d10d8b8bda5aae63213f47</pre>

<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/4dad36875fe3b8d2b6f0a5024fc3626688332cc5" target="_blank" rel="nofollow noopener">07:34AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>0 additions</strong>
  and <strong>2 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-12T08:26:18Z' class='post-time'>
                May 12, 2019,  8:26am
              </time>
              <meta itemprop='dateModified' content='2019-05-12T08:26:18Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>freedom vs nonfreedom build siwtches are now implemented.</p>
<p>Example pure build only containing Freedom Software.</p>
<pre><code>sudo ./whonix_build --target qcow2 --flavor whonix-host-xfce --freedom true --build --redistribute
</code></pre>
<p>results in installation of package <code>whonix-host-xfce-kvm-freedom</code></p>
<hr>
<p>vs Example containing nonfreedom software.</p>
<pre><code>sudo ./whonix_build --target qcow2 --flavor whonix-host-xfce --freedom false --build --redistribute
</code></pre>
<p>results in installation of package <code>whonix-host-xfce-kvm-nonfreedom</code></p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-12T08:27:00Z' class='post-time'>
                May 12, 2019,  8:27am
              </time>
              <meta itemprop='dateModified' content='2019-05-12T08:27:00Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/d74ec50c6da27cdf066cacd87ce903b39306e9f1" target="_blank" rel="nofollow noopener">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/d74ec50c6da27cdf066cacd87ce903b39306e9f1" target="_blank" rel="nofollow noopener">implement whonix-host build switches</a>
</h4>

  <pre class="message" style="white-space: normal;">deprecate debian-vm (never deployed)</pre>

<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/d74ec50c6da27cdf066cacd87ce903b39306e9f1" target="_blank" rel="nofollow noopener">07:53AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>7 files</strong>
  with <strong>23 additions</strong>
  and <strong>23 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/006dfd933e7902a5cbecc386171ea777d1c5c987" target="_blank" rel="nofollow noopener">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/006dfd933e7902a5cbecc386171ea777d1c5c987" target="_blank" rel="nofollow noopener">output</a>
</h4>


<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/006dfd933e7902a5cbecc386171ea777d1c5c987" target="_blank" rel="nofollow noopener">07:54AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>2 additions</strong>
  and <strong>2 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/26802c5566ae9a97cb05d8c01c712fe486e2c354" target="_blank" rel="nofollow noopener">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/26802c5566ae9a97cb05d8c01c712fe486e2c354" target="_blank" rel="nofollow noopener">implement --freedom true|false</a>
</h4>

  <pre class="message" style="white-space: normal;">https://www.whonix.org/wiki/Dev/nonfree</pre>

<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/26802c5566ae9a97cb05d8c01c712fe486e2c354" target="_blank" rel="nofollow noopener">08:23AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>2 files</strong>
  with <strong>46 additions</strong>
  and <strong>13 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-12T08:33:22Z' class='post-time'>
                May 12, 2019,  8:33am
              </time>
              <meta itemprop='dateModified' content='2019-05-12T08:33:22Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/61d26248c569c19b04794df2e4e54cb89b183f2a" target="_blank" rel="nofollow noopener">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/61d26248c569c19b04794df2e4e54cb89b183f2a" target="_blank" rel="nofollow noopener">output</a>
</h4>


<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/61d26248c569c19b04794df2e4e54cb89b183f2a" target="_blank" rel="nofollow noopener">08:30AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>6 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-12T08:36:34Z' class='post-time'>
                May 12, 2019,  8:36am
              </time>
              <meta itemprop='dateModified' content='2019-05-12T08:36:34Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I‚Äôll be moving as much as possible from the two new build steps to packages. First was vboxsf group issue, next done is package insatllation.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/7897954192072c7b7e7228a29c60195268da6866" target="_blank" rel="nofollow noopener">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/7897954192072c7b7e7228a29c60195268da6866" target="_blank" rel="nofollow noopener">package installation is now done by the usual mechanism</a>
</h4>


<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/7897954192072c7b7e7228a29c60195268da6866" target="_blank" rel="nofollow noopener">08:31AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>0 additions</strong>
  and <strong>30 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>I plan on moving as much as possible from function <code>configure-kvm()</code> to package <a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt" rel="nofollow noopener">https://github.com/Whonix/whonix-libvirt</a>.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-12T09:13:39Z' class='post-time'>
                May 12, 2019,  9:13am
              </time>
              <meta itemprop='dateModified' content='2019-05-12T09:13:39Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/4a03bbe9662a92ebb6d83fddd357c8eb63c5d713" target="_blank" rel="nofollow noopener">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/4a03bbe9662a92ebb6d83fddd357c8eb63c5d713" target="_blank" rel="nofollow noopener">moved configure-kvm function to https://github.com/Whonix/whonix-libvirt/blob/master/usr/lib/whonix-libvirt/install</a>
</h4>


<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/4a03bbe9662a92ebb6d83fddd357c8eb63c5d713" target="_blank" rel="nofollow noopener">09:06AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>0 additions</strong>
  and <strong>34 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt/blob/master/usr/lib/whonix-libvirt/install" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt/blob/master/usr/lib/whonix-libvirt/install" target="_blank" rel="nofollow noopener">Whonix/whonix-libvirt/blob/master/usr/lib/whonix-libvirt/install</a></h4>
<pre><code class="lang-">#!/bin/bash

## Copyright (C) 2019 - 2019 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

set -x
set -e

## Doing the following in a temporary directory to avoid modified files should
## this be interrupted in the middle.
temp_dir="$(mktemp --directory)"
cp -r /usr/share/whonix-libvirt/xml "$temp_dir"

## workaround to replace the 'kvm' domain type with 'qemu' otherwise libvirtd service will fail to start in chroot
sed -i "1 s/^.*$/&lt;domain type='qemu'&gt;/" "$temp_dir/xml/Whonix-Gateway.xml"
sed -i "1 s/^.*$/&lt;domain type='qemu'&gt;/" "$temp_dir/xml/Whonix-Workstation.xml"

if systemctl --no-pager status libvirtd &gt;/dev/null ; then
   true "libvirtd is running."
else
</code></pre>

  This file has been truncated. <a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt/blob/master/usr/lib/whonix-libvirt/install" target="_blank" rel="nofollow noopener">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p><code>/usr/lib/whonix-libvirt/install</code> is currently not (yet?) idempotent, meaning</p>
<ul>
<li>it cannot be re-run without error</li>
<li>if it breaks in the middle, it cannot recover when run again</li>
</ul>
<p>Not yet added to postinst but soon.</p>
<p>I am not sure what‚Äôs best. It could be easily made idempotent but then we would keep re-running its commands on each time <code>whonix-libvirt</code> gets upgraded. I guess the best solution is to make it idempotent but run it only at initial installation. That‚Äôs what I‚Äôll be going for unless there are better suggestions.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-12T09:19:08Z' class='post-time'>
                May 12, 2019,  9:19am
              </time>
              <meta itemprop='dateModified' content='2019-05-12T09:19:08Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt/commit/062a399bcd156bb0dccec17fad0602e68c5086fc" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-libvirt</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt/commit/062a399bcd156bb0dccec17fad0602e68c5086fc" target="_blank" rel="nofollow noopener">make install script idempotent</a>
</h4>

  <pre class="message" style="white-space: normal;">create done file /var/lib/whonix-libvirt/install.done
run install script when done file does not exist
https://forums.whonix.org/t/whonix-desktop-installer-with-calamares-field-report/7350/15?u=patrick</pre>

<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt/commit/062a399bcd156bb0dccec17fad0602e68c5086fc" target="_blank" rel="nofollow noopener">09:18AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>2 files</strong>
  with <strong>60 additions</strong>
  and <strong>10 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-12T09:32:39Z' class='post-time'>
                May 12, 2019,  9:32am
              </time>
              <meta itemprop='dateModified' content='2019-05-12T09:32:39Z'>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/029a780168053d743e4b5a8abd539549b79f07f0" target="_blank" rel="nofollow noopener">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/029a780168053d743e4b5a8abd539549b79f07f0" target="_blank" rel="nofollow noopener">intentd style</a>
</h4>


<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/029a780168053d743e4b5a8abd539549b79f07f0" target="_blank" rel="nofollow noopener">09:32AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>138 additions</strong>
  and <strong>138 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-12T09:33:03Z' class='post-time'>
                May 12, 2019,  9:33am
              </time>
              <meta itemprop='dateModified' content='2019-05-12T09:33:03Z'>
          <span itemprop='position'>#18</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/597875c6700909cf1e8cd021be0f37d956da68ab" target="_blank" rel="nofollow noopener">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/597875c6700909cf1e8cd021be0f37d956da68ab" target="_blank" rel="nofollow noopener">remove things we won't need or implement differently</a>
</h4>


<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/597875c6700909cf1e8cd021be0f37d956da68ab" target="_blank" rel="nofollow noopener">09:29AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>47 additions</strong>
  and <strong>98 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>and intend style changes that hopefully did not break anything.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-12T09:44:36Z' class='post-time'>
                May 12, 2019,  9:44am
              </time>
              <meta itemprop='dateModified' content='2019-05-12T09:44:36Z'>
          <span itemprop='position'>#19</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/5e8fc7a31db91dbf6a58a9a1b5bb84a0d98820da" target="_blank" rel="nofollow noopener">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/5e8fc7a31db91dbf6a58a9a1b5bb84a0d98820da" target="_blank" rel="nofollow noopener">done by whonix-initializer usr/lib/anon-dist/chroot-scripts-post.d/80_cleanup</a>
</h4>

  <pre class="message" style="white-space: normal;">just need to run build-steps.d/2300_run-chroot-scripts-post-d after
any file modifications</pre>

<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/5e8fc7a31db91dbf6a58a9a1b5bb84a0d98820da" target="_blank" rel="nofollow noopener">09:36AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>1 additions</strong>
  and <strong>1 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/2306b25846cec9cc6f2acd1b34ad64e7db9bd4e5" target="_blank" rel="nofollow noopener">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/2306b25846cec9cc6f2acd1b34ad64e7db9bd4e5" target="_blank" rel="nofollow noopener">moved to whonix-initializer usr/lib/anon-dist/chroot-scripts-post.d/80_cleanup</a>
</h4>

  <pre class="message" style="white-space: normal;">or already covered by it</pre>

<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/commit/2306b25846cec9cc6f2acd1b34ad64e7db9bd4e5" target="_blank" rel="nofollow noopener">09:42AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>1 additions</strong>
  and <strong>7 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/whonix-initializer/commit/591c831a516614c7a911e1d3796066d00749ab14" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-initializer</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/whonix-initializer/commit/591c831a516614c7a911e1d3796066d00749ab14" target="_blank" rel="nofollow noopener">import from https://github.com/onions-knight/whonix-stuff/blob/master/2900_configure_desktop_sketch</a>
</h4>


<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/whonix-initializer/commit/591c831a516614c7a911e1d3796066d00749ab14" target="_blank" rel="nofollow noopener">09:44AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>3 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-12T09:48:43Z' class='post-time'>
                May 12, 2019,  9:48am
              </time>
              <meta itemprop='dateModified' content='2019-05-12T09:48:43Z'>
          <span itemprop='position'>#20</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/anon-meta-packages/commit/5daaf63b10add261015559451bf161f4c69d584f" target="_blank" rel="nofollow noopener">github.com/Whonix/anon-meta-packages</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/anon-meta-packages/commit/5daaf63b10add261015559451bf161f4c69d584f" target="_blank" rel="nofollow noopener">move whonix-initializer to hardened-packages-dependencies-cli</a>
</h4>

  <pre class="message" style="white-space: normal;">(non-perfect solution)</pre>

<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/anon-meta-packages/commit/5daaf63b10add261015559451bf161f4c69d584f" target="_blank" rel="nofollow noopener">09:47AM - 12 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>2 additions</strong>
  and <strong>1 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>This was to make whonix-initializer install on hardened debian / whonix host builds too, so the cleanup chroot script runs there too.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../73504658.html?page=2">next page ‚Üí</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
