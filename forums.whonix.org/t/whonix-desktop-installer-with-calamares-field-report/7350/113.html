<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Whonix Desktop Installer with Calamares - field report - #113 by Patrick - Development - Whonix Forum</title>
    <meta name="description" content="So after a few days playing with Calamares and my “Whonix Desktop” VM and ISO files, I thought it would be time to report back my experience. 
See also 


For the discussion related to the Whonix Host/Desktop project. 
I&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../7350c575.html?page=6" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Whonix Desktop Installer with Calamares - field report&#39;" href="../7350.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5564981a244c37b36b7c1610924d97da327c5b88.png" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5564981a244c37b36b7c1610924d97da327c5b88.png" />
<meta property="og:url" content="https://forums.whonix.org/t/whonix-desktop-installer-with-calamares-field-report/7350/113" />
<meta name="twitter:url" content="https://forums.whonix.org/t/whonix-desktop-installer-with-calamares-field-report/7350/113" />
<meta property="og:title" content="Whonix Desktop Installer with Calamares - field report" />
<meta name="twitter:title" content="Whonix Desktop Installer with Calamares - field report" />
<meta property="og:description" content="arc-icons not in use due to unavailable from packages.debian.org  that is:    just now followed up here:" />
<meta name="twitter:description" content="arc-icons not in use due to unavailable from packages.debian.org  that is:    just now followed up here:" />
<meta property="article:published_time" content="2019-08-19T14:17:31+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="../7350af4d.html?page=5">
        <link rel="next" href="../7350235c.html?page=7">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../7350.html">Whonix Desktop Installer with Calamares - field report</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-15T15:26:08Z' class='post-time'>
                August 15, 2019,  3:26pm
              </time>
              <meta itemprop='dateModified' content='2019-08-15T15:26:08Z'>
          <span itemprop='position'>#107</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Btw it comes with <a href="../../../../external.html?link=https://www.whonix.org/wiki/Root#Passwordless_Recovery_Mode_Security_Discussion" rel="nofollow noopener">passwordless</a> re<a href="../../../../external.html?link=https://www.whonix.org/wiki/Recovery" rel="nofollow noopener">covery / emergency mode</a>. Hopefully this release won’t block you from gaining root. This is well tested in Whonix VM VirtualBox builds. When you’r ready to test… Keep your time… Still having gain root issues?</p>
<p>In case there are still gain root issues, I could invent a kernel boot parameter <code>adminrootcreate</code> or so which creates user <code>admin</code> with group <code>sudo</code> membership and default password <code>changeme</code> for debugging purposes in next build.</p>
<p>Also news, root account disabled by default:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://www.whonix.org/wiki/Root" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:103/154;"><img src="../../../../external.html?link=https://www.whonix.org/w/images/e/e2/Root123123.jpg" class="thumbnail"></div>

<h3><a href="../../../../external.html?link=https://www.whonix.org/wiki/Root" target="_blank" rel="nofollow noopener">Root</a></h3>

<p>Tips on using sudo / root (privileged) commands safely</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">

            <link itemprop="image" href="../../../uploads/default/original/2X/5/56a91fbdeffaaec15d01938cf6082750542762d8.jpeg">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-19T13:04:18Z' class='post-time'>
                August 19, 2019,  1:04pm
              </time>
              <meta itemprop='dateModified' content='2019-08-19T13:04:18Z'>
          <span itemprop='position'>#109</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Sorry for previous post, I pushed the “reply” button too fast.</p>
<p>Thanks <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a>, I have successfully built a Whonix-Host-15.0.0.3.6 using the following commands:</p>
<pre><code>git clone --jobs=4 --recursive https://github.com/Whonix/Whonix
cd Whonix
git verify-tag 15.0.0.3.6-developers-only
git checkout 15.0.0.3.6-developers-only
git describe
sudo ~/Whonix/whonix_build  --build --redistribute --target iso --flavor whonix-host-xfce --freedom false --allow-untagged true --allow-uncommitted true
</code></pre>
<p><strong>Test Report Whonix-Host-XFCE-15.0.0.3.6 ISO and Whonix-Host-15.0.0.3.6 on HDD</strong></p>
<p><strong>1. Virtual Machine Manager/KVM</strong></p>
<ul>
<li>As reported earlier, KVM networking does not work because one of the blacklisted network protocols in <code>/etc/modprobe.d/uncommon-network-protocols.conf</code> is needed. After further researches, I have found which one: <code>install llc /bin/true</code>:<br>
<code>lsmod | grep llc</code><br>
<code>llc 16384 2 bridge,stp</code><br>
See my pull request on <a href="../../../../external.html?link=https://github.com/Whonix/security-misc/pull/29" rel="nofollow noopener">GitHub</a>
</li>
<li>By default, the VMs do not start because the virtual disks are not set to readonly. This is only needed when using the ISO though. Might stay this way as long as the user is correctly advised to change to set the disk to readonly mode.</li>
<li>By default, the VMs do no start until the CPU configuration is set to “Copy host CPU configuration”, which is expected in KVM, but also happened when testing on real hardware (both using the ISO and the installed version). Might be related to my specific hardware though.</li>
<li>Even with these settings and contrary to previous versions, <strong>I was not able to successfully start the VMs, both using the ISO and the installed version of Whonix-Host, both in KVM and on real hardware!</strong> The error is now: <code>Error starting domain: unsupported configuration: host doesn't support paravirtual spinlocks</code><br>
I have no idea what causes that and what it means. Needs further exploration.</li>
</ul>
<p><strong>2. Calamares Installer</strong></p>
<ul>
<li>Needs correct branding (see also: <a href="../../whonix-host-calamares-branding-suggestion/7772/3.html" class="inline-onebox">Whonix Host Calamares Branding Suggestion</a>. Just a reminder. Probably better to tackle this issue later when everything else works.)</li>
<li>Install works fine on BIOS legacy systems (tested both in KVM and real harware)</li>
<li>While the ISO boots fine in EFI mode, my install attempt in EFI mode failed. Needs further testing.</li>
</ul>
<p><strong>3. Whonix-Host install on HDD</strong></p>
<ul>
<li>Grub menu also provides a <em>Debian-Live</em> option, although it does not work (results in kernel panic since live packages are removed during the installation part and are not part of the installed system). Grub menu needs to be fixed accordingly in the installed machine (must be somewhere in the Calamares modules). Similarly, the persistent/live icons must be removed from the installed version.</li>
<li>As expected, the installed system has no virtual console root access. I find it very unpractical, especially for a host system. Maybe consider reverting back this recent change for the Whonix-Host version?</li>
</ul>
<p><strong>4. Miscellaneous</strong></p>
<ul>
<li>
<p>Currently the live system in ISO mode provides a live-user account with passwordless sudo rights, i.e. it overrides the current disabled root account configuration. Might be a bug or a feature depending on the point of view.</p>
</li>
<li>
<p>Theming lacks arc-icons (currently using Adwaita icons, not so bad IMHO). Probably normal if  not yet implemented in Whonix? Cosmetic issue, not a big deal.</p>
</li>
<li>
<p>As we are dealing with a host system (be it ISO or HDD install), it would be nice to have a power-manager plugin on the panel (<code>xfce4-power-manager</code>), something expected on a laptop for instance, I think this package does the trick (I must retest it on laptop hardware):</p>
<p><code>root@whonix-host-15:~# apt install xfce4-power-manager Reading package lists... Done Building dependency tree Reading state information... Done The following additional packages will be installed: xfce4-power-manager-data xfce4-power-manager-plugins The following NEW packages will be installed: xfce4-power-manager xfce4-power-manager-data xfce4-power-manager-plugins 0 upgraded, 3 newly installed, 0 to remove and 7 not upgraded. Need to get 1,016 kB of archives. After this operation, 4,487 kB of additional disk space will be used. Do you want to continue? [Y/n] y</code></p>
</li>
<li>
<p>same thing with pulseaudio plugin (already installed, just needs to be added in the panel tray)</p>
</li>
<li>
<p>The Whonix Host should be graphically differentiated from the Whonix-VMs. Maybe simply a different background image/color?</p>
</li>
</ul>
<p><strong>Screenshot from the installed Whonix-Host-XFCE-15.0.0.3.6 install (on KVM):</strong><br>
<em>“Vanilla” install, only added xfce4-power-manager plugin and pulseaudio plugin and remove the live/persistent indicator on the panel</em><br>
<div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/2X/5/56a91fbdeffaaec15d01938cf6082750542762d8.jpeg" data-download-href="//forums.whonix.org/uploads/default/56a91fbdeffaaec15d01938cf6082750542762d8" title="Screenshot_2019-08-19_15-01-26.jpg"><img src="../../../uploads/default/optimized/2X/5/56a91fbdeffaaec15d01938cf6082750542762d8_2_690x387.jpeg" alt="Screenshot_2019-08-19_15-01-26" data-base62-sha1="cmDplXUYpDhtTlzCE6Wc6uAVvxC" width="690" height="387" srcset="//forums.whonix.org/uploads/default/optimized/2X/5/56a91fbdeffaaec15d01938cf6082750542762d8_2_690x387.jpeg, //forums.whonix.org/uploads/default/optimized/2X/5/56a91fbdeffaaec15d01938cf6082750542762d8_2_1035x580.jpeg 1.5x, //forums.whonix.org/uploads/default/optimized/2X/5/56a91fbdeffaaec15d01938cf6082750542762d8_2_1380x774.jpeg 2x" data-small-upload="../../../uploads/default/optimized/2X/5/56a91fbdeffaaec15d01938cf6082750542762d8_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot_2019-08-19_15-01-26.jpg</span><span class="informations">1919×1079 255 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="4" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../restrict-root-access/7658/64.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../restrict-root-access/7658/64.html'>
                      <span itemprop='name'>Restrict root access</span>
                    </a>
                    <meta itemprop='position' content='4'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../error-starting-domain-unsupported-configuration-host-doesnt-support-paravirtual-spinlocks/7916.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../error-starting-domain-unsupported-configuration-host-doesnt-support-paravirtual-spinlocks/7916.html'>
                      <span itemprop='name'>Error starting domain: unsupported configuration: host doesn&#39;t support paravirtual spinlocks</span>
                    </a>
                    <meta itemprop='position' content='5'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../vms-do-no-start-until-the-cpu-configuration-is-set-to-copy-host-cpu-configuration/7917.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../vms-do-no-start-until-the-cpu-configuration-is-set-to-copy-host-cpu-configuration/7917.html'>
                      <span itemprop='name'>VMs do no start until the CPU configuration is set to “Copy host CPU configuration”</span>
                    </a>
                    <meta itemprop='position' content='6'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-19T13:47:57Z' class='post-time'>
                August 19, 2019,  1:47pm
              </time>
              <meta itemprop='dateModified' content='2019-08-19T13:47:57Z'>
          <span itemprop='position'>#110</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>More answers soon.</p>
<aside class="quote no-group quote-modified" data-post="109" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>–allow-untagged true --allow-uncommitted true</p>
</blockquote>
</aside>
<p>This is something that users shouldn’t use but useful during development since you can modify files and still build from “unclean” state.</p>
<aside class="quote no-group" data-post="109" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>As reported earlier, KVM networking does not work because one of the blacklisted network protocols in <code>/etc/modprobe.d/uncommon-network-protocols.conf</code> is needed. After further researches, I have found which one: <code>install llc /bin/true</code> :<br>
<code>lsmod | grep llc</code><br>
<code>llc 16384 2 bridge,stp</code><br>
See my pull request on <a href="../../../../external.html?link=https://github.com/Whonix/security-misc/pull/29" rel="nofollow noopener">GitHub</a></p>
</blockquote>
</aside>
<p>Merged.</p>
<aside class="quote no-group" data-post="109" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>By default, the VMs do not start because the virtual disks are not set to readonly. This is only needed when using the ISO though. Might stay this way as long as the user is correctly advised to change to set the disk to readonly mode.</p>
</blockquote>
</aside>
<p>Ticket, discussion and possible solution in <a href="../../../../external.html?link=https://phabricator.whonix.org/T914" rel="nofollow noopener">https://phabricator.whonix.org/T914</a>.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-19T14:02:05Z' class='post-time'>
                August 19, 2019,  2:02pm
              </time>
              <meta itemprop='dateModified' content='2019-08-19T14:02:05Z'>
          <span itemprop='position'>#111</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Awesome work!</p>
<p>Need to split this into many smaller tickets to make this manageable. I am loosing track if too many things are in one place. Specifically the stuff that can be reassigned to <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/hulahoop">@HulaHoop</a> or me.</p>
<aside class="quote no-group" data-post="109" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>By default, the VMs do no start until the CPU configuration is set to “Copy host CPU configuration”, which is expected in KVM, but also happened when testing on real hardware (both using the ISO and the installed version). Might be related to my specific hardware though.</p>
</blockquote>
</aside>
<p><a href="../../vms-do-no-start-until-the-cpu-configuration-is-set-to-copy-host-cpu-configuration/7917/1.html" class="inline-onebox">VMs do no start until the CPU configuration is set to “Copy host CPU configuration”</a></p>
<aside class="quote no-group" data-post="109" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Even with these settings and contrary to previous versions, <strong>I was not able to successfully start the VMs, both using the ISO and the installed version of Whonix-Host, both in KVM and on real hardware!</strong> The error is now: <code>Error starting domain: unsupported configuration: host doesn't support paravirtual spinlocks</code><br>
I have no idea what causes that and what it means. Needs further exploration.</p>
</blockquote>
</aside>
<p><a href="../../error-starting-domain-unsupported-configuration-host-doesnt-support-paravirtual-spinlocks/7916/1.html" class="inline-onebox">Error starting domain: unsupported configuration: host doesn't support paravirtual spinlocks</a></p>
<aside class="quote no-group" data-post="109" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Install works fine on BIOS legacy systems (tested both in KVM and real harware)</p>
</blockquote>
</aside>
<p>Awesome!</p>
<aside class="quote no-group" data-post="109" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>While the ISO boots fine in EFI mode, my install attempt in EFI mode failed. Needs further testing.</p>
</blockquote>
</aside>
<p>I don’t know much about EFI booting yet and don’t have hardware to test.</p>
<p>packages that we might need:</p>
<p>(quite possibly) <a href="../../../../external.html?link=https://packages.debian.org/buster/shim-signed" rel="nofollow noopener">https://packages.debian.org/buster/shim-signed</a></p>
<p>(less likely but perhaps useful anyhow) <a href="../../../../external.html?link=https://packages.debian.org/buster/refind" rel="nofollow noopener">https://packages.debian.org/buster/refind</a></p>
<p>Related, more links here:</p>
<aside class="quote quote-modified" data-post="1" data-topic="7894">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="../../enable-linux-kernel-gpg-verification-in-grub-and-or-enable-secure-boot-by-default/7894.html">enable Linux kernel gpg verification in grub and/or enable Secure Boot by default</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Since we are going for <a href="../../enforce-kernel-module-software-signature-verification-module-signing-disallow-kernel-module-loading-by-default/7880.html" class="inline-onebox">allow loading signed kernel modules by default / disallow kernel module loading by default</a>, should we also work towards enable Linux kernel gpg verification in grub and/or enable Secure Boot by default? 
Looks doable in principle. 

KVM: supports both EFI boot and Secure Boot. 
On <a href="../../../../external.html?link=https://blog.heckel.io/2018/08/06/booting-image-files-and-isos-with-kvm-qemu-efi-and-bios/" rel="nofollow noopener">https://blog.heckel.io/2018/08/06/booting-image-files-and-isos-with-kvm-qemu-efi-and-bios/</a> see 2. Booting image files with KVM (EFI) 
The <a href="../../../../external.html?link=https://packages.debian.org/buster/ovmf" rel="nofollow noopener">https://packages.debian.org/buster/ovmf</a> ships an EFI BIOS…
  </blockquote>
</aside>

<aside class="quote no-group" data-post="109" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>As expected, the installed system has no virtual console root access. I find it very unpractical, especially for a host system. Maybe consider reverting back this recent change for the Whonix-Host version?</p>
</blockquote>
</aside>
<p>posted here <a href="../../restrict-root-access/7658/64.html" class="inline-onebox">Restrict root access</a></p>
<aside class="quote no-group" data-post="109" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Currently the live system in ISO mode provides a live-user account with passwordless sudo rights, i.e. it overrides the current disabled root account configuration. Might be a bug or a feature depending on the point of view.</p>
</blockquote>
</aside>
<p>Considered a bug. Superuser hardening is specifically useful for live mode. Even more useful later on when optional non-root boot gets added.</p>
<p>(<a href="../../multiple-boot-modes-for-better-security-persistent-user-live-user-persistent-secureadmin-persistent-superadmin-persistent-recovery-mode/7708.html" class="inline-onebox">multiple boot modes for better security: persistent + root | persistent + noroot | live + root | live + noroot</a>)</p>
<p>Likely package <code>live-config</code> file <code>/lib/live/config/0040-sudo</code> is causing this. Also package <code>live-config</code> is doing a lot other stuff which we need to understand. Or get rid of <code>live-config</code> package. Had a similar issue due to <code>live-config</code> earlier I have written about here.</p>
<aside class="quote quote-modified" data-post="158" data-topic="3894">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="../../whonix-live-mode-amnesia-amnesic-non-persistent-anti-forensics/3894/158.html">Whonix live mode / amnesia / amnesic / non-persistent / anti-forensics</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Package live-config-systemd is causing an issue. live-config-getty-generator fails. Visible in systemd journal. Debug output: 
sudo /lib/systemd/system-generators/live-config-getty-generator
+ set -e
+ SYSTEMD_DIR=
+ . /lib/live/init-config.sh
/lib/systemd/system-generators/live-config-getty-generator: 15: .: Can't open /lib/live/init-config.sh

Installing live-config would fix this issue since it includes this file but it’s not an option since 
grub-live boot with live-config package installed: …
  </blockquote>
</aside>

<p>Can we just leave out the <code>live-config</code> package or what do we rely on it for?</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-19T14:11:25Z' class='post-time'>
                August 19, 2019,  2:11pm
              </time>
              <meta itemprop='dateModified' content='2019-08-19T14:11:25Z'>
          <span itemprop='position'>#112</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks for your feedback.<br>
Will try to address your questions later (I need to test more).<br>
Just wanted to add an important edit: in both Whonix-Install and Whonix-ISO there is a <code>user</code> account that has been created during build (with<code>/home/user/</code>).<br>
This was not the case before as if I remember correctly when building an --iso no user was created to avoid this issue.<br>
Was there any change since May or June regarding this specific issue?</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-19T14:17:31Z' class='post-time'>
                August 19, 2019,  2:17pm
              </time>
              <meta itemprop='dateModified' content='2019-08-19T14:17:31Z'>
          <span itemprop='position'>#113</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="109" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Theming lacks arc-icons (currently using Adwaita icons, not so bad IMHO). Probably normal if not yet implemented in Whonix? Cosmetic issue, not a big deal.</p>
</blockquote>
</aside>
<p>arc-icons not in use due to unavailable from <a href="../../../../external.html?link=http://packages.debian.org/" rel="nofollow noopener">packages.debian.org</a></p>
<p>that is:</p>
<aside class="quote" data-post="58" data-topic="7205">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="../../xfce-theming-a-few-suggestions/7205/58.html">XFCE theming - a few suggestions</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Can we use any other suitable icons / theme / whatsoever available form 
<a href="../../../../external.html?link=http://packages.debian.org/" rel="nofollow noopener">packages.debian.org</a>?
  </blockquote>
</aside>

<p>just now followed up here:</p>
<aside class="quote" data-post="61" data-topic="7205">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="../../xfce-theming-a-few-suggestions/7205/61.html">XFCE theming - a few suggestions</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    We still need to pick the best one from there. 
What about <a href="../../../../external.html?link=https://packages.debian.org/buster/elementary-xfce-icon-theme" rel="nofollow noopener">https://packages.debian.org/buster/elementary-xfce-icon-theme</a>? elementary is a usability and beauty focused distribution. The package seems available Free and unencumbered with whatever (great not great - i never looked into it, just heard positive about it) do. So seems perfect fit.
  </blockquote>
</aside>

        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-19T14:38:11Z' class='post-time'>
                August 19, 2019,  2:38pm
              </time>
              <meta itemprop='dateModified' content='2019-08-19T14:38:11Z'>
          <span itemprop='position'>#114</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="109" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Grub menu also provides a <em>Debian-Live</em> option, although it does not work (results in kernel panic since live packages are removed during the installation part and are not part of the installed system). Grub menu needs to be fixed accordingly in the installed machine (must be somewhere in the Calamares modules). Similarly, the persistent/live icons must be removed from the installed version.</p>
</blockquote>
</aside>
<p>Booting the installed Whonix Host into Live mode would be a great feature. I am using <code>grub-live</code> for a Debian host machine. Should be possible to fix that.</p>
<aside class="quote no-group" data-post="109" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>As we are dealing with a host system (be it ISO or HDD install), it would be nice to have a power-manager plugin on the panel ( <code>xfce4-power-manager</code> ), something expected on a laptop for instance, I think this package does the trick (I must retest it on laptop hardware):</p>
</blockquote>
</aside>
<p>I get that done, created <a href="../../../../external.html?link=https://phabricator.whonix.org/T928" rel="nofollow noopener">https://phabricator.whonix.org/T928</a> for it.</p>
<aside class="quote no-group" data-post="109" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>same thing with pulseaudio plugin (already installed, just needs to be added in the panel tray)</p>
</blockquote>
</aside>
<p>Should be sorted in next git tag. <code>15.0.0.4.0-developers-only</code> (upcoming)<br>
Sorted that in <a href="../../../../external.html?link=https://github.com/Whonix/whonix-xfce-desktop-config/commit/12dad74b906c675f834fa6431a3892e7dc499128" rel="nofollow noopener">https://github.com/Whonix/whonix-xfce-desktop-config/commit/12dad74b906c675f834fa6431a3892e7dc499128</a> for Whonix VMs so śhould also work on Whonix Host since also using package <code>whonix-xfce-desktop-config</code>.</p>
<aside class="quote no-group" data-post="109" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>The Whonix Host should be graphically differentiated from the Whonix-VMs. Maybe simply a different background image/color?</p>
</blockquote>
</aside>
<p>That would be very good. I also want to differentiate Whonix VMs gateway vs workstation as well as differentiate from the host. Technical challenge:</p>
<p>Package package <code>whonix-xfce-desktop-config</code> owns <a href="../../../../external.html?link=https://github.com/Whonix/whonix-xfce-desktop-config/blob/master/etc/skel/.config/xfce4/xfconf/xfce-perchannel-xml/xfce4-panel.xml" rel="nofollow noopener"><code>/etc/skel/.config/xfce4/xfconf/xfce-perchannel-xml/xfce4-panel.xml</code></a>. As per Debian dpkg default one file can only be owned by one pacakge.</p>
<p>I wouldn’t know how to cleanly stack these packages. I.e. how to add yet another package on top that only ships one different config file?</p>
<p>[1] <code>whonix-xfce-workstation-config</code><br>
[2] <code>whonix-xfce-host-config</code></p>
<p>These packages could duplicate that package and then say in <code>debian/control</code> <code>Replaces: whonix-xfce-desktop-config</code>. Lots of code duplication. Not great.</p>
<p>Or <code>whonix-libvirt</code> (or some other Whonix host package) could do <code>config-package-dev</code> <code>displace</code> <code>/etc/skel/.config/xfce4/xfconf/xfce-perchannel-xml/xfce4-panel.xml</code>. Better but still one fully duplicated config file.</p>
<p>Any other way to just change the background image? A command line command that runs one time after first login? Is it possible to change the background image on the command line?</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-19T14:53:03Z' class='post-time'>
                August 19, 2019,  2:53pm
              </time>
              <meta itemprop='dateModified' content='2019-08-19T15:07:41Z'>
          <span itemprop='position'>#115</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-post="113" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<p>Theming lacks arc-icons (currently using Adwaita icons, not so bad IMHO). Probably normal if not yet implemented in Whonix? Cosmetic issue, not a big deal.</p>
</blockquote>
<p>arc-icons not in use due to unavailable from <a href="../../../../external.html?link=http://packages.debian.org/" rel="nofollow noopener">packages.debian.org</a></p>
</blockquote>
</aside>
<p>Ok, understood.</p>
<aside class="quote no-group" data-post="114" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Booting the installed Whonix Host into Live mode would be a great feature. I am using <code>grub-live</code> for a Debian host machine. Should be possible to fix that.</p>
</blockquote>
</aside>
<p>Ok, should be possible, maybe by not removing live-config packages from the install target. Trying now.</p>
<aside class="quote no-group" data-post="114" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Any other way to just change the background image? A command line command that runs one time after first login? Is it possible to change the background image on the command line?</p>
</blockquote>
</aside>
<p>Should be possible, but sounds hackish.</p>
<p>EDIT: if I remember well, Whonix 13 already had different backgrounds and general appearances for Gateway and Workstation. Would it be possible to reproduce this with more or less the same code?</p>
<p>EDIT2: not removing the live-boot packages from the target install allows for a live-boot of the host. See my pull request on <a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt/pull/91" rel="nofollow noopener">github</a>.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-19T15:44:02Z' class='post-time'>
                August 19, 2019,  3:44pm
              </time>
              <meta itemprop='dateModified' content='2019-08-19T16:07:45Z'>
          <span itemprop='position'>#116</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="111" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Considered a bug. Superuser hardening is specifically useful for live mode. Even more useful later on when optional non-root boot gets added.</p>
<p>(<a href="../../multiple-boot-modes-for-better-security-persistent-user-live-user-persistent-secureadmin-persistent-superadmin-persistent-recovery-mode/7708.html">multiple boot modes for better security: persistent + root | persistent + noroot | live + root | live + noroot</a>)</p>
<p>Likely package <code>live-config</code> file <code>/lib/live/config/0040-sudo</code> is causing this. Also package <code>live-config</code> is doing a lot other stuff which we need to understand. Or get rid of <code>live-config</code> package. Had a similar issue due to <code>live-config</code> earlier I have written about here.</p>
</blockquote>
</aside>
<p>It is possible to boot in live-mode without root account by appending <code>live-config.noroot</code> as a boot parameter (although in my test, it only works if I first remove the user <code>user</code> installed during the build and reburn the ISO). The problem is that Calamares needs administrator rights to run by default, unless we change this rule in its polkit settings (<code>/usr/share/polkit-1/actions/com.github.calamares.calamares.policy</code>).</p>
<aside class="quote no-group" data-post="111" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Can we just leave out the <code>live-config</code> package or what do we rely on it for?</p>
</blockquote>
</aside>
<p>My understanding is that it is useful for a lot of configuration files that allow for fine customization such as booting without root privileges. See also <a href="../../../../external.html?link=https://manpages.debian.org/buster/live-config-doc/live-config.7.en.html:" rel="nofollow noopener">https://manpages.debian.org/buster/live-config-doc/live-config.7.en.html:</a></p>
<p><code>live-config contains the components that configure a live system during the boot process (late userspace).</code></p>
<p>It seems at least useful for the ISO version.  I will try to remove it entirely from the RAW file before the ISO step and see how it goes.</p>
<p>EDIT: I don’t think it’s a good idea to remove altogether live-config. Currently, we need it during the ISO stage to create a live-user which is a member of libvirt and kvm groups (<code>live-config.user-default-groups=libvirt,kvm</code>) + we can use it to disable passwordless sudo live-user and root account (see above).</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-20T06:41:00Z' class='post-time'>
                August 20, 2019,  6:41am
              </time>
              <meta itemprop='dateModified' content='2019-08-20T06:41:00Z'>
          <span itemprop='position'>#117</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>onion_knight via Whonix Forum:</p>
<blockquote>
<p>EDIT: if I remember well, Whonix 13 already had different backgrounds and general appearances for Gateway and Workstation. Would it be possible to reproduce this with more or less the same code?</p>
</blockquote>
<p>Whonix 13 was KDE based. KDE supports environment variable<br>
<code>XDG_CONFIG_DIRS</code>. These are stackable ad infinitum.</p>
<p>(<br>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/adrelanos/whonix-gw-kde-desktop-conf/blob/master/etc/X11/Xsession.d/50whonix-gw-kde-desktop-conf" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../../external.html?link=https://github.com/adrelanos/whonix-gw-kde-desktop-conf/blob/master/etc/X11/Xsession.d/50whonix-gw-kde-desktop-conf" target="_blank" rel="nofollow noopener">adrelanos/whonix-gw-kde-desktop-conf/blob/master/etc/X11/Xsession.d/50whonix-gw-kde-desktop-conf</a></h4>
<pre><code class="lang-d/50whonix-gw-kde-desktop-conf">## Copyright (C) 2012 - 2018 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

if [ -z "$XDG_CONFIG_DIRS" ]; then
   XDG_CONFIG_DIRS=/etc/xdg
fi
export XDG_CONFIG_DIRS=/usr/share/whonix-gw-kde-desktop-conf/:$XDG_CONFIG_DIRS
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>
)</p>
<p>XFCE does not support environment variable <code>XDG_CONFIG_DIRS</code> /<br>
configuration folder stacking.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-20T09:16:01Z' class='post-time'>
                August 20, 2019,  9:16am
              </time>
              <meta itemprop='dateModified' content='2019-08-20T09:16:01Z'>
          <span itemprop='position'>#118</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><strong>New issue with virt-manager (both on ISO and install target):</strong></p>
<p><code>Error connecting to graphical console: Error opening Spice console, SpiceClientGTK missing</code></p>
<p>The VM is running, but cannot be viewed with Spice display.</p>
<p>Installing <code>gir1.2-spiceclientgtk-3.0</code> and needed dependencies solves the problem (didn’t have this problem before, was this package dropped in a latest Whonix release?)</p>
<pre><code>apt install --no-install-recommends gir1.2-spiceclientgtk-3.0
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following additional packages will be installed:
  gir1.2-spiceclientglib-2.0 libphodav-2.0-0 libphodav-2.0-common
  libspice-client-glib-2.0-8 libspice-client-gtk-3.0-5 libusbredirhost1
  spice-client-glib-usb-acl-helper
Suggested packages:
  gstreamer1.0-plugins-bad gstreamer1.0-plugins-base gstreamer1.0-plugins-good
  gstreamer1.0-libav
The following NEW packages will be installed:
  gir1.2-spiceclientglib-2.0 gir1.2-spiceclientgtk-3.0 libphodav-2.0-0
  libphodav-2.0-common libspice-client-glib-2.0-8 libspice-client-gtk-3.0-5
  libusbredirhost1 spice-client-glib-usb-acl-helper
0 upgraded, 8 newly installed, 0 to remove and 0 not upgraded.
Need to get 1,559 kB of archives.
After this operation, 2,957 kB of additional disk space will be used.
Do you want to continue? [Y/n]</code></pre>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-20T12:01:17Z' class='post-time'>
                August 20, 2019, 12:01pm
              </time>
              <meta itemprop='dateModified' content='2019-08-20T12:09:44Z'>
          <span itemprop='position'>#119</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>To avoid overlooking  some issues, here is a summary of last two days bugs and fixes:</p>
<p><strong>Summary of bugs report and fixes, Whonix-Host 15.0.0.3.6</strong></p>
<p><strong>A. Already fixed</strong></p>
<p><strong>1. Virtual Machine Manager/KVM</strong></p>
<ul>
<li>Blacklisted llc module: <strong>fixed and merged</strong> (see <a href="../../../../external.html?link=https://github.com/Whonix/security-misc/pull/29" rel="nofollow noopener">https://github.com/Whonix/security-misc/pull/29</a>)</li>
<li>By default, the VMs do no start until the CPU configuration is set to host + <code>Error starting domain: unsupported configuration: host doesn't support paravirtual spinlocks</code> <strong>fixed</strong> (see <a href="../../error-starting-domain-unsupported-configuration-host-doesnt-support-paravirtual-spinlocks/7916/5.html" class="inline-onebox">Error starting domain: unsupported configuration: host doesn't support paravirtual spinlocks</a>)  <strong>but needs merging</strong> (see pull request <a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt/pull/92" rel="nofollow noopener">https://github.com/Whonix/whonix-libvirt/pull/92</a>)</li>
</ul>
<p><strong>3. Whonix-Host install on HDD</strong></p>
<ul>
<li>Grub menu also provides a <em>Debian-Live</em> option, although it does not work -&gt; <strong>fixed and merged</strong> by not removing live-boot packages from the host install in calamares (see pull request <a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt/pull/91" rel="nofollow noopener">https://github.com/Whonix/whonix-libvirt/pull/91</a>)</li>
</ul>
<p><strong>4. Miscellaneous</strong></p>
<ul>
<li>Theming lacks arc-icons (currently using Adwaita icons, not so bad IMHO) -&gt; not an option, so <strong>fixed</strong>
</li>
</ul>
<p><strong>B. still needs work</strong></p>
<p><strong>1. Virtual Machine Manager/KVM</strong></p>
<ul>
<li>New issue with virt-manager (both on ISO and install target):<br>
<code>Error connecting to graphical console: Error opening Spice console, SpiceClientGTK missing</code> -&gt;<br>
<strong>can be fixed</strong> by installing <code>gir1.2-spiceclientgtk-3.0</code> and needed dependencies (<code>apt install --no-install-recommends gir1.2-spiceclientgtk-3.0</code>) (didn’t do a pull request yet as I don’t know exactly where it goes)</li>
</ul>
<p><strong>2. Calamares Installer</strong></p>
<ul>
<li>Needs correct branding -&gt;  <strong>to be done</strong> (see also: <a href="../../whonix-host-calamares-branding-suggestion/7772/3.html">Whonix Host Calamares Branding Suggestion</a>)</li>
<li>Does it work in EFI mode? Needs more testing -&gt; <strong>to be done</strong>
</li>
</ul>
<p><strong>3. Whonix-Host install on HDD</strong></p>
<ul>
<li>at least one of the kernel hardening boot parameters somehow messes with the CPU detection on the host -&gt; <strong>to be done</strong> (needs further testing, see also <a href="../../kernel-hardening/7296/153.html" class="inline-onebox">Kernel Hardening</a>)</li>
<li>the installed system has no virtual console root access. Very unpractical, especially for a host system. Maybe consider reverting back this recent change for the Whonix-Host version? (see also <a href="../../restrict-root-access/7658/64.html" class="inline-onebox">Restrict root access</a>) -&gt; <strong>to be discussed</strong>
</li>
</ul>
<p><strong>4. Miscellaneous</strong></p>
<ul>
<li>power-manager plugin + pulseaudio plugin -&gt; <strong>task open</strong> (<a href="../../../../external.html?link=https://phabricator.whonix.org/T928" rel="nofollow noopener">https://phabricator.whonix.org/T928</a>)</li>
<li>The Whonix Host should be graphically differentiated from the Whonix-VMs. Maybe simply a different background image/color? -&gt; <strong>to be done</strong>, see <a href="114.html" class="inline-onebox">Whonix Desktop Installer with Calamares - field report</a>)</li>
</ul>
<ul>
<li>Somehow a user <code>user</code> was created during the build although it should be avoided at all costs (messes with live-user <code>user</code> config + is being copied over onto the host install) -&gt; <strong>to be verified/fixed</strong> (I am currently rebuilding a whonix-host machine to see if this error still happen. Didn’t do a pull request yet as I don’t know exactly what to change)</li>
</ul>
<ul>
<li>
<p>By default, the VMs do not start because the virtual disks are not set to readonly -&gt; <strong>in discussion</strong> (<a href="../../../../external.html?link=https://phabricator.whonix.org/T914" rel="nofollow noopener">https://phabricator.whonix.org/T914</a>)</p>
</li>
<li>
<p>Currently the live system in ISO mode provides a live-user account with passwordless sudo rights -&gt; <strong>can be fixed</strong> by adding <code>live-config.noroot</code> to live ISO boot parameters (but then we need to change calamares polkit to allow its execution by sudoless user)</p>
</li>
</ul>
<p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a> if you want to open new tasks on phabricator and assign me some, please be aware that I have just recreated an account (previous credentials lost): onion_knight2, waiting for your approval <img src="../../../images/emoji/twitter/winkc164.png?v=9" title=":wink:" class="emoji" alt=":wink:"></p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-20T14:16:11Z' class='post-time'>
                August 20, 2019,  2:16pm
              </time>
              <meta itemprop='dateModified' content='2019-08-20T14:16:11Z'>
          <span itemprop='position'>#120</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Regarding the issue</p>
<ul>
<li>Somehow a user <code>user</code> was created during the build although it should be avoided at all costs (messes with live-user <code>user</code> config + is being copied over onto the host install) -&gt; <strong>to be verified/fixed</strong> (I am currently rebuilding a whonix-host machine to see if this error still happen. Didn’t do a pull request yet as I don’t know exactly what to change)</li>
</ul>
<p>After rebuilding a Whonix-Host-15.0.0.3.6, I found the following: while testing the <strong>RAW</strong> file (not the ISO)</p>
<ul>
<li>no home folder for user <code>user</code> was created during the build</li>
<li>
<strong>BUT the file<code>/etc/passwd</code> contains a valid entry for user <code>user</code></strong>, whose /home directory is created during first boot in persistent mode (along with Desktop, Downloads and Pictures directories, I guess copied from <code>/etc/skel</code>)<br>
<code>user:x:1000:1000::/home/user:/bin/bash</code>
</li>
<li>If I remove this entry from the /etc/passwd file, no /home/user directory is created, and instead of the graphical session, the lightdm login page is loaded (expected behavior)</li>
<li>guess what, default user <code>user</code> password is… changeme -&gt; inherited from Whonix</li>
</ul>
<p>I guess all this is is faulty behavior and not on purpose?</p>
<p>Also, shouldn’t we remove the line autologin-user=user from <code>/etc/lightdm/lightdm.conf</code> (not as problematic, but still).</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-21T05:44:02Z' class='post-time'>
                August 21, 2019,  5:44am
              </time>
              <meta itemprop='dateModified' content='2019-08-21T05:44:02Z'>
          <span itemprop='position'>#121</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>More answers soon.</p>
<aside class="quote no-group" data-post="119" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a> if you want to open new tasks on phabricator and assign me some, please be aware that I have just recreated an account (previous credentials lost): onion_knight2, waiting for your approval <img src="../../../images/emoji/twitter/winkc164.png?v=9" title=":wink:" class="emoji" alt=":wink:"></p>
</blockquote>
</aside>
<p>Account confirmed. As for assignment, I don’t know which tasks could be assigned which not. Please pick whatever you like to work on and then self-assign (if that is possible) or just leave a comment that you started working on it on the ticket.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-21T16:18:07Z' class='post-time'>
                August 21, 2019,  4:18pm
              </time>
              <meta itemprop='dateModified' content='2019-08-21T16:18:07Z'>
          <span itemprop='position'>#122</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="118" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>apt install --no-install-recommends gir1.2-spiceclientgtk-3.0</p>
</blockquote>
</aside>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt/commit/978da522e9cdc16115459ff569773c4906d3a761" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-libvirt</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt/commit/978da522e9cdc16115459ff569773c4906d3a761" target="_blank" rel="nofollow noopener">add Depends: gir1.2-spiceclientgtk-3.0</a>
</h4>

  <pre class="message" style="white-space: normal;">Thanks to @onions-knight for the bug report!
https://forums.whonix.org/t/whonix-desktop-installer-with-calamares-field-report/7350/118</pre>

<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt/commit/978da522e9cdc16115459ff569773c4906d3a761" target="_blank" rel="nofollow noopener">04:15PM - 21 Aug 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>1 additions</strong>
  and <strong>1 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Also added to KVM wiki page:</p>
<p><a href="../../../../external.html?link=https://www.whonix.org/w/index.php?title=KVM&amp;type=revision&amp;diff=50396&amp;oldid=50386" rel="nofollow noopener">https://www.whonix.org/w/index.php?title=KVM&amp;type=revision&amp;diff=50396&amp;oldid=50386</a></p>
<aside class="quote no-group" data-post="118" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>(didn’t have this problem before, was this package dropped in a latest Whonix release?)</p>
</blockquote>
</aside>
<p>Not that I remember and nothing easily found in git history.</p>
<p>//cc <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/hulahoop">@HulaHoop</a></p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-21T16:26:48Z' class='post-time'>
                August 21, 2019,  4:26pm
              </time>
              <meta itemprop='dateModified' content='2019-08-21T16:26:48Z'>
          <span itemprop='position'>#123</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="120" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Also, shouldn’t we remove the line autologin-user=user from <code>/etc/lightdm/lightdm.conf</code> (not as problematic, but still).</p>
</blockquote>
</aside>
<p>Done.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/whonix-xfce-desktop-config/commit/a02502a45c754d18856e984bc0d4547cbe759a9a" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-xfce-desktop-config</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/whonix-xfce-desktop-config/commit/a02502a45c754d18856e984bc0d4547cbe759a9a" target="_blank" rel="nofollow noopener">rename /etc/lightdm/lightdm.conf.d/whonix.conf to /etc/lightdm/lightdm.conf.d/whonix-autologin.conf and</a>
</h4>

  <pre class="message" style="white-space: normal;">remove /etc/lightdm/lightdm.conf.d/whonix.conf
to make it a single purpose file which can be easily config-package-dev `displace`ed</pre>

<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/whonix-xfce-desktop-config/commit/a02502a45c754d18856e984bc0d4547cbe759a9a" target="_blank" rel="nofollow noopener">04:24PM - 21 Aug 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>2 files</strong>
  with <strong>1 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt/commit/e3395ea7b63d16e2d7c42eea51f002f0b3b425ad" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-libvirt</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt/commit/e3395ea7b63d16e2d7c42eea51f002f0b3b425ad" target="_blank" rel="nofollow noopener">config-package-dev hide /etc/lightdm/lightdm.conf.d/whonix-autologin.conf</a>
</h4>

  <pre class="message" style="white-space: normal;">to disable autologin on Whonix-Host
Thanks to @onion-knight for the suggestion!
https://forums.whonix.org/t/whonix-desktop-installer-with-calamares-field-report/7350/120</pre>

<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/whonix-libvirt/commit/e3395ea7b63d16e2d7c42eea51f002f0b3b425ad" target="_blank" rel="nofollow noopener">04:25PM - 21 Aug 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>4 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-21T16:40:36Z' class='post-time'>
                August 21, 2019,  4:40pm
              </time>
              <meta itemprop='dateModified' content='2019-08-21T16:40:36Z'>
          <span itemprop='position'>#124</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="120" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Regarding the issue</p>
<ul>
<li>Somehow a user <code>user</code> was created during the build although it should be avoided at all costs (messes with live-user <code>user</code> config + is being copied over onto the host install) -&gt; <strong>to be verified/fixed</strong> (I am currently rebuilding a whonix-host machine to see if this error still happen. Didn’t do a pull request yet as I don’t know exactly what to change)</li>
</ul>
<p>After rebuilding a Whonix-Host-15.0.0.3.6, I found the following: while testing the <strong>RAW</strong> file (not the ISO)</p>
<ul>
<li>no home folder for user <code>user</code> was created during the build</li>
<li>
<strong>BUT the file <code>/etc/passwd</code> contains a valid entry for user <code>user</code></strong> , whose /home directory is created during first boot in persistent mode (along with Desktop, Downloads and Pictures directories, I guess copied from <code>/etc/skel</code> )<br>
<code>user:x:1000:1000::/home/user:/bin/bash</code>
</li>
<li>If I remove this entry from the /etc/passwd file, no /home/user directory is created, and instead of the graphical session, the lightdm login page is loaded (expected behavior)</li>
<li>guess what, default user <code>user</code> password is… changeme -&gt; inherited from Whonix</li>
</ul>
<p>I guess all this is is faulty behavior and not on purpose?</p>
</blockquote>
</aside>
<p>Related source files:</p>
<ul>
<li><a href="../../../../external.html?link=https://github.com/Whonix/anon-base-files/blob/master/debian/anon-base-files.postinst" rel="nofollow noopener">https://github.com/Whonix/anon-base-files/blob/master/debian/anon-base-files.postinst</a></li>
<li><a href="../../../../external.html?link=https://github.com/Whonix/security-misc/blob/master/usr/share/pam-configs/mkhomedir-security-misc" rel="nofollow noopener">https://github.com/Whonix/security-misc/blob/master/usr/share/pam-configs/mkhomedir-security-misc</a></li>
</ul>
<p>So package <code>anon-base-files</code> maintainer script <code>debian/anon-base-files.postinst</code> currently creates user <code>user</code> but without home folder.</p>
<p>Home folder is created on login using PAM mkhomedir.</p>
<p>That is the current implementation which fixes <a href="../../bug-not-all-files-form-etc-skel-are-copied-to-home-user/6778.html" class="inline-onebox">bug: not all files form /etc/skel are copied to /home/user</a>.</p>
<p>What you describe sounds very much like the current implementation.</p>
<p>We could add a feature to skip creation of user <code>user</code> in <a href="../../../../external.html?link=https://github.com/Whonix/anon-base-files/blob/master/debian/anon-base-files.postinst" rel="nofollow noopener">https://github.com/Whonix/anon-base-files/blob/master/debian/anon-base-files.postinst</a>.</p>
<p>Package <code>live-config</code> file <code>/lib/live/config/0030-user-setup</code> seems to be responsible for user creation? That script seems to have a lot parameters / options we can consider. It also does a lot stuff we need to understand. Can we consider to skip <code>/lib/live/config/0030-user-setup</code> and leave that to the existing implementation for greater simplicity and consistency (user <code>user</code> created everywhere the same as much as possible)? Looks like (by reading <code>/lib/live/config/0030-user-setup</code>) by setting <code>LIVE_USERNAME=user</code> we might be able to skip <code>/lib/live/config/0030-user-setup</code>. Untested. Could you try please?</p>
<p>Generally, should we use package <code>live-config</code> folder <code>/lib/live/config/</code> as much or little as possible? We at least need an overview what <code>/lib/live/config/</code> does to check if it compatible with what we want.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../whonix-host-operating-system/3931/92.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../whonix-host-operating-system/3931/92.html'>
                      <span itemprop='name'>Whonix host operating system</span>
                    </a>
                    <meta itemprop='position' content='4'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-22T03:03:28Z' class='post-time'>
                August 22, 2019,  3:03am
              </time>
              <meta itemprop='dateModified' content='2019-08-22T03:03:28Z'>
          <span itemprop='position'>#125</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="122" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Not that I remember and nothing easily found in git history.</p>
<p>//cc <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/hulahoop">@HulaHoop</a></p>
</blockquote>
</aside>
<p>Not that I know of. spiceclientgtk used to be pulled automatically as a dep of the packages listed on the KVM wiki page. Could have been changed with Buster (but I had no way to know since I did an in place upgrade of an already installed system).</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-22T08:41:08Z' class='post-time'>
                August 22, 2019,  8:41am
              </time>
              <meta itemprop='dateModified' content='2019-08-22T08:41:08Z'>
          <span itemprop='position'>#126</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="124" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>So package <code>anon-base-files</code> maintainer script <code>debian/anon-base-files.postinst</code> currently creates user <code>user</code> but without home folder.</p>
<p>Home folder is created on login using PAM mkhomedir.</p>
<p>That is the current implementation which fixes <a href="../../bug-not-all-files-form-etc-skel-are-copied-to-home-user/6778.html">bug: not all files form /etc/skel are copied to /home/user </a>.</p>
<p>What you describe sounds very much like the current implementation.</p>
</blockquote>
</aside>
<p>OK, makes sense.</p>
<aside class="quote no-group" data-post="124" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>We could add a feature to skip creation of user <code>user</code> in <a href="../../../../external.html?link=https://github.com/Whonix/anon-base-files/blob/master/debian/anon-base-files.postinst" rel="nofollow noopener">https://github.com/Whonix/anon-base-files/blob/master/debian/anon-base-files.postinst</a>.</p>
</blockquote>
</aside>
<p>If building Whonix-Host? Yes.</p>
<aside class="quote no-group" data-post="124" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Package <code>live-config</code> file <code>/lib/live/config/0030-user-setup</code> seems to be responsible for user creation? That script seems to have a lot parameters / options we can consider. It also does a lot stuff we need to understand. Can we consider to skip <code>/lib/live/config/0030-user-setup</code> and leave that to the existing implementation for greater simplicity and consistency (user <code>user</code> created everywhere the same as much as possible)?</p>
</blockquote>
</aside>
<p>The existing implementation causes too many issues IMHO. What for instance if I want to install Whonix-Host with user <code>user</code>? It will conflict with the existing user + files might be copied over to the install target,  unclean (<code>/etc/passwd</code>, <code>/etc/group</code>, maybe other files even?).</p>
<p>To allow a clean environment for Whonix-Host ISO+installer I think we need to completely skip the user creation part during the build.</p>
<aside class="quote no-group" data-post="124" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Looks like (by reading <code>/lib/live/config/0030-user-setup</code> ) by setting <code>LIVE_USERNAME=user</code> we might be able to skip <code>/lib/live/config/0030-user-setup</code> . Untested. Could you try please?</p>
</blockquote>
</aside>
<p>From <code>man live-config</code>:</p>
<pre><code>   live-config.username=USERNAME | username=USERNAME
       Allows one to set the username that gets created for autologin. The
       default is 'user'.
</code></pre>
<p>-&gt; by default, it already creates a user <code>user</code>. I don’t see the benefits of adding this parameter ourselves?</p>
<aside class="quote no-group" data-post="124" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Generally, should we use package <code>live-config</code> folder <code>/lib/live/config/</code> as much or little as possible? We at least need an overview what <code>/lib/live/config/</code> does to check if it compatible with what we want.</p>
</blockquote>
</aside>
<p>Two solutions:</p>
<ol>
<li>
<p>Explicitly exclude unwanted components as boot parameters: l<code>ive-config.nocomponents=COMPONENT1,COMPONENT2.</code>… (from <code>man live-config</code>) (default behavior is loading all components in <code>/lib/live/config</code>)</p>
</li>
<li>
<p>"Shiping a locally modified live-config package or using dpkg-divert: (from<code>man live-config</code>):</p>
<pre><code>Removing existing config components
    It is not really possible to remove components itself in a sane way yet
    without requiring either to ship a locally modified live-config package
    or using dpkg-divert. However, the same can be  achieved  by  disabling
    the  respective  components through the live-config.nocomponents mecha‐
    nism, see above. To avoid to always need specifying disabled components
    through  the  boot  parameter, a configuration file should be used, see
    above.</code></pre>
</li>
</ol>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-22T08:56:34Z' class='post-time'>
                August 22, 2019,  8:56am
              </time>
              <meta itemprop='dateModified' content='2019-08-22T08:56:34Z'>
          <span itemprop='position'>#127</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a><br>
What git version should I chose if I want to test the newest code with latest changes?</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="../7350af4d.html?page=5">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../7350235c.html?page=7">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
