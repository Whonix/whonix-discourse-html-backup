<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Whonix Desktop Installer with Calamares - field report - Development - Whonix Forum</title>
    <meta name="description" content="So after a few days playing with Calamares and my “Whonix Desktop” VM and ISO files, I thought it would be time to report back my experience. 
See also 


For the discussion related to the Whonix Host/Desktop project. 
I&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="7350fdb0.html?page=4" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Whonix Desktop Installer with Calamares - field report&#39;" href="7350.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5564981a244c37b36b7c1610924d97da327c5b88.png" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5564981a244c37b36b7c1610924d97da327c5b88.png" />
<meta property="og:url" content="https://forums.whonix.org/t/whonix-desktop-installer-with-calamares-field-report/7350?page=4" />
<meta name="twitter:url" content="https://forums.whonix.org/t/whonix-desktop-installer-with-calamares-field-report/7350?page=4" />
<meta property="og:title" content="Whonix Desktop Installer with Calamares - field report" />
<meta name="twitter:title" content="Whonix Desktop Installer with Calamares - field report" />
<meta property="og:description" content="OK, I rebuilt sudo -E /home/user/Whonix/whonix_build --build --redistribute --target iso --flavor whonix-host-xfce --freedom false using git branch 15.0.0.2.7-developers-only and I am glad to report that it is working now, provided the following corrections:    File /etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml.whonix breaks XFCE4, needs to be corrected (in the meantime I just did   mv /etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml.dpkg-new /etc/xdg/xfce4/xfconf/xfce-p..." />
<meta name="twitter:description" content="OK, I rebuilt sudo -E /home/user/Whonix/whonix_build --build --redistribute --target iso --flavor whonix-host-xfce --freedom false using git branch 15.0.0.2.7-developers-only and I am glad to report that it is working now, provided the following corrections:    File /etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml.whonix breaks XFCE4, needs to be corrected (in the meantime I just did   mv /etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml.dpkg-new /etc/xdg/xfce4/xfconf/xfce-p..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="65 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="113 ❤" />
<meta property="article:published_time" content="2019-05-15T13:54:14+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="73509ba9.html?page=3">
        <link rel="next" href="7350af4d.html?page=5">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="7350.html">Whonix Desktop Installer with Calamares - field report</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">

            <link itemprop="image" href="../../uploads/default/original/2X/d/ddbb73b5536187a316ba5025da296db5fbb1e6a7.png">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-15T13:54:14Z' class='post-time'>
                May 15, 2019,  1:54pm
              </time>
              <meta itemprop='dateModified' content='2019-05-15T14:05:05Z'>
          <span itemprop='position'>#61</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>OK, I rebuilt <code>sudo -E /home/user/Whonix/whonix_build --build --redistribute --target iso --flavor whonix-host-xfce --freedom false</code> using <code>git branch 15.0.0.2.7-developers-only</code> and <strong>I am glad to report that it is working now, provided the following corrections:</strong></p>
<ul>
<li>
<p>File <code>/etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml.whonix</code> breaks XFCE4, needs to be corrected (in the meantime I just did   <code>mv /etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml.dpkg-new /etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml</code>)</p>
</li>
<li>
<p>Package <code>user-setup</code> needs to be installed in the master whonix-host-xfce VM otherwise live-boot will fail to create a live user</p>
</li>
<li>
<p>Package <code>squashfs-tools</code> needs to be installed in the master whonix-host-xfce VM otherwise Calamares will fail to install (it needs it to unsquashfs the filesystem.squashfs file into the target)</p>
</li>
<li>
<p>Package <code>live-config</code> needs to be installed in the master whonix-host-xfce VM otherwise live user will not be created in live-boot mode (it may already be the case, just a reminder)</p>
</li>
</ul>
<p><strong>Furthermore, the following bugs/corrections need to be addressed (and probably more to come):</strong></p>
<ul>
<li>
<p>Theming is completely broken. Live user starts with a default environment, while root user and newly installed user in the target have broken panel launchers (see screenshots below). Probably related to missing config in <code>/etc/skel</code></p>
</li>
<li>
<p>Live user by default still has passwordless root rights. It seems it can be easily corrected by creating /etc/sudoers.d/live with right syntax and permissions, as described in <code>live-config</code> script <code>/lib/live/config/0040-sudo</code>:</p>
<p>Config ()<br>
{<br>
# Skip sudo configuration if username is root<br>
case “${LIVE_USERNAME}” in<br>
root)<br>
exit 0<br>
;;<br>
esac</p>
<pre><code>  # Checking if package is already configured differently
  if grep -qs "^${LIVE_USERNAME}" /etc/sudoers.d/live
  then
  	exit 0
  fi

  echo "${LIVE_USERNAME} ALL=(ALL) NOPASSWD: ALL" &gt;&gt; /etc/sudoers.d/live
  chmod 0440 /etc/sudoers.d/live
</code></pre>
</li>
<li>
<p>Grub boot menu of install target still has the same parameters of default Whonix-Host grub boot menu, i.e. normal + Live Boot. The live boot option line should be suppressed since the install target does not have live-boot packages anymore (suppressed during install). Furthermore, Debian/GNU Linux should be replaced by Whonix/GNU Linux</p>
</li>
<li>
<p>Some branding work to be done on the default debian Calamares installer. Very easy (working in progress, will post suggestions soon).</p>
</li>
<li>
<p>Still having problems with getting the clock right both on the ISO and install target.</p>
</li>
<li>
<p>The master Whonix-XFCE VM has no apt sources other than whonix. Is it on purpose?</p>
</li>
</ul>
<p>Some screenshots:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../uploads/default/original/2X/d/ddbb73b5536187a316ba5025da296db5fbb1e6a7.png" data-download-href="//forums.whonix.org/uploads/default/ddbb73b5536187a316ba5025da296db5fbb1e6a7" title="Screenshot_2019-05-15_15-59-30.png"><img src="../../uploads/default/optimized/2X/d/ddbb73b5536187a316ba5025da296db5fbb1e6a7_2_668x500.png" alt="Screenshot_2019-05-15_15-59-30" width="668" height="500" srcset="//forums.whonix.org/uploads/default/optimized/2X/d/ddbb73b5536187a316ba5025da296db5fbb1e6a7_2_668x500.png, //forums.whonix.org/uploads/default/optimized/2X/d/ddbb73b5536187a316ba5025da296db5fbb1e6a7_2_1002x750.png 1.5x, //forums.whonix.org/uploads/default/original/2X/d/ddbb73b5536187a316ba5025da296db5fbb1e6a7.png 2x" data-small-upload="../../uploads/default/optimized/2X/d/ddbb73b5536187a316ba5025da296db5fbb1e6a7_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot_2019-05-15_15-59-30.png</span><span class="informations">1023×765 269 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div><br>
<em>booting the ISO with Debian Live user</em></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../uploads/default/original/2X/f/f5a38e9fff971283e225cc79261a5d1f589faa85.png" data-download-href="//forums.whonix.org/uploads/default/f5a38e9fff971283e225cc79261a5d1f589faa85" title="Screenshot_2019-05-15_16-00-03.png"><img src="../../uploads/default/optimized/2X/f/f5a38e9fff971283e225cc79261a5d1f589faa85_2_669x500.png" alt="Screenshot_2019-05-15_16-00-03" width="669" height="500" srcset="//forums.whonix.org/uploads/default/optimized/2X/f/f5a38e9fff971283e225cc79261a5d1f589faa85_2_669x500.png, //forums.whonix.org/uploads/default/optimized/2X/f/f5a38e9fff971283e225cc79261a5d1f589faa85_2_1003x750.png 1.5x, //forums.whonix.org/uploads/default/original/2X/f/f5a38e9fff971283e225cc79261a5d1f589faa85.png 2x" data-small-upload="../../uploads/default/optimized/2X/f/f5a38e9fff971283e225cc79261a5d1f589faa85_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot_2019-05-15_16-00-03.png</span><span class="informations">1021×762 258 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p><em>Booting the ISO with root user</em></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../uploads/default/original/2X/e/ee4dd55616ea729accfc610128dee1602196216b.png" data-download-href="//forums.whonix.org/uploads/default/ee4dd55616ea729accfc610128dee1602196216b" title="Screenshot_2019-05-15_16-00-44.png"><img src="../../uploads/default/original/2X/e/ee4dd55616ea729accfc610128dee1602196216b.png" alt="Screenshot_2019-05-15_16-00-44" width="690" height="461" data-small-upload="../../uploads/default/optimized/2X/e/ee4dd55616ea729accfc610128dee1602196216b_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot_2019-05-15_16-00-44.png</span><span class="informations">730×488 2.76 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div><br>
<em>GRUB menu after install</em></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../uploads/default/original/2X/2/26f54b43641c0d63b86bb4e3d97b334667a3ee63.png" data-download-href="//forums.whonix.org/uploads/default/26f54b43641c0d63b86bb4e3d97b334667a3ee63" title="Screenshot_2019-05-15_16-01-31.png"><img src="../../uploads/default/optimized/2X/2/26f54b43641c0d63b86bb4e3d97b334667a3ee63_2_671x500.png" alt="Screenshot_2019-05-15_16-01-31" width="671" height="500" srcset="//forums.whonix.org/uploads/default/optimized/2X/2/26f54b43641c0d63b86bb4e3d97b334667a3ee63_2_671x500.png, //forums.whonix.org/uploads/default/optimized/2X/2/26f54b43641c0d63b86bb4e3d97b334667a3ee63_2_1006x750.png 1.5x, //forums.whonix.org/uploads/default/original/2X/2/26f54b43641c0d63b86bb4e3d97b334667a3ee63.png 2x" data-small-upload="../../uploads/default/optimized/2X/2/26f54b43641c0d63b86bb4e3d97b334667a3ee63_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot_2019-05-15_16-01-31.png</span><span class="informations">1027×765 257 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div><br>
<em>First boot into the newly installed target. Theming needs fixing</em></p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-16T09:23:00Z' class='post-time'>
                May 16, 2019,  9:23am
              </time>
              <meta itemprop='dateModified' content='2019-05-16T09:23:00Z'>
          <span itemprop='position'>#62</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>chroot changing of permissions should now be fixed but untested in<br>
actual build.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-16T09:38:00Z' class='post-time'>
                May 16, 2019,  9:38am
              </time>
              <meta itemprop='dateModified' content='2019-05-16T09:38:00Z'>
          <span itemprop='position'>#63</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>onion_knight via Whonix Forum:</p>
<blockquote>
<p>Build complete.</p>
</blockquote>
<p>Great!</p>
<blockquote>
<p>Problems:</p>
<ol>
<li>No live user is created. I think this due to the package <code>user-setup</code> not being installed, from <code>cat /lib/live/config/0030-user-setup</code> :</li>
</ol>
</blockquote>
<p>added in git master</p>
<blockquote>
<p>Debugging this is long and very frustrating.</p>
</blockquote>
<p>Would it help to debug this using <code>--target qcow2</code> (or <code>--target raw</code>)?<br>
Then only that would be created, and no ISO. That might make starting<br>
the build in a VM more convenient? (These --target’s are implemented and<br>
might already build as is.)</p>
<p>Any other suggestions to ease debugging? I am all for making debugging<br>
as simple as possible.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-16T09:46:00Z' class='post-time'>
                May 16, 2019,  9:46am
              </time>
              <meta itemprop='dateModified' content='2019-05-16T09:46:00Z'>
          <span itemprop='position'>#64</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>onion_knight via Whonix Forum:</p>
<blockquote>
<p>I did another build of normal hardened raw debian to compare and try to understand what went wrong. ( version: <code>15.0.0.2.7-developers-only</code>):</p>
<p><code>sudo ./whonix_build --flavor hardened-debian-xfce --target raw --build</code></p>
<p>Result: I have the same exact error…</p>
<p>Also, I noticed that the user <code>user</code> is also inexistent on the <code>--target raw build</code> (no iso). Isn’t he supposed to be skipped only in the iso build?</p>
</blockquote>
<p>Currently user “user” creation is an open question for Whonix host and<br>
hardened debian builds. It’s not created in either. Also target raw,<br>
qcow2 or iso, all currently does not create user “user” by any packages<br>
by Whonix. Let me know if you have suggestion show to implement this. I<br>
was considering to add a systemd unit file that creates user “user” at<br>
first - perhaps persistent-only (?) - boot. What do you think?</p>
<p>Another inconsistency (during debugging)… build-step<br>
1700_install-packages currently uses:</p>
<pre><code class="lang-auto">   ## Weak recommended packages so calamares can remove them.
   if [ "$WHONIX_BUILD_ISO" = "true" ]; then
      pkg-install-maybe calamares
      pkg-install-maybe calamares-settings-debian
      pkg-install-maybe live-config
      pkg-install-maybe rsync
      pkg-install-maybe user-setup
   fi
</code></pre>
<p>I.e. it installs these packages only when using <code>--target iso</code>. I’ve<br>
changed this in git master to</p>
<pre><code>if [ "$WHONIX_BUILD_TYPE" = "whonix-host" ]; then
</code></pre>
<p>I.e. this will work for any --flavor whonix-host…</p>
<p>(Not implemented yet for hardened debian.)</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Algernon'><span itemprop='name'>Algernon</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-16T10:57:30Z' class='post-time'>
                May 16, 2019, 10:57am
              </time>
              <meta itemprop='dateModified' content='2019-05-16T10:57:30Z'>
          <span itemprop='position'>#65</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="61" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Grub boot menu of install target still has the same parameters of default Whonix-Host grub boot menu, i.e. normal + Live Boot. The live boot option line should be suppressed since the install target does not have live-boot packages anymore (suppressed during install)</p>
</blockquote>
</aside>
<p>Alternatively install the required packages or just don’t remove them so you can also run the host live.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-16T10:55:00Z' class='post-time'>
                May 16, 2019, 10:55am
              </time>
              <meta itemprop='dateModified' content='2019-05-16T10:55:00Z'>
          <span itemprop='position'>#66</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>(Stuff not mentioned: noticed, but not addressed yet.)</p>
<p>Would it help for debugging if VM files in ~/whonix_binary folder were<br>
non-versioned? So greater Whonix host version than VM versions could be<br>
used to build without need to adjust version number or Whonix version<br>
variable manually?</p>
<p>onion_knight via Whonix Forum:</p>
<blockquote>
<ul>
<li>File <code>/etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml.whonix</code> breaks XFCE4, needs to be corrected (in the meantime I just did   <code>mv /etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml.dpkg-new /etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml</code>)</li>
</ul>
</blockquote>
<p>That should also break regular Whonix-(Gateway|Workstation) XFCE VM<br>
builds too? Move to /etc/xdg/xfce4/ folder was just added recently and<br>
untested.</p>
<pre><code class="lang-auto">ls -la /etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml
lrwxrwxrwx 1 root root 24 May 16 10:50
/etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml -&gt;
xfce4-session.xml.whonix
</code></pre>
<p>Maybe symlinks are unsupported by XFCE?</p>
<pre><code class="lang-auto">ls -la /etc/xdg/xfce4/xfconf/xfce-perchannel-xml/
total 44
drwxr-xr-x 2 root root 4096 May 16 10:50 .
drwxr-xr-x 3 root root 4096 Nov 17 05:17 ..
-rw-r--r-- 1 root root 1024 May 13 06:03 xfce4-desktop.xml
-rw-r--r-- 1 root root 5961 May  6  2015 xfce4-keyboard-shortcuts.xml
-rw-r--r-- 1 root root 2940 May 13 06:03 xfce4-panel.xml
lrwxrwxrwx 1 root root   24 May 16 10:50 xfce4-session.xml -&gt;
xfce4-session.xml.whonix
-rw-r--r-- 1 root root  211 May 13 06:03 xfce4-session.xml.whonix
-rw-r--r-- 1 root root 1551 Oct 21  2017 xfce4-session.xml.whonix-orig
-rw-r--r-- 1 root root  246 May 13 06:03 xfwm4.xml
lrwxrwxrwx 1 root root   20 May 16 10:50 xsettings.xml -&gt;
xsettings.xml.whonix
-rw-r--r-- 1 root root  316 May 13 06:03 xsettings.xml.whonix
-rw-r--r-- 1 root root 2610 Jul  9  2018 xsettings.xml.whonix-orig
</code></pre>
<blockquote>
<ul>
<li>Package <code>user-setup</code> needs to be installed in the master whonix-host-xfce VM otherwise live-boot will fail to create a live user</li>
</ul>
</blockquote>
<p>Done in git master.</p>
<blockquote>
<ul>
<li>Package <code>squashfs-tools</code> needs to be installed in the master whonix-host-xfce VM otherwise Calamares will fail to install (it needs it to unsquashfs the filesystem.squashfs file into the target)</li>
</ul>
</blockquote>
<p>Done in git master.</p>
<blockquote>
<ul>
<li>Package <code>live-config</code> needs to be installed in the master whonix-host-xfce VM otherwise live user will not be created in live-boot mode (it may already be the case, just a reminder)</li>
</ul>
</blockquote>
<p>Wondering why you added “VM” here?</p>
<p>As per<br>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/1700_install-packages#L316-L322" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/1700_install-packages#L316-L322" target="_blank" rel="nofollow noopener">Whonix/Whonix/blob/master/build-steps.d/1700_install-packages#L316-L322</a></h4>
<pre class="onebox"><code class="lang-d/1700_install-packages"><ol class="start lines" start="316" style="counter-reset: li-counter 315 ;">
<li>if [ "$WHONIX_BUILD_TYPE" = "whonix-host" ]; then</li>
<li>   pkg-install-maybe calamares</li>
<li>   pkg-install-maybe calamares-settings-debian</li>
<li>   pkg-install-maybe live-config</li>
<li>   pkg-install-maybe rsync</li>
<li>   pkg-install-maybe user-setup</li>
<li>   pkg-install-maybe squashfs-tools</li>
</ol></code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>
this is the list of packages that now gets installed for Whonix host<br>
flavors as per git master.</p>
<p>calamares<br>
calamares-settings-debian<br>
live-config<br>
rsync<br>
user-setup<br>
squashfs-tools</p>
<blockquote>
<ul>
<li>Grub boot menu of install target still has the same parameters of default Whonix-Host grub boot menu, i.e. normal + Live Boot. The live boot option line should be suppressed since the install target does not have live-boot packages anymore (suppressed during install). Furthermore, Debian/GNU Linux should be replaced by Whonix/GNU Linux</li>
</ul>
</blockquote>
<p>This is because package <code>whonix-base-files</code> is not installed on Whonix<br>
host (yet) which ships <code>/etc/default/grub.d/30_whonix.cfg</code> (because that<br>
package would create user <code>user</code>) during installation. Once user “user”<br>
creation is sorted, we probably want to install that package anyhow?</p>
<p>All fixed mentioned so far are untested and included in<br>
<code>15.0.0.2.8-developers-only</code>.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-16T12:41:15Z' class='post-time'>
                May 16, 2019, 12:41pm
              </time>
              <meta itemprop='dateModified' content='2019-05-16T12:41:15Z'>
          <span itemprop='position'>#67</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="63" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Would it help to debug this using <code>--target qcow2</code> (or <code>--target raw</code> )?<br>
Then only that would be created, and no ISO. That might make starting<br>
the build in a VM more convenient? (These --target’s are implemented and<br>
might already build as is.)</p>
<p>Any other suggestions to ease debugging? I am all for making debugging<br>
as simple as possible.</p>
</blockquote>
</aside>
<p>This is what I do: I test everything in a (copied) version of the raw file that I boot in KVM. I test stuff in persistent/live-mode and one things seem clean, I make the needed adjustments in the master raw and then only the ISO file. Remastering the ISO file each time would be very long. This error was very difficult to debug because it was very generic, and can be caused by a ton of different things. Eventually, I just did a <code>diff</code> between all files installed in the previous hardened version and in the whonix-host to see what changed…</p>
<aside class="quote no-group" data-post="64" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Currently user “user” creation is an open question for Whonix host and<br>
hardened debian builds. It’s not created in either. Also target raw,<br>
qcow2 or iso, all currently does not create user “user” by any packages<br>
by Whonix. Let me know if you have suggestion show to implement this. I<br>
was considering to add a systemd unit file that creates user “user” at<br>
first - perhaps persistent-only (?) - boot. What do you think?</p>
</blockquote>
</aside>
<p>If we want a hardened-debian VM, I think user should be created. If we want an live ISO-installer, then no. So <code>--flavor whonix-host</code> should trigger the skipping of user creation, while all other flavours should create it as was the case before (don’t know if clear enough - easy to do?).</p>
<aside class="quote no-group" data-post="65" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/a183cd/40.png" class="avatar"> Algernon:</div>
<blockquote>
<p>Alternatively install the required packages or just don’t remove them so you can also run the host live.</p>
</blockquote>
</aside>
<p>I read somewhere that they have to be deleted on debian during the install otherwise the install would not be bootable… Obviously needs some more testing/research.</p>
<aside class="quote no-group" data-post="66" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>That should also break regular Whonix-(Gateway|Workstation) XFCE VM<br>
builds too? Move to /etc/xdg/xfce4/ folder was just added recently and<br>
untested.</p>
<pre><code class="lang-auto">ls -la /etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml
lrwxrwxrwx 1 root root 24 May 16 10:50
/etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml -&gt;
xfce4-session.xml.whonix
</code></pre>
<p>Maybe symlinks are unsupported by XFCE?</p>
</blockquote>
</aside>
<p>Maybe, but I suspect that this file needs at least these settings:</p>
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;channel name="xfce4-session" version="1.0"&gt;
  &lt;property name="general" type="empty"&gt;
    &lt;property name="FailsafeSessionName" type="string" value="Failsafe"/&gt;
  &lt;/property&gt;
  &lt;property name="sessions" type="empty"&gt;
    &lt;property name="Failsafe" type="empty"&gt;
      &lt;property name="IsFailsafe" type="bool" value="true"/&gt;
      &lt;property name="Count" type="int" value="5"/&gt;
      &lt;property name="Client0_Command" type="array"&gt;
        &lt;value type="string" value="xfwm4"/&gt;
      &lt;/property&gt;
</code></pre>
<p>And now:</p>
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;channel name="xfce4-session" version="1.0"&gt;
  &lt;property name="general" type="empty"&gt;
    &lt;property name="SaveOnExit" type="bool" value="false"/&gt;
  &lt;/property&gt;
&lt;/channel&gt;
</code></pre>
<p>Can’t we keep the default one?</p>
<aside class="quote no-group" data-post="66" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>this is the list of packages that now gets installed for Whonix host<br>
flavors as per git master.</p>
<p>calamares<br>
calamares-settings-debian<br>
live-config<br>
rsync<br>
user-setup<br>
squashfs-tools</p>
</blockquote>
</aside>
<p>Great!</p>
<aside class="quote no-group" data-post="66" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>This is because package <code>whonix-base-files</code> is not installed on Whonix<br>
host (yet) which ships <code>/etc/default/grub.d/30_whonix.cfg</code> (because that<br>
package would create user <code>user</code> ) during installation. Once user “user”<br>
creation is sorted, we probably want to install that package anyhow?</p>
</blockquote>
</aside>
<aside class="quote no-group" data-post="66" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>This is because package <code>whonix-base-files</code> is not installed on Whonix<br>
host (yet) which ships <code>/etc/default/grub.d/30_whonix.cfg</code> (because that<br>
package would create user <code>user</code> ) during installation. Once user “user”<br>
creation is sorted, we probably want to install that package anyhow?</p>
</blockquote>
</aside>
<p>OK would it be feasible to ship this particular file with another package? Or just writing it during build?</p>
<aside class="quote no-group" data-post="66" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>All fixed mentioned so far are untested and included in<br>
<code>15.0.0.2.8-developers-only</code> .</p>
</blockquote>
</aside>
<p>Great, I’ll try a build now!</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-16T14:22:02Z' class='post-time'>
                May 16, 2019,  2:22pm
              </time>
              <meta itemprop='dateModified' content='2019-05-16T14:22:02Z'>
          <span itemprop='position'>#68</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Just built Whonix-Host-XFCE <code>15.0.0.2.8-developers-only</code></p>
<p>XFCE still broken because of misconfigured xfce4-session.xml.whonix file.</p>
<p>Once corrected, everything seems to be fine. Debian Live User is created on boot.</p>
<p>Didn’t try out the installer yet, but should be fine too I guess.</p>
<p>Theming is still broken though, but I understand it is not a priority right now.</p>
<p>Other issues still need to be addressed (see my posts above, passwordless sudo rights for Live User, etc.).</p>
<p>Almost operational <img src="../../images/emoji/twitter/slight_smilec164.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-16T15:11:58Z' class='post-time'>
                May 16, 2019,  3:11pm
              </time>
              <meta itemprop='dateModified' content='2019-05-16T15:11:58Z'>
          <span itemprop='position'>#69</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Trying out the Calamares Installer on this new build (in KVM, not on real hardware).</p>
<p>Installation failed in job packages:<br>
<code>Command 'apt-get --purge -q -y remove live-boot live-boot-doc...' returned non-zero exit status 100</code><br>
-&gt; it fails because it doesn’t find the packages l<code>ive-config-doc, live-task-localisation and live-boot-doc</code> in the ISO (and thus in the install target where it extracted the filesystem.squashfs image of the ISO file).</p>
<p>Did you remove them from the list of installed packages? Or they are in <code>--no-install dependencies</code> mode?</p>
<p>Anyway, removing these packages from the<code>/etc/calamares/modules/packages.conf.whonix</code> file solves the problem. So I guess that is sufficient.</p>
<p>This version works:</p>
<pre><code>backend: apt

operations:
   - remove:
      - 'live-boot'
      - 'live-config'
      - 'live-config-systemd'
      - 'live-config-systemd'
      - 'live-tools'
      - 'calamares'
      - 'calamares-settings-debian'
EOF</code></pre>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-16T20:08:00Z' class='post-time'>
                May 16, 2019,  8:08pm
              </time>
              <meta itemprop='dateModified' content='2019-05-16T20:08:00Z'>
          <span itemprop='position'>#70</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>onion_knight via Whonix Forum:</p>
<blockquote>
<ul>
<li>File <code>/etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml.whonix</code><br>
breaks XFCE4, needs to be corrected (in the meantime I just did   <code>mv /etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml.dpkg-new /etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml</code>)</li>
</ul>
</blockquote>
<p>onion_knight via Whonix Forum:</p>
<blockquote>
<p>Can’t we keep the default one?</p>
</blockquote>
<p>I merged the Debian one, and Whonix modifications into one. The result<br>
is here:<br>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/whonix-xfce-desktop-config/blob/master/etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml.whonix" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/whonix-xfce-desktop-config/blob/master/etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml.whonix" target="_blank" rel="nofollow noopener">Whonix/whonix-xfce-desktop-config/blob/master/etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml.whonix</a></h4>
<pre><code class="lang-whonix">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;channel name="xfce4-session" version="1.0"&gt;
  &lt;property name="general" type="empty"&gt;
    &lt;property name="FailsafeSessionName" type="string" value="Failsafe"/&gt;
    &lt;property name="SaveOnExit" type="bool" value="false"/&gt;
  &lt;/property&gt;
  &lt;property name="sessions" type="empty"&gt;
    &lt;property name="Failsafe" type="empty"&gt;
      &lt;property name="IsFailsafe" type="bool" value="true"/&gt;
      &lt;property name="Count" type="int" value="5"/&gt;
      &lt;property name="Client0_Command" type="array"&gt;
        &lt;value type="string" value="xfwm4"/&gt;
      &lt;/property&gt;
      &lt;property name="Client0_PerScreen" type="bool" value="false"/&gt;
      &lt;property name="Client1_Command" type="array"&gt;
        &lt;value type="string" value="xfsettingsd"/&gt;
      &lt;/property&gt;
      &lt;property name="Client1_PerScreen" type="bool" value="false"/&gt;
      &lt;property name="Client2_Command" type="array"&gt;
</code></pre>

  This file has been truncated. <a href="../../../external.html?link=https://github.com/Whonix/whonix-xfce-desktop-config/blob/master/etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml.whonix" target="_blank" rel="nofollow noopener">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>Not sure if this is what you meant? Hopefully that works. The change by<br>
Whonix looks of medium importance, disabling session saving. Not yet tested.</p>
<p>I’ll process a few more easy to add fixes in new posts to come soon, and<br>
then create a new git tag.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-14T12:50:44Z' class='post-time'>
                June 14, 2019, 12:50pm
              </time>
              <meta itemprop='dateModified' content='2019-06-14T12:50:44Z'>
          <span itemprop='position'>#71</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="69" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Did you remove them from the list of installed packages?</p>
</blockquote>
</aside>
<p>No.</p>
<aside class="quote no-group" data-post="69" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Or they are in <code>--no-install dependencies</code> mode?</p>
</blockquote>
</aside>
<p>Yes. Have to use this.</p>
<aside class="quote no-group" data-post="69" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Anyway, removing these packages from the <code>/etc/calamares/modules/packages.conf.whonix</code> file solves the problem. So I guess that is sufficient.</p>
</blockquote>
</aside>
<p>Fixed.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-14T13:21:00Z' class='post-time'>
                June 14, 2019,  1:21pm
              </time>
              <meta itemprop='dateModified' content='2019-06-14T13:21:00Z'>
          <span itemprop='position'>#72</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Package xfce4-session also owns file</p>
<p><code>/etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml</code></p>
<p>Package xfce4-settings also owns file:</p>
<p><code>/etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xsettings.xml</code></p>
<p>/etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfwm4.xml 	lxqt-common</p>
<p>etc.</p>
<p>I did undo all the port form /etc/skel to /etc/xdg.</p>
<blockquote>
<p>If we want a hardened-debian VM, I think user should be created. If we want an live ISO-installer, then no. So <code>--flavor whonix-host</code> should trigger the skipping of user creation, while all other flavours should create it as was the case before (don’t know if clear enough - easy to do?).</p>
</blockquote>
<p>Will be covered by <a href="../../../external.html?link=https://phabricator.whonix.org/T913" rel="nofollow noopener">https://phabricator.whonix.org/T913</a></p>
<p>Any idea how the systemd unit file would detect that we are booting into<br>
calamares so it will skip and not create user <code>user</code>?</p>
<blockquote>
<p>Maybe, but I suspect that this file needs at least these settings:</p>
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;channel name="xfce4-session" version="1.0"&gt;
  &lt;property name="general" type="empty"&gt;
    &lt;property name="FailsafeSessionName" type="string" value="Failsafe"/&gt;
  &lt;/property&gt;
  &lt;property name="sessions" type="empty"&gt;
    &lt;property name="Failsafe" type="empty"&gt;
      &lt;property name="IsFailsafe" type="bool" value="true"/&gt;
      &lt;property name="Count" type="int" value="5"/&gt;
      &lt;property name="Client0_Command" type="array"&gt;
        &lt;value type="string" value="xfwm4"/&gt;
      &lt;/property&gt;
</code></pre>
<p>And now:</p>
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;channel name="xfce4-session" version="1.0"&gt;
  &lt;property name="general" type="empty"&gt;
    &lt;property name="SaveOnExit" type="bool" value="false"/&gt;
  &lt;/property&gt;
&lt;/channel&gt;
</code></pre>
<p>Can’t we keep the default one?</p>
</blockquote>
<p>This should be solved by:</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/whonix-xfce-desktop-config/commit/db388d4bdd5ecb35c57dcc6420749dbd1b230cee" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-xfce-desktop-config</a>
  </header>
  <article class="onebox-body">
      <a href="../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../external.html?link=https://github.com/Whonix/whonix-xfce-desktop-config/commit/db388d4bdd5ecb35c57dcc6420749dbd1b230cee" target="_blank" rel="nofollow noopener">merge Debian package xfce4-session default settings</a>
</h4>


<div class="date">
  by <a href="../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../external.html?link=https://github.com/Whonix/whonix-xfce-desktop-config/commit/db388d4bdd5ecb35c57dcc6420749dbd1b230cee" target="_blank" rel="nofollow noopener">07:55PM - 16 May 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>31 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<blockquote>
<aside class="quote no-group" data-post="66" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>This is because package <code>whonix-base-files</code> is not installed on Whonix<br>
host (yet) which ships <code>/etc/default/grub.d/30_whonix.cfg</code> (because that<br>
package would create user <code>user</code> ) during installation. Once user “user”<br>
creation is sorted, we probably want to install that package anyhow?</p>
</blockquote>
</aside>
<p>OK would it be feasible to ship this particular file with another package? Or just writing it during build?</p>
</blockquote>
<p><code>whonix-base-files</code> can continue to ship<br>
<code>/etc/default/grub.d/30_whonix.cfg</code>. User user creation will be sorted<br>
out in <a href="../../../external.html?link=https://phabricator.whonix.org/T913" rel="nofollow noopener">https://phabricator.whonix.org/T913</a></p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-14T13:31:00Z' class='post-time'>
                June 14, 2019,  1:31pm
              </time>
              <meta itemprop='dateModified' content='2019-06-14T13:31:00Z'>
          <span itemprop='position'>#73</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>onion_knight via Whonix Forum:</p>
<blockquote>
<p>XFCE still broken because of misconfigured xfce4-session.xml.whonix file.</p>
</blockquote>
<p>That should be fixed in<br>
<a href="../../../external.html?link=https://github.com/Whonix/whonix-xfce-desktop-config" rel="nofollow noopener">https://github.com/Whonix/whonix-xfce-desktop-config</a> and in next Whonix<br>
tag yet to be created.</p>
<blockquote>
<p>Theming is still broken though, but I understand it is not a priority right now.</p>
</blockquote>
<p>Not really anything sorted by priority yet.  all needs implementation.</p>
<p><a href="../../../external.html?link=https://phabricator.whonix.org/project/board/145/" class="onebox" target="_blank" rel="nofollow noopener">https://phabricator.whonix.org/project/board/145/</a></p>
<p><a href="../../../external.html?link=https://phabricator.whonix.org/project/view/26/" class="onebox" target="_blank" rel="nofollow noopener">https://phabricator.whonix.org/project/view/26/</a></p>
<p><a href="../../../external.html?link=https://phabricator.whonix.org/project/view/132/" class="onebox" target="_blank" rel="nofollow noopener">https://phabricator.whonix.org/project/view/132/</a></p>
<blockquote>
<p>Other issues still need to be addressed (see my posts above, passwordless sudo rights for Live User, etc.).</p>
</blockquote>
<p>I should have created tickets for all of that?</p>
<p>Please have a look at:</p>
<p><a href="../../../external.html?link=https://phabricator.whonix.org/feed/" class="onebox" target="_blank" rel="nofollow noopener">https://phabricator.whonix.org/feed/</a></p>
<p>Please kindly create tickets for any missing items.</p>
<p>It’s rather difficult to take action based on forum posts for me if it<br>
is getting complex and convulsed with a bunch of tasks that require<br>
different work such as research, implementation, build, testing that all<br>
easily take more than 1 hour of time.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-14T19:37:34Z' class='post-time'>
                June 14, 2019,  7:37pm
              </time>
              <meta itemprop='dateModified' content='2019-06-14T19:37:34Z'>
          <span itemprop='position'>#74</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="30" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<ul>
<li>virsh -c qemu:///system net-start Whonix-External 2019-05-13 08:12:59.689+0000: 21885: error : dnsmasqCapsRefreshInternal:733 : Cannot check dnsmasq binary /usr/sbin/dnsmasq: No such file or directory error: Failed to start network Whonix-External error: Cannot check dnsmasq binary /usr/sbin/dnsmasq: No such file or directory</li>
</ul>
</blockquote>
</aside>
<p>Didn’t see that until now becuase no one copied me. Seems that dnsmasq package is missing on Whonix Host which prevents the network from starting NAT successfully.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-15T02:26:14Z' class='post-time'>
                June 15, 2019,  2:26am
              </time>
              <meta itemprop='dateModified' content='2019-06-15T02:26:14Z'>
          <span itemprop='position'>#75</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Should dnsmasq then be part of the <a href="../../../external.html?link=https://www.whonix.org/wiki/KVM" rel="nofollow noopener">https://www.whonix.org/wiki/KVM</a> guide?</p>
<p>dnsmasq is a DHCP server. Security issue having it installed on the host? Can be reconfigured to serve KVM only? If yes, any alternative without dnsmasq?</p>
<p>If ok or no alternative, could you add to <code>Depends:</code> please here:</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/blob/master/debian/control#L16-L17" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/blob/master/debian/control#L16-L17" target="_blank" rel="nofollow noopener">Whonix/whonix-libvirt/blob/master/debian/control#L16-L17</a></h4>
<pre class="onebox"><code class="lang-"><ol class="start lines" start="16" style="counter-reset: li-counter 15 ;">
<li>Depends: qemu-kvm, libvirt-daemon-system, libvirt-clients, virt-manager,</li>
<li> ${misc:Depends}</li>
</ol></code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-15T04:23:49Z' class='post-time'>
                June 15, 2019,  4:23am
              </time>
              <meta itemprop='dateModified' content='2019-06-15T04:23:49Z'>
          <span itemprop='position'>#76</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="75" data-topic="7350">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Should dnsmasq then be part of the <a href="../../../external.html?link=https://www.whonix.org/wiki/KVM" rel="nofollow noopener">https://www.whonix.org/wiki/KVM</a> guide?</p>
<p>dnsmasq is a DHCP server. Security issue having it installed on the host? Can be reconfigured to serve KVM only? If yes, any alternative without dnsmasq?</p>
</blockquote>
</aside>
<p>Scratch that, That was a wrong guess. Tested  libvirt/KVM install on Buster and <code>dnsmasq-base</code> is one of the automatically installed deps of libvirt. There are no security problems with the way libvirt uses and confgures it. It is otherwise not active for external interfaces. (links about that will be posted shortly in the DHCP thread).</p>
<p>I have no idea what other reason causes Whonix-External to fail. Let’s deal with it when other blockers are solved.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-20T06:16:00Z' class='post-time'>
                June 20, 2019,  6:16am
              </time>
              <meta itemprop='dateModified' content='2019-06-20T06:16:00Z'>
          <span itemprop='position'>#77</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>HulaHoop via Whonix Forum:</p>
<blockquote>
<p>I have no idea what other reason causes Whonix-External to fail. Let’s deal with it when other blockers are solved.</p>
</blockquote>
<p>Only start is failing inside chroot but start inside chroot is not<br>
important at all as long as start works when the image gets actually booted.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-14T07:25:39Z' class='post-time'>
                July 14, 2019,  7:25am
              </time>
              <meta itemprop='dateModified' content='2019-07-14T07:25:39Z'>
          <span itemprop='position'>#78</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Could calamares be configured to somehow not create user <code>user</code> during boot instead? That would simplify implementation on the Whonix side a lot.</p>
<p>Then we might be able to use <code>/usr/share/pam-configs/mkhomedir</code> ( <a href="../../../external.html?link=http://blog.dailystuff.nl/2012/07/create-home-directory-on-first-login/" rel="nofollow noopener">http://blog.dailystuff.nl/2012/07/create-home-directory-on-first-login/</a> ) which would also solve <a href="../../../external.html?link=https://phabricator.whonix.org/T913" rel="nofollow noopener">https://phabricator.whonix.org/T913</a> / <a href="../bug-not-all-files-form-etc-skel-are-copied-to-home-user/6778/4.html" class="inline-onebox">bug: not all files form /etc/skel are copied to /home/user</a>.</p>
<p>( <code>sudo pam-auth-update --enable mkhomedir</code> )</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-15T11:44:40Z' class='post-time'>
                July 15, 2019, 11:44am
              </time>
              <meta itemprop='dateModified' content='2019-07-15T11:44:40Z'>
          <span itemprop='position'>#79</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a></p>
<p>I am not sure I understand what you ask.</p>
<p>Here is how it works last time I tested:</p>
<p>-&gt; Starting “Whonix-Desktop-with-Calamares-Installer” in live-mode: live-user is created on boot if correct kernel flags or appended (so already working)<br>
-&gt; Using Calamares-Installer: the user creates a user for his new machine he is installing Whonix-Desktop on (is this what you would like to suppress?)</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7350.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-15T12:07:43Z' class='post-time'>
                July 15, 2019, 12:07pm
              </time>
              <meta itemprop='dateModified' content='2019-07-15T12:07:43Z'>
          <span itemprop='position'>#80</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Just to let you know that I am currently rebuilding from scratch with version 15.0.0.3.3.</p>
        </div>

        <meta itemprop='headline' content='Whonix Desktop Installer with Calamares - field report'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="73509ba9.html?page=3">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="7350af4d.html?page=5">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
