<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>CPU usage fluctuations while Whonix-Workstation is running</title>
    <link>http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092</link>
    <description>**Whonix™ version and platform:** Whonix-Workstation 15.0.1.3.4/15.0.1.3.9, Qubes 4.0.3
**Affected component(s) or functionality:** Whonix-Workstation
**Steps to reproduce the behavior:** Have one or more Whonix-Workstation AppVMs running while not actively using any program other than the bare system
**Expected behavior:** No noticeable increase in CPU usage over running the bare Qubes and its system VMs
**Actual behavior:** Minor but persistent fluctuations, CPU usage constantly goes up and down (about 1-2% reported in the Qubes widget)
**Context:** Noticed because the fluctuations constantly cause the fan to spin faster and then slower again, which is very annoying. Hopefully an increase in power usage is negligible, but bad if present at all. The issue does not seem present with AppVMs based on other templates.

I am not sure if it is appropriate to report this as a bug. I would appreciate any help or suggestions how to diagnose the issue. Initially I thought it may be a problem with Qubes itself, so I have tested it with several AppVMs based on Debian 10 minimal, the issue is not present no matter how many of these VMs are running. The issue is also not present when only Whonix-Gateway is running, so I have to conclude it is somehow related to a package in Whonix-Workstation or the Whonix configuration. Attempting to monitor CPU usage from within the VM did not give me any useful information, please suggest a better method if possible.</description>
    <language>en</language>
    <lastBuildDate>Tue, 24 Nov 2020 16:18:36 +0000</lastBuildDate>
    <category>Qubes-Whonix</category>
    <atom:link href="http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>CPU usage fluctuations while Whonix-Workstation is running</title>
        <dc:creator><![CDATA[singularity]]></dc:creator>
        <description><![CDATA[
            <p><a href="http://forums.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/t/how-to-disable-sdwdate-gui-synchronization-in-qubes-whonix/10628" rel="nofollow noopener">Disabling autostart of sdwdate-gui</a> in Workstation(s) fixes this issue.</p>
          <p><a href="http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092/6</link>
        <pubDate>Tue, 24 Nov 2020 16:18:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10092-6</guid>
        <source url="http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092.rss">CPU usage fluctuations while Whonix-Workstation is running</source>
      </item>
      <item>
        <title>CPU usage fluctuations while Whonix-Workstation is running</title>
        <dc:creator><![CDATA[jonahdhensley]]></dc:creator>
        <description><![CDATA[
            <p>Do you have an extra hard drive around that you could test if this issue persists on a fresh install?<br>
Also do you see any abnormal behavior from any processes when running a <code>lsof</code> command? It can be messy in its raw form, but it is also helpful to me for seeing processes not functioning as they should, as well as to track down the parent processes attached to them to see if they are causing an issue.<br>
I’m sure there is a better command to accomplish a cleaner readout of this, but I’ve used that method for a long time, and have never been let down.</p>
          <p><a href="http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092/5</link>
        <pubDate>Mon, 24 Aug 2020 03:24:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10092-5</guid>
        <source url="http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092.rss">CPU usage fluctuations while Whonix-Workstation is running</source>
      </item>
      <item>
        <title>CPU usage fluctuations while Whonix-Workstation is running</title>
        <dc:creator><![CDATA[81a989]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="singularity" data-post="3" data-topic="10092">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/s/898d66/40.png" class="avatar"> singularity:</div>
<blockquote>
<p>Sorry for the late reply.</p>
</blockquote>
</aside>
<p>No worries. <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>You can use <code>top</code> in cli to view processes without installing anything. Use it with sudo permissions to see processes from all users.</p>
<p>I checked and those were the only processes I saw that were using any cpu. I am not sure otherwise.</p>
<aside class="quote no-group" data-username="singularity" data-post="3" data-topic="10092">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/s/898d66/40.png" class="avatar"> singularity:</div>
<blockquote>
<p>An unrelated oddity is that setting a Whonix-Workstation AppVM’s NetVM to none has it inform sdwdate-gui that time synchronisation is broken when started (because no connection). Starting such a VM also force-starts Whonix-Gateway if it is not already running, despite it not being the Workstation’s NetVM. If Whonix-Gateway is shut down while it is running, shutting down the Whonix-Workstation AppVMs force-starts it as well.</p>
<p>So, which package is that, or what configuration is responsible for this behavior? Probably not any in Whonix-Workstation, because somehow Whonix-Gateway is aware of Workstations that do not use it as NetVM.</p>
</blockquote>
</aside>
<p>I noticed that too. Check that your Whonix-WS AppVM setting for “Default DispVM template” is set to ‘none’. However, something else starts sys-whonix anyway, I do not know what it is.</p>
          <p><a href="http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092/4</link>
        <pubDate>Sun, 23 Aug 2020 23:40:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10092-4</guid>
        <source url="http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092.rss">CPU usage fluctuations while Whonix-Workstation is running</source>
      </item>
      <item>
        <title>CPU usage fluctuations while Whonix-Workstation is running</title>
        <dc:creator><![CDATA[singularity]]></dc:creator>
        <description><![CDATA[
            <p>Sorry for the late reply.</p>
<aside class="quote no-group" data-username="81a989" data-post="2" data-topic="10092">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/8/a9a28c/40.png" class="avatar"> 81a989:</div>
<blockquote>
<p>What did you do to monitor the usage within the VM?</p>
</blockquote>
</aside>
<p>I temporarily installed <code>gnome-system-monitor</code> package in an AppVM based on Whonix-WS template and used that, couldn’t think of much else.</p>
<aside class="quote no-group" data-username="81a989" data-post="2" data-topic="10092">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/8/a9a28c/40.png" class="avatar"> 81a989:</div>
<blockquote>
<p>Whonix-WS runs whonixcheck and sdwdate and there are other processes and exchanges with Whonix-GW.</p>
</blockquote>
</aside>
<p>It is unlikely either whonixcheck or sdwdate is causing it, as they only perform tasks on VM startup or after a period of time, I am experiencing CPU usage going up and down again for a few seconds for the entire time the AppVM is running.</p>
<p>Some additional information:<br>
I tried uninstalling all not strictly needed Whonix (and Qubes-Whonix) packages to see which one of them might be causing it, but even that did not resolve the problem. Now that I remember, past versions of Qubes-Whonix did not have this problem, I think I first started noticing it in the versions that include informing Whonix-Gateway’s sdwdate-gui of completed time synchronization in Workstation and related functionality.</p>
<p>An unrelated oddity is that setting a Whonix-Workstation AppVM’s NetVM to <code>none</code> has it inform sdwdate-gui that time synchronisation is broken when started (because no connection). Starting such a VM also force-starts Whonix-Gateway if it is not already running, despite it not being the Workstation’s NetVM. If Whonix-Gateway is shut down while it is running, shutting down the Whonix-Workstation AppVMs force-starts it as well.</p>
<p>So, which package is that, or what configuration is responsible for this behavior? Probably not any in Whonix-Workstation, because somehow Whonix-Gateway is aware of Workstations that do not use it as NetVM.</p>
          <p><a href="http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092/3</link>
        <pubDate>Fri, 21 Aug 2020 16:44:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10092-3</guid>
        <source url="http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092.rss">CPU usage fluctuations while Whonix-Workstation is running</source>
      </item>
      <item>
        <title>CPU usage fluctuations while Whonix-Workstation is running</title>
        <dc:creator><![CDATA[81a989]]></dc:creator>
        <description><![CDATA[
            <p>What did you do to monitor the usage within the VM? Whonix-WS runs whonixcheck and sdwdate and there are other processes and exchanges with Whonix-GW. I guess that would be what is happening to you.</p>
<p>Comparing Whonix-WS to Debian-minimal might not be a fair comparison. <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          <p><a href="http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092/2</link>
        <pubDate>Sat, 15 Aug 2020 01:33:51 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10092-2</guid>
        <source url="http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092.rss">CPU usage fluctuations while Whonix-Workstation is running</source>
      </item>
      <item>
        <title>CPU usage fluctuations while Whonix-Workstation is running</title>
        <dc:creator><![CDATA[singularity]]></dc:creator>
        <description><![CDATA[
            <p><strong>Whonix™ version and platform:</strong> Whonix-Workstation 15.0.1.3.4/15.0.1.3.9, Qubes 4.0.3<br>
<strong>Affected component(s) or functionality:</strong> Whonix-Workstation<br>
<strong>Steps to reproduce the behavior:</strong> Have one or more Whonix-Workstation AppVMs running while not actively using any program other than the bare system<br>
<strong>Expected behavior:</strong> No noticeable increase in CPU usage over running the bare Qubes and its system VMs<br>
<strong>Actual behavior:</strong> Minor but persistent fluctuations, CPU usage constantly goes up and down (about 1-2% reported in the Qubes widget)<br>
<strong>Context:</strong> Noticed because the fluctuations constantly cause the fan to spin faster and then slower again, which is very annoying. Hopefully an increase in power usage is negligible, but bad if present at all. The issue does not seem present with AppVMs based on other templates.</p>
<p>I am not sure if it is appropriate to report this as a bug. I would appreciate any help or suggestions how to diagnose the issue. Initially I thought it may be a problem with Qubes itself, so I have tested it with several AppVMs based on Debian 10 minimal, the issue is not present no matter how many of these VMs are running. The issue is also not present when only Whonix-Gateway is running, so I have to conclude it is somehow related to a package in Whonix-Workstation or the Whonix configuration. Attempting to monitor CPU usage from within the VM did not give me any useful information, please suggest a better method if possible.</p>
          <p><a href="http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092/1</link>
        <pubDate>Wed, 12 Aug 2020 05:34:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10092-1</guid>
        <source url="http://forums.whonix.org/t/cpu-usage-fluctuations-while-whonix-workstation-is-running/10092.rss">CPU usage fluctuations while Whonix-Workstation is running</source>
      </item>
  </channel>
</rss>
