<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Apply systemd sandboxing by default to some services</title>
    <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590</link>
    <description>Systemd has a few features that allow you to [sandbox systemd services](https://www.freedesktop.org/software/systemd/man/systemd.exec.html#Sandboxing) to prevent the damage that a compromised service could do.

It would be good to apply some sandboxing by default to some services. A lot of settings like `PrivateTmp=true` and `PrivateHome=true` can be set for most services without breaking anything.

I can create some sandboxes and test them for a few services if needed. They could probably be placed in security-misc.

A related Tor ticket: https://trac.torproject.org/projects/tor/ticket/20930</description>
    <language>en</language>
    <lastBuildDate>Wed, 16 Feb 2022 23:37:10 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubcommit" data-onebox-src="https://github.com/Whonix/onion-grater/commit/4b13181ac4743c9a969164b81bf840eb85325fb7">
  <header class="source">

      <a href="https://github.com/Whonix/onion-grater/commit/4b13181ac4743c9a969164b81bf840eb85325fb7" target="_blank" rel="noopener">github.com/Whonix/onion-grater</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/onion-grater/commit/4b13181ac4743c9a969164b81bf840eb85325fb7" target="_blank" rel="noopener">disable `ProcSubset=pid` due to onion-grater crash at startup</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2022-02-16" data-time="23:33:34" data-timezone="UTC">11:33PM - 16 Feb 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank" rel="noopener">
          <img alt="adrelanos" src="https://avatars.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
      </div>

      <div class="lines" title="changed 1 files with 19 additions and 1 deletions">
        <a href="https://github.com/Whonix/onion-grater/commit/4b13181ac4743c9a969164b81bf840eb85325fb7" target="_blank" rel="noopener">
          <span class="added">+19</span>
          <span class="removed">-1</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">&gt; onion-grater[23859]: FileNotFoundError: [Errno 2] No such file or directory: '<span class="show-more-container"><a href="https://github.com/Whonix/onion-grater/commit/4b13181ac4743c9a969164b81bf840eb85325fb7" target="_blank" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">/proc/stat'</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/81">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/81</link>
        <pubDate>Wed, 16 Feb 2022 23:37:10 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-81</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox stackexchange" data-onebox-src="https://unix.stackexchange.com/questions/647132/how-to-debug-systemd-seccomp-systemcallfilter-unit-name-service-main-process-ex/690403#690403">
  <header class="source">

      <a href="https://unix.stackexchange.com/questions/647132/how-to-debug-systemd-seccomp-systemcallfilter-unit-name-service-main-process-ex/690403#690403" target="_blank" rel="noopener">unix.stackexchange.com</a>
  </header>

  <article class="onebox-body">
      <a href="https://unix.stackexchange.com/users/514226/lparcq" target="_blank" rel="noopener">
    <img alt="lparcq" src="https://www.gravatar.com/avatar/2f179f2bc3a2e3a2f88f944cd9b9c662?s=256&amp;d=identicon&amp;r=PG" class="thumbnail onebox-avatar" width="256" height="256">
  </a>

<h4>
  <a href="https://unix.stackexchange.com/questions/647132/how-to-debug-systemd-seccomp-systemcallfilter-unit-name-service-main-process-ex/690403#690403" target="_blank" rel="noopener">How to debug systemd seccomp SystemCallFilter unit-name.service: Main process exited, code=killed, status=31/SYS?</a>
</h4>

<div class="tags">
  <strong>systemd, sandbox, seccomp</strong>
</div>

<div class="date">
  
  answered by
  <a href="https://unix.stackexchange.com/users/514226/lparcq" target="_blank" rel="noopener">
    lparcq
  </a>
  on <a href="https://unix.stackexchange.com/questions/647132/how-to-debug-systemd-seccomp-systemcallfilter-unit-name-service-main-process-ex/690403#690403" target="_blank" rel="noopener">08:16PM - 12 Feb 22 UTC</a>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/80">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/80</link>
        <pubDate>Mon, 14 Feb 2022 10:14:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-80</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Awesome! Merged.</p>
<p>Added some minor enhancements on top.</p>
<p>Minor: No need for <code>systemctl daemon-reload</code>. See the actual postinst script once packages was build and post processed by debhelper which has a more robust implementation (battle tested in thousands of packages, maintained by upstream Debian). Removed in git master.</p>
<pre><code># End automatically added section
# Automatically added by dh_installsystemd/12.1.1
if [ "$1" = "configure" ] || [ "$1" = "abort-upgrade" ] || [ "$1" = "abort-deconfigure" ] || [ "$1" = "abort-remove" ] ; then
	if [ -d /run/systemd/system ]; then
		systemctl --system daemon-reload &gt;/dev/null || true
		if [ -n "$2" ]; then
			_dh_action=restart
		else
			_dh_action=start
		fi
		deb-systemd-invoke $_dh_action 'sdwdate-restart-tor-request-file-watcher.service' 'sdwdate.service' &gt;/dev/null || true
	fi
fi
# End automatically added section</code></pre>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/79">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/79</link>
        <pubDate>Mon, 31 May 2021 05:13:45 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-79</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubcommit">
  <header class="source">

      <a href="https://github.com/madaidan/sdwdate/commit/149835c753b937eee8854a50a35e0d61da37073c" target="_blank" rel="noopener nofollow ugc">github.com/madaidan/sdwdate</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/madaidan/sdwdate/commit/149835c753b937eee8854a50a35e0d61da37073c" target="_blank" rel="noopener nofollow ugc">Fixes</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2021-05-30" data-time="23:31:58" data-timezone="UTC">11:31PM - 30 May 21 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/madaidan" target="_blank" rel="noopener nofollow ugc">
          <img alt="madaidan" src="https://avatars.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="changed 1 files with 2 additions and 2 deletions">
        <a href="https://github.com/madaidan/sdwdate/commit/149835c753b937eee8854a50a35e0d61da37073c" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+2</span>
          <span class="removed">-2</span>
        </a>
      </div>
    </div>
  </div>
</div>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>This should work. Anything containing “arm” or “aarch” will be caught.</p>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/78">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/78</link>
        <pubDate>Sun, 30 May 2021 23:32:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-78</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>mkdir /lib/systemd/system/sdwdate.service.d/</p>
</blockquote>
<p>Needs to be <code>mkdir --parents</code>. Would fail otherwise on re-run (next time).</p>
<blockquote>
<p>arch="$(uname -m)"<br>
if [[ “${arch}” =~ “arm64” ]]; then</p>
</blockquote>
<p>Is the output of <code>uname -m</code> on <code>arm64</code> tested?</p>
<p>Quote from <a href="https://developer.arm.com/documentation/102475/0100/Multi-architecture-images" class="inline-onebox">Documentation – Arm Developer</a></p>
<blockquote>
<p>docker run jasonrandrews/alpine-test:latest@sha256:5966f7b12b7c7ba3146102cf3079e57cccaf1de7228651661276dd1606d84108 uname -m<br>
aarch64</p>
</blockquote>
<aside class="onebox stackexchange">
  <header class="source">

      <a href="https://stackoverflow.com/questions/45125516/possible-values-for-uname-m" target="_blank" rel="noopener">stackoverflow.com</a>
  </header>

  <article class="onebox-body">
      <a href="https://stackoverflow.com/users/119527/jonathon-reinhart" target="_blank" rel="noopener">
    <img alt="Jonathon Reinhart" src="https://i.stack.imgur.com/lTjBL.png?s=128&amp;g=1" class="thumbnail onebox-avatar" width="60" height="60">
  </a>

<h4>
  <a href="https://stackoverflow.com/questions/45125516/possible-values-for-uname-m" target="_blank" rel="noopener">Possible values for `uname -m`</a>
</h4>

<div class="tags">
  <strong>linux, unix</strong>
</div>

<div class="date">
  asked by
  
  <a href="https://stackoverflow.com/users/119527/jonathon-reinhart" target="_blank" rel="noopener">
    Jonathon Reinhart
  </a>
  on <a href="https://stackoverflow.com/questions/45125516/possible-values-for-uname-m" target="_blank" rel="noopener">05:55AM - 16 Jul 17 UTC</a>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/77">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/77</link>
        <pubDate>Sun, 30 May 2021 20:18:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-77</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubpullrequest">
  <header class="source">

      <a href="https://github.com/Whonix/sdwdate/pull/32" target="_blank" rel="noopener nofollow ugc">github.com/Whonix/sdwdate</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/sdwdate/pull/32" target="_blank" rel="noopener nofollow ugc">Split arch-specific syscalls from the base whitelist</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:arch-syscalls</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2021-05-29" data-time="19:24:14" data-timezone="UTC">07:24PM - 29 May 21 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/madaidan" target="_blank" rel="noopener nofollow ugc">
          <img alt="madaidan" src="https://avatars.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="1 commits changed 2 files with 29 additions and 3 deletions">
        <a href="https://github.com/Whonix/sdwdate/pull/32/files" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+29</span>
          <span class="removed">-3</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">https://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services<span class="show-more-container"><a href="https://github.com/Whonix/sdwdate/pull/32" target="_blank" rel="noopener nofollow ugc" class="show-more">…</a></span><span class="excerpt hidden">/7590/70</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/76">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/76</link>
        <pubDate>Sat, 29 May 2021 19:24:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-76</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="madaidan" data-post="74" data-topic="7590">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>What if we add the base syscall whitelist to <code>/lib/systemd/system/sdwdate.service</code>, but add the arch-specific syscalls to the autogenerated drop-in <code>/lib/systemd/system/sdwdate.service.d/20_arch_syscall_whitelist.conf</code>?</p>
</blockquote>
</aside>
<p>Even better! Didn’t know that is possible But seems possible. Quote relevant man page entry:</p>
<blockquote>
<p>SystemCallFilter</p>
</blockquote>
<blockquote>
<p>This option may be specified more than once, in which case the filter masks are merged.</p>
</blockquote>
<p>But has to be carefully scripted to not be empty, because:</p>
<blockquote>
<p>If the empty string is assigned, the filter is reset, all prior assignments will have no effect.</p>
</blockquote>
<aside class="quote no-group" data-username="madaidan" data-post="74" data-topic="7590">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>We could also output a message during installation if the arch is not x86/ARM/PPC to say that the seccomp filter may not work correctly.</p>
</blockquote>
</aside>
<p>Also great! I am a big fan of self-documenting code/features, giving hints to debug for potential future porters.</p>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/75">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/75</link>
        <pubDate>Sat, 29 May 2021 18:14:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-75</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>What if we add the base syscall whitelist to <code>/lib/systemd/system/sdwdate.service</code>, but add the arch-specific syscalls to the autogenerated drop-in <code>/lib/systemd/system/sdwdate.service.d/20_arch_syscall_whitelist.conf</code>?</p>
<p>We could also output a message during installation if the arch is not x86/ARM/PPC to say that the seccomp filter may not work correctly.</p>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/74">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/74</link>
        <pubDate>Sat, 29 May 2021 18:02:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-74</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><code>str_replace</code> can be avoided. Best to remove syscall whitelist in <code>/lib/systemd/system/sdwdate.service</code> with a comment to explain new implementation and then add an autogenerated (by postinst) systemd drop-in in <code>/lib/systemd/system/sdwdate.service.d/20_syscall_whitelist.conf</code>.</p>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/73">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/73</link>
        <pubDate>Sat, 29 May 2021 17:57:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-73</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>Could be something like the following in postinst:</p>
<pre><code class="lang-auto">arch="$(uname -m")
## Base syscalls. Suitable for x86.
syscall_whitelist="wait4 select futex read stat close openat fstat lseek mmap rt_sigaction getdents64 mprotect ioctl recvfrom munmap brk rt_sigprocmask fcntl getpid write access socket sendto dup2 clone execve getrandom geteuid getgid madvise getuid getegid readlink pipe rt_sigreturn connect pipe2 prlimit64 set_robust_list dup arch_prctl lstat set_tid_address sysinfo sigaltstack rt_sigsuspend shutdown timer_settime mkdir timer_create statfs getcwd setpgid setsockopt uname bind getpgrp getppid getpeername chdir poll getsockname fadvise64 clock_settime kill getsockopt unlink "

if [ "${arch}" =~ "arm64" ]; then
  ## ARM-specific syscalls.
  syscall_whitelist+="readlinkat newfstatat mkdirat dup3 ppoll pselect6"
elif [ "${arch}" =~ "ppc" ]; then
  ## PowerPC-specific syscalls.
  syscall_whitelist+="_llseek send waitpid recv prctl _newselect"
fi

str_replace "SystemCallFilter=" "SystemCallFilter=${syscall_whitelist}" /lib/systemd/system/sdwdate.service</code></pre>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/72">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/72</link>
        <pubDate>Sat, 29 May 2021 17:20:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-72</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Seems quite complex but if that’s maintained, then OK.</p>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/71">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/71</link>
        <pubDate>Sat, 29 May 2021 17:10:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-71</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>We could create multiple arch-specific syscall whitelists to avoid bloating one whitelist with another’s syscalls and use a postinst script to detect the arch and enable the appropriate one.</p>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/70">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/70</link>
        <pubDate>Sat, 29 May 2021 15:51:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-70</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Merged.</p>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/69">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/69</link>
        <pubDate>Sun, 16 May 2021 12:40:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-69</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[GavinPacini]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> I realised that I missed one for sdwdate. The service started but the time never synched, now it does:</p>
<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/sdwdate/pull/31" target="_blank" rel="noopener nofollow ugc">github.com/Whonix/sdwdate</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/sdwdate/pull/31" target="_blank" rel="noopener nofollow ugc">One more SystemCallFilter syscall for arm64</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>GavinPacini:patch-3</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2021-05-15" data-time="18:42:04" data-timezone="UTC">06:42PM - 15 May 21 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/GavinPacini" target="_blank" rel="noopener nofollow ugc">
          <img alt="GavinPacini" src="https://avatars.githubusercontent.com/u/1523414?v=4" class="onebox-avatar-inline" width="20" height="20">
          GavinPacini
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 2 additions and 2 deletions">
        <a href="https://github.com/Whonix/sdwdate/pull/31/files" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+2</span>
          <span class="removed">-2</span>
        </a>
      </div>
    </div>

  </div>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/68">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/68</link>
        <pubDate>Sat, 15 May 2021 18:42:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-68</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Awesome, no, this one is straight forward to test.</p>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/67">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/67</link>
        <pubDate>Sat, 15 May 2021 11:07:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-67</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[GavinPacini]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> finally got time to check onion-grater <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/onion-grater/pull/10/files" target="_blank" rel="noopener nofollow ugc">github.com/Whonix/onion-grater</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/onion-grater/pull/10" target="_blank" rel="noopener nofollow ugc">Add SystemCallFilter changes for arm64</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>GavinPacini:patch-1</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2021-05-14" data-time="17:01:50" data-timezone="UTC">05:01PM - 14 May 21 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/GavinPacini" target="_blank" rel="noopener nofollow ugc">
          <img alt="GavinPacini" src="https://avatars.githubusercontent.com/u/1523414?v=4" class="onebox-avatar-inline" width="20" height="20">
          GavinPacini
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 1 additions and 1 deletions">
        <a href="https://github.com/Whonix/onion-grater/pull/10/files" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+1</span>
          <span class="removed">-1</span>
        </a>
      </div>
    </div>

  </div>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>I did restart this a few time also. Anything else I should check?</p>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/66">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/66</link>
        <pubDate>Fri, 14 May 2021 17:02:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-66</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>No worries.</p>
<p>This is hard to expect. <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Merged, and uploaded to Whonix developers repository.</p>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/65">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/65</link>
        <pubDate>Thu, 06 May 2021 13:38:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-65</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[GavinPacini]]></dc:creator>
        <description><![CDATA[
            <p>Oh, good catch, sorry for not checking that.</p>
<p>Opened another PR which now also works after restarting the service.</p>
<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/sdwdate/pull/30" target="_blank" rel="noopener nofollow ugc">github.com/Whonix/sdwdate</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/sdwdate/pull/30" target="_blank" rel="noopener nofollow ugc">Extra SystemCallFilter syscalls required for restarting sdwdate on arm64</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>GavinPacini:patch-2</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2021-05-06" data-time="09:14:38" data-timezone="UTC">09:14AM - 06 May 21 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/GavinPacini" target="_blank" rel="noopener nofollow ugc">
          <img alt="GavinPacini" src="https://avatars.githubusercontent.com/u/1523414?v=4" class="onebox-avatar-inline" width="20" height="20">
          GavinPacini
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 2 additions and 2 deletions">
        <a href="https://github.com/Whonix/sdwdate/pull/30/files" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+2</span>
          <span class="removed">-2</span>
        </a>
      </div>
    </div>

  </div>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/64">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/64</link>
        <pubDate>Thu, 06 May 2021 09:15:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-64</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Could you please try <code>sudo systemctl restart sdwdate</code> after it succeeded once? Because first time its sets time using <code>date</code>, subsequent ones using <code>sclockadj</code>. Therefore it might work the first time but break later due to missing secomp whiltelisted syscalls.</p>
<hr>
<p>I am not also wondering if removing/changing <code>SystemCallArchitectures</code> setting would have been easier.<br>
<a href="https://www.freedesktop.org/software/systemd/man/systemd.exec.html#SystemCallArchitectures=">https://www.freedesktop.org/software/systemd/man/systemd.exec.html#SystemCallArchitectures=</a></p>
<p>Also generally wondering if <code>SystemCallFilter</code> is maintainable or will keep breaking when porting to the next version of Debian (<code>bullseye</code>) or other platforms.</p>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/63">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/63</link>
        <pubDate>Wed, 05 May 2021 12:11:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-63</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Awesome!</p>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/62">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/62</link>
        <pubDate>Wed, 05 May 2021 12:03:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-62</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[GavinPacini]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> opened <a href="https://github.com/Whonix/sdwdate/pull/29" rel="noopener nofollow ugc">https://github.com/Whonix/sdwdate/pull/29</a> - this is working on arm64. Will handle onion-grater next.</p>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/61">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/61</link>
        <pubDate>Wed, 05 May 2021 11:59:45 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-61</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[GavinPacini]]></dc:creator>
        <description><![CDATA[
            <p>This is great, I will already try the new SystemCallFilter, and if it does not work on arm64, I’ll follow your debug steps and open a PR.</p>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/60">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/60</link>
        <pubDate>Wed, 05 May 2021 11:29:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-60</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/sdwdate/commit/4d1aeac0fa2e119bc7e0277175acd86aa45503c6" target="_blank" rel="noopener">github.com/Whonix/sdwdate</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/sdwdate/commit/4d1aeac0fa2e119bc7e0277175acd86aa45503c6" target="_blank" rel="noopener">fix systemd sandboxing for powerpc64 / ppc64el platform</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2021-05-05" data-time="07:25:14" data-timezone="UTC">07:25AM - 05 May 21 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank" rel="noopener">
          <img alt="adrelanos" src="https://avatars.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 2 additions and 1 deletions">
        <a href="https://github.com/Whonix/sdwdate/commit/4d1aeac0fa2e119bc7e0277175acd86aa45503c6" target="_blank" rel="noopener">
          <span class="added">+2</span>
          <span class="removed">-1</span>
        </a>
      </div>
    </div>

  </div>
</div>


  <div class="github-row">
    <pre class="github-content" style="white-space: normal;">https://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/58</pre>
  </div>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/59">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/59</link>
        <pubDate>Wed, 05 May 2021 07:26:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-59</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Got an answer on reddit.</p>
<pre><code class="lang-auto">sudo journalctl _AUDIT_TYPE_NAME=SECCOMP -f
</code></pre>
<blockquote>
<p>May 05 06:29:26 whonix1 audit[9740]: SECCOMP auid=4294967295 uid=108 gid=118 ses=4294967295 subj==/usr/bin/sdwdate (enforce) pid=9740 comm=“sdwdate” exe="/usr/bin/python3.7" sig=31 arch=c0000015 <strong>syscall=140</strong> compat=0 ip=0x7fff96cc7df4 code=0x0</p>
</blockquote>
<p>Found <a href="https://chromium.googlesource.com/chromiumos/docs/+/master/constants/syscalls.md">https://chromium.googlesource.com/chromiumos/docs/+/master/constants/syscalls.md</a> for a table to translate</p>
<blockquote>
<p><code>140</code></p>
</blockquote>
<p>to</p>
<blockquote>
<p><code>_llseek</code></p>
</blockquote>
<p>Platform dependent.</p>
<p>Maybe a better table:</p>
<p><a href="https://marcin.juszkiewicz.com.pl/download/tables/syscalls.html">https://marcin.juszkiewicz.com.pl/download/tables/syscalls.html</a></p>
<p>(Replace <code>sdwdate</code> with the systemd unit name to debug.)</p>
<blockquote>
<p>sudoedit /lib/systemd/system/sdwdate.service &amp;&amp; sudo systemctl daemon-reload &amp;&amp; sudo systemctl restart sdwdate &amp;&amp; sudo systemctl --no-page status sdwdate</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/58">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/58</link>
        <pubDate>Wed, 05 May 2021 06:52:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-58</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
      <item>
        <title>Apply systemd sandboxing by default to some services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="https://www.redditstatic.com/desktop2x/img/favicon/android-icon-192x192.png" class="site-icon" width="16" height="16">
      <a href="https://www.reddit.com/r/systemd/comments/n4hvfo/how_to_debug_systemd_seccomp_systemcallfilter/" target="_blank" rel="noopener">reddit</a>
  </header>
  <article class="onebox-body">
    <img src="" class="thumbnail" width="16" height="16">

<h3><a href="https://www.reddit.com/r/systemd/comments/n4hvfo/how_to_debug_systemd_seccomp_systemcallfilter/" target="_blank" rel="noopener">r/systemd - How to debug systemd seccomp SystemCallFilter unit-name.service:...</a></h3>

<p>0 votes and 0 comments so far on Reddit</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/57">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/57</link>
        <pubDate>Tue, 04 May 2021 06:43:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7590-57</guid>
        <source url="http://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590.rss">Apply systemd sandboxing by default to some services</source>
      </item>
  </channel>
</rss>
