<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Replacing meek: Snowflake - Development - Whonix Forum</title>
    <meta name="description" content="Unfortunately meek will soon be dead as domain fronting will be disabled everywhere. Snowflake is the obvious candidate successor because it uses distributed P2P connections and can workaround the domain fronting problem&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="5190.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Replacing meek: Snowflake&#39;" href="5190.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/replacing-meek-snowflake/5190" />
<meta name="twitter:url" content="https://forums.whonix.org/t/replacing-meek-snowflake/5190" />
<meta property="og:title" content="Replacing meek: Snowflake" />
<meta name="twitter:title" content="Replacing meek: Snowflake" />
<meta property="og:description" content="Unfortunately meek will soon be dead as domain fronting will be disabled everywhere. Snowflake is the obvious candidate successor because it uses distributed P2P connections and can workaround the domain fronting problem by communicating via DNS-over-HTTPS.  @iry Thanks for your efforts to give us meek. Will it be feasible to integrate snowflake any time soon? What tasks are needed so I can make a roadmap?  https://blog.torproject.org/domain-fronting-critical-open-web                            ..." />
<meta name="twitter:description" content="Unfortunately meek will soon be dead as domain fronting will be disabled everywhere. Snowflake is the obvious candidate successor because it uses distributed P2P connections and can workaround the domain fronting problem by communicating via DNS-over-HTTPS.  @iry Thanks for your efforts to give us meek. Will it be feasible to integrate snowflake any time soon? What tasks are needed so I can make a roadmap?  https://blog.torproject.org/domain-fronting-critical-open-web                            ..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="12 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="43 ❤" />
<meta property="article:published_time" content="2018-05-11T14:16:36+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="next" href="51904658.html?page=2">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="5190.html">Replacing meek: Snowflake</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-05-11T14:16:36Z' class='post-time'>
                May 11, 2018,  2:16pm
              </time>
              <meta itemprop='dateModified' content='2018-05-11T14:16:36Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Unfortunately meek will soon be dead as domain fronting will be disabled everywhere. Snowflake is the obvious candidate successor because it uses distributed P2P connections and can workaround the domain fronting problem by communicating via DNS-over-HTTPS.</p>
<p><a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/iry">@iry</a> Thanks for your efforts to give us meek. Will it be feasible to integrate snowflake any time soon? What tasks are needed so I can make a roadmap?</p>
<p><a href="../../../external.html?link=https://blog.torproject.org/domain-fronting-critical-open-web" class="onebox" target="_blank">https://blog.torproject.org/domain-fronting-critical-open-web</a><br>
          <a href="../../../external.html?link=https://trac.torproject.org/projects/tor/attachment/wiki/doc/Snowflake/snowflake-schematic.png" target="_blank" rel="nofollow noopener">
            <img src="../../../external.html?link=https://trac.torproject.org/projects/tor/attachment/wiki/doc/Snowflake/snowflake-schematic.png" width="24" height="24">
          </a>
<br>
<a href="../../../external.html?link=https://blog.torproject.org/comment/275141#comment-275141" class="onebox" target="_blank">https://blog.torproject.org/comment/275141#comment-275141</a></p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="3" />
           <span class='post-likes'>3 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../snowflake-addon-released/7754/2.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../snowflake-addon-released/7754/2.html'>
                      <span itemprop='name'>Snowflake addon released</span>
                    </a>
                    <meta itemprop='position' content='4'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../how-to-configure-whonix-gw-to-use-snowflake/8165/2.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../how-to-configure-whonix-gw-to-use-snowflake/8165/2.html'>
                      <span itemprop='name'>How to configure whonix-gw to use snowflake?</span>
                    </a>
                    <meta itemprop='position' content='5'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../whonix-setup-wizard/15630/2.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../whonix-setup-wizard/15630/2.html'>
                      <span itemprop='name'>Whonix setup wizard</span>
                    </a>
                    <meta itemprop='position' content='6'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-05-12T15:21:46Z' class='post-time'>
                May 12, 2018,  3:21pm
              </time>
              <meta itemprop='dateModified' content='2018-05-12T15:21:46Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a href="../../../external.html?link=https://trac.torproject.org/projects/tor/wiki/doc/Snowflake" class="onebox" target="_blank">https://trac.torproject.org/projects/tor/wiki/doc/Snowflake</a></p>
<p><code>Make a deb of snowflake and get into Debian</code><br>
<a href="../../../external.html?link=https://trac.torproject.org/projects/tor/ticket/19409" class="onebox" target="_blank">https://trac.torproject.org/projects/tor/ticket/19409</a></p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-05-23T15:01:50Z' class='post-time'>
                May 23, 2018,  3:01pm
              </time>
              <meta itemprop='dateModified' content='2018-05-23T15:01:50Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Below is my very primitive first try:</p>
<ul>
<li>Get <a href="../../../external.html?link=https://www.torproject.org/projects/torbrowser.html.en#downloads-alpha">Tor Browser LInux64 8.0a7</a>.</li>
<li>Select snowflake as Pluggable Transport and start the Tor Browser.</li>
</ul>
<p>It doesn’t work and the log is as follows:</p>
<pre><code>[NOTICE] Opening Socks listener on 127.0.0.1:9150
[WARN] The communication stream of managed proxy './TorBrowser/Tor/PluggableTransports/snowflake-client' is 'closed'. Most probably the managed proxy stopped running. This might be a bug o\
f the managed proxy, a bug of Tor, or a misconfiguration. Please enable logging on your managed proxy and check the logs for errors.
[NOTICE] Bootstrapped 5%: Connecting to directory server
[WARN] We were supposed to connect to bridge '0.0.3.0:1' using pluggable transport 'snowflake', but we can't find a pluggable transport proxy supporting 'snowflake'. This can happen if you\
 haven't provided a ClientTransportPlugin line, or if your pluggable transport proxy stopped running.
[WARN] Problem bootstrapping. Stuck at 5%: Connecting to directory server. (Can't connect to bridge; PT_MISSING; count 1; recommendation warn; host 2B280B23E1107BB62ABFC40DDCC8824814F80A72\
 at 0.0.3.0:1)                                                                                                                                                                                                     
[NOTICE] Closing no-longer-configured Socks listener on 127.0.0.1:9150
[NOTICE] DisableNetwork is set. Tor will not make or accept non-control network connections. Shutting down all existing connections.
[NOTICE] Closing old Socks listener on 127.0.0.1:9150
</code></pre>
<p>The <a href="../../../external.html?link=https://metrics.torproject.org/userstats-bridge-transport.html?start=2018-02-22&amp;end=2018-05-23&amp;transport=snowflake">User Graph</a> show less than 10 people could connect with it successfully, which indicates there may be something wrong with the current snowflake in TBB.</p>
<hr>
<p>I then tried use <code>snowflake-client</code> with system Tor.</p>
<ul>
<li>copy the binary <code>./TorBrowser/Tor/PluggableTransports/snowflake-client</code> from the TBB</li>
</ul>
<p>Set <code>/usr/local/etc/torrc.d/50_user.conf</code> as:</p>
<pre><code>UseBridges 1
ClientTransportPlugin snowflake exec /home/user/QubesIncoming/latest-Tor/snowflake-client -url https://snowflake-broker.azureedge.net/ -front ajax.aspnetcdn.com -ice stun:stun.l.google.com:19302 -max 3
Bridge snowflake 0.0.3.0:1 2B280B23E1107BB62ABFC40DDCC8824814F80A72
</code></pre>
<p>Tor complains in <code>/var/run/tor/log</code>:</p>
<pre><code>[warn] Problem bootstrapping. Stuck at 5%: Connecting to directory server. (Can't connect to bridge; PT_MISSING; count 6; recommendation warn; host 2B280B23E1107BB62ABFC40DDCC8824814F80A72 at 0.0.3.0:1)
[warn] We were supposed to connect to bridge '0.0.3.0:1' using pluggable transport 'snowflake', but we can't find a pluggable transport proxy supporting 'snowflake'. This can happen if you haven't provided a ClientTransportPlugin line, or if your pluggable transport proxy stopped running.</code></pre>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-05-23T15:05:26Z' class='post-time'>
                May 23, 2018,  3:05pm
              </time>
              <meta itemprop='dateModified' content='2018-05-23T15:05:26Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>If anyone else has the same issue, I will ask for help on tor-dev@.</p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-05-23T15:55:08Z' class='post-time'>
                May 23, 2018,  3:55pm
              </time>
              <meta itemprop='dateModified' content='2018-05-23T15:55:08Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Is snowflake able to talk directly to the internet in your setup? Reason I ask is it uses STUN to coordinate connections which is UDP.</p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-05-23T19:10:00Z' class='post-time'>
                May 23, 2018,  7:10pm
              </time>
              <meta itemprop='dateModified' content='2018-05-23T19:10:00Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Same issue here, bootstrapping is stuck at 5%.</p>
<p>First of all, we have to set two variables in order for snowflake-client to run.<br>
Temporary:<br>
<code>export TOR_PT_MANAGED_TRANSPORT_VER=1</code><br>
<code>export TOR_PT_CLIENT_TRANSPORTS=1</code></p>
<p>Afterwards, snowflake starts with the following error:</p>
<pre><code class="lang-auto">Target URL:  snowflake-broker.azureedge.net 
Front URL:   ajax.aspnetcdn.com
2018/05/23 18:34:59 BrokerChannel Error: dial tcp: lookup ajax.aspnetcdn.com on 10.139.1.2:53: write udp 10.137.0.17:60771-&gt;10.139.1.2:53: write: operation not permitted
2018/05/23 18:34:59 Failed to retrieve answer. Retrying in 10 seconds
</code></pre>
<p><a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/hulahoop">@hulahoop</a> It looks like you are right about UDP.</p>
<p>Note: Tor Browser 8.0a7 is fully bootstrapping with snowflake in a plain Debian 9 vm.</p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-05-24T15:32:35Z' class='post-time'>
                May 24, 2018,  3:32pm
              </time>
              <meta itemprop='dateModified' content='2018-05-24T15:32:35Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="5" data-topic="5190" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Is snowflake able to talk directly to the internet in your setup? Reason I ask is it uses STUN to coordinate connections which is UDP.</p>
</blockquote>
</aside>
<p>I used the same environment as troubadour’s:</p>
<aside class="quote" data-post="6" data-topic="5190">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/d9b06d/40.png" class="avatar"> troubadour:</div>
<blockquote>
<p>Note: Tor Browser 8.0a7 is fully bootstrapping with snowflake in a plain Debian 9 vm.</p>
</blockquote>
</aside>
<p>But I was not able to bootstrap the TBB. It still stuck at 5%.</p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-05-24T19:02:52Z' class='post-time'>
                May 24, 2018,  7:02pm
              </time>
              <meta itemprop='dateModified' content='2018-05-24T19:02:52Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="7" data-topic="5190">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>But I was not able to bootstrap the TBB. It still stuck at 5%.</p>
</blockquote>
</aside>
<p>I have double checked. It seems to work in a Debian vm. To test, I killed snowflake-client after TBB was started and visiting a couple of sites. After killing , it could not connect anywhere.</p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-05-30T03:31:50Z' class='post-time'>
                May 30, 2018,  3:31am
              </time>
              <meta itemprop='dateModified' content='2018-05-30T03:31:50Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/iry">@iry</a> are you testing on Whonix 14 (Stretch) by any chance?</p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-06-01T08:44:20Z' class='post-time'>
                June 1, 2018,  8:44am
              </time>
              <meta itemprop='dateModified' content='2018-06-01T08:44:20Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="9" data-topic="5190" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p><a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/iry">@iry</a> are you testing on Whonix 14 (Stretch) by any chance?</p>
</blockquote>
</aside>
<p>Hi <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/hulahoop">@HulaHoop</a> !</p>
<p>Thank you for helping me debug. I was testing it on Debian, not Whonix. Now I realize that when I tested the snowflake, I routed all my traffic to China which was behind the GFW. Unfortunately, snowflake <strong>did not</strong> bypass the censorship this time.</p>
<p>When I tested without routing the traffic to China, it works perfectly well.</p>
<p>I can’t tell if it is because the snowflake protocol has been identified and blocked by the GFW, or it is just because a few well-known snowflake proxies have been censored.</p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-06-01T11:37:41Z' class='post-time'>
                June 1, 2018, 11:37am
              </time>
              <meta itemprop='dateModified' content='2018-06-01T11:37:41Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="10" data-topic="5190">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>I can’t tell if it is because the snowflake protocol has been identified and blocked by the GFW, or it is just because a few well-known snowflake proxies have been censored.</p>
</blockquote>
</aside>
<p>The observation on the packets indicated that snowflake client did several <code>Binding Request</code> to broker using STUN, but it never gets a <code>Binding Success Response</code> from broker.</p>
<p>In uncensored environment, this can be done immediately with a single <code>Binding Request</code> .</p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-06-02T10:23:12Z' class='post-time'>
                June 2, 2018, 10:23am
              </time>
              <meta itemprop='dateModified' content='2018-06-02T10:23:12Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="3" data-topic="5190">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>I then tried use snowflake-client with system Tor.</p>
<p>copy the binary ./TorBrowser/Tor/PluggableTransports/snowflake-client from the TBB</p>
<p>Set /usr/local/etc/torrc.d/50_user.conf as:</p>
<pre><code>UseBridges 1
ClientTransportPlugin snowflake exec /home/user/QubesIncoming/latest-Tor/snowflake-client -url https://snowflake-broker.azureedge.net/ -front ajax.aspnetcdn.com -ice stun:stun.l.google.com:19302 -max 3
Bridge snowflake 0.0.3.0:1 2B280B23E1107BB62ABFC40DDCC8824814F80A72
</code></pre>
</blockquote>
</aside>
<p>This <strong>works</strong> when running Tor in a Debian-9 VM.</p>
<p>I then tried to port it to Whonix, but failed. Tor complains permission denied when trying to use <code>/etc/tor/snowflake-client</code>:</p>
<p><code>10:05:02 [WARN] Could not launch managed proxy executable at '/etc/tor/snowflake-client' ('Permission denied').</code></p>
<p>Tor is run by systemd with root privilege in Whonix. And the Tor default config shipped by Debian is using <code>User debian-tor</code>. Therefore, Tor is actually running by <code>debian-tor</code>.</p>
<p>However, it seems snowflake-client cannot be run by <code>debian-tor</code> user, other user like <code>user</code> and <code>root</code> works fine with it. I tried to <code>chown</code> and <code>chmod</code>, but snowflake-client still cannot be run by <code>debian-tor</code> user:</p>
<pre><code>user@host:~$ ls -l /etc/tor/snowflake-client 
-rwx------ 1 debian-tor debian-tor 14160744 Jun  2 09:20 /etc/tor/snowflake-client
user@host:~$ sudo -u debian-tor /etc/tor/snowflake-client 
2018/06/02 10:00:52 


 --- Starting Snowflake Client ---
2018/06/02 10:00:52 No HTTP signaling detected. Using manual copy-paste signaling.
2018/06/02 10:00:52 Waiting for a "signal" pipe...
2018/06/02 10:00:52 open signal: permission denied
</code></pre>
<p>Any thoughts on this? <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">

            <link itemprop="image" href="../../uploads/default/original/2X/1/182c0f62badc52c609236173fd9cfc50c412a5cb.png">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-06-02T14:18:22Z' class='post-time'>
                June 2, 2018,  2:18pm
              </time>
              <meta itemprop='dateModified' content='2018-06-02T14:18:22Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The culprit could be that you extracted snowflake to a location that does not support the same type file permissions (shared folder device running another type fs) then copied it from there. Try moving the tarball to the GW first then extracting there?</p>
<p>Source:</p>
<aside class="onebox stackexchange">
  <header class="source">
      <a href="../../../external.html?link=https://askubuntu.com/questions/178410/unable-to-run-tor-browser-bundle-not-even-in-terminal" target="_blank" rel="nofollow noopener">askubuntu.com</a>
  </header>
  <article class="onebox-body">
      <a href="../../../external.html?link=https://askubuntu.com/users/84634/jerry-bliss" target="_blank" rel="nofollow noopener">
    <img alt="Jerry-bliss" src="../../uploads/default/original/2X/1/182c0f62badc52c609236173fd9cfc50c412a5cb.png" class="thumbnail onebox-avatar" width="128" height="128">
  </a>
<h4>
  <a href="../../../external.html?link=https://askubuntu.com/questions/178410/unable-to-run-tor-browser-bundle-not-even-in-terminal" target="_blank" rel="nofollow noopener">Unable to run TOR Browser Bundle, not even in terminal</a>
</h4>

<div class="tags">
  <strong>12.04, tor</strong>
</div>

<div class="date">
  asked by
  
  <a href="../../../external.html?link=https://askubuntu.com/users/84634/jerry-bliss" target="_blank" rel="nofollow noopener">
    Jerry-bliss
  </a>
  on <a href="../../../external.html?link=https://askubuntu.com/questions/178410/unable-to-run-tor-browser-bundle-not-even-in-terminal" target="_blank" rel="nofollow noopener">06:42AM - 21 Aug 12 UTC</a>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-06-04T06:29:12Z' class='post-time'>
                June 4, 2018,  6:29am
              </time>
              <meta itemprop='dateModified' content='2018-06-04T06:29:12Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>It seems snowflake-client still cannot be executed by <code>debian-tor</code> user. Here is the full operations:</p>
<p>Here is the original permission and ownership of <code>snowflake-client</code>:</p>
<pre><code>user@host:~$ ls -l snowflake-client  
-rwx------ 1 user user 14160744 Jun  4 06:17 snowflake-client
</code></pre>
<p>It can be executed by user <code>user</code>:</p>
<pre><code>user@host:~$ sudo -u user ./snowflake-client 
2018/06/04 06:18:21 


 --- Starting Snowflake Client ---
2018/06/04 06:18:21 No HTTP signaling detected. Using manual copy-paste signaling.
2018/06/04 06:18:21 Waiting for a "signal" pipe...
^C
</code></pre>
<p>We now change the permission to let it executable by user <code>debian-tor</code>:</p>
<pre><code>user@host:~$ sudo chmod 777 snowflake-client 


user@host:~$ sudo -u debian-tor ./snowflake-client 
2018/06/04 06:18:43 
</code></pre>
<p>Noticed the permission denied:</p>
<pre><code> --- Starting Snowflake Client ---
2018/06/04 06:18:43 No HTTP signaling detected. Using manual copy-paste signaling.
2018/06/04 06:18:43 Waiting for a "signal" pipe...
2018/06/04 06:18:43 open signal: permission denied
</code></pre>
<p>We now change its ownership to <code>debian-tor:debian-tor</code>:</p>
<pre><code>user@host:~$ sudo chown debian-tor:debian-tor snowflake-client 
user@host:~$ ls -l snowflake-client 
-rwxrwxrwx 1 debian-tor debian-tor 14160744 Jun  4 06:17 snowflake-client
</code></pre>
<p>Still, permission denied:</p>
<pre><code>user@host:~$ sudo -u debian-tor ./snowflake-client 
2018/06/04 06:19:15 


 --- Starting Snowflake Client ---
2018/06/04 06:19:15 No HTTP signaling detected. Using manual copy-paste signaling.
2018/06/04 06:19:15 Waiting for a "signal" pipe...
2018/06/04 06:19:15 open signal: permission denied
</code></pre>
<p>However, when executing it by <code>user</code>, it works fine:</p>
<pre><code>user@host:~$ sudo -u user ./snowflake-client 
2018/06/04 06:19:22 


 --- Starting Snowflake Client ---
2018/06/04 06:19:22 No HTTP signaling detected. Using manual copy-paste signaling.
2018/06/04 06:19:22 Waiting for a "signal" pipe...
^C</code></pre>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-06-04T10:49:00Z' class='post-time'>
                June 4, 2018, 10:49am
              </time>
              <meta itemprop='dateModified' content='2018-06-04T10:49:00Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>better don’t change permissions of singular files. Then the executed<br>
file cannot look at related files.</p>
<pre><code>chown --recursive debian-tor:debian-tor /path/to/folder</code></pre>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-06-06T07:44:18Z' class='post-time'>
                June 6, 2018,  7:44am
              </time>
              <meta itemprop='dateModified' content='2018-06-06T07:44:18Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thank you for telling me this! <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>I tried to extract the tar after sending it to the targeted gateway and then do the <code>chown -R</code> on the entire TBB folder. It still does not work with <code>debian-tor</code> user.</p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-06-06T08:41:43Z' class='post-time'>
                June 6, 2018,  8:41am
              </time>
              <meta itemprop='dateModified' content='2018-06-06T08:41:43Z'>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Still permission denied errors?</p>
<p>Perhaps snowflake wants to write into <code>~/</code> home, which then wouldn’t be possible. There is no debian-tor home folder (not usual to have home folders for system users) and as for user’s home folder, there would be permission denied.</p>
<p>Can snowflake data dire be specified on command line or in config somehow?</p>
<p>Idea… In a non-Whonix test VM… Put a whole home folder under git control. Add all files to git. Start snowflake. Stop snowflake. Use git status to see what files are new or modified.</p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-06-06T08:45:11Z' class='post-time'>
                June 6, 2018,  8:45am
              </time>
              <meta itemprop='dateModified' content='2018-06-06T08:45:11Z'>
          <span itemprop='position'>#18</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>For testing only.</p>
<p>sudo mkdir /home/debian-tor<br>
sudo chown -R debian-tor:debian-tor /home/debian-tor<br>
sudo su debian-tor</p>
<p>(In final version we could not use <code>/home/debian-tor</code>. snowflake-client would have to be a in a proper location and access rights sorted out.)</p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-06-11T13:26:05Z' class='post-time'>
                June 11, 2018,  1:26pm
              </time>
              <meta itemprop='dateModified' content='2018-06-11T13:26:05Z'>
          <span itemprop='position'>#19</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Asked on the tor-dev@:</p>
<p><a href="../../../external.html?link=https://lists.torproject.org/pipermail/tor-dev/2018-June/013210.html" class="onebox" target="_blank">https://lists.torproject.org/pipermail/tor-dev/2018-June/013210.html</a></p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5190.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-06-13T18:08:51Z' class='post-time'>
                June 13, 2018,  6:08pm
              </time>
              <meta itemprop='dateModified' content='2018-06-13T18:08:51Z'>
          <span itemprop='position'>#21</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Tested on both Debian-9 and Whonix-14-Gateway.</p>
<p>I suspected that the issue is related to systemd.</p>
<p>Here are the steps on Whonix-14-Gateway:</p>
<p>First, write confs below to <code>/usr/local/etc/torrc.d/50_user.conf</code>:</p>
<pre><code>DisableNetwork 0
UseBridges 1
ClientTransportPlugin snowflake exec /home/user/snowflake-client -url https://snowflake-broker.azureedge.net/ -front ajax.aspnetcdn.com -ice stun:stun.l.google.com:19302 -max 3
Bridge snowflake 0.0.3.0:1 2B280B23E1107BB62ABFC40DDCC8824814F80A72
</code></pre>
<p>Then do <code>systemctl restart tor</code> and it will complain permission denied.</p>
<p>Now let’s see what systemd really executed:</p>
<pre><code>user@host:~$ grep "ExecStart=" /lib/systemd/system/tor@default.service                                                                                                                                                                        
ExecStart=/usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0                                                                                                                           
</code></pre>
<p>We executed the command ourselves with sudo:</p>
<p><code>sudo /usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0</code></p>
<p>And yes, there will be no complain about “permission denied” and Tor will successfully connect to the Tor network (it may take a little bit time).</p>
<hr>
<p><strong>This indicates systemd does not necessarily work as <code>sudo command-in-the-execstart-section</code>.</strong></p>
<p>To do further investigation into the problem, I need to learn more about how systemd really works.</p>
<p>Any thoughts on this? <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='Replacing meek: Snowflake'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><b><a rel="next" itemprop="url" href="51904658.html?page=2">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
