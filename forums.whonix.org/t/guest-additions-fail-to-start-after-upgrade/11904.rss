<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Guest additions fail to start after upgrade</title>
    <link>http://forums.whonix.org/t/guest-additions-fail-to-start-after-upgrade/11904</link>
    <description>Host - Win10, Virtualbox 6.1.22 r144080
Whonix - Whonix XFCE 15.0.1.7.3

First start is ok, clipboard sharing, screen resizing, etc - everything works well.
But installing updates seem to break guest additions

Here is a dmesg from fully updated Whonix Gateway (the issue also affects workstation)

    [   44.406038] vboxvideo: loading version 6.1.22 r144080
    [   44.463874] 08:18:11.454133 main     VBoxService 6.1.22 r144080 (verbosity: 0) linux.amd64 (Apr 28 2021 18:43:39) release log
                   08:18:11.4541
    [   44.464101] 08:18:11.454779 main     OS Product: Linux
    [   44.464356] 08:18:11.454995 main     OS Release: 4.19.0-17-amd64
    [   44.464719] 08:18:11.455248 main     OS Version: #1 SMP Debian 4.19.194-2 (2021-06-21)
    [   44.465310] 08:18:11.455621 main     Executable: /opt/VBoxGuestAdditions-6.1.22/sbin/VBoxService
                   08:18:11.455622 main     Process ID: 9382
    [   44.467022] 08:18:11.457574 main     6.1.22 r144080 started. Verbose level = 0
    [   44.468705] 08:18:11.459188 main     vbglR3GuestCtrlDetectPeekGetCancelSupport: Supported (#1)
    [   44.471882] 08:18:11.462243 main     Error: Failed to become guest control master: VERR_VERSION_MISMATCH
    [   44.472477] 08:18:11.462910 main     Error: Service &#39;control&#39; failed to initialize: VERR_VERSION_MISMATCH
    [   44.472830] 08:18:11.463442 main     Session 0 is about to close ...
    [   44.473103] 08:18:11.463723 main     Stopping all guest processes ...
    [   44.473354] 08:18:11.464007 main     Closing all guest files ...
    [   44.473963] 08:18:11.464682 main     Ended.
    [   45.331761] Service: Shared Clipboard
    [   45.334355] Service: Host Version Check
    [   45.337093] Service: Seamless
    [   45.339955] Service: Drag and Drop (DnD)
    [   45.342929] Service: Display SVGA X11
    [   45.344141] Worker loop running
    [   45.346587] Proxy window=8388609, root window=940 ...
    [   45.346845] Started
    [   45.346916] 6.1.22r144080
    [   45.348396] VMWARE&#39;s ctrl extension is available. Major Opcode is 128.
    [   45.351440] Failed to register resizing support, rc=VERR_INVALID_FUNCTION
    [   45.583402] Service: Shared Clipboard
    [   45.634858] Service: Host Version Check
    [   45.647659] Service: Seamless
    [   45.666322] Service: Drag and Drop (DnD)
    [   45.677994] Service: Display SVGA X11
    [   45.945545] Denying userspace vmm call type 0x000051
    [   45.945827] Failed to get display change request, rc=VERR_ACCESS_DENIED

This is likely because of the kernel upgrade, for some reason guest additions are only built for the current kernel.</description>
    <language>en</language>
    <lastBuildDate>Sat, 11 Sep 2021 19:00:59 +0000</lastBuildDate>
    <category>VirtualBox</category>
    <atom:link href="http://forums.whonix.org/t/guest-additions-fail-to-start-after-upgrade/11904.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Guest additions fail to start after upgrade</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Fixed in <a href="https://forums.whonix.org/t/whonix-16-has-been-released-debian-11-bullseye-based-for-virtualbox-major-release/12297" class="inline-onebox">Whonix 16 has been Released! (Debian 11 bullseye based) - for VirtualBox - Major Release</a>?</p>
          <p><a href="http://forums.whonix.org/t/guest-additions-fail-to-start-after-upgrade/11904/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/guest-additions-fail-to-start-after-upgrade/11904/4</link>
        <pubDate>Sat, 11 Sep 2021 19:00:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-11904-4</guid>
        <source url="http://forums.whonix.org/t/guest-additions-fail-to-start-after-upgrade/11904.rss">Guest additions fail to start after upgrade</source>
      </item>
      <item>
        <title>Guest additions fail to start after upgrade</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Issue and workaround described here just now:<br>
<a href="https://www.whonix.org/wiki/VirtualBox/Guest_Additions#Kernel_Upgrades">https://www.whonix.org/wiki/VirtualBox/Guest_Additions#Kernel_Upgrades</a></p>
<hr>
<p>Is <a href="https://forums.whonix.org/t/issue-with-failed-to-get-display-change-request/11929" class="inline-onebox">Issue with failed to get display change request</a> the same issue, a duplicate?</p>
          <p><a href="http://forums.whonix.org/t/guest-additions-fail-to-start-after-upgrade/11904/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/guest-additions-fail-to-start-after-upgrade/11904/3</link>
        <pubDate>Fri, 23 Jul 2021 11:15:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-11904-3</guid>
        <source url="http://forums.whonix.org/t/guest-additions-fail-to-start-after-upgrade/11904.rss">Guest additions fail to start after upgrade</source>
      </item>
      <item>
        <title>Guest additions fail to start after upgrade</title>
        <dc:creator><![CDATA[Time-Warp]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">

      <a href="https://www.whonix.org/wiki/VirtualBox/Guest_Additions#Debugging" target="_blank" rel="noopener nofollow ugc" title="03:46PM - 28 April 2021">Whonix – 28 Apr 21</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:110/73;"><img src="https://www.whonix.org/w/images/d/de/Cd-699786640.jpg" class="thumbnail" width="110" height="73"></div>

<h3><a href="https://www.whonix.org/wiki/VirtualBox/Guest_Additions#Debugging" target="_blank" rel="noopener nofollow ugc">VirtualBox/Guest Additions</a></h3>

  <p>Instructions for installing VirtualBox Guest Additions in Whonix ™. Shared Folders, Clipboard Sharing, Mouse Integration and more.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/guest-additions-fail-to-start-after-upgrade/11904/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/guest-additions-fail-to-start-after-upgrade/11904/2</link>
        <pubDate>Tue, 06 Jul 2021 12:11:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-11904-2</guid>
        <source url="http://forums.whonix.org/t/guest-additions-fail-to-start-after-upgrade/11904.rss">Guest additions fail to start after upgrade</source>
      </item>
      <item>
        <title>Guest additions fail to start after upgrade</title>
        <dc:creator><![CDATA[sejoj]]></dc:creator>
        <description><![CDATA[
            <p>Host - Win10, Virtualbox 6.1.22 r144080<br>
Whonix - Whonix XFCE 15.0.1.7.3</p>
<p>First start is ok, clipboard sharing, screen resizing, etc - everything works well.<br>
But installing updates seem to break guest additions</p>
<p>Here is a dmesg from fully updated Whonix Gateway (the issue also affects workstation)</p>
<pre><code>[   44.406038] vboxvideo: loading version 6.1.22 r144080
[   44.463874] 08:18:11.454133 main     VBoxService 6.1.22 r144080 (verbosity: 0) linux.amd64 (Apr 28 2021 18:43:39) release log
               08:18:11.4541
[   44.464101] 08:18:11.454779 main     OS Product: Linux
[   44.464356] 08:18:11.454995 main     OS Release: 4.19.0-17-amd64
[   44.464719] 08:18:11.455248 main     OS Version: #1 SMP Debian 4.19.194-2 (2021-06-21)
[   44.465310] 08:18:11.455621 main     Executable: /opt/VBoxGuestAdditions-6.1.22/sbin/VBoxService
               08:18:11.455622 main     Process ID: 9382
[   44.467022] 08:18:11.457574 main     6.1.22 r144080 started. Verbose level = 0
[   44.468705] 08:18:11.459188 main     vbglR3GuestCtrlDetectPeekGetCancelSupport: Supported (#1)
[   44.471882] 08:18:11.462243 main     Error: Failed to become guest control master: VERR_VERSION_MISMATCH
[   44.472477] 08:18:11.462910 main     Error: Service 'control' failed to initialize: VERR_VERSION_MISMATCH
[   44.472830] 08:18:11.463442 main     Session 0 is about to close ...
[   44.473103] 08:18:11.463723 main     Stopping all guest processes ...
[   44.473354] 08:18:11.464007 main     Closing all guest files ...
[   44.473963] 08:18:11.464682 main     Ended.
[   45.331761] Service: Shared Clipboard
[   45.334355] Service: Host Version Check
[   45.337093] Service: Seamless
[   45.339955] Service: Drag and Drop (DnD)
[   45.342929] Service: Display SVGA X11
[   45.344141] Worker loop running
[   45.346587] Proxy window=8388609, root window=940 ...
[   45.346845] Started
[   45.346916] 6.1.22r144080
[   45.348396] VMWARE's ctrl extension is available. Major Opcode is 128.
[   45.351440] Failed to register resizing support, rc=VERR_INVALID_FUNCTION
[   45.583402] Service: Shared Clipboard
[   45.634858] Service: Host Version Check
[   45.647659] Service: Seamless
[   45.666322] Service: Drag and Drop (DnD)
[   45.677994] Service: Display SVGA X11
[   45.945545] Denying userspace vmm call type 0x000051
[   45.945827] Failed to get display change request, rc=VERR_ACCESS_DENIED
</code></pre>
<p>This is likely because of the kernel upgrade, for some reason guest additions are only built for the current kernel.</p>
          <p><a href="http://forums.whonix.org/t/guest-additions-fail-to-start-after-upgrade/11904/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/guest-additions-fail-to-start-after-upgrade/11904/1</link>
        <pubDate>Tue, 06 Jul 2021 08:40:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-11904-1</guid>
        <source url="http://forums.whonix.org/t/guest-additions-fail-to-start-after-upgrade/11904.rss">Guest additions fail to start after upgrade</source>
      </item>
  </channel>
</rss>
