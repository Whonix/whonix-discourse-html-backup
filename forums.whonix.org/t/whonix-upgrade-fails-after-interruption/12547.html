<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Whonix upgrade fails after interruption - Qubes-Whonix - Whonix Forum</title>
    <meta name="description" content="I started uprading Whonix using the salt command, but the process was 
interrupted. 
On retrying, it fails, unable to create the whonix WS VM due to 
“permission denied”. From journalctl: 
Oct 08 11:24:35 dom0 qubesd[209&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="12547.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Whonix upgrade fails after interruption&#39;" href="12547.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/whonix-upgrade-fails-after-interruption/12547" />
<meta name="twitter:url" content="https://forums.whonix.org/t/whonix-upgrade-fails-after-interruption/12547" />
<meta property="og:title" content="Whonix upgrade fails after interruption" />
<meta name="twitter:title" content="Whonix upgrade fails after interruption" />
<meta property="og:description" content="I started uprading Whonix using the salt command, but the process was  interrupted.  On retrying, it fails, unable to create the whonix WS VM due to  “permission denied”. From journalctl:  Oct 08 11:24:35 dom0 qubesd[2098]: permission denied for call b’admin.vm.Create.AppVM’+b’whonix-ws-16’ (b’dom0’ → b’dom0’) with payload of 31 bytes  (see below for the salt output)  When I run the qvm-create command from the salt output manually, it also  fails, because the whonix-ws-16 template doesn’t exist: ..." />
<meta name="twitter:description" content="I started uprading Whonix using the salt command, but the process was  interrupted.  On retrying, it fails, unable to create the whonix WS VM due to  “permission denied”. From journalctl:  Oct 08 11:24:35 dom0 qubesd[2098]: permission denied for call b’admin.vm.Create.AppVM’+b’whonix-ws-16’ (b’dom0’ → b’dom0’) with payload of 31 bytes  (see below for the salt output)  When I run the qvm-create command from the salt output manually, it also  fails, because the whonix-ws-16 template doesn’t exist: ..." />
<meta property="article:published_time" content="2021-10-11T22:44:33+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="12547.html">Whonix upgrade fails after interruption</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/qubes-whonix/12.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #63a0ff'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Qubes-Whonix</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/threshold2'><span itemprop='name'>threshold2</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="12547.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-10-11T22:44:33Z' class='post-time'>
                October 11, 2021, 10:44pm
              </time>
              <meta itemprop='dateModified' content='2021-10-11T22:44:33Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I started uprading Whonix using the salt command, but the process was<br>
interrupted.</p>
<p>On retrying, it fails, unable to create the whonix WS VM due to<br>
“permission denied”. From journalctl:<br>
Oct 08 11:24:35 dom0 qubesd[2098]: permission denied for call b’admin.vm.Create.AppVM’+b’whonix-ws-16’ (b’dom0’ → b’dom0’) with payload of 31 bytes</p>
<p>(see below for the salt output)</p>
<p>When I run the qvm-create command from the salt output manually, it also<br>
fails, because the whonix-ws-16 template doesn’t exist:<br>
$ qvm-create --verbose whonix-ws-16-dvm --class=AppVM --template=whonix-ws-16 --label=red<br>
2021-10-08 11:33:54,499 [MainProcess qvm_create.main:177] app: Error creating VM: Got empty response from qubesd. See journalctl in dom0 for details.</p>
<p>I assume all this is related to the failed previous attempt.</p>
<p>How do I reset the state so that I can successfully do the upgrade?</p>
<p>[user@dom0 ~]$ sudo qubesctl state.sls qvm.anon-whonix</p>
<p>[WARNING ] /var/cache/salt/minion/extmods/states/ext_state_qvm.py:146: DeprecationWarning: BaseException.message has been deprecated as of Python 2.6<br>
status = Status(retcode=1, result=False, stderr=err.message + ‘\n’)</p>
<p>[ERROR ] ====== [‘features’] ======<br>
Virtual Machine does not exist!</p>
<p>====== [‘tags’] ======<br>
[SKIP] Skipping due to previous failure!<br>
[ERROR ] ====== [‘present’] ======<br>
====== stderr ======<br>
/usr/bin/qvm-create whonix-ws-16-dvm --class=AppVM --template=whonix-ws-16 --label=red<br>
app: Error creating VM: Got empty response from qubesd. See journalctl in dom0 for details.</p>
<p>====== [‘prefs’] ======<br>
Virtual Machine does not exist!</p>
<p>====== [‘features’] ======<br>
[SKIP] Skipping due to previous failure!</p>
<h2>
<a name="tags-skip-skipping-due-to-previous-failure-local-1" class="anchor" href="#tags-skip-skipping-due-to-previous-failure-local-1"></a>====== [‘tags’] ======<br>
[SKIP] Skipping due to previous failure!<br>
local:</h2>
<h2>
<a name="id-template-whonix-ws-16-function-pkginstalled-name-qubes-template-whonix-ws-16-result-true-comment-package-qubes-template-whonix-ws-16-is-already-installed-started-112414138294-duration-5796629-ms-changes-2" class="anchor" href="#id-template-whonix-ws-16-function-pkginstalled-name-qubes-template-whonix-ws-16-result-true-comment-package-qubes-template-whonix-ws-16-is-already-installed-started-112414138294-duration-5796629-ms-changes-2"></a>ID: template-whonix-ws-16<br>
Function: pkg.installed<br>
Name: qubes-template-whonix-ws-16<br>
Result: True<br>
Comment: Package qubes-template-whonix-ws-16 is already installed<br>
Started: 11:24:14.138294<br>
Duration: 5796.629 ms<br>
Changes:</h2>
<p>ID: whonix-ws-tag<br>
Function: qvm.vm<br>
Name: whonix-ws-16<br>
Result: False<br>
Comment: ====== [‘features’] ======<br>
Virtual Machine does not exist!</p>
<h2>
<a name="tags-skip-skipping-due-to-previous-failure-started-112419979281-duration-271503-ms-changes-3" class="anchor" href="#tags-skip-skipping-due-to-previous-failure-started-112419979281-duration-271503-ms-changes-3"></a>====== [‘tags’] ======<br>
[SKIP] Skipping due to previous failure!<br>
Started: 11:24:19.979281<br>
Duration: 271.503 ms<br>
Changes:</h2>
<h2>
<a name="id-whonix-ws-update-policy-function-fileprepend-name-etcqubes-rpcpolicyqubesupdatesproxy-result-true-comment-file-etcqubes-rpcpolicyqubesupdatesproxy-is-in-correct-state-started-112420261980-duration-14769-ms-changes-4" class="anchor" href="#id-whonix-ws-update-policy-function-fileprepend-name-etcqubes-rpcpolicyqubesupdatesproxy-result-true-comment-file-etcqubes-rpcpolicyqubesupdatesproxy-is-in-correct-state-started-112420261980-duration-14769-ms-changes-4"></a>ID: whonix-ws-update-policy<br>
Function: file.prepend<br>
Name: /etc/qubes-rpc/policy/qubes.UpdatesProxy<br>
Result: True<br>
Comment: File /etc/qubes-rpc/policy/qubes.UpdatesProxy is in correct state<br>
Started: 11:24:20.261980<br>
Duration: 14.769 ms<br>
Changes:</h2>
<h2>
<a name="id-whonix-get-date-policy-function-fileprepend-name-etcqubes-rpcpolicyqubesgetdate-result-true-comment-file-etcqubes-rpcpolicyqubesgetdate-is-in-correct-state-started-112420277092-duration-12533-ms-changes-5" class="anchor" href="#id-whonix-get-date-policy-function-fileprepend-name-etcqubes-rpcpolicyqubesgetdate-result-true-comment-file-etcqubes-rpcpolicyqubesgetdate-is-in-correct-state-started-112420277092-duration-12533-ms-changes-5"></a>ID: whonix-get-date-policy<br>
Function: file.prepend<br>
Name: /etc/qubes-rpc/policy/qubes.GetDate<br>
Result: True<br>
Comment: File /etc/qubes-rpc/policy/qubes.GetDate is in correct state<br>
Started: 11:24:20.277092<br>
Duration: 12.533 ms<br>
Changes:</h2>
<h2>
<a name="id-template-whonix-gw-16-function-pkginstalled-name-qubes-template-whonix-gw-16-result-true-comment-package-qubes-template-whonix-gw-16-is-already-installed-started-112420289981-duration-1316-ms-changes-6" class="anchor" href="#id-template-whonix-gw-16-function-pkginstalled-name-qubes-template-whonix-gw-16-result-true-comment-package-qubes-template-whonix-gw-16-is-already-installed-started-112420289981-duration-1316-ms-changes-6"></a>ID: template-whonix-gw-16<br>
Function: pkg.installed<br>
Name: qubes-template-whonix-gw-16<br>
Result: True<br>
Comment: Package qubes-template-whonix-gw-16 is already installed<br>
Started: 11:24:20.289981<br>
Duration: 1.316 ms<br>
Changes:</h2>
<p>ID: whonix-gw-tag<br>
Function: qvm.vm<br>
Name: whonix-gw-16<br>
Result: True<br>
Comment: ====== [‘features’] ======<br>
[SKIP] Feature already in desired state: ENABLE ‘whonix-gw’ = Enabled</p>
<h2>
<a name="tags-skip-all-requested-tags-already-set-created-by-dom0whonix-updatevm-started-112420291708-duration-4714395-ms-changes-7" class="anchor" href="#tags-skip-all-requested-tags-already-set-created-by-dom0whonix-updatevm-started-112420291708-duration-4714395-ms-changes-7"></a>====== [‘tags’] ======<br>
[SKIP] All requested tags already set: created-by-dom0,whonix-updatevm<br>
Started: 11:24:20.291708<br>
Duration: 4714.395 ms<br>
Changes:</h2>
<h2>
<a name="id-whonix-gw-update-policy-function-fileprepend-name-etcqubes-rpcpolicyqubesupdatesproxy-result-true-comment-file-etcqubes-rpcpolicyqubesupdatesproxy-is-in-correct-state-started-112425006518-duration-7468-ms-changes-8" class="anchor" href="#id-whonix-gw-update-policy-function-fileprepend-name-etcqubes-rpcpolicyqubesupdatesproxy-result-true-comment-file-etcqubes-rpcpolicyqubesupdatesproxy-is-in-correct-state-started-112425006518-duration-7468-ms-changes-8"></a>ID: whonix-gw-update-policy<br>
Function: file.prepend<br>
Name: /etc/qubes-rpc/policy/qubes.UpdatesProxy<br>
Result: True<br>
Comment: File /etc/qubes-rpc/policy/qubes.UpdatesProxy is in correct state<br>
Started: 11:24:25.006518<br>
Duration: 7.468 ms<br>
Changes:</h2>
<h2>
<a name="id-sys-net-function-qvmexists-result-true-comment-usrbinqvm-check-sys-net-none-started-112425014322-duration-2048565-ms-changes-9" class="anchor" href="#id-sys-net-function-qvmexists-result-true-comment-usrbinqvm-check-sys-net-none-started-112425014322-duration-2048565-ms-changes-9"></a>ID: sys-net<br>
Function: qvm.exists<br>
Result: True<br>
Comment: /usr/bin/qvm-check sys-net None<br>
Started: 11:24:25.014322<br>
Duration: 2048.565 ms<br>
Changes:</h2>
<h2>
<a name="id-sys-firewall-function-qvmexists-result-true-comment-usrbinqvm-check-sys-firewall-none-started-112427065077-duration-1868662-ms-changes-10" class="anchor" href="#id-sys-firewall-function-qvmexists-result-true-comment-usrbinqvm-check-sys-firewall-none-started-112427065077-duration-1868662-ms-changes-10"></a>ID: sys-firewall<br>
Function: qvm.exists<br>
Result: True<br>
Comment: /usr/bin/qvm-check sys-firewall None<br>
Started: 11:24:27.065077<br>
Duration: 1868.662 ms<br>
Changes:</h2>
<h2>
<a name="id-sys-whonix-function-qvmexists-result-true-comment-usrbinqvm-check-sys-whonix-none-started-112428935733-duration-174459-ms-changes-11" class="anchor" href="#id-sys-whonix-function-qvmexists-result-true-comment-usrbinqvm-check-sys-whonix-none-started-112428935733-duration-174459-ms-changes-11"></a>ID: sys-whonix<br>
Function: qvm.exists<br>
Result: True<br>
Comment: /usr/bin/qvm-check sys-whonix None<br>
Started: 11:24:28.935733<br>
Duration: 1744.59 ms<br>
Changes:</h2>
<p>ID: whonix-ws-16-dvm<br>
Function: qvm.vm<br>
Result: False<br>
Comment: ====== [‘present’] ======<br>
====== stderr ======<br>
/usr/bin/qvm-create whonix-ws-16-dvm --class=AppVM --template=whonix-ws-16 --label=red<br>
app: Error creating VM: Got empty response from qubesd. See journalctl in dom0 for details.</p>
<p>====== [‘prefs’] ======<br>
Virtual Machine does not exist!</p>
<p>====== [‘features’] ======<br>
[SKIP] Skipping due to previous failure!</p>
<h2>
<a name="tags-skip-skipping-due-to-previous-failure-started-112430750482-duration-5255361-ms-changes-12" class="anchor" href="#tags-skip-skipping-due-to-previous-failure-started-112430750482-duration-5255361-ms-changes-12"></a>====== [‘tags’] ======<br>
[SKIP] Skipping due to previous failure!<br>
Started: 11:24:30.750482<br>
Duration: 5255.361 ms<br>
Changes:</h2>
<h2>
<a name="id-qvm-appmenus-update-whonix-ws-16-dvm-function-cmdrun-result-false-comment-one-or-more-requisite-failed-qvmwhonix-ws-dvmwhonix-ws-16-dvm-changes-13" class="anchor" href="#id-qvm-appmenus-update-whonix-ws-16-dvm-function-cmdrun-result-false-comment-one-or-more-requisite-failed-qvmwhonix-ws-dvmwhonix-ws-16-dvm-changes-13"></a>ID: qvm-appmenus --update whonix-ws-16-dvm<br>
Function: cmd.run<br>
Result: False<br>
Comment: One or more requisite failed: qvm.whonix-ws-dvm.whonix-ws-16-dvm<br>
Changes:</h2>
<p>ID: anon-whonix<br>
Function: qvm.exists<br>
Result: True<br>
Comment: /usr/bin/qvm-check anon-whonix None<br>
Started: 11:24:36.008428<br>
Duration: 1999.772 ms<br>
Changes:</p>
<h2>
<a name="summary-for-local-14" class="anchor" href="#summary-for-local-14"></a>Summary for local</h2>
<h2>
<a name="succeeded-10-failed-3-15" class="anchor" href="#succeeded-10-failed-3-15"></a>Succeeded: 10<br>
Failed: 3</h2>
<p>Total states run: 13<br>
Total run time: 23.736 s<br>
DOM0 configuration failed, not continuing</p>
        </div>

        <meta itemprop='headline' content='Whonix upgrade fails after interruption'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="12547.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-10-12T10:46:18Z' class='post-time'>
                October 12, 2021, 10:46am
              </time>
              <meta itemprop='dateModified' content='2021-10-12T10:46:18Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Did you update dom0 beforehand?</p>
<aside class="quote no-group" data-username="threshold2" data-post="1" data-topic="12547">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/t/59ef9b/40.png" class="avatar"> threshold2:</div>
<blockquote>
<p>because the whonix-ws-16 template doesn’t exist:</p>
</blockquote>
</aside>
<p>You can install before using salt as per <a href="../../../external.html?link=https://www.whonix.org/wiki/Qubes/Install" class="inline-onebox">How-to: Install the Stable Version of Qubes-Whonix ™ 16</a></p>
<aside class="quote no-group" data-username="threshold2" data-post="1" data-topic="12547">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/t/59ef9b/40.png" class="avatar"> threshold2:</div>
<blockquote>
<p>$ qvm-create --verbose whonix-ws-16-dvm --class=AppVM --template=whonix-ws-16 --label=red<br>
2021-10-08 11:33:54,499 [MainProcess qvm_create.main:177] app: Error creating VM: Got empty response from qubesd. See journalctl in dom0 for details.</p>
</blockquote>
</aside>
<p>This would be a Qubes, not a Whonix issue. → <a href="../what-to-post-in-this-qubes-whonix-forum-and-what-not/2275.html" class="inline-onebox">What to post in this Qubes-Whonix forum and what not.</a></p>
<p>At very least the error message isn’t great. Please check <a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues">https://github.com/QubesOS/qubes-issues/issues</a> and report a bug if none open yet.</p>
<aside class="quote no-group" data-username="threshold2" data-post="1" data-topic="12547">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/t/59ef9b/40.png" class="avatar"> threshold2:</div>
<blockquote>
<p>See journalctl in dom0 for details.</p>
</blockquote>
</aside>
<p>When reporting at <a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues">https://github.com/QubesOS/qubes-issues/issues</a> you’d probably be asked to provide it so I’d post it upfront.</p>
        </div>

        <meta itemprop='headline' content='Whonix upgrade fails after interruption'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/threshold2'><span itemprop='name'>threshold2</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="12547.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-10-16T19:01:00Z' class='post-time'>
                October 16, 2021,  7:01pm
              </time>
              <meta itemprop='dateModified' content='2021-10-16T19:01:00Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>Did you update dom0 beforehand?</p>
</blockquote>
<p>Yes, however the template installation step fails:</p>
<pre><code class="lang-auto">$ sudo qubes-dom0-update --enablerepo=qubes-templates-community qubes-template-whonix-gw-16 qubes-template-whonix-ws-16
Using sys-whonix as UpdateVM to download updates for Dom0; this may take some time...
qubes-templates-community/metalink                          | 2.8 kB  00:00
qubes-templates-community                                   | 3.0 kB  00:00
qubes-templates-community/primary_db                        | 5.1 kB  00:00
No Match for argument qubes-template-whonix-gw-16
No Match for argument qubes-template-whonix-ws-16
Nothing to download
</code></pre>
<blockquote>
<p>You can install before using salt</p>
</blockquote>
<p>Yes, that’s what I’m doing, and the salt command given there (<code>sudo qubesctl state.sls qvm.anon-whonix</code>) is failing.</p>
<blockquote>
<aside class="quote no-group" data-username="threshold2" data-post="1" data-topic="12547">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/t/59ef9b/40.png" class="avatar"> threshold2:</div>
<blockquote>
<p>See journalctl in dom0 for details.</p>
</blockquote>
</aside>
<p>When reporting at [link] you’d probably be asked to provide it so I’d post it upfront.</p>
</blockquote>
<p>Yes, that’s why I already included the journalctl error in my original<br>
post, here:</p>
        </div>

        <meta itemprop='headline' content='Whonix upgrade fails after interruption'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="12547.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-10-16T19:33:02Z' class='post-time'>
                October 16, 2021,  7:33pm
              </time>
              <meta itemprop='dateModified' content='2021-10-17T08:22:24Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-username="threshold2" data-post="3" data-topic="12547">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/t/59ef9b/40.png" class="avatar"> threshold2:</div>
<blockquote>
<blockquote>
<p>Did you update dom0 beforehand?</p>
</blockquote>
<p>Yes, however the template installation step fails:</p>
<pre><code class="lang-auto">$ sudo qubes-dom0-update --enablerepo=qubes-templates-community qubes-template-whonix-gw-16 qubes-template-whonix-ws-16
Using sys-whonix as UpdateVM to download updates for Dom0; this may take some time...
qubes-templates-community/metalink                          | 2.8 kB  00:00
qubes-templates-community                                   | 3.0 kB  00:00
qubes-templates-community/primary_db                        | 5.1 kB  00:00
No Match for argument qubes-template-whonix-gw-16
No Match for argument qubes-template-whonix-ws-16
Nothing to download
</code></pre>
</blockquote>
</aside>
<p>This is a Qubes issue. Whonix doesn’t maintain the Qubes repository or qubes-dom0-update.</p>
<p>That could happen if the package is already in “some sort of installed”. To check that’s not the case of having any packages already installed, see:</p>
<p>dom0:</p>
<pre><code>dnf list | grep qubes-template-whonix
</code></pre>
<aside class="quote no-group quote-modified" data-username="threshold2" data-post="3" data-topic="12547">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/t/59ef9b/40.png" class="avatar"> threshold2:</div>
<blockquote>
<blockquote>
<aside class="quote no-group" data-username="threshold2" data-post="1" data-topic="12547">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/t/59ef9b/40.png" class="avatar"> threshold2:</div>
<blockquote>
<p>See journalctl in dom0 for details.</p>
</blockquote>
</aside>
<p>When reporting at [link] you’d probably be asked to provide it so I’d post it upfront.</p>
</blockquote>
<p>Yes, that’s why I already included the journalctl error in my original<br>
post, here:</p>
</blockquote>
</aside>
<p>As mentioned, that belongs to Qubes issues. I cannot resolve it here, highly unlikely being resolved here, has a chance of getting resolved at qubes-issues.</p>
<p>There’s no output of journalctl as far as I can see. Even if there was, I cannot work on that.</p>
        </div>

        <meta itemprop='headline' content='Whonix upgrade fails after interruption'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/threshold2'><span itemprop='name'>threshold2</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="12547.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-10-19T19:32:30Z' class='post-time'>
                October 19, 2021,  7:32pm
              </time>
              <meta itemprop='dateModified' content='2021-10-19T19:32:30Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>This is a Qubes issue. Whonix doesn’t maintain the Qubes repository or qubes-dom0-update.</p>
</blockquote>
<p>Whonix does maintain the installation instructions which I’m following<br>
<img src="../../images/emoji/twitter/slight_smilec164.png?v=9" title=":slight_smile:" class="emoji only-emoji" alt=":slight_smile:"></p>
<blockquote>
<p>That could happen if the package is already in “some sort of installed”. To check that’s not the case of having any packages already<br>
installed, see:</p>
<p>dom0:</p>
<p>dnf list | grep qubes-template-whonix</p>
</blockquote>
<p>It looks like “some sort of installed” is correct. Uninstalling it also<br>
fails, probably because there is no whonix-ws-16 template:</p>
<pre><code class="lang-auto">
# dnf list | grep qubes-template-whonix
qubes-template-whonix-gw-15.noarch     4.0.6-202103292247     @qubes-dom0-cached
qubes-template-whonix-gw-16.noarch     4.0.6-202109211111     @qubes-dom0-cached
qubes-template-whonix-ws-15.noarch     4.0.6-202103292247     @qubes-dom0-cached
qubes-template-whonix-ws-16.noarch     4.0.6-202109211111     @System

# dnf remove qubes-template-whonix-ws-16
[...]

usage: qvm-template-postprocess [--verbose] [--quiet] [--help] [--really]
                                [--skip-start] [--keep-source]
                                {post-install,pre-remove} name dir
qvm-template-postprocess: error: No Qube with this name exists
error: %preun(qubes-template-whonix-ws-16-4.0.6-202109211111.noarch) scriptlet failed, exit status 2
Error in PREUN scriptlet in rpm package qubes-template-whonix-ws-16
Error in PREUN scriptlet in rpm package qubes-template-whonix-ws-16
qubes-template-whonix-ws-16-4.0.6-202109211111.noarch was supposed to be removed but is not!
  Verifying   : qubes-template-whonix-ws-16-4.0.6-202109211111.noarch                           1/1

Removed:
  qubes-template-whonix-ws-16.noarch 4.0.6-202109211111

Complete!

</code></pre>
        </div>

        <meta itemprop='headline' content='Whonix upgrade fails after interruption'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/threshold2'><span itemprop='name'>threshold2</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="12547.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-10-19T19:33:52Z' class='post-time'>
                October 19, 2021,  7:33pm
              </time>
              <meta itemprop='dateModified' content='2021-10-19T19:33:52Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I also haven’t been able to work out where the %preun script is located, else I would try editing it to remove the part where it tries to remove the (not present) whonix-ws-16 template.</p>
        </div>

        <meta itemprop='headline' content='Whonix upgrade fails after interruption'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/threshold2'><span itemprop='name'>threshold2</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="12547.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-10-21T11:54:56Z' class='post-time'>
                October 21, 2021, 11:54am
              </time>
              <meta itemprop='dateModified' content='2021-10-21T11:54:56Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Possible solution:<br>
<code>sudo rpm -e --nopreun qubes-template-whonix-ws-16</code></p>
        </div>

        <meta itemprop='headline' content='Whonix upgrade fails after interruption'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/threshold2'><span itemprop='name'>threshold2</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="12547.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-10-21T14:52:01Z' class='post-time'>
                October 21, 2021,  2:52pm
              </time>
              <meta itemprop='dateModified' content='2021-10-21T14:52:01Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="threshold2" data-post="7" data-topic="12547">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/t/59ef9b/40.png" class="avatar"> threshold2:</div>
<blockquote>
<p><code>sudo rpm -e --nopreun qubes-template-whonix-ws-16</code></p>
</blockquote>
</aside>
<p>That appears to have fixed it. The salt command now works:<br>
<code>sudo qubesctl state.sls qvm.anon-whonix</code></p>
        </div>

        <meta itemprop='headline' content='Whonix upgrade fails after interruption'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
