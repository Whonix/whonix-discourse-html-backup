<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>systemcheck error/script bug</title>
    <link>http://forums.whonix.org/t/systemcheck-error-script-bug/13135</link>
    <description>got this in a working gateway from running:

    $systemcheck --verbose --leak-tests

partial output it said to report

    failed:
    ########################################
    [ERROR] [systemcheck] ###############################################################################
    ## systemcheck script bug.
    ## No panic. Nothing is broken. Just some rare condition has been hit.
    ## Try again later. There is likely a solution for this problem.
    ## Please see Whonix News, Whonix Blog and Whonix User Help Forum.
    ## Please report this bug!
    ##
    ## who_ami: systemcheck
    ## identifier: 
    ## IDENTIFIER: systemcheck
    ## exit_code: 0
    ## error_cause: error_handler signal ERR detected with BASH_COMMAND:
    /usr/libexec/msgcollector/br_add &quot;$grep_fail_output&quot;
    ##
    ## Experts only:
    ## bash -x systemcheck --verbose
    ## for verbose output. Clean the output and report to Whonix developers.
    #########################################################################
    systemcheck: signal ERR received. Cleaning up... Exiting...
    [INFO] [systemcheck] systemcheck aborted! (SIGNAL_TYPE: ERR)</description>
    <language>en</language>
    <lastBuildDate>Tue, 04 Jan 2022 07:38:07 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/systemcheck-error-script-bug/13135.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>systemcheck error/script bug</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="mimp" data-post="1" data-topic="13135">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/47e85d/40.png" class="avatar"> mimp:</div>
<blockquote>
<p><code>/usr/libexec/msgcollector/br_add "$grep_fail_output"</code></p>
</blockquote>
</aside>
<aside class="quote no-group" data-username="mimp" data-post="5" data-topic="13135">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/47e85d/40.png" class="avatar"> mimp:</div>
<blockquote>
<p>The sdwdate.service Failed messages seemed bad though.</p>
</blockquote>
</aside>
<p>These are all very different issues happening randomly and non-reproducible. I would expect <a href="https://www.whonix.org/wiki/Troubleshooting#Hardware_Issues">Hardware Issues</a>.</p>
<aside class="quote no-group" data-username="mimp" data-post="5" data-topic="13135">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/47e85d/40.png" class="avatar"> mimp:</div>
<blockquote>
<pre><code class="lang-auto"> General Timeout Error: Internet connection might be down.
</code></pre>
</blockquote>
</aside>
<p>Yet a different issue.</p>
          <p><a href="http://forums.whonix.org/t/systemcheck-error-script-bug/13135/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/systemcheck-error-script-bug/13135/6</link>
        <pubDate>Tue, 04 Jan 2022 07:38:07 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13135-6</guid>
        <source url="http://forums.whonix.org/t/systemcheck-error-script-bug/13135.rss">systemcheck error/script bug</source>
      </item>
      <item>
        <title>systemcheck error/script bug</title>
        <dc:creator><![CDATA[mimp]]></dc:creator>
        <description><![CDATA[
            <p>Guess so. I did get it a couple times, but have rebooted since.</p>
<p>The sdwdate.service Failed messages seemed bad though.</p>
<p>systemcheck on the workstation gave:</p>
<pre><code>[INFO] [systemcheck] libzone | Whonix-Workstation | Standalone AppVM | Mon 03 Jan 2022 04:23:35 PM UTC
[ERROR] [systemcheck] Time Synchronization Result:
systemcheck gave up waiting.

Time synchronization status: fail
sdwdate reports: General Timeout Error. Internet connection might be down.
whonix_firewall status: first run after boot

Possible issues:

- sdwdate time sources might be dysfunctional.

Recommendations:

A) Rerun systemcheck:
dom0 -&gt; Start Menu -&gt; Domain: libzone -&gt; systemcheck
or in Terminal: systemcheck
or more verbose in Terminal: systemcheck --verbose --gui --cli

B) Restart sdwdate.
dom0 -&gt; Start Menu -&gt; Domain: libzone -&gt; sdwdate-gui -&gt; right click on sdwdate-gui systray -&gt; Restart sdwdate
or in Terminal: sudo service sdwdate restart

C) Manually set the time.

As last resort...

1. Open a terminal. (dom0 -&gt; Start Menu -&gt; Domain: libzone -&gt; Terminal)
2. Use the manual clock setting tool. sudo --set-home clock-random-manual-gui
3. Simulate sdwdate success. sudo -u sdwdate touch /run/sdwdate/first_success
4. Rerun systemcheck.
</code></pre>
<p>Gateway sdwdate status gives:</p>
<pre><code>Last message from [gateway] sdwdate: Time fetching in progress...
</code></pre>
<p>Workstation sdwdate status:</p>
<pre><code> General Timeout Error: Internet connection might be down.
</code></pre>
<p>Internet connection is not down. I restarted sdwdate on gateway, got same messages. I restarted sdwdate on workstation,  now it gives “Success” as status.</p>
<p>Seems OK.</p>
          <p><a href="http://forums.whonix.org/t/systemcheck-error-script-bug/13135/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/systemcheck-error-script-bug/13135/5</link>
        <pubDate>Mon, 03 Jan 2022 16:13:21 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13135-5</guid>
        <source url="http://forums.whonix.org/t/systemcheck-error-script-bug/13135.rss">systemcheck error/script bug</source>
      </item>
      <item>
        <title>systemcheck error/script bug</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Transient issue? Not happening anymore?</p>
          <p><a href="http://forums.whonix.org/t/systemcheck-error-script-bug/13135/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/systemcheck-error-script-bug/13135/4</link>
        <pubDate>Mon, 03 Jan 2022 08:38:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13135-4</guid>
        <source url="http://forums.whonix.org/t/systemcheck-error-script-bug/13135.rss">systemcheck error/script bug</source>
      </item>
      <item>
        <title>systemcheck error/script bug</title>
        <dc:creator><![CDATA[mimp]]></dc:creator>
        <description><![CDATA[
            <pre><code> systemcheck --debug --verbose --function check_journal | less
</code></pre>
<p>returns</p>
<pre><code>systemcheck debug output...
Script running as systemcheck
[ESC[32mINFOESC(BESC[m] [systemcheck] systemd journal check Result:
warnings:
########################################

########################################

failed:
########################################
Jan 02 16:16:38 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:18:59 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:21:15 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:21:49 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:22:26 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:22:48 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:23:25 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:23:57 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:24:47 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:25:02 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:25:24 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:25:45 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:28:01 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:28:29 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:29:01 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:29:20 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:29:35 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:29:56 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:30:17 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:30:56 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:31:33 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:32:06 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:32:27 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
Jan 02 16:32:45 host systemd[1]: sdwdate.service: Failed with result 'exit-code'.
[repeats this over and over and over]

########################################

errors:
########################################
Jan 02 16:12:57 host kernel: ACPI Error: No handler or method for GPE 00, disabling event (20200925/evgpe-839)
Jan 02 16:12:57 host kernel: ACPI Error: No handler or method for GPE 01, disabling event (20200925/evgpe-839)
Jan 02 16:12:57 host kernel: ACPI Error: No handler or method for GPE 03, disabling event (20200925/evgpe-839)
Jan 02 16:12:57 host kernel: ACPI Error: No handler or method for GPE 04, disabling event (20200925/evgpe-839)
Jan 02 16:12:57 host kernel: ACPI Error: No handler or method for GPE 05, disabling event (20200925/evgpe-839)
Jan 02 16:12:57 host kernel: ACPI Error: No handler or method for GPE 06, disabling event (20200925/evgpe-839)
Jan 02 16:12:57 host kernel: ACPI Error: No handler or method for GPE 07, disabling event (20200925/evgpe-839)
Jan 02 16:15:01 host kernel: Error: Driver 'pcspkr' is already registered, aborting...
########################################

denied:
########################################

########################################

ordering cycle:
########################################

########################################

To see this for yourself...
1. Open a terminal. (dom0 -&gt; Start Menu -&gt; ServiceVM: [Qubename] -&gt; Terminal)
2. Run. sudo journalctl --boot | grep -i warn
3. Run. sudo journalctl --boot | grep -i fail
4. Run. sudo journalctl --boot | grep -i error
5. Run. sudo journalctl --boot | grep -i denied
6. Run. sudo journalctl --boot | grep -i "ordering cycle"

If you know what you are doing, feel free to disable this check.
Create a file /etc/systemcheck.d/50_user.conf and add:
systemcheck_skip_functions+=" check_journal "</code></pre>
          <p><a href="http://forums.whonix.org/t/systemcheck-error-script-bug/13135/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/systemcheck-error-script-bug/13135/3</link>
        <pubDate>Sun, 02 Jan 2022 23:40:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13135-3</guid>
        <source url="http://forums.whonix.org/t/systemcheck-error-script-bug/13135.rss">systemcheck error/script bug</source>
      </item>
      <item>
        <title>systemcheck error/script bug</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="mimp" data-post="1" data-topic="13135">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/47e85d/40.png" class="avatar"> mimp:</div>
<blockquote>
<p>partial output it said to report</p>
<pre><code class="lang-auto">
</code></pre>
</blockquote>
</aside>
<p>I see. Well, I didn’t really consider that box to imply “copy that box only”.</p>
<aside class="quote no-group" data-username="mimp" data-post="1" data-topic="13135">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/47e85d/40.png" class="avatar"> mimp:</div>
<blockquote>
<p><code>/usr/libexec/msgcollector/br_add "$grep_fail_output"</code></p>
</blockquote>
</aside>
<p>This is very weird. I don’t see how this could go unnoticed for years and now suddenly fail for 1 user.</p>
<p>Related source code:</p>
<aside class="onebox githubblob">
  <header class="source">

      <a href="https://github.com/Whonix/msgcollector/blob/master/usr/libexec/msgcollector/br_add" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/msgcollector/blob/master/usr/libexec/msgcollector/br_add" target="_blank" rel="noopener">Whonix/msgcollector/blob/master/usr/libexec/msgcollector/br_add</a></h4>


    <pre><code class="lang-">#!/usr/bin/python3 -u

## Copyright (C) 2014 troubadour &lt;trobador@riseup.net&gt;
## Copyright (C) 2014 - 2021 ENCRYPTED SUPPORT LP &lt;adrelanos@whonix.org&gt;
## See the file COPYING for copying conditions.

import sys
in_ = sys.argv[1]
out = '&lt;br /&gt;\n'.join(in_.split('\n'))
print(out)
</code></pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox githubblob">
  <header class="source">

      <a href="https://github.com/Whonix/systemcheck/blob/master/usr/libexec/systemcheck/check_services.bsh#L111" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/systemcheck/blob/master/usr/libexec/systemcheck/check_services.bsh#L111" target="_blank" rel="noopener">Whonix/systemcheck/blob/master/usr/libexec/systemcheck/check_services.bsh#L111</a></h4>



  <pre class="onebox">    <code class="lang-bsh">
      <ol class="start lines" start="101" style="counter-reset: li-counter 100 ;">
          <li>   if \</li>
          <li>   [ "$grep_warn_output" = "" ] &amp;&amp; \</li>
          <li>   [ "$grep_fail_output" = "" ] &amp;&amp; \</li>
          <li>   [ "$grep_error_output" = "" ] &amp;&amp; \</li>
          <li>   [ "$grep_denied_output" = "" ] &amp;&amp; \</li>
          <li>   [ "$grep_ordering_output" = "" ]; then</li>
          <li>      return 0</li>
          <li>   fi</li>
          <li>
          </li>
<li>   grep_warn_output="$(/usr/libexec/msgcollector/br_add "$grep_warn_output")"</li>
          <li class="selected">   grep_fail_output="$(/usr/libexec/msgcollector/br_add "$grep_fail_output")"</li>
          <li>   grep_error_output="$(/usr/libexec/msgcollector/br_add "$grep_error_output")"</li>
          <li>   grep_denied_output="$(/usr/libexec/msgcollector/br_add "$grep_denied_output")"</li>
          <li>   grep_ordering_output="$(/usr/libexec/msgcollector/br_add "$grep_ordering_output")"</li>
          <li>
          </li>
<li>   local if_you_know_what_you_are_doing_msg</li>
          <li>   if_you_know_what_you_are_doing_msg="$(if_you_know_what_you_are_doing_funct "$FUNCNAME")"</li>
          <li>
          </li>
<li>   local MSG</li>
          <li>   MSG="&lt;p&gt;systemd journal check Result:</li>
          <li>&lt;br&gt;&lt;/br&gt;warnings:</li>
      </ol>
    </code>
  </pre>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<hr>
<p>To gather more debug output, please run:</p>
<pre><code>systemcheck --debug --verbose --function check_journal</code></pre>
          <p><a href="http://forums.whonix.org/t/systemcheck-error-script-bug/13135/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/systemcheck-error-script-bug/13135/2</link>
        <pubDate>Sun, 02 Jan 2022 09:29:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13135-2</guid>
        <source url="http://forums.whonix.org/t/systemcheck-error-script-bug/13135.rss">systemcheck error/script bug</source>
      </item>
      <item>
        <title>systemcheck error/script bug</title>
        <dc:creator><![CDATA[mimp]]></dc:creator>
        <description><![CDATA[
            <p>got this in a working gateway from running:</p>
<pre><code>$systemcheck --verbose --leak-tests
</code></pre>
<p>partial output it said to report</p>
<pre><code>failed:
########################################
[ERROR] [systemcheck] ###############################################################################
## systemcheck script bug.
## No panic. Nothing is broken. Just some rare condition has been hit.
## Try again later. There is likely a solution for this problem.
## Please see Whonix News, Whonix Blog and Whonix User Help Forum.
## Please report this bug!
##
## who_ami: systemcheck
## identifier: 
## IDENTIFIER: systemcheck
## exit_code: 0
## error_cause: error_handler signal ERR detected with BASH_COMMAND:
/usr/libexec/msgcollector/br_add "$grep_fail_output"
##
## Experts only:
## bash -x systemcheck --verbose
## for verbose output. Clean the output and report to Whonix developers.
#########################################################################
systemcheck: signal ERR received. Cleaning up... Exiting...
[INFO] [systemcheck] systemcheck aborted! (SIGNAL_TYPE: ERR)</code></pre>
          <p><a href="http://forums.whonix.org/t/systemcheck-error-script-bug/13135/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/systemcheck-error-script-bug/13135/1</link>
        <pubDate>Sun, 02 Jan 2022 02:07:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13135-1</guid>
        <source url="http://forums.whonix.org/t/systemcheck-error-script-bug/13135.rss">systemcheck error/script bug</source>
      </item>
  </channel>
</rss>
