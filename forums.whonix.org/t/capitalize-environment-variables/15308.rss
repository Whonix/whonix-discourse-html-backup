<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>capitalize environment variables</title>
    <link>http://forums.whonix.org/t/capitalize-environment-variables/15308</link>
    <description>## Problem

Continuing the discussion from [inform user that torbrowser won&amp;#x27;t start](https://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/2):

I was trying to avoid starting torbrowser from reading the script, and took some time to find `tb_no_start`.

- it is an environment variable
  - should be capitalized
  - should be on the ENVIRONMENT section of torbrowser man page

## Proof:

Run: `env`.
It will display the environment variables, which are capitalized can be reused by other scripts.

Shellscript portability:
https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html#tag_08

&gt; Environment variable names used by the utilities in the Shell and Utilities volume of POSIX.1-2017 consist solely of uppercase letters, digits, and the &lt;underscore&gt; ( &#39;_&#39; ) from the characters defined in [*Portable Character Set*](https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap06.html#tagtcjh_3) and do not begin with a digit. Other characters may be permitted by an implementation; applications shall tolerate the presence of such names. Uppercase and lowercase letters shall retain their unique identities and shall not be folded together. The name space of environment variable names containing lowercase letters is reserved for applications. Applications can define any environment variables with names from this name space without modifying the behavior of the standard utilities.


Other programming languages may use uppercase variables even when they are not environment variables, such as python and rust that use uppercase for constants.


## What is missing from whonix

- capitalize all environment variables
- add to man page the use case of each environment variable</description>
    <language>en</language>
    <lastBuildDate>Mon, 26 Sep 2022 13:14:34 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/capitalize-environment-variables/15308.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>capitalize environment variables</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>The word “global variable” might be quite confusing. Just script wide:</p>
<ul>
<li>local variables (bash keyword <code>local</code>)</li>
<li>global variables (bash default)</li>
</ul>
<p>I am not referring to Debian / Linux wide variables such as <code>PATH</code>, <code>TERM</code> etc.</p>
<p>For “global” variables inside some standalone script. (<code>grep -r bin/bash /usr/bin</code>)</p>
<p>Which convention should be used? Probably not upper case unless that variable is documented as an environment variable?</p>
<aside class="quote no-group" data-username="nyxnor" data-post="8" data-topic="15308">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/nyxnor/40/2874_2.png" class="avatar"> nyxnor:</div>
<blockquote>
<p>I think env vars to set the firewall are not a good design because if calling as root, user need to remember to keepend</p>
<ul>
<li>doas use keepenv in the doas.conf</li>
<li>sudo use <code>-E, --keepenv</code>
</li>
</ul>
<p>I think this can cause confusion.</p>
</blockquote>
</aside>
<pre><code>sudo varname=content program
</code></pre>
<p>Then no <code>-E</code> / <code>--keepenv</code> required but indeed. Difficult to use and confusing. That’s more a thing for developers. Not something for user documentation.</p>
          <p><a href="http://forums.whonix.org/t/capitalize-environment-variables/15308/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/capitalize-environment-variables/15308/9</link>
        <pubDate>Mon, 26 Sep 2022 13:14:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15308-9</guid>
        <source url="http://forums.whonix.org/t/capitalize-environment-variables/15308.rss">capitalize environment variables</source>
      </item>
      <item>
        <title>capitalize environment variables</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="7" data-topic="15308">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>So keep them lowercase?</p>
<p>I am not sure. In theory, whonix_firewall could be started from the command line with environment variables. Not sure that should be supported. An interesting use case would be <code>firewall_mode</code>.</p>
</blockquote>
</aside>
<p>I think env vars to set the firewall are not a good design because if calling as root, user need to remember to keepend</p>
<ul>
<li>doas use keepenv in the doas.conf</li>
<li>sudo use <code>-E, --keepenv</code>
</li>
</ul>
<p>I think this can cause confusion.</p>
<aside class="quote no-group" data-username="Patrick" data-post="7" data-topic="15308">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>What’s the convention for bash config snippets in /etc? /etc/default/grub uses uppercase variable names.</p>
</blockquote>
</aside>
<p>I don’t think it would change but seeing some scripts on etc with upper-case, I believe the best is to set a whonix project policy for uniformity.</p>
<aside class="quote no-group" data-username="Patrick" data-post="7" data-topic="15308">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>To improve my previous question: Lets say there was a script named debian-do-something by Debian (unspecific to Whonix) (asking general conventions here). How would global variables only valid in debian-do-something be stylized? Lowercase or uppercase?</p>
</blockquote>
</aside>
<p>“Only valid to debian” → upper case</p>
<p>but for example, <code>debian_chroot</code> is not capitalized, so in the end, they also decide when to do so or not.</p>
          <p><a href="http://forums.whonix.org/t/capitalize-environment-variables/15308/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/capitalize-environment-variables/15308/8</link>
        <pubDate>Mon, 26 Sep 2022 13:04:40 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15308-8</guid>
        <source url="http://forums.whonix.org/t/capitalize-environment-variables/15308.rss">capitalize environment variables</source>
      </item>
      <item>
        <title>capitalize environment variables</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>I generally agree with you. For the next release upgrade, we could move to the more conventional style.</p>
<p>To clarify, at this stage, we don’t have any different opinions on this topic yet. Meaning, I am open to go with your suggestions. Just in case that previously came across differently.</p>
<aside class="quote no-group" data-username="nyxnor" data-post="6" data-topic="15308">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/nyxnor/40/2874_2.png" class="avatar"> nyxnor:</div>
<blockquote>
<p>But the variables <code>/etc/whonix_firewall.d</code> are only for whonix firewall.</p>
</blockquote>
</aside>
<p>So keep them lowercase?</p>
<p>I am not sure. In theory, whonix_firewall could be started from the command line with environment variables. Not sure that should be supported. An interesting use case would be <code>firewall_mode</code>.</p>
<p>What’s the convention for bash config snippets in /etc? /etc/default/grub uses uppercase variable names.</p>
<hr>
<p>To improve my previous question: Lets say there was a script named debian-do-something by Debian (unspecific to Whonix) (asking general conventions here). How would global variables only valid in debian-do-something be stylized? Lowercase or uppercase?</p>
          <p><a href="http://forums.whonix.org/t/capitalize-environment-variables/15308/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/capitalize-environment-variables/15308/7</link>
        <pubDate>Mon, 26 Sep 2022 12:46:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15308-7</guid>
        <source url="http://forums.whonix.org/t/capitalize-environment-variables/15308.rss">capitalize environment variables</source>
      </item>
      <item>
        <title>capitalize environment variables</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p>The thing is, those variables are only used by firewall scripts.</p>
<p>Let’s take PATH for example, there is no problem in modifying PATH and adding <code>~/.local/bin</code> to it by configuring it on the <code>.bashrc</code>, because PATH set in the .bashrc is user wide environment.</p>
<p>But the variables <code>/etc/whonix_firewall.d</code> are only for whonix firewall.</p>
<p>But in the end, you decide the approach but it has to be documented the standard to be followed, as it makes more clear what developers should use.</p>
          <p><a href="http://forums.whonix.org/t/capitalize-environment-variables/15308/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/capitalize-environment-variables/15308/6</link>
        <pubDate>Mon, 26 Sep 2022 12:21:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15308-6</guid>
        <source url="http://forums.whonix.org/t/capitalize-environment-variables/15308.rss">capitalize environment variables</source>
      </item>
      <item>
        <title>capitalize environment variables</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Ok.</p>
<p>How about global (non-environment) script wide variables?</p>
          <p><a href="http://forums.whonix.org/t/capitalize-environment-variables/15308/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/capitalize-environment-variables/15308/5</link>
        <pubDate>Mon, 26 Sep 2022 11:10:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15308-5</guid>
        <source url="http://forums.whonix.org/t/capitalize-environment-variables/15308.rss">capitalize environment variables</source>
      </item>
      <item>
        <title>capitalize environment variables</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p>Normal variables shouldn’t be capitalized.</p>
<p>Whonix firewall scripts are using upper-case variables for normal variables.</p>
<p>Another reason of why their case needs to be distinct is to make the hierarchy obvious.<br>
For example, if one variable is named <code>gateway</code>, its environment variable could still be named <code>GATEWAY</code> and it would be obvious their difference, because upper-case variables are variables exported to the environment.</p>
<pre><code class="lang-auto">export GATEWAY="sys-whonix-dev"
</code></pre>
<pre><code class="lang-auto">#!/bin/sh
# follow hierarchy:
# - command line
# - environment variable
# - default fallback value
gateway="${1:-"${GATEWAY:-"sys-whonix"}"}"
echo "${gateway}
</code></pre>
<p>this makes obvious that GATEWAY was exported to the environment and another variable can be used with the same name but lower case for defaults or assigned by other means.</p>
          <p><a href="http://forums.whonix.org/t/capitalize-environment-variables/15308/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/capitalize-environment-variables/15308/4</link>
        <pubDate>Sun, 25 Sep 2022 22:15:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15308-4</guid>
        <source url="http://forums.whonix.org/t/capitalize-environment-variables/15308.rss">capitalize environment variables</source>
      </item>
      <item>
        <title>capitalize environment variables</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p><code>UWT_</code> variables are capitalized but not documented as there is no <code>uwt</code> man page.</p>
          <p><a href="http://forums.whonix.org/t/capitalize-environment-variables/15308/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/capitalize-environment-variables/15308/3</link>
        <pubDate>Fri, 23 Sep 2022 22:22:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15308-3</guid>
        <source url="http://forums.whonix.org/t/capitalize-environment-variables/15308.rss">capitalize environment variables</source>
      </item>
      <item>
        <title>capitalize environment variables</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Ok, the argument is convincing beyond doubt.</p>
<aside class="quote no-group" data-username="nyxnor" data-post="1" data-topic="15308">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/nyxnor/40/2874_2.png" class="avatar"> nyxnor:</div>
<blockquote>
<p>capitalize all environment variables</p>
</blockquote>
</aside>
<p>Confirmed.</p>
<p>Seems like a big task. Help welcome.</p>
<hr>
<p>There’s a related developer helper script here. It does a Kicksecure and Whonix wide search and replace of any string anywhere in Whonix source code.</p>
<p><a href="https://github.com/Kicksecure/developer-meta-files/blob/master/usr/bin/dm-replace-list#L11" class="inline-onebox">developer-meta-files/dm-replace-list at master · Kicksecure/developer-meta-files · GitHub</a></p>
<p>So any env vars that should be renamed could be added there.</p>
<ul>
<li>left: search (old variable name)</li>
<li>right: replace (new variable name)</li>
</ul>
<p>Then at some point, I’d run the script and do the project wide mass search / replace.</p>
<p>What’s missing is also automating the same change in the wiki.</p>
<p>Anyhow. Anyone can feel free to send mass search / replace suggestions (pull requests or git branches) to that script.</p>
<aside class="quote no-group" data-username="nyxnor" data-post="1" data-topic="15308">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/nyxnor/40/2874_2.png" class="avatar"> nyxnor:</div>
<blockquote>
<p>add to man page the use case of each environment variable</p>
</blockquote>
</aside>
<p>That would also be nice.</p>
          <p><a href="http://forums.whonix.org/t/capitalize-environment-variables/15308/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/capitalize-environment-variables/15308/2</link>
        <pubDate>Sat, 17 Sep 2022 18:18:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15308-2</guid>
        <source url="http://forums.whonix.org/t/capitalize-environment-variables/15308.rss">capitalize environment variables</source>
      </item>
      <item>
        <title>capitalize environment variables</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <h2>
<a name="problem-1" class="anchor" href="http://forums.whonix.org#problem-1"></a>Problem</h2>
<p>Continuing the discussion from <a href="https://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/2">inform user that torbrowser won't start</a>:</p>
<p>I was trying to avoid starting torbrowser from reading the script, and took some time to find <code>tb_no_start</code>.</p>
<ul>
<li>it is an environment variable
<ul>
<li>should be capitalized</li>
<li>should be on the ENVIRONMENT section of torbrowser man page</li>
</ul>
</li>
</ul>
<h2>
<a name="proof-2" class="anchor" href="http://forums.whonix.org#proof-2"></a>Proof:</h2>
<p>Run: <code>env</code>.<br>
It will display the environment variables, which are capitalized can be reused by other scripts.</p>
<p>Shellscript portability:<br>
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html#tag_08" class="onebox" target="_blank" rel="noopener nofollow ugc">https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html#tag_08</a></p>
<blockquote>
<p>Environment variable names used by the utilities in the Shell and Utilities volume of POSIX.1-2017 consist solely of uppercase letters, digits, and the  ( ‘_’ ) from the characters defined in <a href="https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap06.html#tagtcjh_3" rel="noopener nofollow ugc"><em>Portable Character Set</em></a> and do not begin with a digit. Other characters may be permitted by an implementation; applications shall tolerate the presence of such names. Uppercase and lowercase letters shall retain their unique identities and shall not be folded together. The name space of environment variable names containing lowercase letters is reserved for applications. Applications can define any environment variables with names from this name space without modifying the behavior of the standard utilities.</p>
</blockquote>
<p>Other programming languages may use uppercase variables even when they are not environment variables, such as python and rust that use uppercase for constants.</p>
<h2>
<a name="what-is-missing-from-whonix-3" class="anchor" href="http://forums.whonix.org#what-is-missing-from-whonix-3"></a>What is missing from whonix</h2>
<ul>
<li>capitalize all environment variables</li>
<li>add to man page the use case of each environment variable</li>
</ul>
          <p><a href="http://forums.whonix.org/t/capitalize-environment-variables/15308/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/capitalize-environment-variables/15308/1</link>
        <pubDate>Wed, 14 Sep 2022 16:48:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15308-1</guid>
        <source url="http://forums.whonix.org/t/capitalize-environment-variables/15308.rss">capitalize environment variables</source>
      </item>
  </channel>
</rss>
