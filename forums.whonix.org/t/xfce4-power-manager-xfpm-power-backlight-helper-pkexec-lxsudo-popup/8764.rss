<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>xfce4-power-manager xfpm-power-backlight-helper pkexec lxsudo popup</title>
    <link>http://forums.whonix.org/t/xfce4-power-manager-xfpm-power-backlight-helper-pkexec-lxsudo-popup/8764</link>
    <description>At boot of a Kicksecure host system, there is a lxsudo popup asking for permission.

    xfpm-power-backlight-helper --set-brightness 0

`/etc/xdg/autostart/xfce4-power-manager.desktop` is probably responsible for that chain reaction.

This probably needs an /etc/sudoers.d exception.</description>
    <language>en</language>
    <lastBuildDate>Wed, 15 Jan 2020 07:43:18 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/xfce4-power-manager-xfpm-power-backlight-helper-pkexec-lxsudo-popup/8764.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>xfce4-power-manager xfpm-power-backlight-helper pkexec lxsudo popup</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/commit/80159545a580830565ec01a507915add9c44838a" target="_blank">github.com/Whonix/security-misc</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/security-misc/commit/80159545a580830565ec01a507915add9c44838a" target="_blank">fix xfce4-power-manager xfpm-power-backlight-helper pkexec lxsudo popup</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2020-01-15" data-time="07:42:10" data-timezone="UTC">07:42AM - 15 Jan 20 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 4 files with 72 additions and 11 deletions">
        <a href="https://github.com/Whonix/security-misc/commit/80159545a580830565ec01a507915add9c44838a" target="_blank">
          <span class="added">+72</span>
          <span class="removed">-11</span>
        </a>
      </div>
    </div>

  </div>
</div>


  <div class="github-row">
    <pre class="github-content" style="white-space: normal;">https://forums.whonix.org/t/xfce4-power-manager-xfpm-power-backlight-helper-pkexec-lxsudo-popup/8764
do show lxqt-sudo password prompt if there is a sudoers exceptoin
improved pkexec wrapper logging</pre>
  </div>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/blob/master/etc/sudoers.d/pkexec-security-misc" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/security-misc/blob/master/etc/sudoers.d/pkexec-security-misc" target="_blank">Whonix/security-misc/blob/master/etc/sudoers.d/pkexec-security-misc</a></h4>
<pre><code class="lang-d/pkexec-security-misc">## Copyright (C) 2019 - 2019 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## REVIEW: is it ok that users can find out the PATH setting of root?
%sudo ALL=NOPASSWD: /usr/lib/security-misc/echo-path

## xfpm-power-backlight-helper demands environment variable PKEXEC_UID to be
## set. Would otherwise error out with the following error message:
## "This program must only be run through pkexec"
## REVIEW: Can bad things be done by spoofing PKEXEC_UID?
Defaults:ALL env_keep += "PKEXEC_UID"
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/blob/master/etc/sudoers.d/xfce-security-misc" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/security-misc/blob/master/etc/sudoers.d/xfce-security-misc" target="_blank">Whonix/security-misc/blob/master/etc/sudoers.d/xfce-security-misc</a></h4>
<pre><code class="lang-d/xfce-security-misc">## Copyright (C) 2019 - 2019 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## https://forums.whonix.org/t/xfce4-power-manager-xfpm-power-backlight-helper-pkexec-lxsudo-popup/8764
## /usr/share/polkit-1/actions/org.xfce.power.policy

## Feel free to out comment this if you are not using xfce4-power-manager or XFCE.

%sudo ALL=NOPASSWD: /usr/sbin/xfpm-power-backlight-helper --set-brightness [[\:digit\:]]
%sudo ALL=NOPASSWD: /usr/sbin/xfpm-power-backlight-helper --set-brightness [[\:digit\:]][[\:digit\:]]
%sudo ALL=NOPASSWD: /usr/sbin/xfpm-power-backlight-helper --set-brightness [[\:digit\:]][[\:digit\:]][[\:digit\:]]

%sudo ALL=NOPASSWD: /usr/sbin/xfpm-power-backlight-helper --set-brightness-switch [[\:digit\:]]
%sudo ALL=NOPASSWD: /usr/sbin/xfpm-power-backlight-helper --set-brightness-switch [[\:digit\:]][[\:digit\:]]
%sudo ALL=NOPASSWD: /usr/sbin/xfpm-power-backlight-helper --set-brightness-switch [[\:digit\:]][[\:digit\:]][[\:digit\:]]

## XXX: Should we allow this?
#%sudo ALL=NOPASSWD: /usr/sbin/xfce4-pm-helper --suspend
#%sudo ALL=NOPASSWD: /usr/sbin/xfce4-pm-helper --hibernate
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/blob/master/usr/bin/pkexec.security-misc" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/security-misc/blob/master/usr/bin/pkexec.security-misc" target="_blank">Whonix/security-misc/blob/master/usr/bin/pkexec.security-misc</a></h4>
<pre><code class="lang-security-misc">#!/bin/bash

## Copyright (C) 2019 - 2019 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## Redirect calls for pkexec to lxqt-sudo because pkexec is incompatible with
## hidepid.
## * https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=860040
## * https://forums.whonix.org/t/cannot-use-pkexec/8129

set -e

my_real_path="$(realpath "$0")" || true
identifier="$my_real_path wrapper"
exec &gt; &gt;(systemd-cat --identifier="$identifier output by program:") 2&gt;&amp;1

log_to_journal() {
   echo "$@" | systemd-cat --identifier="$identifier output by wrapper:" || true
}

</code></pre>

  This file has been truncated. <a href="https://github.com/Whonix/security-misc/blob/master/usr/bin/pkexec.security-misc" target="_blank">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/xfce4-power-manager-xfpm-power-backlight-helper-pkexec-lxsudo-popup/8764/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/xfce4-power-manager-xfpm-power-backlight-helper-pkexec-lxsudo-popup/8764/2</link>
        <pubDate>Wed, 15 Jan 2020 07:43:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8764-2</guid>
        <source url="http://forums.whonix.org/t/xfce4-power-manager-xfpm-power-backlight-helper-pkexec-lxsudo-popup/8764.rss">xfce4-power-manager xfpm-power-backlight-helper pkexec lxsudo popup</source>
      </item>
      <item>
        <title>xfce4-power-manager xfpm-power-backlight-helper pkexec lxsudo popup</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>At boot of a Kicksecure host system, there is a lxsudo popup asking for permission.</p>
<pre><code>xfpm-power-backlight-helper --set-brightness 0
</code></pre>
<p><code>/etc/xdg/autostart/xfce4-power-manager.desktop</code> is probably responsible for that chain reaction.</p>
<p>This probably needs an /etc/sudoers.d exception.</p>
          <p><a href="http://forums.whonix.org/t/xfce4-power-manager-xfpm-power-backlight-helper-pkexec-lxsudo-popup/8764/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/xfce4-power-manager-xfpm-power-backlight-helper-pkexec-lxsudo-popup/8764/1</link>
        <pubDate>Tue, 14 Jan 2020 20:13:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8764-1</guid>
        <source url="http://forums.whonix.org/t/xfce4-power-manager-xfpm-power-backlight-helper-pkexec-lxsudo-popup/8764.rss">xfce4-power-manager xfpm-power-backlight-helper pkexec lxsudo popup</source>
      </item>
  </channel>
</rss>
