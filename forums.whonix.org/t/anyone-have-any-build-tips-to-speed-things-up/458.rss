<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Anyone have any build tips to speed things up?</title>
    <link>http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458</link>
    <description>Hi!

I am starting to work on implementing some encryption things into a branch based off of Whonix 8.6.6.0.  My initial build takes a very long time (2+ hours).

This is my build script I use:
[code]
cd Whonix
sudo ~/Whonix/whonix_build \
  --build --tor-workstation \
  --64bit-linux \
  --terminal-only \
  --current-sources \
  --enable-whonix-apt-repository \
  --whonix-apt-repository-distribution stable \
  --vmram 128 \
  --vram 12 \
  --vmsize 20G \
  --qcow2
[/code]

Also note that even though I select &#39; --terminal-only&#39; I still do get a KDE login.  I can live with that though.

So my questions are:
-  When I start adding / changing Whonix code, is there a way to build that can resuse everything that has already been downloaded, etc so I do not have to rebuild from scratch each time?

- Do I need to remove the raw image files each time?

- I saw a fast and fast2 option; should I use those?

- Any other tips on rebuilding over and over again to keep my sanity :)

Thanks!</description>
    <language>en</language>
    <lastBuildDate>Mon, 14 Mar 2016 17:05:42 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Anyone have any build tips to speed things up?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Using an apt cache is possible and documented:</p>
<p><a href="https://www.whonix.org/wiki/Dev/Build_Documentation/12_full#APT_Cache_.28Optional.29">https://www.whonix.org/wiki/Dev/Build_Documentation/12_full#APT_Cache_.28Optional.29</a></p>
          <p><a href="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/8</link>
        <pubDate>Mon, 14 Mar 2016 17:05:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-458-8</guid>
        <source url="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458.rss">Anyone have any build tips to speed things up?</source>
      </item>
      <item>
        <title>Anyone have any build tips to speed things up?</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Most of the time is spent downloading the packages actually. Depending on whether its a slow or fast circuit and mirror load.</p>
<p>Since almost all packages are identical for GW and WS having apt-cacher-ng keep the packages downloaded once already for the second VM build can shorten build time a lot.</p>
<p>An <a href="https://github.com/qbcode/novena-baseimage">example</a> of debootstrap <a href="http://www.kosagi.com/w/index.php?title=Novena/Debian_Wheezy_Bootstrap">configured</a> to use apt-cacher-ng:</p>
<blockquote>
<p>sudo debootstrap --include=sudo,openssh-server,ntpdate,dosfstools,sysvinit,fbset,less,xserver-xorg-video-modesetting,task-xfce-desktop,hicolor-icon-theme,gnome-icon-theme,tango-icon-theme,i3-wm,i3status wheezy /mnt <a href="http://127.0.0.1:3142/ftp.ie.debian.org/debian/">http://127.0.0.1:3142/ftp.ie.debian.org/debian/</a></p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/7</link>
        <pubDate>Sun, 13 Mar 2016 23:16:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-458-7</guid>
        <source url="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458.rss">Anyone have any build tips to speed things up?</source>
      </item>
      <item>
        <title>Anyone have any build tips to speed things up?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>No auto detection. If you have a rudimentary understanding, what each step is doing, then it becomes clear on when you can skip which steps. It depends on your final goal. If you just want to restart the build, I would rather go through a clean full build and wait. Not bother learning that. But if you want to contribute to Whonix, then it’s certainly worth to learn to speed up debugging.</p>
<p><a href="https://www.whonix.org/wiki/Dev/Source_Code_Intro#Introduction">https://www.whonix.org/wiki/Dev/Source_Code_Intro#Introduction</a></p>
          <p><a href="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/6</link>
        <pubDate>Sun, 21 Feb 2016 00:21:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-458-6</guid>
        <source url="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458.rss">Anyone have any build tips to speed things up?</source>
      </item>
      <item>
        <title>Anyone have any build tips to speed things up?</title>
        <dc:creator><![CDATA[Bob]]></dc:creator>
        <description><![CDATA[
            <p>Currently building the gateway requires 3 hours for me. I think most of the time is required for compilation (and installation) of the packages. There is a whonix_binary folder in the end with the final packages (I guess). Can I  just copy this over to the folder of another build and the whonix build  script will automatically detect that the final packages are already there, skip the compile step and just start the installation of the packages? Or do I need to run each of the whonix build steps one by one and stop e.g. after a certain step,  make a backup and continue with the next step. I’ll also try out the --force-unsafe-io option but it think it only refers to the installation though compilation takes most of the time.</p>
          <p><a href="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/5</link>
        <pubDate>Fri, 19 Feb 2016 15:09:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-458-5</guid>
        <source url="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458.rss">Anyone have any build tips to speed things up?</source>
      </item>
      <item>
        <title>Anyone have any build tips to speed things up?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>For the record…</p>
<p>[hr]</p>
<p>Ticket ‘Speedup Whonix 11 build time’ was implemented for Whonix 11. See:<br>
<a href="https://phabricator.whonix.org/T295" class="onebox" target="_blank">https://phabricator.whonix.org/T295</a></p>
<p>[hr]</p>
<p>[quote=“Patrick, post:3, topic:458”][quote author=Patrick link=topic=480.msg3695#msg3695 date=1409462600]<br>
I’ll made a note to check --terminal-only.<br>
[/quote]<br>
There was indeed a bug because packages and package names changed. Attempted to fix:<br>
</p><aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/Whonix/commit/6d4f385db4a7937167f5c6b934bca97b72bdc097" target="_blank">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/Whonix/commit/6d4f385db4a7937167f5c6b934bca97b72bdc097" target="_blank">- build script: fix --terminal-only</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2014-08-31" data-time="18:07:09" data-timezone="UTC">06:07PM - 31 Aug 14 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 11 additions and 4 deletions">
        <a href="https://github.com/Whonix/Whonix/commit/6d4f385db4a7937167f5c6b934bca97b72bdc097" target="_blank">
          <span class="added">+11</span>
          <span class="removed">-4</span>
        </a>
      </div>
    </div>

  </div>
</div>


  <div class="github-row">
    <pre class="github-content" style="white-space: normal;">- build script: fix --no-default-applications</pre>
  </div>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<p>Not yet tested.[/quote]<br>
There is some news on ‘–gui none’. See:<br>
<a href="https://www.whonix.org/forum/index.php/topic,902.msg8123.html#msg8123" class="onebox" target="_blank">https://www.whonix.org/forum/index.php/topic,902.msg8123.html#msg8123</a></p>
          <p><a href="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/4</link>
        <pubDate>Wed, 24 Jun 2015 13:08:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-458-4</guid>
        <source url="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458.rss">Anyone have any build tips to speed things up?</source>
      </item>
      <item>
        <title>Anyone have any build tips to speed things up?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="2" data-topic="458">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I’ll made a note to check --terminal-only.</p>
</blockquote>
</aside>
<p>There was indeed a bug because packages and package names changed. Attempted to fix:<br>
</p><aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/Whonix/commit/6d4f385db4a7937167f5c6b934bca97b72bdc097" target="_blank">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/Whonix/commit/6d4f385db4a7937167f5c6b934bca97b72bdc097" target="_blank">- build script: fix --terminal-only</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2014-08-31" data-time="18:07:09" data-timezone="UTC">06:07PM - 31 Aug 14 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 11 additions and 4 deletions">
        <a href="https://github.com/Whonix/Whonix/commit/6d4f385db4a7937167f5c6b934bca97b72bdc097" target="_blank">
          <span class="added">+11</span>
          <span class="removed">-4</span>
        </a>
      </div>
    </div>

  </div>
</div>


  <div class="github-row">
    <pre class="github-content" style="white-space: normal;">- build script: fix --no-default-applications</pre>
  </div>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<p>Not yet tested.</p>
          <p><a href="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/3</link>
        <pubDate>Sun, 31 Aug 2014 18:09:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-458-3</guid>
        <source url="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458.rss">Anyone have any build tips to speed things up?</source>
      </item>
      <item>
        <title>Anyone have any build tips to speed things up?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Whonix’s build script is step based to aid such endeavors as yours. The build steps in the build-steps.d folder can be run one by one.</p>
<p>So if you tell a me a little bit where and how you are attempting to sneak in your code, I can tell you a way on how to repeat only the necessary steps.</p>
<p>Using an apt cache is already automated and integrated into Whonix’s build script. When building for the second time, apt-get downloading packages from Debian should be faster. [You could override with your own http_proxy env var apt cache as well though.]</p>
<p>Usually no need to overwrite raw images, unless you’re not using whonix_build, but build-steps.d directory. When doing the latter you need to know a little bit about the steps.</p>
<p>I haven’t used the --fast in a while. They’re just for debugging and skipping specific steps. So it really depends on what you’re debugging if they’re useful. However they’re no general speed up that could be optionally used for anything.</p>
<p>I’ll made a note to check --terminal-only.</p>
          <p><a href="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/2</link>
        <pubDate>Sun, 31 Aug 2014 05:23:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-458-2</guid>
        <source url="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458.rss">Anyone have any build tips to speed things up?</source>
      </item>
      <item>
        <title>Anyone have any build tips to speed things up?</title>
        <dc:creator><![CDATA[nrgaway]]></dc:creator>
        <description><![CDATA[
            <p>Hi!</p>
<p>I am starting to work on implementing some encryption things into a branch based off of Whonix 8.6.6.0.  My initial build takes a very long time (2+ hours).</p>
<p>This is my build script I use:</p>
<pre><code class="lang-auto">cd Whonix
sudo ~/Whonix/whonix_build \
  --build --tor-workstation \
  --64bit-linux \
  --terminal-only \
  --current-sources \
  --enable-whonix-apt-repository \
  --whonix-apt-repository-distribution stable \
  --vmram 128 \
  --vram 12 \
  --vmsize 20G \
  --qcow2</code></pre>
<p>Also note that even though I select ’ --terminal-only’ I still do get a KDE login.  I can live with that though.</p>
<p>So my questions are:</p>
<ul>
<li>
<p>When I start adding / changing Whonix code, is there a way to build that can resuse everything that has already been downloaded, etc so I do not have to rebuild from scratch each time?</p>
</li>
<li>
<p>Do I need to remove the raw image files each time?</p>
</li>
<li>
<p>I saw a fast and fast2 option; should I use those?</p>
</li>
<li>
<p>Any other tips on rebuilding over and over again to keep my sanity <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</li>
</ul>
<p>Thanks!</p>
          <p><a href="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458/1</link>
        <pubDate>Sun, 31 Aug 2014 02:17:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-458-1</guid>
        <source url="http://forums.whonix.org/t/anyone-have-any-build-tips-to-speed-things-up/458.rss">Anyone have any build tips to speed things up?</source>
      </item>
  </channel>
</rss>
