<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[Help Welcome] KVM Development - staying the course - KVM - Whonix Forum</title>
    <meta name="description" content="Congratulations Patrick on these new and exciting new developments for Whonix [:smile:]  Looks like I missed quite alot. I want to continue tackling the main blockers for Whonix KVM support. Let me know how I can help.">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="166fdfa.html?page=8" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[Help Welcome] KVM Development - staying the course&#39;" href="166.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/help-welcome-kvm-development-staying-the-course/166?page=8" />
<meta name="twitter:url" content="https://forums.whonix.org/t/help-welcome-kvm-development-staying-the-course/166?page=8" />
<meta property="og:title" content="[Help Welcome] KVM Development - staying the course" />
<meta name="twitter:title" content="[Help Welcome] KVM Development - staying the course" />
<meta property="og:description" content="Yes the emulator tag can be eliminated in its entirety, as its recreated according to the domain type that is set. the domain tag has to have a specific value and can not be omitted, because it causes  the import process to fail.  For the clock settings would you like the clocks to drift on purpose and not be accurate, for example because of missed ticks ?  http://libvirt.org/formatdomain.html#elementsTime" />
<meta name="twitter:description" content="Yes the emulator tag can be eliminated in its entirety, as its recreated according to the domain type that is set. the domain tag has to have a specific value and can not be omitted, because it causes  the import process to fail.  For the clock settings would you like the clocks to drift on purpose and not be accurate, for example because of missed ticks ?  http://libvirt.org/formatdomain.html#elementsTime" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="126 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="155 ‚ù§" />
<meta property="article:published_time" content="2014-06-15T00:51:51+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="166235c.html?page=7">
        <link rel="next" href="1660b08.html?page=9">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="166.html">[Help Welcome] KVM Development - staying the course</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/kvm/11.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #9EB83B'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>KVM</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-15T00:51:51Z' class='post-time'>
                June 15, 2014, 12:51am
              </time>
              <meta itemprop='dateModified' content='2014-06-15T00:51:51Z'>
          <span itemprop='position'>#141</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Yes the emulator tag can be eliminated in its entirety, as its recreated according to the domain type that is set. the domain tag has to have a specific value and can not be omitted, because it causes  the import process to fail.</p>
<p>For the clock settings would you like the clocks to drift on purpose and not be accurate, for example because of missed ticks ?</p>
<p><a href="../../../external.html?link=http://libvirt.org/formatdomain.html#elementsTime" class="onebox" target="_blank">http://libvirt.org/formatdomain.html#elementsTime</a></p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-15T00:56:13Z' class='post-time'>
                June 15, 2014, 12:56am
              </time>
              <meta itemprop='dateModified' content='2014-06-15T00:56:13Z'>
          <span itemprop='position'>#142</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Between qemu and  kvm there isn‚Äôt much difference. Or maybe there is, because KVM is designed to rely on VHost kernel mode only drivers for paravirtualization of devices, and nothing involving  qemu at that point.</p>
<p>EDIT:<br>
qemu works with these settings, only needing a tag change. Pure qemu is very slow obviously but it works.<br>
I‚Äôll see if libvirt automatically sees hardware architecture, Running a compiled Whonix ARM version for debugging in the future may be useful</p>
<p>EDIT 2:<br>
Hardware architecture and chipset options could be safely eliminated from within the  tag.</p>
<p>In this specific example, only the domain tag that needs needs changing however the differences grow when one looks at LXC then Xen etc.</p>
<p>The question is should we be discouraging the running of Whonix on less secure setups like containers and Xen? Yes Xen is insecure and i will explain why if you want. Its been referenced in that security report I referenced before.</p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-15T01:05:24Z' class='post-time'>
                June 15, 2014,  1:05am
              </time>
              <meta itemprop='dateModified' content='2014-06-15T01:05:24Z'>
          <span itemprop='position'>#143</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Note import fails if it detects a domain with the exact same name already present. We will have to switch the generic file naming back to what it was with the version numbers being present again. I have an idea how we can handle it now.</p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-15T02:06:24Z' class='post-time'>
                June 15, 2014,  2:06am
              </time>
              <meta itemprop='dateModified' content='2014-06-15T02:06:24Z'>
          <span itemprop='position'>#144</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>While libvirt doesn‚Äôt work with relative paths, bash scripts I know can handle this. This elegantly solves the problem. Using sed we can alter the xml to reflect changes desired by the user by adding containment platform name and for exmaple: kvm, qemu etc to the disk image filename , the vml ‚Äòdomain‚Äô name and also alter the name in the path string inside the xml.</p>
<p>The proposal for the script structure in plain language:</p>
<pre><code class="lang-auto">First we rollback the change  for file naming and allow the version number to be generated. This is important becuase using one static domain name and disk image file name is problematic for the import process:

0. The script would recognize the filenames in the format that was used previously roughly: whonix_gateway_$version

1. Script asks user for choice of containment platform

2. sed is then used to apply the relevant changes to xml to reflect that
2a. It would change the generic value name such as whonix_gateway thats initially used in the config file  and apply the new filedisk name to the path, the vm 'domain' name and  finally rename the actual image on disk to use that name : formatted like: whonix_gateway_$version_$containment+[alternative arch if selected for qemu].

3. Detect output from virsh if there is already an existing vm 'domain' with the same name (and hence disk file with same name too) and alert the user and exit.

4. If import successful, copy disk image only to the /var/lib/libvirt/images directory. Done!
(no need to copy the xml after import as libvirt stores it wherever it wishes)

</code></pre>
<p>The goal is to have one xml file, per vm provided, that‚Äôs edited according to main user decisions and have the disk file and image reflect that.</p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-15T02:12:42Z' class='post-time'>
                June 15, 2014,  2:12am
              </time>
              <meta itemprop='dateModified' content='2014-06-15T02:12:42Z'>
          <span itemprop='position'>#145</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="141" data-topic="166">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Yes the emulator tag can be eliminated in its entirety, as its recreated according to the domain type that is set.</p>
</blockquote>
</aside>
<p>Please do.</p>
<blockquote>the domain tag has to have a specific value and can not be omitted, because it causes  the import process to fail.</blockquote>
Ok, when someone requests qemu support, the installer script can add an option and patch the xml.
<blockquote>For the clock settings would you like the clocks to drift on purpose and not be accurate, for example because of missed ticks ?
<p><a href="../../../external.html?link=http://libvirt.org/formatdomain.html#elementsTime">http://libvirt.org/formatdomain.html#elementsTime</a></p>
</blockquote><br>
Good question. I am not sure yet. This setting might be fingerprintable. I guess ‚Äúcatchup‚Äù is the default, makes sense, and using default is probably best we can do here.
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-15T02:19:39Z' class='post-time'>
                June 15, 2014,  2:19am
              </time>
              <meta itemprop='dateModified' content='2014-06-15T02:19:39Z'>
          <span itemprop='position'>#146</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="142" data-topic="166">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Running a compiled Whonix ARM version for debugging in the future may be useful</p>
</blockquote>
</aside>
<p>Yes.</p>
<blockquote>Hardware architecture and chipset options could be safely eliminated from within the  tag.</blockquote>
Great, please do so.
<blockquote>In this specific example, only the domain tag that needs needs changing however the differences grow when one looks at LXC then Xen etc.</blockquote>
No problem. We can do separate files for them - if there is someone sufficiently interested and helping with this as you are doing with KVM.
<blockquote>The question is should we be discouraging the running of Whonix on less secure setups like containers and Xen?</blockquote>
We are already doing this. whonixcheck warns against virtualizers, that do not have a Whonix maintainer who developed/tested/maintains them. The warning text is implemented here:
https://github.com/Whonix/whonixcheck/blob/master/usr/lib/whonixcheck/check_virtualizer#L58
<blockquote>Yes Xen is insecure and i will explain why if you want. Its been referenced in that security report I referenced before.</blockquote>
If it concerns Qubes OS, then I would be interested. Since there is Qubes OS, I am not motivated to look into the Xen.
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-15T02:42:04Z' class='post-time'>
                June 15, 2014,  2:42am
              </time>
              <meta itemprop='dateModified' content='2014-06-15T02:42:04Z'>
          <span itemprop='position'>#147</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="144" data-topic="166">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>The proposal for the script structure in plain language:</p>
</blockquote>
</aside>
<p>Sounds good. I ask about some details when I get to it, probably soon.</p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-15T03:06:18Z' class='post-time'>
                June 15, 2014,  3:06am
              </time>
              <meta itemprop='dateModified' content='2014-06-15T03:06:18Z'>
          <span itemprop='position'>#148</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>Ok, when someone requests qemu support, the installer script can add an option and patch the xml.</blockquote>
<p>Great. For the architecture choice though it would need to insert the arch=‚Äòarm‚Äô option under the  tag. As of now I removed it as its strictly not necessary.</p>
<blockquote>Good question. I am not sure yet. This setting might be fingerprintable. I guess "catchup" is the default, makes sense, and using default is probably best we can do here.</blockquote>
<p>Ok left it as it is.</p>
<p>I am relinking to this post so the import commands for the network don‚Äôt get buried, they are needed to get it imported and then enabled: <a href="../../../external.html?link=https://www.whonix.org/forum/index.php/topic,159.msg2342.html#msg2342">https://www.whonix.org/forum/index.php/topic,159.msg2342.html#msg2342</a></p>
<p><span class="bbcode-b"><br>
EDIT</span></p>
<p>I noticed that we could he a subsection in the to force domain overwriting (besides file overwirting) by the user if its intentional.</p>
<p>virsh gives error that it already exists overwrite? [y] then remove domain followed by reimport. [n] exit.<br>
Same for virtual internal net, except there is a command to stop it first then remove it.</p>
<p>Arm importing requires qemu arm to be installed. So the user should get a prompt to install that package and try again.</p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-16T11:10:37Z' class='post-time'>
                June 16, 2014, 11:10am
              </time>
              <meta itemprop='dateModified' content='2014-06-16T11:10:37Z'>
          <span itemprop='position'>#149</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I started implementing the libvirt import script. Can be found here:<br>
<a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/libvirt/whonix_libvirt_import" class="onebox" target="_blank">https://github.com/Whonix/Whonix/blob/master/libvirt/whonix_libvirt_import</a></p>
<p>Still non-functional (a few functions are tested, though). We can use that draft as base for discussion and finishing implementation. There will be some questions.</p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-16T11:16:36Z' class='post-time'>
                June 16, 2014, 11:16am
              </time>
              <meta itemprop='dateModified' content='2014-06-16T11:16:36Z'>
          <span itemprop='position'>#150</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="148" data-topic="166">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>I am relinking to this post so the import commands for the network don‚Äôt get buried, they are needed to get it imported and then enabled: <a href="../../../external.html?link=https://www.whonix.org/forum/index.php/topic,159.msg2342.html#msg2342">https://www.whonix.org/forum/index.php/topic,159.msg2342.html#msg2342</a></p>
</blockquote>
</aside>
<p>I copied those into the script, so they don‚Äôt get lost. (Yet have to adjust the paths.)</p>
<blockquote>I noticed that we could he a subsection in the to force domain overwriting (besides file overwirting) by the user if its intentional.</blockquote>
<blockquote>virsh gives error that it already exists overwrite? [y] then remove domain followed by reimport. [n] exit.
Same for virtual internal net, except there is a command to stop it first then remove it.</blockquote>
I think it's best if the script has both, an interactive mode [terminal] and a command line mode. Perhaps even an environment variables mode (reading settings from environment variables). Not difficult to implement, if virsh provides the necessary command line tools. Maybe later even graphical mode, but that later, could be difficult (because the script must work with minimal dependencies, unless we tell people to "sudo apt-get install kvm zenity" beforehand.
<blockquote>Arm importing requires qemu arm to be installed. So the user should get a prompt to install that package and try again.</blockquote>
Let's deal with arm later. We don't have arm builds for now anyway. I don't know how difficult they would be to create and for now we have no such feature requests.
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-16T11:22:37Z' class='post-time'>
                June 16, 2014, 11:22am
              </time>
              <meta itemprop='dateModified' content='2014-06-16T11:22:37Z'>
          <span itemprop='position'>#151</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>To detect if such a domain is already existing, the script currently uses something like:</p>
<pre><code class="lang-auto"></code></pre>
<p>If exit code is non-zero, we can just go ahead importing it. Easy.</p>
<p>And if exit code is 0, it already exists. Then could ask the user if she wanted to delete that VM. And if yes is chosen or if --force-override was used, then we could use this command.</p>
<p><code>undefine domain-id [--managed-save] [--snapshots-metadata] [ {--storage
volumes | --remove-all-storage} --wipe-storage]</code></p>
<p>Should we wipe all, i.e. power off, delete domain and image then?</p>
<p>The simpler way would be just to tell the user, that she should consider renaming/removing the VM manually and exit 1.</p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-16T11:25:39Z' class='post-time'>
                June 16, 2014, 11:25am
              </time>
              <meta itemprop='dateModified' content='2014-06-16T11:25:39Z'>
          <span itemprop='position'>#152</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I am still not sure this script should support importing both, Whonix-Gateway and Whonix-Workstation when both images and the same script are in one folder. Not autodetecting that situation and to require the user to use two import scripts from two folders (extracted from two archives) is certainly easier and faster to implement. What do you think?</p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-16T12:37:37Z' class='post-time'>
                June 16, 2014, 12:37pm
              </time>
              <meta itemprop='dateModified' content='2014-06-16T12:37:37Z'>
          <span itemprop='position'>#153</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Why use Whonix_Gateway and Whonix_Workstation instead of Whonix-Gateway and Whonix-Workstation? Avoiding conflicts with eventually existing VBox VM‚Äôs? (‚Äúvirsh list‚Äù interestingly also shows VBox VMs.)</p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-16T13:12:54Z' class='post-time'>
                June 16, 2014,  1:12pm
              </time>
              <meta itemprop='dateModified' content='2014-06-16T13:12:54Z'>
          <span itemprop='position'>#154</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Improved the script some more. Implemented most functions. Still untested.</p>
<p>Check it out:<br>
<a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/libvirt/whonix_libvirt_import" class="onebox" target="_blank">https://github.com/Whonix/Whonix/blob/master/libvirt/whonix_libvirt_import</a></p>
<aside class="quote" data-post="152" data-topic="166">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I am still not sure this script should support importing both, Whonix-Gateway and Whonix-Workstation when both images and the same script are in one folder. Not autodetecting that situation and to require the user to use two import scripts from two folders (extracted from two archives) is certainly easier and faster to implement. What do you think?</p>
</blockquote>
</aside>
<p>For now, only one xml / image is supported in same folder.</p>
<blockquote>#2a. It would change the generic value name such as whonix_gateway thats initially used in the config file
#and apply the new filedisk name to the path, the vm 'domain' name and finally rename the actual image on disk to use that name :
#formatted like: whonix_gateway_$version_$containment+[alternative arch if selected for qemu].</blockquote>
What advantages does that bring? Complicates the script and I don't understand yet for what it's good for. Is this really important / necessary?
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-17T00:34:22Z' class='post-time'>
                June 17, 2014, 12:34am
              </time>
              <meta itemprop='dateModified' content='2014-06-17T00:34:22Z'>
          <span itemprop='position'>#155</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>I think it's best if the script has both, an interactive mode [terminal] and a command line mode. Perhaps even an environment variables mode (reading settings from environment variables). Not difficult to implement, if virsh provides the necessary command line tools. Maybe later even graphical mode, but that later, could be difficult (because the script must work with minimal dependencies, unless we tell people to "sudo apt-get install kvm zenity" beforehand.</blockquote>
<p>Yes agreed, both terminal and commandline give useful options. I will check if virsh does implement environment variables and report back. A GUI mode is definitely helpful to add for our main demographic. I have Zenity installed by default here but I don‚Äôt if thats the same for most distros and/or debian. If you decide to rely on a single dependency for the gui thats installed everywhere by default then it would be better.</p>
<blockquote>The simpler way would be just to tell the user, that she should consider renaming/removing the VM manually and exit 1.</blockquote>
<p>Yes. Just notifying them should be enough as its impossible to know what they want to do to deal with this.</p>
<blockquote>I am still not sure this script should support importing both, Whonix-Gateway and Whonix-Workstation when both images and the same script are in one folder. Not autodetecting that situation and to require the user to use two import scripts from two folders (extracted from two archives) is certainly easier and faster to implement. What do you think?</blockquote>
<p>I believe that 2 scripts, one for each image is a better modular design solution. But the setting up information for the isolated whonix_network.xml is to be included and triggered from the whonix gateway script.</p>
<p>If the script detects an already existing virtual network from a past install, it should exit silently.</p>
<p>Concerning the virtual network there is a problem :<br>
I believe its very important to put a security warning at the beginning of the process in the script to warn people to shutdown any currently running Whonix vms as they will be using this same internal network.<br>
An adversary who has compromised the older running whonix workstation could attempt to attack the newly added vms that are programmed to used this same internal network.</p>
<blockquote>Why use Whonix_Gateway and Whonix_Workstation instead of Whonix-Gateway and Whonix-Workstation? Avoiding conflicts with eventually existing VBox VM's? ("virsh list" interestingly also shows VBox VMs.)</blockquote>
<blockquote>What advantages does that bring? Complicates the script and I don't understand yet for what it's good for. Is this really important / necessary?</blockquote>
<p>Yes libvirt auto-detects and interacts with vms that belong to all supported hypervisors. In this situation its best to change the name then to the other format. With that said I think the suggested renaming mechanism to accomodate hypervisor type and architecture version (just the naming and not the actual changes for the architecture) is important in the case of libvirt to allow people to tell machines apart. For example they may already have a kvm machine and also want to install the qemu version of the same number. Wihtout implementing this, the kvm machine would be wrongly detected as a duplicate of the different qemu machine that a user wants to introduce. Its much more helpful considering the sheer amount of containment types libvirt supports.</p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-17T00:58:35Z' class='post-time'>
                June 17, 2014, 12:58am
              </time>
              <meta itemprop='dateModified' content='2014-06-17T00:58:35Z'>
          <span itemprop='position'>#156</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>For environment variables I think this is it?: <a href="../../../external.html?link=http://libvirt.org/html/libvirt-libvirt.html">http://libvirt.org/html/libvirt-libvirt.html</a></p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-17T12:36:14Z' class='post-time'>
                June 17, 2014, 12:36pm
              </time>
              <meta itemprop='dateModified' content='2014-06-17T12:36:14Z'>
          <span itemprop='position'>#157</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Why is it</p>
<pre><code class="lang-auto"></code></pre>
<p>And not</p>
<pre><code class="lang-auto"></code></pre>
<p>?</p>
<p>(We change it later anyway, but still. I guess keeping the existing naming schema is better.)</p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-17T12:59:24Z' class='post-time'>
                June 17, 2014, 12:59pm
              </time>
              <meta itemprop='dateModified' content='2014-06-17T12:59:24Z'>
          <span itemprop='position'>#158</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Works:</p>
<pre><code class="lang-auto"></code></pre>
<p>Does not work:</p>
<pre><code class="lang-auto"></code></pre>
<p>Please tell me a functional version.</p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-17T13:02:13Z' class='post-time'>
                June 17, 2014,  1:02pm
              </time>
              <meta itemprop='dateModified' content='2014-06-17T13:02:13Z'>
          <span itemprop='position'>#159</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <pre><code class="lang-auto">
This is kinda difficult. Add line "xxx" after line "yyy" isn't the most clean code, doable, but I prefer to avoid it. Could we add the arch field to the xml but leave it empty by default or would that be non-functional?</code></pre>
<p>This is kinda difficult. Add line ‚Äúxxx‚Äù after line ‚Äúyyy‚Äù isn‚Äôt the most clean code, doable, but I prefer to avoid it. Could we add the arch field to the xml but leave it empty by default or would that be non-functional?</p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="166.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-06-17T13:21:07Z' class='post-time'>
                June 17, 2014,  1:21pm
              </time>
              <meta itemprop='dateModified' content='2014-06-17T13:21:07Z'>
          <span itemprop='position'>#160</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="155" data-topic="166">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Yes agreed, both terminal and commandline give useful options. I will check if virsh does implement environment variables and report back. A GUI mode is definitely helpful to add for our main demographic. I have Zenity installed by default here but I don‚Äôt if thats the same for most distros and/or debian. If you decide to rely on a single dependency for the gui thats installed everywhere by default then it would be better.</p>
</blockquote>
</aside>
<p>Best we can do is attempt to auto detect this. Like the start-tor-browser script does. It checks for zenity, kdialog, gxmessage, xmessage and opportunistically uses one of them. There may be very well be situations were none of them is installed by default.</p>
<blockquote>Yes. Just notifying them should be enough as its impossible to know what they want to do to deal with this.</blockquote>
Well, not impossible, but needs some time to implement to ask the user on how to proceed.
<blockquote>I believe that 2 scripts, one for each image is a better modular design solution.</blockquote>
That's it for now.
<blockquote>But the setting up information for the isolated whonix_network.xml is to be included and triggered from the whonix gateway script.</blockquote>
Easy and done. The import script checks if whonix_network.xml in it's own folder, if no, it's skipped.
<blockquote>If the script detects an already existing virtual network from a past install, it should exit silently.</blockquote>
You mean skip adding the virtual network then?
<p>This is not implemented yet, but should be.</p>
<p>How can the script check, if the virtual network already exists?</p>
<blockquote>Concerning the virtual network there is a problem :
I believe its very important to put a security warning at the beginning of the process in the script to warn people to shutdown any currently running Whonix vms as they will be using this same internal network. 
An adversary who has compromised the older running whonix workstation could attempt to attack the newly added vms that are programmed to used this same internal network.</blockquote>
We have an info text when importing VBox VMs.
(https://github.com/Whonix/Whonix/blob/master/build-steps.d/2700_export-vbox-vm#L25)
Could you write such a text for KVM?
Adding it to the script once written, adding it to the script including a --skip-info switch would be trivial.
<blockquote>Yes libvirt auto-detects and interacts with vms that belong to all supported hypervisors. In this situation its best to change the name then to the other format. With that said I think the suggested renaming mechanism to accomodate hypervisor type and architecture version (just the naming and not the actual changes for the architecture) is important in the case of libvirt to allow people to tell machines apart. For example they may already have a kvm machine and also want to install the qemu version of the same number. Wihtout implementing this, the kvm machine would be wrongly detected as a duplicate of the different qemu machine that a user wants to introduce. Its much more helpful considering the sheer amount of containment types libvirt supports.</blockquote>
I hope you're right. Was quite some work, but it's now implemented in the repo (still untested due to open questions raised above).
<p>We‚Äôre now using for image.</p>
<pre><code class="lang-auto"></code></pre>
<p>Example:</p>
<pre><code class="lang-auto"></code></pre>
<p>We‚Äôre now using for domain name.</p>
<pre><code class="lang-auto"></code></pre>
<p>Example:</p>
<pre><code class="lang-auto"></code></pre>
<p>Maybe add extension (.qcow2) to domain name as well? No?</p>
<p>I foresee one issue. Someone asking in the forum "In past I could only use qemu, but now I got a new computer and want to use kvm. I got an image named Whonix-Gateway_8.3_qemu.qcow2. Why is qemu hardcoded? WTF? Can‚Äôt I just use it in kvm? Perhaps we got to live with that.</p>
        </div>

        <meta itemprop='headline' content='[Help Welcome] KVM Development - staying the course'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="166235c.html?page=7">‚Üê previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="1660b08.html?page=9">next page ‚Üí</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
