<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Using Whonix gateway to route a LAN connection not through TOR</title>
    <link>http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808</link>
    <description>Hey,

I set up a Whonix gateway VM, which I want to use to let other VMs (non-Whonix) to communicate over TOR through it. In addition to that, I need my other VMs to be able to access 2 IPs on my LAN **not** through TOR. I wanted to do that through the Whonix Gateway also. I added the two IPs in 50_user.conf under whonix_firewall.d into the variable NON_TOR_GATEWAY. I additionally added them in the iptables both in OUT and FORWARD:

`
sudo iptables -I OUTPUT 1 -d &lt;MY_IP&gt; -j ACCPET
sudo iptables -I FORWARD 1 -d &lt;MY_IP&gt; -j ACCPET
`
Still, I was not able to contact those IPs, neither from the gateway itself nor from the other VMs going through the gateway.

Is there another setting that needs to be changed? 

Thanks in advance</description>
    <language>en</language>
    <lastBuildDate>Fri, 09 Sep 2022 14:58:13 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Using Whonix gateway to route a LAN connection not through TOR</title>
        <dc:creator><![CDATA[trigo_once]]></dc:creator>
        <description><![CDATA[
            <p>OK, Thank you very much.</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808/6</link>
        <pubDate>Fri, 09 Sep 2022 14:58:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14808-6</guid>
        <source url="http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808.rss">Using Whonix gateway to route a LAN connection not through TOR</source>
      </item>
      <item>
        <title>Using Whonix gateway to route a LAN connection not through TOR</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>How this could be implemented in the safest way:</p>
<ul>
<li>Add an additional internal-only network interface to Whonix-Workstation</li>
<li>Connect it to a separate VM which will act as a firewall.</li>
<li>That VM could have IP forwarding and firewall enabled that only permits connections to a few limited IP addresses.</li>
</ul>
<p>Unsupported.</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Unsupported">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Unsupported" target="_blank" rel="noopener" title="07:44PM - 13 August 2022">Whonix – 13 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/426;"><img src="https://www.whonix.org/w/images/0/0a/Unsupported.jpg?version=6be87603b34867135bd7a5991ff18c1f" class="thumbnail" width="640" height="426"></div>

<h3><a href="https://www.whonix.org/wiki/Unsupported" target="_blank" rel="noopener">Undocumented, Untested or Unsupported Features</a></h3>

  <p>This feature is either undocumented, untested, or unsupported. Options: Become a Contributor / Apply Free Support Principle / Purchase Premium Support.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808/5</link>
        <pubDate>Fri, 09 Sep 2022 12:26:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14808-5</guid>
        <source url="http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808.rss">Using Whonix gateway to route a LAN connection not through TOR</source>
      </item>
      <item>
        <title>Using Whonix gateway to route a LAN connection not through TOR</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>A safer idea in my next forum post (not this one).</p>
<aside class="quote no-group" data-username="trigo_once" data-post="3" data-topic="14808" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/46a35a/40.png" class="avatar"> trigo_once:</div>
<blockquote>
<p>Can theoretically enabling IPv4 forwarding solve that?</p>
</blockquote>
</aside>
<p>Probably. It would be insecure. Much higher risk of IP leaks. IP forwarding is what Whonix avoided. And you’d probably still need to hack Whonix firewall.</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808/4</link>
        <pubDate>Fri, 09 Sep 2022 12:23:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14808-4</guid>
        <source url="http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808.rss">Using Whonix gateway to route a LAN connection not through TOR</source>
      </item>
      <item>
        <title>Using Whonix gateway to route a LAN connection not through TOR</title>
        <dc:creator><![CDATA[trigo_once]]></dc:creator>
        <description><![CDATA[
            <p>Can theoretically enabling IPv4 forwarding solve that?</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808/3</link>
        <pubDate>Fri, 09 Sep 2022 12:07:04 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14808-3</guid>
        <source url="http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808.rss">Using Whonix gateway to route a LAN connection not through TOR</source>
      </item>
      <item>
        <title>Using Whonix gateway to route a LAN connection not through TOR</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Whonix-Workstation to local LAN?</p>
<p>No. There’s no easy bypass. Why? See:</p>
<p><a href="https://www.whonix.org/wiki/Dev/Technical_Introduction#multiple_security_layers">https://www.whonix.org/wiki/Dev/Technical_Introduction#multiple_security_layers</a></p>
<aside class="quote no-group" data-username="trigo_once" data-post="1" data-topic="14808">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/46a35a/40.png" class="avatar"> trigo_once:</div>
<blockquote>
<p>NON_TOR_GATEWAY</p>
</blockquote>
</aside>
<p>Won’t work. That’s for connections from Whonix-Gateway. Not for connections from Whonix-Workstation.</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808/2</link>
        <pubDate>Thu, 08 Sep 2022 22:45:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14808-2</guid>
        <source url="http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808.rss">Using Whonix gateway to route a LAN connection not through TOR</source>
      </item>
      <item>
        <title>Using Whonix gateway to route a LAN connection not through TOR</title>
        <dc:creator><![CDATA[trigo_once]]></dc:creator>
        <description><![CDATA[
            <p>Hey,</p>
<p>I set up a Whonix gateway VM, which I want to use to let other VMs (non-Whonix) to communicate over TOR through it. In addition to that, I need my other VMs to be able to access 2 IPs on my LAN <strong>not</strong> through TOR. I wanted to do that through the Whonix Gateway also. I added the two IPs in 50_user.conf under whonix_firewall.d into the variable NON_TOR_GATEWAY. I additionally added them in the iptables both in OUT and FORWARD:</p>
<p><code>sudo iptables -I OUTPUT 1 -d &lt;MY_IP&gt; -j ACCPET sudo iptables -I FORWARD 1 -d &lt;MY_IP&gt; -j ACCPET</code><br>
Still, I was not able to contact those IPs, neither from the gateway itself nor from the other VMs going through the gateway.</p>
<p>Is there another setting that needs to be changed?</p>
<p>Thanks in advance</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808/1</link>
        <pubDate>Thu, 08 Sep 2022 20:32:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14808-1</guid>
        <source url="http://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808.rss">Using Whonix gateway to route a LAN connection not through TOR</source>
      </item>
  </channel>
</rss>
