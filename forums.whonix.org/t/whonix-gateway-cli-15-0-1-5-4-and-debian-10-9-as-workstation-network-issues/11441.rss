<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Whonix Gateway CLI-15.0.1.5.4 and Debian 10.9 as Workstation - Network issues</title>
    <link>http://forums.whonix.org/t/whonix-gateway-cli-15-0-1-5-4-and-debian-10-9-as-workstation-network-issues/11441</link>
    <description>Greetings,
I imported a fresh Whonix Gateway CLI .ova file on VirtualBox and I tested with a fresh Whonix Workstation XFCE.
Then I decided to use as workstation Debian 10.9 (debian-live-10.9.0-amd64-xfce) installing it in a Virtual Machine.
I followed the procedure described in the following link: https://www.whonix.org/wiki/Other_Operating_Systems#Whonix_.E2.84.A2-GNU.2FLinux-Workstation

In particular, as described in the link, I made a new machine where I attached the .iso file and in the VirtualBox settings for this Debian machine, I set the following:
* `System` → `Motherboard` → `Hardware Clock in UTC`
* `System` → `Motherboard` → `Pointing Device` → `PS/2 Mouse (required to disable the USB controller)`
* `System` → `Processor` → `Enable PAE/NX (if available)`
* `Network` → `Adapter 1` → `Attached to Internal Network (important!)`
* `Network` → `Adapter 1` → `Name (of Internal Network) (important!): Whonix` [[8]](https://www.whonix.org/wiki/Other_Operating_Systems#cite_note-8)
* `USB` → `Uncheck Enable USB controller`
* → `OK`

then I turned on the machine for the installation.

After the installation, I configured the network in this way:
`sudo nano /etc/network/interfaces`
and substitute the content with:

    # This file describes the network interfaces available on your system
    # and how to activate them. For more information, see interfaces(5).

    # The loopback network interface, leave as it is
    auto lo
    iface lo inet loopback

    auto eth0
    #iface eth0 inet dhcp
    iface eth0 inet static
    # increment last octet of IP address on additional workstations
    address 10.152.152.12
    netmask 255.255.192.0
    #network 10.152.152.0
    #broadcast 10.152.152.255
    gateway 10.152.152.10

Then, I edited /etc/resolv.conf by substituting the content with:
`nameserver 10.152.152.10`

and then I rebooted the Debian machine. I also rebooted the Whonix Gateway.
After the restart of both of them. on Debian machine I tried to execute a `curl ifconfig.me` and also a `sudo apt-get update` to check if it is connected, but it is not (indeed I get the popup of Network Manager that says I&#39;m disconnected). Only Whonix Gateway is correctly connected.

Is it possible that on Debian, the settings on `/etc/network/interfaces` could be in conflict with the Network Manager application? Or for working my Debian machine needs the Tor package to be installed? Or likely I&#39;m missing some further step? (PS: on Debian I didn&#39;t still install Tor Browser, on it there is Firefox ESR).

In all this scenario the Whonix Workstation is kept turned off.

Thank you in advance</description>
    <language>en</language>
    <lastBuildDate>Thu, 15 Apr 2021 08:22:47 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/whonix-gateway-cli-15-0-1-5-4-and-debian-10-9-as-workstation-network-issues/11441.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Whonix Gateway CLI-15.0.1.5.4 and Debian 10.9 as Workstation - Network issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Better to use <code>Disable Predictable Network Interface Names</code> instead?</p>
<p>References:</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/Whonix/whonix-gw-network-conf/blob/master/debian/whonix-gw-network-conf.links" target="_blank" rel="noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/whonix-gw-network-conf/blob/master/debian/whonix-gw-network-conf.links" target="_blank" rel="noopener">Whonix/whonix-gw-network-conf/blob/master/debian/whonix-gw-network-conf.links</a></h4>
<pre><code class="lang-links">## Copyright (C) 2012 - 2021 ENCRYPTED SUPPORT LP &lt;adrelanos@whonix.org&gt;
## See the file COPYING for copying conditions.

#### meta start
#### project Whonix
#### category networking
#### non_qubes_whonix_only yes
#### gateway_only yes
#### description

## Disable Predictable Network Interface Names as these are problematic.
## https://forums.whonix.org/t/whonix-14-0-0-0-7-developers-only/3449/4
## Disabling them as per
## 'zless /usr/share/doc/udev/README.Debian.gz'.
/dev/null /etc/systemd/network/99-default.link

#### meta end
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="quote quote-modified" data-post="4" data-topic="3449">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/whonix-14-0-0-0-7-developers-only/3449/4">Whonix 14.0.0.0.7 developers-only</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/development/8"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    IIRC you reported something to upstream on these lines? 

That was ifupdown in wheezy or so that did not fail closed when the pre hook (that we set to Whonix firewall) failed or so, not systemd-networkd. 

Is systemd guaranteed air-tight for failing closed and not leaking packets? 

Getting a network card up is not a that complex task. Theoretically it could have bugs such as using dhcp even if configured to use static networking. 
The conservative approach is to stay with ifupdown since it’s l…
  </blockquote>
</aside>

<pre><code>zless /usr/share/doc/udev/README.Debian.gz | cat
</code></pre>
<hr>
<p>Instructions would suggest instead:</p>
<pre><code>sudo ln -s /dev/null /etc/systemd/network/99-default.link
sudo update-initramfs -u
</code></pre>
<p>And perhaps reboot.</p>
<p>Untested.</p>
<p>Advantages: closer to Whonix-Workstation configuration. Easier. “Actually” predictable network interface names (at lest inside VMs).</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-cli-15-0-1-5-4-and-debian-10-9-as-workstation-network-issues/11441/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-cli-15-0-1-5-4-and-debian-10-9-as-workstation-network-issues/11441/3</link>
        <pubDate>Thu, 15 Apr 2021 08:22:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-11441-3</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-cli-15-0-1-5-4-and-debian-10-9-as-workstation-network-issues/11441.rss">Whonix Gateway CLI-15.0.1.5.4 and Debian 10.9 as Workstation - Network issues</source>
      </item>
      <item>
        <title>Whonix Gateway CLI-15.0.1.5.4 and Debian 10.9 as Workstation - Network issues</title>
        <dc:creator><![CDATA[Bl4ckJ4ck]]></dc:creator>
        <description><![CDATA[
            <p>Hello,<br>
I answered to my question because I found the solution.</p>
<p>On my Debian machine, the interface name was different, it was not <code>eth0</code> but <code>enp0s3</code>, so, in the <code>/etc/network/interfaces</code>, I substituted <code>eth0</code> with <code>enp0s3</code> and then I executed <code>sudo ifup enp0s3</code>. Without restarting the machine, it is possible to test by a <code>sudo apt-get update</code>.</p>
<p>I added this detail in the wiki of the link I attached on my question.</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-cli-15-0-1-5-4-and-debian-10-9-as-workstation-network-issues/11441/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-cli-15-0-1-5-4-and-debian-10-9-as-workstation-network-issues/11441/2</link>
        <pubDate>Wed, 14 Apr 2021 12:58:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-11441-2</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-cli-15-0-1-5-4-and-debian-10-9-as-workstation-network-issues/11441.rss">Whonix Gateway CLI-15.0.1.5.4 and Debian 10.9 as Workstation - Network issues</source>
      </item>
      <item>
        <title>Whonix Gateway CLI-15.0.1.5.4 and Debian 10.9 as Workstation - Network issues</title>
        <dc:creator><![CDATA[Bl4ckJ4ck]]></dc:creator>
        <description><![CDATA[
            <p>Greetings,<br>
I imported a fresh Whonix Gateway CLI .ova file on VirtualBox and I tested with a fresh Whonix Workstation XFCE.<br>
Then I decided to use as workstation Debian 10.9 (debian-live-10.9.0-amd64-xfce) installing it in a Virtual Machine.<br>
I followed the procedure described in the following link: <a href="https://www.whonix.org/wiki/Other_Operating_Systems#Whonix_.E2.84.A2-GNU.2FLinux-Workstation" rel="noopener nofollow ugc">https://www.whonix.org/wiki/Other_Operating_Systems#Whonix_.E2.84.A2-GNU.2FLinux-Workstation</a></p>
<p>In particular, as described in the link, I made a new machine where I attached the .iso file and in the VirtualBox settings for this Debian machine, I set the following:</p>
<ul>
<li>
<code>System</code> → <code>Motherboard</code> → <code>Hardware Clock in UTC</code>
</li>
<li>
<code>System</code> → <code>Motherboard</code> → <code>Pointing Device</code> → <code>PS/2 Mouse (required to disable the USB controller)</code>
</li>
<li>
<code>System</code> → <code>Processor</code> → <code>Enable PAE/NX (if available)</code>
</li>
<li>
<code>Network</code> → <code>Adapter 1</code> → <code>Attached to Internal Network (important!)</code>
</li>
<li>
<code>Network</code> → <code>Adapter 1</code> → <code>Name (of Internal Network) (important!): Whonix</code> <a href="https://www.whonix.org/wiki/Other_Operating_Systems#cite_note-8" rel="noopener nofollow ugc">[8]</a>
</li>
<li>
<code>USB</code> → <code>Uncheck Enable USB controller</code>
</li>
<li>→ <code>OK</code>
</li>
</ul>
<p>then I turned on the machine for the installation.</p>
<p>After the installation, I configured the network in this way:<br>
<code>sudo nano /etc/network/interfaces</code><br>
and substitute the content with:</p>
<pre><code># This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

# The loopback network interface, leave as it is
auto lo
iface lo inet loopback

auto eth0
#iface eth0 inet dhcp
iface eth0 inet static
# increment last octet of IP address on additional workstations
address 10.152.152.12
netmask 255.255.192.0
#network 10.152.152.0
#broadcast 10.152.152.255
gateway 10.152.152.10
</code></pre>
<p>Then, I edited /etc/resolv.conf by substituting the content with:<br>
<code>nameserver 10.152.152.10</code></p>
<p>and then I rebooted the Debian machine. I also rebooted the Whonix Gateway.<br>
After the restart of both of them. on Debian machine I tried to execute a <code>curl ifconfig.me</code> and also a <code>sudo apt-get update</code> to check if it is connected, but it is not (indeed I get the popup of Network Manager that says I’m disconnected). Only Whonix Gateway is correctly connected.</p>
<p>Is it possible that on Debian, the settings on <code>/etc/network/interfaces</code> could be in conflict with the Network Manager application? Or for working my Debian machine needs the Tor package to be installed? Or likely I’m missing some further step? (PS: on Debian I didn’t still install Tor Browser, on it there is Firefox ESR).</p>
<p>In all this scenario the Whonix Workstation is kept turned off.</p>
<p>Thank you in advance</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-cli-15-0-1-5-4-and-debian-10-9-as-workstation-network-issues/11441/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-cli-15-0-1-5-4-and-debian-10-9-as-workstation-network-issues/11441/1</link>
        <pubDate>Wed, 14 Apr 2021 11:55:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-11441-1</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-cli-15-0-1-5-4-and-debian-10-9-as-workstation-network-issues/11441.rss">Whonix Gateway CLI-15.0.1.5.4 and Debian 10.9 as Workstation - Network issues</source>
      </item>
  </channel>
</rss>
