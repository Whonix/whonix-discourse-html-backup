<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Make KVM work again after deleting whonix gateway .qcow2, with a new whonix gateway</title>
    <link>http://forums.whonix.org/t/make-kvm-work-again-after-deleting-whonix-gateway-qcow2-with-a-new-whonix-gateway/3868</link>
    <description>Due to space problems I was literally forced to delete whonix gateways disk.In my case the disk was _Whonix-Gateway.qcow2_

After that I simply downloaded whonix gateway for kvm again. I didnt do anything special, I extracted the .qcow2 file again started whonix gateway from kvm, and it simply worked again. I did once again all the start wizard of the first time to setup the gateway and it worked. For a few days. 

Now due to power issues some day ago whonix gateway was interrupted during an update. However guess what: it was still working.
With sudo apt-get install -f / dpkg etc, I fixed up everything missed by the upgrade. No errors shown at all and everything was working. 
Today the gateway stopped working. It was stuck at 80% of tor bootstrap. So, after rebooting and testing my connection 1000 times I said fuck it, i simply delete this qcow2 again and simply extract again the same file I used before.

And now whonix Gateway isnt working no more. Simply it gets stuck in tor bootstrap, at 5% and goes on and on. Doesnt move from 5%, simply it behaves like this new whonix gateway cant see the network.

I need someone to tell me how I can install again whonix gateway in KVM. Im migrating everything in a new OS, problem is that inside workstation I got some files I really need! And looks like internet is my only way out of there.

What I tried:

* Testing TOR on host: working perfectly
* Following again the installation steps in whonix wiki for KVM. I only get an error that tells me that whonix gateway already exists.

My original whonix gateway was actually whonix gateway 12. Now I have whonix gateway 13. And yes of course I verified the file after downloading it.

The list of files inside whonix&#39;s folder: 

* Whonix_network-13.0.0.1.4.xml
* Whonix-Gateway-12.0.0.3.2.xml
* Whonix-Workstation-12.0.0.3.2.xml
* Whonix-Gateway-13.0.0.1.4.xml
* Whonix-Workstation.qcow2
* Whonix-Gateway.qcow2
* Whonix_network-12.0.0.3.2.xml

Originally Whonix-Gateway.qcow2 was Whonix-Gateway13.0.0.1.4.qcow2 or something similar, I renamed it cause KVM didnt read the new qcow2 file. 

First time I did it, it really worked. Downloaded whonix gateway again, extracted, renamed, and voila. Now I have no idea on how to proceed. Any help is appreciated, even a link explaining a similar problem
Thank you.</description>
    <language>en</language>
    <lastBuildDate>Tue, 16 May 2017 15:10:27 +0000</lastBuildDate>
    <category>KVM</category>
    <atom:link href="http://forums.whonix.org/t/make-kvm-work-again-after-deleting-whonix-gateway-qcow2-with-a-new-whonix-gateway/3868.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Make KVM work again after deleting whonix gateway .qcow2, with a new whonix gateway</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="2" data-topic="3868">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> any suggestions? What is the usual fix for this?</p>
</blockquote>
</aside>
<p>Well, try bridges?</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Bridges" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/480;"><img src="https://www.whonix.org/w/images/8/85/Black-and-white-50272-640.jpg" class="thumbnail"></div>

<h3><a href="https://www.whonix.org/wiki/Bridges" target="_blank" rel="nofollow noopener">Bridges</a></h3>

<p>Censorship Circumvention. Get around network bans. Using Whonix with (private) (obfuscated) bridges. Useful in case your Internet Service Provider (IS...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Otherwise… That’s rather hard to debug. Could be either a legitimate Whonix bug. Or a virtualizer specific connectivity bug. Or network censorship.</p>
<p>You need to “UnWhonix”. Remove Whonix configurations until it’s like Debian.</p>
<p><a href="https://www.whonix.org/wiki/Dev/Test" class="onebox" target="_blank">https://www.whonix.org/wiki/Dev/Test</a></p>
<p>Then see if Whonix was the cause. Otherwise from there debug as per <a href="https://www.whonix.org/wiki/Free_Support_Principle">https://www.whonix.org/wiki/Free_Support_Principle</a> i.e. by contacting various upstreams for help.</p>
<p>Realistically at the current state of Whonix development, users who run into such issues won’t be able to use Whonix. Best hope is waiting for a highly skilled user running into this issue, and successfully debugging it.</p>
          <p><a href="http://forums.whonix.org/t/make-kvm-work-again-after-deleting-whonix-gateway-qcow2-with-a-new-whonix-gateway/3868/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/make-kvm-work-again-after-deleting-whonix-gateway-qcow2-with-a-new-whonix-gateway/3868/3</link>
        <pubDate>Tue, 16 May 2017 15:10:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3868-3</guid>
        <source url="http://forums.whonix.org/t/make-kvm-work-again-after-deleting-whonix-gateway-qcow2-with-a-new-whonix-gateway/3868.rss">Make KVM work again after deleting whonix gateway .qcow2, with a new whonix gateway</source>
      </item>
      <item>
        <title>Make KVM work again after deleting whonix gateway .qcow2, with a new whonix gateway</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="1" data-topic="3868">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/r/3e96dc/40.png" class="avatar"> rubacig:</div>
<blockquote>
<p>Due to space problems I was literally forced to delete whonix gateways disk.In my case the disk was Whonix-Gateway.qcow2</p>
</blockquote>
</aside>
<p>Assuming you just perform regular apt updates, how big did the image file get for you to delete it? I would expect this with the workstation VM</p>
<aside class="quote" data-post="1" data-topic="3868">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/r/3e96dc/40.png" class="avatar"> rubacig:</div>
<blockquote>
<p>Today the gateway stopped working. It was stuck at 80% of tor bootstrap. So, after rebooting and testing my connection 1000 times I said fuck it, i simply delete this qcow2 again and simply extract again the same file I used before.</p>
</blockquote>
</aside>
<p>This is a problem I saw reported frequently. It has little to do with the underlying hypervisor because its invisible to the guest. A possible solution that’s not ideal is to reset Tor’s consensus files but that could leave you open to picking a malicious guard. I recommend making a clean snapshot of the GW before starting it for the first time and restoring it if things don’t work every time. Definitely faster than re-downloading the image.</p>
<p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> any suggestions? What is the usual fix for this?</p>
<aside class="quote" data-post="1" data-topic="3868">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/r/3e96dc/40.png" class="avatar"> rubacig:</div>
<blockquote>
<p>Originally Whonix-Gateway.qcow2 was Whonix-Gateway13.0.0.1.4.qcow2 or something similar, I renamed it cause KVM didnt read the new qcow2 file.</p>
</blockquote>
</aside>
<p>This is unnecessary as moving the image to the libvirt folder renames it for you automatically.</p>
<p>I recommend checking the storage folder for gateway mutliple images that could have made their way there by mistake. Go to: Virtual machine Manager -&gt; Edit -&gt; Connection Details -&gt; Storage.</p>
<p>I think its best if you start over one more time from a newly extracted image that you snapshot right after importing then give it a try.</p>
          <p><a href="http://forums.whonix.org/t/make-kvm-work-again-after-deleting-whonix-gateway-qcow2-with-a-new-whonix-gateway/3868/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/make-kvm-work-again-after-deleting-whonix-gateway-qcow2-with-a-new-whonix-gateway/3868/2</link>
        <pubDate>Thu, 11 May 2017 00:29:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3868-2</guid>
        <source url="http://forums.whonix.org/t/make-kvm-work-again-after-deleting-whonix-gateway-qcow2-with-a-new-whonix-gateway/3868.rss">Make KVM work again after deleting whonix gateway .qcow2, with a new whonix gateway</source>
      </item>
      <item>
        <title>Make KVM work again after deleting whonix gateway .qcow2, with a new whonix gateway</title>
        <dc:creator><![CDATA[rubacig]]></dc:creator>
        <description><![CDATA[
            <p>Due to space problems I was literally forced to delete whonix gateways disk.In my case the disk was <em>Whonix-Gateway.qcow2</em></p>
<p>After that I simply downloaded whonix gateway for kvm again. I didnt do anything special, I extracted the .qcow2 file again started whonix gateway from kvm, and it simply worked again. I did once again all the start wizard of the first time to setup the gateway and it worked. For a few days.</p>
<p>Now due to power issues some day ago whonix gateway was interrupted during an update. However guess what: it was still working.<br>
With sudo apt-get install -f / dpkg etc, I fixed up everything missed by the upgrade. No errors shown at all and everything was working.<br>
Today the gateway stopped working. It was stuck at 80% of tor bootstrap. So, after rebooting and testing my connection 1000 times I said fuck it, i simply delete this qcow2 again and simply extract again the same file I used before.</p>
<p>And now whonix Gateway isnt working no more. Simply it gets stuck in tor bootstrap, at 5% and goes on and on. Doesnt move from 5%, simply it behaves like this new whonix gateway cant see the network.</p>
<p>I need someone to tell me how I can install again whonix gateway in KVM. Im migrating everything in a new OS, problem is that inside workstation I got some files I really need! And looks like internet is my only way out of there.</p>
<p>What I tried:</p>
<ul>
<li>Testing TOR on host: working perfectly</li>
<li>Following again the installation steps in whonix wiki for KVM. I only get an error that tells me that whonix gateway already exists.</li>
</ul>
<p>My original whonix gateway was actually whonix gateway 12. Now I have whonix gateway 13. And yes of course I verified the file after downloading it.</p>
<p>The list of files inside whonix’s folder:</p>
<ul>
<li>Whonix_network-13.0.0.1.4.xml</li>
<li>Whonix-Gateway-12.0.0.3.2.xml</li>
<li>Whonix-Workstation-12.0.0.3.2.xml</li>
<li>Whonix-Gateway-13.0.0.1.4.xml</li>
<li>Whonix-Workstation.qcow2</li>
<li>Whonix-Gateway.qcow2</li>
<li>Whonix_network-12.0.0.3.2.xml</li>
</ul>
<p>Originally Whonix-Gateway.qcow2 was Whonix-Gateway13.0.0.1.4.qcow2 or something similar, I renamed it cause KVM didnt read the new qcow2 file.</p>
<p>First time I did it, it really worked. Downloaded whonix gateway again, extracted, renamed, and voila. Now I have no idea on how to proceed. Any help is appreciated, even a link explaining a similar problem<br>
Thank you.</p>
          <p><a href="http://forums.whonix.org/t/make-kvm-work-again-after-deleting-whonix-gateway-qcow2-with-a-new-whonix-gateway/3868/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/make-kvm-work-again-after-deleting-whonix-gateway-qcow2-with-a-new-whonix-gateway/3868/1</link>
        <pubDate>Wed, 10 May 2017 20:24:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3868-1</guid>
        <source url="http://forums.whonix.org/t/make-kvm-work-again-after-deleting-whonix-gateway-qcow2-with-a-new-whonix-gateway/3868.rss">Make KVM work again after deleting whonix gateway .qcow2, with a new whonix gateway</source>
      </item>
  </channel>
</rss>
