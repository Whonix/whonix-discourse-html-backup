<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
    <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034</link>
    <description>I am experiencing the following problem with Whonix 15 (buster-proposed-updates repo enabled), specifically with whonix-ws template. Everytime I start a VM based on it, the following message appears.

&gt;############################################################################### 
msgdispatcher script bug. 
No panic. Nothing is broken. Just some rare condition has been hit. 
Try again later. There is likely a solution for this problem. 
Please see Whonix News, Whonix Blog and Whonix User Help Forum. 
Please report this bug! 
 who_ami: user 
msgdispatcher_identifier: whonixcheck 
error_text: sudo --non-interactive msgdisptacher_username=&quot;$msgdisptacher_username&quot; msgdispatcher_identifier=&quot;$msgdispatcher_identifier&quot; msgdispatcher_appendix=&quot;messagex_done&quot; &quot;$delete_wrapper&quot; 
last exit_code: 1 
###############################################################################

I run tasket&#39;s Qubes-VM-Hardening script v 0.9.3. Disabling vm-boot-protect does not change the situation.

Cheers.</description>
    <language>en</language>
    <lastBuildDate>Wed, 18 Mar 2020 13:23:47 +0000</lastBuildDate>
    <category>Qubes-Whonix</category>
    <atom:link href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Added more debugging code in Whonix developers repository (will flow to other repositories as per usual) if anyone likes to test this. We’ll now probably get an exact error message why it is failing.</p>
          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/16</link>
        <pubDate>Wed, 18 Mar 2020 13:23:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-16</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[kelman]]></dc:creator>
        <description><![CDATA[
            <aside class="quote quote-modified" data-post="1" data-topic="8034">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/letter_avatar_proxy/v4/letter/m/d2c977/40.png" class="avatar">
    <a href="https://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034">[msgdispatcher] bug: "$delete_wrapper"</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/qubes-whonix"><span class="badge-category-bg" style="background-color: #63a0ff;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Everything specific to Qubes-Whonix. (devs)">Qubes-Whonix</span></a>
  </div>
  <blockquote>
    I am experiencing the following problem with Whonix 15 (buster-proposed-updates repo enabled), specifically with whonix-ws template. Everytime I start a VM based on it, the following message appears. 

############################################################################### 
msgdispatcher script bug. 
No panic. Nothing is broken. Just some rare condition has been hit. 
Try again later. There is likely a solution for this problem. 
Please see Whonix News, Whonix Blog and Whonix User Help F…
  </blockquote>
</aside>

<p>In fact, I have the same problem as the tasket described in this thread. And since the problem has not yet been resolved, it is obvious that me should not enable VMAuth and vm-boot-protect for Whonix. I think it’s worth adding to the documentation that these functions are experimental for Whonix and cause errors.</p>
          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/15</link>
        <pubDate>Wed, 18 Mar 2020 12:01:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-15</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[kelman]]></dc:creator>
        <description><![CDATA[
            <p>Msgdisptcher error in sys-whonix, anon-whonix, as well as a one-time whonix.</p>
<pre><code>############################################################################### 
## msgdispatcher script bug. 
## No panic. Nothing is broken. Just some rare condition has been hit. 
## Try again later. There is likely a solution for this problem. 
## Please see Whonix News, Whonix Blog and Whonix User Help Forum. 
## Please report this bug! 
## 
## who_ami: user 
## 
## msgdisptacher_username: whonixcheck 
## msgdispatcher_identifier: whonixcheck 
## msgdispatcher_appendix: 
## delete_wrapper: /usr/lib/msgcollector/msgdispatcher_delete_wrapper 
## 
## error_text: sudo --non-interactive msgdisptacher_username="$msgdisptacher_username" msgdispatcher_identifier="$msgdispatcher_identifier" msgdispatcher_appendix="messagex_done" "$delete_wrapper" 
## last exit_code: 1 
###############################################################################
</code></pre>
<p>The problem arose after installing Qubes-VM-hardening.</p>
<p>My actions for whonix-gw-15 and whonix-ws-15:</p>
<ol>
<li>Download Qubes-VM-Hardening</li>
<li>
</li>
</ol>
<pre><code>cd Qubes-VM-hardening
sudo bash install
sudo bash configure-sudo-prompt
</code></pre>
<ol start="3">
<li>Added vm-boot-protect service (without root) for sys-whonix and anon-whonix</li>
</ol>
<p>Also, after running anon-whonix or whonix-dispVM in dom0 from sys-whonix, an invitation is sent. The specified solution in (qubes-os .org/doc/vm-sudo/)</p>
<pre><code>```
ALL ALL=NOPASSWD: /usr/sbin/virt-what
ALL ALL=NOPASSWD: /usr/sbin/service whonixcheck restart
ALL ALL=NOPASSWD: /usr/sbin/service whonixcheck start
ALL ALL=NOPASSWD: /usr/sbin/service whonixcheck stop
ALL ALL=NOPASSWD: /usr/sbin/service whonixcheck status
```
</code></pre>
<p>Did not help.</p>
          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/14</link>
        <pubDate>Tue, 17 Mar 2020 23:57:40 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-14</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[tasket]]></dc:creator>
        <description><![CDATA[
            <p>Update: I’m continuing to experience this msgdispatcher error with unmodified templates. The last time was today when sys-whonix displayed it when beginning template updates (sys-whonix had just started). However, the system was under a bit of stress as it was also updating dom0 and playing music at the same time.</p>
          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/13</link>
        <pubDate>Tue, 10 Sep 2019 22:17:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-13</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Removing user <code>user</code> from group <code>sudo</code> will break <a href="https://github.com/Whonix/msgcollector/blob/master/etc/sudoers.d/msgcollector" rel="nofollow noopener">/etc/sudoers.d/msgcollector</a></p>
<p>Described here:</p>
<aside class="quote quote-modified" data-post="9" data-topic="7625">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/msgcollector-security-hardening/7625/9">msgcollector security hardening</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/development"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    <a href="https://github.com/Whonix/msgcollector" rel="nofollow noopener">https://github.com/Whonix/msgcollector</a> is still weird. 
whonixcheck runs under user whonixcheck for better hardening (linux user account separation). It’s auto started as a daemon: 
<a href="https://github.com/Whonix/whonixcheck/blob/master/lib/systemd/system/whonixcheck.service" rel="nofollow noopener">https://github.com/Whonix/whonixcheck/blob/master/lib/systemd/system/whonixcheck.service</a> 
Usually daemons don’t send GUI notifications. 
msgdispatcher (part of msgcollector package) is started by: 


<a href="https://github.com/Whonix/msgcollector/blob/master/etc/xdg/autostart/msgdispatcher.desktop" rel="nofollow noopener">https://github.com/Whonix/msgcollector/blob/master/etc/xdg/autostart/msgdispatcher.desktop</a> for X, and

<a href="https://github.com/Whonix/msgcollector/blob/master/etc/profile.d/40_msgdispatcher.sh" rel="nofollow noopener">https://github.…</a>
  </blockquote>
</aside>

          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/12</link>
        <pubDate>Mon, 09 Sep 2019 10:14:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-12</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[tasket]]></dc:creator>
        <description><![CDATA[
            <p>Right, the VMAuth prompts come from sys-whonix, and this seems to be the result of an appvm connecting or disconnecting with the sys-whonix proxyvm. So maybe no direct relation to what whonix-ws is doing (although that is an issue in itself).</p>
<p>Re: su vs sudo in scripts… It may not matter here if you are always running sudo as root or have a sudoers.d config as you indicated. But su appears to be the convention as its usually a core command in Linux distros, while sudo may be optional on some (such as fedora). Never saw sudo in init.d/cron scripts for example, and the sudo --non-interactive option was added relatively recently in 2011. I think Qubes scripts only use su. But I digress…</p>
<p>I didn’t activate the vm-boot-protect* service after installing it, so my prediction is that it will behave the same when only sudo is reconfigured. I’ll have to test a bit more to be sure.</p>
          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/11</link>
        <pubDate>Sun, 08 Sep 2019 13:50:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-11</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[Patrick_mobile]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/Whonix/msgcollector/blob/master/etc/sudoers.d/msgcollector" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/msgcollector/blob/master/etc/sudoers.d/msgcollector" target="_blank" rel="nofollow noopener">Whonix/msgcollector/blob/master/etc/sudoers.d/msgcollector</a></h4>
<pre><code class="lang-d/msgcollector">## Copyright (C) 2019 - 2019 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

Defaults:ALL env_keep += "msgdisptacher_username"
Defaults:ALL env_keep += "msgdispatcher_identifier"
Defaults:ALL env_keep += "msgdispatcher_appendix"
%sudo ALL=NOPASSWD: /usr/lib/msgcollector/msgdispatcher_delete_wrapper
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/10</link>
        <pubDate>Sun, 08 Sep 2019 04:08:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-10</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[Patrick_mobile]]></dc:creator>
        <description><![CDATA[
            <p>We actually limited su for security as per:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Root" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    

<h3><a href="https://www.whonix.org/wiki/Root" target="_blank" rel="nofollow noopener">Root</a></h3>

<p>Tips on using sudo / root (privileged) commands safely</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>msgdispatcher should not cause any sudoers prompt. If it does, it would require fixing its /etc/sudoers.d/ exception file. Can you try without Qubes-VM-hardening and sudo requirement only?</p>
<p>Also good to change exit code of delete wrapper to know if delete wrapper or sudo is failing.</p>
<p>sudo has a switch --noninteractive. Using this a lot in Whonix. Works great.</p>
<p>“sudo should not be used non-interactive”: citation required.</p>
          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/9</link>
        <pubDate>Sun, 08 Sep 2019 04:06:07 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-9</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[tasket]]></dc:creator>
        <description><![CDATA[
            <p>Installing qvmh makes the error occur consistently. But I already see a probable cause in the error message: “msgdispatcher_identifier: whonixcheck error_text: sudo…”</p>
<p>Its my understanding that ‘sudo’ should not be used in system or application scripts bc its a user invocation tool. The appropriate command for switching users in scripts would be ‘su’ (both qvmh and Qubes-VPN-Support have examples of displaying user messages via ‘su’); also note its generally only workable when invoking it as root to switch to a less privileged user.</p>
<p>Even if this weren’t the case, scripting with sudo doesn’t appear to be compatible with this type of “vm-sudo” Qubes configuration (even though it seems fine with the permissive Qubes default config for obvious reasons).</p>
          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/8</link>
        <pubDate>Sun, 08 Sep 2019 03:47:45 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-8</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[tasket]]></dc:creator>
        <description><![CDATA[
            <p>I got the identical error message… but none of my Whonix 15 templates currently have Qubes-VM-hardening installed.</p>
<p>And the error is not very repeatable.</p>
<p>At first glance, the main variables may be startup timing (race condition?) and the fact that qubes-rpc VMAuth is set to “ask” in dom0, as per the qvmh installation procedure. (I am getting VMAuth popups for sys-whonix when starting a terminal or browser for a whonix-ws based appvm, but not when starting a terminal in the whonix-ws template.)</p>
<p>Also, I recall using Whonix about a month ago and didn’t experience these issues.</p>
<p>I would prefer addressing the issues sans qvmh before troubleshooting with qvmh, but I’ll try installing it in a whonix-ws-15 clone for now to see if the error message becomes more predictable, VMAuth prompts are affected, etc.</p>
          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/7</link>
        <pubDate>Sun, 08 Sep 2019 03:11:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-7</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/tasket/Qubes-VM-hardening/issues/43" target="_blank" rel="nofollow noopener">github.com/tasket/Qubes-VM-hardening</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/adrelanos" rel="nofollow noopener">
<img src="https://avatars1.githubusercontent.com/u/1985040?v=2&amp;s=96" class="thumbnail onebox-avatar" width="60" height="60">
</a>

<h4><a href="https://github.com/tasket/Qubes-VM-hardening/issues/43" target="_blank" rel="nofollow noopener">Issue: Qubes-VM-hardening breaks msgcollector / msgdispatcher</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/tasket/Qubes-VM-hardening/issues/43" target="_blank" rel="nofollow noopener">2019-09-07</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/1
Related source files:
https://github.com/Whonix/msgcollector/blob/master/usr/lib/msgcollector/msgdispatcher
https://github.com/Whonix/msgcollector/blob/master/usr/lib/msgcollector/msgdispatcher_delete_wrapper
https://github.com/Whonix/msgcollector/blob/master/etc/xdg/autostart/msgdispatcher.desktop
https://github.com/Whonix/msgcollector/blob/master/lib/systemd/system/msgcollector.service
https://github.com/Whonix/msgcollector/blob/master/usr/lib/msgcollector/msgdispatcher_init
https://github.com/Whonix/msgcollector/blob/master/etc/xdg/autostart/msgdispatcher.desktop</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/6</link>
        <pubDate>Sat, 07 Sep 2019 07:29:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-6</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[minimal]]></dc:creator>
        <description><![CDATA[
            <p>Ok, thanks for your answer.<br>
I updated msgcollector and the message error when I start a whonix-ws based VM is:</p>
<blockquote>
<p>###############################################################################<br>
msgdispatcher script bug.<br>
No panic. Nothing is broken. Just some rare condition has been hit.<br>
Try again later. There is likely a solution for this problem.<br>
Please see Whonix News, Whonix Blog and Whonix User Help Forum.<br>
Please report this bug!<br>
who_ami: user<br>
msgdisptacher_username: whonixcheck<br>
msgdispatcher_identifier: whonixcheck<br>
msgdispatcher_appendix:<br>
delete_wrapper: /usr/lib/msgcollector/msgdispatcher_delete_wrapper<br>
error_text: sudo --non-interactive msgdisptacher_username="$msgdisptacher_username" msgdispatcher_identifier="$msgdispatcher_identifier" msgdispatcher_appendix=“messagex_done” “$delete_wrapper”<br>
last exit_code: 1<br>
#######################################################</p>
</blockquote>
<p>and</p>
<blockquote>
<p>sudo find /var/run/msgcollector<br>
/var/run/msgcollector<br>
/var/run/msgcollector/user<br>
/var/run/msgcollector/user/msgdispatcher_x_subshell_fifo<br>
/var/run/msgcollector/user/msgdispatcher_pidx<br>
/var/run/msgcollector/user/msgdispatcher_x_lock<br>
/var/run/msgcollector/whonixcheck<br>
/var/run/msgcollector/whonixcheck/whonixcheck_messagecli_done<br>
/var/run/msgcollector/whonixcheck/whonixcheck_messagex_done<br>
/var/run/msgcollector/whonixcheck/whonixcheck_lefttop<br>
/var/run/msgcollector/whonixcheck/whonixcheck_titlex<br>
/var/run/msgcollector/whonixcheck/whonixcheck_parenttty<br>
/var/run/msgcollector/whonixcheck/whonixcheck_typex<br>
/var/run/msgcollector/whonixcheck/whonixcheck_icon<br>
/var/run/msgcollector/init_done</p>
</blockquote>
<p>Just for the record: I tried to change the template for these VMs with a whonix-ws-15 where tasket’s VM-hardening script is not installed. In this case, no problems detected when a VM is started.</p>
<p>Thanks for your help.</p>
          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/5</link>
        <pubDate>Fri, 06 Sep 2019 14:45:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-5</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>This is now also in buster-proposed-updates repo.</p>
          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/4</link>
        <pubDate>Fri, 06 Sep 2019 13:40:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-4</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Another enhancment which makes this easier to debug but not the solution yet.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/msgcollector/commit/699311b03c15782d5c610dcb5b3e20d728e12b3a" target="_blank" rel="nofollow noopener">github.com/Whonix/msgcollector</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/msgcollector/commit/699311b03c15782d5c610dcb5b3e20d728e12b3a" target="_blank" rel="nofollow noopener">clean up duplicate variables</a>
</h4>


<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="https://github.com/Whonix/msgcollector/commit/699311b03c15782d5c610dcb5b3e20d728e12b3a" target="_blank" rel="nofollow noopener">12:46PM - 06 Sep 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>4 additions</strong>
  and <strong>4 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/3</link>
        <pubDate>Fri, 06 Sep 2019 12:47:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-3</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Improved error handler just now to ease debugging this.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/msgcollector/commit/3b29acd0d00411f8f1ea314b3c8714997d169b3a" target="_blank" rel="nofollow noopener">github.com/Whonix/msgcollector</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/msgcollector/commit/3b29acd0d00411f8f1ea314b3c8714997d169b3a" target="_blank" rel="nofollow noopener">improve error_handler</a>
</h4>


<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="https://github.com/Whonix/msgcollector/commit/3b29acd0d00411f8f1ea314b3c8714997d169b3a" target="_blank" rel="nofollow noopener">12:38PM - 06 Sep 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>5 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>If you like to debug this, please replace the existing script <code>/usr/lib/msgcollector/msgdispatcher</code> with the newer script.</p>
<p><a href="https://github.com/Whonix/msgcollector/blob/master/usr/lib/msgcollector/msgdispatcher" rel="nofollow noopener">https://github.com/Whonix/msgcollector/blob/master/usr/lib/msgcollector/msgdispatcher</a></p>
<p>(Press “raw”.)</p>
<p>That would provider better debug output.</p>
<p>Please also run the following command and post the output here:</p>
<pre><code>sudo find /var/run/msgcollector</code></pre>
          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/2</link>
        <pubDate>Fri, 06 Sep 2019 12:42:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-2</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
      <item>
        <title>[msgdispatcher] bug: &quot;$delete_wrapper&quot;</title>
        <dc:creator><![CDATA[minimal]]></dc:creator>
        <description><![CDATA[
            <p>I am experiencing the following problem with Whonix 15 (buster-proposed-updates repo enabled), specifically with whonix-ws template. Everytime I start a VM based on it, the following message appears.</p>
<blockquote>
<p>###############################################################################<br>
msgdispatcher script bug.<br>
No panic. Nothing is broken. Just some rare condition has been hit.<br>
Try again later. There is likely a solution for this problem.<br>
Please see Whonix News, Whonix Blog and Whonix User Help Forum.<br>
Please report this bug!<br>
who_ami: user<br>
msgdispatcher_identifier: whonixcheck<br>
error_text: sudo --non-interactive msgdisptacher_username="$msgdisptacher_username" msgdispatcher_identifier="$msgdispatcher_identifier" msgdispatcher_appendix=“messagex_done” “$delete_wrapper”<br>
last exit_code: 1<br>
###############################################################################</p>
</blockquote>
<p>I run tasket’s Qubes-VM-Hardening script v 0.9.3. Disabling vm-boot-protect does not change the situation.</p>
<p>Cheers.</p>
          <p><a href="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034/1</link>
        <pubDate>Fri, 06 Sep 2019 12:05:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8034-1</guid>
        <source url="http://forums.whonix.org/t/msgdispatcher-bug-delete-wrapper/8034.rss">[msgdispatcher] bug: &quot;$delete_wrapper&quot;</source>
      </item>
  </channel>
</rss>
