<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Enable Secure Memory Encryption (SME) - kernel parameter mem_encrypt - by default?</title>
    <link>http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393</link>
    <description>AMD CPU part:

https://www.kernel.org/doc/html/latest/admin-guide/kernel-parameters.html

&gt;         mem_encrypt=    [X86-64] AMD Secure Memory Encryption (SME) control
&gt;                         Valid arguments: on, off
&gt;                         Default (depends on kernel configuration option):
&gt;                           on  (CONFIG_AMD_MEM_ENCRYPT_ACTIVE_BY_DEFAULT=y)
&gt;                           off (CONFIG_AMD_MEM_ENCRYPT_ACTIVE_BY_DEFAULT=n)
&gt;                         mem_encrypt=on:         Activate SME
&gt;                         mem_encrypt=off:        Do not activate SME
&gt; 
&gt;                         Refer to Documentation/virt/kvm/amd-memory-encryption.rst
&gt;                         for details on when memory encryption can be activated.

https://www.kernel.org/doc/Documentation/virt/kvm/amd-memory-encryption.rst

Should we enable this by default in package `security-misc`?

----

Intel CPU:

What would be the Intel equivalent? Intel MKTME? But that doesn&#39;t seem ready at time of writing?

----

Does this help to defeat cold boot attacks?

Related:
 https://forums.whonix.org/t/is-ram-wipe-possible-inside-whonix-cold-boot-attack-defense/5596</description>
    <language>en</language>
    <lastBuildDate>Thu, 11 Nov 2021 11:03:14 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Enable Secure Memory Encryption (SME) - kernel parameter mem_encrypt - by default?</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Pass. This feature is useless because it is tied to an encryption key hardcoded into the machine by the CPU manufacturer, I’ve also read security attacks against it over the years so never bothered following it much.</p>
          <p><a href="http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393/5</link>
        <pubDate>Thu, 11 Nov 2021 11:03:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10393-5</guid>
        <source url="http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393.rss">Enable Secure Memory Encryption (SME) - kernel parameter mem_encrypt - by default?</source>
      </item>
      <item>
        <title>Enable Secure Memory Encryption (SME) - kernel parameter mem_encrypt - by default?</title>
        <dc:creator><![CDATA[FOSS_HW]]></dc:creator>
        <description><![CDATA[
            <p>Any news on this? It is an interesting security feature not many are using - despite many actually having CPUs with it!</p>
          <p><a href="http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393/4</link>
        <pubDate>Mon, 08 Nov 2021 11:35:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10393-4</guid>
        <source url="http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393.rss">Enable Secure Memory Encryption (SME) - kernel parameter mem_encrypt - by default?</source>
      </item>
      <item>
        <title>Enable Secure Memory Encryption (SME) - kernel parameter mem_encrypt - by default?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>madaidan via Whonix Forum:</p>
<blockquote>
<aside class="quote no-group" data-username="Patrick" data-post="1" data-topic="10393">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Should we enable this by default in package <code>security-misc</code> ?</p>
</blockquote>
</aside>
<p>No, the current implementation in the kernel is incomplete/buggy and it can prevent some devices from booting.</p>
<p><a href="https://github.com/anthraxx/linux-hardened/issues/16">https://github.com/anthraxx/linux-hardened/issues/16</a></p>
</blockquote>
<p>Agreed. Glad you brought that up.</p>
<blockquote>
<p>Kinda. The attacker can siphon the encryption keys out of the CPU or dump the memory before it’s encrypted but that would be hard. If they can’t do either of those though, memory would be remain encrypted to the attacker, thus defeating a cold boot attack.</p>
</blockquote>
<p>I haven’t seen any reports of anyone dissecting any modern CPU and<br>
extracting data from in. In theory, of course, it’s conceivable. I guess<br>
that was the idea of <a href="https://en.wikipedia.org/wiki/TRESOR">https://en.wikipedia.org/wiki/TRESOR</a> - RAM was<br>
vulnerable to information disclosure but for CPU’s nobody announced<br>
managing that yet.</p>
<p>Indeed, encrypting RAM is nice and we should enable it if there were no<br>
major downsides such as the ones linked above, but wiping RAM is better.<br>
Should do both if possible.</p>
          <p><a href="http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393/3</link>
        <pubDate>Fri, 09 Oct 2020 15:15:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10393-3</guid>
        <source url="http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393.rss">Enable Secure Memory Encryption (SME) - kernel parameter mem_encrypt - by default?</source>
      </item>
      <item>
        <title>Enable Secure Memory Encryption (SME) - kernel parameter mem_encrypt - by default?</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="1" data-topic="10393">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Should we enable this by default in package <code>security-misc</code> ?</p>
</blockquote>
</aside>
<p>No, the current implementation in the kernel is incomplete/buggy and it can prevent some devices from booting.</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/anthraxx/linux-hardened/issues/16" target="_blank" rel="nofollow noopener">github.com/anthraxx/linux-hardened</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/anthraxx/linux-hardened/issues/16" target="_blank" rel="nofollow noopener">AMD mem_encrypt boot problem</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2019-11-16" data-time="02:13:09" data-timezone="UTC">02:13AM - 16 Nov 19 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/EvoXCX" target="_blank" rel="nofollow noopener">
          <img alt="EvoXCX" src="https://avatars0.githubusercontent.com/u/25347475?v=4" class="onebox-avatar-inline" width="20" height="20">
          EvoXCX
        </a>
      </div>
    </div>
  </div>
</div>

<div class="github-row">
  <p class="github-content">Impossible to boot on AMD GPU without mem_encrypt=off as kernel parameters.</p>
</div>

<div class="labels">
    <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">bug</span>
    <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">upstream</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="Patrick" data-post="1" data-topic="10393">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Does this help to defeat cold boot attacks?</p>
</blockquote>
</aside>
<p>Kinda. The attacker can siphon the encryption keys out of the CPU or dump the memory before it’s encrypted but that would be hard. If they can’t do either of those though, memory would be remain encrypted to the attacker, thus defeating a cold boot attack.</p>
          <p><a href="http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393/2</link>
        <pubDate>Fri, 09 Oct 2020 14:31:37 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10393-2</guid>
        <source url="http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393.rss">Enable Secure Memory Encryption (SME) - kernel parameter mem_encrypt - by default?</source>
      </item>
      <item>
        <title>Enable Secure Memory Encryption (SME) - kernel parameter mem_encrypt - by default?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>AMD CPU part:</p>
<p><a href="https://www.kernel.org/doc/html/latest/admin-guide/kernel-parameters.html" class="onebox" target="_blank">https://www.kernel.org/doc/html/latest/admin-guide/kernel-parameters.html</a></p>
<blockquote>
<pre><code>    mem_encrypt=    [X86-64] AMD Secure Memory Encryption (SME) control
                    Valid arguments: on, off
                    Default (depends on kernel configuration option):
                      on  (CONFIG_AMD_MEM_ENCRYPT_ACTIVE_BY_DEFAULT=y)
                      off (CONFIG_AMD_MEM_ENCRYPT_ACTIVE_BY_DEFAULT=n)
                    mem_encrypt=on:         Activate SME
                    mem_encrypt=off:        Do not activate SME

                    Refer to Documentation/virt/kvm/amd-memory-encryption.rst
                    for details on when memory encryption can be activated.
</code></pre>
</blockquote>
<p><a href="https://www.kernel.org/doc/Documentation/virt/kvm/amd-memory-encryption.rst" class="onebox" target="_blank">https://www.kernel.org/doc/Documentation/virt/kvm/amd-memory-encryption.rst</a></p>
<p>Should we enable this by default in package <code>security-misc</code>?</p>
<hr>
<p>Intel CPU:</p>
<p>What would be the Intel equivalent? Intel MKTME? But that doesn’t seem ready at time of writing?</p>
<hr>
<p>Does this help to defeat cold boot attacks?</p>
<p>Related:<br>
<a href="https://forums.whonix.org/t/is-ram-wipe-possible-inside-whonix-cold-boot-attack-defense/5596" class="inline-onebox">Is RAM Wipe possible inside Whonix? Cold Boot Attack Defense</a></p>
          <p><a href="http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393/1</link>
        <pubDate>Fri, 09 Oct 2020 12:05:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10393-1</guid>
        <source url="http://forums.whonix.org/t/enable-secure-memory-encryption-sme-kernel-parameter-mem-encrypt-by-default/10393.rss">Enable Secure Memory Encryption (SME) - kernel parameter mem_encrypt - by default?</source>
      </item>
  </channel>
</rss>
