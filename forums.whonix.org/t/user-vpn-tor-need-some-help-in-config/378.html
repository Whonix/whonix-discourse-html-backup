<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>User =&gt; VPN =&gt; TOR Need some help in config - Support - Whonix Forum</title>
    <meta name="description" content="Hi, people. I am playing with Whonix for about a month and i need to say that it is a great OS. But i stuck with connecting VPN to it. I need to use VPN before TOR, so my ISP wouldnt know that i am using TOR + all ISP lo&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="378.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;User =&gt; VPN =&gt; TOR Need some help in config&#39;" href="378.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/user-vpn-tor-need-some-help-in-config/378" />
<meta name="twitter:url" content="https://forums.whonix.org/t/user-vpn-tor-need-some-help-in-config/378" />
<meta property="og:title" content="User =&gt; VPN =&gt; TOR Need some help in config" />
<meta name="twitter:title" content="User =&gt; VPN =&gt; TOR Need some help in config" />
<meta property="og:description" content="Hi, people. I am playing with Whonix for about a month and i need to say that it is a great OS. But i stuck with connecting VPN to it. I need to use VPN before TOR, so my ISP wouldnt know that i am using TOR + all ISP logs must contain info which is encrypted with my VPN.  So, i made my own VPN server on VPS. Using openvpn server configured for UDP (As i understand i need TCP only if i want user =&gt; TOR =&gt; VPN, but i dont need this).  I am using Xubuntu as the host system, which is installed in c..." />
<meta name="twitter:description" content="Hi, people. I am playing with Whonix for about a month and i need to say that it is a great OS. But i stuck with connecting VPN to it. I need to use VPN before TOR, so my ISP wouldnt know that i am using TOR + all ISP logs must contain info which is encrypted with my VPN.  So, i made my own VPN server on VPS. Using openvpn server configured for UDP (As i understand i need TCP only if i want user =&gt; TOR =&gt; VPN, but i dont need this).  I am using Xubuntu as the host system, which is installed in c..." />
<meta property="article:published_time" content="2014-07-28T15:22:24+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="378.html">User =&gt; VPN =&gt; TOR Need some help in config</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/support/5.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #8C6238'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Support</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Ambertos'><span itemprop='name'>Ambertos</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="378.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-07-28T15:22:24Z' class='post-time'>
                July 28, 2014,  3:22pm
              </time>
              <meta itemprop='dateModified' content='2014-07-28T15:22:24Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi, people. I am playing with Whonix for about a month and i need to say that it is a great OS. But i stuck with connecting VPN to it. I need to use VPN before TOR, so my ISP wouldnt know that i am using TOR + all ISP logs must contain info which is encrypted with my VPN.</p>
<p>So, i made my own VPN server on VPS. Using openvpn server configured for UDP (As i understand i need TCP only if i want user =&gt; TOR =&gt; VPN, but i dont need this).<br>
I am using Xubuntu as the host system, which is installed in crypted file container on my external HDD. I am starting my vpn client on Xubuntu. Than i start Whonix Gateway. After whonixcheck on Gateway i start Whonix Workstation.  As i understand in such config all my traffic should first be encrypted and go to my VPN server and only there it would go to TOR. But when i try to check this i am using traceroute command on Whonix Workstation and i see follow info -</p>
<p><code>user@host:~$ traceroute google.com
traceroute to google.com (192.122.185.53), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  * * *
 5  * * *
 6  * * *
 7  * * *
 8  * * *
 9  * * *
10  * * *
11  * * *
12  * * *
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * * *
23  * * *
24  * * *
25  * * *
26  * * *
27  * * *
28  * * *
29  * * *
30  * * *
</code></p>
<p>As i understand first i should see my VPN server, than i should see the TOR relay nodes. Am i correct. Maybe i should make traceroute somewhere else ( Gateway, Host OS?). Is there another way to check that traffic is routed correctly through my VPN and TOR?</p>
<p>Please give me some advice. Any help would be very appreciated.</p>
        </div>

        <meta itemprop='headline' content='User =&gt; VPN =&gt; TOR Need some help in config'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Ambertos'><span itemprop='name'>Ambertos</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="378.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-07-28T22:36:52Z' class='post-time'>
                July 28, 2014, 10:36pm
              </time>
              <meta itemprop='dateModified' content='2014-07-28T22:36:52Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Still need some help. I know that this is the simple question which is described in documentation. I have already read it, especially this -</p>
<blockquote>How
If you are forced to use a VPN server or if you are already using a VPN server, you most likely know how you can connect to it.
You can either add the VPN on the host. Whonix-Gateway will be tunneled through it.
Or you can add the VPN into Whonix-Gateway. In that case you must know how to connect to your VPN server from the linux command line. (TODO: Any new firewall rules required?)
When your VPN is properly set up, all your connections are forced through the VPN first. If you start Tor on top of that, tunneling Tor through the VPN will work.</blockquote>
But i can not figure out how to test and check that everything is running ok. When i used VPN without TOR on my host OS i just made a traceroute command. But as i described this doesnt work in my case. Please give me some little help, as i need this info urgently.
<p>Thanks a lot for everyone who would give at least any info.</p>
        </div>

        <meta itemprop='headline' content='User =&gt; VPN =&gt; TOR Need some help in config'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="378.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-07-29T00:45:16Z' class='post-time'>
                July 29, 2014, 12:45am
              </time>
              <meta itemprop='dateModified' content='2014-07-29T00:45:16Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>Hi, people. I am playing with Whonix for about a month and i need to say that it is a great OS. But i stuck with connecting VPN to it. I need to use VPN before TOR, so my ISP wouldnt know that i am using TOR + all ISP logs must contain info which is encrypted with my VPN.</blockquote>
See also:
- https://www.whonix.org/wiki/Hide_Tor_and_Whonix_from_your_ISP
- https://www.whonix.org/wiki/Features#VPN_.2F_Tunnel_support
<blockquote>As i understand in such config all my traffic should first be encrypted and go to my VPN server and only there it would go to TOR.</blockquote>
Yes.
<blockquote>But when i try to check this i am using traceroute command on Whonix Workstation and i see follow info -</blockquote>
Whonix-Workstation has no legitimate way to figure out it's routed over the VPN. Whonix-Gateway accepts the traffic and relays it to Tor.
<blockquote>Maybe i should make traceroute somewhere else ( Gateway, Host OS?). Is there another way to check that traffic is routed correctly through my VPN and TOR?</blockquote>
This is actually not that simple. Someone else asked a similar question, answered here:
https://www.whonix.org/forum/index.php/topic,363.msg2685.html#msg2685
<p>You may also be interested:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Tunnel_Tor_through_proxy_or_VPN_or_SSH#Use_a_Fail_Closed_Mechanism" target="_blank" title="10:04AM - 08 April 2020">Whonix – 8 Apr 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/452;"><img src="../../../external.html?link=https://www.whonix.org/w/images/8/86/Beyond-1087922640.jpg" class="thumbnail" width="640" height="452"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Tunnel_Tor_through_proxy_or_VPN_or_SSH#Use_a_Fail_Closed_Mechanism" target="_blank">Combining Tunnels with Tor</a></h3>

<p>Information on whether Tor gets more or less secure when combining Tor with tunnels such as VPN, SSH, proxies. (User → Tor → proxy/VPN/SSH → Internet) (User → proxy/VPN/SSH → Tor → Internet)</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
        </div>

        <meta itemprop='headline' content='User =&gt; VPN =&gt; TOR Need some help in config'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
