<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>sys-whonix starting spontaneously after update</title>
    <link>http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123</link>
    <description>After a recent dom0(?) / TemplateVM(?) update `sys-whonix` has been starting spontaneoulsy. If I shut it down it starts right back up. I use a different naming convention to prevent confusion between, for example my Tor versioning based VMs and my default whonix-gw based VMs. I don&#39;t often use my `sys-whonix` &quot;named&quot; VM. sys-whonix is not set to autostart, no VMs have `sys-whonix` as netvm and I don&#39;t have `sys-whonix` set as default `qubes-prefs` or `updatevm`.

Journalctl output from dom0 keeps showing sys-whonix (sdwdate) logs to VMs that are not even conected to `sys-whonix`

```
user@host:~/QubesIncoming/dom0$ cat sys-whonix-bug 
Sep 15 06:19:40 dom0 qrexec[10822]: whonix.SdwdateStatus: sys-whonix -&gt; `$somevm`: allowed to `$somevm`
Sep 15 06:19:40 dom0 qrexec[10824]: whonix.SdwdateStatus: sys-whonix -&gt; `$somevm1`: allowed to `$somevm1`
[...]

```</description>
    <language>en</language>
    <lastBuildDate>Tue, 17 Sep 2019 23:37:11 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>sys-whonix starting spontaneously after update</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="5" data-topic="8123">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Tested in simulation (setting <code>vm_name</code> variable) but not actually tested on real system.</p>
</blockquote>
</aside>
<p>Works for me. No issues since using the  script. Thank You!</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123/6</link>
        <pubDate>Tue, 17 Sep 2019 23:37:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8123-6</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123.rss">sys-whonix starting spontaneously after update</source>
      </item>
      <item>
        <title>sys-whonix starting spontaneously after update</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="3" data-topic="8123">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/0/ec9cab/40.png" class="avatar"> 0brand:</div>
<blockquote>
<p><code>anon-whonix-disp-1</code> is based on <code>whonix-dvm-1</code> which uses <code>sys-whonix-1</code> as netvm.</p>
<p><code>anon-whonix-disp-2</code> is based on <code>whonix-dvm-1</code> which uses <code>sys-whonix-2</code> as netvm.</p>
</blockquote>
</aside>
<p>Tested in simulation (setting <code>vm_name</code> variable)  but not actually tested on real system.</p>
<pre><code class="lang-auto">#!/bin/bash

## Copyright (C) 2019 - 2019 Patrick Schleizer &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

set -x
set -e

vm_name="$(qubesdb-read /name)"

## example vn_name:
## anon-whonix-disp-1

vm_number="$(echo "$vm_name" | str_replace "anon-whonix-disp-" "")"

## example vm_number:
## 1

target_gateway="sys-whonix-${vm_number}"

## example target_gateway:
## sys-whonix-1

gateway="$target_gateway"
</code></pre>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123/5</link>
        <pubDate>Tue, 17 Sep 2019 08:04:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8123-5</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123.rss">sys-whonix starting spontaneously after update</source>
      </item>
      <item>
        <title>sys-whonix starting spontaneously after update</title>
        <dc:creator><![CDATA[Patrick_mobile]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="3" data-topic="8123">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/0/ec9cab/40.png" class="avatar"> 0brand:</div>
<blockquote>
<p>Anything that can be done if using multiple named DispVMs (based on the same dvm) with each named DispVM using a differnt sys-whonix-VM?</p>
</blockquote>
</aside>
<p>Yes, that config file is a bash fragment. Therefore supports scripting. The contents of the gateway setting variable could be derived from output of <code>qubesdb-read /name</code>.</p>
<aside class="quote no-group" data-post="3" data-topic="8123">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/0/ec9cab/40.png" class="avatar"> 0brand:</div>
<blockquote>
<p>Edit: What if someone wants to change the netvm of their <code>anon-whonix</code> DispVM from <code>sys-whonix-1</code> to <code>sys-whonix-2</code> on the fly?</p>
</blockquote>
</aside>
<p>Will still send sdwdate-gui notifications to old gateway.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123/4</link>
        <pubDate>Tue, 17 Sep 2019 05:32:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8123-4</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123.rss">sys-whonix starting spontaneously after update</source>
      </item>
      <item>
        <title>sys-whonix starting spontaneously after update</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>Anything that can be done if using multiple named DispVMs (based on the same dvm) with each named DispVM using a differnt sys-whonix-VM? For Example</p>
<p><code>anon-whonix-disp-1</code> is based on <code>whonix-dvm-1</code> which uses <code>sys-whonix-1</code> as netvm.</p>
<p><code>anon-whonix-disp-2</code> is based on <code>whonix-dvm-1</code> which uses <code>sys-whonix-2</code> as netvm.</p>
<p>pretty sure I know the answer. <img src="//forums.whonix.org/images/emoji/twitter/frowning_face.png?v=9" title=":frowning_face:" class="emoji" alt=":frowning_face:"></p>
<p>Edit: What if someone wants to change the netvm of their <code>anon-whonix</code> DispVM from <code>sys-whonix-1</code> to <code>sys-whonix-2</code> on the fly?</p>
<p>If /usr/local/etc/sdwdate-gui.d/50_user.conf contains <code>gateway=sys-whonix-1</code> wouldn’t it cause issues if <code>netvm</code> is changed to <code>sys-whonix-2</code>?</p>
<p>Note: in the context of NOT disabing sdwdate autostart</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123/3</link>
        <pubDate>Mon, 16 Sep 2019 23:08:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8123-3</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123.rss">sys-whonix starting spontaneously after update</source>
      </item>
      <item>
        <title>sys-whonix starting spontaneously after update</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Quote <a href="https://www.whonix.org/wiki/Sdwdate-gui" rel="nofollow noopener">https://www.whonix.org/wiki/Sdwdate-gui</a></p>
<blockquote>
<p>Qubes-Whonix - Unexpected Autostart of sys-whonix</p>
</blockquote>
<blockquote>
<p>Follow instructions <a href="https://www.whonix.org/wiki/Multiple_Whonix-Workstation#Qubes-Whonix_.E2.84.A2" rel="nofollow noopener">multiple Qubes-Whonix ™ Whonix-Workstation ™</a>. <a href="https://www.whonix.org/wiki/Sdwdate-gui#cite_note-1" rel="nofollow noopener">[1]</a></p>
</blockquote>
<hr>
<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/QubesOS/qubes-issues/issues/5253" target="_blank" rel="nofollow noopener">github.com/QubesOS/qubes-issues</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/adrelanos" rel="nofollow noopener">
<img src="https://avatars1.githubusercontent.com/u/1985040?v=2&amp;s=96" class="thumbnail onebox-avatar" width="60" height="60">
</a>

<h4><a href="https://github.com/QubesOS/qubes-issues/issues/5253" target="_blank" rel="nofollow noopener">Issue: qrexec feature request: send this over qrexec to the NetVM I am connected to / sys-whonix hardcoded / sys-whonix unexpected autostart</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/QubesOS/qubes-issues/issues/5253" target="_blank" rel="nofollow noopener">2019-08-18</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">https://groups.google.com/forum/#!topic/qubes-devel/DEQNltD2_kc
Start sdwdate-gui [5] [6], which is a systray by default in Whonix-Gateway.

Due to sdwdate-gui, Qubes-Whonix who use multiple Whonix-Gateway [7] should...</pre>

<div class="labels">
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">C: core</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">P: default</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">T: enhancement</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<hr>
<blockquote>
<p>[1]  Qubes bug report: <a href="https://github.com/QubesOS/qubes-issues/issues/5253" rel="nofollow noopener">https://github.com/QubesOS/qubes-issues/issues/5253</a></p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123/2</link>
        <pubDate>Sun, 15 Sep 2019 10:38:51 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8123-2</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123.rss">sys-whonix starting spontaneously after update</source>
      </item>
      <item>
        <title>sys-whonix starting spontaneously after update</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>After a recent dom0(?) / TemplateVM(?) update <code>sys-whonix</code> has been starting spontaneoulsy. If I shut it down it starts right back up. I use a different naming convention to prevent confusion between, for example my Tor versioning based VMs and my default whonix-gw based VMs. I don’t often use my <code>sys-whonix</code> “named” VM. sys-whonix is not set to autostart, no VMs have <code>sys-whonix</code> as netvm and I don’t have <code>sys-whonix</code> set as default <code>qubes-prefs</code> or <code>updatevm</code>.</p>
<p>Journalctl output from dom0 keeps showing sys-whonix (sdwdate) logs to VMs that are not even conected to <code>sys-whonix</code></p>
<pre><code class="lang-auto">user@host:~/QubesIncoming/dom0$ cat sys-whonix-bug 
Sep 15 06:19:40 dom0 qrexec[10822]: whonix.SdwdateStatus: sys-whonix -&gt; `$somevm`: allowed to `$somevm`
Sep 15 06:19:40 dom0 qrexec[10824]: whonix.SdwdateStatus: sys-whonix -&gt; `$somevm1`: allowed to `$somevm1`
[...]

</code></pre>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123/1</link>
        <pubDate>Sun, 15 Sep 2019 10:18:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8123-1</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starting-spontaneously-after-update/8123.rss">sys-whonix starting spontaneously after update</source>
      </item>
  </channel>
</rss>
