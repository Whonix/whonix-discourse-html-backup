<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>whonix-gateway not reachable</title>
    <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484</link>
    <description>Hello everyone,

I&#39;m using whonix on Qubes 4.0. Since i installed updates (dom0 and whonix templates) a few days ago the control/socks port of sys-whonix-14 (my whonix-gateway, based on whonix-gw-14 template) is not reachable from my whonix workstation anon-whonix

**Running whonixcheck -v in anon-whonix (template whonix-ws-14):**

&gt; [INFO] [whonixcheck] anon-whonix | Whonix-Workstation | whonix-ws-14 TemplateBased AppVM | Mon Jun  3 14:08:20 UTC 2019
&gt; [INFO] [whonixcheck] Input Detection: INPUT_AUTO=true CLI=true GUI=false
&gt; stdin connected to terminal. Using cli output. Not using gui output.
&gt; Alternatively, if want to run from command line, but still use the graphical user interface for input, you could add to command line: --gui
&gt; [INFO] [whonixcheck] Root Check Result: Ok, not running as root.
&gt; [INFO] [whonixcheck] Pin torproject,.org certificate: disabled.
&gt; [INFO] [whonixcheck] whonix_build_version: 3:2.5-1
&gt; [INFO] [whonixcheck] whonix-workstation-packages-dependencies-cli: 9.8-1
&gt; [INFO] [whonixcheck] /etc/whonix_version: 14
&gt; [INFO] [whonixcheck] Spectre Meltdown Test: skipping since spectre_meltdown_check=false, ok.
&gt; If you wish to enable this test, run:
&gt; 
&gt; sudo spectre_meltdown_check=true whonixcheck
&gt; [INFO] [whonixcheck] Whonix firewall systemd unit check Result: Ok.
&gt; [INFO] [whonixcheck] Qubes qubes-db Test Result: Connection to local qubes-db daemon succeeded, ok.
&gt; [INFO] [whonixcheck] Qubes Settings Test Result: Ok. (GATEWAY_IP: 10.137.0.46)
&gt; [INFO] [whonixcheck] Qubes Settings Test Result: Ok, qubes_vm_type is AppVM.
&gt; [INFO] [whonixcheck] Check Kernel Messages Test Result: Found nothing remarkable, ok.
&gt; [INFO] [whonixcheck] check network interfaces Result: Ok.
&gt; [INFO] [whonixcheck] Check Package Manager Running Result: None running, ok.
&gt; [INFO] [whonixcheck] Tor Check Result: Not running on Whonix-Gateway, ok.
&gt; [INFO] [whonixcheck] Tor Config Check Result: Tor config ok.
&gt; [INFO] [whonixcheck] Tor Pid Check Result: Not running on Whonix-Gateway., ok.
&gt; [WARNING] [whonixcheck] Tor SocksPort Reachability Test Result: Unreachable! (curl exit code: 28 | curl status message: [28] - [Operation timeout. The specified time-out period was reached according to the conditions.])
&gt; [ERROR] [whonixcheck] Tor Connection Result:
&gt; Tor&#39;s Control Port could not be reached!
&gt; 
&gt; Troubleshooting:
&gt; - Confirm that Whonix-Gateway is running.
&gt; - Run whonixcheck on Whonix-Gateway and confirm success.
&gt; 
&gt; - Rerun whonixcheck here in this Whonix-Workstation.
&gt; 
&gt; (Technical information:)
&gt; (tor_circuit_established_check_exit_code: 277)
&gt; (tor_bootstrap_timeout_type: )
&gt; (tor_bootstrap_status: )
&gt; (check_socks_port_open_test: 28)
&gt; (Tor Circuit: not established)


**Output of whonixcheck in sys-whonix-14 looks normal:**

&gt; [INFO] [whonixcheck] sys-whonix-14 | Whonix-Gateway | whonix-gw-14 TemplateBased ProxyVM | Mon Jun  3 14:43:03 UTC 2019
&gt; [INFO] [whonixcheck] Connected to Tor.
&gt; [INFO] [whonixcheck] Whonix APT Repository: Enabled.
&gt; When the Whonix team releases STRETCH updates,
&gt; they will be AUTOMATICALLY installed (when you run apt-get dist-upgrade)
&gt; along with updated packages from the Debian team. Please
&gt; read https;://www.whonix.org/wiki/Trust to understand the risk.
&gt; If you want to change this, use:
&gt;     sudo whonix_repository
&gt; [INFO] [whonixcheck] Debian Package Update Check: Checking for software updates via apt-get... ( Documentation: https;://www.whonix,.org/wiki/Update )
&gt; [INFO] [whonixcheck] Debian Package Update Check Result: No updates found via apt-get.


I also tried to set sys-whonix-14 as netvm of a appvm based on fedora-29 template. No connection, unable to ping out.


**What I tried so far:**

- Update template using:

&gt; sudo qubes-dom0-update --enablerepo=qubes-templates-community --action=upgrade qubes-template-whonix-gw-14

- Reinstall template using:

&gt; sudo qubes-dom0-update --enablerepo=qubes-templates-community --action=reinstall qubes-template-whonix-gw-14

- Run:

&gt; sudo qubesctl state.sls qvm.anon-whonix

in dom0, (shortened)result:
Succeeded: 13
Failed: 0

Any ideas what could be the problem? I have no idea how to debug networking at Xen-level for possible network misconfigurations.</description>
    <language>en</language>
    <lastBuildDate>Thu, 20 Jun 2019 05:53:47 +0000</lastBuildDate>
    <category>Qubes-Whonix</category>
    <atom:link href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="21" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/df705f/40.png" class="avatar"> marmarek:</div>
<blockquote>
<p>Configuring <code>vif*</code> interfaces is responsibility of <code>/etc/xen/scripts/vif-route-qubes</code> script called by <code>xendriverdomain</code> service, not udev. It fails, with logs in <code>/var/log/xen/xen-hotplug.log</code> . I see a single error there:</p>
<pre><code class="lang-auto">RTNETLINK answers: Permission denied
</code></pre>
<p>After adding <code>set -x</code> at the beginning of the script, I see it’s on a try to set IPv6 address. Probably because IPv6 is disabled in Whonix.<br>
Indeed I have enabled IPv6 in my system globally (<a href="https://www.qubes-os.org/doc/networking/#ipv6" rel="nofollow noopener">https://www.qubes-os.org/doc/networking/#ipv6</a>). The same page explains how to disable it for particular VM (and others connected to it).</p>
</blockquote>
</aside>
<p>Is it possible (preferably) to fix this in <code>/etc/xen/scripts/vif-route-qube</code>? Created</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/QubesOS/qubes-issues/issues/5110" target="_blank" rel="nofollow noopener">github.com/QubesOS/qubes-issues</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/adrelanos" rel="nofollow noopener">
<img src="https://avatars1.githubusercontent.com/u/1985040?v=2&amp;s=96" class="thumbnail onebox-avatar" width="60" height="60">
</a>

<h4><a href="https://github.com/QubesOS/qubes-issues/issues/5110" target="_blank" rel="nofollow noopener">Issue: networking broken, /etc/xen/scripts/vif-route-qubes fails when IPv6 is disabled</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/QubesOS/qubes-issues/issues/5110" target="_blank" rel="nofollow noopener">2019-06-20</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">This issue affects Qubes-Whonix and was triaged by @marmarek, see:
http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/21
@marmarek
Configuring vif* interfaces is responsibility of /etc/xen/scripts/vif-route-qubes script called by xendriverdomain service,...</pre>

<div class="labels">
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">P: default</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">T: bug</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>for it.</p>
<aside class="quote no-group" data-post="21" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/df705f/40.png" class="avatar"> marmarek:</div>
<blockquote>
<p>So, I’ve executed <code>qvm-features sys-whonix ipv6 ''</code> , restarted sys-whonix and now it works.</p>
</blockquote>
</aside>
<p>That would also be an alternative solution for that could be added to Whonix salt but which than later could backfire if/when we implement IPv6 Whonix side. (although not on the horizon mid term <a href="https://phabricator.whonix.org/T509" rel="nofollow noopener">https://phabricator.whonix.org/T509</a>)</p>
<p>(related: <a href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/tree/master/qvm" rel="nofollow noopener">https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/tree/master/qvm</a>)</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/23</link>
        <pubDate>Thu, 20 Jun 2019 05:53:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-23</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[awokd]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>So, I’ve executed <code>qvm-features sys-whonix ipv6 ''</code>, restarted sys-whonix and now it works.</p>
</blockquote>
<p>That explains it. I had disabled ipv6 for <em>Whonix</em> with the above<br>
command several months ago.</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/22</link>
        <pubDate>Wed, 19 Jun 2019 18:15:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-22</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[marmarek]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="20" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/f/bbe5ce/40.png" class="avatar"> flergusen:</div>
<blockquote>
<p>but what I found out was that no IP address is set on vif interfaces when attached</p>
</blockquote>
</aside>
<p>That’s it! Somehow I’ve missed your comment, but also now it happened to me and I’ve found out the same.<br>
Configuring <code>vif*</code> interfaces is responsibility of <code>/etc/xen/scripts/vif-route-qubes</code> script called by <code>xendriverdomain</code> service, not udev. It fails, with logs in <code>/var/log/xen/xen-hotplug.log</code>. I see a single error there:</p>
<pre><code class="lang-auto">RTNETLINK answers: Permission denied
</code></pre>
<p>After adding <code>set -x</code> at the beginning of the script, I see it’s on a try to set IPv6 address. Probably because IPv6 is disabled in Whonix.<br>
Indeed I have enabled IPv6 in my system globally (<a href="https://www.qubes-os.org/doc/networking/#ipv6" rel="nofollow noopener">https://www.qubes-os.org/doc/networking/#ipv6</a>). The same page explains how to disable it for particular VM (and others connected to it). So, I’ve executed <code>qvm-features sys-whonix ipv6 ''</code>, restarted sys-whonix and now it works.</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/21</link>
        <pubDate>Wed, 19 Jun 2019 16:37:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-21</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[flergusen]]></dc:creator>
        <description><![CDATA[
            <p>I bumped into this a couple of weeks ago, I too think it was after a Qubes kernel update. I didn’t investigate until today, but what I found out was that no IP address is set on vif interfaces when attached, it seems like /usr/lib/qubes/setup-ip is not triggered (I put ‘thouch /tmp/thing’ right under the hash bang and no such file was created a new VM and vif was attached).</p>
<p>With ‘dmesg -w’ I saw UDEV/KERNEL lines with add+online and offline+remove, but none with bind or unbind.</p>
<p>With ‘udevadm info  --attribute-walk /sys/class/net/vifXX.0’ I saw ATTRS(state)==“InitWait” where it should be “Connected”</p>
<p>Manually setting the same IP on the attached vifXX.0 as on the other interfaces, ‘ip address add dev vifXX.0 10.137.0.17/32’, enables the Whonix gateway to route traffic from connected VM through Tor.</p>
<p>I have not yet tried with a regular Debian (Stretch) template as netvm to see if the problem is the same. There are no issues with a netvm with Fedora 29 or 30 as template.</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/20</link>
        <pubDate>Fri, 14 Jun 2019 13:33:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-20</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="17" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/df705f/40.png" class="avatar"> marmarek:</div>
<blockquote>
<p>Oh, this is from where <code>10.0.0.0/8</code> come. <code>/8</code> is a netmask, and everything not covered by it is ignored. <code>10.137.0.0/8</code> basically says “compare just first 8 bits of the address”. If you want to cover <code>10.137.*.*</code> , but not other <code>10.x.*.*</code> , then it should be <code>10.137.0.0/16</code> .</p>
</blockquote>
</aside>
<p>Awesome! Fixed.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/whonix-firewall/commit/5fc78ed8d82657fdb3209e51bec638bafb396813" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-firewall</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/whonix-firewall/commit/5fc78ed8d82657fdb3209e51bec638bafb396813" target="_blank" rel="nofollow noopener">fix IP range</a>
</h4>

  <pre class="message" style="white-space: normal;">thanks to @marmarek for the suggestion!</pre>

<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="https://github.com/Whonix/whonix-firewall/commit/5fc78ed8d82657fdb3209e51bec638bafb396813" target="_blank" rel="nofollow noopener">03:24AM - 08 Jun 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>1 additions</strong>
  and <strong>1 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-post="18" data-topic="7484" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/df705f/40.png" class="avatar"> marmarek:</div>
<blockquote>
<p>I’m not sure if <a href="https://github.com/Whonix/whonix-firewall/commit/fbf4ad487241bcd3cd0acd11b3faec864cdbbb85" rel="nofollow noopener">https://github.com/Whonix/whonix-firewall/commit/fbf4ad487241bcd3cd0acd11b3faec864cdbbb85</a> is correct. On my qubes system, <code>/lib/systemd/system/anon-ws-disable-stacked-tor_autogen__var_run_tor_socks.service</code> redirects <code>/var/run/tor/socks</code> to <code>10.152.152.10:9050</code></p>
</blockquote>
</aside>
<p>Indeed. That would have lead to breakage.</p>
<p>It’s hard to use the actual Qubes-Gateway IP there:</p>
<ul>
<li>it’s defined in a source file</li>
<li>unknown at build time</li>
<li>dynamic per Qubes installation</li>
</ul>
<p>re-added:</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/whonix-firewall/commit/f209a3a1bc22e49d346e6928b900957874f74f91" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-firewall</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/whonix-firewall/commit/f209a3a1bc22e49d346e6928b900957874f74f91" target="_blank" rel="nofollow noopener">fix IP range</a>
</h4>

  <pre class="message" style="white-space: normal;">thanks to @marmarek for the suggestion!
https://forums.whonix.org/t/whonix-gateway-not-reachable/7484/18</pre>

<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="https://github.com/Whonix/whonix-firewall/commit/f209a3a1bc22e49d346e6928b900957874f74f91" target="_blank" rel="nofollow noopener">03:30AM - 08 Jun 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>2 additions</strong>
  and <strong>1 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/19</link>
        <pubDate>Sat, 08 Jun 2019 03:31:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-19</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[marmarek]]></dc:creator>
        <description><![CDATA[
            <p>I’m not sure if <a href="https://github.com/Whonix/whonix-firewall/commit/fbf4ad487241bcd3cd0acd11b3faec864cdbbb85" rel="nofollow noopener">https://github.com/Whonix/whonix-firewall/commit/fbf4ad487241bcd3cd0acd11b3faec864cdbbb85</a> is correct. On my qubes system, <code>/lib/systemd/system/anon-ws-disable-stacked-tor_autogen__var_run_tor_socks.service</code>  redirects <code>/var/run/tor/socks</code> to <code>10.152.152.10:9050</code></p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/18</link>
        <pubDate>Sat, 08 Jun 2019 03:24:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-18</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[marmarek]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="16" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>10.137.0.0/8</p>
</blockquote>
</aside>
<p>Oh, this is from where <code>10.0.0.0/8</code> come. <code>/8</code> is a netmask, and everything not covered by it is ignored. <code>10.137.0.0/8</code> basically says “compare just first 8 bits of the address”. If you want to cover <code>10.137.*.*</code>, but not other <code>10.x.*.*</code>, then it should be <code>10.137.0.0/16</code>.</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/17</link>
        <pubDate>Sat, 08 Jun 2019 03:18:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-17</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="15" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/df705f/40.png" class="avatar"> marmarek:</div>
<blockquote>
<p>BTW looking at iptables -t nat in sys-whonix, I see redirection rules for 10.0.0.0/8 duplicated for each port (only for that IP range, 192.168.0.10 and 10.152.152.10 are listed only once).</p>
</blockquote>
</aside>
<aside class="quote no-group" data-post="15" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/df705f/40.png" class="avatar"> marmarek:</div>
<blockquote>
<p>And also 10.152.152.10 is already handled by 10.0.0.0/8 so one or another is not needed.</p>
</blockquote>
</aside>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/whonix-firewall/commit/fbf4ad487241bcd3cd0acd11b3faec864cdbbb85" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-firewall</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/whonix-firewall/commit/fbf4ad487241bcd3cd0acd11b3faec864cdbbb85" target="_blank" rel="nofollow noopener">fix Qubes vs Non-Qubes prerouting IP range</a>
</h4>


<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="https://github.com/Whonix/whonix-firewall/commit/fbf4ad487241bcd3cd0acd11b3faec864cdbbb85" target="_blank" rel="nofollow noopener">02:39AM - 08 Jun 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>7 additions</strong>
  and <strong>3 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<pre><code>WORKSTATION_DEST_SOCKSIFIED="\
10.137.0.0/8,\
10.138.0.0/8"
</code></pre>
<p>Is working.</p>
<p>But even with only</p>
<pre><code>WORKSTATION_DEST_SOCKSIFIED="10.137.0.0/8"
</code></pre>
<p>DispVMs are also working? How come?</p>
<p>And also somehow…</p>
<pre><code>iptables --wait -t nat -A PREROUTING -i vif+ -d 10.137.0.0/8 -p tcp --dport 9168 -j REDIRECT --to-ports 9168
</code></pre>
<p>Results in:</p>
<pre><code>-A PREROUTING -d 10.0.0.0/8 -i vif+ -p tcp -m tcp --dport 9168 -j REDIRECT --to-ports 9168
</code></pre>
<p>How come?</p>
<aside class="quote no-group" data-post="15" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/df705f/40.png" class="avatar"> marmarek:</div>
<blockquote>
<p>It would allow to compact all those rules to very few - one for each port ranges. Like this:</p>
</blockquote>
</aside>
<p>Nice. Done.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/whonix-firewall/commit/e96771637f88aba9f037466d9bb2f112f1a0e3c8" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-firewall</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/whonix-firewall/commit/e96771637f88aba9f037466d9bb2f112f1a0e3c8" target="_blank" rel="nofollow noopener">compact PREROUTING rules</a>
</h4>


<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="https://github.com/Whonix/whonix-firewall/commit/e96771637f88aba9f037466d9bb2f112f1a0e3c8" target="_blank" rel="nofollow noopener">03:07AM - 08 Jun 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>2 additions</strong>
  and <strong>4 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/16</link>
        <pubDate>Sat, 08 Jun 2019 03:08:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-16</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[marmarek]]></dc:creator>
        <description><![CDATA[
            <p>No idea. I’ve just tried: fully updated sys-whonix with 4.19.47 kernel and anon-whonix with 4.19.47 and it works for me (whonixcheck -v in anon-whonix says so). qubes-template-whonix-gw-14 package version is 4.0.1-201807171801.<br>
Is your anon-whonix connected directly to sys-whonix? Do you see any failed services in sys-whonix (unlikely, as whonixcheck would detect that)? Check also if you see vifXX.0 interface in sys-whonix (some number instead of XX).</p>
<p>BTW looking at iptables -t nat in sys-whonix, I see redirection rules for 10.0.0.0/8 duplicated for each port (only for that IP range, 192.168.0.10 and 10.152.152.10 are listed only once). And also 10.152.152.10 is already handled by 10.0.0.0/8 so one or another is not needed.<br>
Additionally, according to <code>iptables-extensions</code> manual, <code>--to-ports</code> is not necessary if you don’t change the port. It would allow to compact all those rules to very few - one for each port ranges. Like this:</p>
<pre><code class="lang-auto">iptables -t nat -A PREROUTING -i vif+ -d 10.152.152.10 -p tcp --dport 9152:9189 -j REDIRECT
</code></pre>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/15</link>
        <pubDate>Sat, 08 Jun 2019 00:13:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-15</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[awokd]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>I think <a class="mention" href="http://forums.whonix.org/u/awokd">@awokd</a> just meant that something might have gotten broken between your original 4.0 installation and the present. If so, he is suggesting that you might wish to reinstall. If you were to reinstall, it would make sense to use the most recent ISO, which is 4.0.1.</p>
</blockquote>
<p>Yes, sorry, meant that or maybe he is running one of the earlier RC<br>
versions. Not sure what else could be different at the networking level.<br>
Here is the other who was having the same problem with the newer kernel<br>
and sys-whonix:<br>
<a href="https://www.mail-archive.com/qubes-users@googlegroups.com/msg28628.html" rel="nofollow noopener">https://www.mail-archive.com/qubes-users@googlegroups.com/msg28628.html</a>.</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/14</link>
        <pubDate>Fri, 07 Jun 2019 03:43:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-14</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[adw]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="11" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/w/96bed5/40.png" class="avatar"> whus141:</div>
<blockquote>
<p>I think that you are right about it being related to problems with updating from 4.0 to 4.0.1.</p>
</blockquote>
</aside>
<p><a href="https://www.qubes-os.org/doc/supported-versions/#note-on-point-releases" rel="nofollow noopener">4.0.1 is just 4.0 with all routine updates.</a> There is no separate action of upgrading from 4.0 to 4.0.1. You can install either one, then fully update, and it results in the same system.</p>
<p>I think <a class="mention" href="http://forums.whonix.org/u/awokd">@awokd</a> just meant that something might have gotten broken between your original 4.0 installation and the present. If so, he is suggesting that you might wish to reinstall. If you were to reinstall, it would make sense to use the most recent ISO, which is 4.0.1.</p>
<aside class="quote no-group" data-post="12" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Do you know anything related to such issues due to kernel upgrade?</p>
</blockquote>
</aside>
<p>Perhaps this:</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/QubesOS/qubes-issues/issues/4934" target="_blank" rel="nofollow noopener">github.com/QubesOS/qubes-issues</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/AndreasKieling" rel="nofollow noopener">
<img src="https://avatars1.githubusercontent.com/u/49129531?v=2&amp;s=96" class="thumbnail onebox-avatar" width="60" height="60">
</a>

<h4><a href="https://github.com/QubesOS/qubes-issues/issues/4934" target="_blank" rel="nofollow noopener">Issue: Xorg crash on Qubes 4.0 with kernel 4.19</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/AndreasKieling" target="_blank" rel="nofollow noopener">AndreasKieling</a>
	on <a href="https://github.com/QubesOS/qubes-issues/issues/4934" target="_blank" rel="nofollow noopener">2019-03-31</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Qubes OS version:
R4.0
Affected component(s) or functionality:
Xorg
Lightdm
Graphical Login
Radeon Driver

Steps to reproduce the behavior:
Have Radeon Evergreen GPU, Start R4.0 with 4.19 kernel from...</pre>

<div class="labels">
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">C: kernel</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">P: critical</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">T: bug</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">r4.0-dom0-cur-test</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">r4.1-dom0-cur-test</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/13</link>
        <pubDate>Fri, 07 Jun 2019 03:27:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-13</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Do you know anything related to such issues due to kernel upgrade? <a class="mention" href="http://forums.whonix.org/u/marmarek">@marmarek</a></p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/12</link>
        <pubDate>Thu, 06 Jun 2019 09:44:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-12</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[whus141]]></dc:creator>
        <description><![CDATA[
            <p>fedora-based appvm is not able to access the internet though sys-whonix-14 with 4.19 kernel. <img src="//forums.whonix.org/images/emoji/twitter/frowning.png?v=9" title=":frowning:" class="emoji" alt=":frowning:"></p>
<p>I think that you are right about it being related to problems with updating from 4.0 to 4.0.1.<br>
<strong>sudo dnf info qubes-release</strong> says:</p>
<blockquote>
<p>Installed Packages<br>
Name        : qubes-release<br>
Arch        : noarch<br>
Epoch       : 0<br>
Version     : 4.0<br>
Release     : 8<br>
Size        : 157 k<br>
Repo        : <a class="mention" href="http://forums.whonix.org/u/system">@System</a><br>
From repo   : qubes-dom0-cached<br>
Summary     : Qubes release files<br>
License     : GPLv2<br>
Description : Qubes release files such as yum configs and various /etc/ files<br>
: that define the release.</p>
</blockquote>
<p>But when running qubes-dom0-update it says “No new updates available”.</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/11</link>
        <pubDate>Thu, 06 Jun 2019 08:53:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-11</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[awokd]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>The situation is unchanged: When sys-whonix-14 is booted with 4.14.116-1 kernel eveything works fine, when unsing 4.19.47-1 running whonixcheck in anon-whonix fails with the old error.</p>
</blockquote>
<p>How about Firefox in a Fedora based AppVM connected to sys-whonix on<br>
4.19, does that work now? If not, I am running out of suggestions. Maybe<br>
reinstall Qubes 4.0.1 if you’ve been upgrading from 4.0, unless someone<br>
has a better idea.</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/10</link>
        <pubDate>Wed, 05 Jun 2019 17:46:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-10</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[whus141]]></dc:creator>
        <description><![CDATA[
            <p>I manually remoced qubes-template-whonix-gw-14 using dnf and reinstalled it. Now my version is:</p>
<blockquote>
<p>sudo dnf info qubes-template-whonix-gw-14<br>
Last metadata expiration check: 2:40:05 ago on Wed Jun  5 14:16:09 2019.<br>
Installed Packages<br>
Name        : qubes-template-whonix-gw-14<br>
Arch        : noarch<br>
Epoch       : 0<br>
Version     : 4.0.1<br>
Release     : 201901231238<br>
Size        : 1.9 G<br>
Repo        : <a class="mention" href="http://forums.whonix.org/u/system">@System</a><br>
From repo   : qubes-dom0-cached<br>
Summary     : Qubes template for whonix-gw-14<br>
URL         : <a href="http://www.qubes-os.org" rel="nofollow noopener">http://www.qubes-os.org</a><br>
License     : GPL<br>
Description : Qubes template for whonix-gw-14</p>
</blockquote>
<p>I installed all updates in whonix-gw-14 (didn’t modified repo-settings, so should be stable).</p>
<p>The situation is unchanged: When sys-whonix-14 is booted with 4.14.116-1 kernel eveything works fine, when unsing 4.19.47-1 running whonixcheck in anon-whonix fails with the old error.</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/9</link>
        <pubDate>Wed, 05 Jun 2019 15:03:04 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-9</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[awokd]]></dc:creator>
        <description><![CDATA[
            <p>That is an older version of the template. Did you perform that reinstall<br>
recently? It should work, but might try it manually if it’s not<br>
updating. You can clone whonix-gw to a temporary template and point<br>
sys-whonix to it to manually reinstall without having to do it in the clear.</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/8</link>
        <pubDate>Wed, 05 Jun 2019 11:14:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-8</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[whus141]]></dc:creator>
        <description><![CDATA[
            <p>Running <strong>sudo dnf info qubes-template-whonix-gw-14</strong>:</p>
<blockquote>
<p>Last metadata expiration check: 22:27:32 ago on Tue Jun  4 13:50:32 2019.<br>
Installed Packages<br>
Name        : qubes-template-whonix-gw-14<br>
Arch        : noarch<br>
Epoch       : 0<br>
Version     : 4.0.1<br>
Release     : 201807171801<br>
Size        : 2.0 G<br>
Repo        : <a class="mention" href="http://forums.whonix.org/u/system">@System</a><br>
From repo   : qubes-dom0-cached<br>
Summary     : Qubes template for whonix-gw-14<br>
URL         : <a href="http://www.qubes-os.org" rel="nofollow noopener">http://www.qubes-os.org</a><br>
License     : GPL<br>
Description : Qubes template for whonix-gw-14</p>
</blockquote>
<p>As far as I can say/remember I made no changes to the template, no additional packages and no change of repository configuration. Even if I did these changes should have been deleted through running:</p>
<blockquote>
<p>sudo qubes-dom0-update --enablerepo=qubes-templates-community --action=reinstall qubes-template-whonix-gw-14</p>
</blockquote>
<p>Or am I wrong about how this works?</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/7</link>
        <pubDate>Wed, 05 Jun 2019 10:27:45 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-7</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[awokd]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p><strong>Setting the kernel version of sys-whonix-14 to 4.14.116-1 fixed the problem.</strong></p>
</blockquote>
<p>Good, that will make troubleshooting easier. I wonder why my sys-whonix<br>
works at 4.19.47-1, but not yours. What version of the whonix-gw-14<br>
template do you have installed? Mine is 4.0.1-201901231238. Did you<br>
install any patches from testing?</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/6</link>
        <pubDate>Tue, 04 Jun 2019 18:08:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-6</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[whus141]]></dc:creator>
        <description><![CDATA[
            <p>The oldest kernel version I have is 4.14.116-1. I played around with it.<br>
<strong>Setting the kernel version of sys-whonix-14 to 4.14.116-1 fixed the problem.</strong> This works with 4.14.116-1 and 4.19.47-1 kernels running in dom0 and anon-whonix.<br>
So the problem seems to be in the kernel of sys-whonix-14.<br>
I’m very happy to have a working whonix setup again. Thanks.<br>
Otherwise it would be nice to be able to use a recent kernel.</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/5</link>
        <pubDate>Tue, 04 Jun 2019 11:58:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-5</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[awokd]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>Now I updated to 4.19.47-1. But unfortunately the problem remains, nothing changed.</p>
</blockquote>
<p>Try also 4.14.119-2 by editing your xen.cfg default= line if using UEFI<br>
boot, or selecting it from the Grub boot menu. The two might be<br>
unrelated of course, but I’m running 4.19.47-1 with the latest stable<br>
patches in whonix-gw and whonix-ws with no problems. Are you on any<br>
testing repositories?</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/4</link>
        <pubDate>Mon, 03 Jun 2019 22:20:37 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-4</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[whus141]]></dc:creator>
        <description><![CDATA[
            <p>Thanks for your help.<br>
Now I updated to 4.19.47-1. But unfortunately the problem remains, nothing changed.</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/3</link>
        <pubDate>Mon, 03 Jun 2019 19:43:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-3</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[awokd]]></dc:creator>
        <description><![CDATA[
            <p>Someone on qubes-users had a similar problem when they updated Qubes to<br>
kernel 4.19.45-1. Try changing your .cfg to default boot the previous<br>
kernel, or upgrade to the one in current-testing (4.19.47-1).</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/2</link>
        <pubDate>Mon, 03 Jun 2019 18:02:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-2</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
      <item>
        <title>whonix-gateway not reachable</title>
        <dc:creator><![CDATA[whus141]]></dc:creator>
        <description><![CDATA[
            <p>Hello everyone,</p>
<p>I’m using whonix on Qubes 4.0. Since i installed updates (dom0 and whonix templates) a few days ago the control/socks port of sys-whonix-14 (my whonix-gateway, based on whonix-gw-14 template) is not reachable from my whonix workstation anon-whonix</p>
<p><strong>Running whonixcheck -v in anon-whonix (template whonix-ws-14):</strong></p>
<blockquote>
<p>[INFO] [whonixcheck] anon-whonix | Whonix-Workstation | whonix-ws-14 TemplateBased AppVM | Mon Jun  3 14:08:20 UTC 2019<br>
[INFO] [whonixcheck] Input Detection: INPUT_AUTO=true CLI=true GUI=false<br>
stdin connected to terminal. Using cli output. Not using gui output.<br>
Alternatively, if want to run from command line, but still use the graphical user interface for input, you could add to command line: --gui<br>
[INFO] [whonixcheck] Root Check Result: Ok, not running as root.<br>
[INFO] [whonixcheck] Pin torproject,.org certificate: disabled.<br>
[INFO] [whonixcheck] whonix_build_version: 3:2.5-1<br>
[INFO] [whonixcheck] whonix-workstation-packages-dependencies-cli: 9.8-1<br>
[INFO] [whonixcheck] /etc/whonix_version: 14<br>
[INFO] [whonixcheck] Spectre Meltdown Test: skipping since spectre_meltdown_check=false, ok.<br>
If you wish to enable this test, run:</p>
<p>sudo spectre_meltdown_check=true whonixcheck<br>
[INFO] [whonixcheck] Whonix firewall systemd unit check Result: Ok.<br>
[INFO] [whonixcheck] Qubes qubes-db Test Result: Connection to local qubes-db daemon succeeded, ok.<br>
[INFO] [whonixcheck] Qubes Settings Test Result: Ok. (GATEWAY_IP: 10.137.0.46)<br>
[INFO] [whonixcheck] Qubes Settings Test Result: Ok, qubes_vm_type is AppVM.<br>
[INFO] [whonixcheck] Check Kernel Messages Test Result: Found nothing remarkable, ok.<br>
[INFO] [whonixcheck] check network interfaces Result: Ok.<br>
[INFO] [whonixcheck] Check Package Manager Running Result: None running, ok.<br>
[INFO] [whonixcheck] Tor Check Result: Not running on Whonix-Gateway, ok.<br>
[INFO] [whonixcheck] Tor Config Check Result: Tor config ok.<br>
[INFO] [whonixcheck] Tor Pid Check Result: Not running on Whonix-Gateway., ok.<br>
[WARNING] [whonixcheck] Tor SocksPort Reachability Test Result: Unreachable! (curl exit code: 28 | curl status message: [28] - [Operation timeout. The specified time-out period was reached according to the conditions.])<br>
[ERROR] [whonixcheck] Tor Connection Result:<br>
Tor’s Control Port could not be reached!</p>
<p>Troubleshooting:</p>
<ul>
<li>
<p>Confirm that Whonix-Gateway is running.</p>
</li>
<li>
<p>Run whonixcheck on Whonix-Gateway and confirm success.</p>
</li>
<li>
<p>Rerun whonixcheck here in this Whonix-Workstation.</p>
</li>
</ul>
<p>(Technical information:)<br>
(tor_circuit_established_check_exit_code: 277)<br>
(tor_bootstrap_timeout_type: )<br>
(tor_bootstrap_status: )<br>
(check_socks_port_open_test: 28)<br>
(Tor Circuit: not established)</p>
</blockquote>
<p><strong>Output of whonixcheck in sys-whonix-14 looks normal:</strong></p>
<blockquote>
<p>[INFO] [whonixcheck] sys-whonix-14 | Whonix-Gateway | whonix-gw-14 TemplateBased ProxyVM | Mon Jun  3 14:43:03 UTC 2019<br>
[INFO] [whonixcheck] Connected to Tor.<br>
[INFO] [whonixcheck] Whonix APT Repository: Enabled.<br>
When the Whonix team releases STRETCH updates,<br>
they will be AUTOMATICALLY installed (when you run apt-get dist-upgrade)<br>
along with updated packages from the Debian team. Please<br>
read https;://www.whonix.org/wiki/Trust to understand the risk.<br>
If you want to change this, use:<br>
sudo whonix_repository<br>
[INFO] [whonixcheck] Debian Package Update Check: Checking for software updates via apt-get… ( Documentation: https;://www.whonix,.org/wiki/Update )<br>
[INFO] [whonixcheck] Debian Package Update Check Result: No updates found via apt-get.</p>
</blockquote>
<p>I also tried to set sys-whonix-14 as netvm of a appvm based on fedora-29 template. No connection, unable to ping out.</p>
<p><strong>What I tried so far:</strong></p>
<ul>
<li>Update template using:</li>
</ul>
<blockquote>
<p>sudo qubes-dom0-update --enablerepo=qubes-templates-community --action=upgrade qubes-template-whonix-gw-14</p>
</blockquote>
<ul>
<li>Reinstall template using:</li>
</ul>
<blockquote>
<p>sudo qubes-dom0-update --enablerepo=qubes-templates-community --action=reinstall qubes-template-whonix-gw-14</p>
</blockquote>
<ul>
<li>Run:</li>
</ul>
<blockquote>
<p>sudo qubesctl state.sls qvm.anon-whonix</p>
</blockquote>
<p>in dom0, (shortened)result:<br>
Succeeded: 13<br>
Failed: 0</p>
<p>Any ideas what could be the problem? I have no idea how to debug networking at Xen-level for possible network misconfigurations.</p>
          <p><a href="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-gateway-not-reachable/7484/1</link>
        <pubDate>Mon, 03 Jun 2019 14:42:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7484-1</guid>
        <source url="http://forums.whonix.org/t/whonix-gateway-not-reachable/7484.rss">whonix-gateway not reachable</source>
      </item>
  </channel>
</rss>
