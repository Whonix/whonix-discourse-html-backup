<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>whonix-gateway not reachable - #21 by marmarek - Qubes-Whonix - Whonix Forum</title>
    <meta name="description" content="Hello everyone, 
I’m using whonix on Qubes 4.0. Since i installed updates (dom0 and whonix templates) a few days ago the control/socks port of sys-whonix-14 (my whonix-gateway, based on whonix-gw-14 template) is not reac&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../74844658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;whonix-gateway not reachable&#39;" href="../7484.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/whonix-gateway-not-reachable/7484/21" />
<meta name="twitter:url" content="https://forums.whonix.org/t/whonix-gateway-not-reachable/7484/21" />
<meta property="og:title" content="whonix-gateway not reachable" />
<meta name="twitter:title" content="whonix-gateway not reachable" />
<meta property="og:description" content="That’s it! Somehow I’ve missed your comment, but also now it happened to me and I’ve found out the same.  Configuring vif* interfaces is responsibility of /etc/xen/scripts/vif-route-qubes script called by xendriverdomain service, not udev. It fails, with logs in /var/log/xen/xen-hotplug.log. I see a single error there:  RTNETLINK answers: Permission denied  After adding set -x at the beginning of the script, I see it’s on a try to set IPv6 address. Probably because IPv6 is disabled in Whonix.  ..." />
<meta name="twitter:description" content="That’s it! Somehow I’ve missed your comment, but also now it happened to me and I’ve found out the same.  Configuring vif* interfaces is responsibility of /etc/xen/scripts/vif-route-qubes script called by xendriverdomain service, not udev. It fails, with logs in /var/log/xen/xen-hotplug.log. I see a single error there:  RTNETLINK answers: Permission denied  After adding set -x at the beginning of the script, I see it’s on a try to set IPv6 address. Probably because IPv6 is disabled in Whonix.  ..." />
<meta property="article:published_time" content="2019-06-19T16:37:42+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="../7484.html">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../7484.html">whonix-gateway not reachable</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/qubes-whonix/12.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #63a0ff'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Qubes-Whonix</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/awokd'><span itemprop='name'>awokd</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-03T22:20:37Z' class='post-time'>
                June 3, 2019, 10:20pm
              </time>
              <meta itemprop='dateModified' content='2019-06-03T22:20:37Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>Now I updated to 4.19.47-1. But unfortunately the problem remains, nothing changed.</p>
</blockquote>
<p>Try also 4.14.119-2 by editing your xen.cfg default= line if using UEFI<br>
boot, or selecting it from the Grub boot menu. The two might be<br>
unrelated of course, but I’m running 4.19.47-1 with the latest stable<br>
patches in whonix-gw and whonix-ws with no problems. Are you on any<br>
testing repositories?</p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/whus141'><span itemprop='name'>whus141</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-04T11:58:03Z' class='post-time'>
                June 4, 2019, 11:58am
              </time>
              <meta itemprop='dateModified' content='2019-06-04T11:58:03Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The oldest kernel version I have is 4.14.116-1. I played around with it.<br>
<strong>Setting the kernel version of sys-whonix-14 to 4.14.116-1 fixed the problem.</strong> This works with 4.14.116-1 and 4.19.47-1 kernels running in dom0 and anon-whonix.<br>
So the problem seems to be in the kernel of sys-whonix-14.<br>
I’m very happy to have a working whonix setup again. Thanks.<br>
Otherwise it would be nice to be able to use a recent kernel.</p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/awokd'><span itemprop='name'>awokd</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-04T18:08:17Z' class='post-time'>
                June 4, 2019,  6:08pm
              </time>
              <meta itemprop='dateModified' content='2019-06-04T18:08:17Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p><strong>Setting the kernel version of sys-whonix-14 to 4.14.116-1 fixed the problem.</strong></p>
</blockquote>
<p>Good, that will make troubleshooting easier. I wonder why my sys-whonix<br>
works at 4.19.47-1, but not yours. What version of the whonix-gw-14<br>
template do you have installed? Mine is 4.0.1-201901231238. Did you<br>
install any patches from testing?</p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/whus141'><span itemprop='name'>whus141</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-05T10:27:45Z' class='post-time'>
                June 5, 2019, 10:27am
              </time>
              <meta itemprop='dateModified' content='2019-06-05T10:27:45Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Running <strong>sudo dnf info qubes-template-whonix-gw-14</strong>:</p>
<blockquote>
<p>Last metadata expiration check: 22:27:32 ago on Tue Jun  4 13:50:32 2019.<br>
Installed Packages<br>
Name        : qubes-template-whonix-gw-14<br>
Arch        : noarch<br>
Epoch       : 0<br>
Version     : 4.0.1<br>
Release     : 201807171801<br>
Size        : 2.0 G<br>
Repo        : <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/system">@System</a><br>
From repo   : qubes-dom0-cached<br>
Summary     : Qubes template for whonix-gw-14<br>
URL         : <a href="../../../../external.html?link=http://www.qubes-os.org/" rel="nofollow noopener">http://www.qubes-os.org</a><br>
License     : GPL<br>
Description : Qubes template for whonix-gw-14</p>
</blockquote>
<p>As far as I can say/remember I made no changes to the template, no additional packages and no change of repository configuration. Even if I did these changes should have been deleted through running:</p>
<blockquote>
<p>sudo qubes-dom0-update --enablerepo=qubes-templates-community --action=reinstall qubes-template-whonix-gw-14</p>
</blockquote>
<p>Or am I wrong about how this works?</p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/awokd'><span itemprop='name'>awokd</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-05T11:14:27Z' class='post-time'>
                June 5, 2019, 11:14am
              </time>
              <meta itemprop='dateModified' content='2019-06-05T11:14:27Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>That is an older version of the template. Did you perform that reinstall<br>
recently? It should work, but might try it manually if it’s not<br>
updating. You can clone whonix-gw to a temporary template and point<br>
sys-whonix to it to manually reinstall without having to do it in the clear.</p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/whus141'><span itemprop='name'>whus141</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-05T15:03:04Z' class='post-time'>
                June 5, 2019,  3:03pm
              </time>
              <meta itemprop='dateModified' content='2019-06-05T15:03:04Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I manually remoced qubes-template-whonix-gw-14 using dnf and reinstalled it. Now my version is:</p>
<blockquote>
<p>sudo dnf info qubes-template-whonix-gw-14<br>
Last metadata expiration check: 2:40:05 ago on Wed Jun  5 14:16:09 2019.<br>
Installed Packages<br>
Name        : qubes-template-whonix-gw-14<br>
Arch        : noarch<br>
Epoch       : 0<br>
Version     : 4.0.1<br>
Release     : 201901231238<br>
Size        : 1.9 G<br>
Repo        : <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/system">@System</a><br>
From repo   : qubes-dom0-cached<br>
Summary     : Qubes template for whonix-gw-14<br>
URL         : <a href="../../../../external.html?link=http://www.qubes-os.org/" rel="nofollow noopener">http://www.qubes-os.org</a><br>
License     : GPL<br>
Description : Qubes template for whonix-gw-14</p>
</blockquote>
<p>I installed all updates in whonix-gw-14 (didn’t modified repo-settings, so should be stable).</p>
<p>The situation is unchanged: When sys-whonix-14 is booted with 4.14.116-1 kernel eveything works fine, when unsing 4.19.47-1 running whonixcheck in anon-whonix fails with the old error.</p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/awokd'><span itemprop='name'>awokd</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-05T17:46:44Z' class='post-time'>
                June 5, 2019,  5:46pm
              </time>
              <meta itemprop='dateModified' content='2019-06-05T17:46:44Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>The situation is unchanged: When sys-whonix-14 is booted with 4.14.116-1 kernel eveything works fine, when unsing 4.19.47-1 running whonixcheck in anon-whonix fails with the old error.</p>
</blockquote>
<p>How about Firefox in a Fedora based AppVM connected to sys-whonix on<br>
4.19, does that work now? If not, I am running out of suggestions. Maybe<br>
reinstall Qubes 4.0.1 if you’ve been upgrading from 4.0, unless someone<br>
has a better idea.</p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/whus141'><span itemprop='name'>whus141</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-06T08:53:08Z' class='post-time'>
                June 6, 2019,  8:53am
              </time>
              <meta itemprop='dateModified' content='2019-06-06T08:53:08Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>fedora-based appvm is not able to access the internet though sys-whonix-14 with 4.19 kernel. <img src="../../../images/emoji/twitter/frowningc164.png?v=9" title=":frowning:" class="emoji" alt=":frowning:"></p>
<p>I think that you are right about it being related to problems with updating from 4.0 to 4.0.1.<br>
<strong>sudo dnf info qubes-release</strong> says:</p>
<blockquote>
<p>Installed Packages<br>
Name        : qubes-release<br>
Arch        : noarch<br>
Epoch       : 0<br>
Version     : 4.0<br>
Release     : 8<br>
Size        : 157 k<br>
Repo        : <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/system">@System</a><br>
From repo   : qubes-dom0-cached<br>
Summary     : Qubes release files<br>
License     : GPLv2<br>
Description : Qubes release files such as yum configs and various /etc/ files<br>
: that define the release.</p>
</blockquote>
<p>But when running qubes-dom0-update it says “No new updates available”.</p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-06T09:44:54Z' class='post-time'>
                June 6, 2019,  9:44am
              </time>
              <meta itemprop='dateModified' content='2019-06-06T09:44:54Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Do you know anything related to such issues due to kernel upgrade? <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/marmarek">@marmarek</a></p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/adw'><span itemprop='name'>adw</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-07T03:27:19Z' class='post-time'>
                June 7, 2019,  3:27am
              </time>
              <meta itemprop='dateModified' content='2019-06-07T03:27:19Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="11" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/w/96bed5/40.png" class="avatar"> whus141:</div>
<blockquote>
<p>I think that you are right about it being related to problems with updating from 4.0 to 4.0.1.</p>
</blockquote>
</aside>
<p><a href="../../../../external.html?link=https://www.qubes-os.org/doc/supported-versions/#note-on-point-releases" rel="nofollow noopener">4.0.1 is just 4.0 with all routine updates.</a> There is no separate action of upgrading from 4.0 to 4.0.1. You can install either one, then fully update, and it results in the same system.</p>
<p>I think <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/awokd">@awokd</a> just meant that something might have gotten broken between your original 4.0 installation and the present. If so, he is suggesting that you might wish to reinstall. If you were to reinstall, it would make sense to use the most recent ISO, which is 4.0.1.</p>
<aside class="quote no-group" data-post="12" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Do you know anything related to such issues due to kernel upgrade?</p>
</blockquote>
</aside>
<p>Perhaps this:</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/4934" target="_blank" rel="nofollow noopener">github.com/QubesOS/qubes-issues</a>
  </header>
  <article class="onebox-body">
    <a href="../../../../external.html?link=https://github.com/AndreasKieling" rel="nofollow noopener">
<img src="../../../../external.html?link=https://avatars1.githubusercontent.com/u/49129531?v=2&amp;s=96" class="thumbnail onebox-avatar" width="60" height="60">
</a>

<h4><a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/4934" target="_blank" rel="nofollow noopener">Issue: Xorg crash on Qubes 4.0 with kernel 4.19</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="../../../../external.html?link=https://github.com/AndreasKieling" target="_blank" rel="nofollow noopener">AndreasKieling</a>
	on <a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/4934" target="_blank" rel="nofollow noopener">2019-03-31</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Qubes OS version:
R4.0
Affected component(s) or functionality:
Xorg
Lightdm
Graphical Login
Radeon Driver

Steps to reproduce the behavior:
Have Radeon Evergreen GPU, Start R4.0 with 4.19 kernel from...</pre>

<div class="labels">
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">C: kernel</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">P: critical</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">T: bug</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">r4.0-dom0-cur-test</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">r4.1-dom0-cur-test</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/awokd'><span itemprop='name'>awokd</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-07T03:43:20Z' class='post-time'>
                June 7, 2019,  3:43am
              </time>
              <meta itemprop='dateModified' content='2019-06-07T03:43:20Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>I think <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/awokd">@awokd</a> just meant that something might have gotten broken between your original 4.0 installation and the present. If so, he is suggesting that you might wish to reinstall. If you were to reinstall, it would make sense to use the most recent ISO, which is 4.0.1.</p>
</blockquote>
<p>Yes, sorry, meant that or maybe he is running one of the earlier RC<br>
versions. Not sure what else could be different at the networking level.<br>
Here is the other who was having the same problem with the newer kernel<br>
and sys-whonix:<br>
<a href="../../../../external.html?link=https://www.mail-archive.com/qubes-users@googlegroups.com/msg28628.html" rel="nofollow noopener">https://www.mail-archive.com/qubes-users@googlegroups.com/msg28628.html</a>.</p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/marmarek'><span itemprop='name'>marmarek</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-08T00:13:09Z' class='post-time'>
                June 8, 2019, 12:13am
              </time>
              <meta itemprop='dateModified' content='2019-06-08T00:13:09Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>No idea. I’ve just tried: fully updated sys-whonix with 4.19.47 kernel and anon-whonix with 4.19.47 and it works for me (whonixcheck -v in anon-whonix says so). qubes-template-whonix-gw-14 package version is 4.0.1-201807171801.<br>
Is your anon-whonix connected directly to sys-whonix? Do you see any failed services in sys-whonix (unlikely, as whonixcheck would detect that)? Check also if you see vifXX.0 interface in sys-whonix (some number instead of XX).</p>
<p>BTW looking at iptables -t nat in sys-whonix, I see redirection rules for 10.0.0.0/8 duplicated for each port (only for that IP range, 192.168.0.10 and 10.152.152.10 are listed only once). And also 10.152.152.10 is already handled by 10.0.0.0/8 so one or another is not needed.<br>
Additionally, according to <code>iptables-extensions</code> manual, <code>--to-ports</code> is not necessary if you don’t change the port. It would allow to compact all those rules to very few - one for each port ranges. Like this:</p>
<pre><code class="lang-auto">iptables -t nat -A PREROUTING -i vif+ -d 10.152.152.10 -p tcp --dport 9152:9189 -j REDIRECT
</code></pre>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-08T03:08:14Z' class='post-time'>
                June 8, 2019,  3:08am
              </time>
              <meta itemprop='dateModified' content='2019-06-08T03:08:14Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="15" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/df705f/40.png" class="avatar"> marmarek:</div>
<blockquote>
<p>BTW looking at iptables -t nat in sys-whonix, I see redirection rules for 10.0.0.0/8 duplicated for each port (only for that IP range, 192.168.0.10 and 10.152.152.10 are listed only once).</p>
</blockquote>
</aside>
<aside class="quote no-group" data-post="15" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/df705f/40.png" class="avatar"> marmarek:</div>
<blockquote>
<p>And also 10.152.152.10 is already handled by 10.0.0.0/8 so one or another is not needed.</p>
</blockquote>
</aside>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/whonix-firewall/commit/fbf4ad487241bcd3cd0acd11b3faec864cdbbb85" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-firewall</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/whonix-firewall/commit/fbf4ad487241bcd3cd0acd11b3faec864cdbbb85" target="_blank" rel="nofollow noopener">fix Qubes vs Non-Qubes prerouting IP range</a>
</h4>


<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/whonix-firewall/commit/fbf4ad487241bcd3cd0acd11b3faec864cdbbb85" target="_blank" rel="nofollow noopener">02:39AM - 08 Jun 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>7 additions</strong>
  and <strong>3 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<pre><code>WORKSTATION_DEST_SOCKSIFIED="\
10.137.0.0/8,\
10.138.0.0/8"
</code></pre>
<p>Is working.</p>
<p>But even with only</p>
<pre><code>WORKSTATION_DEST_SOCKSIFIED="10.137.0.0/8"
</code></pre>
<p>DispVMs are also working? How come?</p>
<p>And also somehow…</p>
<pre><code>iptables --wait -t nat -A PREROUTING -i vif+ -d 10.137.0.0/8 -p tcp --dport 9168 -j REDIRECT --to-ports 9168
</code></pre>
<p>Results in:</p>
<pre><code>-A PREROUTING -d 10.0.0.0/8 -i vif+ -p tcp -m tcp --dport 9168 -j REDIRECT --to-ports 9168
</code></pre>
<p>How come?</p>
<aside class="quote no-group" data-post="15" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/df705f/40.png" class="avatar"> marmarek:</div>
<blockquote>
<p>It would allow to compact all those rules to very few - one for each port ranges. Like this:</p>
</blockquote>
</aside>
<p>Nice. Done.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/whonix-firewall/commit/e96771637f88aba9f037466d9bb2f112f1a0e3c8" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-firewall</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/whonix-firewall/commit/e96771637f88aba9f037466d9bb2f112f1a0e3c8" target="_blank" rel="nofollow noopener">compact PREROUTING rules</a>
</h4>


<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/whonix-firewall/commit/e96771637f88aba9f037466d9bb2f112f1a0e3c8" target="_blank" rel="nofollow noopener">03:07AM - 08 Jun 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>2 additions</strong>
  and <strong>4 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/marmarek'><span itemprop='name'>marmarek</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-08T03:18:46Z' class='post-time'>
                June 8, 2019,  3:18am
              </time>
              <meta itemprop='dateModified' content='2019-06-08T03:18:46Z'>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="16" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>10.137.0.0/8</p>
</blockquote>
</aside>
<p>Oh, this is from where <code>10.0.0.0/8</code> come. <code>/8</code> is a netmask, and everything not covered by it is ignored. <code>10.137.0.0/8</code> basically says “compare just first 8 bits of the address”. If you want to cover <code>10.137.*.*</code>, but not other <code>10.x.*.*</code>, then it should be <code>10.137.0.0/16</code>.</p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/marmarek'><span itemprop='name'>marmarek</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-08T03:24:30Z' class='post-time'>
                June 8, 2019,  3:24am
              </time>
              <meta itemprop='dateModified' content='2019-06-08T03:24:30Z'>
          <span itemprop='position'>#18</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I’m not sure if <a href="../../../../external.html?link=https://github.com/Whonix/whonix-firewall/commit/fbf4ad487241bcd3cd0acd11b3faec864cdbbb85" rel="nofollow noopener">https://github.com/Whonix/whonix-firewall/commit/fbf4ad487241bcd3cd0acd11b3faec864cdbbb85</a> is correct. On my qubes system, <code>/lib/systemd/system/anon-ws-disable-stacked-tor_autogen__var_run_tor_socks.service</code>  redirects <code>/var/run/tor/socks</code> to <code>10.152.152.10:9050</code></p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-08T03:31:50Z' class='post-time'>
                June 8, 2019,  3:31am
              </time>
              <meta itemprop='dateModified' content='2019-06-08T03:31:50Z'>
          <span itemprop='position'>#19</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="17" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/df705f/40.png" class="avatar"> marmarek:</div>
<blockquote>
<p>Oh, this is from where <code>10.0.0.0/8</code> come. <code>/8</code> is a netmask, and everything not covered by it is ignored. <code>10.137.0.0/8</code> basically says “compare just first 8 bits of the address”. If you want to cover <code>10.137.*.*</code> , but not other <code>10.x.*.*</code> , then it should be <code>10.137.0.0/16</code> .</p>
</blockquote>
</aside>
<p>Awesome! Fixed.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/whonix-firewall/commit/5fc78ed8d82657fdb3209e51bec638bafb396813" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-firewall</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/whonix-firewall/commit/5fc78ed8d82657fdb3209e51bec638bafb396813" target="_blank" rel="nofollow noopener">fix IP range</a>
</h4>

  <pre class="message" style="white-space: normal;">thanks to @marmarek for the suggestion!</pre>

<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/whonix-firewall/commit/5fc78ed8d82657fdb3209e51bec638bafb396813" target="_blank" rel="nofollow noopener">03:24AM - 08 Jun 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>1 additions</strong>
  and <strong>1 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-post="18" data-topic="7484" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/df705f/40.png" class="avatar"> marmarek:</div>
<blockquote>
<p>I’m not sure if <a href="../../../../external.html?link=https://github.com/Whonix/whonix-firewall/commit/fbf4ad487241bcd3cd0acd11b3faec864cdbbb85" rel="nofollow noopener">https://github.com/Whonix/whonix-firewall/commit/fbf4ad487241bcd3cd0acd11b3faec864cdbbb85</a> is correct. On my qubes system, <code>/lib/systemd/system/anon-ws-disable-stacked-tor_autogen__var_run_tor_socks.service</code> redirects <code>/var/run/tor/socks</code> to <code>10.152.152.10:9050</code></p>
</blockquote>
</aside>
<p>Indeed. That would have lead to breakage.</p>
<p>It’s hard to use the actual Qubes-Gateway IP there:</p>
<ul>
<li>it’s defined in a source file</li>
<li>unknown at build time</li>
<li>dynamic per Qubes installation</li>
</ul>
<p>re-added:</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/whonix-firewall/commit/f209a3a1bc22e49d346e6928b900957874f74f91" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-firewall</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/whonix-firewall/commit/f209a3a1bc22e49d346e6928b900957874f74f91" target="_blank" rel="nofollow noopener">fix IP range</a>
</h4>

  <pre class="message" style="white-space: normal;">thanks to @marmarek for the suggestion!
https://forums.whonix.org/t/whonix-gateway-not-reachable/7484/18</pre>

<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/whonix-firewall/commit/f209a3a1bc22e49d346e6928b900957874f74f91" target="_blank" rel="nofollow noopener">03:30AM - 08 Jun 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>2 additions</strong>
  and <strong>1 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/flergusen'><span itemprop='name'>flergusen</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-14T13:33:41Z' class='post-time'>
                June 14, 2019,  1:33pm
              </time>
              <meta itemprop='dateModified' content='2019-06-14T13:33:41Z'>
          <span itemprop='position'>#20</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I bumped into this a couple of weeks ago, I too think it was after a Qubes kernel update. I didn’t investigate until today, but what I found out was that no IP address is set on vif interfaces when attached, it seems like /usr/lib/qubes/setup-ip is not triggered (I put ‘thouch /tmp/thing’ right under the hash bang and no such file was created a new VM and vif was attached).</p>
<p>With ‘dmesg -w’ I saw UDEV/KERNEL lines with add+online and offline+remove, but none with bind or unbind.</p>
<p>With ‘udevadm info  --attribute-walk /sys/class/net/vifXX.0’ I saw ATTRS(state)==“InitWait” where it should be “Connected”</p>
<p>Manually setting the same IP on the attached vifXX.0 as on the other interfaces, ‘ip address add dev vifXX.0 10.137.0.17/32’, enables the Whonix gateway to route traffic from connected VM through Tor.</p>
<p>I have not yet tried with a regular Debian (Stretch) template as netvm to see if the problem is the same. There are no issues with a netvm with Fedora 29 or 30 as template.</p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/marmarek'><span itemprop='name'>marmarek</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-19T16:37:42Z' class='post-time'>
                June 19, 2019,  4:37pm
              </time>
              <meta itemprop='dateModified' content='2019-06-19T16:37:42Z'>
          <span itemprop='position'>#21</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="20" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/f/bbe5ce/40.png" class="avatar"> flergusen:</div>
<blockquote>
<p>but what I found out was that no IP address is set on vif interfaces when attached</p>
</blockquote>
</aside>
<p>That’s it! Somehow I’ve missed your comment, but also now it happened to me and I’ve found out the same.<br>
Configuring <code>vif*</code> interfaces is responsibility of <code>/etc/xen/scripts/vif-route-qubes</code> script called by <code>xendriverdomain</code> service, not udev. It fails, with logs in <code>/var/log/xen/xen-hotplug.log</code>. I see a single error there:</p>
<pre><code class="lang-auto">RTNETLINK answers: Permission denied
</code></pre>
<p>After adding <code>set -x</code> at the beginning of the script, I see it’s on a try to set IPv6 address. Probably because IPv6 is disabled in Whonix.<br>
Indeed I have enabled IPv6 in my system globally (<a href="../../../../external.html?link=https://www.qubes-os.org/doc/networking/#ipv6" rel="nofollow noopener">https://www.qubes-os.org/doc/networking/#ipv6</a>). The same page explains how to disable it for particular VM (and others connected to it). So, I’ve executed <code>qvm-features sys-whonix ipv6 ''</code>, restarted sys-whonix and now it works.</p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../tor-socksport-unreachable-just-in-anon-whonix/8072/11.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../tor-socksport-unreachable-just-in-anon-whonix/8072/11.html'>
                      <span itemprop='name'>Tor SocksPort unreachable (just) in anon-whonix</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/awokd'><span itemprop='name'>awokd</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-19T18:15:00Z' class='post-time'>
                June 19, 2019,  6:15pm
              </time>
              <meta itemprop='dateModified' content='2019-06-19T18:15:00Z'>
          <span itemprop='position'>#22</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>So, I’ve executed <code>qvm-features sys-whonix ipv6 ''</code>, restarted sys-whonix and now it works.</p>
</blockquote>
<p>That explains it. I had disabled ipv6 for <em>Whonix</em> with the above<br>
command several months ago.</p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7484.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-20T05:53:47Z' class='post-time'>
                June 20, 2019,  5:53am
              </time>
              <meta itemprop='dateModified' content='2019-06-20T05:53:47Z'>
          <span itemprop='position'>#23</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="21" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/df705f/40.png" class="avatar"> marmarek:</div>
<blockquote>
<p>Configuring <code>vif*</code> interfaces is responsibility of <code>/etc/xen/scripts/vif-route-qubes</code> script called by <code>xendriverdomain</code> service, not udev. It fails, with logs in <code>/var/log/xen/xen-hotplug.log</code> . I see a single error there:</p>
<pre><code class="lang-auto">RTNETLINK answers: Permission denied
</code></pre>
<p>After adding <code>set -x</code> at the beginning of the script, I see it’s on a try to set IPv6 address. Probably because IPv6 is disabled in Whonix.<br>
Indeed I have enabled IPv6 in my system globally (<a href="../../../../external.html?link=https://www.qubes-os.org/doc/networking/#ipv6" rel="nofollow noopener">https://www.qubes-os.org/doc/networking/#ipv6</a>). The same page explains how to disable it for particular VM (and others connected to it).</p>
</blockquote>
</aside>
<p>Is it possible (preferably) to fix this in <code>/etc/xen/scripts/vif-route-qube</code>? Created</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/5110" target="_blank" rel="nofollow noopener">github.com/QubesOS/qubes-issues</a>
  </header>
  <article class="onebox-body">
    <a href="../../../../external.html?link=https://github.com/adrelanos" rel="nofollow noopener">
<img src="../../../../external.html?link=https://avatars1.githubusercontent.com/u/1985040?v=2&amp;s=96" class="thumbnail onebox-avatar" width="60" height="60">
</a>

<h4><a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/5110" target="_blank" rel="nofollow noopener">Issue: networking broken, /etc/xen/scripts/vif-route-qubes fails when IPv6 is disabled</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/5110" target="_blank" rel="nofollow noopener">2019-06-20</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">This issue affects Qubes-Whonix and was triaged by @marmarek, see:
https://forums.whonix.org/t/whonix-gateway-not-reachable/7484/21
@marmarek
Configuring vif* interfaces is responsibility of /etc/xen/scripts/vif-route-qubes script called by xendriverdomain service,...</pre>

<div class="labels">
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">P: default</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">T: bug</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>for it.</p>
<aside class="quote no-group" data-post="21" data-topic="7484">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/df705f/40.png" class="avatar"> marmarek:</div>
<blockquote>
<p>So, I’ve executed <code>qvm-features sys-whonix ipv6 ''</code> , restarted sys-whonix and now it works.</p>
</blockquote>
</aside>
<p>That would also be an alternative solution for that could be added to Whonix salt but which than later could backfire if/when we implement IPv6 Whonix side. (although not on the horizon mid term <a href="../../../../external.html?link=https://phabricator.whonix.org/T509" rel="nofollow noopener">https://phabricator.whonix.org/T509</a>)</p>
<p>(related: <a href="../../../../external.html?link=https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/tree/master/qvm" rel="nofollow noopener">https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/tree/master/qvm</a>)</p>
        </div>

        <meta itemprop='headline' content='whonix-gateway not reachable'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="../7484.html">← previous page</a></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
