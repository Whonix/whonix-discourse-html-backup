<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Restrict hardware information to root - Development - Whonix Forum</title>
    <meta name="description" content="It seems that from this forum post that the guest can get information about the hostâ€™s hardware such as your CPU. Iâ€™ve also tested this on Virtualbox and the CPU is shown. 
Would it make sense to restrict /proc/cpuinfo, &amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="73294658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Restrict hardware information to root&#39;" href="7329.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/restrict-hardware-information-to-root/7329?page=2" />
<meta name="twitter:url" content="https://forums.whonix.org/t/restrict-hardware-information-to-root/7329?page=2" />
<meta property="og:title" content="Restrict hardware information to root" />
<meta name="twitter:title" content="Restrict hardware information to root" />
<meta property="og:description" content="Iâ€™m currently working on a script that does this. So far, Iâ€™ve gotten it to hide CPU, motherboard/BIOS, USB and PCI information to unprivileged users." />
<meta name="twitter:description" content="Iâ€™m currently working on a script that does this. So far, Iâ€™ve gotten it to hide CPU, motherboard/BIOS, USB and PCI information to unprivileged users." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="12 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="98 â¤" />
<meta property="article:published_time" content="2019-09-29T19:59:53+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="7329.html">
        <link rel="next" href="73299ba9.html?page=3">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="7329.html">Restrict hardware information to root</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-29T19:59:53Z' class='post-time'>
                September 29, 2019,  7:59pm
              </time>
              <meta itemprop='dateModified' content='2019-09-29T19:59:53Z'>
          <span itemprop='position'>#21</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="21" data-topic="7721">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar">
    <a href="../anonymize-etc-machine-id/7721/21.html">Anonymize /etc/machine-id</a> <a class="badge-wrapper  bullet" href="../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Btw this can also be used to hide things like CPU info in /proc/cpuinfo or other stuff in /sys. Or we can use it to restrict hardware info to root by copying the file to a different location, changing the fileâ€™s permissions and then bind mounting it back to the original file.
  </blockquote>
</aside>

<p>Iâ€™m currently working on a script that does this. So far, Iâ€™ve gotten it to hide CPU, motherboard/BIOS, USB and PCI information to unprivileged users.</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-30T14:35:23Z' class='post-time'>
                September 30, 2019,  2:35pm
              </time>
              <meta itemprop='dateModified' content='2019-09-30T14:35:23Z'>
          <span itemprop='position'>#22</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Can you please make sure this doesnâ€™t break virt-detect  that Whonixcheck uses to know if a hypervisor is supported? Also used for shared folder daemons.</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-30T16:27:25Z' class='post-time'>
                September 30, 2019,  4:27pm
              </time>
              <meta itemprop='dateModified' content='2019-09-30T16:27:25Z'>
          <span itemprop='position'>#23</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="22" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Can you please make sure this doesnâ€™t break virt-detect that Whonixcheck uses to know if a hypervisor is supported?</p>
</blockquote>
</aside>
<p>Currently, that isnâ€™t broken.</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-30T17:01:25Z' class='post-time'>
                September 30, 2019,  5:01pm
              </time>
              <meta itemprop='dateModified' content='2019-09-30T17:01:25Z'>
          <span itemprop='position'>#24</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Because that has a sudoers exception.</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-29T18:42:42Z' class='post-time'>
                September 29, 2019,  6:42pm
              </time>
              <meta itemprop='dateModified' content='2019-09-29T18:42:42Z'>
          <span itemprop='position'>#25</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="16" data-topic="7721">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Actually, an extremely hacky way to hide these would be to bind mount a file on top of it.</p>
</blockquote>
</aside>
<p>Btw this can also be used to hide things like CPU info in /proc/cpuinfo or other stuff in /sys. Or we can use it to restrict hardware info to root by copying the file to a different location, changing the fileâ€™s permissions and then bind mounting it back to the original file.</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../external.html?link=http://schema.org/ListItem'>
                    <a href="7329/21.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='7329/21.html'>
                      <span itemprop='name'>Restrict hardware information to root</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../anonymize-etc-machine-id/7721/21.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../anonymize-etc-machine-id/7721/21.html'>
                      <span itemprop='name'>Anonymize /etc/machine-id</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick_mobile'><span itemprop='name'>Patrick_mobile</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-30T04:56:00Z' class='post-time'>
                September 30, 2019,  4:56am
              </time>
              <meta itemprop='dateModified' content='2019-09-30T04:56:00Z'>
          <span itemprop='position'>#26</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Why over mount if we could just change access rights to prevent user from reading?</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-30T16:22:40Z' class='post-time'>
                September 30, 2019,  4:22pm
              </time>
              <meta itemprop='dateModified' content='2019-09-30T16:22:40Z'>
          <span itemprop='position'>#27</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="22" data-topic="7721" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>Why over mount if we could just change access rights to prevent user from reading?</p>
</blockquote>
</aside>
<p>I was under the impression that you couldnâ€™t change the file permissions directly but I just tested it and it does work without overmounting.</p>
<p>In that case, we can just do <code>chmod og-rwx -R /sys</code>. Not only would this hide a whole load of hardware information, it would also prevent a bunch of security vulnerabilities as sysfs and debugfs add a lot of attack surface.</p>
<p>As per <a href="../../../external.html?link=https://en.wikibooks.org/wiki/Grsecurity/Appendix/Grsecurity_and_PaX_Configuration_Options#Sysfs/debugfs_restriction" rel="nofollow noopener">https://en.wikibooks.org/wiki/Grsecurity/Appendix/Grsecurity_and_PaX_Configuration_Options#Sysfs/debugfs_restriction</a> we can whitelist /sys/devices/system/cpu</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-30T18:33:31Z' class='post-time'>
                September 30, 2019,  6:33pm
              </time>
              <meta itemprop='dateModified' content='2019-09-30T18:33:31Z'>
          <span itemprop='position'>#28</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Running <code>chmod og-rwx -R /sys</code> at boot with a systemd service breaks dbus-launch so XFCE canâ€™t start.</p>
<p>If this is going to be implemented weâ€™d need to add exceptions or set it after XFCE has started.</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick_mobile'><span itemprop='name'>Patrick_mobile</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-30T19:52:18Z' class='post-time'>
                September 30, 2019,  7:52pm
              </time>
              <meta itemprop='dateModified' content='2019-09-30T19:52:18Z'>
          <span itemprop='position'>#29</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Whitelist better.</p>
<p>XFCE bug report?</p>
<p>Any other upstream to discuss with?</p>
<p>If it breaks XFCE it probably is breaking a ton of other things too. (GNOME, KDE, â€¦?)</p>
<aside class="quote no-group quote-modified" data-post="24" data-topic="7721">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>If this is going to be implemented weâ€™d need to â€¦ or set it after XFCE has started</p>
</blockquote>
</aside>
<p>After $something starter is never great since this leaves room for race conditions where some daemon (for example web server) starts earlier than this.</p>
<p>Also since this is to prevent malware from getting root this might happen too late to help.</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-10-01T17:09:23Z' class='post-time'>
                October 1, 2019,  5:09pm
              </time>
              <meta itemprop='dateModified' content='2019-10-01T17:09:23Z'>
          <span itemprop='position'>#30</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="25" data-topic="7721">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>Whitelist better.</p>
</blockquote>
</aside>
<p>How exactly would that be implemented?</p>
<p>Iâ€™m thinking of making /sys owned by a <code>sysfs</code> group and making binaries that need /sys owned by the <code>sysfs</code> group and setgid so it would run with the permissions of the <code>sysfs</code> group.</p>
<aside class="quote no-group" data-post="25" data-topic="7721">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>XFCE bug report?</p>
<p>Any other upstream to discuss with?</p>
</blockquote>
</aside>
<p>I donâ€™t really see this as a bug. There are many legitimate uses for /sys. If not, it wouldnâ€™t be a thing in the first place.</p>
<aside class="quote no-group" data-post="25" data-topic="7721">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>If it breaks XFCE it probably is breaking a ton of other things too. (GNOME, KDE, â€¦?)</p>
</blockquote>
</aside>
<p>It would break a ton of things.</p>
<p>The grsecurity devs even said it shouldnâ€™t be used on desktops due to the amount of things that would break</p>
<p><a href="../../../external.html?link=https://forums.grsecurity.net/viewtopic.php?t=4655" class="onebox" target="_blank" rel="nofollow noopener">https://forums.grsecurity.net/viewtopic.php?t=4655</a></p>
<blockquote>
<p>it shouldnâ€™t be enabled on desktops</p>
</blockquote>
<p>I think the security/privacy benefits are too great to not enable it though. It could even be optional and documented in <a href="../../../external.html?link=https://www.whonix.org/wiki/Whonix-Workstation_Security_Hardening" rel="nofollow noopener">https://www.whonix.org/wiki/Whonix-Workstation_Security_Hardening</a></p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-10-01T17:13:08Z' class='post-time'>
                October 1, 2019,  5:13pm
              </time>
              <meta itemprop='dateModified' content='2019-10-01T17:13:08Z'>
          <span itemprop='position'>#31</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Also, more examples of breakage:</p>
<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/alpinelinux/aports/pull/1552" target="_blank" rel="nofollow noopener">github.com/alpinelinux/aports</a>
  </header>
  <article class="onebox-body">
      <a href="../../../external.html?link=https://github.com/Shizmob" target="_blank" rel="nofollow noopener">
    <img alt="Shizmob" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/763230?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../external.html?link=https://github.com/alpinelinux/aports/pull/1552" target="_blank" rel="nofollow noopener">main/linux-hardened: disable GRKERNSEC_SYSFS_RESTRICT</a>
</h4>

<div class="date">
  by <a href="../../../external.html?link=https://github.com/Shizmob" target="_blank" rel="nofollow noopener">Shizmob</a>
  on <a href="../../../external.html?link=https://github.com/alpinelinux/aports/pull/1552" target="_blank" rel="nofollow noopener">05:44PM - 20 May 17 UTC</a>
</div>

<div class="github-commit-stats">
  <strong>2 commits</strong>
  changed <strong>17 files</strong>
  with <strong>23 additions</strong>
  and <strong>23 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://gitlab.alpinelinux.org/uploads/-/system/appearance/favicon/1/alpine-logo.ico" class="site-icon" width="32" height="32">
      <a href="../../../external.html?link=https://gitlab.alpinelinux.org/alpine/aports/issues/7265" target="_blank" rel="nofollow noopener">GitLab</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:160/139;"><img src="../../../external.html?link=https://gitlab.alpinelinux.org/uploads/-/system/project/avatar/1/alogo.png" class="thumbnail"></div>

<h3><a href="../../../external.html?link=https://gitlab.alpinelinux.org/alpine/aports/issues/7265" target="_blank" rel="nofollow noopener">libGL error: MESA-LOADER: failed to retrieve device information (#7265) Â·...</a></h3>

<p>I found a bug with Mesa. It works fine as root but fails as normal user. I have 2 reproduction cases. You must have mesa-demos installed. Case 1 ------ **glxinfo...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p><a href="../../../external.html?link=https://wiki.gentoo.org/wiki/PulseAudio#grsec_and_PulseAudio" class="onebox" target="_blank" rel="nofollow noopener">https://wiki.gentoo.org/wiki/PulseAudio#grsec_and_PulseAudio</a></p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-10-01T17:40:27Z' class='post-time'>
                October 1, 2019,  5:40pm
              </time>
              <meta itemprop='dateModified' content='2019-10-01T17:40:27Z'>
          <span itemprop='position'>#32</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I managed to fix XFCE just by installing the <code>dbus-x11</code> package.</p>
<p>XFCE kept breaking with an error about /usr/bin/dbus-launch terminating but that didnâ€™t exist so I installed the <code>dbus-x11</code> package and it somehow worked. I have no idea why this fixed it.</p>
<p>Now whonixcheck is breaking as it tries to check if the network interface is up by running <code>cat /sys/class/net/eth0/carrier</code>. This can be fixed by just making whonixcheck do something like grep <code>ip a</code> output.</p>
<p>Grepping the whonixcheck source code shows that it also tries to do something with <code>/sys/devices/system/clocksource/clocksource0/current_clocksource</code> which would also break. Dunno how this could be fixed.</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-10-01T20:27:00Z' class='post-time'>
                October 1, 2019,  8:27pm
              </time>
              <meta itemprop='dateModified' content='2019-10-01T20:27:00Z'>
          <span itemprop='position'>#33</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>madaidan via Whonix Forum:</p>
<blockquote>
<p>Now whonixcheck is breaking as it tries to check if the network interface is up by running <code>cat /sys/class/net/eth0/carrier</code>. This can be fixed by just making whonixcheck do something like grep <code>ip a</code> output.</p>
<p>Grepping the whonixcheck source code shows that it also tries to do something with <code>/sys/devices/system/clocksource/clocksource0/current_clocksource</code> which would also break. Dunno how this could be fixed.</p>
</blockquote>
<p>Use <code>sudo cat</code> and adding a sudoers.d exception.</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-10-02T08:23:27Z' class='post-time'>
                October 2, 2019,  8:23am
              </time>
              <meta itemprop='dateModified' content='2019-10-02T08:23:27Z'>
          <span itemprop='position'>#34</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="26" data-topic="7721">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>I donâ€™t really see this as a bug.</p>
</blockquote>
</aside>
<p>It shouldnâ€™t break XFCE startup just because some file in sys is missing.</p>
<aside class="quote no-group" data-post="26" data-topic="7721">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Iâ€™m thinking of making /sys owned by a <code>sysfs</code> group and making binaries that need /sys owned by the <code>sysfs</code> group and setgid so it would run with the permissions of the <code>sysfs</code> group.</p>
</blockquote>
</aside>
<aside class="quote no-group" data-post="26" data-topic="7721">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>It could even be optional and documented in <a href="../../../external.html?link=https://www.whonix.org/wiki/Whonix-Workstation_Security_Hardening" rel="nofollow noopener">https://www.whonix.org/wiki/Whonix-Workstation_Security_Hardening</a></p>
</blockquote>
</aside>
<p>Sounds good.</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-10-03T21:11:48Z' class='post-time'>
                October 3, 2019,  9:11pm
              </time>
              <meta itemprop='dateModified' content='2019-10-03T21:11:48Z'>
          <span itemprop='position'>#35</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/security-misc/pull/31" target="_blank" rel="nofollow noopener">github.com/Whonix/security-misc</a>
  </header>
  <article class="onebox-body">
      <a href="../../../external.html?link=https://github.com/madaidan" target="_blank" rel="nofollow noopener">
    <img alt="madaidan" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/50278627?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../external.html?link=https://github.com/Whonix/security-misc/pull/31" target="_blank" rel="nofollow noopener">Restrict /proc/cpuinfo, /proc/bus, /proc/scsi and /sys to root</a>
</h4>

<div class="date">
  by <a href="../../../external.html?link=https://github.com/madaidan" target="_blank" rel="nofollow noopener">madaidan</a>
  on <a href="../../../external.html?link=https://github.com/Whonix/security-misc/pull/31" target="_blank" rel="nofollow noopener">08:54PM - 03 Oct 19 UTC</a>
</div>

<div class="github-commit-stats">
  <strong>3 commits</strong>
  changed <strong>3 files</strong>
  with <strong>42 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/whonixcheck/pull/12" target="_blank" rel="nofollow noopener">github.com/Whonix/whonixcheck</a>
  </header>
  <article class="onebox-body">
      <a href="../../../external.html?link=https://github.com/madaidan" target="_blank" rel="nofollow noopener">
    <img alt="madaidan" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/50278627?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../external.html?link=https://github.com/Whonix/whonixcheck/pull/12" target="_blank" rel="nofollow noopener">Use sudo when checking files in /sys</a>
</h4>

<div class="date">
  by <a href="../../../external.html?link=https://github.com/madaidan" target="_blank" rel="nofollow noopener">madaidan</a>
  on <a href="../../../external.html?link=https://github.com/Whonix/whonixcheck/pull/12" target="_blank" rel="nofollow noopener">09:05PM - 03 Oct 19 UTC</a>
</div>

<div class="github-commit-stats">
  <strong>4 commits</strong>
  changed <strong>3 files</strong>
  with <strong>14 additions</strong>
  and <strong>6 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/anon-meta-packages/pull/21" target="_blank" rel="nofollow noopener">github.com/Whonix/anon-meta-packages</a>
  </header>
  <article class="onebox-body">
      <a href="../../../external.html?link=https://github.com/madaidan" target="_blank" rel="nofollow noopener">
    <img alt="madaidan" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/50278627?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../external.html?link=https://github.com/Whonix/anon-meta-packages/pull/21" target="_blank" rel="nofollow noopener">Install dbus-x11 by default</a>
</h4>

<div class="date">
  by <a href="../../../external.html?link=https://github.com/madaidan" target="_blank" rel="nofollow noopener">madaidan</a>
  on <a href="../../../external.html?link=https://github.com/Whonix/anon-meta-packages/pull/21" target="_blank" rel="nofollow noopener">09:10PM - 03 Oct 19 UTC</a>
</div>

<div class="github-commit-stats">
  <strong>1 commits</strong>
  changed <strong>1 files</strong>
  with <strong>2 additions</strong>
  and <strong>2 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>How would hide-hardware-info.service be disabled by default? Is adding <code>systemctl disable hide-hardware-info.service</code> to debian/security-misc.postinst enough?</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-10-03T21:33:26Z' class='post-time'>
                October 3, 2019,  9:33pm
              </time>
              <meta itemprop='dateModified' content='2019-10-03T21:33:26Z'>
          <span itemprop='position'>#36</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Major: Could you please add the licensing header to the new files?</p>
<p>Minor: Could you please add <code>--non-interactive</code> after <code>sudo</code>, i.e.</p>
<pre><code>sudo --non-interactive
</code></pre>
<p>for the new whonixcheck sudo commands? (I can also add this on top.)</p>
<aside class="quote no-group" data-post="31" data-topic="7721">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>How would hide-hardware-info.service be disabled by default? Is adding <code>systemctl disable hide-hardware-info.service</code> to debian/security-misc.postinst enough?</p>
</blockquote>
</aside>
<p>systemd preset could be the correct mechanism for that? Never used myself yet.</p>
<p><a href="../../../external.html?link=https://manpages.debian.org/stretch/systemd/systemd.preset.5.en.html" rel="nofollow noopener">https://manpages.debian.org/stretch/systemd/systemd.preset.5.en.html</a> any help?</p>
<p>Debian debhelper fortunately supports systemd preset nowadays. At least a short look at <a href="../../../external.html?link=https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=772555" rel="nofollow noopener">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=772555</a> implies so.</p>
<p>systemd-preset is used by a few packages in Debian. To learn the syntax / compare, perhaps have a look at a few of such packages?</p>
<p><a href="../../../external.html?link=https://packages.debian.org/search?suite=default&amp;section=all&amp;arch=any&amp;searchon=contents&amp;keywords=preset" class="onebox" target="_blank" rel="nofollow noopener">https://packages.debian.org/search?suite=default&amp;section=all&amp;arch=any&amp;searchon=contents&amp;keywords=preset</a></p>
<p>Looks like a snippet in in file</p>
<pre><code>/lib/systemd/system-preset/50-security-misc.preset
</code></pre>
<p>with contents</p>
<pre><code>disable hide-hardware-info.service
</code></pre>
<p><code>+</code> licensing header.</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-10-03T21:44:55Z' class='post-time'>
                October 3, 2019,  9:44pm
              </time>
              <meta itemprop='dateModified' content='2019-10-03T21:44:55Z'>
          <span itemprop='position'>#37</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Just did those.</p>
<p>Whatâ€™s the point of <code>--non-interactive</code>? <code>sudo</code> already runs without prompting if thereâ€™s a sudoers exception.</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-10-03T21:50:03Z' class='post-time'>
                October 3, 2019,  9:50pm
              </time>
              <meta itemprop='dateModified' content='2019-10-03T21:50:03Z'>
          <span itemprop='position'>#38</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><code>sudo --non-interactive</code></p>
<ul>
<li>Consistency with other use of <code>sudo</code> in whonixcheck.</li>
<li>Itâ€™s in case sudoers exception file is modified by user or in future upgrade. Better to fail instantly and closed rather than having sudo wait forever for a password which will never be entered.</li>
</ul>
<p>For now whonixcheck sudoers file is fairly stable but in past it got improved, more hardened. In future the way whonixcheck / sudo works may be improved. I was thinking user <code>user</code> should be able to run whonixcheck without <code>sudo</code> since it could show logs which might contain information which a user might not want to see. (Relatively minor since we probably donâ€™t have many users following advice of <a href="../../../external.html?link=https://www.whonix.org/wiki/Root#Prevent_Malware_from_Sniffing_the_Root_Password" rel="nofollow noopener">https://www.whonix.org/wiki/Root#Prevent_Malware_from_Sniffing_the_Root_Password</a>) So changes to whonixcheck suoders file in future are possible. In past whonixcheck suoders file was modified by third parties (Qubes-VM-Hardening).</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-10-04T00:24:08Z' class='post-time'>
                October 4, 2019, 12:24am
              </time>
              <meta itemprop='dateModified' content='2019-10-04T00:24:08Z'>
          <span itemprop='position'>#39</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Installing <code>dbus-x11</code> might not be the best way to fix XFCE.</p>
<p><a href="../../../external.html?link=https://bugs.archlinux.org/task/60179" class="onebox" target="_blank" rel="nofollow noopener">https://bugs.archlinux.org/task/60179</a></p>
<blockquote>
<p>dbus is handled by systemd, and has been for a long time. Donâ€™t use dbus-launch</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7329.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-10-04T14:41:25Z' class='post-time'>
                October 4, 2019,  2:41pm
              </time>
              <meta itemprop='dateModified' content='2019-10-04T14:41:25Z'>
          <span itemprop='position'>#40</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Restricting /proc/cpuinfo to root breaks the start-tor-browser script. It exits with an error saying â€œTor Browser requires a CPU with SSE2 support.â€.</p>
<p>In <code>/home/user/.tb/tor-browser/Browser/start-tor-browser</code> there is:</p>
<pre><code class="lang-auto">if ! grep -q '^flags\s*:.* sse2' /proc/cpuinfo; then
        complain "Tor Browser requires a CPU with SSE2 support.  Exiting."
        exit 1
fi
</code></pre>
<p>There were no other errors after I commented out that piece of code.</p>
<p>Weâ€™ll need to somehow patch this to run that code only if hide-hardware-info.service is not enabled or give another sudoers exception.</p>
<p><code>systemctl is-active</code> would be perfect for this except it only checks if the service is currently active and not if it has already succeeded.</p>
        </div>

        <meta itemprop='headline' content='Restrict hardware information to root'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="7329.html">â† previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="73299ba9.html?page=3">next page â†’</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
