<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Restrict hardware information to root</title>
    <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329</link>
    <description>It seems that from this [forum post](https://forums.whonix.org/t/guest-systems-sees-cpu-of-the-host/1413) that the guest can get information about the host&#39;s hardware such as your CPU. I&#39;ve also tested this on Virtualbox and the CPU is shown.

Would it make sense to restrict /proc/cpuinfo, lspci and some files in /sys to root?

Has anyone tested whether other hardware information is leaked? Like motherboards, network adapters, GPUs etc.

Motherboard information can be found by running

```
cat /sys/devices/virtual/dmi/id/board_{vendor,name,version}
```
Virtualbox doesn&#39;t leak the motherboard information. I haven&#39;t tested this on other hypervisors.

Certain hardware devices like audio controllers and SATA controllers can be found by running `lspci`. Virtualbox spoofs this info. I haven&#39;t tested this on other hypervisors either.</description>
    <language>en</language>
    <lastBuildDate>Thu, 07 Jul 2022 13:50:46 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubpullrequest" data-onebox-src="https://github.com/Kicksecure/security-misc/pull/108">
  <header class="source">

      <a href="https://github.com/Kicksecure/security-misc/pull/108" target="_blank" rel="noopener">github.com/Kicksecure/security-misc</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Kicksecure/security-misc/pull/108" target="_blank" rel="noopener">Continue for loop if unable to change one directory's permission</a>
    </h4>

    <div class="branches">
      <code>Kicksecure:master</code> ← <code>Krish-sysadmin:master</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-07-05" data-time="02:03:04" data-timezone="UTC">02:03AM - 05 Jul 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/Krish-sysadmin" target="_blank" rel="noopener">
          <img alt="Krish-sysadmin" src="https://avatars.githubusercontent.com/u/75043245?v=4" class="onebox-avatar-inline" width="20" height="20">
          Krish-sysadmin
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 2 additions and 2 deletions">
        <a href="https://github.com/Kicksecure/security-misc/pull/108/files" target="_blank" rel="noopener">
          <span class="added">+2</span>
          <span class="removed">-2</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">I ran the script hide-hardware-info as root and I got the message "chmod: changi<span class="show-more-container"><a href="https://github.com/Kicksecure/security-misc/pull/108" target="_blank" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">ng permissions of '/sys/fs/resctrl': operation not permitted"</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/91">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/91</link>
        <pubDate>Thu, 07 Jul 2022 13:50:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-91</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="89" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Bad for SELinux users?</p>
</blockquote>
</aside>
<p>The opposite. I don’t see any significant attack surface exposed by this and it is necessary for SELinux to properly function. Grsecurity had also whitelisted it from their equivalent feature.</p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/90">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/90</link>
        <pubDate>Fri, 12 Mar 2021 18:26:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-90</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="88" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<h4><a href="https://github.com/Whonix/security-misc/pull/100">hide-hardware-info: allow unrestricting selinuxfs </a></h4>
</blockquote>
</aside>
<p>Nothing obviously bad. Nothing bad for non- SELinux users. Bad for SELinux users? Unknown by me. No plans too look into SELinux at this point.</p>
<p>Merged due to <a class="mention" href="http://forums.whonix.org/u/madaidan">@madaidan</a>’s OK in telegram chat.</p>
<p>SELinux not actually tested by me since not used in Whonix or Kicksecure at this point. Added comments in source code to point at this link:</p>
<p><a href="https://www.whonix.org/wiki/Security-misc#selinux">https://www.whonix.org/wiki/Security-misc#selinux</a></p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/89">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/89</link>
        <pubDate>Mon, 01 Mar 2021 14:18:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-89</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Could you review this one please?</p>
<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/pull/100" target="_blank" rel="noopener">github.com/Whonix/security-misc</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/security-misc/pull/100" target="_blank" rel="noopener">hide-hardware-info: allow unrestricting selinuxfs</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>0xC0ncord:bugfix/selinuxfs_restrictions</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2021-02-06" data-time="08:06:05" data-timezone="UTC">08:06AM - 06 Feb 21 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/0xC0ncord" target="_blank" rel="noopener">
          <img alt="0xC0ncord" src="https://avatars.githubusercontent.com/u/8011001?v=4" class="onebox-avatar-inline" width="20" height="20">
          0xC0ncord
        </a>
      </div>

      <div class="lines" title="1 commits changed 2 files with 17 additions and 0 deletions">
        <a href="https://github.com/Whonix/security-misc/pull/100/files" target="_blank" rel="noopener">
          <span class="added">+17</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>

  </div>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/88">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/88</link>
        <pubDate>Sat, 06 Feb 2021 08:40:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-88</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>The <code>test -r /proc/cpuinfo</code> part checks if it’s readable. If it isn’t readable, nothing happens.</p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/85">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/85</link>
        <pubDate>Fri, 25 Oct 2019 11:42:04 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-85</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><code>Use sudo if /proc/cpuinfo isn't readable in the start-tor-browser script</code><br>
<code>SSE2</code><br>
<a href="https://trac.torproject.org/projects/tor/ticket/31968" class="onebox" target="_blank" rel="nofollow noopener">https://trac.torproject.org/projects/tor/ticket/31968</a></p>
<aside class="quote no-group" data-post="1" data-topic="8330">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"><a href="//forums.whonix.org/t/tor-browser-9-0-release/8330/1">Tor Browser 9.0 release</a>
</div>
<blockquote>
<p>The /proc/cpuinfo issue is also fixed.</p>
</blockquote>
</aside>
<p>Doesn’t look like it. Still seeing this.</p>
<pre><code>if test -r /proc/cpuinfo &amp;&amp; ! grep -q '^flags\s*:.* sse2' /proc/cpuinfo; then
        complain "Tor Browser requires a CPU with SSE2 support.  Exiting."
        exit 1
fi</code></pre>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/84">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/84</link>
        <pubDate>Fri, 25 Oct 2019 08:38:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-84</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>madaidan via Whonix Forum:</p>
<blockquote>
<p>systemd-detect-virt output: /usr/lib/whonixcheck/preparation.bsh: line 79: sudo --non-interactive systemd-detect-virt: command not found</p>
</blockquote>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/whonixcheck/commit/bc021c349b22030062252115d5a618a362c00651" target="_blank" rel="nofollow noopener">github.com/Whonix/whonixcheck</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/whonixcheck/commit/bc021c349b22030062252115d5a618a362c00651" target="_blank" rel="nofollow noopener">fix "systemd-detect-virt output: /usr/lib/whonixcheck/preparation.bsh: line 79: sudo --non-interactive systemd-detect-virt: command not found"</a>
</h4>

  <pre class="message" style="white-space: normal;">Thanks to @madaidan for the bug report!
http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/78</pre>

<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="https://github.com/Whonix/whonixcheck/commit/bc021c349b22030062252115d5a618a362c00651" target="_blank" rel="nofollow noopener">08:43AM - 18 Oct 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>1 additions</strong>
  and <strong>1 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/87">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/87</link>
        <pubDate>Fri, 18 Oct 2019 08:44:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-87</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>madaidan via Whonix Forum:</p>
<blockquote>
<p>Also, kinda unrelated but, would it be a good idea to make a security-misc wiki page instead of using the workstation hardening pages for this stuff?</p>
</blockquote>
<p>Very much so. Empty page created.</p>
<p><a href="https://www.whonix.org/wiki/Security-misc" class="onebox" target="_blank" rel="nofollow noopener">https://www.whonix.org/wiki/Security-misc</a></p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/86">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/86</link>
        <pubDate>Fri, 18 Oct 2019 08:40:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-86</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="80" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Can we swap the order? chgrp first then chmod? Reason: race conditions. Whitelisted group should always be able to access.</p>
</blockquote>
</aside>
<p>I don’t see how there will be race conditions. <code>chmod</code> doesn’t change the group permissions.</p>
<aside class="quote no-group" data-post="80" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Should <code>--recursive</code> be considered? Dunno.<br>
Did you consider for each chmod or chgrp command if <code>--recursive</code> should be used please?</p>
</blockquote>
</aside>
<p>I did use <code>--recursive</code> originally for <code>chmod</code> but removed it due to the errors in <code>/sys</code> but since that’s fixed now, it can added back although there probably isn’t much benefit since if <code>/sys</code> isn’t accessible, neither are its subdirectories.</p>
<p>The <code>chgrp</code> command is already recursive (that’s the <code>-R</code> flag) since the group needs access to subdirectories.</p>
<aside class="quote no-group" data-post="81" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>A way to solve it is using <code>|| true</code> . Will simplify the code.</p>
</blockquote>
</aside>
<p>Thanks. I didn’t know this could be done.</p>
<aside class="quote no-group" data-post="82" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Since <code>/lib/systemd/system/hide-hardware-info.service</code> uses <code>DefaultDependencies=no</code> should it also use systemd config option <code>RequiresMountsFor</code> to make sure <code>/proc/cpuinfo /proc/bus /proc/scsi /sys</code> is available?</p>
</blockquote>
</aside>
<p><code>/proc/cpuinfo</code>, <code>/proc/bus</code> and <code>/proc/scsi</code> aren’t mount points (only <code>/proc</code> is). <code>/proc/scsi</code> also isn’t available on debian so it will fail.</p>
<p>The script already sorts this out by checking if they exist and if not gives an error. It doesn’t exit the script though so the error might go unnoticed.</p>
<aside class="quote no-group" data-post="82" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Added some minor commits on top. Please check.</p>
</blockquote>
</aside>
<p>Looks good.</p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/83">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/83</link>
        <pubDate>Thu, 17 Oct 2019 15:35:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-83</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Since <code>/lib/systemd/system/hide-hardware-info.service</code> uses <code>DefaultDependencies=no</code> should it also use systemd config option <code>RequiresMountsFor</code> to make sure <code>/proc/cpuinfo /proc/bus /proc/scsi /sys</code> is available?</p>
<p>Added some minor commits on top. Please check.</p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/82">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/82</link>
        <pubDate>Thu, 17 Oct 2019 10:18:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-82</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <pre><code>## which makes
## systemd say the service has failed even though
## everything has completed successfully. So, this
## returns "0" instead which makes systemd say the
## service has succeeded.
</code></pre>
<p>This happens a lot. This also makes scripts fail which have <code>set -e</code> or an error <code>trap</code> set. Non-zero exit codes happen. A way to solve it is using <code>|| true</code>. Will simplify the code.</p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/81">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/81</link>
        <pubDate>Thu, 17 Oct 2019 10:08:07 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-81</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <pre><code>chmod o-rwx "${whitelist_path}"
chgrp -fR "${1}" "${whitelist_path}"
</code></pre>
<p>Can we swap the order? chgrp first then chmod? Reason: race conditions. Whitelisted group should always be able to access.</p>
<blockquote>
<p>chmod o-rwx “${whitelist_path}”</p>
</blockquote>
<p>Should <code>--recursive</code> be considered? Dunno.<br>
Did you consider for each chmod or chgrp command if <code>--recursive</code> should be used please?</p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/80">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/80</link>
        <pubDate>Thu, 17 Oct 2019 09:58:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-80</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/pull/34" target="_blank" rel="nofollow noopener">github.com/Whonix/security-misc</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/madaidan" target="_blank" rel="nofollow noopener">
    <img alt="madaidan" src="https://avatars0.githubusercontent.com/u/50278627?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/security-misc/pull/34" target="_blank" rel="nofollow noopener">Add a whitelist for /sys and /proc/cpuinfo</a>
</h4>

<div class="date">
  by <a href="https://github.com/madaidan" target="_blank" rel="nofollow noopener">madaidan</a>
  on <a href="https://github.com/Whonix/security-misc/pull/34" target="_blank" rel="nofollow noopener">07:47PM - 16 Oct 19 UTC</a>
</div>

<div class="github-commit-stats">
  <strong>6 commits</strong>
  changed <strong>4 files</strong>
  with <strong>67 additions</strong>
  and <strong>1 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>I also edited the wiki page to reflect these changes.</p>
<p><a href="https://www.whonix.org/w/index.php?title=Whonix-Workstation_Security_Hardening&amp;oldid=51451&amp;diff=cur" rel="nofollow noopener">https://www.whonix.org/w/index.php?title=Whonix-Workstation_Security_Hardening&amp;oldid=51451&amp;diff=cur</a></p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/79">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/79</link>
        <pubDate>Wed, 16 Oct 2019 20:03:21 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-79</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>whonixcheck is failing again even with <code>hide-hardware-info.service</code> disabled. I’m using the developers repository.</p>
<pre><code class="lang-auto">[ERROR] [whonixcheck] Virtualizer detection failed. You might be running a virtualizer unsupported by Whonix developers! Whonixcheck aborted!

This might endanger your anonymity. Do not proceed unless you know what you are doing.

Recommended action:
- Shut down.
- Contact Whonix developers.

Debugging information:
Running sudo --non-interactive systemd-detect-virt failed!
qubes_detected: false
systemd-detect-virt output: /usr/lib/whonixcheck/preparation.bsh: line 79: sudo --non-interactive systemd-detect-virt: command not found
</code></pre>
<p>I’m using Virtualbox so it isn’t an unsupported hypervisor.</p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/78">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/78</link>
        <pubDate>Tue, 15 Oct 2019 21:28:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-78</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>I’m working on a whitelist here</p>
<p><a href="https://github.com/madaidan/security-misc/tree/whitelist" rel="nofollow noopener">https://github.com/madaidan/security-misc/tree/whitelist</a></p>
<p>It makes <code>/sys</code> and <code>/proc/cpuinfo</code> owned by the <code>sysfs</code> or <code>cpuinfo</code> groups. The whitelist can be disabled through /etc/hide-hardware-info.d (in case a user doesn’t want anything unprivileged to access <code>/sys</code> or <code>/proc/cpuinfo</code> regardless of breakage). <code>user@.service</code> runs under the <code>sysfs</code> group so it has access to <code>/sys</code> which fixes XFCE.</p>
<p>The main issue now is that there are some directories in <code>/sys</code> which permissions cannot be changed. This causes <code>chgrp</code> to give an error which makes systemd say the service has failed (even though everything has succeeded). This doesn’t really affect anything important but it can be confusing.</p>
<p>Also, kinda unrelated but, would it be a good idea to make a security-misc wiki page instead of using the workstation hardening pages for this stuff? Non-Whonix security-misc users might think those steps apply to Whonix only and won’t apply them.</p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/77">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/77</link>
        <pubDate>Tue, 15 Oct 2019 21:09:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-77</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Awesome!</p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/76">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/76</link>
        <pubDate>Thu, 10 Oct 2019 22:11:40 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-76</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>The Tor Browser issue is fixed in master now.</p>
<p><a href="https://trac.torproject.org/projects/tor/ticket/31968#comment:5" class="onebox" target="_blank" rel="nofollow noopener">https://trac.torproject.org/projects/tor/ticket/31968#comment:5</a></p>
<p><a href="https://gitweb.torproject.org/user/boklm/tor-browser-build.git/commit/?h=bug_31968&amp;id=6cf4e6eabc5eb559baf9721a3caf0544b7480093" class="onebox" target="_blank" rel="nofollow noopener">https://gitweb.torproject.org/user/boklm/tor-browser-build.git/commit/?h=bug_31968&amp;id=6cf4e6eabc5eb559baf9721a3caf0544b7480093</a></p>
<p>If /proc/cpuinfo isn’t readable, it now assumes SSE2 support is available.</p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/75">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/75</link>
        <pubDate>Thu, 10 Oct 2019 19:45:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-75</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="73" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Looks to me like part of their privacy charade.</p>
</blockquote>
</aside>
<p>It definitely isn’t a charade, It was picked up from past GrapheneOS work <a href="https://gist.github.com/thestinger/e4bb344dcc545d2ee00dcc22fd886f29" rel="nofollow noopener">https://gist.github.com/thestinger/e4bb344dcc545d2ee00dcc22fd886f29</a></p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/74">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/74</link>
        <pubDate>Mon, 07 Oct 2019 15:45:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-74</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="72" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Oh, I thought you were talking about the sysfs and other hardware info restrictions since later in the comment you were talking about how restricting CPU info could break some compiler features.</p>
</blockquote>
</aside>
<p>That was just answering Patrick’s question.</p>
<aside class="quote no-group" data-post="72" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>There are no ways /proc/net/dev can be used to exploit the system (that I know of), it’s just where <code>lshw</code> gets networking info from (you can check it with <code>strace</code> ).</p>
</blockquote>
</aside>
<p>Alright thanks for confirming.</p>
<aside class="quote no-group" data-post="72" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>/proc/net in general though does hold a lot of information about the device’s network state that Google thought is too dangerous to allow ordinary apps access to.</p>
</blockquote>
</aside>
<p>Looks to me like part of their privacy charade.</p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/73">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/73</link>
        <pubDate>Mon, 07 Oct 2019 01:26:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-73</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="71" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>My comment that you’re replying to is talking about /proc/net/dev though - I don’t think it has much to do with sysfs?</p>
</blockquote>
</aside>
<p>Oh, I thought you were talking about the sysfs and other hardware info restrictions since later in the comment you were talking about how restricting CPU info could break some compiler features.</p>
<p>There are no ways /proc/net/dev can be used to exploit the system (that I know of), it’s just where <code>lshw</code> gets networking info from (you can check it with <code>strace</code>).</p>
<p>/proc/net in general though does hold a lot of information about the device’s network state that Google thought is too dangerous to allow ordinary apps access to.</p>
<p>I’m not saying this is some really important thing we should restrict. I’m just giving suggestions that we can research further into.</p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/72">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/72</link>
        <pubDate>Sun, 06 Oct 2019 15:52:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-72</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="66" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Grsecurity restricted these for a reason. I’ve also spoken with Daniel Micay about sysfs/debugfs before and he says it leaks a lot of information that regular programs shouldn’t have access to.</p>
</blockquote>
</aside>
<p>This I know of. I used to enable sysfs restrictions when using Grsec in the past but it broke some stuff. My comment that you’re replying to is talking about /proc/net/dev though - I don’t think it has much to do with sysfs?</p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/71">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/71</link>
        <pubDate>Sun, 06 Oct 2019 14:29:07 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-71</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Merged. <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/70">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/70</link>
        <pubDate>Sun, 06 Oct 2019 09:49:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-70</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="54" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Could you add sudoers exception please?</p>
</blockquote>
</aside>
<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/whonixcheck/pull/13" target="_blank" rel="nofollow noopener">github.com/Whonix/whonixcheck</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/madaidan" target="_blank" rel="nofollow noopener">
    <img alt="madaidan" src="https://avatars0.githubusercontent.com/u/50278627?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/whonixcheck/pull/13" target="_blank" rel="nofollow noopener">Add sudoers exception for systemd-detect-virt</a>
</h4>

<div class="date">
  by <a href="https://github.com/madaidan" target="_blank" rel="nofollow noopener">madaidan</a>
  on <a href="https://github.com/Whonix/whonixcheck/pull/13" target="_blank" rel="nofollow noopener">06:14PM - 05 Oct 19 UTC</a>
</div>

<div class="github-commit-stats">
  <strong>2 commits</strong>
  changed <strong>2 files</strong>
  with <strong>5 additions</strong>
  and <strong>2 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/69">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/69</link>
        <pubDate>Sat, 05 Oct 2019 18:14:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-69</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[Patrick_mobile]]></dc:creator>
        <description><![CDATA[
            <p>Haven’t considered all posts yet.</p>
<aside class="quote no-group" data-post="57" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Of no value on non mobile/Android devices becuase VMs don’t have IMEIs or a serial number (the only two things mentioned in that doc).</p>
</blockquote>
</aside>
<p>We’re leaving VM-only territory with Whonix host / Kicksecure.<br>
Package security-misc is neither Whonix nor VM specific.</p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/68">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/68</link>
        <pubDate>Sat, 05 Oct 2019 15:57:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-68</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
      <item>
        <title>Restrict hardware information to root</title>
        <dc:creator><![CDATA[Patrick_mobile]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="55" data-topic="7329">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>I can’t replicate this. It works fine for me.</p>
</blockquote>
</aside>
<p>Possibly Qubes only.</p>
          <p><a href="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/67">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/restrict-hardware-information-to-root/7329/67</link>
        <pubDate>Sat, 05 Oct 2019 15:51:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7329-67</guid>
        <source url="http://forums.whonix.org/t/restrict-hardware-information-to-root/7329.rss">Restrict hardware information to root</source>
      </item>
  </channel>
</rss>
