<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>CI Whonix Testing</title>
    <link>http://forums.whonix.org/t/ci-whonix-testing/15839</link>
    <description>Currently, I have a repo working for automated whonix integration testing. This is a continuation of the WATS senior capstone project, and will be integrated in to the new CI stuff I built.

https://github.com/Mycobee/whonix_automated_test_suite

I am creating a new thread to log my efforts and progress, so as to keep things readable and up to date.

@Patrick you had a list of desired test cases somewhere right? Can&#39;t seem to find it at the moment.</description>
    <language>en</language>
    <lastBuildDate>Mon, 28 Nov 2022 10:26:31 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/ci-whonix-testing/15839.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Yay!</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/57">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/57</link>
        <pubDate>Mon, 28 Nov 2022 10:26:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-57</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p>you must have fixed it. Tag builds and commit builds are both working now and green <img src="//forums.whonix.org/images/emoji/twitter/white_check_mark.png?v=12" title=":white_check_mark:" class="emoji" alt=":white_check_mark:"><br>
</p><div class="lightbox-wrapper"><a class="lightbox" href="//forums.whonix.org/uploads/default/original/2X/4/48fcd8b6f8360a13628f90675732ecf749958177.png" data-download-href="//forums.whonix.org/uploads/default/48fcd8b6f8360a13628f90675732ecf749958177" title="Screen Shot 2022-11-27 at 9.35.56 PM"><img src="//forums.whonix.org/uploads/default/optimized/2X/4/48fcd8b6f8360a13628f90675732ecf749958177_2_345x108.png" alt="Screen Shot 2022-11-27 at 9.35.56 PM" data-base62-sha1="apG68TUnct1yMPWiMwFh2LX0LRl" width="345" height="108" srcset="//forums.whonix.org/uploads/default/optimized/2X/4/48fcd8b6f8360a13628f90675732ecf749958177_2_345x108.png, //forums.whonix.org/uploads/default/optimized/2X/4/48fcd8b6f8360a13628f90675732ecf749958177_2_517x162.png 1.5x, //forums.whonix.org/uploads/default/optimized/2X/4/48fcd8b6f8360a13628f90675732ecf749958177_2_690x216.png 2x" data-small-upload="//forums.whonix.org/uploads/default/optimized/2X/4/48fcd8b6f8360a13628f90675732ecf749958177_2_10x10.png"></a></div><p></p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/56">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/56</link>
        <pubDate>Mon, 28 Nov 2022 04:35:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-56</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Ok, I understand the issue now.</p>
<blockquote>
<ul>
<li>true ‘INFO: build_remote_derivative_pkgs is set to true, skipping cowbuilder setup.’</li>
</ul>
</blockquote>
<p>But the 1140_local-dependencies step uses cowbuilder by default. Will fix ASP.</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/55">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/55</link>
        <pubDate>Sun, 27 Nov 2022 19:20:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-55</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p>To clarify, the build only is breaking when I set <code>--remote-derivative-packages true</code></p>
<p>Full build is fine <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/54">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/54</link>
        <pubDate>Sun, 27 Nov 2022 19:14:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-54</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="52" data-topic="15839">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I didn’t know there’s such a requirement.</p>
</blockquote>
</aside>
<p>A look at these logs from your developer tag shows the error <img src="//forums.whonix.org/images/emoji/twitter/man_shrugging.png?v=12" title=":man_shrugging:" class="emoji" alt=":man_shrugging:"></p>
<p>No idea why, but adding that line to <code>/etc/hosts/</code> fixes things <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<aside class="onebox githubactions" data-onebox-src="https://github.com/Whonix/derivative-maker/actions/runs/3558225207">
  <header class="source">

      <a href="https://github.com/Whonix/derivative-maker/actions/runs/3558225207" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">


      <svg width="24" height="24" class="github-icon github-icon-failure" viewBox="0 0 24 24" aria-hidden="true"><path d="M1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12zm8.036-4.024a.75.75 0 00-1.06 1.06L10.939 12l-2.963 2.963a.75.75 0 101.06 1.06L12 13.06l2.963 2.964a.75.75 0 001.061-1.06L13.061 12l2.963-2.964a.75.75 0 10-1.06-1.06L12 10.939 9.036 7.976z"></path></svg>

  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/derivative-maker/actions/runs/3558225207" target="_blank" rel="noopener nofollow ugc">.</a>
    </h4>

      <div class="github-info">
        Run automated builder <span class="github-run-number">#169</span>
      </div>
  </div>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/53">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/53</link>
        <pubDate>Sun, 27 Nov 2022 19:12:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-53</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Merged. Thank you!</p>
<p>The build worked locally for me:</p>
<aside class="quote" data-post="9" data-topic="13815">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/builds-image-builds/13815/9">builds image builds</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/development/8"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of components looking for maintainer)">Development</span></a>
  </div>
  <blockquote>
    Build 16.0.8.9 succeeded and will likely become the next stable point release.
  </blockquote>
</aside>

<aside class="quote no-group" data-username="Mycobee" data-post="49" data-topic="15839">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/mycobee/40/2338_2.png" class="avatar"> Mycobee:</div>
<blockquote>
<p>I see the new error. I forgot I need to add <code>127.0.0.1 host localhost</code> in <code>/etc/hosts</code> to satisfy the scripts.</p>
</blockquote>
</aside>
<p>I didn’t know there’s such a requirement.</p>
<aside class="quote no-group" data-username="Mycobee" data-post="50" data-topic="15839">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/mycobee/40/2338_2.png" class="avatar"> Mycobee:</div>
<blockquote>
<p><code>E: cannot canonicalize filename /var/cache/pbuilder/base.cow_amd64, does not exist</code></p>
</blockquote>
</aside>
<p>Will investigate.</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/52">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/52</link>
        <pubDate>Sun, 27 Nov 2022 19:11:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-52</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> this PR fixes the most recent issue and is ready to merge</p><aside class="onebox githubpullrequest" data-onebox-src="https://github.com/Whonix/derivative-maker/pull/3">
  <header class="source">

      <a href="https://github.com/Whonix/derivative-maker/pull/3" target="_blank" rel="noopener nofollow ugc">github.com/Whonix/derivative-maker</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/derivative-maker/pull/3" target="_blank" rel="noopener nofollow ugc">Add host to hostfile</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>Whonix:resolve-ci-hostname</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-11-27" data-time="19:00:20" data-timezone="UTC">07:00PM - 27 Nov 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/Mycobee" target="_blank" rel="noopener nofollow ugc">
          <img alt="Mycobee" src="https://avatars.githubusercontent.com/u/41843577?v=4" class="onebox-avatar-inline" width="20" height="20">
          Mycobee
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 9 additions and 0 deletions">
        <a href="https://github.com/Whonix/derivative-maker/pull/3/files" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+9</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>
  </div>
</div>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Currently, building full VMs from tags without remote derivative packages is working, and builds are passing</p>
<p>But the issue mentioned above still persists for remote derivative paackage builds from commit</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/51">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/51</link>
        <pubDate>Sun, 27 Nov 2022 19:02:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-51</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p><code>--remote-derivative-packages</code> build for commit is still failing. Testing a demo tag build now though to see if that one works <img src="//forums.whonix.org/images/emoji/twitter/thinking.png?v=12" title=":thinking:" class="emoji" alt=":thinking:"></p>
<pre><code class="lang-auto">/home/ansible/derivative-maker/packages/kicksecure/genmkfile/usr/share/genmkfile/make-helper-one.bsh: INFO: debdist
/home/ansible/derivative-maker/packages/kicksecure/genmkfile/usr/share/genmkfile/make-helper-one.bsh: INFO: debdsc
dpkg-source: info: using source format '3.0 (custom)'
dpkg-source: info: building developer-meta-files in developer-meta-files_22.1-1.dsc
/home/ansible/derivative-maker/packages/kicksecure/genmkfile/usr/share/genmkfile/make-helper-one.bsh: INFO: deb-pkg-build
E: cannot canonicalize filename /var/cache/pbuilder/base.cow_amd64, does not exist
++ errorhandlergeneral ERR
++ last_failed_exit_code=1
++ last_failed_bash_command='"$source_code_folder_dist/packages/kicksecure/genmkfile/usr/bin/genmkfile" deb-pkg'
++ output_cmd_set
++ '[' -o xtrace ']'
++ output_cmd=true
++ true 'INFO: Middle of function errorhandlergeneral of ././build-steps.d/1140_local-dependencies.'
++ errorhandlerprocessshared ERR
++ last_script=././build-steps.d/1140_local-dependencies
++ trap_signal_type_previous=
</code></pre>
<aside class="onebox githubactions" data-onebox-src="https://github.com/Whonix/derivative-maker/actions/runs/3558805099">
  <header class="source">

      <a href="https://github.com/Whonix/derivative-maker/actions/runs/3558805099" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">


      <svg width="24" height="24" class="github-icon github-icon-failure" viewBox="0 0 24 24" aria-hidden="true"><path d="M1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12zm8.036-4.024a.75.75 0 00-1.06 1.06L10.939 12l-2.963 2.963a.75.75 0 101.06 1.06L12 13.06l2.963 2.964a.75.75 0 001.061-1.06L13.061 12l2.963-2.964a.75.75 0 10-1.06-1.06L12 10.939 9.036 7.976z"></path></svg>

  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/derivative-maker/actions/runs/3558805099" target="_blank" rel="noopener nofollow ugc">Add host to hostfile</a>
    </h4>

      <div class="github-info">
        Run automated builder <span class="github-run-number">#171</span>
      </div>
  </div>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/50">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/50</link>
        <pubDate>Sun, 27 Nov 2022 15:33:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-50</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p>I see the new error. I forgot I need to add <code>127.0.0.1 host localhost</code> in <code>/etc/hosts</code> to satisfy the scripts. Rebuilding on a new branch. Hopefully this should work</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/49">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/49</link>
        <pubDate>Sun, 27 Nov 2022 15:19:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-49</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p>Looks like building from a tag got closer (no <code>--remote-derivative-packages</code> on tag builds)</p><aside class="onebox githubactions" data-onebox-src="https://github.com/Whonix/derivative-maker/actions/runs/3556230055">
  <header class="source">

      <a href="https://github.com/Whonix/derivative-maker/actions/runs/3556230055" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">


      <svg width="24" height="24" class="github-icon github-icon-failure" viewBox="0 0 24 24" aria-hidden="true"><path d="M1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12zm8.036-4.024a.75.75 0 00-1.06 1.06L10.939 12l-2.963 2.963a.75.75 0 101.06 1.06L12 13.06l2.963 2.964a.75.75 0 001.061-1.06L13.061 12l2.963-2.964a.75.75 0 10-1.06-1.06L12 10.939 9.036 7.976z"></path></svg>

  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/derivative-maker/actions/runs/3556230055" target="_blank" rel="noopener nofollow ugc">Change droplet size for tier restrictions</a>
    </h4>

      <div class="github-info">
        Run automated builder <span class="github-run-number">#163</span>
      </div>
  </div>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/48">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/48</link>
        <pubDate>Sun, 27 Nov 2022 03:42:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-48</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p>This is a big and thorough PR. I am happy with this work <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/47">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/47</link>
        <pubDate>Sun, 27 Nov 2022 02:03:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-47</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a>, CI is working again and this PR can be merged (resolving the previously mentioned errors should make the builds green)</p><aside class="onebox githubpullrequest" data-onebox-src="https://github.com/Whonix/derivative-maker/pull/2">
  <header class="source">

      <a href="https://github.com/Whonix/derivative-maker/pull/2" target="_blank" rel="noopener nofollow ugc">github.com/Whonix/derivative-maker</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/derivative-maker/pull/2" target="_blank" rel="noopener nofollow ugc">Dynamic vps creation</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>Whonix:dynamic-vps-creation</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-11-20" data-time="21:02:44" data-timezone="UTC">09:02PM - 20 Nov 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/Mycobee" target="_blank" rel="noopener nofollow ugc">
          <img alt="Mycobee" src="https://avatars.githubusercontent.com/u/41843577?v=4" class="onebox-avatar-inline" width="20" height="20">
          Mycobee
        </a>
      </div>

      <div class="lines" title="43 commits changed 37 files with 442 additions and 217 deletions">
        <a href="https://github.com/Whonix/derivative-maker/pull/2/files" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+442</span>
          <span class="removed">-217</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">## Description

This pull request is a large refactor, that implements the fol<span class="show-more-container"><a href="https://github.com/Whonix/derivative-maker/pull/2" target="_blank" rel="noopener nofollow ugc" class="show-more">…</a></span><span class="excerpt hidden">lowing things

- Dynamically create and destroy digitalocean resources to save money, and use more powerful machines for quicker builds
- Refactor tasks in to roles for GUI builds and headless. Reduce reliance on shell scripts and leverage ansible functionality.
- Dynamically bootstrap VPS with all needed packages, for repeatability and full host automation
- Ensure no lingering VPS resources exist before and after builds, to prevent ballooning cloud bills 
- Rotate SSH keys for security reasons after accidentally plaintext private key commit
- Separate log files for workstation and gateway builds</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Now servers are generated and destroyed automatically, and a large refactor has occured for maintainability.</p>
<p>There should be no more interruptions in CI, and it should be functional from here on out as you work on the core OS features.</p>
<h4>
<a name="next-steps-1" class="anchor" href="http://forums.whonix.org#next-steps-1"></a>Next Steps</h4>
<ul>
<li>WATS automation in CI (should be here shortly, proven to work manually)</li>
<li>Optimizations (Build Whonix VMs in parallel and generate VPS from snapshots instead of building from scratch)</li>
<li>Thorough documentation</li>
</ul>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/46">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/46</link>
        <pubDate>Sun, 27 Nov 2022 02:02:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-46</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p>Thank you. Pulling source code is working now. Very close to having working CI again that dynamically builds everything</p>
<p>New problem with gateway VM build, artifacts here:</p>
<p><a href="https://github.com/Whonix/derivative-maker/suites/9518408326/artifacts/451981884" class="onebox" target="_blank" rel="noopener nofollow ugc">https://github.com/Whonix/derivative-maker/suites/9518408326/artifacts/451981884</a></p>
<pre><code class="lang-auto">/home/ansible/derivative-maker/packages/kicksecure/genmkfile/usr/share/genmkfile/make-helper-one.bsh: INFO: debdist
/home/ansible/derivative-maker/packages/kicksecure/genmkfile/usr/share/genmkfile/make-helper-one.bsh: INFO: debdsc
dpkg-source: info: using source format '3.0 (custom)'
dpkg-source: info: building developer-meta-files in developer-meta-files_22.1-1.dsc
/home/ansible/derivative-maker/packages/kicksecure/genmkfile/usr/share/genmkfile/make-helper-one.bsh: INFO: deb-pkg-build
E: cannot canonicalize filename /var/cache/pbuilder/base.cow_amd64, does not exist
++ errorhandlergeneral ERR
++ last_failed_exit_code=1
++ last_failed_bash_command='"$source_code_folder_dist/packages/kicksecure/genmkfile/usr/bin/genmkfile" deb-pkg'
++ output_cmd_set
++ '[' -o xtrace ']'
++ output_cmd=true
++ true 'INFO: Middle of function errorhandlergeneral of ././build-steps.d/1140_local-dependencies.'
++ errorhandlerprocessshared ERR
++ last_script=././build-steps.d/1140_local-dependencies
</code></pre>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/44">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/44</link>
        <pubDate>Sat, 26 Nov 2022 17:15:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-44</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Hopefully fixed.</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/43">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/43</link>
        <pubDate>Sat, 26 Nov 2022 08:09:40 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-43</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> I almost have a working build again for commits, running in to problems cloning the source code modules. Thoughts?</p>
<pre><code class="lang-auto"> * [new tag]         5.1-1      -&gt; 5.1-1
From https://github.com/Whonix/anon-meta-packages
 * branch            d7a64ffa81fa03c431382a00d55b0cb6c8161eb1 -&gt; FETCH_HEAD
From https://github.com/Kicksecure/anon-apt-sources-list
 * branch            a4e0d9935a6c9ae3a816e7dea32fbc8dc92b4a6d -&gt; FETCH_HEAD
fatal: failed to unpack tree object fbc486e0a1a0b24127180ef901cf643e4a204473
error: Submodule 'packages/kicksecure/sdwdate' could not be updated.
fatal: failed to unpack tree object 76720e379fc8c7f5f2e16ecc0d472b31279a393d
error: Submodule 'packages/kicksecure/systemcheck' could not be updated.
error: Cannot update submodule:
	packages/kicksecure/sdwdate
	packages/kicksecure/systemcheck

Aborting
</code></pre>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/42">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/42</link>
        <pubDate>Sat, 26 Nov 2022 02:55:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-42</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p>It is not quite ready for merge, but the PR can be found here:</p>
<aside class="onebox githubpullrequest" data-onebox-src="https://github.com/Whonix/derivative-maker/pull/2/files">
  <header class="source">

      <a href="https://github.com/Whonix/derivative-maker/pull/2/files" target="_blank" rel="noopener nofollow ugc">github.com/Whonix/derivative-maker</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/derivative-maker/pull/2" target="_blank" rel="noopener nofollow ugc">Dynamic vps creation</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>Whonix:dynamic-vps-creation</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-11-20" data-time="21:02:44" data-timezone="UTC">09:02PM - 20 Nov 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/Mycobee" target="_blank" rel="noopener nofollow ugc">
          <img alt="Mycobee" src="https://avatars.githubusercontent.com/u/41843577?v=4" class="onebox-avatar-inline" width="20" height="20">
          Mycobee
        </a>
      </div>

      <div class="lines" title="30 commits changed 28 files with 307 additions and 157 deletions">
        <a href="https://github.com/Whonix/derivative-maker/pull/2/files" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+307</span>
          <span class="removed">-157</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">## Description

This pull request is a large refactor, that achieves the follo<span class="show-more-container"><a href="https://github.com/Whonix/derivative-maker/pull/2" target="_blank" rel="noopener nofollow ugc" class="show-more">…</a></span><span class="excerpt hidden">wing things

- Dynamically create and destroy digitalocean resources to save money, and use more powerful machines for quicker builds
- Refactor tasks in to roles. Reduce reliance on shell scripts and leverage ansible functionality.
- Dynamically bootstrap VPS with all needed packages, for repeatability and full host automation
- Ensure no lingering VPS resources exist before and after builds, to prevent ballooning cloud bills</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/41">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/41</link>
        <pubDate>Sun, 20 Nov 2022 21:04:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-41</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p>The new branch is now programmatically creating and destroying VPS for builds. These VPS are larger so things are moving faster.</p>
<p>A large refactor to ensure best practices and maintainability was also included in the changes</p>
<p>Next steps:</p>
<ol>
<li>Parallelize builds of Workstation and Gateway for pipeline speed. Hoping that this will result in a huge cutdown in pipeline build times, especially since the pipeline creates a VPS is very large</li>
<li>Install GUI programatiically and run WATS (getting very close to this step. Proof of concept works, it will run)</li>
<li>Fix WATS race condition and User agreement issues (perhaps with orca, perhaps with wats test)</li>
</ol>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/40">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/40</link>
        <pubDate>Sun, 20 Nov 2022 20:59:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-40</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> I have a branch that is very near complete, that should fix CI builds for commits. I have made a lot of progress.</p>
<p>Currently seeing a failure when trying to build with remote packages</p>
<pre><code class="lang-auto">last_failed_bash_command: "$source_code_folder_dist/packages/kicksecure/genmkfile/usr/bin/genmkfile" deb-pkg
############################################################
'
++ unset error_reason
++ '[' ERR = INT ']'
++ '[' ERR = TERM ']'
++ '[' ERR = ERR ']'
++ '[' '!' 0 = 0 ']'
++ true 'INFO: dist_build_auto_retry set to 0 (--retry-max). No auto retry.'
++ unset dist_build_auto_retry_counter
++ true
++ ignore_error=false
++ answer=
++ '[' ERR = ERR ']'
++ '[' true = true ']'
++ true 'INFO: using non-interactive error handler.'
++ break
++ errorhandlermaybeexit ERR
</code></pre>
<p>I will link full logs shortly.</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/39">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/39</link>
        <pubDate>Sun, 20 Nov 2022 20:55:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-39</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Alright, invite accepted.</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/38">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/38</link>
        <pubDate>Fri, 18 Nov 2022 06:40:21 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-38</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p>Done <a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> (your request not the WATS integration)</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/37">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/37</link>
        <pubDate>Thu, 17 Nov 2022 19:17:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-37</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Sounds all good!</p>
<p>Regarding the invite, I’ve sent an e-mail just now.</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/36">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/36</link>
        <pubDate>Thu, 17 Nov 2022 14:13:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-36</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p>red → green → refactor</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/35">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/35</link>
        <pubDate>Wed, 16 Nov 2022 16:48:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-35</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p>Not going to switch to Linode for now. Minimal cost savings for large time overhead. Automated resource creation/deletion will keep costs low enough. If costs become a burden long term, we can discuss switching to Linode long term.</p>
<p>DigitalOcean has a very nice Ansible Collection that interfaces with the API for programatic resource provisioning. I think this Automated resource provisioning justifies the roughly 10% cost savings of Linode</p>
<p>Save $100 a year for 30 hours of very focused dev time doesnt make sense for now, especially given the potential development speed increases of Whonix from automated GUI testing.</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/34">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/34</link>
        <pubDate>Wed, 16 Nov 2022 16:46:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-34</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p>Also <a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> I added you to a DigitalOcean team where the cloudservers will live. Check your email for an invite, you can oauth with github.</p>
<p>I’d like if you joined it, that way in the event something happens where I am not around you have access to the cloud servers. Eventually once everything is working I’d like to transfer the billing to the project itself instead of paying out of pocket <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>For now I am happy to continue paying and considering it donation</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/33">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/33</link>
        <pubDate>Wed, 16 Nov 2022 16:19:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-33</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> I deleted the VPS because I am working on automating the entire process and creating/deleting inventory dynamically. A large VPS makes WATS run much better with the GUI (16gb ram with 4g allocated to each VM).</p>
<p>The cost of this to run full time would be very high, plus things need to be dynamically configured for long term reusability and automation,</p>
<p>It shouldnt be too long until I have builds working again with dynamically generated inventory, but I wanted you to know the situation since builds will be failing for a little while. Calling it for the evening</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/32">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/32</link>
        <pubDate>Wed, 16 Nov 2022 04:04:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-32</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
  </channel>
</rss>
