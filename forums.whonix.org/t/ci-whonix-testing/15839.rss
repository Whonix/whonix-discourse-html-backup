<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>CI Whonix Testing</title>
    <link>http://forums.whonix.org/t/ci-whonix-testing/15839</link>
    <description>Currently, I have a repo working for automated whonix integration testing. This is a continuation of the WATS senior capstone project, and will be integrated in to the new CI stuff I built.

https://github.com/Mycobee/whonix_automated_test_suite

I am creating a new thread to log my efforts and progress, so as to keep things readable and up to date.

@Patrick you had a list of desired test cases somewhere right? Can&#39;t seem to find it at the moment.</description>
    <language>en</language>
    <lastBuildDate>Sat, 26 Nov 2022 02:55:24 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/ci-whonix-testing/15839.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> I almost have a working build again for commits, running in to problems cloning the source code modules. Thoughts?</p>
<pre><code class="lang-auto"> * [new tag]         5.1-1      -&gt; 5.1-1
From https://github.com/Whonix/anon-meta-packages
 * branch            d7a64ffa81fa03c431382a00d55b0cb6c8161eb1 -&gt; FETCH_HEAD
From https://github.com/Kicksecure/anon-apt-sources-list
 * branch            a4e0d9935a6c9ae3a816e7dea32fbc8dc92b4a6d -&gt; FETCH_HEAD
fatal: failed to unpack tree object fbc486e0a1a0b24127180ef901cf643e4a204473
error: Submodule 'packages/kicksecure/sdwdate' could not be updated.
fatal: failed to unpack tree object 76720e379fc8c7f5f2e16ecc0d472b31279a393d
error: Submodule 'packages/kicksecure/systemcheck' could not be updated.
error: Cannot update submodule:
	packages/kicksecure/sdwdate
	packages/kicksecure/systemcheck

Aborting
</code></pre>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/42">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/42</link>
        <pubDate>Sat, 26 Nov 2022 02:55:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-42</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p>It is not quite ready for merge, but the PR can be found here:</p>
<aside class="onebox githubpullrequest" data-onebox-src="https://github.com/Whonix/derivative-maker/pull/2/files">
  <header class="source">

      <a href="https://github.com/Whonix/derivative-maker/pull/2/files" target="_blank" rel="noopener nofollow ugc">github.com/Whonix/derivative-maker</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/derivative-maker/pull/2" target="_blank" rel="noopener nofollow ugc">Dynamic vps creation</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>Whonix:dynamic-vps-creation</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-11-20" data-time="21:02:44" data-timezone="UTC">09:02PM - 20 Nov 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/Mycobee" target="_blank" rel="noopener nofollow ugc">
          <img alt="Mycobee" src="https://avatars.githubusercontent.com/u/41843577?v=4" class="onebox-avatar-inline" width="20" height="20">
          Mycobee
        </a>
      </div>

      <div class="lines" title="30 commits changed 28 files with 307 additions and 157 deletions">
        <a href="https://github.com/Whonix/derivative-maker/pull/2/files" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+307</span>
          <span class="removed">-157</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">## Description

This pull request is a large refactor, that achieves the follo<span class="show-more-container"><a href="https://github.com/Whonix/derivative-maker/pull/2" target="_blank" rel="noopener nofollow ugc" class="show-more">…</a></span><span class="excerpt hidden">wing things

- Dynamically create and destroy digitalocean resources to save money, and use more powerful machines for quicker builds
- Refactor tasks in to roles. Reduce reliance on shell scripts and leverage ansible functionality.
- Dynamically bootstrap VPS with all needed packages, for repeatability and full host automation
- Ensure no lingering VPS resources exist before and after builds, to prevent ballooning cloud bills</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/41">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/41</link>
        <pubDate>Sun, 20 Nov 2022 21:04:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-41</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p>The new branch is now programmatically creating and destroying VPS for builds. These VPS are larger so things are moving faster.</p>
<p>A large refactor to ensure best practices and maintainability was also included in the changes</p>
<p>Next steps:</p>
<ol>
<li>Parallelize builds of Workstation and Gateway for pipeline speed. Hoping that this will result in a huge cutdown in pipeline build times, especially since the pipeline creates a VPS is very large</li>
<li>Install GUI programatiically and run WATS (getting very close to this step. Proof of concept works, it will run)</li>
<li>Fix WATS race condition and User agreement issues (perhaps with orca, perhaps with wats test)</li>
</ol>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/40">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/40</link>
        <pubDate>Sun, 20 Nov 2022 20:59:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-40</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> I have a branch that is very near complete, that should fix CI builds for commits. I have made a lot of progress.</p>
<p>Currently seeing a failure when trying to build with remote packages</p>
<pre><code class="lang-auto">last_failed_bash_command: "$source_code_folder_dist/packages/kicksecure/genmkfile/usr/bin/genmkfile" deb-pkg
############################################################
'
++ unset error_reason
++ '[' ERR = INT ']'
++ '[' ERR = TERM ']'
++ '[' ERR = ERR ']'
++ '[' '!' 0 = 0 ']'
++ true 'INFO: dist_build_auto_retry set to 0 (--retry-max). No auto retry.'
++ unset dist_build_auto_retry_counter
++ true
++ ignore_error=false
++ answer=
++ '[' ERR = ERR ']'
++ '[' true = true ']'
++ true 'INFO: using non-interactive error handler.'
++ break
++ errorhandlermaybeexit ERR
</code></pre>
<p>I will link full logs shortly.</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/39">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/39</link>
        <pubDate>Sun, 20 Nov 2022 20:55:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-39</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Alright, invite accepted.</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/38">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/38</link>
        <pubDate>Fri, 18 Nov 2022 06:40:21 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-38</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p>Done <a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> (your request not the WATS integration)</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/37">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/37</link>
        <pubDate>Thu, 17 Nov 2022 19:17:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-37</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Sounds all good!</p>
<p>Regarding the invite, I’ve sent an e-mail just now.</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/36">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/36</link>
        <pubDate>Thu, 17 Nov 2022 14:13:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-36</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p>red → green → refactor</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/35">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/35</link>
        <pubDate>Wed, 16 Nov 2022 16:48:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-35</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p>Not going to switch to Linode for now. Minimal cost savings for large time overhead. Automated resource creation/deletion will keep costs low enough. If costs become a burden long term, we can discuss switching to Linode long term.</p>
<p>DigitalOcean has a very nice Ansible Collection that interfaces with the API for programatic resource provisioning. I think this Automated resource provisioning justifies the roughly 10% cost savings of Linode</p>
<p>Save $100 a year for 30 hours of very focused dev time doesnt make sense for now, especially given the potential development speed increases of Whonix from automated GUI testing.</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/34">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/34</link>
        <pubDate>Wed, 16 Nov 2022 16:46:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-34</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p>Also <a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> I added you to a DigitalOcean team where the cloudservers will live. Check your email for an invite, you can oauth with github.</p>
<p>I’d like if you joined it, that way in the event something happens where I am not around you have access to the cloud servers. Eventually once everything is working I’d like to transfer the billing to the project itself instead of paying out of pocket <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>For now I am happy to continue paying and considering it donation</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/33">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/33</link>
        <pubDate>Wed, 16 Nov 2022 16:19:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-33</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> I deleted the VPS because I am working on automating the entire process and creating/deleting inventory dynamically. A large VPS makes WATS run much better with the GUI (16gb ram with 4g allocated to each VM).</p>
<p>The cost of this to run full time would be very high, plus things need to be dynamically configured for long term reusability and automation,</p>
<p>It shouldnt be too long until I have builds working again with dynamically generated inventory, but I wanted you to know the situation since builds will be failing for a little while. Calling it for the evening</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/32">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/32</link>
        <pubDate>Wed, 16 Nov 2022 04:04:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-32</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p>Test suite running programmatically <img src="//forums.whonix.org/images/emoji/twitter/sunglasses.png?v=12" title=":sunglasses:" class="emoji" alt=":sunglasses:"></p>
<p>This is very good news ! It will work!</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/31">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/31</link>
        <pubDate>Wed, 16 Nov 2022 02:10:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-31</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="bee" data-post="28" data-topic="15839">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/bee/40/2338_2.png" class="avatar"> bee:</div>
<blockquote>
<p>Im sorry this is taking so long <a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> , it ended up being much more complicated than anticipated</p>
</blockquote>
</aside>
<p>No worries at all! No expectations here on my side. I am just patiently waiting and happy if there’s any positive surprises. Thank you for all your work!</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/30">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/30</link>
        <pubDate>Tue, 15 Nov 2022 15:29:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-30</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p>Lastly, in the event I am not a good enough engineer to make the GUI testing work, I can definitely spin up some shell testing to check Tor network connectivity, proper system functionality, etc.</p>
<p>But i am going to fight hard to avoid that outcome</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/29">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/29</link>
        <pubDate>Sun, 13 Nov 2022 20:27:07 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-29</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p>And before i do too much, i need to play with dogtail and ensure it can control the VM guis from the host. Proof of concept required in order for any of this GUI testing to work.</p>
<p>But i am going to figure out the auto generation of VMs because it will save me some money in the meanwhile.</p>
<p>Im sorry this is taking so long <a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> , it ended up being much more complicated than anticipated</p>
<p>But for now at least we have CI to ensure the builds dont break.</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/28">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/28</link>
        <pubDate>Sun, 13 Nov 2022 20:22:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-28</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="26" data-topic="15839">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>You mean WATS? If so…</p>
</blockquote>
</aside>
<p>Yes. Sorry some of the above posts were rubberducking at midnight, and a good nights sleep gave me a lot of much needed clarity. I was very frustrated but see a solution now.</p>
<p>I like the idea of having the WATS test everything, so having it click through the user agreements and setup makes a lot of sense.</p>
<p>I am going to try to avoid SSH-ing in to the Whonix VMs for now, too much config to automate if i can just run dogtail on the host and make it point &amp; click.</p>
<p>For now I am changing my strategy and prioritization, because it makes more sense.</p>
<h3>
<a name="new-strategy-1" class="anchor" href="http://forums.whonix.org#new-strategy-1"></a>New Strategy</h3>
<h4>
<a name="automated-host-setup-and-teardown-2" class="anchor" href="http://forums.whonix.org#automated-host-setup-and-teardown-2"></a>Automated Host Setup and Teardown</h4>
<p>I am going to focus on using the digitalocean API to build the host ENTIRELY from scratch, and tear down at end of build. I will also have it create a snapshot automatically so for subsequent runs to be faster.</p>
<p>This step is important because the GUI setup and everything <em>must</em> be the exact same and automated to avoid flakiness. We need it to be reproducible anywhere so in the event something happens to me, the suite doesn’t end up abandoned.</p>
<p>Also will save lots of money using a big server. I will write logic to prevent duplicating instances too, and do it all on my account so no risk of crazy accidental cost to whonix.</p>
<h4>
<a name="create-lightweight-vps-setup-for-commits-3" class="anchor" href="http://forums.whonix.org#create-lightweight-vps-setup-for-commits-3"></a>Create Lightweight VPS setup for Commits</h4>
<p>When a developer pushes a commit, create 2 VPS machines that are much smaller, 2gb of ram or so without GUI, have one build the workstation and one build the gateway in parallel. No WATS</p>
<p>When a tag gets pushed, do it on the single beefed up VPS with GUI, run WATS</p>
<h4>
<a name="wats-rework-4" class="anchor" href="http://forums.whonix.org#wats-rework-4"></a>WATS rework</h4>
<p>Rework WATS to run inside of the host using dogtail to control the GUIs, instead of the workstation. This is the easiest way to solve the issue of running WATS for now, and much easier than using VBoxManage which is clunky and not working with XFCE in the guest machines.</p>
<h4>
<a name="document-5" class="anchor" href="http://forums.whonix.org#document-5"></a>Document</h4>
<p>Document everything very well with diagrams and specific layout of how it works, for future maintainability.</p>
<h4>
<a name="setup-for-collaboration-stretch-goal-6" class="anchor" href="http://forums.whonix.org#setup-for-collaboration-stretch-goal-6"></a>Setup for collaboration (stretch goal)</h4>
<p>Figure out how to make all of it run locally in a single environment so people can collaborate more easily on test cases. God only knows how much of a challenge this could be. Maybe not so bad if it is possible to run whonix VMs inside of a debian virtualbox VM (like the movie Inception… dream in a dream). Or perhaps build it to a single debian ISO that ran on a USB or something.</p>
<p>Either way, not worth worrying about until the thing works</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/27">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/27</link>
        <pubDate>Sun, 13 Nov 2022 20:13:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-27</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="bee" data-post="21" data-topic="15839">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/bee/40/2338_2.png" class="avatar"> bee:</div>
<blockquote>
<p>A new VM build stalls because of this.</p>
</blockquote>
</aside>
<p>The build itself stalls? You mean WATS? If so…</p>
<aside class="quote no-group" data-username="bee" data-post="21" data-topic="15839">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/bee/40/2338_2.png" class="avatar"> bee:</div>
<blockquote>
<p>is there a way to programmatically (via CLI) get rid of all the “Understood” boxes and set the gateway VM to connect without bridges?</p>
</blockquote>
</aside>
<p>There is <code>easo</code> which is an abbreviation for easyorca. Was developed for a different context but might be handy here.</p>
<pre><code>easo
</code></pre>
<p>[1] But that command has to be run inside the VM.</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.kicksecure.com/wiki/Orca">
  <header class="source">
      <img src="https://www.kicksecure.com/w/images/4/45/Kicksecure-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.kicksecure.com/wiki/Orca" target="_blank" rel="noopener" title="10:05AM - 29 August 2022">Kicksecure – 29 Aug 22</a>
  </header>

  <article class="onebox-body">
    <img src="https://www.kicksecure.com/w/images/5/5a/Orcascreenreader131233.png" class="thumbnail onebox-avatar" width="500" height="500">

<h3><a href="https://www.kicksecure.com/wiki/Orca" target="_blank" rel="noopener">Orca Screen Reader</a></h3>

  <p>Using the Orca Screen Reader in Kicksecure ™ Virtual Machines</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Does this still work? Does this help? If broken, that I could certainly fix and/or adjust for the CI purpose.</p>
<p>On the other hand, the setup-dist-wizard (understood boxes) and anon-connection-wizard could be considered part of stuff that should be CI tested. But if difficult, headache, then also a solution which skips that part (by grammatically accepting it).</p>
<p>[1] Do you need a command to programatically accept disclaimers (setup-wizard-dist), connect to public Tor network (anon-connection-wizard) that can be run from outside the VM? That might be possible too.</p>
<p>Would probably be based on configuration an extra VirtualBox setting on the host operating system VBoxManage getextradata / setextradata and then inside the VM reacting to it accordingly such as starting an inside VM shell script or program.</p>
<p>Not sure needed. VBoxManage can already be used way to execute shell commands inside VM. So that could be used to run <code>easo</code>.</p>
<aside class="quote no-group" data-username="bee" data-post="22" data-topic="15839">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/bee/40/2338_2.png" class="avatar"> bee:</div>
<blockquote>
<p>Another possibility is setting up X11 forwarding SSH from host to workstation through gateway, using VBoxManage to configure it.</p>
</blockquote>
</aside>
<p>It’s possible to SSH into Whonix-Workstation. Not tested for a long time, not sure how easy/reliable it is. See also:</p>
<ul>
<li><a href="https://www.whonix.org/wiki/File_Transfer#SSH_into_Whonix-Gateway_.E2.84.A2">File Transfer - Whonix chapter SSH into Whonix-Gateway in Whonix wiki</a></li>
<li><a href="https://www.whonix.org/wiki/File_Transfer#SSH_into_Whonix-Workstation_.E2.84.A2">File Transfer - Whonix chapter SSH into Whonix-Workstation in Whonix wiki</a></li>
<li><a href="https://www.whonix.org/wiki/Sshfs_into_Whonix-Workstation" class="inline-onebox">SSHFS into Whonix-Workstation</a></li>
</ul>
<aside class="quote no-group" data-username="bee" data-post="22" data-topic="15839">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/bee/40/2338_2.png" class="avatar"> bee:</div>
<blockquote>
<p>Is there a way to run a command INSIDE a GUI XFCE shell from an SSH connection?</p>
</blockquote>
</aside>
<p>I don’t understand.<br>
You mean inside a Whonix-Gateway Xfce or Whonix-Workstation Xfce. You mean…</p>
<ol>
<li>
<p>ssh into Whonix-Gateway Xfce</p>
</li>
<li>
<p>VNC from host into Whonix-Gateway Xfce</p>
</li>
</ol>
<p>?</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/26">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/26</link>
        <pubDate>Sun, 13 Nov 2022 05:59:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-26</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p>thank u 4 attending my ted talk</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/25">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/25</link>
        <pubDate>Fri, 11 Nov 2022 15:51:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-25</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p>I have X11 forwarding set up from CLI via SSH, so I have a new idea. It will probably take a bit of time but I think the best idea is to run WATS from the host instead of the VM</p>
<p>So basically I will have to rework the Dogtail stuff to run from the host, click inside of the workstation, and run the GUI testing like that.</p>
<p>This is going to be a pain in the ass but at least there is a path to move forward. I also imagine these tests are going to be pretty flakey with a manually configured host (which is how I set up GUI/vncserver/etc). I will have to add scripts in to ansible to set up <strong>everything</strong> from a brand new VM to ensure it behaves exactly the same every time.</p>
<p></p><div class="lightbox-wrapper"><a class="lightbox" href="//forums.whonix.org/uploads/default/original/2X/3/3b5fd513bfcde13207106c953a5f176a7a5a4819.png" data-download-href="//forums.whonix.org/uploads/default/3b5fd513bfcde13207106c953a5f176a7a5a4819" title="Screen Shot 2022-11-11 at 8.49.33 AM"><img src="//forums.whonix.org/uploads/default/original/2X/3/3b5fd513bfcde13207106c953a5f176a7a5a4819.png" alt="Screen Shot 2022-11-11 at 8.49.33 AM" data-base62-sha1="8tfupNsSLyO3mfMusTthtvTuNVD" width="690" height="116" data-small-upload="//forums.whonix.org/uploads/default/optimized/2X/3/3b5fd513bfcde13207106c953a5f176a7a5a4819_2_10x10.png"></a></div><p></p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/24">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/24</link>
        <pubDate>Fri, 11 Nov 2022 15:50:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-24</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p>TL;DR-Headaches, frustration, struggling</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/23</link>
        <pubDate>Fri, 11 Nov 2022 15:10:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-23</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p><strong>Other Ideas:</strong><br>
Maybe I could figure out how to give VNC control to CI, and use Dogtail to write more scripts that click through and run everything. I have no idea if this is possible, but seems less hacky. High effort.</p>
<p>Another possibility is setting up X11 forwarding SSH from host to workstation through gateway, using VBoxManage to configure it. I worry this will lead me to the same GUI issues that I am experiencing currently where the shells are not actually and XFCE shell in the GUI</p>
<p><strong>Possible Fix for GUI problems</strong></p>
<p>Is there a way to run a command INSIDE a GUI XFCE shell from an SSH connection? It would be really nice to just skip the bullshit</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/22</link>
        <pubDate>Fri, 11 Nov 2022 15:10:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-22</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p>Another problem, is there a way to programmatically (via CLI) get rid of all the “Understood” boxes and set the gateway VM to connect without bridges? A new VM build stalls because of this.</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/21</link>
        <pubDate>Fri, 11 Nov 2022 15:03:51 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-21</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p>Running in to problems with the GUI stuff.</p>
<p>I can successfully VNC in, open a terminal, and run WATS. But when I do it remotely via VBoxManage it isnt working because the shell (on the host) is not within the Workstation XFCE display.</p>
<p>Been a huge headache, took a LOT of hours. I am thinking my new strategy is going to be creating a <code>.desktop</code> file and transferring it to Workstation and set it to run WATS on boot. Then after X amount of seconds (I will average how long it takes to run wats and add maybe an extra minute for good luck), have the host grab the WATS logfile, parse, and throw an error if WATS does not pass.</p>
<p>It’s hacky and I am not proud of the strategy, but I am at a loss what to do otherwise. It has been quite a lift getting this running <img src="//forums.whonix.org/images/emoji/twitter/disappointed.png?v=12" title=":disappointed:" class="emoji" alt=":disappointed:"></p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/20</link>
        <pubDate>Fri, 11 Nov 2022 15:02:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-20</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>A post was split to a new topic: <a href="http://forums.whonix.org/t/github-accelerator/15942">GitHub Accelerator</a></p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/19</link>
        <pubDate>Fri, 11 Nov 2022 06:25:45 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-19</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
      <item>
        <title>CI Whonix Testing</title>
        <dc:creator><![CDATA[bee]]></dc:creator>
        <description><![CDATA[
            <p>Okay so WATS is almost running, a few changes left. I had to create a huge VPS in order for all the VMs to run with GUI (8gb of RAM).</p>
<p>So once I get WATS running, I will create new functionality to automatically provision servers.</p>
<p>Here is the design plan for 2 scenarios</p>
<h3>
<a name="developer-pushes-a-commit-1" class="anchor" href="http://forums.whonix.org#developer-pushes-a-commit-1"></a>Developer pushes a commit</h3>
<ol>
<li>trigger CI job to build commit VMs with <code>--remote-derivative-packages</code>
</li>
<li>check for existing VMs in account</li>
<li>if VMs do not exist, create <strong>2</strong>  very small headless VMs (1gb ram or 2 at most) from template with virtualbox and ssh keys installed</li>
<li>On each VM, build headless workstation and gateway. Do not run WATS</li>
<li>Destroy VPS servers</li>
</ol>
<p>Doing this in a parrallel manner will speed things up, and hopefully get CI jobs for commits to under 30 minutes.</p>
<h3>
<a name="developer-pushes-a-tag-2" class="anchor" href="http://forums.whonix.org#developer-pushes-a-tag-2"></a>Developer pushes a tag</h3>
<ol>
<li>check for existing largefootprint VM. If does not exist, create it. 8gb of RAM, XFCE GUI, Virtualbox, etc.</li>
<li>Build both Workstation and Gateway VMs with GUI, and NO remote packages</li>
<li>Run WATS on VMs.</li>
<li>Destroy VPS</li>
</ol>
<p>This will be a much slower process, probably almost 2 hours to fully test a VM tag with GUI. But this is shorter than manually testing it, and can happen in the background</p>
          <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ci-whonix-testing/15839/18</link>
        <pubDate>Thu, 10 Nov 2022 04:42:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15839-18</guid>
        <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
      </item>
  </channel>
</rss>
