<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode - #10 by Patrick - Development - Whonix Forum</title>
    <meta name="description" content="Update: 
The plan solidified. See this wiki page: 



Old post: 
Related: 

Restrict root access
Disable SUID Binaries
(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better s&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../7708.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode&#39;" href="../7708.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/multiple-boot-modes-for-better-security-persistent-user-live-user-persistent-secureadmin-persistent-superadmin-persistent-recovery-mode/7708/10" />
<meta name="twitter:url" content="https://forums.whonix.org/t/multiple-boot-modes-for-better-security-persistent-user-live-user-persistent-secureadmin-persistent-superadmin-persistent-recovery-mode/7708/10" />
<meta property="og:title" content="multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode" />
<meta name="twitter:title" content="multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode" />
<meta property="og:description" content="Yes. Problem. Using this forum thread for that: Where should the Tor Browser folder be placed?" />
<meta name="twitter:description" content="Yes. Problem. Using this forum thread for that: Where should the Tor Browser folder be placed?" />
<meta property="article:published_time" content="2019-09-11T08:19:51+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="next" href="../77084658.html?page=2">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../7708.html">multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../../tag/component_security.html' class='discourse-tag' rel="tag">component_security</a>, 
            <a href='../../../tag/status_open_issue_todo.html' class='discourse-tag' rel="tag">status_open_issue_todo</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-15T20:52:34Z' class='post-time'>
                July 15, 2019,  8:52pm
              </time>
              <meta itemprop='dateModified' content='2019-07-15T20:52:34Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubissue">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/tasket/Qubes-VM-hardening/issues/33" target="_blank" rel="nofollow noopener">github.com/tasket/Qubes-VM-hardening</a>
  </header>
  <article class="onebox-body">
    <a href="../../../../external.html?link=https://github.com/adrelanos" rel="nofollow noopener">
<img src="../../../../external.html?link=https://avatars1.githubusercontent.com/u/1985040?v=2&amp;s=96" class="thumbnail onebox-avatar" width="60" height="60">
</a>

<h4><a href="../../../../external.html?link=https://github.com/tasket/Qubes-VM-hardening/issues/33" target="_blank" rel="nofollow noopener">Issue: port to plain Debian (non-Qubes)</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="../../../../external.html?link=https://github.com/tasket/Qubes-VM-hardening/issues/33" target="_blank" rel="nofollow noopener">2019-07-15</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Wondering if this could be useful for Debian too.
(Not only Debian TemplateBased AppVMs in Qubes. I mean "normal" Debian systems without...</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>
          <meta itemprop='keywords' content='component_security, status_open_issue_todo'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick_mobile'><span itemprop='name'>Patrick_mobile</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-08T09:21:27Z' class='post-time'>
                September 8, 2019,  9:21am
              </time>
              <meta itemprop='dateModified' content='2019-09-08T09:21:27Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>boot mode: persistent home but readonly root</p>
<p><a href="../../../../external.html?link=https://wiki.debian.org/ReadonlyRoot" class="onebox" target="_blank" rel="nofollow noopener">https://wiki.debian.org/ReadonlyRoot</a></p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Algernon'><span itemprop='name'>Algernon</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-08T13:54:19Z' class='post-time'>
                September 8, 2019,  1:54pm
              </time>
              <meta itemprop='dateModified' content='2019-09-08T13:54:19Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>iirc I tried that once and it failed due to something systemd and Xorg not really working. The site is also not really maintained. Could eventually be made to work but the way Debian went is “read-only” + overlayfs for live systems.  / (overlay) in this case is modifiable at runtime but nonpersistent.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="3" />
           <span class='post-likes'>3 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick_mobile'><span itemprop='name'>Patrick_mobile</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-08T14:48:09Z' class='post-time'>
                September 8, 2019,  2:48pm
              </time>
              <meta itemprop='dateModified' content='2019-09-08T14:48:09Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>There is also <code>overlayroot</code>.</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://spin.atomicobject.com/wp-content/themes/spin/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://spin.atomicobject.com/2015/03/10/protecting-ubuntu-root-filesystem/" target="_blank" title="12:00PM - 10 March 2015" rel="nofollow noopener">Atomic Spin – 10 Mar 15</a>
  </header>
  <article class="onebox-body">
    <img src="../../../../external.html?link=https://spin.atomicobject.com/wp-content/uploads/AO-Logo-Wordmark-Color.png" class="thumbnail" width="" height="">

<h3><a href="../../../../external.html?link=https://spin.atomicobject.com/2015/03/10/protecting-ubuntu-root-filesystem/" target="_blank" rel="nofollow noopener">Protecting the Root Filesystem on Ubuntu with Overlayroot</a></h3>

<p>Overlayroot provides a convenient means to protect the root filesystem by using OverlayFS to overlay a read-write tmps on top of a read-only mount.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://github.githubassets.com/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://github.com/chesty/overlayroot" target="_blank" rel="nofollow noopener">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="../../../../external.html?link=https://avatars1.githubusercontent.com/u/194845?s=400&amp;amp;v=4" class="thumbnail" width="" height="">

<h3><a href="../../../../external.html?link=https://github.com/chesty/overlayroot" target="_blank" rel="nofollow noopener">chesty/overlayroot</a></h3>

<p>mounts an overlay file system over root. Contribute to chesty/overlayroot development by creating an account on GitHub.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/iamwho'><span itemprop='name'>iamwho</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-11T04:08:49Z' class='post-time'>
                September 11, 2019,  4:08am
              </time>
              <meta itemprop='dateModified' content='2019-09-11T08:20:12Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>At least two modes:</p>
<ul>
<li>Boot without persistent user data (or no login as user) with system in persistent mode (to update).</li>
<li>Boot with noexec persistent user data and system in live mode for everything else.</li>
</ul>
<p>If there is malware in user data you will have to go out of your way to run it after boot. Of course nobody can stop you if you pipe something evil to bash, but persistent user data should not be executed by accident.<br>
For this to work though “data” could not be all of $HOME because of login scripts ~/.bashrc etc that are sourced.<br>
Perhaps a subdirectory for persistent data which ~/.config etc can link into. This is how Tails works I believe though I haven’t used it recently.<br>
From the point of view of ‘user’ should there be a difference between Whonix in live mode and Tails with persistent data?</p>
<p>Tor Browser is a problem because there is no clear separation between code and data or system and user. The user has to run it to update itself. I believe Tails has a setting for persistent bookmarks but not prefs.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-11T08:19:51Z' class='post-time'>
                September 11, 2019,  8:19am
              </time>
              <meta itemprop='dateModified' content='2019-09-11T08:19:51Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="9" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/i/0ea827/40.png" class="avatar"> iamwho:</div>
<blockquote>
<p>Tor Browser is a problem because there is no clear separation between code and data or system and user.</p>
</blockquote>
</aside>
<p>Yes. Problem. Using this forum thread for that: <a href="../../tor-browser-vs-noexec-where-should-the-tor-browser-folder-be-placed/7787.html" class="inline-onebox">Where should the Tor Browser folder be placed?</a></p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-11T08:27:47Z' class='post-time'>
                September 11, 2019,  8:27am
              </time>
              <meta itemprop='dateModified' content='2019-09-11T08:27:47Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="9" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/i/0ea827/40.png" class="avatar"> iamwho:</div>
<blockquote>
<p>Boot with noexec persistent user data</p>
</blockquote>
</aside>
<p>Noexec doesn’t help much due to scripts not being covered by noexec. (See discussion at the top and <a href="../../../../external.html?link=https://chromium.googlesource.com/chromiumos/docs/+/master/security/noexec_shell_scripts.md" rel="nofollow noopener">https://chromium.googlesource.com/chromiumos/docs/+/master/security/noexec_shell_scripts.md</a> )</p>
<aside class="quote no-group" data-post="9" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/i/0ea827/40.png" class="avatar"> iamwho:</div>
<blockquote>
<p>Boot without persistent user data (or no login as user) with system in persistent mode (to update).</p>
</blockquote>
</aside>
<p>Better no login as user <code>user</code> then. Even noexec, there are settings folders such as XFCE settings folders and others which could (in theory?) be abused to exploit the system.</p>
<p>Better use [A] <a href="../../../../external.html?link=https://www.whonix.org/wiki/Root#Prevent_Malware_from_Sniffing_the_Root_Password" rel="nofollow noopener">https://www.whonix.org/wiki/Root#Prevent_Malware_from_Sniffing_the_Root_Password</a> instead? Perhaps [A] should get its own boot option?</p>
<aside class="quote no-group" data-post="9" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/i/0ea827/40.png" class="avatar"> iamwho:</div>
<blockquote>
<p>From the point of view of ‘user’ should there be a difference between Whonix in live mode and Tails with persistent data?</p>
</blockquote>
</aside>
<p>Not sure Whonix live mode should have an (optional) persistent folder. But kinda unrelated. It could be implemented later if there is such a feature request. For now nobody ever asked about it. Kinda independent from this forum thread.</p>
<aside class="quote no-group" data-post="9" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/i/0ea827/40.png" class="avatar"> iamwho:</div>
<blockquote>
<p>If there is malware in user data you will have to go out of your way to run it after boot. Of course nobody can stop you if you pipe something evil to bash, but persistent user data should not be executed by accident.</p>
</blockquote>
</aside>
<p>This is the idea of</p>
<ul>
<li><a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/VirusForget" rel="nofollow noopener">https://www.whonix.org/wiki/Dev/VirusForget</a></li>
<li><a href="../../../../external.html?link=https://github.com/tasket/Qubes-VM-hardening" rel="nofollow noopener">https://github.com/tasket/Qubes-VM-hardening</a></li>
</ul>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/iamwho'><span itemprop='name'>iamwho</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-11T15:19:22Z' class='post-time'>
                September 11, 2019,  3:19pm
              </time>
              <meta itemprop='dateModified' content='2019-09-11T15:19:22Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="11" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Not sure Whonix live mode should have an (optional) persistent folder. But kinda unrelated. It could be implemented later if there is such a feature request. For now nobody ever asked about it. Kinda independent from this forum thread.</p>
</blockquote>
</aside>
<p>What I mean is live mode with a folder shared through the VM, that would behave like Tails with a persistent volume. The data is just data and should not be automatically processed by anything, noexec is just to help prevent accidents. There should be clear separation between trusted user data (immutable) and untrusted user data (shared folder). I don’t think this requires anything from Whonix. Sorry I’m having a hard time sticking to a thread.<br>
Live mode does not disable shared folders, is that something you’re thinking of? How does live mode work with another virtual drive /dev/sdb etc?<br>
Are you talking about separate grub entries for each mode or flags that can be added to the kernel command line?<br>
With custom entries you could e.g. blacklist vboxguest in persistent mode. But it sounds like live mode is not technically binding so it would be up to the host to ensure shared folder is not accessible while system disk is writable.<br>
Perhaps an option on the grub line to disable root?<br>
Related: is it possible to start a VM with a given grub entry?</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-12T08:35:37Z' class='post-time'>
                September 12, 2019,  8:35am
              </time>
              <meta itemprop='dateModified' content='2019-09-12T08:35:37Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="12" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/i/0ea827/40.png" class="avatar"> iamwho:</div>
<blockquote>
<p>What I mean is live mode with a folder shared through the VM, that would behave like Tails with a persistent volume.</p>
</blockquote>
</aside>
<aside class="quote no-group" data-post="12" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/i/0ea827/40.png" class="avatar"> iamwho:</div>
<blockquote>
<p>Live mode does not disable shared folders, is that something you’re thinking of?</p>
</blockquote>
</aside>
<p>Live mode currently does not disable virtual machine shared folders.</p>
<p>Added to comparison table here:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://www.whonix.org/wiki/Grub-live" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    

<h3><a href="../../../../external.html?link=https://www.whonix.org/wiki/Grub-live" target="_blank" rel="nofollow noopener">Grub-live</a></h3>

<p>Boot your Debian installation into Live Mode. Read-only mode. Make all writes go to RAM instead of the hard disk. This is NOT - YET - an anti-forensic...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>And asked about it here just now:</p>
<aside class="quote" data-post="166" data-topic="3894">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="../../whonix-live-mode-amnesia-amnesic-non-persistent-anti-forensics/3894/166.html">Whonix live mode / amnesia / amnesic / non-persistent / anti-forensics</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Should shared folders of virtual machines be disabled in context of grub-live?
  </blockquote>
</aside>

<aside class="quote no-group" data-post="12" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/i/0ea827/40.png" class="avatar"> iamwho:</div>
<blockquote>
<p>The data is just data and should not be automatically processed by anything,</p>
</blockquote>
</aside>
<p>Agreed. Data in virtual machine shared folder shouldn’t be processed by default. This is already the case. I wouldn’t know what would process it.</p>
<aside class="quote no-group" data-post="12" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/i/0ea827/40.png" class="avatar"> iamwho:</div>
<blockquote>
<p>The data is just data and should not be automatically processed by anything, noexec is just to help prevent accidents.</p>
</blockquote>
</aside>
<p>noexec for shared folder is a good idea. It is already noted here: <a href="../../re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.html" class="inline-onebox">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</a></p>
<aside class="quote no-group" data-post="12" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/i/0ea827/40.png" class="avatar"> iamwho:</div>
<blockquote>
<p>How does live mode work with another virtual drive /dev/sdb etc?</p>
</blockquote>
</aside>
<p>They’re not automatically mounted. A root user or malware with root rights could mount these and write to it. This is illustrated in the comparison table here: <a href="../../../../external.html?link=https://www.whonix.org/wiki/Grub-live" rel="nofollow noopener">https://www.whonix.org/wiki/Grub-live</a></p>
<p>This could be parially taken care of (root user) by booting into non-root mode (this forum thread). A root exploit can always undo that though.</p>
<aside class="quote no-group" data-post="12" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/i/0ea827/40.png" class="avatar"> iamwho:</div>
<blockquote>
<p>Are you talking about separate grub entries for each mode or flags that can be added to the kernel command line?</p>
</blockquote>
</aside>
<p>Yes, that’s the idea.</p>
<aside class="quote no-group" data-post="12" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/i/0ea827/40.png" class="avatar"> iamwho:</div>
<blockquote>
<p>But it sounds like live mode is not technically binding so it would be up to the host to ensure shared folder is not accessible while system disk is writable.</p>
</blockquote>
</aside>
<p>Indeed. Good point. Yes, this should be documented.<br>
[A] Also when work on Whonix Host progressed, we could add a starter/script which will help the user with such configurations for better usability.</p>
<aside class="quote no-group" data-post="12" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/i/0ea827/40.png" class="avatar"> iamwho:</div>
<blockquote>
<p>Perhaps an option on the grub line to disable root?</p>
</blockquote>
</aside>
<p>That’s what this very forum thread is for. Help welcome.</p>
<aside class="quote no-group" data-post="12" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/i/0ea827/40.png" class="avatar"> iamwho:</div>
<blockquote>
<p>Related: is it possible to start a VM with a given grub entry?</p>
</blockquote>
</aside>
<p>Possibly yes. Both, VirtualBox and KVM support serial console.</p>
<ul>
<li><a href="../../serial-console-in-virtualbox/8021.html" class="inline-onebox">Serial Console in VirtualBox</a></li>
<li><a href="../../how-do-i-enter-the-whonix-shell-from-cli/7271.html" class="inline-onebox">How do I enter the whonix shell from cli</a></li>
</ul>
<p>Once we have that working, this might be automated with a script. Related to [A].</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Algernon'><span itemprop='name'>Algernon</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-12T16:26:04Z' class='post-time'>
                September 12, 2019,  4:26pm
              </time>
              <meta itemprop='dateModified' content='2019-09-12T16:26:04Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="13" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Agreed. Data in virtual machine shared folder shouldn’t be processed by default. This is already the case. I wouldn’t know what would process it.</p>
</blockquote>
</aside>
<p>There is hopefully no execution going on but certainly some processing/parsing. Otherwise you would not see the mounted folder or its contents nor the attached device.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T16:09:11Z' class='post-time'>
                November 22, 2019,  4:09pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T16:09:11Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Once there is plan, this might be available as a package quickly within a day or two or so. Planning on implementing this soonish.</p>
<p>How would I technically implement a no-root boot mode?</p>
<hr>
<p>Idea 1)</p>
<ul>
<li>at early boot time</li>
<li>use a systemd unit file</li>
<li>if a certain kernel boot parameter such as <code>nosudo=1</code> is set</li>
<li>run as root: <code>delgroup user sudo</code>
</li>
</ul>
<hr>
<ul>
<li>Otherwise if a certain kernel boot parameter such as <code>sudo=1</code> is set
<ul>
<li>run as root: <code>addgroup user sudo</code>
</li>
<li>That seems a bit weird, insecure for those who already followed instructions <a href="../../../../external.html?link=https://www.whonix.org/wiki/Root#Prevent_Malware_from_Sniffing_the_Root_Password"> Prevent Malware from Sniffing the Root Password</a>. Those users wouldn’t want their user <code>user</code> account be added to group <code>sudo</code> behind their back.</li>
</ul>
</li>
</ul>
<hr>
<p>Therefore perhaps the default should be swapped.</p>
<p>Idea 2)</p>
<ul>
<li>New builds of Whonix come without any user account added to the group <code>sudo</code> by default.</li>
<li>How to handle existing users that upgrade? Removal of user from group <code>sudo</code> might be a bit intrusive?</li>
<li>If a certain kernel boot parameter such as <code>nosudo=1</code> is set:
<ul>
<li>run as root: <code>delgroup user sudo</code>
</li>
</ul>
</li>
<li>If a certain kernel boot parameter such as <code>sudo=1</code> is set:
<ul>
<li>run as root: <code>addgroup user sudo</code>
</li>
</ul>
</li>
</ul>
<hr>
<p>Might also clash with security-misc since security-misc will abort to install if there are no users in group <code>sudo</code>.</p>
<p><a href="../../../../external.html?link=https://github.com/Whonix/security-misc/blob/master/debian/security-misc.preinst#L41">https://github.com/Whonix/security-misc/blob/master/debian/security-misc.preinst#L41</a></p>
<hr>
<p>We probably shouldn’t break root login for ssh (for server support, Kicksecure, non-Whonix).</p>
<hr>
<p>(Already done: For <a href="../../../../external.html?link=https://www.whonix.org/wiki/Root#Rationale">security reasons</a> the root account is locked and expired by default in Whonix ™ <code>15.0.0.3.6</code> and above.)</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T16:34:42Z' class='post-time'>
                November 22, 2019,  4:34pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T16:34:42Z'>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="16" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>How to handle existing users that upgrade? Removal of user from group <code>sudo</code> might be a bit intrusive?</p>
</blockquote>
</aside>
<p>Most users seem to prefer security anyway.</p>
<aside class="onebox twitterstatus">
  <header class="source">
      <a href="../../../../external.html?link=https://twitter.com/Whonix/status/1196137962888556544" target="_blank">twitter.com</a>
  </header>
  <article class="onebox-body">
    <img src="../../../../external.html?link=https://pbs.twimg.com/profile_images/747394861549162496/q6YdTSix_400x400.jpg" class="thumbnail onebox-avatar" width="60" height="60">

<h4><a href="../../../../external.html?link=https://twitter.com/Whonix/status/1196137962888556544" target="_blank">Whonix ™ (Whonix)</a></h4>

<div class="tweet"> Which one is more important?

Security of the operating system (OS) or being able to customize the operating system?

Choose one.

^PS</div>

<div class="date">
  <a href="../../../../external.html?link=https://twitter.com/Whonix/status/1196137962888556544" target="_blank">6:48 PM - 17 Nov 2019</a>
    <span class="like">
      <svg viewbox="0 0 512 512" width="14px" height="16px" aria-hidden="true">
        <path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"></path>
      </svg> 5
    </span>
    <span class="retweet">
      <svg viewbox="0 0 640 512" width="14px" height="16px" aria-hidden="true">
        <path d="M629.657 343.598L528.971 444.284c-9.373 9.372-24.568 9.372-33.941 0L394.343 343.598c-9.373-9.373-9.373-24.569 0-33.941l10.823-10.823c9.562-9.562 25.133-9.34 34.419.492L480 342.118V160H292.451a24.005 24.005 0 0 1-16.971-7.029l-16-16C244.361 121.851 255.069 96 276.451 96H520c13.255 0 24 10.745 24 24v222.118l40.416-42.792c9.285-9.831 24.856-10.054 34.419-.492l10.823 10.823c9.372 9.372 9.372 24.569-.001 33.941zm-265.138 15.431A23.999 23.999 0 0 0 347.548 352H160V169.881l40.416 42.792c9.286 9.831 24.856 10.054 34.419.491l10.822-10.822c9.373-9.373 9.373-24.569 0-33.941L144.971 67.716c-9.373-9.373-24.569-9.373-33.941 0L10.343 168.402c-9.373 9.373-9.373 24.569 0 33.941l10.822 10.822c9.562 9.562 25.133 9.34 34.419-.491L96 169.881V392c0 13.255 10.745 24 24 24h243.549c21.382 0 32.09-25.851 16.971-40.971l-16.001-16z"></path>
      </svg> 3
    </span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Maybe make another poll specifically about root.</p>
<aside class="quote no-group" data-post="16" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>We probably shouldn’t break root login for ssh (for server support, Kicksecure, non-Whonix).</p>
</blockquote>
</aside>
<p>Root login via ssh should be disabled either way. Allowing someone to remotely login as root isn’t a good idea.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T17:46:08Z' class='post-time'>
                November 22, 2019,  5:46pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T17:46:08Z'>
          <span itemprop='position'>#18</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="17" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Most users seem to prefer security anyway.</p>
<p><a href="../../../../external.html?link=https://twitter.com/Whonix/status/1196137962888556544">twitter.com</a></p>
<p><img src="../../../../external.html?link=https://pbs.twimg.com/profile_images/747394861549162496/q6YdTSix_400x400.jpg" alt width="60" height="60"></p>
<h4><a href="../../../../external.html?link=https://twitter.com/Whonix/status/1196137962888556544">Whonix ™ (Whonix)</a></h4>
</blockquote>
</aside>
<p>That was about security vs customization. Also that was a really abstract questions. If users really understand what’s at stake, they might decide otherwise.</p>
<p>This is not so much customization. This is more about security vs inconvenience.</p>
<p>This is more about security vs stability / bad surprises. Upgrade -&gt; cannot use “sudo” anymore. Terminal-only users couldn’t even run “sudo reboot”.</p>
<aside class="quote no-group" data-post="17" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Root login via ssh should be disabled either way. Allowing someone to remotely login as root isn’t a good idea.</p>
</blockquote>
</aside>
<p>Maybe. Well, Whonix / Kicksecure don’t come with openssh-server installed by default. OpenSSH root login allowed by default or not setting doesn’t change much. Should change anyhow? How? Modify files in <code>/etc/ssh</code>? There is no configuration snippet drop-in folder ("<code>.d</code>"). Seems really intrusive -&gt; <a href="../../../../external.html?link=https://www.whonix.org/wiki/Configuration_Files#dpkg_interactive_conflict_resolution_dialog">dpkg interactive conflict resolution dialog</a></p>
<p>( <a href="../../../../external.html?link=https://www.whonix.org/wiki/Configuration_Files">https://www.whonix.org/wiki/Configuration_Files</a> )</p>
<p>Users who have openssh-server installed and then install security-misc or some other package are a different case.</p>
<p>We had a case we didn’t foresee a case where a user got locked out from his own server: <a href="../../is-security-misc-suitable-for-hardening-bridges-and-relays/8299/4.html" class="inline-onebox">Is security-misc suitable for hardening bridges and relays?</a></p>
<p>We’re already locking <code>su</code>. (<a href="../../restrict-root-access/7658.html" class="inline-onebox">Restrict root access</a>)</p>
<p>Some users don’t use <code>sudo</code>. Maybe we should tell them they should. Maybe sane to require that.</p>
<p>Now we’re considering to remove user <code>user</code> from group <code>sudo</code> through an upgrade.</p>
<p>I am not saying we shouldn’t do it. Just thinking it all through aloud.</p>
<p>How much security would we gain from that anyhow? Let’s assume most times users boot into user <code>user</code> with sudo disabled. Ok… Let’s say their user account gets comprised through a remote exploit. That malware would have a harder time to break out since no easy escalation to root level, kernel level. Let’s say the malware starts itself through ~/.bashsrc or any of the many dotfiles. Then the user wants to upgrade and reboots in <code>sudo=1</code> mode. The user now enters its user <code>user</code> password and gains root rights by using sudo. Boom. Malware can hijack that / sniff the password and become root too. We don’t get that much security from that?</p>
<p>How do we prevent that? Rely on <a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/VirusForget">VirusForget</a>? 1) doesn’t exist. 2) not sure it will be finished 3) not that great, might be holes, not sure yet.</p>
<p>Instead, I am re-thinking about the old idea of user <code>admin</code> as per this very post: <a href="../../restrict-root-access/7658/14.html" class="inline-onebox">Restrict root access</a>.</p>
<aside class="quote no-group" data-post="17" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Maybe make another poll specifically about root.</p>
</blockquote>
</aside>
<p>Yes, once the plan is getting more specific, this will be a good idea. (Specifically if going the user <code>admin</code> route.)</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T17:56:42Z' class='post-time'>
                November 22, 2019,  5:56pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T17:56:42Z'>
          <span itemprop='position'>#19</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="18" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>That was about security vs customization. Also that was a really abstract questions. If users really understand what’s at stake, they might decide otherwise.</p>
<p>This is not so much customization. This is more about security vs inconvenience.</p>
</blockquote>
</aside>
<p>Whonix comes preconfigured so root isn’t really needed for the average user for anything other than customization or debugging.</p>
<aside class="quote no-group" data-post="18" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Upgrade -&gt; cannot use “sudo” anymore</p>
</blockquote>
</aside>
<p><code>apt-get-update-plus</code> has a sudoers exception for that.</p>
<aside class="quote no-group" data-post="18" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Terminal-only users couldn’t even run “sudo reboot”.</p>
</blockquote>
</aside>
<p>There’s no need to use sudo for that anyway. Unprivileged users can still run <code>/sbin/reboot</code>. The only issue is that /sbin isn’t part of $PATH by default (an alias can be added for <code>reboot</code> if needed).</p>
<aside class="quote no-group" data-post="18" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Maybe. Well, Whonix / Kicksecure don’t come with openssh-server installed by default. OpenSSH root login allowed by default or not setting doesn’t change much. Should change anyhow? How? Modify files in <code>/etc/ssh</code> ? There is no configuration snippet drop-in folder (" <code>.d</code> "). Seems really intrusive</p>
</blockquote>
</aside>
<p>Best option seems to be using <code>str_replace</code> on the openssh config file. It’s a bit hacky but better than just replacing the entire file.</p>
<p>I don’t use ssh much so I don’t know if there’s any better option.</p>
<p>Or, just not include it in security-misc since Whonix doesn’t have ssh anyway. We can leave configuring specific applications to be the user’s job.</p>
<aside class="quote no-group" data-post="18" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Then the user wants to upgrade and reboots in <code>sudo=1</code> mode. The user now enters its user <code>user</code> password and gains root rights by using sudo. Boom. Malware can hijack that / sniff the password and become root too. We don’t get that much security from that?</p>
</blockquote>
</aside>
<p>We can add a warning to sudo mode and inform the user of the consequences of what they’re doing.</p>
<p>Restricting sudo is a security advantage. The only problem is if the user messes it up themselves which isn’t really on us.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T18:23:59Z' class='post-time'>
                November 22, 2019,  6:23pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T18:23:59Z'>
          <span itemprop='position'>#20</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Having boot modes</p>
<ul>
<li>
<code>nosudo=1</code> -&gt; <code>delgroup user sudo</code>
</li>
<li>
<code>sudo=1</code> -&gt; <code>addgroup user sudo</code>
</li>
</ul>
<p>wouldn’t improve security too much. At least wouldn’t help much for users who install some custom package every now and then. (They need to use <code>sudo</code> for that.) Let alone add custom (third party) APT sources list. (Requires root to edit sources.list.d.)<br>
Mostly would help users who do follow <a href="../../../../external.html?link=https://www.whonix.org/wiki/Root#Prevent_Malware_from_Sniffing_the_Root_Password">Prevent Malware from Sniffing the Root Password</a>.<br>
(But these would not even want <code>addgroup user sudo</code>.)</p>
<p>Not sure it’s even worth it to implement boot modes <code>nosudo=1</code> / <code>sudo=1</code>?</p>
<p>(Just called <code>nosudo=1</code> / <code>sudo=1</code> for discussion. Would be presented to user in better terminology.)</p>
<p>Comparison with Tails:<br>
Tails boots always fresh, malware clean. Considered non-compromised.<br>
(Just assuming it for sake of discussion not considering firmware trojans etc. When boot from read-only media boot.)<br>
Tails boots by default without root access. Setting a root password is an opt-in. Tails an edge here.</p>
<p>There are kinda two paths there.</p>
<ul>
<li>[1] Allowing more and more things (apt dist-upgrade, install packages from <a href="../../../../external.html?link=http://packages.debian.org/">packages.debian.org</a>) without need to gain root / entering sudo password. Android does that. Users can do a lot things there without root. For example, setting up VPNs.</li>
<li>[2] Make users boot into user <code>admin</code>.</li>
</ul>
<p>These two are not really exclusive. [1] will always be limited. A lot effort to implement. Might never get there.</p>
<aside class="quote no-group quote-modified" data-post="19" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<blockquote>
<p>Upgrade -&gt; cannot use “sudo” anymore</p>
</blockquote>
<p><code>apt-get-update-plus</code> has a sudoers exception for that.</p>
</blockquote>
</aside>
<p>I typed too little. I meant, after users just run “sudo apt-get dist-upgrade” or “upgrade-nonroot” they can no longer use “sudo”. Kinda unexpected, breaking usability change. Considered unstable by users most likely.</p>
<aside class="quote no-group" data-post="19" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Whonix comes preconfigured so root isn’t really needed for the average user for anything other than customization or debugging.</p>
</blockquote>
</aside>
<p>That would mean “boot into user admin” is an OK solution too?</p>
<aside class="quote no-group" data-post="19" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>We can add a warning to sudo mode and inform the user of the consequences of what they’re doing.</p>
</blockquote>
</aside>
<p>Sounds good.</p>
<aside class="quote no-group" data-post="19" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Restricting sudo is a security advantage. The only problem is if the user messes it up themselves which isn’t really on us.</p>
</blockquote>
</aside>
<p>Yes. However, it’s on us to provide easy, secure work flows. I think "boot into user <code>admin</code>" is a nice clear way to separate things. Will describe more clearly soon.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T18:34:56Z' class='post-time'>
                November 22, 2019,  6:34pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T18:34:56Z'>
          <span itemprop='position'>#21</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="20" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Not sure it’s even worth it to implement boot modes <code>nosudo=1</code> / <code>sudo=1</code> ?</p>
</blockquote>
</aside>
<p>An alternative solution would be to add removing the <code>sudo</code> group to the hardening guides instead of making boot modes.</p>
<aside class="quote no-group" data-post="20" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Allowing more and more things (apt dist-upgrade, install packages from <a href="../../../../external.html?link=http://packages.debian.org/">packages.debian.org</a>) without need to gain root / entering sudo password. Android does that. Users can do a lot things there without root. For example, setting up VPNs.</p>
</blockquote>
</aside>
<p>I don’t like the sound of that too much. Android is really different from Debian. If we allow unprivileged users to install packages, an attacker can install whatever they want from the repos to add attack surface.</p>
<p>e.g. 1: attacker installs package with setuid binary -&gt; exploits vulnerability -&gt; gains priv esc.</p>
<p>e.g. 2: attacker installs kernel module from the repos which adds kernel attack surface -&gt; exploits vulnerability in new module.</p>
<p>Meanwhile android apps cannot add any new kernel attack surface or increase the chances of priv esc. All apps are fully sandboxed, running as different users with strict SELinux policies and seccomp filters. It isn’t really comparable.</p>
<aside class="quote no-group" data-post="20" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>That would mean “boot into user admin” is an OK solution too?</p>
</blockquote>
</aside>
<p>The admin user is better but not the best. An attacker can still login as the admin user too.</p>
<p>Btw by “boot” do you mean “login” (as a user called “admin” with sudo privileges) or are you talking about a boot mode? I assume you meant “login”.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T18:46:22Z' class='post-time'>
                November 22, 2019,  6:46pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T18:46:22Z'>
          <span itemprop='position'>#22</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The <code>Separate User "admin" Plan</code>.</p>
<ul>
<li>Add a new user <code>admin</code>.</li>
<li>User <code>user</code> not being member of group <code>sudo</code> / <code>su</code> etc.</li>
<li>Root login stays disabled. (Already done.) (<a href="../../restrict-root-access/7658/1.html" class="inline-onebox">Restrict root access</a>)</li>
<li>To gain root rights:
<ul>
<li>Users are advised to login as user <code>admin</code> and then use <code>sudo</code> as documented on <a href="../../../../external.html?link=https://www.whonix.org/wiki/Root#Prevent_Malware_from_Sniffing_the_Root_Password">Prevent Malware from Sniffing the Root Password</a>, OR</li>
<li>Boot into “sudo mode”.</li>
</ul>
</li>
<li>No (good) password for user <code>user</code> required. (Except, if SSH login is permitted.)</li>
<li>Good password only required for user <code>admin</code>.</li>
</ul>
<p>Boot into “sudo mode” meaning:<br>
If users choose “sudo mode” in grub boot menu, the system would boot and login the user into user <code>admin</code> rather than user <code>user</code>. User <code>admin</code> would have root. After users are done, these are advised to reboot to continue using user <code>user</code>.<br>
(And those who don’t like it could continue using user <code>admin</code> (bad) or <code>sudo addgroup user sudo</code> (slightly less bad).) [1])</p>
<p>Not sure the cumbersomeness usability wise is acceptable. Could poll about that. Could also poll about various alternatives.</p>
<hr>
<p>[1] Using user <code>user</code> is an anonymity feature. -&gt; <a href="../../../../external.html?link=https://github.com/Whonix/anon-base-files">https://github.com/Whonix/anon-base-files</a></p>
<aside class="quote no-group" data-post="21" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>An attacker can still login as the admin user too.</p>
</blockquote>
</aside>
<p>How? An attacker (let’s say some compromised user account) cannot use <code>su</code> since not member of group <code>sudo</code>. Well, could try to bruteforce the password of user <code>admin</code>? That may be possible until we can port to wayland.</p>
<aside class="quote no-group" data-post="21" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>I don’t like the sound of that too much. Android is really different from Debian. If we allow unprivileged users to install packages, an attacker can install whatever they want from the repos to add attack surface.</p>
<p>e.g. 1: attacker installs package with setuid binary -&gt; exploits vulnerability -&gt; gains priv esc.</p>
<p>e.g. 2: attacker installs kernel module from the repos which adds kernel attack surface -&gt; exploits vulnerability in new module.</p>
<p>Meanwhile android apps cannot add any new kernel attack surface or increase the chances of priv esc. All apps are fully sandboxed, running as different users with strict SELinux policies and seccomp filters. It isn’t really comparable.</p>
</blockquote>
</aside>
<p>Agreed.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T19:08:14Z' class='post-time'>
                November 22, 2019,  7:08pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T19:08:14Z'>
          <span itemprop='position'>#23</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="22" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>How? An attacker (let’s say some compromised user account) cannot use <code>su</code> since not member of group <code>sudo</code> . Well, could try to bruteforce the password of user <code>admin</code> ?</p>
</blockquote>
</aside>
<p>Bruteforcing the password is what I had in mind. Unless we set strong password requirements (see <a href="../../../../external.html?link=https://linux.die.net/man/8/pam_cracklib">pam_cracklib</a>), an attacker can attempt to login to the admin account and bruteforce the password.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T19:15:11Z' class='post-time'>
                November 22, 2019,  7:15pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T19:15:11Z'>
          <span itemprop='position'>#24</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>No strong password required fortunately for linux user login. Bruteforcing into linux user accounts is already severely limited. Elsewhere. Summary written here just now:</p>
<aside class="quote quote-modified" data-post="19" data-topic="7698">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="../../protect-linux-user-accounts-against-brute-force-attacks/7698/19.html">How strong do linux user account passwords have to be when using Full Disk Encryption (FDE) too?</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Bruteforcing into linux user accounts is already severely limited 
Quote <a href="../../../../external.html?link=https://github.com/Whonix/security-misc">security-misc</a>: 


Lock user accounts after 100 failed login attempts using pam_tally2. /usr/share/pam-configs/tally2-security-misc



<a href="../../../../external.html?link=https://github.com/Whonix/security-misc/blob/master/usr/share/pam-configs/tally2-security-misc">https://github.com/Whonix/security-misc/blob/master/usr/share/pam-configs/tally2-security-misc</a>

This also has good usability: 
<a href="../../../../external.html?link=https://github.com/Whonix/security-misc/blob/master/usr/lib/security-misc/pam_tally2-info">https://github.com/Whonix/security-misc/blob/master/usr/lib/security-misc/pam_tally2-info</a> 
This seems to function really well. To further increase linux user account …
  </blockquote>
</aside>

        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
              split this topic 
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-23T09:50:03Z' class='post-time'>
                November 23, 2019,  9:50am
              </time>
              <meta itemprop='dateModified' content='2019-11-23T09:50:03Z'>
          <span itemprop='position'>#25</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>A post was merged into an existing topic: <a href="../../protect-linux-user-accounts-against-brute-force-attacks/7698/20.html">How strong do linux user account passwords have to be when using Full Disk Encryption (FDE) too?</a></p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../77084658.html?page=2">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
