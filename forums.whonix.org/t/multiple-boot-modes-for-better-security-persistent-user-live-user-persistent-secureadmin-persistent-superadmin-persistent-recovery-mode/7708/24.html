<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode - #24 by Patrick - Development - Whonix Forum</title>
    <meta name="description" content="Update: 
The plan solidified. See this wiki page: 



Old post: 
Related: 

Restrict root access
Disable SUID Binaries
(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better s&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../77084658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode&#39;" href="../7708.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/multiple-boot-modes-for-better-security-persistent-user-live-user-persistent-secureadmin-persistent-superadmin-persistent-recovery-mode/7708/24" />
<meta name="twitter:url" content="https://forums.whonix.org/t/multiple-boot-modes-for-better-security-persistent-user-live-user-persistent-secureadmin-persistent-superadmin-persistent-recovery-mode/7708/24" />
<meta property="og:title" content="multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode" />
<meta name="twitter:title" content="multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode" />
<meta property="og:description" content="No strong password required fortunately for linux user login. Bruteforcing into linux user accounts is already severely limited. Elsewhere. Summary written here just now:" />
<meta name="twitter:description" content="No strong password required fortunately for linux user login. Bruteforcing into linux user accounts is already severely limited. Elsewhere. Summary written here just now:" />
<meta property="article:published_time" content="2019-11-22T19:15:11+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="../7708.html">
        <link rel="next" href="../77089ba9.html?page=3">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../7708.html">multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../../tag/component_security.html' class='discourse-tag' rel="tag">component_security</a>, 
            <a href='../../../tag/status_open_issue_todo.html' class='discourse-tag' rel="tag">status_open_issue_todo</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T17:56:42Z' class='post-time'>
                November 22, 2019,  5:56pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T17:56:42Z'>
          <span itemprop='position'>#19</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="18" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>That was about security vs customization. Also that was a really abstract questions. If users really understand what’s at stake, they might decide otherwise.</p>
<p>This is not so much customization. This is more about security vs inconvenience.</p>
</blockquote>
</aside>
<p>Whonix comes preconfigured so root isn’t really needed for the average user for anything other than customization or debugging.</p>
<aside class="quote no-group" data-post="18" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Upgrade -&gt; cannot use “sudo” anymore</p>
</blockquote>
</aside>
<p><code>apt-get-update-plus</code> has a sudoers exception for that.</p>
<aside class="quote no-group" data-post="18" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Terminal-only users couldn’t even run “sudo reboot”.</p>
</blockquote>
</aside>
<p>There’s no need to use sudo for that anyway. Unprivileged users can still run <code>/sbin/reboot</code>. The only issue is that /sbin isn’t part of $PATH by default (an alias can be added for <code>reboot</code> if needed).</p>
<aside class="quote no-group" data-post="18" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Maybe. Well, Whonix / Kicksecure don’t come with openssh-server installed by default. OpenSSH root login allowed by default or not setting doesn’t change much. Should change anyhow? How? Modify files in <code>/etc/ssh</code> ? There is no configuration snippet drop-in folder (" <code>.d</code> "). Seems really intrusive</p>
</blockquote>
</aside>
<p>Best option seems to be using <code>str_replace</code> on the openssh config file. It’s a bit hacky but better than just replacing the entire file.</p>
<p>I don’t use ssh much so I don’t know if there’s any better option.</p>
<p>Or, just not include it in security-misc since Whonix doesn’t have ssh anyway. We can leave configuring specific applications to be the user’s job.</p>
<aside class="quote no-group" data-post="18" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Then the user wants to upgrade and reboots in <code>sudo=1</code> mode. The user now enters its user <code>user</code> password and gains root rights by using sudo. Boom. Malware can hijack that / sniff the password and become root too. We don’t get that much security from that?</p>
</blockquote>
</aside>
<p>We can add a warning to sudo mode and inform the user of the consequences of what they’re doing.</p>
<p>Restricting sudo is a security advantage. The only problem is if the user messes it up themselves which isn’t really on us.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>
          <meta itemprop='keywords' content='component_security, status_open_issue_todo'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T18:23:59Z' class='post-time'>
                November 22, 2019,  6:23pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T18:23:59Z'>
          <span itemprop='position'>#20</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Having boot modes</p>
<ul>
<li>
<code>nosudo=1</code> -&gt; <code>delgroup user sudo</code>
</li>
<li>
<code>sudo=1</code> -&gt; <code>addgroup user sudo</code>
</li>
</ul>
<p>wouldn’t improve security too much. At least wouldn’t help much for users who install some custom package every now and then. (They need to use <code>sudo</code> for that.) Let alone add custom (third party) APT sources list. (Requires root to edit sources.list.d.)<br>
Mostly would help users who do follow <a href="../../../../external.html?link=https://www.whonix.org/wiki/Root#Prevent_Malware_from_Sniffing_the_Root_Password">Prevent Malware from Sniffing the Root Password</a>.<br>
(But these would not even want <code>addgroup user sudo</code>.)</p>
<p>Not sure it’s even worth it to implement boot modes <code>nosudo=1</code> / <code>sudo=1</code>?</p>
<p>(Just called <code>nosudo=1</code> / <code>sudo=1</code> for discussion. Would be presented to user in better terminology.)</p>
<p>Comparison with Tails:<br>
Tails boots always fresh, malware clean. Considered non-compromised.<br>
(Just assuming it for sake of discussion not considering firmware trojans etc. When boot from read-only media boot.)<br>
Tails boots by default without root access. Setting a root password is an opt-in. Tails an edge here.</p>
<p>There are kinda two paths there.</p>
<ul>
<li>[1] Allowing more and more things (apt dist-upgrade, install packages from <a href="../../../../external.html?link=http://packages.debian.org/">packages.debian.org</a>) without need to gain root / entering sudo password. Android does that. Users can do a lot things there without root. For example, setting up VPNs.</li>
<li>[2] Make users boot into user <code>admin</code>.</li>
</ul>
<p>These two are not really exclusive. [1] will always be limited. A lot effort to implement. Might never get there.</p>
<aside class="quote no-group quote-modified" data-post="19" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<blockquote>
<p>Upgrade -&gt; cannot use “sudo” anymore</p>
</blockquote>
<p><code>apt-get-update-plus</code> has a sudoers exception for that.</p>
</blockquote>
</aside>
<p>I typed too little. I meant, after users just run “sudo apt-get dist-upgrade” or “upgrade-nonroot” they can no longer use “sudo”. Kinda unexpected, breaking usability change. Considered unstable by users most likely.</p>
<aside class="quote no-group" data-post="19" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Whonix comes preconfigured so root isn’t really needed for the average user for anything other than customization or debugging.</p>
</blockquote>
</aside>
<p>That would mean “boot into user admin” is an OK solution too?</p>
<aside class="quote no-group" data-post="19" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>We can add a warning to sudo mode and inform the user of the consequences of what they’re doing.</p>
</blockquote>
</aside>
<p>Sounds good.</p>
<aside class="quote no-group" data-post="19" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Restricting sudo is a security advantage. The only problem is if the user messes it up themselves which isn’t really on us.</p>
</blockquote>
</aside>
<p>Yes. However, it’s on us to provide easy, secure work flows. I think "boot into user <code>admin</code>" is a nice clear way to separate things. Will describe more clearly soon.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T18:34:56Z' class='post-time'>
                November 22, 2019,  6:34pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T18:34:56Z'>
          <span itemprop='position'>#21</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="20" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Not sure it’s even worth it to implement boot modes <code>nosudo=1</code> / <code>sudo=1</code> ?</p>
</blockquote>
</aside>
<p>An alternative solution would be to add removing the <code>sudo</code> group to the hardening guides instead of making boot modes.</p>
<aside class="quote no-group" data-post="20" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Allowing more and more things (apt dist-upgrade, install packages from <a href="../../../../external.html?link=http://packages.debian.org/">packages.debian.org</a>) without need to gain root / entering sudo password. Android does that. Users can do a lot things there without root. For example, setting up VPNs.</p>
</blockquote>
</aside>
<p>I don’t like the sound of that too much. Android is really different from Debian. If we allow unprivileged users to install packages, an attacker can install whatever they want from the repos to add attack surface.</p>
<p>e.g. 1: attacker installs package with setuid binary -&gt; exploits vulnerability -&gt; gains priv esc.</p>
<p>e.g. 2: attacker installs kernel module from the repos which adds kernel attack surface -&gt; exploits vulnerability in new module.</p>
<p>Meanwhile android apps cannot add any new kernel attack surface or increase the chances of priv esc. All apps are fully sandboxed, running as different users with strict SELinux policies and seccomp filters. It isn’t really comparable.</p>
<aside class="quote no-group" data-post="20" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>That would mean “boot into user admin” is an OK solution too?</p>
</blockquote>
</aside>
<p>The admin user is better but not the best. An attacker can still login as the admin user too.</p>
<p>Btw by “boot” do you mean “login” (as a user called “admin” with sudo privileges) or are you talking about a boot mode? I assume you meant “login”.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T18:46:22Z' class='post-time'>
                November 22, 2019,  6:46pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T18:46:22Z'>
          <span itemprop='position'>#22</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The <code>Separate User "admin" Plan</code>.</p>
<ul>
<li>Add a new user <code>admin</code>.</li>
<li>User <code>user</code> not being member of group <code>sudo</code> / <code>su</code> etc.</li>
<li>Root login stays disabled. (Already done.) (<a href="../../restrict-root-access/7658/1.html" class="inline-onebox">Restrict root access</a>)</li>
<li>To gain root rights:
<ul>
<li>Users are advised to login as user <code>admin</code> and then use <code>sudo</code> as documented on <a href="../../../../external.html?link=https://www.whonix.org/wiki/Root#Prevent_Malware_from_Sniffing_the_Root_Password">Prevent Malware from Sniffing the Root Password</a>, OR</li>
<li>Boot into “sudo mode”.</li>
</ul>
</li>
<li>No (good) password for user <code>user</code> required. (Except, if SSH login is permitted.)</li>
<li>Good password only required for user <code>admin</code>.</li>
</ul>
<p>Boot into “sudo mode” meaning:<br>
If users choose “sudo mode” in grub boot menu, the system would boot and login the user into user <code>admin</code> rather than user <code>user</code>. User <code>admin</code> would have root. After users are done, these are advised to reboot to continue using user <code>user</code>.<br>
(And those who don’t like it could continue using user <code>admin</code> (bad) or <code>sudo addgroup user sudo</code> (slightly less bad).) [1])</p>
<p>Not sure the cumbersomeness usability wise is acceptable. Could poll about that. Could also poll about various alternatives.</p>
<hr>
<p>[1] Using user <code>user</code> is an anonymity feature. -&gt; <a href="../../../../external.html?link=https://github.com/Whonix/anon-base-files">https://github.com/Whonix/anon-base-files</a></p>
<aside class="quote no-group" data-post="21" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>An attacker can still login as the admin user too.</p>
</blockquote>
</aside>
<p>How? An attacker (let’s say some compromised user account) cannot use <code>su</code> since not member of group <code>sudo</code>. Well, could try to bruteforce the password of user <code>admin</code>? That may be possible until we can port to wayland.</p>
<aside class="quote no-group" data-post="21" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>I don’t like the sound of that too much. Android is really different from Debian. If we allow unprivileged users to install packages, an attacker can install whatever they want from the repos to add attack surface.</p>
<p>e.g. 1: attacker installs package with setuid binary -&gt; exploits vulnerability -&gt; gains priv esc.</p>
<p>e.g. 2: attacker installs kernel module from the repos which adds kernel attack surface -&gt; exploits vulnerability in new module.</p>
<p>Meanwhile android apps cannot add any new kernel attack surface or increase the chances of priv esc. All apps are fully sandboxed, running as different users with strict SELinux policies and seccomp filters. It isn’t really comparable.</p>
</blockquote>
</aside>
<p>Agreed.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T19:08:14Z' class='post-time'>
                November 22, 2019,  7:08pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T19:08:14Z'>
          <span itemprop='position'>#23</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="22" data-topic="7708">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>How? An attacker (let’s say some compromised user account) cannot use <code>su</code> since not member of group <code>sudo</code> . Well, could try to bruteforce the password of user <code>admin</code> ?</p>
</blockquote>
</aside>
<p>Bruteforcing the password is what I had in mind. Unless we set strong password requirements (see <a href="../../../../external.html?link=https://linux.die.net/man/8/pam_cracklib">pam_cracklib</a>), an attacker can attempt to login to the admin account and bruteforce the password.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T19:15:11Z' class='post-time'>
                November 22, 2019,  7:15pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T19:15:11Z'>
          <span itemprop='position'>#24</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>No strong password required fortunately for linux user login. Bruteforcing into linux user accounts is already severely limited. Elsewhere. Summary written here just now:</p>
<aside class="quote quote-modified" data-post="19" data-topic="7698">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="../../protect-linux-user-accounts-against-brute-force-attacks/7698/19.html">How strong do linux user account passwords have to be when using Full Disk Encryption (FDE) too?</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Bruteforcing into linux user accounts is already severely limited 
Quote <a href="../../../../external.html?link=https://github.com/Whonix/security-misc">security-misc</a>: 


Lock user accounts after 100 failed login attempts using pam_tally2. /usr/share/pam-configs/tally2-security-misc



<a href="../../../../external.html?link=https://github.com/Whonix/security-misc/blob/master/usr/share/pam-configs/tally2-security-misc">https://github.com/Whonix/security-misc/blob/master/usr/share/pam-configs/tally2-security-misc</a>

This also has good usability: 
<a href="../../../../external.html?link=https://github.com/Whonix/security-misc/blob/master/usr/lib/security-misc/pam_tally2-info">https://github.com/Whonix/security-misc/blob/master/usr/lib/security-misc/pam_tally2-info</a> 
This seems to function really well. To further increase linux user account …
  </blockquote>
</aside>

        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
              split this topic 
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-23T09:50:03Z' class='post-time'>
                November 23, 2019,  9:50am
              </time>
              <meta itemprop='dateModified' content='2019-11-23T09:50:03Z'>
          <span itemprop='position'>#25</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>A post was merged into an existing topic: <a href="../../protect-linux-user-accounts-against-brute-force-attacks/7698/20.html">How strong do linux user account passwords have to be when using Full Disk Encryption (FDE) too?</a></p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick_mobile'><span itemprop='name'>Patrick_mobile</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-06T21:19:02Z' class='post-time'>
                December 6, 2019,  9:19pm
              </time>
              <meta itemprop='dateModified' content='2019-12-06T21:19:02Z'>
          <span itemprop='position'>#26</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Name for admin user?<br>
adm or admin<br>
?</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-07T05:03:07Z' class='post-time'>
                December 7, 2019,  5:03am
              </time>
              <meta itemprop='dateModified' content='2019-12-07T05:03:07Z'>
          <span itemprop='position'>#27</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><strong>admin</strong> is best IMO unless it can conflict with some other program out there(?)</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-07T07:03:45Z' class='post-time'>
                December 7, 2019,  7:03am
              </time>
              <meta itemprop='dateModified' content='2019-12-07T07:03:45Z'>
          <span itemprop='position'>#28</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>There is a group <code>adm</code>.</p>
<aside class="onebox stackexchange">
  <header class="source">
      <a href="../../../../external.html?link=https://askubuntu.com/questions/612751/what-is-the-difference-between-the-groups-adm-and-admin" target="_blank">askubuntu.com</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://askubuntu.com/users/150504/maythux" target="_blank">
    <img alt="Maythux" src="../../../../external.html?link=https://www.gravatar.com/avatar/d0852cc25044163b6c17486d46d400ba?s=128&amp;d=identicon&amp;r=PG" class="thumbnail onebox-avatar" width="60" height="60">
  </a>
<h4>
  <a href="../../../../external.html?link=https://askubuntu.com/questions/612751/what-is-the-difference-between-the-groups-adm-and-admin" target="_blank">What is the difference between the groups "adm" and "admin"</a>
</h4>

<div class="tags">
  <strong>groups</strong>
</div>

<div class="date">
  asked by
  
  <a href="../../../../external.html?link=https://askubuntu.com/users/150504/maythux" target="_blank">
    Maythux
  </a>
  on <a href="../../../../external.html?link=https://askubuntu.com/questions/612751/what-is-the-difference-between-the-groups-adm-and-admin" target="_blank">07:11AM - 23 Apr 15 UTC</a>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>May not be a good idea to use <code>adm</code> as a user name? <a href="../../../../external.html?link=https://access.redhat.com/discussions/685053">https://access.redhat.com/discussions/685053</a> lists user <code>adm</code> for <code>nologin</code>. That could potentially cause some issues. (Even if not a Debian thing I like to keep things potentially open to be ported by someone to another Linux distribution.)</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-07T08:36:47Z' class='post-time'>
                December 7, 2019,  8:36am
              </time>
              <meta itemprop='dateModified' content='2019-12-07T08:36:47Z'>
          <span itemprop='position'>#29</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Talking about VMs here…</p>
<p>Under the <a href="22.html">The <code>Separate User "admin" Plan</code>.</a> (grub boot menu to login into user <code>user</code> or user <code>admin</code>):</p>
<ul>
<li>Could we even go for autologin in X <code>and</code> <a href="../../../../external.html?link=https://www.whonix.org/wiki/Desktop#Virtual_Consoles">virtual console</a> for user <code>user</code> when booting into user-only (non-root) mode?
<ul>
<li>In this mode, user <code>admin</code> stays password locked by default.</li>
</ul>
</li>
<li>Could we even go for autologin in X <code>and</code> virtual console for user <code>admin</code> when booting into superuser mode?
<ul>
<li>In this mode, user <code>user</code> stays password locked by default.</li>
</ul>
</li>
<li>Could we even go for passwordless sudo for user <code>admin</code> when booting into superuser mode?</li>
<li>All passwords locked by default.</li>
<li>No more default passwords for user <code>user</code> and no default password for user <code>admin</code>.</li>
<li>Still no root login.</li>
</ul>
<p>implementation goals:<br>
<code>secure auto login</code> + <code>secure passwordless sudo</code> + <code>uncrackable user passwords</code></p>
<p>By using locked passwords by default, there wouldn’t be any passwords that adversaries could crack.</p>
<p>Could the use of autologin be abused by non-autologin, limited user accounts such as user <code>web</code>? Could for example a compromised linux user account <code>web</code> take advantage of user <code>user</code> being autologin? I wouldn’t know. Maybe different for graphical applications running under a different user account? But then probably X is too broken to consider this anyhow.</p>
<p>Would an auto logged in virtual console offer any attack surface for compromised non-user <code>user</code> accounts such as user <code>web</code>?</p>
<p>Users will always be able to configure what they want. (Such as the current behavior of only user <code>user</code> and ability to use <code>sudo</code>.) In this post I am trying to find a design for the default which works good enough for most users.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-07T12:56:20Z' class='post-time'>
                December 7, 2019, 12:56pm
              </time>
              <meta itemprop='dateModified' content='2019-12-07T12:56:20Z'>
          <span itemprop='position'>#30</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="26" data-topic="7708" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>Name for admin user?<br>
adm or admin<br>
?</p>
</blockquote>
</aside>
<p>admin. adm is already a group and would likely cause conflicts. admin may be too generic though and might also cause conflicts. Maybe “sysadmin”?</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-13T11:08:02Z' class='post-time'>
                December 13, 2019, 11:08am
              </time>
              <meta itemprop='dateModified' content='2019-12-13T11:08:02Z'>
          <span itemprop='position'>#31</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Also wondering what the right package (or package name) for this would be. It interacts with grub-live, maybe apparmor-profile-everything (superroot) and is Kicksecure / Whonix specific (?).</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-13T15:31:47Z' class='post-time'>
                December 13, 2019,  3:31pm
              </time>
              <meta itemprop='dateModified' content='2019-12-16T10:55:09Z'>
          <span itemprop='position'>#32</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Grub default boot menu entries:</p>
<ul>
<li><code>PERSISTENT mode USER (For daily activities.)</code></li>
<li><code>LIVE mode USER (For daily activities.)</code></li>
<li><code>PERSISTENT mode ADMIN (For software installation.)</code></li>
<li><code>PERSISTENT mode SUPERADMIN (Be very cautious!)</code></li>
<li><code>Recovery PERSISTENT mode SUPERADMIN (Be very cautious!)</code></li>
</ul>
<hr>
<p>Boot modes considered too unimportant to be added to grub default boot menu:</p>
<ul>
<li><code>LIVE mode ADMIN</code></li>
<li><code>LIVE mode SUPERADMIN</code></li>
<li><code>Recovery LIVE mode SUPERADMIN</code></li>
</ul>
<p>I don’t see good use cases for these. But could be convinced otherwise with user feedback.</p>
<p>If anyone cares about these, there could be files in <code>/etc/grub.d/</code> folder that add such entries but these files could be non-executable by default. Thereby <code>update-grub</code> would ignore them. To opt-in into such modes, users could just run <code>sudo chmod +x /etc/grub.d/somenumber_name-of-boot-mode</code>.</p>
<p>Also users who really want something special/custom would be able to add whatever they want to <code>/etc/grub.d/</code> folder / grub boot menu.</p>
<p>Also by using grub boot menu editing (key <code>e</code>) at grub boot menu, kernel parameters can be adjusted and any combination would be possible.</p>
<hr>
<p>Use cases for the different modes:</p>
<ul>
<li>
<code>PERSISTENT mode USER (For daily activities.)</code>: Useful for browsing, e-mail, chat, etc. or just letting an already set up and installed server run. Even upgrading through <code>upgrade-nonroot</code>.</li>
<li>
<code>LIVE mode USER (For daily activities.)</code>: Same as above but without persistence.</li>
<li>
<code>PERSISTENT mode ADMIN (For software installation.)</code>: users could run <code>sudo apt install whatever-software-package</code>, then reboot into USER. Editing <code>/etc/apt/sources.list.d</code> <a href="../../../../external.html?link=https://github.com/Whonix/apparmor-profile-everything/blob/master/etc/apparmor.d/abstractions/dangerous-files">among many other things</a> prohibited for better security.</li>
<li>
<code>PERSISTENT mode SUPERADMIN (Be very cautious!)</code>: users could add foreign sources to <code>/etc/apt/sources.list.d</code> or do anything (full freedom), then (optional but advisable) reboot to ADMIN mode, install packages from third party repositories.</li>
<li>
<code>Recovery PERSISTENT mode SUPERADMIN (Be very cautious!)</code>: The usual recovery mode.</li>
</ul>
<hr>
<p>Anti-opposition / “I want the old Whonix back”:</p>
<p>Users who don’t like (any, multiple or all) of the new options…</p>
<ul>
<li>
<code>PERSISTENT mode USER (For daily activities.)</code> [A]</li>
<li>
<code>LIVE mode USER (For daily activities.)</code> [B]</li>
<li>
<code>PERSISTENT mode ADMIN (For software installation.)</code> [C]</li>
</ul>
<p>and who want “the old Whonix” “with unrestricted sudo” (<code>PERSISTENT mode SUPERADMIN</code>) back, who don’t want to see any of the new options [A], [B], [C]… These could just make these <code>/etc/grub.d</code> folder / grub menu entries gone by running <code>sudo chmod -x /etc/grub.d/somenumber_name-of-boot-mode</code>. (There could be a script to simplify that.)</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../apparmor-for-complete-system-including-init-pid1-systemd-everything-full-system-mac-policy/8339/225.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../apparmor-for-complete-system-including-init-pid1-systemd-everything-full-system-mac-policy/8339/225.html'>
                      <span itemprop='name'>AppArmor for Complete System - Including init, PID1, Systemd, Everything! - Full System MAC policy</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../overview-of-mobile-projects-that-focus-on-either-and-or-security-privacy-anonymity-source-available-freedom-software/4557/35.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../overview-of-mobile-projects-that-focus-on-either-and-or-security-privacy-anonymity-source-available-freedom-software/4557/35.html'>
                      <span itemprop='name'>Overview of Mobile Projects - That focus on either/and/or security, privacy, anonymity, source-available, Freedom Software.</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-13T17:32:30Z' class='post-time'>
                December 13, 2019,  5:32pm
              </time>
              <meta itemprop='dateModified' content='2020-04-26T10:43:05Z'>
          <span itemprop='position'>#33</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I will use the following file names.</p>
<pre><code>/etc/grub.d/10_linux                         PERSISTENT mode USER
/etc/grub.d/11_linux_live                    LIVE mode USER
/etc/grub.d/12_linux_admin                   PERSISTENT mode ADMIN
/etc/grub.d/13_linux_admin_live              LIVE mode ADMIN
/etc/grub.d/14_linux_superadmin              PERSISTENT mode SUPERADMIN
/etc/grub.d/15_linux_superadmin_live         LIVE mode SUPERADMIN
/etc/grub.d/16_linux_recovery_mode           PERSISTENT mode SUPERADMIN
/etc/grub.d/17_linux_recovery_mode_live      Recovery LIVE mode SUPERADMIN
</code></pre>
<p>Should stay below <code>/etc/grub.d/20_</code> because that is already used by an existing script.</p>
<p>Note: some files will not be created in the first iteration (and not sure ever) - those listed in chapter <code>Boot modes considered too unimportant to be added to grub default boot menu:</code> in my post above.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-13T17:48:32Z' class='post-time'>
                December 13, 2019,  5:48pm
              </time>
              <meta itemprop='dateModified' content='2019-12-13T17:48:32Z'>
          <span itemprop='position'>#34</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>These grub default menu entries were implemented.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/apparmor-profile-everything/commit/b3817cde78f057e8e974961211006bb97cef42a9" target="_blank">github.com/Whonix/apparmor-profile-everything</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewbox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../../external.html?link=https://github.com/Whonix/apparmor-profile-everything/commit/b3817cde78f057e8e974961211006bb97cef42a9" target="_blank">implement grub default boot menu entries:</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2019-12-13" data-time="17:44:49" data-timezone="UTC">05:44PM - 13 Dec 19 UTC</span>
      </div>

      <div class="user">
        <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 6 files with 151 additions and 0 deletions">
        <a href="../../../../external.html?link=https://github.com/Whonix/apparmor-profile-everything/commit/b3817cde78f057e8e974961211006bb97cef42a9" target="_blank">
          <span class="added">+151</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>

  </div>
</div>


  <div class="github-row">
    <pre class="github-content" style="white-space: normal;">PERSISTENT mode USER (For daily activities.)
 LIVE mode USER (For daily activities.)
 PERSISTENT mode ADMIN (For software installation.)
 PERSISTENT mode SUPERADMIN...</pre>
  </div>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Next step, things that need to be implemented:</p>
<ul>
<li>when kernel parameter <code>rootmode</code> is set -&gt; boot/login into user <code>admin</code>
</li>
<li>when kernel parameter <code>superroot</code> is set -&gt; boot/login into user <code>admin</code>
</li>
<li>otherwise boot/login into user <code>user</code>
</li>
</ul>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../apparmor-for-complete-system-including-init-pid1-systemd-everything-full-system-mac-policy/8339/227.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../apparmor-for-complete-system-including-init-pid1-systemd-everything-full-system-mac-policy/8339/227.html'>
                      <span itemprop='name'>AppArmor for Complete System - Including init, PID1, Systemd, Everything! - Full System MAC policy</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-13T17:56:39Z' class='post-time'>
                December 13, 2019,  5:56pm
              </time>
              <meta itemprop='dateModified' content='2019-12-13T17:56:39Z'>
          <span itemprop='position'>#35</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I will add a safety feature. Copy <code>/boot/grub/grub.cfg</code> to a temporary location, then use <code>/usr/bin/grub-script-check</code> to check the temporary file is valid before actually installing it to real location <code>/boot/grub/grub.cfg</code>.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-13T18:05:42Z' class='post-time'>
                December 13, 2019,  6:05pm
              </time>
              <meta itemprop='dateModified' content='2019-12-13T18:05:42Z'>
          <span itemprop='position'>#36</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="35" data-topic="7708" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I will add a safety feature. Copy <code>/boot/grub/grub.cfg</code> to a temporary location, then use <code>/usr/bin/grub-script-check</code> to check the temporary file is valid before actually installing it to real location <code>/boot/grub/grub.cfg</code> .</p>
</blockquote>
</aside>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/apparmor-profile-everything/commit/c2c4db48d8afed01e20fc0683a6949ed4af252d6" target="_blank">github.com/Whonix/apparmor-profile-everything</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewbox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../../external.html?link=https://github.com/Whonix/apparmor-profile-everything/commit/c2c4db48d8afed01e20fc0683a6949ed4af252d6" target="_blank">check if modified grub.cfg is valid</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2019-12-13" data-time="18:05:01" data-timezone="UTC">06:05PM - 13 Dec 19 UTC</span>
      </div>

      <div class="user">
        <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 20 additions and 1 deletions">
        <a href="../../../../external.html?link=https://github.com/Whonix/apparmor-profile-everything/commit/c2c4db48d8afed01e20fc0683a6949ed4af252d6" target="_blank">
          <span class="added">+20</span>
          <span class="removed">-1</span>
        </a>
      </div>
    </div>

  </div>
</div>


  <div class="github-row">
    <pre class="github-content" style="white-space: normal;">https://forums.whonix.org/t/apparmor-for-complete-system-including-init-pid1-systemd-everything-full-system-mac-policy/8339/229</pre>
  </div>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-16T11:08:38Z' class='post-time'>
                December 16, 2019, 11:08am
              </time>
              <meta itemprop='dateModified' content='2019-12-16T11:08:38Z'>
          <span itemprop='position'>#37</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>“boot into user”, “boot into admin” and “boot into superadmin” should probably be all separate users. (<code>user</code>, <code>admin</code>, <code>superadmin</code>)</p>
<p>Also need to get the terminology right <code>superadmin</code> vs <code>superroot</code>. I guess when booting it will be user <code>superadmin</code> which is a limited user which can use unrestricted <code>sudo</code> which we will then call <code>superroot</code>.</p>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7708.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-24T23:23:21Z' class='post-time'>
                December 24, 2019, 11:23pm
              </time>
              <meta itemprop='dateModified' content='2019-12-24T23:23:21Z'>
          <span itemprop='position'>#38</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I am wondering if when booting into admin or superadmin mode, if as few services as possible should be load. That is because when for example a compromised web server is running under a limited user, user <code>admin</code> or <code>superadmin</code> is more in danger as if no such services were started. Ideally no malware running under limited user accounts would be running during maintenance, admin and superadmin mode. That could be too difficult. Can be future work. Might be hard to whitelist which services should run (Tor, <code>debian-tor</code>, …) vs which ones should not. Also when booting into admin mode to install lets say a web server then the admin might want to fully set it up which wouldn’t work if service starting was restricted. Perhaps it is possible to use no-autostart at boot but regular autostart after package installation.</p>
<p>From <a href="../../suid-disabler-and-permission-hardener/7706/55.html" class="inline-onebox">Disable SUID Binaries</a></p>
<aside class="quote no-group" data-post="55" data-topic="7706">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"><a href="../../suid-disabler-and-permission-hardener/7706/55.html">Disable SUID Binaries</a>
</div>
<blockquote>
<p>The only missing feature is: if suid / sgid was already removed during a previous run of the service and the user adds it to exactwhitelist of machwhitelist after that, it will not be re-enabled suid / sgid.</p>
<p>An easy fix would be to tell users “boot into admin mode”, run <code>/usr/lib/security-misc/permission-hardening-undo</code> and reboot. But this is a bit unsafe if other services are already started. “boot into admin mode” should probably mean “don’t start any services such as web services”? Will discuss in <a href="../7708.html">multiple boot modes for better security: persistent + root | persistent + noroot | live + root | live + noroot</a></p>
</blockquote>
</aside>
        </div>

        <meta itemprop='headline' content='multiple boot modes for better security: persistent user | live user | persistent secureadmin | persistent superadmin | persistent recovery mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="../7708.html">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../77089ba9.html?page=3">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
