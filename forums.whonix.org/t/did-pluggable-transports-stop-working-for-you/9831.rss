<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Did pluggable transports stop working for you?</title>
    <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831</link>
    <description>(I&#39;m using Whonix with Qubes 4)

After 11/06, it seems that all pluggable transports stopped working for me. I used to use snowflake and then it stopped working, and when I change the torrc file for Whonix to obfs4 it also doesn&#39;t work.

Can anyone else try to reproduce this?

BTW I opened a ticket for that here: https://phabricator.whonix.org/T997</description>
    <language>en</language>
    <lastBuildDate>Sun, 21 Nov 2021 17:09:01 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="i0k0rw" data-post="47" data-topic="5190">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/i/d78d45/40.png" class="avatar"><a href="//forums.whonix.org/t/replacing-meek-snowflake/5190/47">Replacing meek: Snowflake</a>
</div>
<blockquote>
<p>One also needs to add this line:</p>
<pre><code class="lang-auto">/usr/bin/snowflake-client ix,
</code></pre>
</blockquote>
</aside>
<p>It’s already included by default here:</p><aside class="onebox githubblob">
  <header class="source">

      <a href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/etc/apparmor.d/local/system_tor.anondist#L57" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/etc/apparmor.d/local/system_tor.anondist#L57" target="_blank" rel="noopener">Whonix/anon-gw-anonymizer-config/blob/master/etc/apparmor.d/local/system_tor.anondist#L57</a></h4>



  <pre class="onebox">    <code class="lang-anondist">
      <ol class="start lines" start="47" style="counter-reset: li-counter 46 ;">
          <li>  /usr/local/lib/python*/** r,</li>
          <li>  /var/log/tor/log rw,</li>
          <li>  /dev/urandom r,</li>
          <li>  /dev/random r,</li>
          <li>  /usr/** r,</li>
          <li>  /etc/python*/sitecustomize.py r,</li>
          <li>  ## https://forums.whonix.org/t/after-last-apt-get-upgrade-gateway-doesnt-connect-to-tor-anymore</li>
          <li>  #/usr/bin/obfsproxy rix,</li>
          <li>
          </li>
<li>  ## snowflake</li>
          <li class="selected">  /usr/bin/snowflake-client ix,</li>
          <li>
          </li>
<li>## End Tor Local AppArmor Profile for Anonymity Distributions</li>
      </ol>
    </code>
  </pre>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="ldwkcj" data-post="26" data-topic="9831">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/3e96dc/40.png" class="avatar"> ldwkcj:</div>
<blockquote>
<p>As it stands the wiki should be edited: <a href="https://www.whonix.org/wiki/Bridges#Snowflake">Configure (Private) (Obfuscated) Tor Bridges</a></p>
</blockquote>
</aside>
<p><a href="https://www.whonix.org/wiki/Contribute#Documentation">Improve the Documentation / Edit the Whonix ™ Wiki</a></p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/27">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/27</link>
        <pubDate>Sun, 21 Nov 2021 17:09:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-27</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[ldwkcj]]></dc:creator>
        <description><![CDATA[
            <p>Seems like the issue is with AppArmor after all. After following this step I was able to get it working:</p>
<aside class="quote no-group" data-username="i0k0rw" data-post="47" data-topic="5190">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/i/d78d45/40.png" class="avatar"><a href="//forums.whonix.org/t/replacing-meek-snowflake/5190/47">Replacing meek: Snowflake</a>
</div>
<blockquote>
<p>One also needs to add this line:</p>
<pre><code class="lang-auto">/usr/bin/snowflake-client ix,
</code></pre>
<p>to <code>/etc/apparmor.d/abstractions/tor</code> and then reload apparmor using <code>sudo service apparmor restart</code></p>
</blockquote>
</aside>
<p>As it stands the wiki should be edited: <a href="https://www.whonix.org/wiki/Bridges#Snowflake" class="inline-onebox" rel="noopener nofollow ugc">Configure (Private) (Obfuscated) Tor Bridges</a></p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/26">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/26</link>
        <pubDate>Sun, 21 Nov 2021 12:34:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-26</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[ldwkcj]]></dc:creator>
        <description><![CDATA[
            <p>I followed the exact instructions in the wiki again for setting up snowflake (on a fresh Qubes 4.1 install) but it seems that it’s no longer working. Checking <code>/var/run/tor/log</code> I find:</p>
<pre><code class="lang-auto">[WARN] Pluggable Transport process terminated with status code 256 [1 duplicate hidden]
</code></pre>
<p>I have no idea what’s wrong here. Tried to disable <code>apparmor</code> with <code>sudo systemctl stop apparmor.service</code> but it didn’t help. And I do have all the necessary stuff in <code>/etc/hosts</code> for the DNS lookups.</p>
<p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> Can you take a look? Meek is getting deprecated so it’s very important to make sure snowflake is working.</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/25">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/25</link>
        <pubDate>Sun, 21 Nov 2021 12:06:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-25</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Still any issue here?</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/24">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/24</link>
        <pubDate>Wed, 08 Sep 2021 14:34:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-24</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="HulaHoop" data-post="22" data-topic="9831">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>What root servers does gethostbyname query?</p>
</blockquote>
</aside>
<p>If run in VM it asks the virtualizer which then asks the host operating system which then uses the host’s <code>/etc/resolv.conf</code> which probably for most users the IP address of their home router which then uses their internet service provider (ISP) DNS server.</p>
<p>It would be very similar if not the same as using <code>nslookup check.torproject.org</code> on the host operating system.</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/23</link>
        <pubDate>Tue, 30 Jun 2020 16:44:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-23</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Thanks for the explanation.</p>
<aside class="quote no-group" data-username="Patrick" data-post="21" data-topic="9831">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>No special/extra DNS resolver package such as bind9 / unbound / dnsmasq required.</p>
</blockquote>
</aside>
<p>Sounds good.</p>
<aside class="quote no-group" data-username="Patrick" data-post="21" data-topic="9831">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Worth going for DNSCrypt? Fingerprintable at ISP level. Required in initial implementation? Also a ton harder to implement.</p>
</blockquote>
</aside>
<p>Overkill. Not worth the trouble without a fitting use case.</p>
<p>What root servers does gethostbyname query? I recommend OpenNIC:<br>
<a href="https://www.opennic.org/" class="onebox" target="_blank">https://www.opennic.org/</a></p>
<p>I don’t trust Google for many reasons including their collusion with oppressive governments if it means they can provide service there.</p>
<p>I guess it depends what root servers are not censored in China</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/22</link>
        <pubDate>Tue, 30 Jun 2020 15:03:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-22</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Applications running on the gateway aren’t Tor control protocol filtered. These have direct access. There’s not a lot such applications to my knowledge except <code>nyx</code>, <code>onioncircuits</code> and <code>vanguards</code>. Pluggable transports do not use Tor control protocol as far as I know. Even if they did, unrestricted access is OK as these applications are trusted and the workstation can’t learn about that (only white listed, filtered Tor control protozoic access).</p>
<p>Leaks from workstation to clearnet are very unlikely as long as we don’t enable IP forwarding. A computer connected over LAN direct connection to another computer doesn’t easily get clearnet internet access. (That 's what IP forwarding is for.) Even if gateway had full unrestricted clearnet access, that wouldn’t allow the workstation accessing any clearnet access. Restricting what gateway leaves the gateway is useful for accidental misconfiguration by users and to anonymize APT upgrade traffic.</p>
<aside class="quote no-group" data-username="HulaHoop" data-post="20" data-topic="9831">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Have you decided on the best/minimal resolver to use?</p>
</blockquote>
</aside>
<p>resolver: None. No special package. Debian standard / default one. libc gethostbyname. My testing instructions above are sufficient. No special/extra DNS resolver package such as bind9 / unbound / dnsmasq required.</p>
<p>It’s a huge jump from “no DNS resolver” to “sophisticated DNS resolver”. Worth going for DNSCrypt? Fingerprintable at ISP level. Required in initial implementation? Also a ton harder to implement.</p>
<p><a href="https://forums.whonix.org/search?q=dnscrypt">https://forums.whonix.org/search?q=dnscrypt</a></p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/21</link>
        <pubDate>Tue, 30 Jun 2020 12:34:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-21</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="18" data-topic="9831">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Therefore a better solution might be a functional system DNS on Whonix-Gateway but for user <code>debian-tor</code> by default only.</p>
</blockquote>
</aside>
<p>Now that you mention the problems with the IP technique (dynamic upstream IP, different resolv.conf settings for ports) I agree with enabling DNS if well restricted to avoid leaks. I didn;t think the separate snowflake binary can work just under debian-tor</p>
<p>With controlport filtering I’m guessing there’s no way Tor can be tricked into passing sensitive info back to the WS.</p>
<p>Have you decided on the best/minimal resolver to use?</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/20</link>
        <pubDate>Tue, 30 Jun 2020 11:46:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-20</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Now what’s a good /etc/resolv.conf for all Whonix platforms?</p>
<p>Does this /etc/resolv.conf work for Whonix KVM?</p>
<pre><code>nameserver 10.0.2.3
</code></pre>
<p>What /etc/resolv.conf would work for Whonix KVM? <a class="mention" href="http://forums.whonix.org/u/hulahoop">@HulaHoop</a></p>
<p>How to test: please revere to my previous post</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/19</link>
        <pubDate>Tue, 30 Jun 2020 08:35:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-19</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Hardcoding IP addresses is really to be avoided. DNS exists  for a reason. These big companies could change IP addresses for whatever reason and that this would keep breaking.</p>
<p>On the other hand I wonder why it’s required. User <code>debian-tor</code> (and thereby the <code>tor</code> process) already has unrestricted network access. But if <code>tor</code> was to run <code>nslookup ajax.aspnetcdn.com</code> that would fail since /etc/resolv.conf on Whonix-Gateway is non-functional.</p>
<p>For Qubes-Whonix-Gateway this would work.</p>
<pre><code>qubesdb-read /qubes-primary-dns | sudo tee /etc/resolv.conf
</code></pre>
<p>But it’s non-persistent.</p>
<p>Tested. Starting as shell under user <code>debian-tor</code>.</p>
<pre><code>sudo -u debian-tor bash
</code></pre>
<p>Test nslookup.</p>
<pre><code>nslookup torproject.org
</code></pre>
<p>Functional.</p>
<p>Therefore a better solution might be a functional system DNS on Whonix-Gateway but for user <code>debian-tor</code> by default only.</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/18</link>
        <pubDate>Tue, 30 Jun 2020 08:08:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-18</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[ldwkcj]]></dc:creator>
        <description><![CDATA[
            <p>Also I think it’s not just <code>ajax.aspnetcdn.com</code> that needs to be included, but also the crucial domains contained in the <code>ClientTransportPlugin</code> line like in <code>-ice stun:stun.l.google.com:19302</code>.</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/17</link>
        <pubDate>Mon, 29 Jun 2020 16:23:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-17</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="15" data-topic="9831">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>We could hardcode gateway /etc/hosts file with pluggable transports and IPs. Ship such a config by default. I guess there is not too many such cases. Better than enabling system DNS for all of Whonix-Gateway. What do you think?</p>
</blockquote>
</aside>
<p>Yes definitely safer that way.</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/16</link>
        <pubDate>Mon, 29 Jun 2020 11:24:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-16</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Upgrade after new image will change it once (as linked in previous post) but shouldn’t do it again.</p>
<p>Edited by previous post. Meant /etc/hosts not /etc/resolv.conf but looks like that didn’t cause confusion.</p>
<p>We could hardcode gateway /etc/hosts file with pluggable transports and IPs. Ship such a config by default. I guess there is not too many such cases. Better than enabling system DNS for all of Whonix-Gateway. What do you think?</p>
<p>//cc <a class="mention" href="http://forums.whonix.org/u/hulahoop">@HulaHoop</a></p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/15</link>
        <pubDate>Mon, 29 Jun 2020 09:26:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-15</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[ldwkcj]]></dc:creator>
        <description><![CDATA[
            <p>Upgrading (<code>dist-upgrade</code>) broke it again. I changed <code>/etc/hosts</code> and it’s seems to work though I don’t know if it work reliably (everytime and without delays in the bootstrap).</p>
<p>Though I wonder if this can be fixed once and for all without this <code>/etc/hosts</code> trick <a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a></p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/14</link>
        <pubDate>Sun, 28 Jun 2020 12:36:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-14</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>There is indeed an upgrade which interacts with /etc/hosts see:</p>
<ul>
<li><a href="https://forums.whonix.org/t/setting-up-anon-base-files-shows-machine-id-prompt-followed-by-ominous-warning/8045" class="inline-onebox">Setting up anon-base-files shows machine-id prompt followed by "OMINOUS WARNING"</a></li>
<li><a href="https://gitlab.com/whonix/whonix-legacy/-/blob/master/debian/whonix-legacy.preinst#L106-113">https://gitlab.com/whonix/whonix-legacy/-/blob/master/debian/whonix-legacy.preinst#L106-113</a></li>
</ul>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/13</link>
        <pubDate>Sat, 27 Jun 2020 22:46:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-13</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Awesome.</p>
<p>In Qubes sys-whonix by default file /etc/resolv.conf is non-persistent.</p>
<p>Not sure you could use bind-dirs for /etc/resolv.conf since that is a symlink.</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.qubes-os.org/attachment/icons/512x512/apps/qubes-logo-icon.png" class="site-icon" width="16" height="16">
      <a href="https://www.qubes-os.org/doc/bind-dirs/" target="_blank">Qubes OS</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="https://www.qubes-os.org/attachment/icons/qubes-logo-icon-name-slogan-fb.png" class="thumbnail" width="690" height="362"></div>

<h3><a href="https://www.qubes-os.org/doc/bind-dirs/" target="_blank">How to make any file in a TemplateBasedVM persistent using bind-dirs</a></h3>

<p>How to make any file in a TemplateBasedVM persistent using bind-dirs What are bind-dirs? With bind-dirs any arbitrary files or folders can be made persistent in TemplateBasedVMs. What is it useful for? In a TemplateBasedVM all of the file system...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>see:</p>
<pre><code>ls -la /etc/resolv.*
</code></pre>
<p>Adding /etc/resolv.conf.whonix to bind-dirs might work.</p>
<p>Or change /etc/resolv.conf in TemplateVM for persistence. (Which would influence all gateway’s based on that template but that wouldn’t matter if you’re using 1 sys-whonix only and/or always using that transport anyhow. See no downside yet of modification of /etc/resolv.conf in whonix-gw TemplateVM.)</p>
<p>On Qubes persistence:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.qubes-os.org/attachment/icons/512x512/apps/qubes-logo-icon.png" class="site-icon" width="16" height="16">
      <a href="https://www.qubes-os.org/doc/templates/#inheritance-and-persistence" target="_blank">Qubes OS</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="https://www.qubes-os.org/attachment/icons/qubes-logo-icon-name-slogan-fb.png" class="thumbnail" width="690" height="362"></div>

<h3><a href="https://www.qubes-os.org/doc/templates/#inheritance-and-persistence" target="_blank">TemplateVMs</a></h3>

<p>TemplateVMs In Getting Started, we covered the distinction in Qubes OS between where you install your software and where you run your software. Your software is installed in TemplateVMs (or “templates” for short). Each TemplateVM shares its root...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/12</link>
        <pubDate>Sat, 27 Jun 2020 22:44:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-12</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[ldwkcj]]></dc:creator>
        <description><![CDATA[
            <p>I messaged a snowflake dev at the Tor Project (dcf) and he had this to say:</p>
<blockquote>
<p>Looks like something in Whonix is preventing snowflake-client from opening a UDP socket to do a DNS lookup for <a href="http://ajax.aspnetcdn.com" rel="nofollow noopener">ajax.aspnetcdn.com</a>. It appears that the earlier STUN exchange is working, though, which also involves an exchange of UDP packets. Perhaps Whonix has a special firewall rule to prevent DNS leaks.</p>
<p>You can try adding this to /etc/hosts:</p>
<pre><code class="lang-auto">152.199.4.33	ajax.aspnetcdn.com
</code></pre>
</blockquote>
<p>I tried it and after a while it finally worked, but when I did <code>sudo service tor restart</code> it stopped working. Since that was inconsistent I ended up re-installing <code>whonix-gw</code> and after setting up snowflake again it seems like everything is working again! Sorry for not trying this last solution, but I just wanted to see if the issue was due to the updates to Whonix (hope I won’t frequent this issue again when I will update <code>whonix-gw</code>)</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/11</link>
        <pubDate>Sat, 27 Jun 2020 22:22:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-11</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>I don’t have a solution for this.</p>
<aside class="quote no-group" data-username="ldwkcj" data-post="8" data-topic="9831" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/3e96dc/40.png" class="avatar"> ldwkcj:</div>
<blockquote>
<p>One question: How can I force whonix-gw to use my user torrc file instead of the one that resulted from Anon-Connection-Wizard?</p>
<p>Possible answer: Do it by changing <code>40_tor_control_panel.conf</code> instead of <code>50_user.conf</code> , I’m I right? But even after changing that one to the snowflake lines I wrote in the previous answer, snowflake still doesn’t work.</p>
</blockquote>
</aside>
<p>You can safely delete the auto generated file. Either its contents or the whole file.</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/10</link>
        <pubDate>Sat, 27 Jun 2020 15:24:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-10</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[ldwkcj]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a><br>
More progress:<br>
I just had to change <code>-log-to-state-dir</code> to <code>-logToStateDir</code> for it to be able to log and this is the error that shows what’s preventing snowflake from working:</p>
<pre><code class="lang-auto">2020/06/27 10:56:09 BrokerChannel Error: dial tcp: lookup ajax.aspnetcdn.com on [scrubbed]: dial udp [scrubbed]: connect: cannot assign requested address
2020/06/27 10:56:09 Failed to retrieve answer. Retrying in 10 seconds
</code></pre>
<p>I even tried with an older version of snowflake (from 9.5a5) and I got the same result.</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/9</link>
        <pubDate>Sat, 27 Jun 2020 10:19:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-9</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[ldwkcj]]></dc:creator>
        <description><![CDATA[
            <p>One question: How can I force whonix-gw to use my user torrc file instead of the one that resulted from Anon-Connection-Wizard?</p>
<p>Possible answer: Do it by changing <code>40_tor_control_panel.conf</code> instead of <code>50_user.conf</code>, I’m I right? But even after changing that one to the snowflake lines I wrote in the previous answer, snowflake still doesn’t work.</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/8</link>
        <pubDate>Sat, 27 Jun 2020 08:00:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-8</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[ldwkcj]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="5" data-topic="9831">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Opportunity to compare configuration files: yours vs created by ACW.</p>
</blockquote>
</aside>
<p>Here’s my user file that I’m still using and that has been working with Snowflake for months:</p>
<pre><code>UseBridges 1

ClientTransportPlugin snowflake exec /usr/bin/snowflake-client -url https://snowflake-broker.azureedge.net/ -front ajax.aspnetcdn.com -ice stun:stun.l.google.com:19302

Bridge snowflake 0.0.3.0:1 2B280B23E1107BB62ABFC40DDCC8824814F80A72
</code></pre>
<aside class="quote no-group" data-username="Patrick" data-post="6" data-topic="9831">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>My tests outside of Whonix using TBB build-in bridge:</p>
<ul>
<li>TBB 10.0a1 public Tor network: functional</li>
<li>TBB 10.0a1 snowflake: broken</li>
</ul>
</blockquote>
</aside>
<p>With snowflake it’s a 50/50 (at least for my NAT), so you just have to <code>sudo service tor restart</code> (or with TB just click on Back and re-configure to snowflake) and it will hopefully work (snowflake is working for me right now with a fresh TB install).</p>
<aside class="quote no-group" data-username="Patrick" data-post="6" data-topic="9831">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Instructions updated. Tor restart nowadays required for unknown reason and reload insufficient. Didn’t investigate.</p>
</blockquote>
</aside>
<p>I’ve always used <code>sudo service tor restart</code> instead of <code>reload</code>, but it’s still not working.</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/7</link>
        <pubDate>Sat, 27 Jun 2020 08:00:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-7</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Instructions updated. Tor restart nowadays required for unknown reason and reload insufficient. Didn’t investigate. And while that was a worthwhile fix it didn’t fix the root cause.</p>
<hr>
<p>My tests outside of Whonix using TBB build-in bridge:</p>
<ul>
<li>TBB 10.0a1 public Tor network: functional</li>
<li>TBB 10.0a1 snowflake: broken</li>
</ul>
<blockquote>
<p>6/25/20, 10:12:14.316 [NOTICE] DisableNetwork is set. Tor will not make or accept non-control network connections. Shutting down all existing connections.<br>
6/25/20, 10:12:14.316 [NOTICE] Switching to guard context “bridges” (was using “default”)<br>
6/25/20, 10:12:14.316 [NOTICE] DisableNetwork is set. Tor will not make or accept non-control network connections. Shutting down all existing connections.<br>
6/25/20, 10:12:14.316 [NOTICE] DisableNetwork is set. Tor will not make or accept non-control network connections. Shutting down all existing connections.<br>
6/25/20, 10:12:14.316 [NOTICE] Opening Socks listener on 127.0.0.1:9150<br>
6/25/20, 10:12:14.316 [NOTICE] Opened Socks listener on 127.0.0.1:9150<br>
6/25/20, 10:12:14.316 [NOTICE] Renaming old configuration file to “/home/user/.tb/tor-browser/Browser/TorBrowser/Data/Tor/torrc.orig.1”<br>
6/25/20, 10:12:15.766 [NOTICE] Bootstrapped 1% (conn_pt): Connecting to pluggable transport<br>
6/25/20, 10:12:15.768 [NOTICE] Bootstrapped 2% (conn_done_pt): Connected to pluggable transport<br>
6/25/20, 10:12:15.769 [NOTICE] Bootstrapped 10% (conn_done): Connected to a relay<br>
6/25/20, 10:16:49.793 [NOTICE] Closing no-longer-configured Socks listener on 127.0.0.1:9150<br>
6/25/20, 10:16:49.793 [NOTICE] DisableNetwork is set. Tor will not make or accept non-control network connections. Shutting down all existing connections.<br>
6/25/20, 10:16:49.793 [WARN] Problem bootstrapping. Stuck at 10% (conn_done): Connected to a relay. (DONE; DONE; count 1; recommendation warn; host 2B280B23E1107BB62ABFC40DDCC8824814F80A72 at 0.0.3.0:1)<br>
6/25/20, 10:16:49.794 [WARN] 1 connections have failed:<br>
6/25/20, 10:16:49.794 [WARN] 1 connections died in state handshaking (TLS) with SSL state SSLv3/TLS write client hello in HANDSHAKE<br>
6/25/20, 10:16:49.806 [WARN] Pluggable Transport process terminated with status code 0<br>
6/25/20, 10:16:49.816 [NOTICE] DisableNetwork is set. Tor will not make or accept non-control network connections. Shutting down all existing connections.</p>
</blockquote>
<ul>
<li>TBB 10.0a1 meek azure: broken</li>
</ul>
<blockquote>
<p>1 connections died in state handshaking (TLS) with SSL state SSLv3/TLS write client hello in HANDSHAKE</p>
</blockquote>
<ul>
<li>TBB 10.0a1 obfs4: functional</li>
</ul>
<hr>
<p>Could be snowflake upstream issues:</p>
<p><a href="https://trac.torproject.org/projects/tor/ticket/33756" class="onebox" target="_blank">https://trac.torproject.org/projects/tor/ticket/33756</a><br>
<a href="https://trac.torproject.org/projects/tor/ticket/33666" class="onebox" target="_blank">https://trac.torproject.org/projects/tor/ticket/33666</a><br>
<a href="https://trac.torproject.org/projects/tor/ticket/25723" class="onebox" target="_blank">https://trac.torproject.org/projects/tor/ticket/25723</a></p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/6</link>
        <pubDate>Thu, 25 Jun 2020 09:28:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-6</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>This was functional before.</p>
<p><a href="https://www.whonix.org/wiki/Bridges#Snowflake">https://www.whonix.org/wiki/Bridges#Snowflake</a></p>
<p>I didn’t change anything related. At least not knowingly.</p>
<blockquote>
<p>after I add -log snowflake-client.log -log-to-state-dir</p>
</blockquote>
<blockquote>
<p>[WARN] Managed proxy at ‘/usr/bin/snowflake-client’ reported: flag provided but not defined:<br>
-log-to-state-dir</p>
</blockquote>
<p>I doubt that follow up issue is caused by Whonix. snowflake telling you that exactly what you added <code>-log-to-state-dir </code> isn’t supported.</p>
<aside class="quote no-group" data-username="ldwkcj" data-post="2" data-topic="9831">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/3e96dc/40.png" class="avatar"> ldwkcj:</div>
<blockquote>
<p>When I setup obfs4 using the <code>Anon-Connection-Wizard</code> the previous obfs4 that I used worked fine.</p>
</blockquote>
</aside>
<p>Opportunity to compare configuration files: yours vs created by ACW.</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/5</link>
        <pubDate>Thu, 25 Jun 2020 08:57:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-5</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[ldwkcj]]></dc:creator>
        <description><![CDATA[
            <p>As I said it’s not just snowflake, obfs4 also wasn’t working if I change the <code>/usr/local/etc/torrc.d/50_user.conf</code> file (but works for some reason with <code>Anon-Connection-Wizard</code>). Also snowflake used to work fine before the date I gave (for more than 8 months approximately).</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/4</link>
        <pubDate>Wed, 24 Jun 2020 14:10:04 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-4</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
      <item>
        <title>Did pluggable transports stop working for you?</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Snowflake is still new and could have bugs or our design isn’t currently compatible with it. I don’t think we have it packaged and installed on the GW</p>
          <p><a href="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831/3</link>
        <pubDate>Wed, 24 Jun 2020 14:05:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9831-3</guid>
        <source url="http://forums.whonix.org/t/did-pluggable-transports-stop-working-for-you/9831.rss">Did pluggable transports stop working for you?</source>
      </item>
  </channel>
</rss>
