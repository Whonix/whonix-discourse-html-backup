<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>New Tor ControlPort commands wanted by TBB 4.5 and above</title>
    <link>http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772</link>
    <description>There is some news about what Tor ControlPort commands will be used in TBB 4.5 and above. Documented here:
https://www.whonix.org/wiki/Dev/Control_Port_Filter_Proxy#Future_Tor_ControlPort_Commands</description>
    <language>en</language>
    <lastBuildDate>Fri, 06 Mar 2015 18:09:02 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>New Tor ControlPort commands wanted by TBB 4.5 and above</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>It’s not clear to me what “setevents stream” is doing. It could be, that it’s nothing evil. Still need to figure out what Tor Browser is using it for to determine if we must better enable it for some reason.</p>
<p>Does anyone know where in <a href="https://gitweb.torproject.org/torspec.git/tree/control-spec.txt">https://gitweb.torproject.org/torspec.git/tree/control-spec.txt</a> it’s documented?</p>
<p>I invite you to directly talk to Tor’s ControlPort (this is not possible using the current filter proxies or arm, because none of them seems to support events)… Documented here how you look what “setevents stream” is outputting:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Dev/Control_Port_Filter_Proxy#Talking_to_the_real_Tor_Control_Port" target="_blank" title="02:32AM - 06 November 2019">Whonix – 6 Nov 19</a>
  </header>
  <article class="onebox-body">
    <img src="" class="thumbnail" width="" height="">

<h3><a href="https://www.whonix.org/wiki/Dev/Control_Port_Filter_Proxy#Talking_to_the_real_Tor_Control_Port" target="_blank">onion-grater, a Tor Control Port Filter Proxy - filtering dangerous Tor...</a></h3>

<p>onion-grater, a Tor Control Port Filter Proxy - filtering dangerous Tor Control Port commands - Design Documentation</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
          <p><a href="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/12</link>
        <pubDate>Fri, 06 Mar 2015 18:09:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-772-12</guid>
        <source url="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772.rss">New Tor ControlPort commands wanted by TBB 4.5 and above</source>
      </item>
      <item>
        <title>New Tor ControlPort commands wanted by TBB 4.5 and above</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Looking at “setevents stream” again… Therefore time to update this thread a bit.</p>
<aside class="quote no-group" data-username="troubadour" data-post="6" data-topic="772">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/d9b06d/40.png" class="avatar"> troubadour:</div>
<blockquote>
<p>I could not test TBB 4.5 in Whonix (it freezes, no time to investigate).</p>
</blockquote>
</aside>
<p>–&gt; <a href="https://phabricator.whonix.org/T218">https://phabricator.whonix.org/T218</a></p>
<aside class="quote no-group quote-modified" data-username="troubadour" data-post="8" data-topic="772">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/d9b06d/40.png" class="avatar"> troubadour:</div>
<blockquote>
<p>[quote]So that’s not hard. Just adding the config switch would require a few more lines of code.</p>
</blockquote>
</aside>
<p>If you can do that, I could test the next TBB version once in a while, trying to prevent last minute surprises, yes. Just give the modified code here, and I can run it in a separate Whonix installation. For reminding, two is better than one.[/quote]</p>
<p>By the way, choosing TBB versions now became even simpler than that, <a href="https://phabricator.whonix.org/T149" data-bbcode="true">thanks to troubadour!</a></p>
<p>(From <a href="https://phabricator.whonix.org/T214">https://phabricator.whonix.org/T214</a> see screenshot:)<br>
<img src="https://phabricator.whonix.org/file/data/lonrn52w4hiivp7h5bem/PHID-FILE-6scg6fuvnvqa7inh7mec/tb-updater_confirmation.png" alt="" width="681" height="495"></p>
          <p><a href="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/11</link>
        <pubDate>Fri, 06 Mar 2015 18:00:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-772-11</guid>
        <source url="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772.rss">New Tor ControlPort commands wanted by TBB 4.5 and above</source>
      </item>
      <item>
        <title>New Tor ControlPort commands wanted by TBB 4.5 and above</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="1" data-topic="773">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/c/e19adc/40.png" class="avatar"><a href="//forums.whonix.org/t/fake-control-port/773/1">Fake Control Port</a>
</div>
<blockquote>
<p>…</p>
</blockquote>
</aside>
<p>Fake Control Port discussion moved here:<br>
<a href="https://www.whonix.org/forum/index.php/topic,866.0.html" class="onebox" target="_blank">https://www.whonix.org/forum/index.php/topic,866.0.html</a></p>
          <p><a href="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/10</link>
        <pubDate>Fri, 09 Jan 2015 15:42:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-772-10</guid>
        <source url="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772.rss">New Tor ControlPort commands wanted by TBB 4.5 and above</source>
      </item>
      <item>
        <title>New Tor ControlPort commands wanted by TBB 4.5 and above</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Indeed. Done:<br>
<a href="https://www.whonix.org/forum/index.php/topic,860.0.html" class="onebox" target="_blank">https://www.whonix.org/forum/index.php/topic,860.0.html</a></p>
          <p><a href="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/9</link>
        <pubDate>Tue, 06 Jan 2015 21:10:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-772-9</guid>
        <source url="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772.rss">New Tor ControlPort commands wanted by TBB 4.5 and above</source>
      </item>
      <item>
        <title>New Tor ControlPort commands wanted by TBB 4.5 and above</title>
        <dc:creator><![CDATA[troubadour]]></dc:creator>
        <description><![CDATA[
            <blockquote>So that's not hard. Just adding the config switch would require a few more lines of code.</blockquote>
If you can do that, I could test the next TBB version once in a while, trying to prevent last minute surprises, yes. Just give the modified code here, and I can run it in a separate Whonix installation. For reminding, two is better than one.
          <p><a href="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/8</link>
        <pubDate>Tue, 06 Jan 2015 20:42:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-772-8</guid>
        <source url="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772.rss">New Tor ControlPort commands wanted by TBB 4.5 and above</source>
      </item>
      <item>
        <title>New Tor ControlPort commands wanted by TBB 4.5 and above</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Yes.</p>
<p>[hr]</p>
<p>We should test it when they release next alpha/beta. Someone should keep testing them anyhow so we don’t run into big surprises on next stable release. I try remember that. It would not be that hard to add an alpha/beta option to tb-updater, if that would help. I just manually commented out these three lines. (<a href="https://github.com/Whonix/tb-updater/blob/master/usr/lib/tbbversion_parser#L70">https://github.com/Whonix/tb-updater/blob/master/usr/lib/tbbversion_parser#L70</a>)</p>
<pre><code class="lang-auto">echo "$line" | grep -q -i -s "\-alpha\-"
if [ "$?" = "0" ]; then
   continue
fi</code></pre>
<p>So that’s not hard. Just adding the config switch would require a few more lines of code.</p>
          <p><a href="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/7</link>
        <pubDate>Mon, 05 Jan 2015 17:10:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-772-7</guid>
        <source url="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772.rss">New Tor ControlPort commands wanted by TBB 4.5 and above</source>
      </item>
      <item>
        <title>New Tor ControlPort commands wanted by TBB 4.5 and above</title>
        <dc:creator><![CDATA[troubadour]]></dc:creator>
        <description><![CDATA[
            <p>Good news indeed!</p>
<p>So, we are left (so far) with “setevents stream” and “GETINFO config-text”. I could not test TBB 4.5 in Whonix (it freezes, no time to investigate). If the filtering does not break it, I gather that we can leave cpfp.py untouched.</p>
          <p><a href="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/6</link>
        <pubDate>Mon, 05 Jan 2015 16:29:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-772-6</guid>
        <source url="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772.rss">New Tor ControlPort commands wanted by TBB 4.5 and above</source>
      </item>
      <item>
        <title>New Tor ControlPort commands wanted by TBB 4.5 and above</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Good News about the Network Settings menu.</p>
<p><span class="hashtag">#14100:</span> Toggle NetworkSettings menuitem visibility based on an environment variable:<br>
<a href="https://trac.torproject.org/projects/tor/ticket/14100" class="onebox" target="_blank">https://trac.torproject.org/projects/tor/ticket/14100</a></p>
<p>linostar wrote a working patch!</p>
          <p><a href="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/5</link>
        <pubDate>Mon, 05 Jan 2015 14:38:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-772-5</guid>
        <source url="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772.rss">New Tor ControlPort commands wanted by TBB 4.5 and above</source>
      </item>
      <item>
        <title>New Tor ControlPort commands wanted by TBB 4.5 and above</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>I tend to mostly agree with HulaHoop.</p>
<p>Looks like for answering “510 Prohibited command” doesn’t break anything for and it works. For now there should be no fingerprinting issues but I fear in future they might implement something that creates a catch 22.</p>
<p>Let’s see how they implement clock-skew and others. They’re not necessarily all evil.</p>
<p>[hr]</p>
<p>In future they are likely going to add nice usability improvements. Such as this. Looks like a nice usability feature to cope up with Tor’s slowness:<br>
<img src="https://trac.torproject.org/projects/tor/raw-attachment/ticket/8641/mockup_torCircuitStatus.png" alt="" width="431" height="116"></p>
<p>Too bad we might not be able to use it.</p>
          <p><a href="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/4</link>
        <pubDate>Sat, 03 Jan 2015 23:22:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-772-4</guid>
        <source url="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772.rss">New Tor ControlPort commands wanted by TBB 4.5 and above</source>
      </item>
      <item>
        <title>New Tor ControlPort commands wanted by TBB 4.5 and above</title>
        <dc:creator><![CDATA[troubadour]]></dc:creator>
        <description><![CDATA[
            <p>I’m sure you know already, but to make it clear for everyone, the replies to the new requests used by TBB 4.5 (with cpfp.py and CONTROL_PORT_FILTER_DISABLE_FILTERING=true).</p>
<p>“setevents stream”</p>
<pre><code class="lang-auto">Request: setevents stream
Answer: 250 OK</code></pre>
<p>“getinfo config-text”</p>
<pre><code class="lang-auto">Request: GETINFO config-text
Answer : 250+config-text=
DisableNetwork 0
DirReqStatistics 0
.
250 OK</code></pre>
<p>TorButton -&gt; Open Network Settings… (without bridge)</p>
<pre><code class="lang-auto">Request: GETCONF Socks4Proxy
Answer : 250 Socks4Proxy

Request: GETCONF Socks5Proxy
Answer : 250 Socks5Proxy

Request: GETCONF HTTPSProxy
Answer : 250 HTTPSProxy

Request: GETCONF ReachableAddresses
Answer : 250 ReachableAddresses

Request: GETCONF UseBridges
Answer : 250 UseBridges=0

Request: GETCONF Bridge
Answer : 250 Bridge</code></pre>
          <p><a href="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/3</link>
        <pubDate>Sat, 03 Jan 2015 22:41:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-772-3</guid>
        <source url="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772.rss">New Tor ControlPort commands wanted by TBB 4.5 and above</source>
      </item>
      <item>
        <title>New Tor ControlPort commands wanted by TBB 4.5 and above</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>To decide what information software on the workstation can access we use a strictly <span class="bbcode-b">need</span> to know basis.</p>
<p>They are all terrible things to allow and should be blocked or lied to. My recommendation is to default block them and if they break, use lies to make them happy.</p>
<p><span class="bbcode-b">“getinfo config-text”</span> undesirable<br>
<span class="bbcode-b">"setevents stream"</span> and <span class="bbcode-b">TorButton Network Settings</span> should be blocked or given generic lies to hide gateway configuration. Information about what nodes or bridges should NEVER be given to a software inside the ws. This is important as we should treat the inside of the ws as malicious in the threat model.  Lets say a Hidden Server is rooted, knowing what guardnode is used by it is catastrophic. The TBB threat model thinks that the machine is secure and that this is useful information for the user to have.</p>
<p><span class="bbcode-b">feedback mechanism for clock-skew</span> Its purpose is to tell the user about problems (clock skews) that prevent Tor from working. We already have an entire infrastructure to make sure Tor’s clock is functioning and to notify the user about problems: whonixcheck, timesync. Giving access to Tor log events before a connection is established to the workstation is leaking more unnecessary information.</p>
          <p><a href="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/2</link>
        <pubDate>Sat, 03 Jan 2015 17:08:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-772-2</guid>
        <source url="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772.rss">New Tor ControlPort commands wanted by TBB 4.5 and above</source>
      </item>
      <item>
        <title>New Tor ControlPort commands wanted by TBB 4.5 and above</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>There is some news about what Tor ControlPort commands will be used in TBB 4.5 and above. Documented here:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Dev/Control_Port_Filter_Proxy#Future_Tor_ControlPort_Commands" target="_blank" title="02:32AM - 06 November 2019">Whonix – 6 Nov 19</a>
  </header>
  <article class="onebox-body">
    <img src="" class="thumbnail" width="" height="">

<h3><a href="https://www.whonix.org/wiki/Dev/Control_Port_Filter_Proxy#Future_Tor_ControlPort_Commands" target="_blank">onion-grater, a Tor Control Port Filter Proxy - filtering dangerous Tor...</a></h3>

<p>onion-grater, a Tor Control Port Filter Proxy - filtering dangerous Tor Control Port commands - Design Documentation</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
          <p><a href="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772/1</link>
        <pubDate>Sat, 03 Jan 2015 14:14:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-772-1</guid>
        <source url="http://forums.whonix.org/t/new-tor-controlport-commands-wanted-by-tbb-4-5-and-above/772.rss">New Tor ControlPort commands wanted by TBB 4.5 and above</source>
      </item>
  </channel>
</rss>
