<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>DDOS protection / mitigation for hidden service hosted with whonix - Support - Whonix Forum</title>
    <meta name="description" content="hello, im hosting a hidden service on whonix. someone is ddosing it and i can see very high spikes of download/upload on ARM on the whonix-gateway. 
In the whonix-workstation I installed mod security, quos and hardened a&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="2129.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;DDOS protection / mitigation for hidden service hosted with whonix&#39;" href="2129.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/ddos-protection-mitigation-for-hidden-service-hosted-with-whonix/2129" />
<meta name="twitter:url" content="https://forums.whonix.org/t/ddos-protection-mitigation-for-hidden-service-hosted-with-whonix/2129" />
<meta property="og:title" content="DDOS protection / mitigation for hidden service hosted with whonix" />
<meta name="twitter:title" content="DDOS protection / mitigation for hidden service hosted with whonix" />
<meta property="og:description" content="hello, im hosting a hidden service on whonix. someone is ddosing it and i can see very high spikes of download/upload on ARM on the whonix-gateway.  In the whonix-workstation I installed mod security, quos and hardened apache as much as i could, but it doesnt stop. Im pretty sure i should do something on the whonix-gateway to protect my hidden serivice from ddos attacks. what can i do? without whonix fail2ban would work but here i dont know how. Please help.   Edit by Patrick:  https://www.whoni..." />
<meta name="twitter:description" content="hello, im hosting a hidden service on whonix. someone is ddosing it and i can see very high spikes of download/upload on ARM on the whonix-gateway.  In the whonix-workstation I installed mod security, quos and hardened apache as much as i could, but it doesnt stop. Im pretty sure i should do something on the whonix-gateway to protect my hidden serivice from ddos attacks. what can i do? without whonix fail2ban would work but here i dont know how. Please help.   Edit by Patrick:  https://www.whoni..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ‚ù§" />
<meta property="article:published_time" content="2016-02-22T19:26:32+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="2129.html">DDOS protection / mitigation for hidden service hosted with whonix</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/support/5.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #8C6238'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Support</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/vtfuyih'><span itemprop='name'>vtfuyih</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="2129.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-02-22T19:26:32Z' class='post-time'>
                February 22, 2016,  7:26pm
              </time>
              <meta itemprop='dateModified' content='2022-05-01T17:26:03Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>hello, im hosting a hidden service on whonix. someone is ddosing it and i can see very high spikes of download/upload on ARM on the whonix-gateway.</p>
<p>In the whonix-workstation I installed mod security, quos and hardened apache as much as i could, but it doesnt stop. Im pretty sure i should do something on the whonix-gateway to protect my hidden serivice from ddos attacks. what can i do? without whonix fail2ban would work but here i dont know how. Please help.</p>
<hr>
<p><strong>Edit by Patrick:</strong><br>
<strong><a href="../../../external.html?link=https://www.whonix.org/wiki/Onion_Services#OnionBalance" rel="noopener nofollow ugc">https://www.whonix.org/wiki/Onion_Services#OnionBalance</a></strong></p>
        </div>

        <meta itemprop='headline' content='DDOS protection / mitigation for hidden service hosted with whonix'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Ego'><span itemprop='name'>Ego</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="2129.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-02-22T19:33:44Z' class='post-time'>
                February 22, 2016,  7:33pm
              </time>
              <meta itemprop='dateModified' content='2016-02-22T19:33:44Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Good day,</p>
<p>changing something about the GW won‚Äôt help you with DOS/DDOS attacks, as they‚Äôd still reach you. Preventing such attacks on a hidden service works just the same as on a ‚Äúnormal website‚Äù, simply send anyone trying to reach you to a simple, light site which can‚Äôt create much overhead, were they have to somehow verify that they are real (e.g. via captcha).</p>
<p>Also, you may regard this: <a href="../../../external.html?link=https://blog.torproject.org/blog/new-tor-denial-service-attacks-and-defenses">https://blog.torproject.org/blog/new-tor-denial-service-attacks-and-defenses</a></p>
<p>Have a nice day,</p>
<p>Ego</p>
        </div>

        <meta itemprop='headline' content='DDOS protection / mitigation for hidden service hosted with whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/vtfuyih'><span itemprop='name'>vtfuyih</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="2129.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-02-22T22:36:35Z' class='post-time'>
                February 22, 2016, 10:36pm
              </time>
              <meta itemprop='dateModified' content='2016-02-22T22:36:35Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hello, yes i redirect everyone to a captcha before they can enter the website.<br>
I know that preventing this stuff works the same as for clearnet, what i meant is that with whonix specifically i dont know if i should do anything on the gateway as well, since on the workstation and apache im doing everything possible to protect from ddos attacks. This is making the website offline for every legit user anyway.</p>
        </div>

        <meta itemprop='headline' content='DDOS protection / mitigation for hidden service hosted with whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Ego'><span itemprop='name'>Ego</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="2129.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-02-22T22:42:04Z' class='post-time'>
                February 22, 2016, 10:42pm
              </time>
              <meta itemprop='dateModified' content='2016-02-22T22:42:04Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Good day,</p>
<p>the only thing I can recommend then, would be switching from Apache to lighttpd, as it has the least overhead of any server and thus should be more stable. That‚Äôs the reason we actually recommend it in our guide to hidden service hosting, see: <a href="../../../external.html?link=https://www.whonix.org/wiki/Hidden_Services">https://www.whonix.org/wiki/Hidden_Services</a></p>
<p>There is nothing really specific about Whonix which could really help you to solve this problem. Maybe increasing the RAM assigned, or, if you use VBox, looking at the more efficient alternatives (especially Qubes) could help reduce overload even more.</p>
<p>Have a nice day,</p>
<p>Ego</p>
        </div>

        <meta itemprop='headline' content='DDOS protection / mitigation for hidden service hosted with whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/vtfuyih'><span itemprop='name'>vtfuyih</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="2129.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-02-23T16:57:34Z' class='post-time'>
                February 23, 2016,  4:57pm
              </time>
              <meta itemprop='dateModified' content='2016-02-23T17:02:46Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I tried with both lighttpd and others, still overloads from too much traffic.<br>
I will try to transfer it into a server with a higher bandwidth tomorrow.<br>
Setting more resources to vbox doesnt do anything. I even tried 4 cpu cores for each virtual machine and 8 gb of ram. With more easy settings like 2 cpu cores / 2gb of ram for the workstation and 1 cpu core / 1gb ram for the gateway they use &lt; 30% of resources, so those are not the bottleneck, but the bandwidth it is since they keep filling it and it overloads.</p>
<p>But more generally what can be done to protect a tor hidden service from ddos and similar attacks?</p>
<p>With a .com clear website you can find help in services like cloudflare and use fail2ban with the apache / nginx filters, in addition to all the various apache mods and configurations. With a tor hidden service you dont have cloudflare.</p>
<p>Also with whonix every ip address in the apache access logs on the whonix-workstation is 10.152.152.10 (aka the whonix-gateway).<br>
In the whonix-gateway tor logs there are entries like ‚Äúopen sock listener on‚Äù, ‚Äúyou configured a non-loopback adress‚Äù, ‚Äúopening socks listener‚Äù and either 127.0.0.1 or 10.152.152.10.</p>
<p>A fail2ban filter to ban the ip when it makes too many requests would be useful on the whonix-gateway and also on the workstation? i cant find a filter for that. it should ban either 127.0.0.1 or 10.152.152.10 on both virtual machines. On the workstation fail2ban can inspect apache logs but i dont know how to implement the same thing with tor logs on the gateway.<br>
Also i think something should be done in the gateway as well, because i can ban everyone in the workstation fail2ban settings but the gateway its still naked, it receives all the spammy requests and sends them to apache on the worstation. I need to block it at the source <img src="../../images/emoji/twitter/slightly_smilingae52.png?v=5" title=":slightly_smiling:" class="emoji" alt=":slightly_smiling:"></p>
<p>I havent slept so sorry for spaghetti explanation, to me right now it looks clear but yet i dont know what to do.<br>
Thank you</p>
        </div>

        <meta itemprop='headline' content='DDOS protection / mitigation for hidden service hosted with whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Ego'><span itemprop='name'>Ego</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="2129.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-02-23T17:59:24Z' class='post-time'>
                February 23, 2016,  5:59pm
              </time>
              <meta itemprop='dateModified' content='2016-02-23T17:59:24Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Good day,</p>
<aside class="quote" data-post="5" data-topic="2129">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/v/ccd318/40.png" class="avatar"> vtfuyih:</div>
<blockquote>
<p>But more generally what can be done to protect a tor hidden service from ddos and similar attacks?</p>
</blockquote>
</aside>
<p>Sorry to say, but my previous answer contains pretty much all possibilities.</p>
<aside class="quote" data-post="5" data-topic="2129">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/v/ccd318/40.png" class="avatar"> vtfuyih:</div>
<blockquote>
<p>With a .com clear website you can find help in services like cloudflare and use fail2ban with the apache / nginx filters, in addition to all the various apache mods and configurations. With a tor hidden service you dont have cloudflare.</p>
</blockquote>
</aside>
<p>Well, what cloudflare does is pretty much ‚Äúput‚Äù their (massive) server between yours and show a captcha if the IP is suspicious. In the case of a hidden service, for this you‚Äôd have to trust a third party. So, not an option.</p>
<aside class="quote" data-post="5" data-topic="2129">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/v/ccd318/40.png" class="avatar"> vtfuyih:</div>
<blockquote>
<p>A fail2ban filter to ban the ip when it makes too many requests would be useful on the whonix-gateway and also on the workstation?</p>
</blockquote>
</aside>
<p>Sadly isn‚Äôt possible. The way a hidden service is accessed is very different from a normal website. If you look at this, you‚Äôll see that the whole design of a hidden service makes it impossible to block anyone: <a href="../../../external.html?link=https://www.torproject.org/docs/hidden-services.html.en">https://www.torproject.org/docs/hidden-services.html.en</a> You‚Äôd at best block your own rendezvous, which means, no one will be able to access your site, no matter if friend or foe.</p>
<aside class="quote" data-post="5" data-topic="2129">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/v/ccd318/40.png" class="avatar"> vtfuyih:</div>
<blockquote>
<p>it should ban either 127.0.0.1 or 10.152.152.10 on both virtual machines.</p>
</blockquote>
</aside>
<p>Those are all local IPs. You‚Äôd essentially block yourself then. Sorry.</p>
<aside class="quote" data-post="5" data-topic="2129">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/v/ccd318/40.png" class="avatar"> vtfuyih:</div>
<blockquote>
<p>Also i think something should be done in the gateway as well, because i can ban everyone in the workstation fail2ban settings but the gateway its still naked, it receives all the spammy requests and sends them to apache on the worstation. I need to block it at the source <img src="../../images/emoji/twitter/slightly_smilingae52.png?v=5" title=":slightly_smiling:" class="emoji" alt=":slightly_smiling:"></p>
</blockquote>
</aside>
<p>Like mentioned before you can‚Äôt block anyone from accessing your hidden service that way, because people don‚Äôt directly connect to you, they use rendezvous points which, if blocked, would lead to noone beeing able to access you.</p>
<aside class="quote" data-post="5" data-topic="2129">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/v/ccd318/40.png" class="avatar"> vtfuyih:</div>
<blockquote>
<p>I havent slept</p>
</blockquote>
</aside>
<p>Me neither.</p>
<p>The only thing you could do in theory, would be ask for a password via a prompt. Seen a few hidden service do that some time ago. They‚Äôd put the necessary password in the prompt to, so anyone could access the site, so it was simply another layer of verification.</p>
<p>Have a nice day,</p>
<p>Ego</p>
        </div>

        <meta itemprop='headline' content='DDOS protection / mitigation for hidden service hosted with whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="2129.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-02-23T19:47:31Z' class='post-time'>
                February 23, 2016,  7:47pm
              </time>
              <meta itemprop='dateModified' content='2016-02-23T19:47:31Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>There is some onion load balancing software somewhere on github. Type<br>
"tor onion load balancing" or so into search engines and you should find it.</p>
        </div>

        <meta itemprop='headline' content='DDOS protection / mitigation for hidden service hosted with whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/anon36816226'><span itemprop='name'>anon36816226</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="2129.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-02-23T20:51:32Z' class='post-time'>
                February 23, 2016,  8:51pm
              </time>
              <meta itemprop='dateModified' content='2016-02-23T20:51:32Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I think Patrick talks about<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://assets-cdn.github.com/favicon.ico" class="site-icon" width="32" height="32">
      <a href="../../../external.html?link=https://github.com/DonnchaC/onionbalance" target="_blank" rel="nofollow noopener">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="../../../external.html?link=https://avatars3.githubusercontent.com/u/3081375?s=400&amp;v=4" class="thumbnail onebox-avatar" width="400" height="400">

<h3><a href="../../../external.html?link=https://github.com/DonnchaC/onionbalance" target="_blank" rel="nofollow noopener">DonnchaC/onionbalance</a></h3>

<p>onionbalance - OnionBalance provides load-balancing and redundancy for Tor hidden services</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>
<span class="mention">@OP</span> if your Userbase is small you could try HS-Auth <a href="../../../external.html?link=https://www.whonix.org/wiki/Hidden_Services#Hidden_Service_Authentication" rel="nofollow noopener">https://www.whonix.org/wiki/Hidden_Services#Hidden_Service_Authentication</a><br>
or you could take a look at<br>
<a href="../../../external.html?link=https://github.com/korfuri/odon" rel="nofollow noopener">https://github.com/korfuri/odon</a></p>
<p>Hope it helps</p>
<ul>
<li>Goldstein</li>
</ul>
        </div>

        <meta itemprop='headline' content='DDOS protection / mitigation for hidden service hosted with whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="2129.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-05-01T17:26:19Z' class='post-time'>
                May 1, 2022,  5:26pm
              </time>
              <meta itemprop='dateModified' content='2022-05-01T17:26:19Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><strong><a href="../../../external.html?link=https://www.whonix.org/wiki/Onion_Services#OnionBalance">https://www.whonix.org/wiki/Onion_Services#OnionBalance</a></strong></p>
        </div>

        <meta itemprop='headline' content='DDOS protection / mitigation for hidden service hosted with whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
