<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Error in create-local-temp-apt-repo - Building a minimal physical gateway</title>
    <link>http://forums.whonix.org/t/error-in-create-local-temp-apt-repo-building-a-minimal-physical-gateway/14639</link>
    <description>Hello friends !
Can you help me please :) 
* I tried to setup Whonix Gateway on separate hardware.
* I did all steps to prepare the host system.#
* I have a standard intel x64 mini pc for that.

I only want a very minimal working gateway. There I used the:
*## example list for minimal rpi gateway*
and removed the *pkg_list_create()* function in this file:
*/buildconfig.d/30_pkg_list.conf*

Then I used this build command:
`sudo ./derivative-maker --flavor whonix-gateway-xfce --target root --build --sanity-tests false --allow-uncommitted true --allow-untagged true`

**I got this error:**
```

ERROR in /home/user/derivative-maker/help-steps/create-local-temp-apt-repo detected!
```
...
`last_failed_bash_command: mount --bind &quot;$dist_apt_repository_folder&quot; &quot;$CHROOT_FOLDER/$DEB_INSTALL_FOLDER/$derivative_name_item&quot;`

**Full log:**


```

INFO: Setting... export UWT_DEV_PASSTHROUGH=&quot;1&quot;
INFO: Variable dist_build_version was already set to: 16.0.5.3
++ true &#39;INFO: Currently running script: /home/user/derivative-maker/help-steps/create-local-temp-apt-repo &#39;
++ true &#39;INFO: LD_PRELOAD: &#39;
+ main
+ root_check
++ id -u
+ &#39;[&#39; 0 &#39;!=&#39; 0 &#39;]&#39;
+ echo &#39;INFO: Script running as root.&#39;
INFO: Script running as root.
+ true &#39;derivative_name_list: kicksecure whonix&#39;
+ for derivative_name_item in $derivative_name_list
+ set_dist_build_reprepro_folder_options
+ true &#39;derivative_name_item: kicksecure&#39;
+ &#39;[&#39; kicksecure = &#39;&#39; &#39;]&#39;
+ &#39;[&#39; &#39;&#39; = &#39;&#39; &#39;]&#39;
+ reprepro_codename=local
+ &#39;[&#39; local = local &#39;]&#39;
+ apt_repo_sub_folder=aptrepo_local/kicksecure
+ dist_apt_repository_folder=/home/user/derivative-binary/aptrepo_local/kicksecure
+ export dist_apt_repository_folder
+ dist_build_reprepro_folder_options=&#39;      --basedir /home/user/derivative-maker/aptrepo_local/kicksecure       --outdir /home/user/derivative-binary/aptrepo_local/kicksecure       --dbdir /home/user/derivative-binary/aptrepo_local/kicksecure/db       --logdir /home/user/derivative-binary/aptrepo_local/kicksecure/log&#39;
+ export dist_build_reprepro_folder_options
+ mkdir --parents //mnt/initialdeb/kicksecure
+ mkdir --parents //tmp/empty
+ mkdir --parents //var/lib/derivative-maker/sources-temp-list.d
+ true &#39;dist_sources_list_temp_initial_deb_sources_list: //var/lib/derivative-maker/sources-temp-list.d/temp-initialdeb.list&#39;
+ true &#39;sources_list_target_build_remote_derivative: &#39;
+ &#39;[&#39; &#39;&#39; = true &#39;]&#39;
+ test -d /home/user/derivative-binary/aptrepo_local/kicksecure
+ mount --bind /home/user/derivative-binary/aptrepo_local/kicksecure //mnt/initialdeb/kicksecure
mount: /mnt/initialdeb/kicksecure: mount(2) system call failed: No such file or directory.
++ errorhandlergeneral ERR
++ last_failed_exit_code=32
++ last_failed_bash_command=&#39;mount --bind &quot;$dist_apt_repository_folder&quot; &quot;$CHROOT_FOLDER/$DEB_INSTALL_FOLDER/$derivative_name_item&quot;&#39;
++ output_cmd_set
++ &#39;[&#39; -o xtrace &#39;]&#39;
++ output_cmd=true
++ true &#39;INFO: Middle of function errorhandlergeneral of /home/user/derivative-maker/help-steps/create-local-temp-apt-repo.&#39;
++ errorhandlerprocessshared ERR
++ last_script=/home/user/derivative-maker/help-steps/create-local-temp-apt-repo
++ trap_signal_type_previous=
++ &#39;[&#39; &#39;&#39; = &#39;&#39; &#39;]&#39;
++ trap_signal_type_previous=unset
++ trap_signal_type_last=ERR
++ dist_build_error_counter=1
+++ benchmarktimeend 1661588391
++++ date +%s
+++ benchmarktimeend=1661588391
+++ benchmark_took_seconds=0
++++ convertsecs 0
++++ local h m s
++++ (( h=0/3600 ))
++++ true
++++ (( m=(0%3600)/60 ))
++++ true
++++ (( s=0%60 ))
++++ true
++++ printf &#39;%02d:%02d:%02d\n&#39; 0 0 0
+++ echo 00:00:00
++ benchmark_took_time=00:00:00
++ local first
++ read -r first _
++ processbacktracefunction
++ true &#39;INFO: BEGIN: processbacktracefunction&#39;
++ &#39;[&#39; -o xtrace &#39;]&#39;
++ set +x
++ true &#39;INFO: END  : processbacktracefunction&#39;
++ functiontracefunction
++ true &#39;INFO: BEGIN: functiontracefunction&#39;
++ &#39;[&#39; -o xtrace &#39;]&#39;
++ set +x
++ true &#39;INFO: END  : functiontracefunction&#39;
++ output_cmd_set
++ &#39;[&#39; -o xtrace &#39;]&#39;
++ output_cmd=true
++ true &#39;
############################################################
**ERROR in /home/user/derivative-maker/help-steps/create-local-temp-apt-repo detected!**

dist_build_version: 16.0.5.3
dist_build_error_counter: 1
benchmark: 00:00:00
last_failed_exit_code: 32
trap_signal_type_previous: unset
trap_signal_type_last    : ERR

process_backtrace_result:
1: : init
2: : sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups 
3: : sshd: user [priv]    
4: : sshd: user@pts/0     
5: : -bash 
6: : sudo ./derivative-maker --flavor whonix-gateway-xfce --target root --build --sanity-tests false --allow-uncommitted true --allow-untagged true 
7: : /bin/bash ./derivative-maker --flavor whonix-gateway-xfce --target root --build --sanity-tests false --allow-uncommitted true --allow-untagged true 
8: : /bin/bash ././build-steps.d/1700_install-packages 
9: : /bin/bash /home/user/derivative-maker/help-steps/create-local-temp-apt-repo 

function_trace_result:
main (line number: 84)
main (line number: 59)
errorhandlergeneral (line number: 380)
errorhandlerprocessshared (line number: 209)


last_failed_bash_command: mount --bind &quot;$dist_apt_repository_folder&quot; &quot;$CHROOT_FOLDER/$DEB_INSTALL_FOLDER/$derivative_name_item&quot;
############################################################
&#39;
++ unset error_reason
++ &#39;[&#39; ERR = INT &#39;]&#39;
++ &#39;[&#39; ERR = TERM &#39;]&#39;
++ &#39;[&#39; ERR = ERR &#39;]&#39;
++ &#39;[&#39; &#39;!&#39; 0 = 0 &#39;]&#39;
++ true &#39;INFO: dist_build_auto_retry set to 0 (--retry-max). No auto retry.&#39;
++ unset dist_build_auto_retry_counter
++ true
++ ignore_error=false
++ answer=
++ &#39;[&#39; ERR = ERR &#39;]&#39;
++ &#39;[&#39; &#39;&#39; = true &#39;]&#39;
++ &#39;[&#39; -t 0 &#39;]&#39;
++ true &#39;INFO: stdin connected to terminal, using interactive error handler.&#39;
++ true &#39;ERROR in /home/user/derivative-maker/help-steps/create-local-temp-apt-repo detected!

Please have a look above (the block within ###...).

 - Please enter c and press enter to ignore the error and continue building. (Recommended against!)
 - Please press r and enter to retry.
 - Please press s and enter to open an chroot interactive shell.
 - Please press a and enter to abort.&#39;
++ read -p &#39;Answer? &#39; answer
Answer?
```</description>
    <language>en</language>
    <lastBuildDate>Sat, 27 Aug 2022 10:44:53 +0000</lastBuildDate>
    <category>Physical Isolation</category>
    <atom:link href="http://forums.whonix.org/t/error-in-create-local-temp-apt-repo-building-a-minimal-physical-gateway/14639.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Error in create-local-temp-apt-repo - Building a minimal physical gateway</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Maybe same as:</p>
<aside class="quote" data-post="7" data-topic="14560">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/error-in-build-steps-d-1700-install-packages/14560/7">ERROR in ././build-steps.d/1700_install-packages</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/physical-isolation/19"><span class="badge-category-bg" style="background-color: #B3B5B4;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Everything specific to Whonix Physical Isolation. (devs)">Physical Isolation</span></a>
  </div>
  <blockquote>
    Thank you! 
At time of writing… 
You could try git tag 16.0.6.7-testers-only but it’s not tested for physical isolation. Not security relevant. In this case, it was just a build sanity test that applies for VMs but shouldn’t be done for physical isolation. If the build succeeds, great. Otherwise, please report. 
Later… 
Check if there’s a newer testers or even stable tag.
  </blockquote>
</aside>

          <p><a href="http://forums.whonix.org/t/error-in-create-local-temp-apt-repo-building-a-minimal-physical-gateway/14639/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/error-in-create-local-temp-apt-repo-building-a-minimal-physical-gateway/14639/2</link>
        <pubDate>Sat, 27 Aug 2022 10:44:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14639-2</guid>
        <source url="http://forums.whonix.org/t/error-in-create-local-temp-apt-repo-building-a-minimal-physical-gateway/14639.rss">Error in create-local-temp-apt-repo - Building a minimal physical gateway</source>
      </item>
      <item>
        <title>Error in create-local-temp-apt-repo - Building a minimal physical gateway</title>
        <dc:creator><![CDATA[Marv]]></dc:creator>
        <description><![CDATA[
            <p>Hello friends !<br>
Can you help me please <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<ul>
<li>I tried to setup Whonix Gateway on separate hardware.</li>
<li>I did all steps to prepare the host system.#</li>
<li>I have a standard intel x64 mini pc for that.</li>
</ul>
<p>I only want a very minimal working gateway. There I used the:<br>
<em>## example list for minimal rpi gateway</em><br>
and removed the <em>pkg_list_create()</em> function in this file:<br>
<em>/buildconfig.d/30_pkg_list.conf</em></p>
<p>Then I used this build command:<br>
<code>sudo ./derivative-maker --flavor whonix-gateway-xfce --target root --build --sanity-tests false --allow-uncommitted true --allow-untagged true</code></p>
<p><strong>I got this error:</strong></p>
<pre><code class="lang-auto">
ERROR in /home/user/derivative-maker/help-steps/create-local-temp-apt-repo detected!
</code></pre>
<p>…<br>
<code>last_failed_bash_command: mount --bind "$dist_apt_repository_folder" "$CHROOT_FOLDER/$DEB_INSTALL_FOLDER/$derivative_name_item"</code></p>
<p><strong>Full log:</strong></p>
<pre><code class="lang-auto">
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
INFO: Variable dist_build_version was already set to: 16.0.5.3
++ true 'INFO: Currently running script: /home/user/derivative-maker/help-steps/create-local-temp-apt-repo '
++ true 'INFO: LD_PRELOAD: '
+ main
+ root_check
++ id -u
+ '[' 0 '!=' 0 ']'
+ echo 'INFO: Script running as root.'
INFO: Script running as root.
+ true 'derivative_name_list: kicksecure whonix'
+ for derivative_name_item in $derivative_name_list
+ set_dist_build_reprepro_folder_options
+ true 'derivative_name_item: kicksecure'
+ '[' kicksecure = '' ']'
+ '[' '' = '' ']'
+ reprepro_codename=local
+ '[' local = local ']'
+ apt_repo_sub_folder=aptrepo_local/kicksecure
+ dist_apt_repository_folder=/home/user/derivative-binary/aptrepo_local/kicksecure
+ export dist_apt_repository_folder
+ dist_build_reprepro_folder_options='      --basedir /home/user/derivative-maker/aptrepo_local/kicksecure       --outdir /home/user/derivative-binary/aptrepo_local/kicksecure       --dbdir /home/user/derivative-binary/aptrepo_local/kicksecure/db       --logdir /home/user/derivative-binary/aptrepo_local/kicksecure/log'
+ export dist_build_reprepro_folder_options
+ mkdir --parents //mnt/initialdeb/kicksecure
+ mkdir --parents //tmp/empty
+ mkdir --parents //var/lib/derivative-maker/sources-temp-list.d
+ true 'dist_sources_list_temp_initial_deb_sources_list: //var/lib/derivative-maker/sources-temp-list.d/temp-initialdeb.list'
+ true 'sources_list_target_build_remote_derivative: '
+ '[' '' = true ']'
+ test -d /home/user/derivative-binary/aptrepo_local/kicksecure
+ mount --bind /home/user/derivative-binary/aptrepo_local/kicksecure //mnt/initialdeb/kicksecure
mount: /mnt/initialdeb/kicksecure: mount(2) system call failed: No such file or directory.
++ errorhandlergeneral ERR
++ last_failed_exit_code=32
++ last_failed_bash_command='mount --bind "$dist_apt_repository_folder" "$CHROOT_FOLDER/$DEB_INSTALL_FOLDER/$derivative_name_item"'
++ output_cmd_set
++ '[' -o xtrace ']'
++ output_cmd=true
++ true 'INFO: Middle of function errorhandlergeneral of /home/user/derivative-maker/help-steps/create-local-temp-apt-repo.'
++ errorhandlerprocessshared ERR
++ last_script=/home/user/derivative-maker/help-steps/create-local-temp-apt-repo
++ trap_signal_type_previous=
++ '[' '' = '' ']'
++ trap_signal_type_previous=unset
++ trap_signal_type_last=ERR
++ dist_build_error_counter=1
+++ benchmarktimeend 1661588391
++++ date +%s
+++ benchmarktimeend=1661588391
+++ benchmark_took_seconds=0
++++ convertsecs 0
++++ local h m s
++++ (( h=0/3600 ))
++++ true
++++ (( m=(0%3600)/60 ))
++++ true
++++ (( s=0%60 ))
++++ true
++++ printf '%02d:%02d:%02d\n' 0 0 0
+++ echo 00:00:00
++ benchmark_took_time=00:00:00
++ local first
++ read -r first _
++ processbacktracefunction
++ true 'INFO: BEGIN: processbacktracefunction'
++ '[' -o xtrace ']'
++ set +x
++ true 'INFO: END  : processbacktracefunction'
++ functiontracefunction
++ true 'INFO: BEGIN: functiontracefunction'
++ '[' -o xtrace ']'
++ set +x
++ true 'INFO: END  : functiontracefunction'
++ output_cmd_set
++ '[' -o xtrace ']'
++ output_cmd=true
++ true '
############################################################
**ERROR in /home/user/derivative-maker/help-steps/create-local-temp-apt-repo detected!**

dist_build_version: 16.0.5.3
dist_build_error_counter: 1
benchmark: 00:00:00
last_failed_exit_code: 32
trap_signal_type_previous: unset
trap_signal_type_last    : ERR

process_backtrace_result:
1: : init
2: : sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups 
3: : sshd: user [priv]    
4: : sshd: user@pts/0     
5: : -bash 
6: : sudo ./derivative-maker --flavor whonix-gateway-xfce --target root --build --sanity-tests false --allow-uncommitted true --allow-untagged true 
7: : /bin/bash ./derivative-maker --flavor whonix-gateway-xfce --target root --build --sanity-tests false --allow-uncommitted true --allow-untagged true 
8: : /bin/bash ././build-steps.d/1700_install-packages 
9: : /bin/bash /home/user/derivative-maker/help-steps/create-local-temp-apt-repo 

function_trace_result:
main (line number: 84)
main (line number: 59)
errorhandlergeneral (line number: 380)
errorhandlerprocessshared (line number: 209)


last_failed_bash_command: mount --bind "$dist_apt_repository_folder" "$CHROOT_FOLDER/$DEB_INSTALL_FOLDER/$derivative_name_item"
############################################################
'
++ unset error_reason
++ '[' ERR = INT ']'
++ '[' ERR = TERM ']'
++ '[' ERR = ERR ']'
++ '[' '!' 0 = 0 ']'
++ true 'INFO: dist_build_auto_retry set to 0 (--retry-max). No auto retry.'
++ unset dist_build_auto_retry_counter
++ true
++ ignore_error=false
++ answer=
++ '[' ERR = ERR ']'
++ '[' '' = true ']'
++ '[' -t 0 ']'
++ true 'INFO: stdin connected to terminal, using interactive error handler.'
++ true 'ERROR in /home/user/derivative-maker/help-steps/create-local-temp-apt-repo detected!

Please have a look above (the block within ###...).

 - Please enter c and press enter to ignore the error and continue building. (Recommended against!)
 - Please press r and enter to retry.
 - Please press s and enter to open an chroot interactive shell.
 - Please press a and enter to abort.'
++ read -p 'Answer? ' answer
Answer?
</code></pre>
          <p><a href="http://forums.whonix.org/t/error-in-create-local-temp-apt-repo-building-a-minimal-physical-gateway/14639/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/error-in-create-local-temp-apt-repo-building-a-minimal-physical-gateway/14639/1</link>
        <pubDate>Sat, 27 Aug 2022 08:36:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14639-1</guid>
        <source url="http://forums.whonix.org/t/error-in-create-local-temp-apt-repo-building-a-minimal-physical-gateway/14639.rss">Error in create-local-temp-apt-repo - Building a minimal physical gateway</source>
      </item>
  </channel>
</rss>
