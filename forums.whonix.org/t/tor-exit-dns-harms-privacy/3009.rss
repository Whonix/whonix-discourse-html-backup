<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Tor Exit DNS Harms Privacy</title>
    <link>http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009</link>
    <description>Turns out using google-meek made users especially vulnerable to this type of attack. Where should warnings about this be included? in the vpn endpoint warning page? the bridges page?
https://nymity.ch/tor-dns/tor-dns.pdf</description>
    <language>en</language>
    <lastBuildDate>Thu, 13 Oct 2016 17:37:30 +0000</lastBuildDate>
    <category>General Tor and Anonymity Talk</category>
    <atom:link href="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Tor Exit DNS Harms Privacy</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Even if you manually resolve DNS to a website. That alone cannot be a big help. Since once you visit a webpage, far most websites will instruct your websever to fetch content from other sources which requires dns resolution. So you’d have to disable DNS resolution in your browser somehow. [Or as a strange workaround,</p>
<ul>
<li>remove proxy settings ( <a href="https://www.whonix.org/wiki/Tor_Browser#Remove_Proxy_Settings">https://www.whonix.org/wiki/Tor_Browser#Remove_Proxy_Settings</a> )</li>
<li>and disable Tor transparent DNS resolution ( <a href="https://www.whonix.org/wiki/Stream_Isolation#Better_Protection">https://www.whonix.org/wiki/Stream_Isolation#Better_Protection</a> )</li>
</ul>
<p>But even if you had all of this sorted out somehow, in this case unfortunately it does not help if you are one of a few super secure people. For one, you stand out more than other users. But let’s ignore this. Worse so, everyone else could be deanonymized easier. And with all of them not secure, there would be no crowd to hide within (as per <a href="http://freehaven.net/doc/wupss04/usability.pdf">anonymity loves company</a>).</p>
<p>//cc <a class="mention" href="http://forums.whonix.org/u/mirimir">@mirimir</a> since mentioned above.</p>
          <p><a href="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/8</link>
        <pubDate>Thu, 13 Oct 2016 17:37:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3009-8</guid>
        <source url="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009.rss">Tor Exit DNS Harms Privacy</source>
      </item>
      <item>
        <title>Tor Exit DNS Harms Privacy</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/ego">@Ego</a> <a class="mention" href="http://forums.whonix.org/u/hulahoop">@HulaHoop</a></p>
<p>Apologies! Don’t know how I missed it <img src="//forums.whonix.org/images/emoji/twitter/grinning.png?v=5" title=":grinning:" class="emoji" alt=":grinning:"> Just delete the other thread if you like.</p>
<p>In reply to <a class="mention" href="http://forums.whonix.org/u/entr0py">@entr0py</a>  above re: safer Tor browser (client) use, the smarties out there suggest identifying the IPs directly for your favorite websites and avoiding DNS look-ups altogether.</p>
<ul>
<li>For instance, with <a href="http://whonix.org">whonix.org</a>, you can run the following in a terminal:</li>
</ul>
<blockquote>
<p>host -t a <a href="http://whonix.org">whonix.org</a></p>
</blockquote>
<p>Which provides the following output:</p>
<blockquote>
<p><a href="http://whonix.org">whonix.org</a> has address 94.23.250.81</p>
</blockquote>
<ul>
<li>Now, either bookmark this IP address or directly input it into the Tor browser to avoid DNS lookups (try it - it will resolve to <a href="https://whonix.org">https://whonix.org</a>). Your hosts file can also be used in this manner.</li>
</ul>
<p>I’ll also quote Mirimir to summarize (hi buddy!), since he/she appears to know their shit. He/she suggests:</p>
<blockquote>
<p>They [researchers] posit an adversary that can 1) see your traffic to the Tor entry guard, 2) get (not just intercept) DNS requests from the Tor exit relay for websites that you visit, and 3) see what websites the Tor exit hits for you.</p>
</blockquote>
<blockquote>
<p>Apparently, the DNS lookup information enhances website fingerprinting,  where adversaries correlate packet patterns of website loading between  exit-relay and entry-guard traffic. <strong>Each website has a more-or-less  unique packet pattern over time, as various scripts run on each end, and  various resources are downloaded.</strong> Consider <a href="http://hubblesite.org/gallery/wallpaper/">http://hubblesite.org/gallery/wallpaper/</a> for example. There are many images, with different sizes, that get downloaded in a particular order.</p>
</blockquote>
<p>Longer term, .onions need to proliferate, DNS resolution needs to be done entirely within the Tor network somehow and 3rd party resolvers need to be ditched altogether.</p>
<p>Letting Google have this kind of (potential) influence is like entrusting your 10 year old with a child molester while you enjoy a leisurely movie and  dinner. <img src="//forums.whonix.org/images/emoji/twitter/unamused.png?v=5" title=":unamused:" class="emoji" alt=":unamused:"></p>
          <p><a href="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/7</link>
        <pubDate>Thu, 13 Oct 2016 15:25:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3009-7</guid>
        <source url="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009.rss">Tor Exit DNS Harms Privacy</source>
      </item>
      <item>
        <title>Tor Exit DNS Harms Privacy</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox pdf">
  <header class="source">
      <a href="https://nymity.ch/tor-dns/tor-dns.pdf" target="_blank" rel="nofollow noopener">nymity.ch</a>
  </header>
  <article class="onebox-body">
    <a href="https://nymity.ch/tor-dns/tor-dns.pdf" target="_blank" rel="nofollow noopener"><span class="pdf-onebox-logo"></span></a>
<h3><a href="https://nymity.ch/tor-dns/tor-dns.pdf" target="_blank" rel="nofollow noopener">tor-dns.pdf</a></h3>

<p class="filesize">423.83 KB</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p><strong>Abstract</strong> (my emphasis throughout)</p>
<blockquote>
<p>Previous attacks that link the sender and receiver of traffic in the Tor network (“correlation attacks”) have generally relied  on  analyzing  traffic  from  TCP  connections.  The  TCP connections  of  a  typical  client  application,  however,  are  often accompanied  by  DNS  requests  and  responses.  This  additional traffic  presents  more  opportunities  for  correlation  attacks.</p>
</blockquote>
<blockquote>
<p>This paper quantifies how DNS traffic can make Tor users more vulnerable to correlation attacks. <strong>We investigate how incorporating DNS traffic can make existing correlation attacks more powerful and  how  DNS  lookups  can  leak  information  to  third  parties about  anonymous  communication.</strong>  We (i) develop  a  method  to identify  the  DNS  resolvers  of  Tor  exit  relays; (ii) develop  a  new set of correlation attacks (DefecTor attacks) that incorporate DNS traffic to improve precision; (iii) analyze the Internet-scale effects of  these  new  attacks  on  Tor  users;  and  (iv)  develop  improved methods to evaluate correlation attacks. First, we find that there exist adversaries who can mount DefecTor attacks: for example, <strong>Google’s DNS resolver observes almost 40% of all DNS requests exiting  the  Tor  network.</strong></p>
</blockquote>
<blockquote>
<p>We  also  find  that  DNS  requests  often traverse  ASes  that  the  corresponding  TCP  connections  do  not transit,  enabling  additional  ASes  to  gain  information  about  Tor users’ traffic. <strong>We then show that an adversary who can mount a DefecTor attack can often determine the website that a Tor user is  visiting  with  perfect  precision,  particularly  for  less  popular websites where the set of DNS names associated with that website may  be  unique  to  the  site.</strong>  We  also  use  the  Tor  Path  Simulator (TorPS) in combination with traceroute data from vantage points co-located with Tor exit relays to estimate the power of AS-level adversaries  who  might  mount  DefecTor  attacks  in  practice.</p>
</blockquote>
<p><strong>Key Take Home Messages</strong></p>
<p>I’ll save you reading the academic paper if you are time-poor:</p>
<p><strong>1.</strong> Correlation Attacks using TCP flows are greatly enhanced by also doing DNS request traffic correlation.<br>
<strong>2.</strong> Attackers observing occasional DNS requests may still be able to link both ends of the communication, even if they can’t observe TCP traffic between the Tor exit and the server.<br>
<strong>3.</strong> Loading a single webpage can generate hundreds of DNS requests to many different domains.<br>
<strong>4.</strong> The way Tor exit relays are currently configured means that Google (yes, your good friend Google) are in a central position to deanonymize Tor users if they so wished, as 40% of the Tor bandwidth uses Google’s public DNS servers to resolve DNS queries.<br>
<strong>5.</strong> Note: simply increasing the scale of the Tor network itself is not much of a defense against this fingerprinting technique.<br>
<strong>6.</strong> Less frequently visited websites - the kind that privacy-conscious people like to visit e.g. Wikileaks, Whonix etc. - are more prone to deanonymization.<br>
<strong>7.</strong> Not all Tor client (browser) locations are equal. The data suggests you will be de-anonymized in a shorter average period due to network effects in France, Germany and Russia than in (ironically) the US or UK.<br>
<strong>8.</strong> Website Tor fingerprinting defenses are needed now more than ever, due to the increased precision possible with this attack. That is, Tor developers need to ASAP implement padding as per Torspec <span class="hashtag">#254</span>. See:<br>
<a href="https://gitweb.torproject.org/torspec.git/tree/proposals/254-padding-negotiation.txt*" class="onebox" target="_blank">https://gitweb.torproject.org/torspec.git/tree/proposals/254-padding-negotiation.txt*</a></p>
<p>*This comes with significant network overhead and requires specific fine-tuning, which is why it hasn’t yet been implemented.</p>
<p><strong>Short-term solutions for Tor developers and Tor exit relay operators:</strong></p>
<blockquote>
<p><strong>Exit relay operators should avoid public resolvers such as Google and OpenDNS.</strong> Instead, they should either use the resolvers provided by their ISP, or run their own, particularly if the operator’s ISP already  hosts  many  other  exit  relays.  Local  resolvers  can  further  be optimized to minimize information leakage, by (for example) enabling QNAME minimization.</p>
</blockquote>
<blockquote>
<p>In addition to making recommendations to exit relay operators, we can remotely influence the cache of each exit relay’s resolver.  For  example,  using exitmap,  we  can  continuously resolve potentially sensitive domains over each exit relay, right before its TTL is about to expire. In such a setup, an attacker gains no advantage from observing DNS traffic from the exit relays  because  the  domain  is  always  in  every  exit  relay’s resolver  cache.  This  approach  scales  poorly,  considering  the potentially large number of domain names that would need to be cached (recall that the long tail of unpopular sites are most vulnerable  to  DefecTor  attacks),  but  it  allows  us  to  eliminate DNS-based correlation attacks for a select number of sites.</p>
</blockquote>
<blockquote>
<p>Finally,  Tor  can  fix  the  Tor  clipping  bug  we  discovered and  consider  significantly  increasing  the  minimum  TTL  for the  DNS  cache  at  exit  relays  to  make  DefecTor  attacks  less precise. This adjustment requires finding the longest acceptable TTL  that  does  not  have  a  notable  negative  detriment  to  user experience.  Further,  as  soon  as  the  clipping  bug  is  fixed,website operators of sensitive websites can opt to increase the TTL of their DNS records.</p>
</blockquote>
<p><strong>Long-term solutions for Tor developers:</strong></p>
<blockquote>
<p><strong>Zhu et  al. proposed  T-DNS,  which  employs several TCP optimizations to transport the DNS protocol over  TLS  and  TCP.</strong>  The  TLS  layer  provides  confidentiality between exit relays and their resolvers. <strong>Finally, site operators whose  users  are  particularly  concerned  about  safety  should</strong><br>
<strong>offer an onion service as an alternative.</strong> Facebook, for example, set  up facebookcorewwwi.onion.  When  connecting  to  the onion service, Tor users never leave the Tor network, and hence do not need DNS (as long as the onion service does not embed non-onion service content).</p>
</blockquote>
<blockquote>
<p><strong>Deploying  defenses  against  website  fingerprinting  attacks in  Tor [noted in point 8 above] should  be  an  important  long-term  goal,  as  well.</strong>  Although  growing  the  Tor  network  will  help  defend  against DefecTor  attacks  to  some  degree,  the  most  important  change is  to  deploy  defenses  against  these  attacks  in  the  first  place. Since   DefecTor   attacks   significantly   increase   precision   of website fingerprinting attacks, defenses should be designed to significantly reduce the recall of website fingerprinting attacks, even  when  the  website  fingerprinting  attack  is  configured  to sacrifice precision for recall.</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/4</link>
        <pubDate>Wed, 05 Oct 2016 20:01:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3009-4</guid>
        <source url="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009.rss">Tor Exit DNS Harms Privacy</source>
      </item>
      <item>
        <title>Tor Exit DNS Harms Privacy</title>
        <dc:creator><![CDATA[Ego]]></dc:creator>
        <description><![CDATA[
            <p>Good day,</p>
<p><a class="mention" href="http://forums.whonix.org/u/hulahoop">@HulaHoop</a> actually already made a thread for this: <a href="https://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009?u=ego">Tor Exit DNS Harms Privacy</a></p>
<p>Therefore, I merged the two.</p>
<p>Have a nice day,</p>
<p>Ego</p>
          <p><a href="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/6</link>
        <pubDate>Wed, 05 Oct 2016 20:00:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3009-6</guid>
        <source url="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009.rss">Tor Exit DNS Harms Privacy</source>
      </item>
      <item>
        <title>Tor Exit DNS Harms Privacy</title>
        <dc:creator><![CDATA[entr0py]]></dc:creator>
        <description><![CDATA[
            <p>I read the parts of the paper I could understand (meaning: not so much). Here’s what I took away as an end-user:</p>
<p>For a Tor user to be de-anonymized with a traffic correlation attack, we usually assume that an adversary has to have visibility on both endpoints (or related ISPs). According to the paper, it is sufficient for the adversary to have visibility on entry and visibility on some of the DNS traffic. Exit TCP traffic is not necessary.</p>
<p>In specific, real-world terms, this means that a US-based Tor user has a frighteningly high chance of being de-anonymized by an American intelligence agency who has cooperation from a large national ISP as well as a large public DNS provider, like Google. Where it might have been difficult for said intelligency agency to obtain cooperation from foreign ISPs or to capture a significant percentage of exit nodes to observe TCP traffic, the paper (if correct) would render that effort unneccessary. With just Google &amp; OpenDNS cooperation, the agency would have visibility on 50% of the DNS requests coming from the Tor network. And the entry visibility could easily be provided by ISPs that have cooperated with the NSA in the past (ie PRISM).</p>
<aside class="quote" data-post="1" data-topic="3030">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"><a href="//forums.whonix.org/t/the-effect-of-dns-on-tors-anonymity/3030/1">The Effect of DNS on Tor's Anonymity</a>
</div>
<blockquote>
<p>solutions for Tor developers and Tor exit relay operators</p>
</blockquote>
</aside>
<p>What about Tor clients?</p>
<p>Is it possible to route DnsPort traffic to a personal hidden service hosting a DNS server? Of course, it’s possible for this server to come under surveillance. The idea is to avoid lookups via Google, OpenDNS, OVH, as mentioned in the paper - the big targets. If an adversary has the means to observe every packet everywhere, they could just as easily mount a TCP correlation attack.</p>
          <p><a href="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/5</link>
        <pubDate>Wed, 05 Oct 2016 19:55:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3009-5</guid>
        <source url="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009.rss">Tor Exit DNS Harms Privacy</source>
      </item>
      <item>
        <title>Tor Exit DNS Harms Privacy</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Yes <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          <p><a href="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/3</link>
        <pubDate>Sat, 01 Oct 2016 21:04:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3009-3</guid>
        <source url="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009.rss">Tor Exit DNS Harms Privacy</source>
      </item>
      <item>
        <title>Tor Exit DNS Harms Privacy</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Good question. I see you already added it here:</p>
<p><a href="https://www.whonix.org/w/index.php?title=Bridges&amp;type=revision&amp;diff=25825&amp;oldid=25214">https://www.whonix.org/w/index.php?title=Bridges&amp;type=revision&amp;diff=25825&amp;oldid=25214</a></p>
<p>Should suffice?</p>
          <p><a href="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/2</link>
        <pubDate>Sat, 01 Oct 2016 19:05:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3009-2</guid>
        <source url="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009.rss">Tor Exit DNS Harms Privacy</source>
      </item>
      <item>
        <title>Tor Exit DNS Harms Privacy</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Turns out using google-meek made users especially vulnerable to this type of attack. Where should warnings about this be included? in the vpn endpoint warning page? the bridges page?<br>
</p><aside class="onebox pdf">
  <header class="source">
      <a href="https://nymity.ch/tor-dns/tor-dns.pdf" target="_blank" rel="nofollow noopener">nymity.ch</a>
  </header>
  <article class="onebox-body">
    <a href="https://nymity.ch/tor-dns/tor-dns.pdf" target="_blank" rel="nofollow noopener"><span class="pdf-onebox-logo"></span></a>
<h3><a href="https://nymity.ch/tor-dns/tor-dns.pdf" target="_blank" rel="nofollow noopener">tor-dns.pdf</a></h3>

<p class="filesize">423.83 KB</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
          <p><a href="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009/1</link>
        <pubDate>Thu, 29 Sep 2016 00:31:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3009-1</guid>
        <source url="http://forums.whonix.org/t/tor-exit-dns-harms-privacy/3009.rss">Tor Exit DNS Harms Privacy</source>
      </item>
  </channel>
</rss>
