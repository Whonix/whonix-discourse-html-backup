<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>sys-whonix starts unintentionally</title>
    <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227</link>
    <description>Hello Users,

I have recently updated to Qubes 4.1.1 and tested some things. 

Nevertheless, I have a question.

Overall it runs very well, but I noticed one bug that has been discussed many times here and on the Qubes forum, namely starting sys-whonix when you have cloned this VM and want to update or install something, etc.

I repeated the test from back then by cloning a) sys-whonix, b) whonix-gw-16, c) whonix-ws-16 and d) anon-whonix and naming them differently. In addition, I based a whonix-16-dvm-2 on whonix-16-ws-2.

I connected the cloned Qubes in the same way as the originals, so that quasi a parallel independent system was created and should behave in the same way.

This also works.

But only if you

1) start the cloned Qubes from the app menu or

2) activates the, say anon-whonix-2 from the Qube manager.

It does not work if you

starts the cloned Qubes (i.e. whonix-ws-16-2 and whonix-gw-16-2) from the Qube manager, for example to update them or to install or program something.

In this case the original, i.e. sys-whonix, always starts too!

I then went through all the known links and sources in the forums describing the problem and tried everything (including creating a 50_user.confi file with the known lines), but the problem persists.

I also tried (on Marmarek&#39;s suggestion in the corresponding Github topic) to add a corresponding line with rules in the new policy guideline for Whonix, but it&#39;s of no use.

Hence my questions:

Am I doing something wrong?

Or is the problem persistent and one of the big unsolved problems?

How does it behave with the Qubes updater? There is no way to check if the update of e.g. whonix-ws-16-2 is now done via sys-whonix-2 or via sys-whonix.

Or do I have to create a special kicksecure-16-Qube and then disable the autostart for sys-whonix? It is not clear from the instructions in which Qube to disable autostart (I assume for sys-whonix).


I raise this issue because I consider it a not insignificant security risk. Assuming sys-whonix would be compromised and the new clones are not yet, a user in the background would run the risk that when sys-whonix is activated, a temporal correlation analysis is possible (because both &quot;sys-whonixes&quot; are running in parallel), not to mention the possible updating of the clones via a compromised sys-whonix.

I thought of a way that might work to get around the problem if it can&#39;t be solved any other way (yet), and if it&#39;s just updating the clones.

You simply set the original sys-whonix to the cloned gateway (i.e. whonix-gw-16-2) for an update of the clones. Since sys-whonix turns on when you update anyway, you would then have the gateway from the cloned system. 

This is not ideal, but a start. What do you think?

Thank you already for interesting information!</description>
    <language>en</language>
    <lastBuildDate>Tue, 11 Oct 2022 21:26:51 +0000</lastBuildDate>
    <category>Qubes-Whonix</category>
    <atom:link href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p>I attest that <a href="https://www.whonix.org/wiki/Multiple_Qubes-Whonix_Templates#Option_B" class="inline-onebox">Multiple Qubes-Whonix ™ Templates</a> works.<br>
I edited to remote the “Untested” status.<br>
Methodology: tor-ctrl-stream, watching for <code>deb.*</code> requests.</p>
<aside class="quote no-group" data-username="Ionixx" data-post="38" data-topic="14227">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/i/eb8c5e/40.png" class="avatar"> Ionixx:</div>
<blockquote>
<p>Deleting qubes.UpdatesProxy and just using the new policy does not seem to be possible without problems so far.</p>
</blockquote>
</aside>
<p>I commented the <code>/etc/qubes-rpc/policy/qubes.UpdatesProxy</code>, don’t know if removing it affects something.</p>
<aside class="quote no-group" data-username="Ionixx" data-post="38" data-topic="14227">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/i/eb8c5e/40.png" class="avatar"> Ionixx:</div>
<blockquote>
<p>In my estimation the creation of a policy with lower number is meaningful only if in it the individual attitudes from qubes.UpdatesProxy can be converted and qubes.UpdatesProxy becomes completely superfluous.</p>
</blockquote>
</aside>
<p>Qubes uses first match, not last match. This is why <code>30-user.policy</code> overrule <code>90-default.policy</code>.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/39">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/39</link>
        <pubDate>Tue, 11 Oct 2022 21:26:51 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-39</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Ionixx]]></dc:creator>
        <description><![CDATA[
            <p>I read through the thread on Github. It addresses the most important issues from my point of view:</p>
<ol>
<li>How do we manage to integrate the solved problem from this thread into a new policy in such a way that qubes.UpdateProxy becomes redundant. So far it always seems to be the case that so far qubes.UpdatesProxy overwrites the 90-default.policy or the 80-whonix.policy.</li>
</ol>
<p>It is imperative that security be maintained, but still be able to save individual settings, such as we use when cloning whonix in this thread.</p>
<p>If I understood it correctly, according to Marmarek, changes made by the user should be preserved, but can be moved to the new policy.</p>
<ol start="2">
<li>
<p>Deleting qubes.UpdatesProxy and just using the new policy does not seem to be possible without problems so far.</p>
</li>
<li>
<p>In my estimation the creation of a policy with lower number is meaningful only if in it the individual attitudes from qubes.UpdatesProxy can be converted and qubes.UpdatesProxy becomes completely superfluous.</p>
</li>
</ol>
<p>Regarding the penultimate link from the Qubes forum (Security: important rule…), everything is clarified. The updates work without problems, even on fedora and debian.</p>
<p>However, I will test in the near future if transferring or adding the rules from qubes.UpdatesProxy to 90-default.policy has exactly the same effect as the solution from this thread.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/38">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/38</link>
        <pubDate>Tue, 30 Aug 2022 19:57:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-38</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>related:</p>
<aside class="onebox githubissue" data-onebox-src="https://github.com/QubesOS/qubes-issues/issues/7724">
  <header class="source">

      <a href="https://github.com/QubesOS/qubes-issues/issues/7724" target="_blank" rel="noopener">github.com/QubesOS/qubes-issues</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/QubesOS/qubes-issues/issues/7724" target="_blank" rel="noopener">port Whonix dom0 old qrexec style /etc/qubes-rpc/policy/qubes.UpdatesProxy to new qrexec style /etc/qubes/policy.d/80-whonix.policy</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-08-30" data-time="08:03:14" data-timezone="UTC">08:03AM - 30 Aug 22 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank" rel="noopener">
          <img alt="adrelanos" src="https://avatars.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
      </div>
    </div>

    <div class="labels">
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          T: bug
        </span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          P: default
        </span>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">old:
`/etc/qubes-rpc/policy/qubes.UpdatesProxy`

new:
`/etc/qubes/policy.d/8<span class="show-more-container"><a href="http://forums.whonix.org" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">0-whonix.policy`

related:
`/etc/qubes/policy.d/90-default.policy`

For issue tracking purposes:
This is a technical migration. Qubes developers most likely know what this is about. Related to Qubes dom0 qrexec.</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/37">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/37</link>
        <pubDate>Tue, 30 Aug 2022 08:31:40 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-37</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Ionixx]]></dc:creator>
        <description><![CDATA[
            <p>Yes, I will, but it will take a few more days. I will report when it is ready.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/36">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/36</link>
        <pubDate>Fri, 19 Aug 2022 11:49:45 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-36</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Thanks! Documentation has been updated just now.</p>
<p>Thanks to <a href="https://forum.qubes-os.org/t/security-important-policy-rule-blocks-fedora-debian-updates/13194" class="inline-onebox">Security: Important policy rule blocks fedora/debian updates - General Discussion - Qubes OS Forum</a> on the same wiki page there is now also documentation on how to use Qubes <code>/etc/qubes/policy.d</code> folder. Could you test that please?</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/35">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/35</link>
        <pubDate>Thu, 18 Aug 2022 09:16:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-35</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Ionixx]]></dc:creator>
        <description><![CDATA[
            <p>We discussed at the following link:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://forum.qubes-os.org/t/security-important-policy-rule-blocks-fedora-debian-updates/13194">
  <header class="source">
      <img src="https://forum.qubes-os.org/uploads/db3820/optimized/2X/5/55de5eaf64516902429c411f66491cc9db06c464_2_32x32.png" class="site-icon" width="32" height="32">

      <a href="https://forum.qubes-os.org/t/security-important-policy-rule-blocks-fedora-debian-updates/13194" target="_blank" rel="noopener nofollow ugc" title="07:19PM - 15 August 2022">Qubes OS Forum – 15 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/255;"><img src="//forums.whonix.org/uploads/default/optimized/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a_2_690x255.jpeg" class="thumbnail" width="690" height="255" srcset="//forums.whonix.org/uploads/default/optimized/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a_2_690x255.jpeg, //forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg 1.5x, //forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg 2x" data-small-upload="//forums.whonix.org/uploads/default/optimized/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a_2_10x10.png"></div>

<h3><a href="https://forum.qubes-os.org/t/security-important-policy-rule-blocks-fedora-debian-updates/13194" target="_blank" rel="noopener nofollow ugc">Security: Important policy rule blocks fedora/debian updates</a></h3>

  <p>Hello Users, hello Qubes-Team,  With my thread I refer to the following link or the following and now solved topic:    and here to the elaborated policy in qubes.UpdateProxy, which makes it possible to run the original Whonix system and a matching...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<ol>
<li>the last two lines before</li>
</ol>
<p>§anyvm $anyvm deny</p>
<p>must be swapped.</p>
<ol start="2">
<li>in the default rule for all templates it must be</li>
</ol>
<p>$type:TemplateVM $default allow,target=sys-net</p>
<p>and not only template (without VM).</p>
<p>This should work.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/34">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/34</link>
        <pubDate>Wed, 17 Aug 2022 19:22:10 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-34</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Ionixx]]></dc:creator>
        <description><![CDATA[
            <p>I have tested it several times with fedora and also debian and it is always the same negative result:</p>
<p>Only removing the last line</p>
<p>$anyvm $anyvm deny</p>
<p>allows updating both via the Qubes updater and via the menu.</p>
<p>Adding the rule as penultimate line to update via sys-whonix does not change anything.</p>
<p>But this is a case for the Qubes forum. If there are results, I’ll write it briefly here too.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/33">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/33</link>
        <pubDate>Mon, 15 Aug 2022 18:23:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-33</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Ionixx]]></dc:creator>
        <description><![CDATA[
            <p>I agree, I also had a stomach ache at the omission of this rule. So I will test this again when the next Fedora rule comes out, as well as insert the rule you suggested.</p>
<p>If the failure of the last Fedora update turns out to be a coincidence, then everything would be fine. Otherwise you have to search further for the cause (in the Qubes forum etc.).</p>
<p>In principle I also think it is better to update via sys-whonix than via sys-net, as well as via onion-channels. I had also tested this several times, but it takes a very very long time, especially when onionizing.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/32">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/32</link>
        <pubDate>Sat, 13 Aug 2022 11:15:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-32</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>$anyvm $anyvm deny</p>
</blockquote>
<p>That’s the default fallback rule. I am not sure that’s a good idea to<br>
remove it. Goal should be to have strong rules that cover everything and<br>
then have the fallback rule for leak / unexpected behavior protection.</p>
<p>Not sure. You could ask Qubes about that.</p>
<p>Depends on how it should be updated. Over Whonix / Tor or otherwise?</p>
<p>Maybe</p>
<pre><code>$type:Template $default allow,target=sys-whonix
</code></pre>
<p>at the end (before <code>$anyvm $anyvm deny</code>) wold be better?</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/31">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/31</link>
        <pubDate>Sat, 13 Aug 2022 08:57:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-31</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Ionixx]]></dc:creator>
        <description><![CDATA[
            <p>Thanks too, also for the tag-tip!</p>
<p>Note on the last line:</p>
<p>$anyvm $anyvm deny</p>
<p>It seems to cause fedora not to connect via the qubes.UpdatesProxy in the Qubes updater.<br>
Originally I did not have it in my proposal, but since it seems logical, I took it from you.<br>
After reboot and an attempted fedora update via the Qubes updater, no connection to the mirrors could be established in several attempts. Only after deleting the line it works again.</p>
<p>So I edited the script above and took out the line.</p>
<p>Maybe it is a coincidence and needs to be reproduced elsewhere, but I will test this further.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/30">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/30</link>
        <pubDate>Sat, 13 Aug 2022 08:35:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-30</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Thanks! Wiki updated.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/29">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/29</link>
        <pubDate>Fri, 12 Aug 2022 22:00:40 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-29</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Ionixx" data-post="27" data-topic="14227" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/i/eb8c5e/40.png" class="avatar"> Ionixx:</div>
<blockquote>
<p>Addendum: For some reason, when copying, the diamond symbols in the comment lines are deleted and the font is too large.</p>
</blockquote>
</aside>
<p>Code tags can fix that.<br>
<a href="https://www.kicksecure.com/wiki/Forum_Best_Practices#Code_Tags">https://www.kicksecure.com/wiki/Forum_Best_Practices#Code_Tags</a></p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/28">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/28</link>
        <pubDate>Fri, 12 Aug 2022 21:53:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-28</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Ionixx]]></dc:creator>
        <description><![CDATA[
            <p>Addendum: For some reason, when copying, the diamond symbols in the comment lines are deleted and the font is too large.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/27">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/27</link>
        <pubDate>Fri, 12 Aug 2022 21:07:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-27</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Ionixx]]></dc:creator>
        <description><![CDATA[
            <p>If you mean corresponding section in above link<br>
“Multiple_Qubes-Whonix_Templates”</p>
<p>then I would suggest the following entry for users who want to create a complete clone of the Qubes-Whonix system (i.e. for sys-whonix, whonix-ws-16 and whonix-gw-16) and use it independently from the original Whonix:</p>
<pre><code class="lang-auto">## Note that policy parsing stops at the first match,
## so adding anything below "$anyvm $anyvm action" line will have no effect

## Please use a single # to start your custom comments

# Upgrade all Templates through sys-whonix.
#$type:Template $default allow,target=sys-whonix

# Upgrade whonix-gw-16-clone-1 through sys-whonix-cloned
whonix-gw-16-clone-1 $default allow,target=sys-whonix-cloned

# Upgrade whonix-ws-16-clone-1 through sys-whonix-cloned
whonix-ws-16-clone-1 $default allow,target=sys-whonix-cloned

# Upgrade Whonix ™ Templates through sys-whonix
$tag:whonix-updatevm $default allow,target=sys-whonix

# Deny Whonix ™ Templates using UpdatesProxy of any other VM
$tag:whonix-updatevm $anyvm deny

# Default rule for all Templates - direct the connection to sys-net
$type:Template $default allow,target=sys-net


</code></pre>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/26">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/26</link>
        <pubDate>Fri, 12 Aug 2022 21:00:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-26</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Is this already correct in the existing documentation?</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/25">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/25</link>
        <pubDate>Fri, 12 Aug 2022 11:54:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-25</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Ionixx]]></dc:creator>
        <description><![CDATA[
            <p>I think I have found the solution.</p>
<p>I have added the following line in qubes.UpdateProxy as first (so before the others). It defines a rule extra for whonix-gw-16-TEST:</p>
<p><span class="hashtag">#Upgrade</span> whonix-gw-16-TEST through sys-whonix-TEST<br>
whonix-gw-16-TEST $default allow,target=sys-whonix-TEST</p>
<p>Only then come the rules for whonix-ws-16-TEST, then those for the whonix templates and the “normal” templates, as described above.</p>
<p>This not only fixed the update problem via QubesUpdater, but also causes the correct sys-whonix-TEST to now start in the app menu when calling any app.</p>
<p>I will post this in the Qubes forum as well. It should work with any whonix clone.</p>
<p>So obviously nothing needs to be changed in the new policy system. How it will be when qubes.UpdateProxy is no longer available, we will have to try then.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/24">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/24</link>
        <pubDate>Wed, 10 Aug 2022 20:25:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-24</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Ionixx]]></dc:creator>
        <description><![CDATA[
            <p>Thank you, I´ll try this and summarize the results, perhaps there is any solution.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/23</link>
        <pubDate>Tue, 09 Aug 2022 04:18:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-23</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Ionixx" data-post="21" data-topic="14227">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/i/eb8c5e/40.png" class="avatar"> Ionixx:</div>
<blockquote>
<p>With whonix-gw-16-TEST this does not succeed, here sys-whonix starts incorrectly.</p>
</blockquote>
</aside>
<p>Could be qrexec.</p>
<ul>
<li>
<a href="https://www.whonix.org/wiki/Qubes/Troubleshooting#Unexpected_autostart_of_sys-whonix">Unexpected autostart of sys-whonix</a>
<ul>
<li>
<a href="https://www.whonix.org/wiki/Qubes/Troubleshooting#sdwdate-gui_qrexec_settings">sdwdate-gui qrexec settings</a>
<ul>
<li><a href="https://www.whonix.org/wiki/Qubes/Troubleshooting#sdwdate-gui_qrexec_settings_fix">sdwdate-gui qrexec settings fix</a></li>
<li><a href="https://www.whonix.org/wiki/Qubes/Troubleshooting#sdwdate-gui_qrexec_debugging">sdwdate-gui qrexec debugging</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>In dom0. Watch journalctl and see qrexec calls.</p>
<pre><code>sudo journalctl -f</code></pre>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/22</link>
        <pubDate>Sun, 07 Aug 2022 17:48:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-22</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Ionixx]]></dc:creator>
        <description><![CDATA[
            <p>I entered the above script and applied the latest updates to debian, whonix-ws-16 and whonix-ws-16-TEST and got the following results:</p>
<p>debian updates via sys-net</p>
<p>whonix-ws-16 via sys-whonix</p>
<p>whonix-ws-16-TEST via sys-whonix-TEST</p>
<p>If you now call whonix-ws-16-TEST or whonix-gw-16-TEST in the Qube-Manager, sys-whonix-TEST will now start correctly.</p>
<p>This is a very good result!</p>
<p>The only error I still detect is the following:</p>
<p>If I call whonix-ws-16-TEST with any function in the app menu (e.g. tor-browser-downloader or terminal), sys-whonix-TEST starts correctly.</p>
<p>With whonix-gw-16-TEST this does not succeed, here sys-whonix starts incorrectly.</p>
<p>I am not sure whether I can configure this extra with a rule in qubes.UpdatesProxy.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/21</link>
        <pubDate>Sat, 06 Aug 2022 17:47:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-21</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Ionixx]]></dc:creator>
        <description><![CDATA[
            <p>Thanks for the revised instructions and tips.</p>
<p>I will try this according to these instructions and then report here about the results.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/20</link>
        <pubDate>Fri, 05 Aug 2022 06:17:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-20</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Updated just now:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Multiple_Qubes-Whonix_Templates">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Multiple_Qubes-Whonix_Templates" target="_blank" rel="noopener" title="03:20PM - 04 August 2022">Whonix – 4 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/352;"><img src="https://www.whonix.org/w/images/7/70/Multiplequbeshwonix.jpg" class="thumbnail" width="640" height="352"></div>

<h3><a href="https://www.whonix.org/wiki/Multiple_Qubes-Whonix_Templates" target="_blank" rel="noopener">Multiple Qubes-Whonix ™ Templates</a></h3>

  <p>Compartmentalization. Managing multiple Qubes-Whonix ™ Templates.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Specifically:<br>
<a href="https://www.whonix.org/wiki/Multiple_Qubes-Whonix_Templates#UpdatesProxy_Settings">UpdatesProxy Settings</a></p>
<p>There is now a complete example.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/19</link>
        <pubDate>Thu, 04 Aug 2022 15:22:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-19</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>$tag:whonix-ws-16-TEST $default allow,target=sys-whonix-TEST<br>
$tag:whonix-gw-16-TEST $default allow,target=sys-whonix-TEST<br>
$tag:whonix-ws-16 $default allow,target=sys-whonix<br>
$tag:whonix-gw-16 $default allow,target=sys-whonix</p>
</blockquote>
<p>There is no <code>$tag</code> <code>whonix-gw-16</code>or <code>whonix-ws-16</code>. If it’s a tag, then the same is most likely generic and does not have a specific version. (That could be the case for some version migration but currently not on the horizon.)</p>
<p>If you cannot find a tag using <code>qvm-tag</code> then there’s no need to reference it in any Qubes policy files.</p>
<blockquote>
<p>$tag:whonix-ws-16-TEST $default allow,target=sys-whonix-TEST<br>
$tag:whonix-gw-16-TEST $default allow,target=sys-whonix-TEST<br>
$tag:whonix-ws-16 $default allow,target=sys-whonix<br>
$tag:whonix-gw-16 $default allow,target=sys-whonix</p>
</blockquote>
<hr>
<blockquote>
<p>$tag:whonix.updatevm $anyvm deny</p>
</blockquote>
<p>That is <code>-</code> not <code>.</code>.</p>
<p>That is:<br>
<code>whonix-updatevm</code></p>
<p>Not:<br>
<code>whonix.updatevm</code></p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/18</link>
        <pubDate>Thu, 04 Aug 2022 15:21:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-18</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Ionixx]]></dc:creator>
        <description><![CDATA[
            <p>Yes, you are right. I didn’t want to open too many threads on similar topics. But I will split the topic and then open a new thread in the Qubes forum.</p>
<p>Please see this link for the new thread:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://forum.qubes-os.org/t/how-to-program-sys-whonix-clone-in-4-1-1/12947">
  <header class="source">
      <img src="https://forum.qubes-os.org/uploads/db3820/optimized/2X/5/55de5eaf64516902429c411f66491cc9db06c464_2_32x32.png" class="site-icon" width="32" height="32">

      <a href="https://forum.qubes-os.org/t/how-to-program-sys-whonix-clone-in-4-1-1/12947" target="_blank" rel="noopener nofollow ugc" title="07:14PM - 02 August 2022">Qubes OS Forum – 2 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/255;"><img src="//forums.whonix.org/uploads/default/optimized/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a_2_690x255.jpeg" class="thumbnail" width="690" height="255" srcset="//forums.whonix.org/uploads/default/optimized/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a_2_690x255.jpeg, //forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg 1.5x, //forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg 2x" data-small-upload="//forums.whonix.org/uploads/default/optimized/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a_2_10x10.png"></div>

<h3><a href="https://forum.qubes-os.org/t/how-to-program-sys-whonix-clone-in-4-1-1/12947" target="_blank" rel="noopener nofollow ugc">How to program "sys-whonix"-clone in 4.1.1?</a></h3>

  <p>Related to the following discuss-link see the following problem:    How to program which file in which policy to update the original-whonix-system via sys-whonix as before, on the other hand the clones (I call them here whonix-ws-16-TEST and...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/17</link>
        <pubDate>Tue, 02 Aug 2022 19:08:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-17</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Question <a href="https://forum.qubes-os.org/t/where-is-policy-d-folder-cannot-find-it/12912/" class="inline-onebox">Where is policy.d-folder? Cannot find it - 4.1 - Qubes OS Forum</a> was answered. That forum thread is completed.</p>
<blockquote>
<p>Nevertheless the question arises,</p>
</blockquote>
<p>This I find messy. Should be a separate forum thread. I’d suggest to edit from there and create a new proper forum thread.<br>
Note: I am not a Qubes forum moderator and that’s just my personal opinion.</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/16</link>
        <pubDate>Tue, 02 Aug 2022 11:21:07 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-16</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
      <item>
        <title>sys-whonix starts unintentionally</title>
        <dc:creator><![CDATA[Ionixx]]></dc:creator>
        <description><![CDATA[
            <p>Of course, here it is:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://forum.qubes-os.org/t/where-is-policy-d-folder-cannot-find-it/12912">
  <header class="source">
      <img src="https://forum.qubes-os.org/uploads/db3820/optimized/2X/5/55de5eaf64516902429c411f66491cc9db06c464_2_32x32.png" class="site-icon" width="32" height="32">

      <a href="https://forum.qubes-os.org/t/where-is-policy-d-folder-cannot-find-it/12912" target="_blank" rel="noopener nofollow ugc" title="03:14PM - 01 August 2022">Qubes OS Forum – 1 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:472/471;"><img src="https://forum.qubes-os.org/uploads/db3820/original/1X/10549f9dff8a289d117f083e9f5155231c452db2.png" class="thumbnail" width="472" height="471"></div>

<h3><a href="https://forum.qubes-os.org/t/where-is-policy-d-folder-cannot-find-it/12912" target="_blank" rel="noopener nofollow ugc">Where is policy.d-folder? Cannot find it</a></h3>

  <p>Hello,  I use Qubes 4.1.1. (fresh installation and strictly and correctly verified). But:  I noticed that in the chapter “sdwdate-gui qrexec” in the mentioned file path  /etc/qubes/policy.d/80-whonix-policy  the policy.d folder is not present, only...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>especially last paragraph</p>
          <p><a href="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227/15</link>
        <pubDate>Tue, 02 Aug 2022 10:56:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14227-15</guid>
        <source url="http://forums.whonix.org/t/sys-whonix-starts-unintentionally/14227.rss">sys-whonix starts unintentionally</source>
      </item>
  </channel>
</rss>
