<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>cannot use pkexec</title>
    <link>http://forums.whonix.org/t/cannot-use-pkexec/8129</link>
    <description>I have found a solution, but it only works in my friend&#39;s (fresh) Whonix 15, and not mine. The easy test anyone can do is to do `pkexec mousepad` from Workstation Terminal. It SHOULD launch the pkexec prompt, as a simple test of its operation.

It does in my friend&#39;s, but it does not in mine. This is literally the latest Whonix OVA I&#39;m trying

Does it work in yours? Can others please test this and report back?</description>
    <language>en</language>
    <lastBuildDate>Mon, 02 Mar 2020 07:16:35 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="AnonymousUser" data-post="56" data-topic="8129">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>(I assume that fix will make its way into the next point release,</p>
</blockquote>
</aside>
<p>Yes.</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/57">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/57</link>
        <pubDate>Mon, 02 Mar 2020 07:16:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-57</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[AnonymousUser]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> that amended code fixed it! GDbei back to normal again. <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"> Thank you. (I assume that fix will make its way into the next point release, or however it works.)</p>
<p>I never actually use ZuluCrypt itself.</p>
<p>I didn’t see Thunar external hard drive mounting affected by the recent point release, so with that fix above, at least from my end this issue isn’t present anywhere.</p>
<p>As always, I’ll keep observing and reporting.</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/56">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/56</link>
        <pubDate>Mon, 02 Mar 2020 04:30:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-56</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>in git master:</p>
<p>working:</p>
<ul>
<li>synaptic</li>
<li>gdebi</li>
<li>gparted</li>
</ul>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/commit/649ec5dfa1d2c0e324d8054b4c7402ab2b462d93" target="_blank">github.com/Whonix/security-misc</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/security-misc/commit/649ec5dfa1d2c0e324d8054b4c7402ab2b462d93" target="_blank">pkexec wrapper: fix gdebi / synaptic</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2020-02-29" data-time="09:59:56" data-timezone="UTC">09:59AM - 29 Feb 20 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 9 additions and 8 deletions">
        <a href="https://github.com/Whonix/security-misc/commit/649ec5dfa1d2c0e324d8054b4c7402ab2b462d93" target="_blank">
          <span class="added">+9</span>
          <span class="removed">-8</span>
        </a>
      </div>
    </div>

  </div>
</div>


  <div class="github-row">
    <pre class="github-content" style="white-space: normal;">but at cost of checking for passwordless sudo /etc/suders /etc/sudoers.d
exceptions.
http://forums.whonix.org/t/cannot-use-pkexec/8129/53</pre>
  </div>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>You could get this from github <a href="https://github.com/Whonix/security-misc/blob/master/usr/bin/pkexec.security-misc">pkexec.security-misc</a>.</p>
<p>Probably easier to copy from github raw.</p>
<p><a href="https://raw.githubusercontent.com/Whonix/security-misc/master/usr/bin/pkexec.security-misc">https://raw.githubusercontent.com/Whonix/security-misc/master/usr/bin/pkexec.security-misc</a></p>
<pre><code>lxsudo mousepad /usr/bin/pkexec.security-misc
</code></pre>
<aside class="quote no-group" data-username="AnonymousUser" data-post="53" data-topic="8129">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>ZuluCrypt works.</p>
</blockquote>
</aside>
<p>ZuluCrypt gui: not tested to encrypt devices but I guess it will still work.</p>
<p>Please let me know what remains broken.</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/55">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/55</link>
        <pubDate>Sat, 29 Feb 2020 10:31:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-55</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="AnonymousUser" data-post="53" data-topic="8129">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>If I apply this fix from Patrick: <a href="https://forums.whonix.org/t/cannot-use-pkexec/8129/21">cannot use pkexec</a></p>
</blockquote>
</aside>
<p>Without that fix btw there should now be debug output in journal log.</p>
<aside class="quote no-group" data-username="AnonymousUser" data-post="53" data-topic="8129">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>(What is overriding that?)</p>
</blockquote>
</aside>
<p>Most likely the package that owns that files which comes from <a href="http://packages.debian.org">packages.debian.org</a> since Whonix doesn’t ship any files there.</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/54">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/54</link>
        <pubDate>Sat, 29 Feb 2020 04:48:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-54</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[AnonymousUser]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a>, upgrading to the point release 15.0.0.8.9 in-place, this bug is back again (even in my existing upgraded in-place system in which I had already applied my own manual fix).</p>
<p>I cannot install DEB files with GDebi, cannot launch Synaptic, and ZuluCrypt error at launch.</p>
<p>Investigating my own (re)solution right now and will report back.</p>
<p><strong>Update:</strong> This bug is now worse than it was before, and I cannot find a fix. This is all tested on multiple fresh 15.0.0.8.9 OVAs out of the box.</p>
<p>My previous fix of changing ‘auth_admin’ (or ‘no’) to ‘yes’ in various policykit files in <code>/usr/share/polkit-1/actions/</code> no longer works. (What is overriding that?)</p>
<p>If I apply this fix from Patrick: <a href="https://forums.whonix.org/t/cannot-use-pkexec/8129/21" class="inline-onebox">cannot use pkexec</a></p>
<ul>
<li>Synaptic works.</li>
<li>ZuluCrypt works.</li>
<li>But Gdebi NOT fixed. (This is the one a lot of people are used to.) Bad errors.</li>
</ul>
<p>Not to mention other packages like KDE Partition Manager. Now I can’t use that application either.</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/53">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/53</link>
        <pubDate>Sat, 29 Feb 2020 00:16:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-53</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Seems quite difficult to create a wrapper. policykit-1 / pkexec is used a lot and quite complex package. Provides a lot binaries.</p>
<pre><code>apt-file list policykit-1
</code></pre>
<blockquote>
<p>policykit-1: /etc/pam.d/polkit-1<br>
policykit-1: /etc/polkit-1/localauthority.conf.d/50-localauthority.conf<br>
policykit-1: /etc/polkit-1/localauthority.conf.d/51-debian-sudo.conf<br>
policykit-1: /etc/polkit-1/nullbackend.conf.d/50-nullbackend.conf<br>
policykit-1: /lib/systemd/system/polkit.service<br>
policykit-1: /usr/bin/pkaction<br>
policykit-1: /usr/bin/pkcheck<br>
policykit-1: /usr/bin/pkexec<br>
policykit-1: /usr/bin/pkttyagent<br>
policykit-1: /usr/lib/policykit-1/polkit-agent-helper-1<br>
policykit-1: /usr/lib/policykit-1/polkitd<br>
policykit-1: /usr/lib/x86_64-linux-gnu/polkit-1/extensions/libnullbackend.so<br>
policykit-1: /usr/share/dbus-1/system-services/org.freedesktop.PolicyKit1.service<br>
policykit-1: /usr/share/dbus-1/system.d/org.freedesktop.PolicyKit1.conf</p>
</blockquote>
<blockquote>
<p>/usr/share/polkit-1/actions/org.xfce.thunar.policy</p>
</blockquote>
<p>How would I test functionality <code>Run Thunar as root</code>? That’s functionality I haven’t discovered yet.</p>
<aside class="quote no-group" data-post="51" data-topic="8129">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Files not containing string <code>path</code> .</p>
</blockquote>
</aside>
<p>I.e. policykit policy files that don’t contain a /path/to/binary. I’ve read “policykit helps to run an application as non-root while allowing the application to run only these parts as root which require that”.</p>
<p>How would I test the functionality of <code>ktexteditor-data: /usr/share/polkit-1/actions/org.kde.ktexteditor.katetextbuffer.policy</code>?</p>
<p>I am considering to revert <a href="https://github.com/Whonix/security-misc/blob/master/lib/systemd/system/proc-hidepid.service"><code>hidepid</code></a>. Any alternative? <a class="mention" href="http://forums.whonix.org/u/madaidan">@madaidan</a></p>
<ul>
<li>Can you make policykit compatible with hidepid upstream?</li>
<li>Can you make above functionality work and improve pkexec wrapper?</li>
<li>Any other solution reaching the same goal (similar hidepid) that does not break pkexec? Perhaps using <a href="https://forums.whonix.org/t/pam-namspace-namespace-conf-to-give-user-own-private-tmp/8600">namespaces</a> or something?</li>
</ul>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/52">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/52</link>
        <pubDate>Wed, 15 Jan 2020 08:51:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-52</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Files not containing string <code>path</code>.</p>
<pre><code>#!/bin/bash

for x in $(find /usr/share/polkit-1/actions/ -type f) ; do
    if grep "path" "$x" -q ; then
        continue
    fi
    echo "$(dpkg -S $x)"
done
</code></pre>
<blockquote>
<p><code>file owned by package name: file full path</code></p>
</blockquote>
<blockquote>
<p>systemd: /usr/share/polkit-1/actions/org.freedesktop.resolve1.policy<br>
systemd: /usr/share/polkit-1/actions/org.freedesktop.locale1.policy<br>
lightdm: /usr/share/polkit-1/actions/org.freedesktop.DisplayManager.AccountsService.policy<br>
rtkit: /usr/share/polkit-1/actions/org.freedesktop.RealtimeKit1.policy<br>
ktexteditor-data: /usr/share/polkit-1/actions/org.kde.ktexteditor.katetextbuffer.policy<br>
udisks2: /usr/share/polkit-1/actions/org.freedesktop.UDisks2.policy<br>
network-manager: /usr/share/polkit-1/actions/org.freedesktop.NetworkManager.policy<br>
systemd: /usr/share/polkit-1/actions/org.freedesktop.timedate1.policy<br>
systemd: /usr/share/polkit-1/actions/org.freedesktop.hostname1.policy<br>
modemmanager: /usr/share/polkit-1/actions/org.freedesktop.ModemManager1.policy<br>
cups-pk-helper: /usr/share/polkit-1/actions/org.opensuse.cupspkhelper.mechanism.policy<br>
systemd: /usr/share/polkit-1/actions/org.freedesktop.login1.policy</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/51">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/51</link>
        <pubDate>Wed, 15 Jan 2020 08:27:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-51</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>another issue:</p>
<aside class="quote" data-post="1" data-topic="8764">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/xfce4-power-manager-xfpm-power-backlight-helper-pkexec-lxsudo-popup/8764/1">xfce4-power-manager xfpm-power-backlight-helper pkexec lxsudo popup</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/development"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    At boot of a Kicksecure host system, there is a lxsudo popup asking for permission. 
xfpm-power-backlight-helper --set-brightness 0

/etc/xdg/autostart/xfce4-power-manager.desktop is probably responsible for that chain reaction. 
This probably needs an /etc/sudoers.d exception.
  </blockquote>
</aside>

<p>another pkexec related fix (which hopefully won’t lead to more pkexec related regressions):</p>
<aside class="quote quote-modified" data-post="2" data-topic="8764">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/xfce4-power-manager-xfpm-power-backlight-helper-pkexec-lxsudo-popup/8764/2">xfce4-power-manager xfpm-power-backlight-helper pkexec lxsudo popup</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/development"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    
  </blockquote>
</aside>

<p>Due to above change, we at least can now see in journal when pkexec wrapper gets run and what the output of any applications is in case these are failing.</p>
<p>There could be quite a few broken things due to hidepid / pkexec wrapper.</p>
<p>Files containing string <code>path</code>.</p>
<pre><code>#!/bin/bash

for x in $(find /usr/share/polkit-1/actions/ -type f) ; do
    echo "$(dpkg -S $x)" 
done
</code></pre>
<blockquote>
<p><code>file owned by package name: file full path</code></p>
</blockquote>
<blockquote>
<p>dpkg: /usr/share/polkit-1/actions/org.dpkg.pkexec.update-alternatives.policy<br>
libkf5sysguard-data: /usr/share/polkit-1/actions/org.kde.ksysguard.processlisthelper.policy<br>
xserver-xorg-video-intel: /usr/share/polkit-1/actions/org.x.xf86-video-intel.backlight-helper.policy<br>
systemd: /usr/share/polkit-1/actions/org.freedesktop.resolve1.policy<br>
systemd: /usr/share/polkit-1/actions/org.freedesktop.locale1.policy<br>
lightdm: /usr/share/polkit-1/actions/org.freedesktop.DisplayManager.AccountsService.policy<br>
gdebi: /usr/share/polkit-1/actions/com.ubuntu.pkexec.gdebi-gtk.policy<br>
rtkit: /usr/share/polkit-1/actions/org.freedesktop.RealtimeKit1.policy<br>
xfce4-power-manager: /usr/share/polkit-1/actions/org.xfce.power.policy<br>
ktexteditor-data: /usr/share/polkit-1/actions/org.kde.ktexteditor.katetextbuffer.policy<br>
udisks2: /usr/share/polkit-1/actions/org.freedesktop.UDisks2.policy<br>
policykit-1: /usr/share/polkit-1/actions/org.freedesktop.policykit.policy<br>
network-manager: /usr/share/polkit-1/actions/org.freedesktop.NetworkManager.policy<br>
thunar: /usr/share/polkit-1/actions/org.xfce.thunar.policy<br>
systemd: /usr/share/polkit-1/actions/org.freedesktop.timedate1.policy<br>
xfce4-session: /usr/share/polkit-1/actions/org.xfce.session.policy<br>
systemd: /usr/share/polkit-1/actions/org.freedesktop.systemd1.policy<br>
systemd: /usr/share/polkit-1/actions/org.freedesktop.hostname1.policy<br>
modemmanager: /usr/share/polkit-1/actions/org.freedesktop.ModemManager1.policy<br>
synaptic: /usr/share/polkit-1/actions/com.ubuntu.pkexec.synaptic.policy<br>
cups-pk-helper: /usr/share/polkit-1/actions/org.opensuse.cupspkhelper.mechanism.policy<br>
systemd: /usr/share/polkit-1/actions/org.freedesktop.login1.policy<br>
packagekit: /usr/share/polkit-1/actions/org.freedesktop.packagekit.policy<br>
liblxqt0: /usr/share/polkit-1/actions/org.lxqt.backlight.pkexec.policy</p>
</blockquote>
<p>Paths point at these applications:</p>
<ul>
<li>update-alternatives</li>
<li>/usr/lib/xserver-xorg-video-intel/xf86-video-intel-backlight-helper</li>
<li>gdebi-gtk</li>
<li>xfpm-power-backlight-helper [fixed in git master]</li>
<li>xfce4-pm-helper [fixed in git master]</li>
<li>pklalockdown</li>
<li>thunar</li>
<li>/usr/lib/x86_64-linux-gnu/xfce4/session/xfsm-shutdown-helper</li>
<li>/lib/systemd/systemd-reply-password</li>
<li>synaptic</li>
<li>pk-device-rebind</li>
<li>lxqt-backlight_backend</li>
</ul>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/49">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/49</link>
        <pubDate>Wed, 15 Jan 2020 08:04:51 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-49</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>pkexec wrapper might be called without us having a chance to know that. Therefore I’ve now added logging when pkexec wrapper is called to systemd journal. (Calls to sudo are similarly logged by Debian default.)</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/commit/082f04f2d4101828455a4a9b2852376a72ced6ce" target="_blank">github.com/Whonix/security-misc</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/security-misc/commit/082f04f2d4101828455a4a9b2852376a72ced6ce" target="_blank">add logging to pkexec wrapper</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2020-01-14" data-time="20:04:58" data-timezone="UTC">08:04PM - 14 Jan 20 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 10 additions and 2 deletions">
        <a href="https://github.com/Whonix/security-misc/commit/082f04f2d4101828455a4a9b2852376a72ced6ce" target="_blank">
          <span class="added">+10</span>
          <span class="removed">-2</span>
        </a>
      </div>
    </div>

  </div>
</div>




  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Identifying <a href="https://forums.whonix.org/t/xfce4-power-manager-xfpm-power-backlight-helper-pkexec-lxsudo-popup/8764/2" class="inline-onebox">xfce4-power-manager xfpm-power-backlight-helper pkexec lxsudo popup</a> was simple but other stuff might otherwise be hard to debug.</p>
<hr>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/commit/082f04f2d4101828455a4a9b2852376a72ced6ce" target="_blank">github.com/Whonix/security-misc</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/security-misc/commit/082f04f2d4101828455a4a9b2852376a72ced6ce" target="_blank">add logging to pkexec wrapper</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2020-01-14" data-time="20:04:58" data-timezone="UTC">08:04PM - 14 Jan 20 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 10 additions and 2 deletions">
        <a href="https://github.com/Whonix/security-misc/commit/082f04f2d4101828455a4a9b2852376a72ced6ce" target="_blank">
          <span class="added">+10</span>
          <span class="removed">-2</span>
        </a>
      </div>
    </div>

  </div>
</div>




  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/48">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/48</link>
        <pubDate>Tue, 14 Jan 2020 20:18:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-48</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Did you try disabling hidepid yet as per this forum post <a href="https://forums.whonix.org/t/cannot-use-pkexec/8129/32" class="inline-onebox">cannot use pkexec</a> yet?</p>
<p>(I am not suggesting this as the final solution but that would help to identify the cause so a proper fix can be developed.)</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/47">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/47</link>
        <pubDate>Tue, 14 Jan 2020 19:44:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-47</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[AnonymousUser]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="45" data-topic="8129" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Anything that remained unfixed here?</p>
</blockquote>
</aside>
<p>Yes. Thunar mounting (or auto mounting) of external drives (e.g. a vbox VDI). I can continue to test for you on a Developer OVA. Its current status is it still doesn’t work without giving <code>UDisks2</code> an explicit policykit exception which is obviously dangerous and not ideal.</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/46">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/46</link>
        <pubDate>Tue, 14 Jan 2020 19:30:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-46</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Anything that remained unfixed here?</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/45">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/45</link>
        <pubDate>Sat, 11 Jan 2020 13:43:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-45</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Now also fixed in testers-only build: <a href="https://forums.whonix.org/t/whonix-virtualbox-15-0-0-6-6-testers-wanted/8370" class="inline-onebox">Whonix VirtualBox 15.0.0.6.6 - Testers Wanted!</a></p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/44">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/44</link>
        <pubDate>Thu, 31 Oct 2019 06:07:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-44</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <ul>
<li>In Whonix testers repository this is fixed:</li>
<li>In Whonix 15.0.0.6.5-developers-only and above this is fixed.<br>
(15.0.0.6.5-developers-only has some unrelated imperfections. Won’t be released. Higher Whonix release tag and testers-only release coming soon.)</li>
</ul>
<p>The <a href="https://github.com/Whonix/security-misc/blob/master/usr/bin/pkexec.security-misc" rel="nofollow noopener">pkexec wrapper</a> in upgraded security-misc package is functional.</p>
<p>Fixed meaning: I successfully used: gdebi, synaptic, gparted.</p>
<p>Fixed:</p>
<ul>
<li><a href="https://forums.whonix.org/t/gdebi-package-installer-doesnt-work-in-whonix-15-is-there-a-fix/8052/9" class="inline-onebox">GDebi Package Installer doesn't work in Whonix 15. Is there a fix?</a></li>
<li><a href="https://forums.whonix.org/t/cannot-use-gparted/8130" class="inline-onebox">cannot use gparted</a></li>
</ul>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/43">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/43</link>
        <pubDate>Sat, 26 Oct 2019 13:20:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-43</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="41" data-topic="8129">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>So for Whonix 15 either pkexec to lxqt-sudo redirection or disabling proc-hidepid by default. Which one would you suggest?</p>
</blockquote>
</aside>
<p>hidepid is a really useful feature and as Whonix is a security focused distro, I think it should stay enabled by default with the redirect at the cost of minor breakage.</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/42">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/42</link>
        <pubDate>Mon, 21 Oct 2019 16:33:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-42</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="39" data-topic="8129">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Or 3:</p>
<ul>
<li>Get Debian to bring back the <code>polkitd</code> user so we can add it to a <code>proc</code> group</li>
</ul>
</blockquote>
</aside>
<p>This could be done in parallel. But I don’t have much hope given the non-activity of that bug report and little polkit package version number bumps throughout Debian releases. It’s probably “patches welcome”. Also this doesn’t solve this issue in Whonix 15 since polkit changes would have to wait until Debian bullseye based Whonix for the fixed polkit version to trickle down.</p>
<aside class="quote no-group" data-post="39" data-topic="8129">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Why grep for <code>/proc</code> then for <code>hidepid=2</code> ? <code>hidepid=2</code> is only a mount option for <code>/proc</code> . It can’t be set elsewhere so grepping for <code>/proc</code> is redundant.</p>
</blockquote>
</aside>
<p>Wasn’t sure about it. Just wanted to make sure non-root users cannot influence this behavior.</p>
<aside class="quote no-group" data-post="39" data-topic="8129">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Redirecting pkexec to lxqt-sudo seems like an incredibly hacky way to do this.</p>
</blockquote>
</aside>
<p>Agreed. So for Whonix 15 either pkexec to lxqt-sudo redirection or disabling proc-hidepid by default. Which one would you suggest?</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/41">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/41</link>
        <pubDate>Mon, 21 Oct 2019 16:11:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-41</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="38" data-topic="8129">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/919ad9/40.png" class="avatar"> amoretpax:</div>
<blockquote>
<p>If it would be better to open a new thread about this, I will gladly do so.</p>
</blockquote>
</aside>
<p>Please try if this workaround solves your issue:</p>
<aside class="quote" data-post="32" data-topic="8129">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar">
    <a href="https://forums.whonix.org/t/cannot-use-pkexec/8129/32">cannot use pkexec</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/support"><span class="badge-category-bg" style="background-color: #8C6238;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="User support for the Whonix operating system. (devs)">Support</span></a>
  </div>
  <blockquote>
    I don’t have an explanation but 
sudo systemctl mask proc-hidepid

and reboot 
fixed pkexec issues for me. Reliably. Reproduced many times on and off.
  </blockquote>
</aside>

<p>If not solved: new thread</p>
<p>If solved: no new thread</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/40">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/40</link>
        <pubDate>Mon, 21 Oct 2019 16:08:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-40</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="37" data-topic="8129">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Two options to solve this.</p>
<ul>
<li>disable proc-hidepid by default</li>
<li>perhaps redirect pkexec to lxqt-sudo / sudo</li>
</ul>
</blockquote>
</aside>
<p>Or 3:</p>
<ul>
<li>Get Debian to bring back the <code>polkitd</code> user so we can add it to a <code>proc</code> group</li>
</ul>
<p>Redirecting pkexec to lxqt-sudo seems like an incredibly hacky way to do this.</p>
<blockquote>
<p>if ! mount | grep “/proc” | grep “hidepid=2”</p>
</blockquote>
<p>Why grep for <code>/proc</code> then for <code>hidepid=2</code>? <code>hidepid=2</code> is only a mount option for <code>/proc</code>. It can’t be set elsewhere so grepping for <code>/proc</code> is redundant.</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/39">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/39</link>
        <pubDate>Mon, 21 Oct 2019 15:51:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-39</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[amoretpax]]></dc:creator>
        <description><![CDATA[
            <p>Hello. I read the comment in this thread that my specific issue with Zulucrypt throwing an error are probably unrelated to the subject of this thread.</p>
<p>That said, I wanted to offer some anecdotal details from my experience since the last time I posted a comment on this thread.</p>
<p>If it would be better to open a new thread about this, I will gladly do so.</p>
<p>Steps in this process:</p>
<p>(1) Everything is working properly in my instance of Whonix.</p>
<p>(2) Update/upgrade Whonix to Debian 10/Buster base as instructed.</p>
<p>(3) After reboot, I first got the error regarding “pkexec”, and found this thread. (The only app I used that this affected was Zulucrypt.)</p>
<p>(4) Applied the posted/possible workaround, and was able to start Zulucrypt but not able to open an encrypted volume that had worked fine before upgrade/update to Debian 10/Buster base. That’s the error I had posted about previously that might be unrelated to the “pkexec” error.</p>
<p>Since then:</p>
<p>(5) I opened the original instance of Whonix VM’s (from which this instance was cloned back in July).  I went through the exact steps of updating/upgrading as above and duplicated every one of the steps with exactly the same results.</p>
<p>(6) I installed “gnome-disk-utility” which has the ability to attach and open LUKS-encrypted images/volumes. It attached okay, but upon attempting to decrypt it, it throws this error upon failure:</p>
<p>“error unlocking /dev/loop0: The function ‘bd_crytpo_luks_open_blob’ called but not implemented1 (udisks-error-quark; 0)”</p>
<p>Conclusion:  I will gladly post this as a new thread if advisable; it is possible that the error involving “pkexec” and this problem of decrypting a previously created LUKS volume are separate issues. The certain overlap is that both manifestations began occurring at the time of updating/upgrading the existing Whonix instance to the Debian 10/Buster base.</p>
<p>Thank you.<br>
Amoretpax</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/38">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/38</link>
        <pubDate>Mon, 21 Oct 2019 13:44:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-38</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Two options to solve this.</p>
<ul>
<li>disable proc-hidepid by default</li>
<li>perhaps redirect pkexec to lxqt-sudo / sudo</li>
</ul>
<p>The second option is currently being tested by me.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/commit/40707e70dbbf74e5ee3cd25bd2737f880d4bca5c" target="_blank" rel="nofollow noopener">github.com/Whonix/security-misc</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/security-misc/commit/40707e70dbbf74e5ee3cd25bd2737f880d4bca5c" target="_blank" rel="nofollow noopener">Redirect calls for pkexec to lxqt-sudo because pkexec is incompatible with hidepid.</a>
</h4>

  <pre class="message" style="white-space: normal;">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=860040
https://forums.whonix.org/t/cannot-use-pkexec/8129
Thanks to AnonymousUser for the bug report!</pre>

<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="https://github.com/Whonix/security-misc/commit/40707e70dbbf74e5ee3cd25bd2737f880d4bca5c" target="_blank" rel="nofollow noopener">09:46AM - 21 Oct 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>5 files</strong>
  with <strong>106 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>The wrapper could use some review. See:</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/blob/master/usr/bin/pkexec.security-misc" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/security-misc/blob/master/usr/bin/pkexec.security-misc" target="_blank" rel="nofollow noopener">Whonix/security-misc/blob/master/usr/bin/pkexec.security-misc</a></h4>
<pre><code class="lang-security-misc">#!/bin/bash

## Copyright (C) 2019 - 2019 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## Redirect calls for pkexec to lxqt-sudo because pkexec is incompatible with
## hidepid.
## * https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=860040
## * https://forums.whonix.org/t/cannot-use-pkexec/8129

set -e

## If hidepid is not in use, just use pkexec normally.
if ! mount | grep "/proc" | grep "hidepid=2" ; then
   pkexec.security-misc-orig "$@"
   exit $?
fi

## Prefer lxqt-sudo.
use_sudo=false
</code></pre>

  This file has been truncated. <a href="https://github.com/Whonix/security-misc/blob/master/usr/bin/pkexec.security-misc" target="_blank" rel="nofollow noopener">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>For now only in developers repository which I don’t recommend for users/testers.</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/37">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/37</link>
        <pubDate>Mon, 21 Oct 2019 10:00:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-37</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <ul>
<li>debian bug report: <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=860040" rel="nofollow noopener">policykit-1: Hardening /proc in fstab with hidepid=1 or 2 blocks pkexec</a>
</li>
<li><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1130796" rel="nofollow noopener">“hidepid” procfs option breaks mounting of thumbdrives</a></li>
</ul>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/36">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/36</link>
        <pubDate>Mon, 21 Oct 2019 08:22:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-36</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[AnonymousUser]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group quote-modified" data-post="27" data-topic="8129">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<blockquote>
<p>Mounting an external drive (vbox VDI) in Thunar: <strong>This still doesn’t work.</strong> Click on the drive in Thunar devices list, nothing happens.</p>
</blockquote>
<p>Are you sure you enabled thunar-volman? It’s disabled by default.</p>
</blockquote>
</aside>
<p>You mean this?</p>
<p></p><div class="lightbox-wrapper"><a class="lightbox" href="//forums.whonix.org/uploads/default/original/2X/2/27c37941634c006bc7dfcd0730c4635e6f5a11b9.png" data-download-href="//forums.whonix.org/uploads/default/27c37941634c006bc7dfcd0730c4635e6f5a11b9" title="1.png"><img src="//forums.whonix.org/uploads/default/optimized/2X/2/27c37941634c006bc7dfcd0730c4635e6f5a11b9_2_406x500.png" alt="1" data-base62-sha1="5FLq95BYOdMsOv4rORzkNXsezB7" width="406" height="500" srcset="//forums.whonix.org/uploads/default/optimized/2X/2/27c37941634c006bc7dfcd0730c4635e6f5a11b9_2_406x500.png, //forums.whonix.org/uploads/default/original/2X/2/27c37941634c006bc7dfcd0730c4635e6f5a11b9.png 1.5x, //forums.whonix.org/uploads/default/original/2X/2/27c37941634c006bc7dfcd0730c4635e6f5a11b9.png 2x" data-small-upload="//forums.whonix.org/uploads/default/optimized/2X/2/27c37941634c006bc7dfcd0730c4635e6f5a11b9_2_10x10.png"></a></div><br>
If so, well I then installed <code>gvfs-backends</code> and <code>gvfs-fuse</code> packages, restarted, then ticked ‘Enable Volume Management’ to apparently fix that:<p></p>
<p></p><div class="lightbox-wrapper"><a class="lightbox" href="//forums.whonix.org/uploads/default/original/2X/0/0f306257db7c94b4c76e2305d6704e733546f3ee.png" data-download-href="//forums.whonix.org/uploads/default/0f306257db7c94b4c76e2305d6704e733546f3ee" title="2.png"><img src="//forums.whonix.org/uploads/default/optimized/2X/0/0f306257db7c94b4c76e2305d6704e733546f3ee_2_425x500.png" alt="2" data-base62-sha1="2amP7RCB1HgwYbpX9kLug1mc5wW" width="425" height="500" srcset="//forums.whonix.org/uploads/default/optimized/2X/0/0f306257db7c94b4c76e2305d6704e733546f3ee_2_425x500.png, //forums.whonix.org/uploads/default/original/2X/0/0f306257db7c94b4c76e2305d6704e733546f3ee.png 1.5x, //forums.whonix.org/uploads/default/original/2X/0/0f306257db7c94b4c76e2305d6704e733546f3ee.png 2x" data-small-upload="//forums.whonix.org/uploads/default/optimized/2X/0/0f306257db7c94b4c76e2305d6704e733546f3ee_2_10x10.png"></a></div><br>
I even went into its configuration to tick to auto mount hotplugged and inserted external drives.<p></p>
<p>But…still doesn’t work. I click on my drive under Devices in Thunar, nothing happens. In my main Whonix, my own insecure hacky fix continues to work.</p>
<p>Hope that helps. The above newer posts sound promising.</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/35">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/35</link>
        <pubDate>Sat, 19 Oct 2019 21:05:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-35</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>I only managed to fix <code>pkexec</code> by allowing the <code>user</code> user unrestricted access to <code>/proc</code>. This means polkitd drops privileges to the current running user instead of any special polkit user. We should make a bug report and try to make them bring back the <code>polkitd</code> user.</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/34">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/34</link>
        <pubDate>Sat, 19 Oct 2019 18:38:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-34</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>Disabling <code>proc-hidepid.service</code> actually does work for me. It didn’t before for some reason (probably because I still had the <code>/sys</code> restrictions enabled).</p>
<p><a href="https://wiki.debian.org/Hardening#Mounting_.2Fproc_with_hidepid" rel="nofollow noopener">https://wiki.debian.org/Hardening#Mounting_.2Fproc_with_hidepid</a> talks about polkit dropping privileges and needing an exception although there isn’t a <code>polkitd</code> user.</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/33">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/33</link>
        <pubDate>Sat, 19 Oct 2019 17:18:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-33</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
      <item>
        <title>cannot use pkexec</title>
        <dc:creator><![CDATA[Patrick_mobile]]></dc:creator>
        <description><![CDATA[
            <p>I don’t have an explanation but</p>
<pre><code>sudo systemctl mask proc-hidepid
</code></pre>
<p>and reboot</p>
<p>fixed pkexec issues for me. Reliably. Reproduced many times on and off.</p>
          <p><a href="http://forums.whonix.org/t/cannot-use-pkexec/8129/32">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cannot-use-pkexec/8129/32</link>
        <pubDate>Sat, 19 Oct 2019 16:48:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8129-32</guid>
        <source url="http://forums.whonix.org/t/cannot-use-pkexec/8129.rss">cannot use pkexec</source>
      </item>
  </channel>
</rss>
