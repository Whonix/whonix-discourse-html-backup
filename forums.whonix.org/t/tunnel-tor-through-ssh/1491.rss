<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Tunnel Tor through SSH</title>
    <link>http://forums.whonix.org/t/tunnel-tor-through-ssh/1491</link>
    <description>Hello Community!

Im new here and i wanna say first that Whonix is really awesome. A masterpiece!

But here is the reason why i opened this thread.
I testet the possibility to route Tor through a SSH tunnel which is running on the Host system.
Therefore i followed the manual on https://www.whonix.org/wiki/Tunnel_Tor_through_proxy_or_VPN_or_SSH#Tunnel_Tor_through_SSH
But it seems there are 2 little, but serious, mistakes in it.

I fixed it that way.
Terminal on the host:
&lt;blockquote&gt;ssh -D 1080 your.ssh.server&lt;/blockquote&gt;
I changed that to
&lt;blockquote&gt;ssh -g -D 1080 your.ssh.server&lt;/blockquote&gt;
-g Allows remote hosts to connect to local forwarded ports.

Root terminal on the host:
&lt;blockquote&gt;ifconfig -a&lt;/blockquote&gt;
The eth0 network interface has an address like 192.168.1.10  
So i changed the instruction for the torrc file on the Gateway to
&lt;blockquote&gt;## In case SSH tunnel has been setup from Whonix-Gateway. Socks5Proxy [b]192.168.1.10 [/b]:1080 ## In case SSH tunnel has been setup on the host. #Socks5Proxy IP:PORT&lt;/blockquote&gt;
Now it works!

I tested it with success too.
The webbrowser in the workstation worked fine till i closed the SSH tunnel on the host. The Tor browser wasnt working anymore, till to the moment i activated the SSH tunnel again.

Hope my feedback is welcome and correct.</description>
    <language>en</language>
    <lastBuildDate>Fri, 09 Oct 2015 18:05:37 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/tunnel-tor-through-ssh/1491.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Tunnel Tor through SSH</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>You donâ€™t necessarily need an account. Anonymous edits allowed. Held for moderation. Just press the edit button.</p>
          <p><a href="http://forums.whonix.org/t/tunnel-tor-through-ssh/1491/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tunnel-tor-through-ssh/1491/4</link>
        <pubDate>Fri, 09 Oct 2015 18:05:37 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1491-4</guid>
        <source url="http://forums.whonix.org/t/tunnel-tor-through-ssh/1491.rss">Tunnel Tor through SSH</source>
      </item>
      <item>
        <title>Tunnel Tor through SSH</title>
        <dc:creator><![CDATA[Silance]]></dc:creator>
        <description><![CDATA[
            <p>I would be happy to edit the manual, but i cant log in to edit it.<br>
Please send me a private msg, if i should do.</p>
          <p><a href="http://forums.whonix.org/t/tunnel-tor-through-ssh/1491/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tunnel-tor-through-ssh/1491/3</link>
        <pubDate>Fri, 09 Oct 2015 18:02:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1491-3</guid>
        <source url="http://forums.whonix.org/t/tunnel-tor-through-ssh/1491.rss">Tunnel Tor through SSH</source>
      </item>
      <item>
        <title>Tunnel Tor through SSH</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Thanks. Feedback is appreciated.</p>
<p>That documentation is really old and not touched for a long time.</p>
<blockquote>The chapter "Tunnel Tor through SSH" is not fully tested/complete. Please give feedback if it worked for you. This doesn't seem to be very popular, no one ever asked about it in over one year.</blockquote>
<p>The link you posted will be deprecated soon. Content has been moved here:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Using_Tunnels_with_Whonix#Connecting_to_SSH_before_Tor_.28User_-.3E_SSH_-.3E_Tor_-.3E_Internet.29" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/452;"><img src="https://www.whonix.org/w/images/8/86/Beyond-1087922640.jpg" class="thumbnail"></div>

<h3><a href="https://www.whonix.org/wiki/Using_Tunnels_with_Whonix#Connecting_to_SSH_before_Tor_.28User_-.3E_SSH_-.3E_Tor_-.3E_Internet.29" target="_blank" rel="nofollow noopener">Tunnels/Introduction</a></h3>

<p>Instructions on how to combine tunnels (VPN, SSH, proxy) with Tor. (User -&gt; Tor -&gt; proxy/VPN/SSH -&gt; Internet) (User -&gt; proxy/VPN/SSH -&gt;...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<p>That chapter is for:<br>
User -&gt; SSH -&gt; Tor -&gt; Internet</p>
<p>So on the gateway ssh could run as user clearnet. Or debian-tor. Not sure. Ideally ssh would have a dedicated user and there would be something similar to VPN-Firewall (standalone or feature on gateway). I.e. SSH-Firewall. It would allow the ssh user to connect to any outside target but allow Tor only local connections (to the ssh proxy).</p>
<p>When the ssh proxy is running on the gateway and Tor connecting to it using Socks5Proxy, I do not see what the ssh -g parameter would be good for.</p>
<p>But right, when the ssh proxy is running on the host, -g could be required.</p>
<p>Please feel free to edit <a href="https://www.whonix.org/wiki/Using_Tunnels_with_Whonix#Connecting_to_SSH_before_Tor_.28User_-.3E_SSH_-.3E_Tor_-.3E_Internet.29">https://www.whonix.org/wiki/Using_Tunnels_with_Whonix#Connecting_to_SSH_before_Tor_.28User_-.3E_SSH_-.3E_Tor_-.3E_Internet.29</a>.</p>
          <p><a href="http://forums.whonix.org/t/tunnel-tor-through-ssh/1491/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tunnel-tor-through-ssh/1491/2</link>
        <pubDate>Fri, 09 Oct 2015 16:28:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1491-2</guid>
        <source url="http://forums.whonix.org/t/tunnel-tor-through-ssh/1491.rss">Tunnel Tor through SSH</source>
      </item>
      <item>
        <title>Tunnel Tor through SSH</title>
        <dc:creator><![CDATA[Silance]]></dc:creator>
        <description><![CDATA[
            <p>Hello Community!</p>
<p>Im new here and i wanna say first that Whonix is really awesome. A masterpiece!</p>
<p>But here is the reason why i opened this thread.<br>
I testet the possibility to route Tor through a SSH tunnel which is running on the Host system.<br>
Therefore i followed the manual on <a href="https://www.whonix.org/wiki/Tunnel_Tor_through_proxy_or_VPN_or_SSH#Tunnel_Tor_through_SSH" rel="nofollow noopener">https://www.whonix.org/wiki/Tunnel_Tor_through_proxy_or_VPN_or_SSH#Tunnel_Tor_through_SSH</a><br>
But it seems there are 2 little, but serious, mistakes in it.</p>
<p>I fixed it that way.<br>
Terminal on the host:</p>
<blockquote>ssh -D 1080 your.ssh.server</blockquote>
I changed that to
<blockquote>ssh -g -D 1080 your.ssh.server</blockquote>
-g Allows remote hosts to connect to local forwarded ports.
<p>Root terminal on the host:</p>
<blockquote>ifconfig -a</blockquote>
The eth0 network interface has an address like 192.168.1.10  
So i changed the instruction for the torrc file on the Gateway to
<blockquote>## In case SSH tunnel has been setup from Whonix-Gateway. Socks5Proxy [b]192.168.1.10 [/b]:1080 ## In case SSH tunnel has been setup on the host. #Socks5Proxy IP:PORT</blockquote>
Now it works!
<p>I tested it with success too.<br>
The webbrowser in the workstation worked fine till i closed the SSH tunnel on the host. The Tor browser wasnt working anymore, till to the moment i activated the SSH tunnel again.</p>
<p>Hope my feedback is welcome and correct.</p>
          <p><a href="http://forums.whonix.org/t/tunnel-tor-through-ssh/1491/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tunnel-tor-through-ssh/1491/1</link>
        <pubDate>Fri, 09 Oct 2015 14:51:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1491-1</guid>
        <source url="http://forums.whonix.org/t/tunnel-tor-through-ssh/1491.rss">Tunnel Tor through SSH</source>
      </item>
  </channel>
</rss>
