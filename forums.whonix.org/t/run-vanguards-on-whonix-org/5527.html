<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>run Vanguards on whonix.org - Website - Whonix Forum</title>
    <meta name="description" content="I think most things are within your ability based on recent successes! We‚Äôre loving your work. Here‚Äôs another possibility: 
How about implementing the Vanguards Control Port Add-On server side? Works with Tor 3.3 or 3.4&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="5527.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;run Vanguards on whonix.org&#39;" href="5527.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/run-vanguards-on-whonix-org/5527" />
<meta name="twitter:url" content="https://forums.whonix.org/t/run-vanguards-on-whonix-org/5527" />
<meta property="og:title" content="run Vanguards on whonix.org" />
<meta name="twitter:title" content="run Vanguards on whonix.org" />
<meta property="og:description" content="I think most things are within your ability based on recent successes! We‚Äôre loving your work. Here‚Äôs another possibility:  How about implementing the Vanguards Control Port Add-On server side? Works with Tor 3.3 or 3.4 series.  https://blog.torproject.org/announcing-vanguards-add-onion-services   A traffic analysis side channel can be used to confirm that the malicious node is in fact part of the rendezvous circuit, leading to the discovery of that onion service‚Äôs guard node. From that point, ..." />
<meta name="twitter:description" content="I think most things are within your ability based on recent successes! We‚Äôre loving your work. Here‚Äôs another possibility:  How about implementing the Vanguards Control Port Add-On server side? Works with Tor 3.3 or 3.4 series.  https://blog.torproject.org/announcing-vanguards-add-onion-services   A traffic analysis side channel can be used to confirm that the malicious node is in fact part of the rendezvous circuit, leading to the discovery of that onion service‚Äôs guard node. From that point, ..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="5 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="11 ‚ù§" />
<meta property="article:published_time" content="2018-07-22T00:53:49+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="5527.html">run Vanguards on whonix.org</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/website/6.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #0E76BD'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Website</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5527.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-07-22T00:53:49Z' class='post-time'>
                July 22, 2018, 12:53am
              </time>
              <meta itemprop='dateModified' content='2018-07-22T05:09:19Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="10" data-topic="5446">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/mig5/40/1647_1.png" class="avatar"><a href="../new-sysadmin-saying-hello/5446/10">New sysadmin saying hello</a>
</div>
<blockquote>
<p>If it‚Äôs within my ability to solve any issues relating to the infrastructure</p>
</blockquote>
</aside>
<p>I think most things are within your ability based on recent successes! We‚Äôre loving your work. Here‚Äôs another possibility:</p>
<p>How about implementing the Vanguards Control Port Add-On server side? Works with Tor 3.3 or 3.4 series.</p>
<p><a href="../../../external.html?link=https://blog.torproject.org/announcing-vanguards-add-onion-services">https://blog.torproject.org/announcing-vanguards-add-onion-services</a></p>
<blockquote>
<p>A traffic analysis side channel can be used to confirm that the malicious node is in fact part of the rendezvous circuit, leading to the discovery of that onion service‚Äôs guard node. From that point, the guard node can be compromised, coerced, or surveilled to determine the actual IP address of the onion service or client.</p>
<p><strong>The Vanguards Control Port Add-On</strong></p>
<p>Fixing the guard discovery problem in Tor itself is an immense project ‚Äì primarily because it involves many trade-offs between performance and scalability versus path security, which makes it very hard to pick good defaults for every onion service.</p>
<p>Because of this, we have created an add-on that can be used in conjunction with a Tor onion service server or a Tor client that accesses Tor onion services.</p>
<p>The add-on uses our Control Port Protocol and the corresponding Stem Library to defend against these attacks. The hope is that it will we will be able to study the performance and functionality of this feature and gather feedback before we deploy these changes in Tor for all onion services and clients.</p>
<p>[‚Ä¶]</p>
<p>This change to fixed nodes for the second and third layer guards is designed to force the adversary to have to run many more nodes, and to execute both an active sybil attack, as well as a node compromise attack. In particular, the addition of second layer guard nodes means that the adversary goes from being able to discover your guard in minutes by running just one middle node, to requiring them to sustain the attack for weeks or even months, even if they run 5% of the network.</p>
</blockquote>
<p>Mike Perry (the guru) notes re: bridges -&gt;</p>
<blockquote>
<p>Without the vanguards addon, these same attacks will work to find the bridge your onion service is using. So using a bridge by itself is not a defense. However, using a bridge with this addon will provide some additional benefit. Namely, if the bridge is not well-known, it can help obscure the fact that your onion service server is connecting to the Tor network, because the traffic from your onion service into the Tor network will be obfuscated. If meek still works, it is probably the best option, but I think meek no longer works well because the major cloud providers started blocking it ‚Äì <a href="../../../external.html?link=https://arstechnica.com/information-technology/2018/04/google-disables-‚Ä¶">https://arstechnica.com/information-technology/2018/04/google-disables-‚Ä¶</a> ‚Äì so obfs4 or basket may be the best choice. I would use two bridges.</p>
</blockquote>
<p>And how this prevents some attacks compared to the normal situation -&gt;</p>
<blockquote>
<p>No, unfortunately as soon as a malicious middle node is chosen next to your guard node on one of the (many) circuits that the adversary creates, a specially timed stream of data can be used to determine that it is in fact present in the circuit and next to your guard, regardless of the number of hops in your path. See the README for more details: <a href="../../../external.html?link=https://github.com/mikeperry-tor/vanguards/blob/master/README.md">https://github.com/mikeperry-tor/vanguards/blob/master/README.md</a></p>
</blockquote>
<p>No downside, all upside?</p>
        </div>

        <meta itemprop='headline' content='run Vanguards on whonix.org'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../new-sysadmin-saying-hello/5446/11.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../new-sysadmin-saying-hello/5446/11.html'>
                      <span itemprop='name'>New sysadmin saying hello</span>
                    </a>
                    <meta itemprop='position' content='5'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/mig5'><span itemprop='name'>mig5</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5527.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-07-22T05:11:07Z' class='post-time'>
                July 22, 2018,  5:11am
              </time>
              <meta itemprop='dateModified' content='2018-07-22T05:11:07Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-post="11" data-topic="5446">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"><a href="../new-sysadmin-saying-hello/5446/11.html">New sysadmin saying hello</a>
</div>
<blockquote>
<p>How about implementing the Vanguards Control Port Add-On server side? Works with Tor 3.3 or 3.4 series.</p>
<p><a href="../../../external.html?link=https://blog.torproject.org/announcing-vanguards-add-onion-services">https://blog.torproject.org/announcing-vanguards-add-onion-services</a></p>
</blockquote>
</aside>
<p>Ah yes, I was reading this yesterday. Vanguards previously came to my attention on OnionShare but hadn‚Äôt read that much into it yet. This article‚Äôs been the best overview of the feature I‚Äôve read yet.</p>
<aside class="quote no-group quote-modified" data-post="11" data-topic="5446">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"><a href="../new-sysadmin-saying-hello/5446/11.html">New sysadmin saying hello</a>
</div>
<blockquote>
<p>No downside, all upside?</p>
</blockquote>
</aside>
<p>Not quite no downside. Someone who wrote the first couple of comments does a pretty good job of identifying what the trade-off being made is - the element of risk is shifted somewhat but not eradicated (still a risk of ending up with a malicious node, but arguably less chance of it (?) and also the burden of effort for that malicious node to perform attacks is, I think, higher‚Ä¶)</p>
<p>I need to read up more on it, and I also need to understand if this is conflicts with <a href="../should-we-use-hiddenservicesinglehopmode-for-whonix-org-server/5424.html">Should we use HiddenServiceSingleHopMode for whonix.org server?</a>  - as per that thread, we care less about ‚Äòdeanonymizing the onion service‚Äô since the <a href="../../../external.html?link=http://whonix.org/">whonix.org</a> IP is already known - but we care about not deanonymizing the client, so maybe indeed we need to consider Vanguards for this, and therefore forget HiddenServiceSingleHopMode.</p>
<p>Anyway yes - definitely on my radar to understand and then decide whether to implement. Thanks!</p>
        </div>

        <meta itemprop='headline' content='run Vanguards on whonix.org'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/mig5'><span itemprop='name'>mig5</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5527.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-07-22T05:20:15Z' class='post-time'>
                July 22, 2018,  5:20am
              </time>
              <meta itemprop='dateModified' content='2018-07-22T05:20:15Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I think we probably also can‚Äôt use the BandGuards feature since our use case may involve long-lived or very large transfers of data (downloads, mirroring etc).</p>
<p>I‚Äôve asked about HiddenServiceSingleHopMode on the blog post.</p>
        </div>

        <meta itemprop='headline' content='run Vanguards on whonix.org'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/mig5'><span itemprop='name'>mig5</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5527.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-07-24T01:33:13Z' class='post-time'>
                July 24, 2018,  1:33am
              </time>
              <meta itemprop='dateModified' content='2018-07-24T01:33:13Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>asn replied on the article:</p>
<blockquote>
<p>Onion services with HiddenServiceSingleHopMode enabled do not use entry guards because they don‚Äôt benefit from them (since they are not anonymous), hence there is no point for guard discovery attack or deanonymization attacks there</p>
</blockquote>
<p>Although we are not using HiddenServiceSingleHopMode right now, the fact remains that the <a href="../../../external.html?link=http://whonix.org/">Whonix.org</a> onions are not really ‚Äòhidden‚Äô as they exist in clearnet too and the IP is known. The Whonix infra is in effect a public service and not trying to ‚Äòhide‚Äô, it instead is there to allow users to privately visit the infrastructure.</p>
<p>Accordingly, and noting the response, I‚Äôm not sure Vanguards are worthwhile for our use case.</p>
<p>Guard discovery/deanonymisation of the <em>server</em> side is not in our threat model (same reason we are/were considering the HiddenServiceSingleHop mode), and that‚Äôs what Vanguards, when employed server-side, protect.</p>
<p>But it may make sense for users to use Vanguards client-side.</p>
<p>That‚Äôs my understanding, but I might have it wrong, so welcome thoughts from others.</p>
        </div>

        <meta itemprop='headline' content='run Vanguards on whonix.org'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/mig5'><span itemprop='name'>mig5</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5527.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-07-24T01:41:24Z' class='post-time'>
                July 24, 2018,  1:41am
              </time>
              <meta itemprop='dateModified' content='2018-07-24T01:41:24Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>It is interesting to note that use of Vanguards probably is distinguishable on the network, same as HiddenServiceSingleHopMode:</p>
<blockquote>
<p>The second way your network fingerprint differs when you use this addon is that your guard nodes will see that your Tor client is only connecting to a restricted set of middle hops instead of the whole network (unless you also use that same Tor client to also connect to the external Internet). At this time, there are a lot of other traffic analysis vectors that can be used to fingerprint a hidden service if you control the guard node, though.</p>
</blockquote>
<p>This being the case, if we were to implement either option, and both are network distinguishable, and if guard discovery/de-anonymisation of the <em>server</em> side is not a problem we care about (it isn‚Äôt), I would choose HiddenServiceSingleHopMode for the performance enhancements.</p>
<p>Because even if the <em>client</em> side‚Äôs use of SingleHop mode is distinguishable, they are distinguishable anyway if they are using Vanguards (which they should, to improve <em>their</em> chance of avoiding de-anonymisation by these guard attacks), so ‚Äòdistinguishable‚Äô probably can‚Äôt be avoided when also seeking extra security.</p>
        </div>

        <meta itemprop='headline' content='run Vanguards on whonix.org'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5527.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-07-24T09:10:27Z' class='post-time'>
                July 24, 2018,  9:10am
              </time>
              <meta itemprop='dateModified' content='2018-07-24T09:10:27Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Interesting stuff mig5, thanks for looking into it.</p>
<p>Why not ask directly on either the blog post or tor-talk mailing list i.e.</p>
<blockquote>
<p>Hi, I‚Äôm currently administrating the Whonix server and v2/v3 onions, and we have been debating the possible benefits of using either:</p>
<p>a) Vanguards server-side; or<br>
b) HiddenServiceSingleHopMode</p>
<p>We understand that option A won‚Äôt be very helpful server-side, since the server is not really ‚Äúhidden‚Äù i.e. the IP is known and also exists in clearnet etc, although it might be useful client-side for Whonix users.</p>
<p>In relation to option B, we understand it would provide a performance and stability benefit, but have concerns over possible degradation of anonymity for site visitors:</p>
<ul>
<li>Clients may be statistically distinguishable e.g. malicious nodes identifying single hop user traffic and running exploits to unmask users.</li>
<li>Increased DDOS risk and threat of other attacks e.g. intersection attacks (?)</li>
<li>These are new features that haven‚Äôt matured.</li>
</ul>
<p>We would appreciate your informed opinion on whether you believe option a) or b) should be configured for a significant performance/security benefit, or whether the status quo is preferable for client anonymity.</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='run Vanguards on whonix.org'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5527.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-07-25T08:46:05Z' class='post-time'>
                July 25, 2018,  8:46am
              </time>
              <meta itemprop='dateModified' content='2018-07-25T08:46:05Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><strong>1. Re: Vanguards</strong></p>
<blockquote>
<p>mikeperry said</p>
<p>For onion services, the key thing that makes this worthwhile is that the adversary gets to force you to create as many circuits as they like, by continuously connecting to you. So if you are actually under attack, it is strictly better to use restricted second and third layer guards that rotate slower than your circuit creation.</p>
<p>For onion clients, it is a bit more fuzzy since it is harder to get them to build lots of circuits. But, if the adversary only controls a small percentage of the network, you‚Äôre still more likely to get lucky than be SOL right away, as you say.</p>
</blockquote>
<p><strong>2. Re: hidden services that really want to stay hidden</strong></p>
<p>(perhaps we warn Whonix users configuring hidden services in wiki instructions)</p>
<blockquote>
<p>mikeperry said</p>
<p>I‚Äôm a little on the yolo side myself but I still deal in science over here. To me, the tradeoffs are clear. If you do not use this addon, the adversary can find your guard in a hot minute (which is much shorter than a wall-clock minute ;), and can use a whole treasure chest of unfixed-in-core-tor attacks to confirm this, observe the guard, and then find your IP address. If you do use this addon, you are making use of the best ways we know of to slow down these attacks. Just a little bit before they go into core-tor.</p>
</blockquote>
<p>&amp; (multiple bridges + Vanguard to stymie deanonymization of hosted .onions is better)</p>
<blockquote>
<p>Without the vanguards addon, these same attacks will work to find the bridge your onion service is using. So using a bridge by itself is not a defense. However, using a bridge with this addon will provide some additional benefit. Namely, if the bridge is not well-known, it can help obscure the fact that your onion service server is connecting to the Tor network, because the traffic from your onion service into the Tor network will be obfuscated. If meek still works, it is probably the best option, but I think meek no longer works well because the major cloud providers started blocking it ‚Äì <a href="../../../external.html?link=https://arstechnica.com/information-technology/2018/04/google-disables-‚Ä¶">https://arstechnica.com/information-technology/2018/04/google-disables-‚Ä¶</a> ‚Äì so obfs4 or basket may be the best choice. I would use two bridges.</p>
</blockquote>
<p><strong>3. Why longer than 3 hops does SFA for anonymity</strong></p>
<p>(we should add to wiki FAQ, as this shit has come up a few times before):</p>
<blockquote>
<p>mikeperry said:</p>
<p>July 20, 2018</p>
<p>In reply to just use 4-hop onions as‚Ä¶ by Instead of def‚Ä¶ (not verified)<br>
Permalink</p>
<p>No, unfortunately as soon as a malicious middle node is chosen next to your guard node on one of the (many) circuits that the adversary creates, a specially timed stream of data can be used to determine that it is in fact present in the circuit and next to your guard, regardless of the number of hops in your path. See the README for more details: <a href="../../../external.html?link=https://github.com/mikeperry-tor/vanguards/blob/master/README.md">https://github.com/mikeperry-tor/vanguards/blob/master/README.md</a></p>
<p>And see <a href="../../../external.html?link=https://petsymposium.org/2018/files/papers/issue2/popets-2018-0011.pdf">https://petsymposium.org/2018/files/papers/issue2/popets-2018-0011.pdf</a> for the latest research paper on this type of attack.</p>
<p>This is why this addon restricts the number of nodes that can be in the second and third hop, and puts hard limits on the data that can be sent down a Tor circuit that is dropped by the client (and also optionally limits the total amount of data sent on a Tor circuit).</p>
</blockquote>
<p><strong>4. Network fingerprinting impact of Vanguards</strong></p>
<blockquote>
<p>mikeperry said:</p>
<p>July 23, 2018</p>
<p>In reply to Wouldn‚Äôt this be more‚Ä¶ by Anonymous (not verified)<br>
Permalink</p>
<p>There are two ways that this addon will alter your network fingerprint.</p>
<p>The first is observable by a local observer watching your connections into the Tor network. They would now see you‚Äôre using your two entry guards slightly differently than how stock Tor uses its two guards today. We‚Äôre working on making all existing stock Tor clients use two guards in a more balanced way (which is possible with a consensus parameter change), but it takes a lot of effort to convince the whole herd of cats that this should be done sooner rather than later. The hard part is that the counter argument against making all clients use two guards in a balanced way is ‚ÄúWhaaaaa?? I thought Tor was using ONE GUARD. WE SHOULD FIX THAT.‚Äù Except making stock Tor actually use one guard is even harder, and opens up more low-resource attacks, too.</p>
<p>While this fingerprinting vector could be eliminated by setting the vanguards configuration option num_layer1_guards to 1 instead of its current default of 2, it turns out that telling Tor to use only one guard as an onion service opens up a very noisy side channel + confirmation attack that can be detected by this same local observer (because it is possible for them to force a ‚Äúsingle entry guard‚Äù onion service to use a second guard at specific times).</p>
<p>The second way your network fingerprint differs when you use this addon is that your guard nodes will see that your Tor client is only connecting to a restricted set of middle hops instead of the whole network (unless you also use that same Tor client to also connect to the external Internet). At this time, there are a lot of other traffic analysis vectors that can be used to fingerprint a hidden service if you control the guard node, though.</p>
<p>In both cases, I personally feel that the benefit from protecting against guard discovery outweighs the additional fingerprinting risk from these two vectors. And in the long term, we can mitigate/obscure them, too.</p>
</blockquote>
<p><strong>Summary</strong></p>
<p>Seems Vanguards are useless server-side for Whonix (unless coming under sustained attack), could be useful client-side, &amp; is essential for those running ‚Äúhidden‚Äù servers and want to really stay hidden (for longer).</p>
<p>The onehopmode no doubt is good for performance, stability etc, so really only the anonymity risk issue for clients is unanswered.</p>
        </div>

        <meta itemprop='headline' content='run Vanguards on whonix.org'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/mig5'><span itemprop='name'>mig5</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5527.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-07-25T23:00:10Z' class='post-time'>
                July 25, 2018, 11:00pm
              </time>
              <meta itemprop='dateModified' content='2018-07-25T23:00:10Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>Seems Vanguards are useless server-side for Whonix (unless coming under sustained attack), could be useful client-side, &amp; is essential for those running ‚Äúhidden‚Äù servers and want to really stay hidden (for longer).</p>
</blockquote>
<p>That was the same conclusion I came to as well.</p>
<blockquote>
<p>The onehopmode no doubt is good for performance, stability etc, so really only the anonymity risk issue for clients is unanswered.</p>
</blockquote>
<p>And even if the use of a single-hop service is statistically distinguishable, so is the act of using Vanguards.</p>
<p>It seems to me the risk of the guard attacks that are mitigated by Vanguards, will likely matter more to clients than the fact that their traffic (note: still anonymized) might indicate they‚Äôre visiting ‚Äòa‚Äô single-hop service.</p>
<p>In other words there are bigger problems than a statistically distinguishable visit to a single-hop service vs a regular service. And the use of Vanguards to solve those problems, leaks statistically distinguishable activity anyway (the use of a static selection of l2, l3 middle hops). So if you can‚Äôt avoid being statistically distinguishable, may as well protect yourself against the bigger threat, and use Vanguards as a client. And therefore, we may as well use the SingleHop mode <em>if</em> we really think we would benefit from it performance-wise.</p>
<p>But I will ask around indeed just to see if this sentiment is shared‚Ä¶ I will also test running the SingleHop mode on our staging server, as I‚Äôm curious about the apparent performance benefits and if they‚Äôre even noticeable.</p>
<p>Even though I‚Äôm crossing topic a bit here, I also am not too worried about the DoS risk of SingleHop mode - again, since the public IP of <a href="../../../external.html?link=http://whonix.org/">whonix.org</a> is known, the DoS risk already exists on the clearnet.</p>
        </div>

        <meta itemprop='headline' content='run Vanguards on whonix.org'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/acis'><span itemprop='name'>acis</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5527.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-11T03:27:50Z' class='post-time'>
                June 11, 2019,  3:27am
              </time>
              <meta itemprop='dateModified' content='2019-06-11T03:27:50Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I read this thread but I am not sure about the final conclusion. I still have some doubts, is it a good idea to install Vanguards if you want to host a hidden server and protect against attacks? If so, do you only need to follow their official instructions to install it in the Whonix Gateway? Or do you need any additional configuration? Maybe I am just asking dump questions but I am trying to really understand it and at the beginning it takes some time‚Ä¶</p>
        </div>

        <meta itemprop='headline' content='run Vanguards on whonix.org'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5527.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-21T11:30:21Z' class='post-time'>
                June 21, 2019, 11:30am
              </time>
              <meta itemprop='dateModified' content='2019-06-21T11:30:21Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/mig5">@mig5</a> is your main person to get a reply from, since he knows what he is talking about. Hopefully he‚Äôll chime in.</p>
        </div>

        <meta itemprop='headline' content='run Vanguards on whonix.org'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
