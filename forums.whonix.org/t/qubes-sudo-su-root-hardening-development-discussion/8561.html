<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Qubes sudo / su / root Hardening - Development Discussion - Qubes-Whonix - Whonix Forum</title>
    <meta name="description" content="Too bad, that Qubes-Whonix users do not fully benefit much from the recent user/root/misc hardening by Whonix by default such as for example: 

https://forums.whonix.org/t/restrict-root-access/7658
https://forums.whonix.&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="8561.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Qubes sudo / su / root Hardening - Development Discussion&#39;" href="8561.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/qubes-sudo-su-root-hardening-development-discussion/8561" />
<meta name="twitter:url" content="https://forums.whonix.org/t/qubes-sudo-su-root-hardening-development-discussion/8561" />
<meta property="og:title" content="Qubes sudo / su / root Hardening - Development Discussion" />
<meta name="twitter:title" content="Qubes sudo / su / root Hardening - Development Discussion" />
<meta property="og:description" content="Too bad, that Qubes-Whonix users do not fully benefit much from the recent user/root/misc hardening by Whonix by default such as for example:   Restrict root access protect Linux user accounts against brute force attacks https://github.com/Whonix/security-misc Kernel Hardening Linux Kernel Runtime Guard (LKRG) https://www.whonix.org/wiki/Dev/Permissions And possibly also soon Untrusted Root - improve Security by Restricting Root. documented here:    Preventing malware from gaining root is vital ..." />
<meta name="twitter:description" content="Too bad, that Qubes-Whonix users do not fully benefit much from the recent user/root/misc hardening by Whonix by default such as for example:   Restrict root access protect Linux user accounts against brute force attacks https://github.com/Whonix/security-misc Kernel Hardening Linux Kernel Runtime Guard (LKRG) https://www.whonix.org/wiki/Dev/Permissions And possibly also soon Untrusted Root - improve Security by Restricting Root. documented here:    Preventing malware from gaining root is vital ..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="3 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="8 ❤" />
<meta property="article:published_time" content="2019-11-27T13:43:18+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="8561.html">Qubes sudo / su / root Hardening - Development Discussion</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/qubes-whonix/12.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #63a0ff'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Qubes-Whonix</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/component_security.html' class='discourse-tag' rel="tag">component_security</a>, 
            <a href='../../tag/status_open_issue_todo.html' class='discourse-tag' rel="tag">status_open_issue_todo</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-27T13:43:18Z' class='post-time'>
                November 27, 2019,  1:43pm
              </time>
              <meta itemprop='dateModified' content='2019-11-27T15:17:18Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Too bad, that Qubes-Whonix users do not fully benefit much from the recent user/root/misc hardening by Whonix by default such as for example:</p>
<ul>
<li><a href="../restrict-root-access/7658.html" class="inline-onebox">Restrict root access</a></li>
<li><a href="../protect-linux-user-accounts-against-brute-force-attacks/7698.html" class="inline-onebox">protect Linux user accounts against brute force attacks</a></li>
<li><a href="../../../external.html?link=https://github.com/Whonix/security-misc">https://github.com/Whonix/security-misc</a></li>
<li><a href="../kernel-hardening/7296.html" class="inline-onebox">Kernel Hardening</a></li>
<li><a href="../../../external.html?link=https://www.whonix.org/wiki/Linux_Kernel_Runtime_Guard_LKRG">Linux Kernel Runtime Guard (LKRG)</a></li>
<li><a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Permissions">https://www.whonix.org/wiki/Dev/Permissions</a></li>
<li>And possibly also soon <a href="../untrusted-root-improve-security-by-restricting-root/7998.html" class="inline-onebox">Untrusted Root - improve Security by Restricting Root</a>.</li>
<li>documented here:</li>
</ul>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Root" target="_blank" title="05:01PM - 10 September 2019">Whonix – 10 Sep 19</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:332/500;"><img src="../../../external.html?link=https://www.whonix.org/w/images/e/e2/Root123123.jpg" class="thumbnail"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Root" target="_blank">Root</a></h3>

<p>Tips on using sudo / root (privileged) commands safely</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Preventing malware from gaining root is vital to prevent malware from breaking out of a VM, spreading to dom0 or other VMs. Many attacks aren’t possible with root and/or kernel level compromise.<br>
(<a href="../untrusted-root-improve-security-by-restricting-root/7998.html">More meaningful separation of root and kernel is being worked on</a>.)</p>
<p>This is currently really bad in Qubes Debian templates. Any compromised user (not only user <code>user</code>) can use <code>su</code> without a password and gain root. (<a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/1128#issuecomment-511185971">bug reported here</a>)</p>
<p>Just learned that <code>qubes-template-debian-10-minimal</code> comes without passwordless root by default. This is documented here:<br>
<a href="../../../external.html?link=https://www.qubes-os.org/doc/templates/minimal/#passwordless-root">https://www.qubes-os.org/doc/templates/minimal/#passwordless-root</a><br>
Quote:</p>
<blockquote>
<p>It is an intentional design choice for <a href="../../../external.html?link=https://www.qubes-os.org/doc/vm-sudo/">Passwordless Root Access in VMs</a> to be optional in Minimal TemplateVMs. Since the Minimal TemplateVMs are <em>minimal</em> , they are not configured for passwordless root by default. To update or install packages, execute the following command in dom0 (where <code>X</code> is your distro and version number):</p>
<pre><code class="lang-auto">[user@dom0 ~]$ qvm-run -u root X-minimal xterm
</code></pre>
<p>This opens a root terminal in the Minimal TemplateVM, from which you can use execute root commands without <code>sudo</code> . You will have to do this every time if you choose not to enable passwordless root.</p>
<p>If you want to be able to use <code>sudo</code> inside a Minimal TemplateVM (or TemplateBasedVMs based on a Minimal TemplateVM), open a root terminal as just instructed, then install the <code>qubes-core-agent-passwordless-root</code> package.</p>
<p>Optionally, verify that passwordless root now works by opening a normal (non-root) xterm window in the Minimal TemplateVM, then issue the command <code>sudo -l</code> . This should give you output that includes the <code>NOPASSWD</code> keyword.</p>
</blockquote>
<p>In Qubes Debian minimal templates user <code>user</code> is also by default not a member of group <code>sudo</code>.</p>
<p>This is an excellent basis for Qubes-Whonix.<br>
(Which is already based on Qubes Debian minimal templates.)</p>
<p>Qubes-Whonix package <code>qubes-whonix-shared-packages-recommended</code> currently <code>Depends:</code> on <code>qubes-core-agent-passwordless-root</code>. This dependency could be dropped.</p>
<p>The question is, how users could easily gain root then. In dom0 command line:</p>
<blockquote>
<p>qvm-run -u root X-minimal xterm</p>
</blockquote>
<p>Or</p>
<blockquote>
<p>qvm-run -u root X-minimal xfce4-terminal</p>
</blockquote>
<p>Usability issue. Which may be fixable. More on that below.</p>
<p>Security issue? Better than the default we have now. However, I am not sure if that is non-ideal security wise. Running a GUI application as root? Maybe a better default would be if a user <code>admin</code> would be a member of group <code>sudo</code> by default? Then open a terminal as user <code>admin</code> and allow <code>admin</code> to use <code>sudo</code> without a password?</p>
<p>Usability. Somehow add a Qubes start menu entry. Not sure that is yet supported by Qubes to run something as a different user from Qubes start menu.</p>
<p>Example:</p>
<p>dom0</p>
<pre><code>cat .local/share/qubes-appmenus/debian-10/apps.templates/xfce4-terminal.desktop
</code></pre>
<blockquote>
<p>[Desktop Entry]<br>
…<br>
Exec=qvm-run -q -a --service – %VMNAME% qubes.StartApp+xfce4-terminal</p>
</blockquote>
<p>We’d have to use <code>qvm-run -u admin</code>. That may require Qubes dom0 enhancements.</p>
<p>If these aren’t coming / too late, maybe we could work around that limitation somehow. Perhaps an /etc/sudoers.d exception. Maybe a dom0 yes/no prompt using qrexec.</p>
        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>
          <meta itemprop='keywords' content='component_security, status_open_issue_todo'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../qubes-whonix-security-disadvantages-help-wanted/8581.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../qubes-whonix-security-disadvantages-help-wanted/8581.html'>
                      <span itemprop='name'>Qubes-Whonix Security Disadvantages - Help Wanted!</span>
                    </a>
                    <meta itemprop='position' content='12'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-27T14:54:34Z' class='post-time'>
                November 27, 2019,  2:54pm
              </time>
              <meta itemprop='dateModified' content='2019-11-27T14:54:34Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Why not make sudo require a password and allow it to be used in VMs just like in non-Qubes-Whonix?</p>
<p>Then a user can do</p>
<pre><code>qvm-run X-minimal xfce4-terminal
sudo command</code></pre>
        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-27T15:11:08Z' class='post-time'>
                November 27, 2019,  3:11pm
              </time>
              <meta itemprop='dateModified' content='2019-11-27T15:11:08Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>That might work.</p>
<p>But maybe in Qubes we can do better than that. Thanks to dom0 / qrexec we could have a safer implementation.</p>
<p>This is related to the ideas of a safer implementation in Non-Qubes-Whonix, possible using multiple boot modes in grub boot menu:</p>
<aside class="quote quote-modified" data-post="1" data-topic="7708">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="../multiple-boot-modes-for-better-security-persistent-user-live-user-persistent-secureadmin-persistent-superadmin-persistent-recovery-mode/7708.html">multiple boot modes for better security: persistent + root | persistent + noroot | live + root | live + noroot</a> <a class="badge-wrapper  bullet" href="../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Related: 

<a href="../restrict-root-access/7658/15.html" class="inline-onebox">Restrict root access</a>
<a href="../suid-disabler-and-permission-hardener/7706/5.html" class="inline-onebox">Disable SUID Binaries</a>
<a href="../re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.html" class="inline-onebox">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</a>
<a href="../walled-garden-firewall-whitelisting-application-whitelisting-sudo-lockdown-superuser-mode-protected-mode/5725.html" class="inline-onebox">walled garden, firewall whitelisting, application whitelisting, sudo lockdown, superuser mode, protected mode</a>


What about more boot modes: 

persistent + root
persistent + noroot
live + root
live + noroot

Not all might make sense. 
Think of noroot has “hardening” where we can do stuff like noexec, nosuid, no root/sudo possible at al…
  </blockquote>
</aside>

<p>In Qubes we may or may not have access to different boot modes using Qubes start menu.</p>
        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-07-21T17:37:40Z' class='post-time'>
                July 21, 2020,  5:37pm
              </time>
              <meta itemprop='dateModified' content='2020-07-21T17:37:40Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>It is now possible to remove package <code>qubes-core-agent-passwordless-root</code> in Qubes-Whonix by first installing package <code>dummy-dependency</code>.</p>
<pre><code>sudo apt update
sudo apt install dummy-dependency
sudo apt purge qubes-core-agent-passwordless-root
</code></pre>
<p>In testers repository. Will flow into other repositories as per usual.</p>
<p>But I didn’t test any further than this.</p>
<ul>
<li><a href="../../../external.html?link=https://gitlab.com/whonix/qubes-whonix/-/commit/fd8bc8213ef6a4bf1ce5b03a13d5f30afc80175c">https://gitlab.com/whonix/qubes-whonix/-/commit/fd8bc8213ef6a4bf1ce5b03a13d5f30afc80175c</a></li>
<li><a href="../../../external.html?link=https://gitlab.com/whonix/anon-meta-packages/-/commit/57072ac0b9f973ccf4ec2e5827ce2037819832c1">https://gitlab.com/whonix/anon-meta-packages/-/commit/57072ac0b9f973ccf4ec2e5827ce2037819832c1</a></li>
</ul>
        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../how-to-remove-qubes-core-agent-passwordless-root-safely-in-qubes-whonix-template/10897/2.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../how-to-remove-qubes-core-agent-passwordless-root-safely-in-qubes-whonix-template/10897/2.html'>
                      <span itemprop='name'>How to remove qubes-core-agent-passwordless-root safely in qubes whonix template</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/do23bf7m'><span itemprop='name'>do23bf7m</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-08-07T02:13:45Z' class='post-time'>
                August 7, 2020,  2:13am
              </time>
              <meta itemprop='dateModified' content='2020-08-07T02:13:45Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Sounds good. To put it clearly: After using the dummy dependency fix Qubes-Whonix users benefit from all Whonix root hardening inside Whonix Workstation and Whonix Gateway?<br>
What about hardware identifier hardening? =&gt; <a href="../../../external.html?link=https://whonix.org/wiki/Whonix-Workstation_Security_Hardening#Restrict_Hardware_Information_to_Root" rel="nofollow noopener">https://whonix.org/wiki/Whonix-Workstation_Security_Hardening#Restrict_Hardware_Information_to_Root</a><br>
Is it also root depended and will it benefit?<br>
Will this benefit all Debian/Fedora templates in the future?<br>
The minimal template fix is also working well to restrict root access (despite usability)?</p>
        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-08-07T08:14:22Z' class='post-time'>
                August 7, 2020,  8:14am
              </time>
              <meta itemprop='dateModified' content='2020-08-07T08:14:22Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="do23bf7m" data-post="5" data-topic="8561">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/d/4491bb/40.png" class="avatar"> do23bf7m:</div>
<blockquote>
<p>To put it clearly: After using the dummy dependency fix Qubes-Whonix users benefit from all Whonix root hardening inside Whonix Workstation and Whonix Gateway?</p>
</blockquote>
</aside>
<p>No. It’s only 1 step. As said in above post:</p>
<aside class="quote no-group" data-username="Patrick" data-post="4" data-topic="8561">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>But I didn’t test any further than this.</p>
</blockquote>
</aside>
<aside class="quote no-group" data-username="do23bf7m" data-post="5" data-topic="8561">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/d/4491bb/40.png" class="avatar"> do23bf7m:</div>
<blockquote>
<p>What about hardware identifier hardening? =&gt; <a href="../../../external.html?link=https://whonix.org/wiki/Whonix-Workstation_Security_Hardening#Restrict_Hardware_Information_to_Root">https://whonix.org/wiki/Whonix-Workstation_Security_Hardening#Restrict_Hardware_Information_to_Root</a></p>
</blockquote>
</aside>
<p>Unrelated.<br>
Just that it doesn’t help much when sudo is still available.</p>
<aside class="quote no-group" data-username="do23bf7m" data-post="5" data-topic="8561">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/d/4491bb/40.png" class="avatar"> do23bf7m:</div>
<blockquote>
<p>Will this benefit all Debian/Fedora templates in the future?</p>
</blockquote>
</aside>
<p>Restrict Hardware Information to Root? It doesn’t seem that way at the moment. Unless someone creates a Kicksecure template for Qubes.</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Kicksecure" target="_blank" title="12:33PM - 12 July 2020">Whonix – 12 Jul 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:120/80;"><img src="../../../external.html?link=https://www.whonix.org/w/images/5/52/Hardening-13423213.jpg" class="thumbnail" width="120" height="80"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Kicksecure" target="_blank">Kicksecure ™: A Security-hardened, Non-anonymous Linux Distribution</a></h3>

<p>Kicksecure ™ is a security-hardened Debian based Linux distribution that provides better protection from malware.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Fost'><span itemprop='name'>Fost</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-08-07T11:24:24Z' class='post-time'>
                August 7, 2020, 11:24am
              </time>
              <meta itemprop='dateModified' content='2020-08-07T11:24:24Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hate to chime in…</p>
<p>But I read the description in the link and it mentions to clone whonix ws or gw and to add some additional code to harden the root.</p>
<p>Would these suggestions prevent hardware leaks such as MAC address, Manufacturer, etc until kick secure covers those issues?</p>
<p>thanks,</p>
        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/TNT_BOM_BOM'><span itemprop='name'>TNT_BOM_BOM</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-28T20:16:59Z' class='post-time'>
                September 28, 2020,  8:16pm
              </time>
              <meta itemprop='dateModified' content='2020-09-28T20:16:59Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Qubes had pushed fixation to the package qubes-core-agent-passwordless-root that if user want to remove it he can be removed safely without any other packages. Doing this in whonix gonna give this error message on every boot:</p>
<pre><code>msgdispatcher script bug. 

No panic. Nothing is broken. Just some rare condition has been hit. 
Try again later. There is likely a solution for this problem. 
Please see Whonix News, Whonix Blog and Whonix User Help Forum. 
Please report this bug! 

who_ami: 'user' 
msgdisptacher_username: 'whonixcheck' 
msgdispatcher_identifier: 'whonixcheck' 
msgdispatcher_appendix: 'messagex_done' 
delete_wrapper: '/usr/lib/msgcollector/msgdispatcher_delete_wrapper' 
msgdispatcher_sudo_wrapper_command: 'sudo --non-interactive msgdisptacher_username=whonixcheck msgdispatcher_identifier=whonixcheck msgdispatcher_appendix=messagex_done /usr/lib/msgcollector/msgdispatcher_delete_wrapper' 
output_msgdispatcher_sudo_wrapper: 'sudo: a password is required' 

error_text: 'output_msgdispatcher_sudo_wrapper="$(sudo --non-interactive msgdisptacher_username="$msgdisptacher_username" msgdispatcher_identifier="$msgdispatcher_identifier" msgdispatcher_appendix="$msgdispatcher_appendix" "$delete_wrapper" 2&gt;&amp;1)"' 
last_exit_code: '1' 
</code></pre>
<p>I think the issue which need to be fixed with this line:</p>
<p><code>output_msgdispatcher_sudo_wrapper: 'sudo: a password is required'</code></p>
        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-29T10:34:49Z' class='post-time'>
                September 29, 2020, 10:34am
              </time>
              <meta itemprop='dateModified' content='2020-09-29T10:34:49Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://gitlab.com/assets/favicon-7901bd695fb93edb07975966062049829afb56cf11511236e61bcf425070e36e.png" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://gitlab.com/whonix/msgcollector/-/commit/88977926d17298eaea08868cbbf1228bc0c0a5d9" target="_blank">GitLab</a>
  </header>
  <article class="onebox-body">
    <img src="../../../external.html?link=https://assets.gitlab-static.net/assets/gitlab_logo-7ae504fe4f68fdebb3c2034e36621930cd36ea87924c11ff65dbcb8ed50dca58.png" class="thumbnail onebox-avatar" width="128" height="128">

<h3><a href="../../../external.html?link=https://gitlab.com/whonix/msgcollector/-/commit/88977926d17298eaea08868cbbf1228bc0c0a5d9" target="_blank">fix msgcollector sudoers issue when qubes-core-agent-passwordless-root...</a></h3>

<p>Thanks to @TNT_BOOM_BOOM for the bug report! https://forums.whonix.org/t/hardening-qubes-vms-by-removing-passwordless-root-will-give-boot-error-message/10350</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-29T10:38:08Z' class='post-time'>
                September 29, 2020, 10:38am
              </time>
              <meta itemprop='dateModified' content='2020-09-29T10:38:08Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>To emulate that change before it reaches package upgrades, I recommend running <code>visudo -f /etc/sudoers.d/msgcollector</code> as root to make the changes as invalid changes (syntax errors) in sudoers configuration files result in broken sudo.</p>
<pre><code>sudo visudo -f /etc/sudoers.d/msgcollector</code></pre>
        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/TNT_BOM_BOM'><span itemprop='name'>TNT_BOM_BOM</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-29T18:47:23Z' class='post-time'>
                September 29, 2020,  6:47pm
              </time>
              <meta itemprop='dateModified' content='2020-09-29T18:47:23Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>great thanks alot, now working normally.</p>
<p>Patrick via Whonix Forum:</p>
        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/ratpoison4'><span itemprop='name'>ratpoison4</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-28T20:00:37Z' class='post-time'>
                October 28, 2020,  8:00pm
              </time>
              <meta itemprop='dateModified' content='2020-10-28T20:00:37Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I tried this and it does not work for me. I am still getting the message.</p>
        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/TNT_BOM_BOM'><span itemprop='name'>TNT_BOM_BOM</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-31T19:59:03Z' class='post-time'>
                October 31, 2020,  7:59pm
              </time>
              <meta itemprop='dateModified' content='2020-10-31T19:59:03Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>what you have done specifically?, Qubes version (do you upgrade it regularly?) , Whonix version (do you upgrade it regularly?)</p>
        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/ratpoison4'><span itemprop='name'>ratpoison4</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-31T20:12:39Z' class='post-time'>
                October 31, 2020,  8:12pm
              </time>
              <meta itemprop='dateModified' content='2020-10-31T20:12:39Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I added the following to /etc/sudoers.d/msgcollector in whonix-ws-15:</p>
<pre><code>%user ALL=NOPASSWD: /usr/lib/msgcollector/msgdispatcher_delete_wrapper
user ALL=NOPASSWD: /usr/lib/msgcollector/msgdispatcher_delete_wrapper
</code></pre>
<p>I update it regularly.</p>
<p>Before that (long time ago) I followed qubes-os org/doc/vm-sudo/<span class="hashtag">#replacing-passwordless-root-access-with-dom0-user-prompt</span> (replace space with “.”, section “Configuring Debian/Whonix TemplateVM to prompt Dom0 for any authorization request”) and started getting the error. I didn’t realize the error was caused by removing passwordless sudo until recently read what it says in the middle more carefully. Then found this thread.</p>
<p>Qubes version: 4.0 (updated regularly)<br>
Whonix version: 15 (updated regularly)</p>
        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/TNT_BOM_BOM'><span itemprop='name'>TNT_BOM_BOM</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-31T21:14:29Z' class='post-time'>
                October 31, 2020,  9:14pm
              </time>
              <meta itemprop='dateModified' content='2020-10-31T21:14:29Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>you need to reverse the long time ago changes and just stick to the<br>
simple solution now provided by removing the passwordless package,<br>
otherwise im not sure anything would solve that except if you for e.g<br>
enable tester repository of whonix and try to update/upgrade and see if<br>
it solve anything or remove/reinstall whonix template and if that didnt<br>
work then backup and reinstall qubes again.</p>
<p>ratpoison4 via Whonix Forum:</p>
        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-11-01T12:43:57Z' class='post-time'>
                November 1, 2020, 12:43pm
              </time>
              <meta itemprop='dateModified' content='2020-11-01T12:43:57Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Factory_Reset" target="_blank" title="11:11PM - 09 October 2020">Whonix – 9 Oct 20</a>
  </header>
  <article class="onebox-body">
    <img src="../../../external.html?link=https://www.whonix.org/w/images/c/c4/Factoryreset13124512.png" class="thumbnail onebox-avatar" width="500" height="500">

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Factory_Reset" target="_blank">Whonix ™ Factory Reset</a></h3>

<p>Resetting Whonix ™ to Vendor Defaults. Reset configuration files to defaults, re-install meta package, move the system closer to vendor defaults.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/ratpoison4'><span itemprop='name'>ratpoison4</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8561.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-11-01T21:49:13Z' class='post-time'>
                November 1, 2020,  9:49pm
              </time>
              <meta itemprop='dateModified' content='2020-11-01T21:49:13Z'>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>you need to reverse the long time ago changes and just stick to the<br>
simple solution now provided by removing the passwordless package</p>
</blockquote>
<p>It worked. Thanks!</p>
        </div>

        <meta itemprop='headline' content='Qubes sudo / su / root Hardening - Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
