<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>ProxyVM + AppVM Development - Qubes-Whonix - Whonix Forum</title>
    <meta name="description" content="I don&amp;#39;t know how far you have gotten in getting Whonix working as an appvm but I thought I would share my code to build it as a appvm / proxyvm if you were interested. 

I couldn&amp;#39;t figure out how to get the HVM to go ful&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="512af4d.html?page=5" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;ProxyVM + AppVM Development&#39;" href="512.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/proxyvm-appvm-development/512?page=5" />
<meta name="twitter:url" content="https://forums.whonix.org/t/proxyvm-appvm-development/512?page=5" />
<meta property="og:title" content="ProxyVM + AppVM Development" />
<meta name="twitter:title" content="ProxyVM + AppVM Development" />
<meta property="og:description" content="Awesome! Great to have you monitor this thread, Marek!" />
<meta name="twitter:description" content="Awesome! Great to have you monitor this thread, Marek!" />
<meta property="article:published_time" content="2014-10-27T15:12:47+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="512fdb0.html?page=4">
        <link rel="next" href="512c575.html?page=6">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="512.html">ProxyVM + AppVM Development</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/qubes-whonix/12.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #63a0ff'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Qubes-Whonix</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-27T15:12:47Z' class='post-time'>
                October 27, 2014,  3:12pm
              </time>
              <meta itemprop='dateModified' content='2014-10-27T15:12:47Z'>
          <span itemprop='position'>#81</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Awesome! Great to have you monitor this thread, Marek!</p>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-27T18:38:26Z' class='post-time'>
                October 27, 2014,  6:38pm
              </time>
              <meta itemprop='dateModified' content='2014-10-27T18:38:26Z'>
          <span itemprop='position'>#82</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="81" data-topic="512">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Awesome! Great to have you monitor this thread, Marek!</p>
</blockquote>
</aside>
<p>I was about to let you know I mentioned the issue to Marek but I guess he got to it first <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Now since I have everything working I can re-address the IP address issue.  Since there are not many files to have to search and replace with an IP address and that IP address will not (most likely) change once it is set I am satisfied by using this procedure.  I am able to do the search and replace before the network comes up and is quick.</p>
<p>In order for this to be reliable, I will also need to re-activate the search after an update as you previously mentioned.  What file should my script be called from (I call ‘/usr/lib/whonix/setup-ip’ which setups up eth1 if needed, makes sure hosts hostname and resolv.conf are set properly, calls replace-ips in same directory, then restarts tor if ip changed and then reloads whonix_firewall).</p>
<p>I propose as part of the Whonix build process that a new package gets generated that would list the file names that need to be searched and replaced and that file be part of a package which would then end up on the users computer when they do an update.  That way if any new module needs to be parsed, my script will know about it since it would take forever to scan the entire contents of the drive and could change unrelated files.  This file could look like this (can be same file for both gateway / ws since if file does not exist it does not get replaced)</p>
<pre><code class="lang-auto">/usr/lib/leaktest-workstation/simple_ping.py
/usr/lib/whonixcheck/preparation
/usr/share/anon-kde-streamiso/share/config/kioslaverc
/usr/bin/whonix_firewall
/etc/whonix_firewall.d/30_default
/usr/lib/anon-shared-helper-scripts/tor_bootstrap_check.bsh
/usr/bin/uwt
/etc/uwt.d/30_uwt_default
/usr/share/tor/tor-service-defaults-torrc.anondist
/usr/bin/update-torbrowser
/etc/network/interfaces.whonix
/etc/resolv.conf.anondist
/etc/sdwdate.d/31_anon_dist_stream_isolation_plugin
/etc/rinetd.conf.anondist
/etc/network/interfaces.whonix
/usr/share/anon-torchat/.torchat/torchat.ini</code></pre>
<p>I also suggest in the same package we keep a list of ip address that may need to be searched for in case they ever change mapped to an interface.  The interface name does not have to be eth0 / eth1 since that is not descriptive enough for me to parse if things change, so maybe follow your firewall interface names of INT_IF INT_TIF, etc</p>
<pre><code class="lang-auto">GW_INT_IF:192.168.1.10
GW_INT_IF:10.152.152.10
WS_INT_IF:192.168.1.11
WS_INT_IF:10.152.152.11</code></pre>
<p>Any comments or suggestions on this proposed format?</p>
<p>Also, I was wondering if you would have any advice of using Travis CI.  I think it would be a good idea to set something like that up.  With you code on github, did you need to set up your own private version of Travis or are you able to use a public server?  I have never used CI before so any helpful starting point would be appreciated.  I have a Ubuntu server I can run it on locally if needed.</p>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../continuous-integration-ci-travis-ci/627.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../continuous-integration-ci-travis-ci/627.html'>
                      <span itemprop='name'>Continuous Integration (CI) / Travis CI</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-27T20:03:11Z' class='post-time'>
                October 27, 2014,  8:03pm
              </time>
              <meta itemprop='dateModified' content='2014-10-27T20:03:11Z'>
          <span itemprop='position'>#83</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“Patrick, post:79, topic:512”]Repo:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">
      <a href="../../../external.html?link=https://github.com/Whonix/whonix-repository" target="_blank" rel="nofollow noopener">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="../../../external.html?link=https://avatars3.githubusercontent.com/u/4500165?s=400&amp;v=4" class="thumbnail onebox-avatar" width="400" height="400">

<h3><a href="../../../external.html?link=https://github.com/Whonix/whonix-repository" target="_blank" rel="nofollow noopener">Whonix/whonix-repository</a></h3>

<p>Whonix APT Repository Tool -  Can be used to enable either Whonix's stable, testers or  developers repository or to disable Whonix's repository. - For better usability and security. - Whoni...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>Startup sequence:<br>
/usr/share/applications/whonix_repository.desktop -&gt; /usr/lib/whonix-repository -&gt; /usr/bin/whonix_repository</p>
<p>[hr]</p>
<p>Repo:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">
      <a href="../../../external.html?link=https://github.com/Whonix/whonixsetup/tree/master/usr/lib" target="_blank" rel="nofollow noopener">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="../../../external.html?link=https://avatars3.githubusercontent.com/u/4500165?s=400&amp;v=4" class="thumbnail onebox-avatar" width="400" height="400">

<h3><a href="../../../external.html?link=https://github.com/Whonix/whonixsetup/tree/master/usr/lib" target="_blank" rel="nofollow noopener">Whonix/whonixsetup</a></h3>

<p>First Time Connection Setup - for better usability, anonymity and privacy. When Whonix starts for the first time, it won't automatically connect to the public Tor network. This is useful for us...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>Startup sequence:<br>
/usr/share/applications/gateway-firsttimesetup.desktop -&gt; /usr/lib/<em>whonixsetup</em> -&gt; /usr/bin/whonixsetup</p>
<p>[hr]</p>
<p>We can work around it in Whonix, but I think it should be reported against Qubes as well.</p>
<p>For the report against Qubes, a small test script<br>
/usr/share/applications/teststdin.desktop -&gt; /usr/bin/teststdin<br>
that reads from stdin (which will fail as I expect) or uses <code>dialog</code> (which I am more surely expect to fail).[/quote]</p>
<p>As a stop-gap measure I just linked dialog to gdialog and that seems to be able to display the dialogs nicely.  kdialog gave me empty box when running from shell (lots of Error: BadDrawable messages).  Maybe it would be nice to have that set as an environment variable?</p>
<p><a href="../../../external.html?link=https://stackoverflow.com/questions/8354482/dialog-from-bash-script" data-bbcode="true" rel="nofollow noopener">https://stackoverflow.com/questions/8354482/dialog-from-bash-script</a></p>
<pre><code class="lang-auto">DIALOG=${DIALOG=dialog}

$DIALOG --title " My first dialog" --clear \
        --yesno "Hello , this is my first dialog program" 10 30</code></pre>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-27T22:36:39Z' class='post-time'>
                October 27, 2014, 10:36pm
              </time>
              <meta itemprop='dateModified' content='2014-10-27T22:36:39Z'>
          <span itemprop='position'>#84</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="82" data-topic="512">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>Also, I was wondering if you would have any advice of using Travis CI.  I think it would be a good idea to set something like that up.  With you code on github, did you need to set up your own private version of Travis or are you able to use a public server?  I have never used CI before so any helpful starting point would be appreciated.  I have a Ubuntu server I can run it on locally if needed.</p>
</blockquote>
</aside>
<p>Answered in separate topic:<br>
<a href="../../../external.html?link=https://www.whonix.org/forum/index.php/topic,667.0.html" class="onebox" target="_blank">https://www.whonix.org/forum/index.php/topic,667.0.html</a></p>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-27T23:35:11Z' class='post-time'>
                October 27, 2014, 11:35pm
              </time>
              <meta itemprop='dateModified' content='2014-10-27T23:35:11Z'>
          <span itemprop='position'>#85</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“nrgaway, post:83, topic:512”][quote author=Patrick link=topic=537.msg4991#msg4991 date=1414378109]<br>
Repo:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">
      <a href="../../../external.html?link=https://github.com/Whonix/whonix-repository" target="_blank">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="../../../external.html?link=https://avatars3.githubusercontent.com/u/4500165?s=400&amp;v=4" class="thumbnail onebox-avatar" width="400" height="400">

<h3><a href="../../../external.html?link=https://github.com/Whonix/whonix-repository" target="_blank">Whonix/whonix-repository</a></h3>

<p>Whonix APT Repository Tool -  Can be used to enable either Whonix's stable, testers or  developers repository or to disable Whonix's repository. - For better usability and security. - Whoni...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>Startup sequence:<br>
/usr/share/applications/whonix_repository.desktop -&gt; /usr/lib/whonix-repository -&gt; /usr/bin/whonix_repository</p>
<p>[hr]</p>
<p>Repo:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">
      <a href="../../../external.html?link=https://github.com/Whonix/whonixsetup/tree/master/usr/lib" target="_blank">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="../../../external.html?link=https://avatars3.githubusercontent.com/u/4500165?s=400&amp;v=4" class="thumbnail onebox-avatar" width="400" height="400">

<h3><a href="../../../external.html?link=https://github.com/Whonix/whonixsetup/tree/master/usr/lib" target="_blank">Whonix/whonixsetup</a></h3>

<p>First Time Connection Setup - for better usability, anonymity and privacy. When Whonix starts for the first time, it won't automatically connect to the public Tor network. This is useful for us...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>Startup sequence:<br>
/usr/share/applications/gateway-firsttimesetup.desktop -&gt; /usr/lib/<em>whonixsetup</em> -&gt; /usr/bin/whonixsetup</p>
<p>[hr]</p>
<p>We can work around it in Whonix, but I think it should be reported against Qubes as well.</p>
<p>For the report against Qubes, a small test script<br>
/usr/share/applications/teststdin.desktop -&gt; /usr/bin/teststdin<br>
that reads from stdin (which will fail as I expect) or uses <code>dialog</code> (which I am more surely expect to fail).<br>
[/quote]</p>
<p>As a stop-gap measure I just linked dialog to gdialog and that seems to be able to display the dialogs nicely.  kdialog gave me empty box when running from shell (lots of Error: BadDrawable messages).  Maybe it would be nice to have that set as an environment variable?</p>
<p><a href="../../../external.html?link=https://stackoverflow.com/questions/8354482/dialog-from-bash-script" data-bbcode="true">https://stackoverflow.com/questions/8354482/dialog-from-bash-script</a></p>
<p>[code]<br>
DIALOG=${DIALOG=dialog}</p>
<p>$DIALOG --title " My first dialog" --clear <br>
–yesno “Hello , this is my first dialog program” 10 30<br>
[/code][/quote]<br>
I like that idea independently from the Qubes issue!</p>
<p>Using “$DIALOG” instead of “dialog” seems like a good idea. Then we can add at the beginning of the script some logic on which to prefer.</p>
<p>Perhaps depending on which is installed? Or just depend on it and assume it’s installed?</p>
<p>Somehow auto detect X and prefer “gdialog” then? Otherwise fall back to “dialog”?</p>
<p>And let an environment variable overrule the auto detection code?</p>
<p>There is an confusing amount of “dialog” replacements. Some graphical. More or less compatible?<br>
<a href="../../../external.html?link=http://web.mit.edu/outland/share/doc/Xdialog-2.1.2/compatibility.html" class="onebox" target="_blank">http://web.mit.edu/outland/share/doc/Xdialog-2.1.2/compatibility.html</a></p>
<p>Which ones are available from Debian?</p>
<p>You’ll probably want to turn “/sbin/poweroff” to “echo /sbin/poweroff” while development.  <img src="../../images/emoji/twitter/winkc164.png?v=9" title=":wink:" class="emoji" alt=":wink:"></p>
<p>We’d have to run “kdesudo whonixsetup” (because “sudo” won’t work when X is involved). But we likely find a solution for that.</p>
<p>whonixsetup’s disclaimer is too big. The buttons are outside the visible area. I wanted to split them into more screens some day anyway (to make them work in the less-lines-by-default gnome-default-terminal).</p>
<p>Would you like to push a branch, patch or commit?</p>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-28T00:53:34Z' class='post-time'>
                October 28, 2014, 12:53am
              </time>
              <meta itemprop='dateModified' content='2014-10-28T00:53:34Z'>
          <span itemprop='position'>#86</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Sounds good overall!</p>
<p>[hr]</p>
<p>Hooks for your changer script [needs good name] required:</p>
<ul>
<li>before network comes up</li>
<li>after package install (Easy, I already did something similar, can help with this. For comparsion: <a href="../../../external.html?link=https://github.com/Whonix/rads/blob/master/etc/apt/apt.conf.d/90rads">https://github.com/Whonix/rads/blob/master/etc/apt/apt.conf.d/90rads</a>)</li>
<li>you name it</li>
</ul>
<p>[hr]</p>
<p>I might have said this before. Dunno. We can rely on the output of “sudo virt-what” and then “do-some-stuff if Qubes detected, otherwise exit 0”.</p>
<p>(There is some example “sudo virt-what” code here:<br>
<a href="../../../external.html?link=https://github.com/Whonix/whonixcheck/blob/master/usr/lib/whonixcheck/check_virtualizer" class="onebox" target="_blank">https://github.com/Whonix/whonixcheck/blob/master/usr/lib/whonixcheck/check_virtualizer</a><br>
But nevermind. It’s really simpler than that. Just running “sudo virt-what” and checking the output against a fixed string. Voila, we know we’re running inside Qubes.)</p>
<p>That way we might be able to avoid a separate whonix-qubes-network-conf or even whonix-qubes-(gw|ws)-network-conf package.</p>
<p>[hr]</p>
<p>If we were going for “perfect performance”, we should create a whonix-gw-ip-files.list as well as a separate whonix-ws-ip-files.list file. But I propose we go for just one shared file for simplicity. A single whonix-ip-files.list file. Whonix-Gateway might run an obsolete “if [ -f /home/user/.torchat/torchat.ini ]” and skip that file, but “if [ -f … ]” is really fast. So I don’t think it will be that many files that it matters. (Also generating gw/ws specific ip list files would be much more error prone, because the script that generates them would need some understanding which package gets installed on either/and/or gw/ws.) I guess the performance loss will be absolutely negligible but the code much simpler.</p>
<p>[hr]</p>
<p>No idea where this fits best. Perhaps we create a new whonix-shared-network-conf package where we put all that functionality?</p>
<ul>
<li>
<p>usr/share/whonix-shared-network-conf/whonix-gateway-ip (Contains GW_INT_IF:10.152.152.10) (Whonix developers must manually keep that file current. Not hard, because should we ever [I hope not!] change Whonix’s internal IPs again, we need to search and replace the whole Whonix source folder anyhow.)</p>
</li>
<li>
<p>usr/share/whonix-shared-network-conf/whonix-workstation-ip (Contains WS_INT_IF:10.152.152.11)</p>
</li>
<li>
<p>usr/lib/whonix-shared-network-conf/ip-file-list-gen [–build-time]<br>
– Searches through ./packages for IPs. Supposed to be run at build time.<br>
– Creates a file /usr/share/whonix-shared-network-conf/ip-file-list. (Contains /home/user/.torchat/torchat.ini and so forth.)<br>
– That file should be deterministic. (Probably the default and hard to make it non-deterministic.)<br>
– Do we want to make that file versioned? Probably not required. Version number of the package suffices.</p>
</li>
<li>
<p>usr/lib/whonix-shared-network-conf/ip-file-list-gen --run-time<br>
– Creates a file /var/cache/whonix-shared-network-conf/ip-file-list (OPTIONAL. You decide. [/var/cache or /var/lib. Needs very little research.] Not sure it’s really neccessary.)</p>
</li>
<li>
<p>usr/lib/whonix-shared-network-conf/ip-changer (If not Qubes -&gt; exit 0. Otherwise use /usr/(share|cache)/whonix-shared-network-conf/ip-file-list to do the search and replace magic.)</p>
</li>
<li>
<p>etc/[…] hooks that all run /usr/lib/whonix-shared-network-conf/ip-changer</p>
</li>
</ul>
<p>(ip-file-list-gen and other names are not final. If you have better proposals, sure thing! Goes for the whole proposal!)</p>
<p>[hr]</p>
<p>As for “part of the Whonix build process”.</p>
<ul>
<li>I am fine with running packages/whonix-shared-network-conf/usr/lib/whonix-shared-network-conf/ip-file-list-gen somewhere during the build process.</li>
<li>It would regenerate that file.</li>
<li>Ideally there are no changes.</li>
<li>Then it won’t matter.</li>
<li>But please no autogenerated files that are auto committed to git.</li>
<li>When that file changes, if Whonix maintainers forgot to manually run it, the build will break by default due to uncommitted git changes. In that case a Whonix maintainer will manually run ip-file-list-gen and commit the changes to git.</li>
<li>This will probably not happen often anyhow. So more autogeneration autocommitting than that would probably not be required.</li>
</ul>
<p>[hr]</p>
<p>How does that sound?</p>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-28T06:34:34Z' class='post-time'>
                October 28, 2014,  6:34am
              </time>
              <meta itemprop='dateModified' content='2014-10-28T06:34:34Z'>
          <span itemprop='position'>#87</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“Patrick, post:85, topic:512”][quote author=nrgaway link=topic=537.msg5014#msg5014 date=1414440191]</p>
<aside class="quote">
<blockquote>
<p>Repo:<br>
<a href="../../../external.html?link=https://github.com/Whonix/whonix-repository" rel="nofollow noopener">https://github.com/Whonix/whonix-repository</a></p>
<p>Startup sequence:<br>
/usr/share/applications/whonix_repository.desktop -&gt; /usr/lib/whonix-repository -&gt; /usr/bin/whonix_repository</p>
<p>[hr]</p>
<p>Repo:<br>
<a href="../../../external.html?link=https://github.com/Whonix/whonixsetup/tree/master/usr/lib" rel="nofollow noopener">https://github.com/Whonix/whonixsetup/tree/master/usr/lib</a></p>
<p>Startup sequence:<br>
/usr/share/applications/gateway-firsttimesetup.desktop -&gt; /usr/lib/<em>whonixsetup</em> -&gt; /usr/bin/whonixsetup</p>
<p>[hr]</p>
<p>We can work around it in Whonix, but I think it should be reported against Qubes as well.</p>
<p>For the report against Qubes, a small test script<br>
/usr/share/applications/teststdin.desktop -&gt; /usr/bin/teststdin<br>
that reads from stdin (which will fail as I expect) or uses <code>dialog</code> (which I am more surely expect to fail).</p>
</blockquote>
</aside>
<p>As a stop-gap measure I just linked dialog to gdialog and that seems to be able to display the dialogs nicely.  kdialog gave me empty box when running from shell (lots of Error: BadDrawable messages).  Maybe it would be nice to have that set as an environment variable?</p>
<p><a href="../../../external.html?link=https://stackoverflow.com/questions/8354482/dialog-from-bash-script" data-bbcode="true" rel="nofollow noopener">https://stackoverflow.com/questions/8354482/dialog-from-bash-script</a></p>
<pre><code class="lang-auto">DIALOG=${DIALOG=dialog}

$DIALOG --title " My first dialog" --clear \
        --yesno "Hello , this is my first dialog program" 10 30</code></pre>
<p>[/quote]<br>
I like that idea independently from the Qubes issue!</p>
<p>Using “$DIALOG” instead of “dialog” seems like a good idea. Then we can add at the beginning of the script some logic on which to prefer.</p>
<p>Perhaps depending on which is installed? Or just depend on it and assume it’s installed?</p>
<p>Somehow auto detect X and prefer “gdialog” then? Otherwise fall back to “dialog”?</p>
<p>And let an environment variable overrule the auto detection code?</p>
<p>There is an confusing amount of “dialog” replacements. Some graphical. More or less compatible?<br>
<a href="../../../external.html?link=http://web.mit.edu/outland/share/doc/Xdialog-2.1.2/compatibility.html" class="onebox" target="_blank" rel="nofollow noopener">http://web.mit.edu/outland/share/doc/Xdialog-2.1.2/compatibility.html</a></p>
<p>Which ones are available from Debian?</p>
<p>You’ll probably want to turn “/sbin/poweroff” to “echo /sbin/poweroff” while development.  <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
<p>We’d have to run “kdesudo whonixsetup” (because “sudo” won’t work when X is involved). But we likely find a solution for that.</p>
<p>whonixsetup’s disclaimer is too big. The buttons are outside the visible area. I wanted to split them into more screens some day anyway (to make them work in the less-lines-by-default gnome-default-terminal).</p>
<p>Would you like to push a branch, patch or commit?[/quote]</p>
<p>Marek has already push a commit I can try out tomorrow which I hope will help initially with those applications.  In the mean time linking to gdialog seems to work.  I was having an issue though where I need to wait until xdg applications were auto started to be able to use the Connection Manager; it was taking 45 seconds.  I am trying to re-integrate the Connection Manager (whonixsetup) back in with tor disabled by default until users see the disclaimer and choose how to install.</p>
<p>I will be able to see how Marek commit may help tomorrow.</p>
<p>Once I have the build working Marek suggested I integrate files that may need updating into the main Whonix repo so they can be updated.  There are only a handful so I will create a package for them.  Mostly they deal with setting up the network and search and replace functions.</p>
<p>I am starting to remove any hacks needed out in favour of updating either Qubes or Whonix so they won’t be needed so at some point I will need to create a branch.  I have not done it yet since I am having to change the logic often when a new issue comes up.</p>
<p>I think the last major item will be to get Whonix to be able to update from a template which has no network access by default and has to use a proxy when an update is requested.  I was looking into this a bit today as well.  I am thinking of loading different firewall rules for the template that would only allow access from apt-get and force tor to use the Qubes proxy (if that’s possible) for its outgoing connection to be sure that updates are made over Tor.</p>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-28T07:09:03Z' class='post-time'>
                October 28, 2014,  7:09am
              </time>
              <meta itemprop='dateModified' content='2014-10-28T07:09:03Z'>
          <span itemprop='position'>#88</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“Patrick, post:86, topic:512”]Sounds good overall!</p>
<p>[hr]</p>
<p>Hooks for your changer script [needs good name] required:</p>
<ul>
<li>before network comes up</li>
<li>after package install (Easy, I already did something similar, can help with this. For comparsion: <a href="../../../external.html?link=https://github.com/Whonix/rads/blob/master/etc/apt/apt.conf.d/90rads" rel="nofollow noopener">https://github.com/Whonix/rads/blob/master/etc/apt/apt.conf.d/90rads</a>)</li>
<li>you name it[/quote]</li>
</ul>
<p>In Qubes the networking is done a bit backwards.  I am responsible for the code to bring up the networks, or at least the internal interface.  Currently I have a udev rules that will add the internal interface, replace the ips, protect hosts resolv.conf and hostname and start firewall.  These will be some thing that will need to be updatable for bug fixes and would be a included in a package.</p>
<p>I see needing hooks after updating and maybe before whonixcheck is done and before time sync.  I should sort this one out in next few days.  The reason whonix was giving PID not found errors cause I was resetting tor after ip address have been changed, and it was looking at old IP I think.  And if I disabled tor I got messages since it was expecting it to be running (all because I could not tun setup at an early stage).</p>
<p>My work-around was to disable whonixcheck and sdwdate and re-enable them once I was able to wait the 45 seconds to run setup.  So this will hopefully change now with Marek’s commit… Tomorrow will tell <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<blockquote>I might have said this before. Dunno. We can rely on the output of "sudo virt-what" and then "do-some-stuff if Qubes detected, otherwise exit 0".
<p>(There is some example “sudo virt-what” code here:<br>
<a href="../../../external.html?link=https://github.com/Whonix/whonixcheck/blob/master/usr/lib/whonixcheck/check_virtualizer" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/Whonix/whonixcheck/blob/master/usr/lib/whonixcheck/check_virtualizer</a><br>
But nevermind. It’s really simpler than that. Just running “sudo virt-what” and checking the output against a fixed string. Voila, we know we’re running inside Qubes.)</p>
<p>That way we might be able to avoid a separate whonix-qubes-network-conf or even whonix-qubes-(gw|ws)-network-conf package.</p>
</blockquote>
<p>Nice.  Too easy!</p>
<blockquote>If we were going for "perfect performance", we should create a whonix-gw-ip-files.list as well as a separate whonix-ws-ip-files.list file. But I propose we go for just one shared file for simplicity. A single whonix-ip-files.list file. Whonix-Gateway might run an obsolete "if [ -f /home/user/.torchat/torchat.ini ]" and skip that file, but "if [ -f ... ]" is really fast. So I don't think it will be that many files that it matters. (Also generating gw/ws specific ip list files would be much more error prone, because the script that generates them would need some understanding which package gets installed on either/and/or gw/ws.) I guess the performance loss will be absolutely negligible but the code much simpler.
<p>[hr]</p>
<p>No idea where this fits best. Perhaps we create a new whonix-shared-network-conf package where we put all that functionality?</p>
<ul>
<li>
<p>usr/share/whonix-shared-network-conf/whonix-gateway-ip (Contains GW_INT_IF:10.152.152.10) (Whonix developers must manually keep that file current. Not hard, because should we ever [I hope not!] change Whonix’s internal IPs again, we need to search and replace the whole Whonix source folder anyhow.)</p>
</li>
<li>
<p>usr/share/whonix-shared-network-conf/whonix-workstation-ip (Contains WS_INT_IF:10.152.152.11)</p>
</li>
<li>
<p>usr/lib/whonix-shared-network-conf/ip-file-list-gen [–build-time]<br>
– Searches through ./packages for IPs. Supposed to be run at build time.<br>
– Creates a file /usr/share/whonix-shared-network-conf/ip-file-list. (Contains /home/user/.torchat/torchat.ini and so forth.)<br>
– That file should be deterministic. (Probably the default and hard to make it non-deterministic.)<br>
– Do we want to make that file versioned? Probably not required. Version number of the package suffices.</p>
</li>
<li>
<p>usr/lib/whonix-shared-network-conf/ip-file-list-gen --run-time<br>
– Creates a file /var/cache/whonix-shared-network-conf/ip-file-list (OPTIONAL. You decide. [/var/cache or /var/lib. Needs very little research.] Not sure it’s really neccessary.)</p>
</li>
<li>
<p>usr/lib/whonix-shared-network-conf/ip-changer (If not Qubes -&gt; exit 0. Otherwise use /usr/(share|cache)/whonix-shared-network-conf/ip-file-list to do the search and replace magic.)</p>
</li>
<li>
<p>etc/[…] hooks that all run /usr/lib/whonix-shared-network-conf/ip-changer</p>
</li>
</ul>
<p>(ip-file-list-gen and other names are not final. If you have better proposals, sure thing! Goes for the whole proposal!)</p>
</blockquote>
<p>This will take some time to consider.  One other consideration I have to work against is that Qubes uses base templates as default, where when an AppVM is run, it uses a copy of the original which is destroyed after the session.  So that means anything that in not written and saved in /home/user or /rw (which is also /usr/local) will be lost.  I have not taken much time yet to think it though on the best way to store configuration files.  Marek suggested as a starting point to link them within the /rw directory somewhere and make sure they get populated on first run.</p>
<p>I’m thinking there could be a master configuration file in /etc/default that would specify where any user writable configuration files should go.  Now they seem to be in many places (/root has some so does /home/user, /var/lib/whonix[.d] and the user configurable options within /etc, etc/tor, etc).  Typically I would consider a master folder with sub-folders so only one directory would need to be referenced as the base.  If the /srv directory was not read only, that’s where I would suggest the go.</p>
<p>The AppVM is updated by updating the master template.  So when the master is updated all the AppVM’s that use it also automatically get updated.</p>
<p>I am also still on the encryption kick, but I am waiting for the next release of Qubes before I decide how to implement this.  Initially it will start with home directory and /rw (home dir is mounted from /rw).</p>
<blockquote>As for "part of the Whonix build process".
- I am fine with running packages/whonix-shared-network-conf/usr/lib/whonix-shared-network-conf/ip-file-list-gen somewhere during the build process.
- It would regenerate that file.
- Ideally there are no changes.
- Then it won't matter.
- But please no autogenerated files that are auto committed to git.
- When that file changes, if Whonix maintainers forgot to manually run it, the build will break by default due to uncommitted git changes. In that case a Whonix maintainer will manually run ip-file-list-gen and commit the changes to git.
- This will probably not happen often anyhow. So more autogeneration autocommitting than that would probably not be required.
<p>[hr]</p>
<p>How does that sound?</p>
</blockquote>
<p>I agree.</p>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-28T17:26:12Z' class='post-time'>
                October 28, 2014,  5:26pm
              </time>
              <meta itemprop='dateModified' content='2014-10-28T17:26:12Z'>
          <span itemprop='position'>#89</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="nrgaway" data-post="87" data-topic="512">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>I think the last major item will be to get Whonix to be able to update from a template which has no network access by default and has to use a proxy when an update is requested.</p>
</blockquote>
</aside>
<p>Does this help?<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Qubes#Run_updates_over_Proxy.2FTor" target="_blank" title="09:01AM - 07 March 2020">Whonix – 7 Mar 20</a>
  </header>
  <article class="onebox-body">
    <img src="#" class="thumbnail" width="" height="">

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Qubes#Run_updates_over_Proxy.2FTor" target="_blank">Dev/Qubes - Whonix</a></h3>

<p>Qubes-Whonix ™ development notes.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-28T17:49:52Z' class='post-time'>
                October 28, 2014,  5:49pm
              </time>
              <meta itemprop='dateModified' content='2014-10-28T17:49:52Z'>
          <span itemprop='position'>#90</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="87" data-topic="512">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>Marek has already push a commit I can try out tomorrow which I hope will help initially with those applications.</p>
</blockquote>
</aside>
<p>Ah. So I might have to implement it myself.  <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> Asking if it looks good beforehand:<br>
<a href="../../../external.html?link=https://www.whonix.org/forum/index.php/topic,672.0.html" class="onebox" target="_blank">https://www.whonix.org/forum/index.php/topic,672.0.html</a></p>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-29T00:35:10Z' class='post-time'>
                October 29, 2014, 12:35am
              </time>
              <meta itemprop='dateModified' content='2014-10-29T00:35:10Z'>
          <span itemprop='position'>#91</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“Patrick, post:89, topic:512”][quote author=nrgaway link=topic=537.msg5039#msg5039 date=1414478074]<br>
I think the last major item will be to get Whonix to be able to update from a template which has no network access by default and has to use a proxy when an update is requested.<br>
[/quote]<br>
Does this help?<br>
<a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Qubes#Run_updates_over_Proxy.2FTor%5B/quote%5D" class="onebox" target="_blank" rel="nofollow noopener">https://www.whonix.org/wiki/Dev/Qubes#Run_updates_over_Proxy.2FTor[/quote]</a></p>
<p>The answer to that question is quite vague.  It needs more detail on how to disable yum-proxy, etc.</p>
<p>The question though seems to relate to a regular AppVM template that wants to use Tor for its updates.  While I could implement this to be able to update Whonix-Gateway template though Tor that would be another netvm would need to be already setup that is running the Qubes Tor package.</p>
<p>What I want to do is to figure out how to get the Tor process already in whonix-gateway to be able to bootstrap via a proxy and not use the eth0 interface.</p>
<p>Qubes set up this proxy when it put the template into update mode (where normally the template would have no network access)</p>
<pre><code class="lang-auto">'Acquire::http { Proxy "http://10.137.255.254:8082"; };</code></pre>
<p>So that’s the IP address and port I need to get tor to use and bootstrap to.  I would then only have one one rule in torrc that would allow the apt-get to function</p>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-29T02:10:52Z' class='post-time'>
                October 29, 2014,  2:10am
              </time>
              <meta itemprop='dateModified' content='2014-10-29T02:10:52Z'>
          <span itemprop='position'>#92</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I don’t understand the Qubes internals here, but I can say Tor supports all sorts of using a proxy for itself to connect.</p>
<p>Generally on tunneling:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Features#VPN_.2F_Tunnel_support" target="_blank" title="03:02AM - 19 April 2020">Whonix – 19 Apr 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/426;"><img src="../../../external.html?link=https://www.whonix.org/w/images/9/9c/Drip-1037807-640.jpg" class="thumbnail" width="640" height="426"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Features#VPN_.2F_Tunnel_support" target="_blank">Features and Advantages</a></h3>

<p>Whonix ™ Feature List</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Specifically Tor -&gt; proxy:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Tunnel_Tor_through_proxy_or_VPN_or_SSH#Tunnel_Tor_through_proxy" target="_blank" title="10:04AM - 08 April 2020">Whonix – 8 Apr 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/452;"><img src="../../../external.html?link=https://www.whonix.org/w/images/8/86/Beyond-1087922640.jpg" class="thumbnail" width="640" height="452"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Tunnel_Tor_through_proxy_or_VPN_or_SSH#Tunnel_Tor_through_proxy" target="_blank">Combining Tunnels with Tor</a></h3>

<p>Information on whether Tor gets more or less secure when combining Tor with tunnels such as VPN, SSH, proxies. (User → Tor → proxy/VPN/SSH → Internet) (User → proxy/VPN/SSH → Tor → Internet)</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-29T18:48:30Z' class='post-time'>
                October 29, 2014,  6:48pm
              </time>
              <meta itemprop='dateModified' content='2014-10-29T18:48:30Z'>
          <span itemprop='position'>#93</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="76" data-topic="512">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>Good news…  I finally have a build that runs without errors and both the gateway and workstation are working in Qubes as a ProxyVM and AppVM!</p>
</blockquote>
</aside>
<p>Yes! Yes! Yes! <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>Was offline for a little while and just now seeing this.</p>
<aside class="quote" data-post="76" data-topic="512">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>So I guess others should get there hands on this soon and help testing and not use it for everyday use yet.  It can be built from my repo and within a few days most likely Qubes repo.</p>
</blockquote>
</aside>
<p>I’m going to catch up on reading all the new posts and I will jump in and start building and testing this within the next couple days.</p>
<p>Continued congratulations!</p>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-30T18:35:05Z' class='post-time'>
                October 30, 2014,  6:35pm
              </time>
              <meta itemprop='dateModified' content='2014-10-30T18:35:05Z'>
          <span itemprop='position'>#94</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“Patrick, post:92, topic:512”]I don’t understand the Qubes internals here, but I can say Tor supports all sorts of using a proxy for itself to connect.</p>
<p>Generally on tunneling:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Features#VPN_.2F_Tunnel_support" target="_blank" rel="nofollow noopener" title="03:02AM - 19 April 2020">Whonix – 19 Apr 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/426;"><img src="../../../external.html?link=https://www.whonix.org/w/images/9/9c/Drip-1037807-640.jpg" class="thumbnail" width="640" height="426"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Features#VPN_.2F_Tunnel_support" target="_blank" rel="nofollow noopener">Features and Advantages</a></h3>

<p>Whonix ™ Feature List</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Specifically Tor -&gt; proxy:<br>
<a href="../../../external.html?link=https://www.whonix.org/wiki/Tunnel_Tor_through_proxy_or_VPN_or_SSH#Tunnel_Tor_through_proxy%5B/quote%5D" class="onebox" target="_blank" rel="nofollow noopener">https://www.whonix.org/wiki/Tunnel_Tor_through_proxy_or_VPN_or_SSH#Tunnel_Tor_through_proxy[/quote]</a></p>
<p>I think I have figured out a way to be able to update the templates that have no network access except for a lone http proxy.  I am going to have whonix-gateway handle the proxy connection so both the gateway and workstation templates will be started with minimal firewall (only allow proxy) and no uwt (or tor).</p>
<p>I need to be able to disable uwt so I can run the original apt-get that will then use the http proxy that is set in /etc/apt/apt.conf.d/01qubes-proxy containing the proxy definition listed below.  I don’t have the option of just running ‘/usr/bin/apt-get.anondist-orig’ but can change the link if that’s the only solution:</p>
<pre><code class="lang-auto">Acquire::http::Proxy "http://10.137.255.254:8082";</code></pre>
<p>Should I be able to create a file ‘/etc/whonix.d/50_uwt_user’ and set</p>
<pre><code class="lang-auto">uwtwrapper_global="0"</code></pre>
<p>The setting above had no effect.  Changing the apt-get link to point at apt-get.anondist-orig did work, but is not preferable since if the template is shutdown prematurely, that setting will be used by the AppVMs which will break the AppVM whereas I can just link the 50_uwt_user configuration file which will only be available to the template and not the AppVM’s.</p>
<p>[HR]</p>
<p>One other question relating to Whonix build-steps.d.  I created some custom build step files ‘1000_qubes-pre-config’ and ‘2900_qubes-post-config’.  I noticed that there was no way to just include a ‘~/build-steps.d’  directory and place the files there although that would be a good option to have.  On build, you could first move the default Whonix build-steps.d files into a ‘build-steps.d-cache’ directory (after removing anything in the cache directory), then copy files from ‘~/build-steps.d’ and even ‘/etc/build-steps.d’ into the cache directory (would allow us to over-write an existing build step that way) and then run-steps from the cache directory.</p>
<p>I also tried just creating a softlink to my files from the Whonix/build-steps.d directory and copying them there but they did not seem to get pickup up.</p>
<p>[HR]</p>
<p>Would you like me to create a Makefile for you?  It could be used to automate many things like ‘git --init submodules’, clean, etc.  I have already created a basic one that I move in place when building Whonix on Qubes, but I can make it work generically.  We can add stuff like get-sources and verify sources as well so you can get rid of submodules if you wanted to and have the Makefile just grab it all and verify each package.  The Qubes Makefile also lets you merge in changes, build and sign the packages is you wish.</p>
<p>Here is some of what I envision a Makefile would include (based on Qubes Makefile):</p>
<pre><code class="lang-auto">make gateway          -- would read form a configuration file for options
make workstation      -- same ---^
make get-sources      -- download/update all sources (if you git rid of submodules) get+verify
make sign-all         -- sign all packages
make clean-all        -- remove any downloaded sources and built packages
make clean-deb        -- remove any built packages
make check            -- check for any uncommited changes and unsigned tags
make check-depend     -- check for build dependencies ($(DEPENDENCIES))
make diff             -- show diffs for any uncommitted changes
make grep RE=regexp   -- grep for regexp in all components
make push             -- do git push for all repos, including tags
make show-vtags       -- list components version tags (only when HEAD have such) and branches
make show-authors     -- list authors of Qubes code based on commit log of each component
make prepare-merge    -- fetch the sources from git, but only show new commits instead of merging
make show-unmerged    -- list fetched but unmerged commits (see make prepare-merge)
make do-merge         -- merge fetched commits</code></pre>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-30T23:23:15Z' class='post-time'>
                October 30, 2014, 11:23pm
              </time>
              <meta itemprop='dateModified' content='2014-10-30T23:23:15Z'>
          <span itemprop='position'>#95</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>[code]
Acquire::http::Proxy "http://10.137.255.254:8082";
[/code]</blockquote>
Can you use command line options? In that case using a command line option 
<p>I am not entirely sure about the syntax, it’s not well documented or intuitive but something like.</p>
<pre><code class="lang-auto"></code></pre>
<blockquote>Should I be able to create a file '/etc/whonix.d/50_uwt_user' and set
[code]
uwtwrapper_global="0"
[/code]
<p>The setting above had no effect.</p>
</blockquote><br>
The folder is /etc/uwt.d/. Changed in Whonix 9. Then it should work.
<p>Alternatively</p>
<pre><code class="lang-auto"></code></pre>
<p>(<a href="../../../external.html?link=https://github.com/Whonix/uwt/blob/master/usr/bin/uwt#L49">https://github.com/Whonix/uwt/blob/master/usr/bin/uwt#L49</a>)<br>
should work as well. The env var should be preferable to creating temp config files.</p>
<blockquote>Changing the apt-get link to point at apt-get.anondist-orig did work, but is not preferable since if the template is shutdown prematurely, that setting will be used by the AppVMs which will break the AppVM whereas I can just link the 50_uwt_user configuration file which will only be available to the template and not the AppVM's.</blockquote>
Yes, I think we can avoid this.
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-30T23:24:50Z' class='post-time'>
                October 30, 2014, 11:24pm
              </time>
              <meta itemprop='dateModified' content='2014-10-30T23:24:50Z'>
          <span itemprop='position'>#96</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Oh, and apt-get also supports the http_proxy environment variable. 100% sure of this, because Whonix’s build script integrates use of apt-cacher-ng.</p>
<pre><code class="lang-auto"></code></pre>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-31T00:58:28Z' class='post-time'>
                October 31, 2014, 12:58am
              </time>
              <meta itemprop='dateModified' content='2014-10-31T00:58:28Z'>
          <span itemprop='position'>#97</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“nrgaway, post:94, topic:512”]One other question relating to Whonix build-steps.d.  I created some custom build step files ‘1000_qubes-pre-config’ and ‘2900_qubes-post-config’.  I noticed that there was no way to just include a ‘~/build-steps.d’  directory and place the files there although that would be a good option to have.  On build, you could first move the default Whonix build-steps.d files into a ‘build-steps.d-cache’ directory (after removing anything in the cache directory), then copy files from ‘~/build-steps.d’ and even ‘/etc/build-steps.d’ into the cache directory (would allow us to over-write an existing build step that way) and then run-steps from the cache directory.</p>
<p>I also tried just creating a softlink to my files from the Whonix/build-steps.d directory and copying them there but they did not seem to get pickup up.[/quote]</p>
<p>Processing the build-steps.d is currently using a very simple implementation. Implemented in function whonix_build_machine in help-steps/whonix_build_one. Here:<br>
<a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/help-steps/whonix_build_one#L42" class="onebox" target="_blank">https://github.com/Whonix/Whonix/blob/master/help-steps/whonix_build_one#L42</a></p>
<p>Perhaps add some sleep there to figure out what its doing.</p>
<p>Or run this.</p>
<pre><code class="lang-auto">run-parts --verbose --test ./build-steps.d</code></pre>
<p>And check if your script would be run. <code>run-parts</code> runs those in lexical order. Scripts are executed, not sourced. So they need to be executable. Unlikely, but perhaps that was it?</p>
<p>Just tested. Symlinks work for me.</p>
<pre><code class="lang-auto">ln -s ~/a build-steps.d/1000_x</code></pre>
<p>There is a related issue with adding custom build steps. It essentially is a source code change:<br>
<a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Build_Documentation/10_full#Source_Code_Changes" class="onebox" target="_blank">https://www.whonix.org/wiki/Dev/Build_Documentation/10_full#Source_Code_Changes</a><br>
So you either have to commit it or use the ignore uncommitted build switch. So the cache dir is an interesting idea.</p>
<p>As for /etc/build-steps.d… It would be better if it contained some word like. Well. Dunno. Since I am almost done with the more generic command line parser (<a href="../../../external.html?link=https://www.whonix.org/forum/index.php/topic,633.0.html">https://www.whonix.org/forum/index.php/topic,633.0.html</a>)… Whonix’s build script is slowely developing into a general tool to build VM images as well as “–install-to-root” builds. What about be a good name for such a combined tool?</p>
<p>And as a related question, I am thinking for some time now if it made sense to package Whonix’s build script as a regular Debian package? Then we could use build depends using the usual debian/control mechanism.</p>
<p>Related to /etc/build-steps.d there is a similar mechanism.</p>
<p><code>    buildconfig.d or in
    /etc/whonix_buildconfig.d
    ../buildconfig.d</code><br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Source_Code_Intro#Build_Configuration_Folder" target="_blank" title="05:19PM - 01 March 2020">Whonix – 1 Mar 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:598/500;"><img src="../../../external.html?link=https://www.whonix.org/w/images/f/fa/Accept-47587640.png" class="thumbnail" width="598" height="500"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Source_Code_Intro#Build_Configuration_Folder" target="_blank">Dev/Source Code Intro - Whonix</a></h3>

<p>Introduction into Whonix ™ source code.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>
(I don’t like the …/buildconfig.d folder name much, because it does not contain the name of the tool that is yet to be named.</p>
<p>A good place for the cache dir would be probably:</p>
<pre><code class="lang-auto">$WHONIX_BINARY/build-steps_temp.d</code></pre>
<p>help-steps/whonix_build_one could then populate that folder with scripts from various locations. (build-steps.d, /etc/…, ~/…)</p>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-31T06:29:48Z' class='post-time'>
                October 31, 2014,  6:29am
              </time>
              <meta itemprop='dateModified' content='2014-10-31T06:29:48Z'>
          <span itemprop='position'>#98</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“Patrick, post:97, topic:512”][quote author=nrgaway link=topic=537.msg5074#msg5074 date=1414694105]<br>
One other question relating to Whonix build-steps.d.  I created some custom build step files ‘1000_qubes-pre-config’ and ‘2900_qubes-post-config’.  I noticed that there was no way to just include a ‘~/build-steps.d’  directory and place the files there although that would be a good option to have.  On build, you could first move the default Whonix build-steps.d files into a ‘build-steps.d-cache’ directory (after removing anything in the cache directory), then copy files from ‘~/build-steps.d’ and even ‘/etc/build-steps.d’ into the cache directory (would allow us to over-write an existing build step that way) and then run-steps from the cache directory.</p>
<p>I also tried just creating a softlink to my files from the Whonix/build-steps.d directory and copying them there but they did not seem to get pickup up.<br>
[/quote]</p>
<p>Processing the build-steps.d is currently using a very simple implementation. Implemented in function whonix_build_machine in help-steps/whonix_build_one. Here:<br>
<a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/help-steps/whonix_build_one#L42" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/Whonix/Whonix/blob/master/help-steps/whonix_build_one#L42</a></p>
<p>Perhaps add some sleep there to figure out what its doing.</p>
<p>Or run this.</p>
<pre><code class="lang-auto">run-parts --verbose --test ./build-steps.d</code></pre>
<p>And check if your script would be run. <code>run-parts</code> runs those in lexical order. Scripts are executed, not sourced. So they need to be executable. Unlikely, but perhaps that was it?</p>
<p>Just tested. Symlinks work for me.</p>
<pre><code class="lang-auto">ln -s ~/a build-steps.d/1000_x</code></pre>
<p>There is a related issue with adding custom build steps. It essentially is a source code change:<br>
<a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Build_Documentation/10_full#Source_Code_Changes" class="onebox" target="_blank" rel="nofollow noopener">https://www.whonix.org/wiki/Dev/Build_Documentation/10_full#Source_Code_Changes</a><br>
So you either have to commit it or use the ignore uncommitted build switch. So the cache dir is an interesting idea.[/quote]</p>
<p>It could have been since that I did not commit after adding files or links.  Yes they scripts were also executable hehe, but I created the links from a bound mount into a chroot, so there could be problems with that.  For now I just abandoned the build-steps code and reverted to having it back within the Qubes template scripts.</p>
<blockquote>As for /etc/build-steps.d... It would be better if it contained some word like. Well. Dunno. Since I am almost done with the more generic command line parser (https://www.whonix.org/forum/index.php/topic,633.0.html)... Whonix's build script is slowely developing into a general tool to build VM images as well as "--install-to-root" builds. What about be a good name for such a combined tool?</blockquote>
<p>I’m the worst at naming stuff; I will sit for 15 minutes just to name a variable at times!  Whonix Imager, Whonix Doctor lol.</p>
<blockquote>And as a related question, I am thinking for some time now if it made sense to package Whonix's build script as a regular Debian package? Then we could use build depends using the usual debian/control mechanism.</blockquote>
<p>I really think a general Makefile would make things much simpler with a configuration file for options.  Then you could load what ever conf file in you want like ‘CONF=gateway-rootfs make gateway’.  And the Makefile would take care of all dependencies and only grab the required ones for the modules you are building. For a end user, they download git package, verify it (can be self verified if key is provided?) then they can build by just ‘make gateway’ and all dependencies will get downloaded, all git submodules cleaned and init.</p>
<blockquote>Related to /etc/build-steps.d there is a similar mechanism.
[code]    buildconfig.d or in
    /etc/whonix_buildconfig.d
    ../buildconfig.d[/code]
https://www.whonix.org/wiki/Dev/Source_Code_Intro#Build_Configuration_Folder
(I don't like the ../buildconfig.d folder name much, because it does not contain the name of the tool that is yet to be named.
<p>A good place for the cache dir would be probably:</p>
<pre><code class="lang-auto">$WHONIX_BINARY/build-steps_temp.d</code></pre>
<p>help-steps/whonix_build_one could then populate that folder with scripts from various locations. (build-steps.d, /etc/…, ~/…)</p>
</blockquote>
<p>Yes, this feature I can use real soon <img src="../../images/emoji/twitter/slight_smilec164.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-31T07:00:05Z' class='post-time'>
                October 31, 2014,  7:00am
              </time>
              <meta itemprop='dateModified' content='2014-10-31T07:00:05Z'>
          <span itemprop='position'>#99</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="98" data-topic="512">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>It could have been since that I did not commit after adding files or links.</p>
</blockquote>
</aside>
<p>No. run-parts doesn’t mind about git. The worry about uncommitted changes is just…<br>
The check is here:<br>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/1200_create-debian-packages#L115" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/build-steps.d/1200_create-debian-packages#L115" target="_blank" rel="nofollow noopener">Whonix/Whonix/blob/master/build-steps.d/1200_create-debian-packages#L115</a></h4>
<pre class="onebox"><code class="lang-d/1200_create-debian-packages"><ol class="start lines" start="105" style="counter-reset: li-counter 104 ;">
<li>   sudo $SUDO_OPTS -E "$whonix_dev_meta_files_folder/debug-steps/reprepro-wrapper" includedsc "$WHONIX_BUILD_APT_CODENAME" "$package_absolute_path"</li>
<li>done</li>
<li>
</li>
<li>## Get rid of $whonix_build_sources_list_primary package list, while keeping</li>
<li>## regular package lists. In other words, prevent needlessly forgetting</li>
<li>## about regular package lists.</li>
<li>apt-get update \</li>
<li>   --no-download \</li>
<li>   --list-cleanup</li>
<li>
</li>
<li class="selected">popd</li>
<li>
</li>
<li>true "${cyan}$BASH_SOURCE INFO: Got extra packages. ${reset}"</li>
<li>}</li>
<li>
</li>
<li>get_tpo_packages() {</li>
<li>if [ "$whonix_build_pkg_apparmor_only" = "true" ]; then</li>
<li>   true "${cyan}$BASH_SOURCE INFO: Skipping $FUNCNAME, because whonix_build_pkg_apparmor_only is set to $whonix_build_pkg_apparmor_only. ${reset}"</li>
<li>   return 0</li>
<li>fi</li>
<li>
</li>
</ol></code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>Debian toolchain still relies on upstream tarballs, git format is coming at some point in future that will make thing simpler to grasp. To create upstream tarballs, git archive is being used:<br>
<a href="../../../external.html?link=https://github.com/Whonix/anon-apt-sources-list/blob/master/make-helper.bsh#L352" class="onebox" target="_blank">https://github.com/Whonix/anon-apt-sources-list/blob/master/make-helper.bsh#L352</a><br>
(And git-archive only exports files that are committed.)</p>
<p>Also that uncommitted git check ensures consistent results. So builders have not accidentally changed something. Or still having temporary files in the source laying around. Making triaging of the resulting reports a hell.</p>
<blockquote>Yes, this feature I can use real soon :)</blockquote>
Would you like to write a patch for the "build-step.d cache folder" feature?
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="512.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-31T07:09:28Z' class='post-time'>
                October 31, 2014,  7:09am
              </time>
              <meta itemprop='dateModified' content='2014-10-31T07:09:28Z'>
          <span itemprop='position'>#100</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>About the makefile… I am not good at writing makefiles. Having difficulties debugging them. Since there is no xtrace and since I always step through all code and options, make doesn’t play well with me.</p>
<p>For Whonix packages we already have an in my opinion awesome makefile.</p>
<pre><code class="lang-auto">cd anon-apt-sources-list/
make help </code></pre>
<pre><code class="lang-auto">make help
   Show this help.
make dist
   Create package-version.tar.gz from source files in $DISTDIR (default "..").
make undist
   Delete package-version.tar.gz from source files in $DISTDIR (default "..").
make debdist
   Create debian.tar.gz from source files in $DISTDIR (default "..").
make undebdist
   Delete debian.tar.gz from source files in $DISTDIR (default "..").
make manpages
   Create man page from man source folder, which will be stored in debian/tmp-man folder.
make uch
   Store upstream changelog from git log in debian/changelog.upstream.
make install
   Copying the files from the source tree to system-wide directories.
make installsim
   Simulate copying the files from the source tree to system-wide directories.
make deb-pkg
   Create a deb, which will be stored in parent folder.
make deb-pkg-install
   Create a deb, which will be stored in parent folder, and install it.
make deb-install
   Install deb from parent folder.
make deb-icup
   Combination of make deb-pkg, make deb-pkg-install and make deb-pkg-cleanup.
make deb-remove
   apt-get remove make_main_package_name
make deb-purge
   apt-get purge make_main_package_name
make deb-clean
   Delete temporary debhelper files.
make deb-cleanup
   Same as make deb-clean and deletes debuild artifacts from parent folder.
make dput-ubuntu-ppa
   Upload to Ubuntu ppa. Requires functional .dput.cf.
make clean
   Currently same as make deb-clean.
make distclean
   Currently same as make clean.
make checkout
   Fetch from git.
make installcheck
   Check if source files match installed files.
make uninstallcheck
   Check if make uninstall removed all files.
make uninstall
   Delete all installed files.
make uninstallsim
   Simulate what make uninstall would do.
make deb-chl-bumpup
   Bump upstream version number in debian/changelog.</code></pre>
<p>Here is the code:</p>
<ul>
<li><a href="../../../external.html?link=https://github.com/Whonix/anon-apt-sources-list/blob/master/Makefile">https://github.com/Whonix/anon-apt-sources-list/blob/master/Makefile</a></li>
<li><a href="../../../external.html?link=https://github.com/Whonix/anon-apt-sources-list/blob/master/make-helper.bsh">https://github.com/Whonix/anon-apt-sources-list/blob/master/make-helper.bsh</a></li>
</ul>
<p>The Makefile is minimal. Because I find doing such tasks using Make super difficult. The syntax is ugly.</p>
<p>Would you be interested to implement it in a similar way? Minimal make file? Rest implemented as shell script (or?)?</p>
<p>But before you start… Some functionality you are proposing is already implemented one way or another.</p>
<p>In this package:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">
      <a href="../../../external.html?link=https://github.com/Whonix/whonix-developer-meta-files/" target="_blank">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="../../../external.html?link=https://avatars3.githubusercontent.com/u/4500165?s=400&amp;v=4" class="thumbnail onebox-avatar" width="400" height="400">

<h3><a href="../../../external.html?link=https://github.com/Whonix/whonix-developer-meta-files/" target="_blank">Whonix/whonix-developer-meta-files</a></h3>

<p>Scripts for managing Whonix's offical repository and Whonix News; debug scripts; developer documentation https://github.com/Whonix/Whonix - Whonix/whonix-developer-meta-files</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>I’ll say more soon.</p>
        </div>

        <meta itemprop='headline' content='ProxyVM + AppVM Development'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="512fdb0.html?page=4">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="512c575.html?page=6">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
