<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Is it possible to re-shrink the .qcow2 image files?</title>
    <link>http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228</link>
    <description>Over the course of many system upgrades, logging, etc. the image files have grown substantially. I have deleted as much of such files as I can to drop their sizes back down to about 5 gigs, but their usage on disk still stands at about twice that amount. I am guessing that they must have &quot;grown&quot; to accommodate the data needed, but is there a way I can shrink them back?</description>
    <language>en</language>
    <lastBuildDate>Tue, 19 Apr 2022 09:23:02 +0000</lastBuildDate>
    <category>KVM</category>
    <atom:link href="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Is it possible to re-shrink the .qcow2 image files?</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Added and credited. Thanks <a class="mention" href="http://forums.whonix.org/u/tempest">@tempest</a> for sharing.</p>
<p><a href="https://www.kicksecure.com/wiki/Shrink_Virtual_Harddisk" class="onebox" target="_blank" rel="noopener">https://www.kicksecure.com/wiki/Shrink_Virtual_Harddisk</a></p>
          <p><a href="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/8</link>
        <pubDate>Tue, 19 Apr 2022 09:23:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13228-8</guid>
        <source url="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228.rss">Is it possible to re-shrink the .qcow2 image files?</source>
      </item>
      <item>
        <title>Is it possible to re-shrink the .qcow2 image files?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>only 1 wiki might be sufficient, new wiki page:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.kicksecure.com/wiki/Shrink_Virtual_Harddisk">
  <header class="source">
      <img src="https://www.kicksecure.com/w/images/4/45/Kicksecure-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.kicksecure.com/wiki/Shrink_Virtual_Harddisk" target="_blank" rel="noopener" title="06:47AM - 21 April 2022">Kicksecure – 21 Apr 22</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://www.kicksecure.com/wiki/Shrink_Virtual_Harddisk" target="_blank" rel="noopener">Shrink Virtual Harddisk Size</a></h3>

  <p>Free disk space. Decrease the size of a virtual disk. Decrease virtual machine storage capacity.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/7</link>
        <pubDate>Tue, 19 Apr 2022 07:40:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13228-7</guid>
        <source url="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228.rss">Is it possible to re-shrink the .qcow2 image files?</source>
      </item>
      <item>
        <title>Is it possible to re-shrink the .qcow2 image files?</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="4" data-topic="13228">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Would you like to add this to the Kicksecure wiki?</p>
</blockquote>
</aside>
<p>Where does this belong on both wikis?</p>
          <p><a href="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/6</link>
        <pubDate>Tue, 19 Apr 2022 07:37:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13228-6</guid>
        <source url="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228.rss">Is it possible to re-shrink the .qcow2 image files?</source>
      </item>
      <item>
        <title>Is it possible to re-shrink the .qcow2 image files?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox allowlistedgeneric" data-onebox-src="https://www.reddit.com/r/Whonix/comments/sfe0h2/shrinking_whonix/">
  <header class="source">
      <img src="https://www.redditstatic.com/desktop2x/img/favicon/android-icon-192x192.png" class="site-icon" width="192" height="192">

      <a href="https://www.reddit.com/r/Whonix/comments/sfe0h2/shrinking_whonix/" target="_blank" rel="noopener">reddit</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://www.reddit.com/r/Whonix/comments/sfe0h2/shrinking_whonix/" target="_blank" rel="noopener">r/Whonix - Shrinking Whonix</a></h3>

  <p>3 votes and 1 comment so far on Reddit</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox allowlistedgeneric" data-onebox-src="https://medium.com/@dxzy/shrinking-whonix-25bbb1b60fb7">
  <header class="source">

      <a href="https://medium.com/@dxzy/shrinking-whonix-25bbb1b60fb7" target="_blank" rel="noopener" title="08:49AM - 29 January 2022">Medium – 29 Jan 22</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://medium.com/@dxzy/shrinking-whonix-25bbb1b60fb7" target="_blank" rel="noopener">Shrinking Whonix</a></h3>

  <p>Whonix ships with 100GB disk images by default, which with sparse file support does not actually require 100GB and typically causes no…</p>

  <p>
    <span class="label1">Reading time: 2 min read</span>
  </p>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/5</link>
        <pubDate>Sun, 06 Feb 2022 13:35:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13228-5</guid>
        <source url="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228.rss">Is it possible to re-shrink the .qcow2 image files?</source>
      </item>
      <item>
        <title>Is it possible to re-shrink the .qcow2 image files?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Would you like to add this to the Kicksecure wiki?</p>
<p>That’s a real long standing thing asked every now and then that is missing in the wiki.</p>
<p><a href="https://phabricator.whonix.org/T64" class="onebox" target="_blank" rel="noopener">https://phabricator.whonix.org/T64</a></p>
          <p><a href="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/4</link>
        <pubDate>Fri, 04 Feb 2022 10:16:40 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13228-4</guid>
        <source url="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228.rss">Is it possible to re-shrink the .qcow2 image files?</source>
      </item>
      <item>
        <title>Is it possible to re-shrink the .qcow2 image files?</title>
        <dc:creator><![CDATA[tempest]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="SilentBob" data-post="1" data-topic="13228" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/s/3ab097/40.png" class="avatar"> SilentBob:</div>
<blockquote>
<p>Over the course of many system upgrades, logging, etc. the image files have grown substantially. I have deleted as much of such files as I can to drop their sizes back down to about 5 gigs, but their usage on disk still stands at about twice that amount. I am guessing that they must have “grown” to accommodate the data needed, but is there a way I can shrink them back?</p>
</blockquote>
</aside>
<p>yes. for your whonix images, you can use a tool called zerofree free to work, since the disks are ext4 partitions.  it’s a little bit involved. but this is how i’ve gotten the best results:</p>
<ol>
<li>install the package “zerofree” in the virtual machine you want to shrink.</li>
<li>erase what you need in the vm, run apt-get purge, apt-get autoremove, apt-get clean, etc. as needed.</li>
<li>reboot your virtual machine in recovery mode.</li>
<li>at the command prompt, type “systemctl stop systemd-journald.socket &amp;&amp; systemctl stop systemd-journald.service &amp;&amp; mount -o remount,ro / &amp;&amp; zerofree -v /dev/vda1 &amp;&amp; shutdown now”</li>
<li>when the vm shuts down, open a terminal on your host.</li>
<li>switch to root. type “sudo -s”</li>
<li>type “cd /var/lib/libvirt/images”</li>
<li>create a back up of the disk you want to shrink. type “mv YourVirtualMachineDisk.qcow2 YourVirtualMachineDisk.qcow2.backup”</li>
<li>shrink the disk. type “qemu-img convert -o qcow2 -p YourVirtualMachineDisk.qcow2.backup YourVirtualMachineDisk.qcow2”</li>
<li>boot up the vm and see if it is working. if it is, you can delete the backup of the qcow file.</li>
</ol>
<p>there are ways you can get more creative with this using thin provisioned images that are based on a static qcow2 backing file. that’s the method i prefer. but, the above is a basic method for getting a shrunken qcow2 disk file.</p>
          <p><a href="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/3</link>
        <pubDate>Fri, 04 Feb 2022 00:28:37 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13228-3</guid>
        <source url="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228.rss">Is it possible to re-shrink the .qcow2 image files?</source>
      </item>
      <item>
        <title>Is it possible to re-shrink the .qcow2 image files?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="16" height="16">

      <a href="https://www.whonix.org/wiki/Unspecific" target="_blank" rel="noopener" title="01:04AM - 02 December 2021">Whonix – 2 Dec 21</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:85/170;"><img src="https://www.whonix.org/w/images/7/74/Booster132.png" class="thumbnail" width="85" height="170"></div>

<h3><a href="https://www.whonix.org/wiki/Unspecific" target="_blank" rel="noopener">Information Booster might be Available!</a></h3>

  <p>Utilizing other resources to help solve questions/issues unspecific to Whonix ™.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/2</link>
        <pubDate>Mon, 24 Jan 2022 13:06:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13228-2</guid>
        <source url="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228.rss">Is it possible to re-shrink the .qcow2 image files?</source>
      </item>
      <item>
        <title>Is it possible to re-shrink the .qcow2 image files?</title>
        <dc:creator><![CDATA[SilentBob]]></dc:creator>
        <description><![CDATA[
            <p>Over the course of many system upgrades, logging, etc. the image files have grown substantially. I have deleted as much of such files as I can to drop their sizes back down to about 5 gigs, but their usage on disk still stands at about twice that amount. I am guessing that they must have “grown” to accommodate the data needed, but is there a way I can shrink them back?</p>
          <p><a href="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228/1</link>
        <pubDate>Fri, 21 Jan 2022 19:50:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13228-1</guid>
        <source url="http://forums.whonix.org/t/is-it-possible-to-re-shrink-the-qcow2-image-files/13228.rss">Is it possible to re-shrink the .qcow2 image files?</source>
      </item>
  </channel>
</rss>
