<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Whonix 14 build script changes alternative</title>
    <link>http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440</link>
    <description>@Patrick

Instead of changing the build script I can tell users to create the network xml file in a single command and import that with net-define.

SE answer:

https://stackoverflow.com/a/16090892

    echo &#39;&lt;root&gt;&lt;foo a=&quot;b&quot;&gt;lorem&lt;/foo&gt;&lt;bar value=&quot;ipsum&quot; /&gt;&lt;/root&gt;&#39; |
        xmllint --format - &gt;&gt; example.xml
    

I&#39;ll add: libxml2-utils to the packages they need to install. (On Debian its installed by default)

Running this command:

    echo &quot;&lt;network&gt;&lt;name&gt;external&lt;/name&gt;&lt;forward mode=&#39;nat&#39;/&gt;&lt;bridge name=&#39;virbr1&#39; stp=&#39;on&#39; delay=&#39;0&#39;/&gt;&lt;ip address=&#39;10.0.2.2&#39; netmask=&#39;255.255.255.0&#39; /&gt;&lt;/network&gt;&quot; |
        xmllint --format - &gt;&gt; external_network.xml

    
Gives external_network.xml containing:

    &lt;network&gt;
      &lt;name&gt;external&lt;/name&gt;
      &lt;forward mode=&#39;nat&#39;/&gt;
      &lt;bridge name=&#39;virbr1&#39; stp=&#39;on&#39; delay=&#39;0&#39;/&gt;
      &lt;ip address=&#39;10.0.2.2&#39; netmask=&#39;255.255.255.0&#39;/&gt;
    &lt;/network&gt;


***

All you need to do is accept all pull requests except the external_network one. Unless you have the internal network names hardcoded it should solve this. Tell me if you need to revert to the &quot;Whonix&quot; network.

***

Another non-related problem: Users upgrading that don&#39;t delete their old &#39;Whonix&#39; network will run into a conflict because of the same virtual bridge number already exists. Something I can do is choose completely different virbr numbers for external/internal network files to avoid this. What do you think?</description>
    <language>en</language>
    <lastBuildDate>Wed, 18 Jan 2017 16:06:54 +0000</lastBuildDate>
    <category>KVM</category>
    <atom:link href="http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Whonix 14 build script changes alternative</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="2" data-topic="3440">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I find this a horrible idea. Would decrease usability even more and notproperly record file changes over time.</p>
<p>I’ll try merge all and try fixing the build script a stab.</p>
</blockquote>
</aside>
<p>An awful hack yes. Thanks for biting the bullet and fixing the build scripts.</p>
<p>Now that its a post Stretch release there are some changes to GW/WS settings I want to include.</p>
          <p><a href="http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440/5</link>
        <pubDate>Wed, 18 Jan 2017 16:06:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3440-5</guid>
        <source url="http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440.rss">Whonix 14 build script changes alternative</source>
      </item>
      <item>
        <title>Whonix 14 build script changes alternative</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Context for anyone else following this.</p>
<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/whonix-libvirt/pull/52" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-libvirt</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/HulaHoopWhonix" target="_blank" rel="nofollow noopener">
    <img alt="HulaHoopWhonix" src="https://avatars3.githubusercontent.com/u/7875239?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/whonix-libvirt/pull/52" target="_blank" rel="nofollow noopener">Update and rename Whonix_network.xml to internal_network.xml</a>
</h4>

<div class="date">
  by <a href="https://github.com/HulaHoopWhonix" target="_blank" rel="nofollow noopener">HulaHoopWhonix</a>
  on <a href="https://github.com/Whonix/whonix-libvirt/pull/52" target="_blank" rel="nofollow noopener">03:12AM - 01 Oct 16</a>
</div>

<div class="github-commit-stats">
  <strong>1 commits</strong>
  changed <strong>2 files</strong>
  with <strong>4 additions</strong>
  and <strong>4 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/whonix-libvirt/pull/53" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-libvirt</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/HulaHoopWhonix" target="_blank" rel="nofollow noopener">
    <img alt="HulaHoopWhonix" src="https://avatars3.githubusercontent.com/u/7875239?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/whonix-libvirt/pull/53" target="_blank" rel="nofollow noopener">Create external_network.xml</a>
</h4>

<div class="date">
  by <a href="https://github.com/HulaHoopWhonix" target="_blank" rel="nofollow noopener">HulaHoopWhonix</a>
  on <a href="https://github.com/Whonix/whonix-libvirt/pull/53" target="_blank" rel="nofollow noopener">03:14AM - 01 Oct 16</a>
</div>

<div class="github-commit-stats">
  <strong>1 commits</strong>
  changed <strong>1 files</strong>
  with <strong>6 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/whonix-libvirt/pull/54" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-libvirt</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/HulaHoopWhonix" target="_blank" rel="nofollow noopener">
    <img alt="HulaHoopWhonix" src="https://avatars3.githubusercontent.com/u/7875239?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/whonix-libvirt/pull/54" target="_blank" rel="nofollow noopener">Restored default vram values</a>
</h4>

<div class="date">
  by <a href="https://github.com/HulaHoopWhonix" target="_blank" rel="nofollow noopener">HulaHoopWhonix</a>
  on <a href="https://github.com/Whonix/whonix-libvirt/pull/54" target="_blank" rel="nofollow noopener">11:09AM - 13 Oct 16</a>
</div>

<div class="github-commit-stats">
  <strong>3 commits</strong>
  changed <strong>1 files</strong>
  with <strong>8 additions</strong>
  and <strong>5 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/whonix-libvirt/pull/55" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-libvirt</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/HulaHoopWhonix" target="_blank" rel="nofollow noopener">
    <img alt="HulaHoopWhonix" src="https://avatars3.githubusercontent.com/u/7875239?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/whonix-libvirt/pull/55" target="_blank" rel="nofollow noopener">Restored default vram values</a>
</h4>

<div class="date">
  by <a href="https://github.com/HulaHoopWhonix" target="_blank" rel="nofollow noopener">HulaHoopWhonix</a>
  on <a href="https://github.com/Whonix/whonix-libvirt/pull/55" target="_blank" rel="nofollow noopener">11:11AM - 13 Oct 16</a>
</div>

<div class="github-commit-stats">
  <strong>4 commits</strong>
  changed <strong>1 files</strong>
  with <strong>7 additions</strong>
  and <strong>4 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/whonix-libvirt/pull/56" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-libvirt</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/HulaHoopWhonix" target="_blank" rel="nofollow noopener">
    <img alt="HulaHoopWhonix" src="https://avatars3.githubusercontent.com/u/7875239?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/whonix-libvirt/pull/56" target="_blank" rel="nofollow noopener">Restored default vram values</a>
</h4>

<div class="date">
  by <a href="https://github.com/HulaHoopWhonix" target="_blank" rel="nofollow noopener">HulaHoopWhonix</a>
  on <a href="https://github.com/Whonix/whonix-libvirt/pull/56" target="_blank" rel="nofollow noopener">11:13AM - 13 Oct 16</a>
</div>

<div class="github-commit-stats">
  <strong>4 commits</strong>
  changed <strong>1 files</strong>
  with <strong>6 additions</strong>
  and <strong>3 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<hr>
<aside class="quote" data-post="3" data-topic="3440">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Right?</p>
</blockquote>
</aside>
<p>Assumed yes. Done.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/Whonix/commit/fc7737f1afc548c525fd65e5d15e496466fd24f6" target="_blank" rel="nofollow noopener">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/Whonix/commit/fc7737f1afc548c525fd65e5d15e496466fd24f6" target="_blank" rel="nofollow noopener">add kvm internal / external network file support</a>
</h4>

  <pre class="message" style="white-space: pre-wrap;">https://forums.whonix.org/t/whonix-14-build-script-changes-alternative</pre>

<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="https://github.com/Whonix/Whonix/commit/fc7737f1afc548c525fd65e5d15e496466fd24f6" target="_blank" rel="nofollow noopener">11:13AM - 18 Jan 17</a>
</div>

<div class="github-commit-stats">
  changed <strong>2 files</strong>
  with <strong>7 additions</strong>
  and <strong>3 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/whonix-developer-meta-files/commit/1694b8972d1983c9ebf742d5e7f57dce0772fd07" target="_blank" rel="nofollow noopener">github.com/Whonix/whonix-developer-meta-files</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/whonix-developer-meta-files/commit/1694b8972d1983c9ebf742d5e7f57dce0772fd07" target="_blank" rel="nofollow noopener">add kvm internal / external network file support</a>
</h4>

  <pre class="message" style="white-space: pre-wrap;">https://forums.whonix.org/t/whonix-14-build-script-changes-alternative</pre>

<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="https://github.com/Whonix/whonix-developer-meta-files/commit/1694b8972d1983c9ebf742d5e7f57dce0772fd07" target="_blank" rel="nofollow noopener">11:13AM - 18 Jan 17</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>3 additions</strong>
  and <strong>2 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440/4</link>
        <pubDate>Wed, 18 Jan 2017 11:18:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3440-4</guid>
        <source url="http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440.rss">Whonix 14 build script changes alternative</source>
      </item>
      <item>
        <title>Whonix 14 build script changes alternative</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Supposed to be used on gateway?</p>
<ul>
<li><a href="https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/external_network.xml">https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/external_network.xml</a></li>
<li><a href="https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/internal_network.xml">https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/internal_network.xml</a></li>
</ul>
<p>Supposed to be used on workstation?</p>
<ul>
<li><a href="https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/external_network.xml">https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/external_network.xml</a></li>
</ul>
<p>Right?</p>
          <p><a href="http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440/3</link>
        <pubDate>Wed, 18 Jan 2017 10:54:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3440-3</guid>
        <source url="http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440.rss">Whonix 14 build script changes alternative</source>
      </item>
      <item>
        <title>Whonix 14 build script changes alternative</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>HulaHoop:</p>
<blockquote>
<p>Instead of changing the build script I can tell users to create the network xml file in a single command and import that with net-define.</p>
</blockquote>
<p>I find this a horrible idea. Would decrease usability even more and not<br>
properly record file changes over time.</p>
<p>I’ll try merge all and try fixing the build script a stab.</p>
          <p><a href="http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440/2</link>
        <pubDate>Wed, 18 Jan 2017 10:38:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3440-2</guid>
        <source url="http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440.rss">Whonix 14 build script changes alternative</source>
      </item>
      <item>
        <title>Whonix 14 build script changes alternative</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a></p>
<p>Instead of changing the build script I can tell users to create the network xml file in a single command and import that with net-define.</p>
<p>SE answer:</p>
<aside class="onebox stackexchange">
  <header class="source">
      <a href="https://stackoverflow.com/questions/16090869/how-to-pretty-print-xml-from-the-command-line/16090892#16090892" target="_blank" rel="nofollow noopener">stackoverflow.com</a>
  </header>
  <article class="onebox-body">
      <a href="https://stackoverflow.com/users/465183/gilles-quenot" target="_blank" rel="nofollow noopener">
    <img alt="Gilles Quenot" src="https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&amp;d=identicon&amp;r=PG" class="thumbnail onebox-avatar" width="128" height="128">
  </a>
<h4>
  <a href="https://stackoverflow.com/questions/16090869/how-to-pretty-print-xml-from-the-command-line/16090892#16090892" target="_blank" rel="nofollow noopener">How to pretty print XML from the command line?</a>
</h4>

<div class="tags">
  <strong>xml, unix, command-line</strong>
</div>

<div class="date">
  
  answered by
  <a href="https://stackoverflow.com/users/465183/gilles-quenot" target="_blank" rel="nofollow noopener">
    Gilles Quenot
  </a>
  on <a href="https://stackoverflow.com/questions/16090869/how-to-pretty-print-xml-from-the-command-line/16090892#16090892" target="_blank" rel="nofollow noopener">06:51PM - 18 Apr 13</a>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<pre><code>echo '&lt;root&gt;&lt;foo a="b"&gt;lorem&lt;/foo&gt;&lt;bar value="ipsum" /&gt;&lt;/root&gt;' |
    xmllint --format - &gt;&gt; example.xml
</code></pre>
<p>I’ll add: libxml2-utils to the packages they need to install. (On Debian its installed by default)</p>
<p>Running this command:</p>
<pre><code>echo "&lt;network&gt;&lt;name&gt;external&lt;/name&gt;&lt;forward mode='nat'/&gt;&lt;bridge name='virbr1' stp='on' delay='0'/&gt;&lt;ip address='10.0.2.2' netmask='255.255.255.0' /&gt;&lt;/network&gt;" |
    xmllint --format - &gt;&gt; external_network.xml
</code></pre>
<p>Gives external_network.xml containing:</p>
<pre><code>&lt;network&gt;
  &lt;name&gt;external&lt;/name&gt;
  &lt;forward mode='nat'/&gt;
  &lt;bridge name='virbr1' stp='on' delay='0'/&gt;
  &lt;ip address='10.0.2.2' netmask='255.255.255.0'/&gt;
&lt;/network&gt;
</code></pre>
<hr>
<p>All you need to do is accept all pull requests except the external_network one. Unless you have the internal network names hardcoded it should solve this. Tell me if you need to revert to the “Whonix” network.</p>
<hr>
<p>Another non-related problem: Users upgrading that don’t delete their old ‘Whonix’ network will run into a conflict because of the same virtual bridge number already exists. Something I can do is choose completely different virbr numbers for external/internal network files to avoid this. What do you think?</p>
          <p><a href="http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440/1</link>
        <pubDate>Mon, 16 Jan 2017 03:04:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3440-1</guid>
        <source url="http://forums.whonix.org/t/whonix-14-build-script-changes-alternative/3440.rss">Whonix 14 build script changes alternative</source>
      </item>
  </channel>
</rss>
