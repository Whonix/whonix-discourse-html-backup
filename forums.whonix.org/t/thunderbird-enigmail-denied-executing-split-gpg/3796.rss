<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Thunderbird/Enigmail denied executing Split-GPG</title>
    <link>http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796</link>
    <description>I&#39;m currently getting an AppArmor error like this whenever I view a message in Thunderbird:

&gt; Apr 22 13:34:51 host kernel: [ 2477.096917] audit: type=1400 audit(1492868091.674:16): apparmor=&quot;DENIED&quot; operation=&quot;exec&quot; profile=&quot;thunderbird&quot; name=&quot;/usr/bin/qubes-gpg-client-wrapper&quot; pid=2846 comm=&quot;thunderbird&quot; requested_mask=&quot;x&quot; denied_mask=&quot;x&quot; fsuid=1000 ouid=0

This is accompanied by the following errors in Enigmail:

&gt; Enigmail initialization failed.
&gt; 
&gt; You are using GnuPG version , which is not up to date anymore. Enigmail recommends GnuPG version 2.0 or newer; please upgrade your GnuPG installation, or Enigmail will not work.


&gt; Enigmail: Error in accessing Enigmail service
&gt; 
&gt; In order to use Enigmail, GnuPG is required. If you did not install GnuPG yet, the easiest way to do this is using the &quot;Setup Wizard&quot; button below.

Enigmail is configured to use Qubes Split-GPG.  It appears that this error started occurring when Icedove was renamed to Thunderbird in Debian.

Not certain if this is a bug in Qubes, Whonix, or Debian, but figured I&#39;d ask here first.</description>
    <language>en</language>
    <lastBuildDate>Thu, 27 Apr 2017 09:32:00 +0000</lastBuildDate>
    <category>AppArmor</category>
    <atom:link href="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Thunderbird/Enigmail denied executing Split-GPG</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Rename please.</p>
          <p><a href="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/10</link>
        <pubDate>Thu, 27 Apr 2017 09:32:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3796-10</guid>
        <source url="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796.rss">Thunderbird/Enigmail denied executing Split-GPG</source>
      </item>
      <item>
        <title>Thunderbird/Enigmail denied executing Split-GPG</title>
        <dc:creator><![CDATA[hccampbell]]></dc:creator>
        <description><![CDATA[
            <p>Saving that file to <code>/etc/apparmor.d/local/usr.bin.thunderbird</code> and then running <code>sudo aa-enforce usr.bin.thunderbird</code> in the TemplateVM seems to have fixed it for me.</p>
<p>Would it be useful if I submitted a PR to that GitHub repo to fix the icedove --&gt; thunderbird name change?  If so, would it be preferred to simply rename the file, or should I make a copy of it (in case some users are still using Icedove for some reason)?</p>
          <p><a href="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/9</link>
        <pubDate>Thu, 27 Apr 2017 08:15:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3796-9</guid>
        <source url="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796.rss">Thunderbird/Enigmail denied executing Split-GPG</source>
      </item>
      <item>
        <title>Thunderbird/Enigmail denied executing Split-GPG</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Can do. You still need to active the change using aa-enforce.</p>
          <p><a href="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/8</link>
        <pubDate>Thu, 27 Apr 2017 07:20:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3796-8</guid>
        <source url="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796.rss">Thunderbird/Enigmail denied executing Split-GPG</source>
      </item>
      <item>
        <title>Thunderbird/Enigmail denied executing Split-GPG</title>
        <dc:creator><![CDATA[hccampbell]]></dc:creator>
        <description><![CDATA[
            <p>If I were to download <a href="https://github.com/Whonix/apparmor-profile-icedove/blob/master/etc/apparmor.d/local/usr.bin.icedove" rel="nofollow noopener">this file</a>, and save it in the path <code>/etc/apparmor.d/local/usr.bin.thunderbird</code> in the TemplateVM that I use for Thunderbird, would that be likely to fix the issue?  Would doing so be likely to break anything else?</p>
          <p><a href="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/7</link>
        <pubDate>Thu, 27 Apr 2017 04:49:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3796-7</guid>
        <source url="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796.rss">Thunderbird/Enigmail denied executing Split-GPG</source>
      </item>
      <item>
        <title>Thunderbird/Enigmail denied executing Split-GPG</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Very much so yes.</p>
          <p><a href="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/6</link>
        <pubDate>Wed, 26 Apr 2017 07:11:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3796-6</guid>
        <source url="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796.rss">Thunderbird/Enigmail denied executing Split-GPG</source>
      </item>
      <item>
        <title>Thunderbird/Enigmail denied executing Split-GPG</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>Maybe the profile folder change during the re-branding is related (?). See:</p>
<p><a href="https://www.debian.org/security/2017/dsa-3832" class="onebox" target="_blank">https://www.debian.org/security/2017/dsa-3832</a></p>
<blockquote>
<p>With this update, the Icedove packages are de-branded back to the official Mozilla branding. With the removing of the Debian branding the packages are also renamed back to the official names used by Mozilla.</p>
</blockquote>
<blockquote>
<p>The Thunderbird package is using a different default profile folder, the default profile folder is now ‘$(HOME)/.thunderbird’. The users profile folder, that was used in Icedove, will get migrated to the new profile folder on the first start, that can take a little bit more time.</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/5</link>
        <pubDate>Wed, 26 Apr 2017 05:01:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3796-5</guid>
        <source url="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796.rss">Thunderbird/Enigmail denied executing Split-GPG</source>
      </item>
      <item>
        <title>Thunderbird/Enigmail denied executing Split-GPG</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>You could be reporting this bug against all projects involved, Qubes and<br>
Debian, since it applies to them as well. Qubes should accept the bug,<br>
not sure what Debian will say, but their answer will be very good to<br>
know nonetheless.</p>
<p>Waiting for an update would be too long, I guess. Due to time<br>
restraints, I won’t be able to give this priority.</p>
<p>Disabling AppArmor would be one easy but unfortunate option.</p>
<p>Apply the manual change is possible but not simple without documentation<br>
how to do that. Figuring that out makes you more like a developer than a<br>
user.</p>
          <p><a href="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/4</link>
        <pubDate>Sat, 22 Apr 2017 15:27:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3796-4</guid>
        <source url="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796.rss">Thunderbird/Enigmail denied executing Split-GPG</source>
      </item>
      <item>
        <title>Thunderbird/Enigmail denied executing Split-GPG</title>
        <dc:creator><![CDATA[hccampbell]]></dc:creator>
        <description><![CDATA[
            <p>Indeed, it’s an interesting bug to attribute.</p>
<p>What would be the recommended course of action for affected users to take?  Wait for an update?  (At the moment I can’t read or send encrypted email.)  Disable AppArmor?  (I’d prefer to keep AppArmor enabled…)  Apply some kind of manual change?  (My experience with AppArmor is pretty minimal, so it’s not obvious to me what manual band-aid fix might be feasible.)</p>
          <p><a href="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/3</link>
        <pubDate>Sat, 22 Apr 2017 14:56:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3796-3</guid>
        <source url="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796.rss">Thunderbird/Enigmail denied executing Split-GPG</source>
      </item>
      <item>
        <title>Thunderbird/Enigmail denied executing Split-GPG</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="1" data-topic="3796">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/ecd19e/40.png" class="avatar"> hccampbell:</div>
<blockquote>
<p>Not certain if this is a bug in Qubes, Whonix, or Debian, but figured I’d ask here first.</p>
</blockquote>
</aside>
<p>Yeah, this is really hard in this case to figure out.</p>
<ul>
<li>
<p>Qubes bug -&gt; yes -&gt; because that same issue would happen in a Qubes Debian template</p>
</li>
<li>
<p>Thunderbird (at least in Debian stretch) as per Debian default is now shipping its own AppArmor profile, which does now allow access to /usr/bin/qubes-gpg-client-wrapper</p>
</li>
<li>
<p>Could therefore also be a Debian bug and ideally fixed in Debian?</p>
</li>
<li>
<p>Or Qubes could offer the <a href="https://github.com/Whonix/apparmor-profile-icedove">https://github.com/Whonix/apparmor-profile-icedove</a> package.</p>
</li>
<li>
<p>Whonix bug -&gt; yes, as well -&gt; Since Whonix offers <a href="https://github.com/Whonix/apparmor-profile-icedove">https://github.com/Whonix/apparmor-profile-icedove</a> which will be only fixed in Whonix 14 (or in Whonix 13 only through manual package upgrade / manually getting the new profile).</p>
</li>
</ul>
          <p><a href="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/2</link>
        <pubDate>Sat, 22 Apr 2017 14:35:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3796-2</guid>
        <source url="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796.rss">Thunderbird/Enigmail denied executing Split-GPG</source>
      </item>
      <item>
        <title>Thunderbird/Enigmail denied executing Split-GPG</title>
        <dc:creator><![CDATA[hccampbell]]></dc:creator>
        <description><![CDATA[
            <p>I’m currently getting an AppArmor error like this whenever I view a message in Thunderbird:</p>
<blockquote>
<p>Apr 22 13:34:51 host kernel: [ 2477.096917] audit: type=1400 audit(1492868091.674:16): apparmor=“DENIED” operation=“exec” profile=“thunderbird” name="/usr/bin/qubes-gpg-client-wrapper" pid=2846 comm=“thunderbird” requested_mask=“x” denied_mask=“x” fsuid=1000 ouid=0</p>
</blockquote>
<p>This is accompanied by the following errors in Enigmail:</p>
<blockquote>
<p>Enigmail initialization failed.</p>
<p>You are using GnuPG version , which is not up to date anymore. Enigmail recommends GnuPG version 2.0 or newer; please upgrade your GnuPG installation, or Enigmail will not work.</p>
</blockquote>
<blockquote>
<p>Enigmail: Error in accessing Enigmail service</p>
<p>In order to use Enigmail, GnuPG is required. If you did not install GnuPG yet, the easiest way to do this is using the “Setup Wizard” button below.</p>
</blockquote>
<p>Enigmail is configured to use Qubes Split-GPG.  It appears that this error started occurring when Icedove was renamed to Thunderbird in Debian.</p>
<p>Not certain if this is a bug in Qubes, Whonix, or Debian, but figured I’d ask here first.</p>
          <p><a href="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796/1</link>
        <pubDate>Sat, 22 Apr 2017 13:52:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-3796-1</guid>
        <source url="http://forums.whonix.org/t/thunderbird-enigmail-denied-executing-split-gpg/3796.rss">Thunderbird/Enigmail denied executing Split-GPG</source>
      </item>
  </channel>
</rss>
