<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Onionshare doesnt connect to the Tor controller - Qubes-Whonix - Whonix Forum</title>
    <meta name="description" content="Expected behavior: 

change the OnionShare settings to Connect using control port, as per whonix wiki to make OnionShare work.
Test Tor Settings with following output: 
Congratulations, OnionShare can connect to the Tor &amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="8452.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Onionshare doesnt connect to the Tor controller&#39;" href="8452.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/onionshare-doesnt-connect-to-the-tor-controller/8452" />
<meta name="twitter:url" content="https://forums.whonix.org/t/onionshare-doesnt-connect-to-the-tor-controller/8452" />
<meta property="og:title" content="Onionshare doesnt connect to the Tor controller" />
<meta name="twitter:title" content="Onionshare doesnt connect to the Tor controller" />
<meta property="og:description" content="Expected behavior:   change the OnionShare settings to Connect using control port, as per whonix wiki to make OnionShare work. Test Tor Settings with following output:  Congratulations, OnionShare can connect to the Tor controller.  Tor version: 0.4.1.5  Supports ephemeral onion services: True  Supports stealth onion services: True  Save Add file to be shared and start sharing  Current behavior:   change the OnionShare settings to Connect using control port, as per whonix wiki to make OnionShare..." />
<meta name="twitter:description" content="Expected behavior:   change the OnionShare settings to Connect using control port, as per whonix wiki to make OnionShare work. Test Tor Settings with following output:  Congratulations, OnionShare can connect to the Tor controller.  Tor version: 0.4.1.5  Supports ephemeral onion services: True  Supports stealth onion services: True  Save Add file to be shared and start sharing  Current behavior:   change the OnionShare settings to Connect using control port, as per whonix wiki to make OnionShare..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ❤" />
<meta property="article:published_time" content="2019-11-05T17:58:56+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="8452.html">Onionshare doesnt connect to the Tor controller</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/qubes-whonix/12.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #63a0ff'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Qubes-Whonix</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/akula'><span itemprop='name'>akula</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8452.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-05T17:58:56Z' class='post-time'>
                November 5, 2019,  5:58pm
              </time>
              <meta itemprop='dateModified' content='2019-11-05T17:58:56Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><strong>Expected behavior:</strong></p>
<ol>
<li>change the OnionShare settings to Connect using control port, as per whonix wiki to make OnionShare work.</li>
<li>Test Tor Settings with following output:<br>
Congratulations, OnionShare can connect to the Tor controller.<br>
Tor version: 0.4.1.5<br>
Supports ephemeral onion services: True<br>
Supports stealth onion services: <strong>True</strong>
</li>
<li>Save</li>
<li>Add file to be shared and start sharing</li>
</ol>
<p><strong>Current behavior:</strong></p>
<ol>
<li>change the OnionShare settings to Connect using control port, as per whonix wiki to make OnionShare work.</li>
<li>Test Tor Settings with following output:<br>
Congratulations, OnionShare can connect to the Tor controller.<br>
Tor version: 0.4.1.5<br>
Supports ephemeral onion services: True<br>
Supports stealth onion services: <strong>False</strong>
</li>
<li>Save</li>
<li>Add file to be shared and start sharing -&gt; pops up following message:<br>
<strong>Error talking to the Tor controller.</strong><br>
<strong>If you’re using Whonix, check out whonix wiki (link) to make OnionShare work.</strong>
</li>
</ol>
<p>OnionShare is currently impossible to use. I am using latest Qubes, fully updated.</p>
        </div>

        <meta itemprop='headline' content='Onionshare doesnt connect to the Tor controller'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8452.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-06T02:36:43Z' class='post-time'>
                November 6, 2019,  2:36am
              </time>
              <meta itemprop='dateModified' content='2019-11-06T02:36:43Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Version of OnionShare in Debian buster (Whonix is based on <code>buster</code>) is quite old.</p>
<blockquote>
<p>1.3.2</p>
</blockquote>
<p><a href="../../../external.html?link=https://packages.debian.org/buster/onionshare" class="onebox" target="_blank">https://packages.debian.org/buster/onionshare</a></p>
<p>Guess: Installation of a newer version of OnionShare might fix this.</p>
<p>Possibility: <a href="../../../external.html?link=https://github.com/Whonix/onion-grater/blob/master/usr/share/doc/onion-grater-merger/examples/40_onionshare.yml">OnionShare’s onion-grater profile</a> lacks whitelisting of some Tor control protocol commands required for stealth onion services. It’s been a some time since I tested these last time.</p>
<p>To debug:<br>
Watch onion-grater’s log on Whonix-Gateway ™ while using it.</p>
<pre><code>sudo journalctl -f -u onion-grater
</code></pre>
<p>Related:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/OnionShare" target="_blank" title="04:10PM - 05 November 2019">Whonix – 5 Nov 19</a>
  </header>
  <article class="onebox-body">
    <img src="../../../external.html?link=https://www.whonix.org/w/images/d/de/Onionshare_logo.png" class="thumbnail onebox-avatar" width="60" height="60">

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/OnionShare" target="_blank">OnionShare</a></h3>

<p>Using OnionShare in Whonix ™.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>//cc <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/mig5">@mig5</a></p>
        </div>

        <meta itemprop='headline' content='Onionshare doesnt connect to the Tor controller'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/AnonymousUser'><span itemprop='name'>AnonymousUser</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8452.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-07-05T07:15:52Z' class='post-time'>
                July 5, 2020,  7:15am
              </time>
              <meta itemprop='dateModified' content='2020-07-05T07:15:52Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Just tried OnionShare in latest Workstation, can anyone else confirm it simply doesn’t work? It doesn’t for me. Would be awesome if it can work by default in Whonix.</p>
<p>I first get a pop-up:</p>
<p>"Command filtered</p>
<p>Try adjusting how OnionShare connects to the Tor network in Settings."</p>
<p>Then if I try to use it it just quits / crashes.</p>
        </div>

        <meta itemprop='headline' content='Onionshare doesnt connect to the Tor controller'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8452.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-07-05T11:54:23Z' class='post-time'>
                July 5, 2020, 11:54am
              </time>
              <meta itemprop='dateModified' content='2020-07-05T11:54:23Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="AnonymousUser" data-post="3" data-topic="8452">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>Would be awesome if it can work by default in Whonix.</p>
</blockquote>
</aside>
<p>That would require deciding to allow default partial whitelisted Tor control protocol access for commands required to create onion services through Tor control protocol. Would lower security for everyone by default who does not use applications that require Tor control protocol access for commands required to create onion service.</p>
<aside class="quote no-group" data-username="AnonymousUser" data-post="3" data-topic="8452">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>"Command filtered</p>
</blockquote>
</aside>
<p>Need to follow instructions <a href="../../../external.html?link=https://www.whonix.org/wiki/OnionShare">https://www.whonix.org/wiki/OnionShare</a></p>
        </div>

        <meta itemprop='headline' content='Onionshare doesnt connect to the Tor controller'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
