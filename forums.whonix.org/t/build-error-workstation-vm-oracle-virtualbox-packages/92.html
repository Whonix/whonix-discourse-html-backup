<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Build error Workstation VM - Oracle Virtualbox packages - Support - Whonix Forum</title>
    <meta name="description" content="hi, 

I&amp;#39;m unfortunately running into the next build error [:frowning:] This time while building the Workstation VM:  

 Setting up virtualbox (4.1.18-dfsg-2+deb7u1) ...
insserv: script virtualbox: service vboxdrv already&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="92.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Build error Workstation VM - Oracle Virtualbox packages&#39;" href="92.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/build-error-workstation-vm-oracle-virtualbox-packages/92" />
<meta name="twitter:url" content="https://forums.whonix.org/t/build-error-workstation-vm-oracle-virtualbox-packages/92" />
<meta property="og:title" content="Build error Workstation VM - Oracle Virtualbox packages" />
<meta name="twitter:title" content="Build error Workstation VM - Oracle Virtualbox packages" />
<meta property="og:description" content="hi,  I‚Äôm unfortunately running into the next build error üôÅ This time while building the Workstation VM:  [code]Setting up virtualbox (4.1.18-dfsg-2+deb7u1) ‚Ä¶  insserv: script virtualbox: service vboxdrv already provided!  insserv: exiting now!  update-rc.d: error: insserv rejected the script header  dpkg: error processing virtualbox (‚Äìconfigure):  subprocess installed post-installation script returned error exit status 1  dpkg: dependency problems prevent configuration of virtualbox-dkm..." />
<meta name="twitter:description" content="hi,  I‚Äôm unfortunately running into the next build error üôÅ This time while building the Workstation VM:  [code]Setting up virtualbox (4.1.18-dfsg-2+deb7u1) ‚Ä¶  insserv: script virtualbox: service vboxdrv already provided!  insserv: exiting now!  update-rc.d: error: insserv rejected the script header  dpkg: error processing virtualbox (‚Äìconfigure):  subprocess installed post-installation script returned error exit status 1  dpkg: dependency problems prevent configuration of virtualbox-dkm..." />
<meta property="article:published_time" content="2014-02-23T03:14:46+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="92.html">Build error Workstation VM - Oracle Virtualbox packages</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/support/5.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #8C6238'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Support</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Cerberus'><span itemprop='name'>Cerberus</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="92.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-02-23T03:14:46Z' class='post-time'>
                February 23, 2014,  3:14am
              </time>
              <meta itemprop='dateModified' content='2014-02-23T03:14:46Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>hi,</p>
<p>I‚Äôm unfortunately running into the next build error <img src="../../images/emoji/twitter/frowningae52.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"> This time while building the Workstation VM:</p>
<p>[code]Setting up virtualbox (4.1.18-dfsg-2+deb7u1) ‚Ä¶<br>
insserv: script virtualbox: service vboxdrv already provided!<br>
insserv: exiting now!<br>
update-rc.d: error: insserv rejected the script header<br>
dpkg: error processing virtualbox (‚Äìconfigure):<br>
subprocess installed post-installation script returned error exit status 1<br>
dpkg: dependency problems prevent configuration of virtualbox-dkms:<br>
virtualbox-dkms depends on virtualbox (&gt;= 4.1.18-dfsg-2+deb7u1); however:<br>
Package virtualbox is not configured yet.</p>
<p>dpkg: error processing virtualbox-dkms (‚Äìconfigure):<br>
dependency problems - leaving unconfigured<br>
dpkg: dependency problems prevent configuration of virtualbox-qt:<br>
virtualbox-qt depends on virtualbox (= 4.1.18-dfsg-2+deb7u1); however:<br>
Package virtualbox is not configured yet.</p>
<p>dpkg: error processing virtualbox-qt (‚Äìconfigure):<br>
dependency problems - leaving unconfigured<br>
Errors were encountered while processing:<br>
virtualbox<br>
virtualbox-dkms<br>
virtualbox-qt<br>
E: Sub-process /usr/bin/dpkg returned an error code (1)<br>
++ error_handler_general<br>
++ error_handler_shared<br>
++ last_exit_code=100<br>
++ last_bash_command=‚Äòapt-get $apt_timeout_opts $apt_unattended_opts --yes install virtualbox‚Äô<br>
++ ‚Äò[‚Äô test -o xtrace = 0 ‚Äò]‚Äô<br>
++ set +x<br>
ERROR in ./build-steps.d/1100_prepare-build-machine detected!<br>
Please have a look above ‚Äúerror_handler_general‚Äù, note the command that failed, its output and last_exit_code.</p>
<ul>
<li>Please enter c and press enter to continue. (Recommended against!)</li>
<li>Please press enter to cleanup and exit. +++ caller<br>
++ last_caller=‚Äò96 pre‚Äô<br>
++ last_script=./build-steps.d/1100_prepare-build-machine<br>
++ rm --force /etc/apt/sources.list.d/whonix_temp.list<br>
++ rm --force /var/run/whonix/package_manager_lock<br>
++ error_handler_exit<br>
++ ‚Äò[‚Äô false = true ‚Äò]‚Äô<br>
++ abort_or_continue=Aborted<br>
++ true ‚Äò<br>
############################################################<br>
ERROR in ./build-steps.d/1100_prepare-build-machine detected! Aborted!<br>
(benchmark: 00:17:16)<br>
BASH_COMMAND: apt-get $apt_timeout_opts $apt_unattended_opts --yes install virtualbox<br>
last_exit_code: 100<br>
caller: 96 pre<br>
ERROR in ./build-steps.d/1100_prepare-build-machine! Aborted!<br>
############################################################<br>
‚Äô<br>
++ ‚Äò[‚Äô false = true ‚Äò]‚Äô<br>
++ exit 1<br>
run-parts: ./build-steps.d/1100_prepare-build-machine exited with return code 1<br>
++ error_handler_build-machine<br>
+++ caller<br>
++ : echo ‚Äò<br>
BASH_COMMAND: run-parts --verbose --exit-on-error ./build-steps.d<br>
ERROR ./whonix_build: | caller: 45 ./whonix_build<br>
‚Äô<br>
++ exit 1[/code]<br>
That is to say, I installed Virtualbox-4.3 out of Oracle‚Äôs Repositories prior building the Workstation VM (considered this a good idea) and 1100_prepare-build-machine doesn‚Äôt seem to like that (at least that is my interpretation of the build error). Isn‚Äôt it possible to use Oracle‚Äôs packages instead of the Debian packages?</li>
</ul>
<p>Now, is it possible to clean the mess up. I.e. is there a way around a re-install of the Workstation Host to clean the system and start over?</p>
<p>Also: As a precaution, i.e. avoiding further build errors: I noticed that <a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/BuildDocumentation_8" rel="nofollow noopener">https://www.whonix.org/wiki/Dev/BuildDocumentation_8</a> lacks the step <a href="../../../external.html?link=https://www.whonix.org/wiki/Physical_Isolation#Install_Basic_Packages" rel="nofollow noopener">https://www.whonix.org/wiki/Physical_Isolation#Install_Basic_Packages</a> from the Physical Isolation build documentation. Is that intentional or is it a documentation mistake?</p>
<p>thanks!</p>
        </div>

        <meta itemprop='headline' content='Build error Workstation VM - Oracle Virtualbox packages'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="92.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-02-23T12:38:17Z' class='post-time'>
                February 23, 2014, 12:38pm
              </time>
              <meta itemprop='dateModified' content='2014-02-23T12:38:17Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>To create .ova‚Äôs ready made to be imported into VirtualBox, one needs VirtualBox to be installed. I call it a build dependency. (Not required for Physical Isolation builds, not installed then.)</p>
<p>Now as a developer I have two choices. I could tell you, you need this software to be installed and this and this and this and leave the task of installing to the builder. Most projects do that. (Try to build TrueCrypt on Windows. I found it ridiculously difficult finding all the build dependencies scattered all over the web.) A bit more convenient is to provide where you can find the packages to install and to provide which commands you‚Äôll need to run to accomplish setting them up.</p>
<blockquote>That is to say, I installed Virtualbox-4.3 out of Oracle's Repositories prior building the Workstation VM (considered this a good idea) and 1100_prepare-build-machine doesn't seem to like that (at least that is my interpretation of the build error). Isn't it possible to use Oracle's packages instead of the Debian packages?</blockquote>
In essence, the build script is only doing "sudo apt-get install virtualbox" (among other simple things) for you. The build script is kinda dumb. Doesn't know about Qracle repository, virtualbox versions, etc. The two different virtualbox packages seems to conflict. The same would happen if you manually installed the Oracle one and then run "sudo apt-get install virtualbox". So when you're installing virtualbox from elsewhere which then conflicts with Debian's package, installing virtualbox could be out commented from the 1100_prepare-build-machine script. Or we could add a "do not install virtualbox from Debian repository" build configuration option. (Or a command line switch, since these build configurations are probably still too difficult.)
<blockquote>Now, is it possible to clean the mess up. I.e. is there a way around a re-install of the Workstation Host to clean the system and start over?</blockquote>
I don't know. I never spend thought/test on that. I guess uninstalling the Oracle one should do. Or out removing virtualbox from the prepare build machine script.
<blockquote>Also: As a precaution, i.e. avoiding further build errors: I noticed that https://www.whonix.org/wiki/Dev/BuildDocumentation_8 lacks the step https://www.whonix.org/wiki/Physical_Isolation#Install_Basic_Packages from the Physical Isolation build documentation. Is that intentional or is it a documentation mistake?</blockquote>
This is intentional. (Not required for VM builds, 1300_create-debian-img [grml-debootstrap] does that for VM builds.)
        </div>

        <meta itemprop='headline' content='Build error Workstation VM - Oracle Virtualbox packages'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Cerberus'><span itemprop='name'>Cerberus</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="92.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-02T00:09:05Z' class='post-time'>
                March 2, 2014, 12:09am
              </time>
              <meta itemprop='dateModified' content='2014-03-02T00:09:05Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Suggestion: We could escape this by introducing a test to an existing VBox <em>binary</em> on the build system. I mean, other than VBox from Oracle I cannot imagine another third-party source that‚Äôs likely to be introduced prior building. In this very specific case it‚Äôs failing due to distinct naming of the packages.</p>
<p><code>if [VBox _binary_ absent]; then
sudo apt-get install ...
fi</code></p>
<p>What do you think? I‚Äôm currently away from my Whonix host but I wouldn‚Äôt wonder if both Oracle and Debian packages would result in the very same ‚Äúwhich VirtualBox‚Äù.</p>
        </div>

        <meta itemprop='headline' content='Build error Workstation VM - Oracle Virtualbox packages'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="92.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-02T03:00:47Z' class='post-time'>
                March 2, 2014,  3:00am
              </time>
              <meta itemprop='dateModified' content='2014-03-02T03:00:47Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The ‚Äúif‚Äù solution would be simple to implement. I would just check if ‚Äúcommand -v VBoxManage‚Äù exists 0. Since the script only uses ‚ÄúVBoxManage‚Äù and not ‚Äú/usr/bin/VBoxManage‚Äù the actual output of <code>command -v</code> or <code>which</code> doesn‚Äôt matter, is free to differ.</p>
<p>One thought I don‚Äôt like a lot is VBoxManage version numbers. While ‚Äúapt-get install virtualbox‚Äù is simple and gives us latest Debian virtualbox version (or fails closed), just checking if VBoxManage is available won‚Äôt check its version number. I am not sure what could happen, if the builder has an outdated version installed. Maybe installed it from oracle a while ago. Then forgot about it. Then removed the oracle repository. No updated version would get installed then. The build script could still fail if some VirtualBox command is used, that didn‚Äôt exist in that version.</p>
<p>Hence, also some code to check the actually installed VirtualBox version would be required?</p>
<p>Perhaps it‚Äôs also worth adding <code>vboxmanage --version</code> for debugging to the build script? Useful to have when someone sends a log.</p>
<p>Can you post the output of</p>
<pre><code class="lang-auto"></code></pre>
<p>please when you installed VirtualBox from oracle?</p>
<p>For Debian it‚Äôs.</p>
<blockquote>4.1.18-dfsg-2+deb7u1</blockquote>
<p>Eventually some version comparison has to be done.</p>
        </div>

        <meta itemprop='headline' content='Build error Workstation VM - Oracle Virtualbox packages'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Cerberus'><span itemprop='name'>Cerberus</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="92.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-04T23:43:10Z' class='post-time'>
                March 4, 2014, 11:43pm
              </time>
              <meta itemprop='dateModified' content='2014-03-04T23:43:10Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>One thought I don't like a lot is VBoxManage version numbers. While "apt-get install virtualbox" is simple and gives us latest Debian virtualbox version (or fails closed), just checking if VBoxManage is available won't check its version number. I am not sure what could happen, if the builder has an outdated version installed. Maybe installed it from oracle a while ago. Then forgot about it. Then removed the oracle repository. No updated version would get installed then. The build script could still fail if some VirtualBox command is used, that didn't exist in that version.</blockquote>
I agree with you here. I see two problems with the proposed approach though:
[code]echo "$(dpkg-query --show --showformat='${Version}' "virtualbox")"[/code]
(1) Utilizing this query, we hit the very same wall as before. That is to say, the Oracle package name is virtualbox-4.3, not virtualbox. What we could do is querying the whole dpkg database, grep this for a virtualbox wildcard and pipe just the first line of the result to the script.
<p>Let me explain quickly: As I understand the dpkg-query manpage, it doesn‚Äôt support regex/wildcard queries without utilizing grep/awk/sed. Let‚Äôs consider a user that has the Debian Vbox installed (3 packages), our custom query would result in a 3 line output - from which we take the first line. Good thing here is, that according to <a href="../../../external.html?link=https://packages.debian.org/search?suite=wheezy&amp;searchon=names&amp;keywords=virtualbox" rel="nofollow noopener">https://packages.debian.org/search?suite=wheezy&amp;searchon=names&amp;keywords=virtualbox</a> all Vbox Debian packages have the very same version number and whatever one of the three lines of our query we pipe as the first (and only) line to the script, would provide us with correct information. If it‚Äôs Oracle, there would be just one package version - we‚Äôre fine (if we decide upon this route, I‚Äôm certainly going to provide you with the Oracle string, but see (2)).</p>
<p>(2) You inspired me to think out of the box with your above statement and here it comes: The user could even have installed Vbox from sources and now we‚Äôd be screwed with the dpkg-query approach.</p>
<p>So, here is my idea: What if we first would introduce a general check for the existence of the VirtualBox binary in $PATH. If there‚Äôs no result, we ‚Äúsudo apt-get install ‚Ä¶‚Äù from Debian as is. If there is a binary, we use dpkg-query as explained in (1). If there‚Äôs no result, we know that we‚Äôre dealing with a source install ‚Ä¶ we use ‚Äúvboxmanage --version‚Äù to keep it recognized?</p>
<p>I‚Äôm unfortunately still away from my Whonix box (otherwise I would have come back with the dpkg-query string already for Oracle - it is there, but only if you query for ‚Äúvirtualbox-4.3‚Äù, i.e. a classical ‚Äúhen and egg problem‚Äù or we use the proposed approach in (1) to solve it. I just briefly wanted to get back to you and share my ideas so far.</p>
<hr>
<p>Or, we don‚Äôt bother to deal with it at all anymore, tell the user briefly that he needs to comment the ‚Äúsudo apt-get install ‚Ä¶‚Äù if he‚Äôs using Vbox from other sources than Debian and we tell him the required minimum Vbox version, i.e. a documentation solution rather than a (maybe not 100% reliable) scripting solution. Both works for me. What do you think?</p>
        </div>

        <meta itemprop='headline' content='Build error Workstation VM - Oracle Virtualbox packages'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="92.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-05T18:32:44Z' class='post-time'>
                March 5, 2014,  6:32pm
              </time>
              <meta itemprop='dateModified' content='2014-03-05T18:32:44Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Out commenting stuff for a builder who is not a developer is unfortunately quite difficult (<a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/BuildDocumentation_8#Source_Code_Changes">https://www.whonix.org/wiki/Dev/BuildDocumentation_8#Source_Code_Changes</a>). I mean, building Whonix is probably easier than building similarly sized projects, but changes to the code‚Ä¶ Since git is used to create a Debian upstream tarball (from which Whonix Debian Packages) are created. Even if that was done another way, such as in future when Whonix gets split into multiple packages, without understanding how git works, changing git based source is difficult anyway. If one changed a file, she can‚Äôt later easily pull updates from the original git repository. (However, with basic git knowledge it‚Äôs simple.)</p>
<p>[Well, one could out comment that line, then reset the code, then manually do the build steps, but that would require lots of explanation as well. So that wouldn‚Äôt look like a great way either.]</p>
<p>Probing VirtualBox version look like a rabbit hole. What about people who installed faketime from source code? Then we add such a detection code for all software that could be installed from other sources? It would require lots of code, just for this. This code adds complexity. (This complexity doesn‚Äôt endanger security, but the readability of the code and makes the build script more likely to break.) However, if I get a patch for this, I reconsider.</p>
<p>I think a simple solution for this use case could be a build configuration ‚Äúwhonix_build_skip_virtualbox_install‚Äù and when set to ‚Äútrue‚Äù it skips ‚Äúapt-get install virtualbox‚Äù? Or perhaps a more generic attempt similar to whonix_build_script_whonix_package (which was implemented in 1700_install-meta-packages to support skipping installation of the -kde packages)?</p>
        </div>

        <meta itemprop='headline' content='Build error Workstation VM - Oracle Virtualbox packages'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
