<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Question about unconfined App Armor profiles &amp; processes &amp; complain mode</title>
    <link>http://forums.whonix.org/t/question-about-unconfined-app-armor-profiles-processes-complain-mode/14697</link>
    <description>First of all I love Whonix. Thank you for your efforts! I&#39;ve had some odd occurrences with my sys-whonix (I&#39;m on latest Qubes) that i&#39;ll describe after my specific question.

When I check the apparmor status I get this: Is it expected to have this many profiles &amp; processes in complain mode?

apparmor module is loaded.
44 profiles are loaded.
26 profiles are in enforce mode.
   /**/*-browser/Browser/firefox
   /usr/bin/hexchat
   /usr/bin/man
   /usr/bin/onioncircuits
   /usr/bin/pidgin
   /usr/bin/pidgin//sanitized_helper
   /usr/bin/sdwdate
   /usr/bin/systemcheck
   /usr/bin/timesanitycheck
   /usr/bin/tor-circuit-established-check
   /usr/bin/totem
   /usr/bin/totem-audio-preview
   /usr/bin/totem-video-thumbnailer
   /usr/bin/totem//sanitized_helper
   /usr/bin/url_to_unixtime
   /usr/lib/onion-grater
   /usr/libexec/systemcheck/canary
   /usr/sbin/haveged
   apt-cacher-ng
   bootclockrandomization
   lsb_release
   man_filter
   man_groff
   nvidia_modprobe
   nvidia_modprobe//kmod
   system_tor
18 profiles are in complain mode.
   /usr/bin/irssi
   /usr/bin/whonix_firewall
   /usr/libexec/whonix-firewall/**
   /usr/sbin/dnsmasq
   /usr/sbin/dnsmasq//libvirt_leaseshelper
   avahi-daemon
   identd
   klogd
   mdnsd
   nmbd
   nscd
   ping
   smbd
   smbldap-useradd
   smbldap-useradd///etc/init.d/nscd
   syslog-ng
   syslogd
   traceroute
6 processes have profiles defined.
3 processes are in enforce mode.
   /usr/bin/python3.9 (843) /usr/lib/onion-grater
   /usr/sbin/haveged (511) 
   /usr/bin/tor (846) system_tor
3 processes are in complain mode.
   /usr/bin/bash (704) /usr/libexec/whonix-firewall/**
   /usr/bin/bash (723) /usr/libexec/whonix-firewall/**
   /usr/bin/inotifywait (724) /usr/libexec/whonix-firewall/**
0 processes are unconfined but have a profile defined.

When I run aa-unconfined I get:

815 /usr/bin/tinyproxy not confined
820 /usr/bin/tinyproxy not confined
821 /usr/bin/tinyproxy not confined
843 /usr/bin/python3.9 (/usr/bin/python3) confined by &#39;/usr/lib/onion-grater (enforce)&#39;
846 /usr/bin/tor confined by &#39;system_tor (enforce)&#39;
1210 /usr/bin/tinyproxy not confined
1279 /usr/bin/tinyproxy not confined
1337 /usr/bin/tinyproxy not confined
1391 /usr/bin/tinyproxy not confined
1409 /usr/bin/tinyproxy not confined


I understand the concept that complain mode is there so that profiles and processes can tell you they have violations without that necessarily killing them, and you can adjust and test from there, but is this expected?

To my nonspecific question:

When I launch my sys-whonix on startup and run a whonix DVM &amp; my KeepassXC vault (on whonix) I&#39;ve had sys-whonix crash randomly (yes, must be hacked then... :smile: ) and when it loads back up it no longer shows keepassxc in the list when I click on the whonix lock icon (offline vault, should it even be in there?). Sometimes a dispvm that is currently running will no longer appear despite it still running and saying it is on tor.

I also had an occurance where in a DISPVM downloads were going to a mozilla folder, not .tb/tor-browser/... and when I ran &#39;top&#39; I saw systemd-socket-. Does this strike you as just standard random bugs?

I&#39;m sorry if this is long winded or misguided, but I love whonix and I tried to google key search terms to find out, but I&#39;d love an explanation.

THANK YOU!!</description>
    <language>en</language>
    <lastBuildDate>Thu, 01 Sep 2022 12:46:17 +0000</lastBuildDate>
    <category>AppArmor</category>
    <atom:link href="http://forums.whonix.org/t/question-about-unconfined-app-armor-profiles-processes-complain-mode/14697.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Question about unconfined App Armor profiles &amp; processes &amp; complain mode</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Thank you!</p>
<aside class="quote no-group" data-username="Tenforthat" data-post="1" data-topic="14697">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/b5a626/40.png" class="avatar"> Tenforthat:</div>
<blockquote>
<p>I understand the concept that complain mode is there so that profiles and processes can tell you they have violations without that necessarily killing them, and you can adjust and test from there, but is this expected?</p>
</blockquote>
</aside>
<p>Expected.</p>
<p>Actually difficult to know for users. Either it’s in complain mode because the profile is considered unfinished or some other reason. Whonix firewall apparmor profiles makes little sense outside of completion of development of apparmor-profile-everything. In theory, a profile might be good enough and it’s an Kicksecure, Whonix or upstream bug that it’s not in enforce mode by default. Hard to tell without being a developer and researching these things in-depth.</p>
<aside class="quote no-group" data-username="Tenforthat" data-post="1" data-topic="14697">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/b5a626/40.png" class="avatar"> Tenforthat:</div>
<blockquote>
<p>To my nonspecific question:</p>
</blockquote>
</aside>
<p>Seems unrelated to AppArmor.<br>
1 question = 1 forum topic please.</p>
<aside class="quote no-group" data-username="Tenforthat" data-post="1" data-topic="14697">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/b5a626/40.png" class="avatar"> Tenforthat:</div>
<blockquote>
<p>and when I ran ‘top’ I saw systemd-socket-. Does this strike you as just standard random bugs?</p>
</blockquote>
</aside>
<p>systemd-socket-proxyd is expected (in Whonix source code and Whonix wiki).</p>
<aside class="quote no-group" data-username="Tenforthat" data-post="1" data-topic="14697">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/b5a626/40.png" class="avatar"> Tenforthat:</div>
<blockquote>
<p>I also had an occurance where in a DISPVM downloads were going to a mozilla folder, not .tb/tor-browser/…</p>
</blockquote>
</aside>
<p>Using Firefox or Tor Browser?<br>
Separate forum topic if you like to discuss this further please.</p>
<aside class="quote no-group" data-username="Tenforthat" data-post="1" data-topic="14697">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/b5a626/40.png" class="avatar"> Tenforthat:</div>
<blockquote>
<p>I’ve had sys-whonix crash randomly</p>
</blockquote>
</aside>
<p>Separate forum discussion or topic required here too.<br>
Depends on how you noticed the crash.<br>
Random crashes would belong to Qubes (as per <a href="https://forums.whonix.org/t/what-to-post-in-this-qubes-whonix-forum-and-what-not/2275" class="inline-onebox">What to post in this Qubes-Whonix forum and what not.</a>).</p>
<aside class="quote no-group" data-username="Tenforthat" data-post="1" data-topic="14697">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/b5a626/40.png" class="avatar"> Tenforthat:</div>
<blockquote>
<p>and when it loads back up it no longer shows keepassxc in the list when I click on the whonix lock icon (offline vault, should it even be in there?). Sometimes a dispvm that is currently running will no longer appear despite it still running and saying it is on tor.</p>
</blockquote>
</aside>
<p>Related to sdwdate-gui. This would require a separate forum topic and detailed instructions how to reproduce this issue so I can potentially reproduce and fix it.</p>
          <p><a href="http://forums.whonix.org/t/question-about-unconfined-app-armor-profiles-processes-complain-mode/14697/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/question-about-unconfined-app-armor-profiles-processes-complain-mode/14697/2</link>
        <pubDate>Thu, 01 Sep 2022 12:46:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14697-2</guid>
        <source url="http://forums.whonix.org/t/question-about-unconfined-app-armor-profiles-processes-complain-mode/14697.rss">Question about unconfined App Armor profiles &amp; processes &amp; complain mode</source>
      </item>
      <item>
        <title>Question about unconfined App Armor profiles &amp; processes &amp; complain mode</title>
        <dc:creator><![CDATA[Tenforthat]]></dc:creator>
        <description><![CDATA[
            <p>First of all I love Whonix. Thank you for your efforts! I’ve had some odd occurrences with my sys-whonix (I’m on latest Qubes) that i’ll describe after my specific question.</p>
<p>When I check the apparmor status I get this: Is it expected to have this many profiles &amp; processes in complain mode?</p>
<p>apparmor module is loaded.<br>
44 profiles are loaded.<br>
26 profiles are in enforce mode.<br>
/<strong>/*-browser/Browser/firefox<br>
/usr/bin/hexchat<br>
/usr/bin/man<br>
/usr/bin/onioncircuits<br>
/usr/bin/pidgin<br>
/usr/bin/pidgin//sanitized_helper<br>
/usr/bin/sdwdate<br>
/usr/bin/systemcheck<br>
/usr/bin/timesanitycheck<br>
/usr/bin/tor-circuit-established-check<br>
/usr/bin/totem<br>
/usr/bin/totem-audio-preview<br>
/usr/bin/totem-video-thumbnailer<br>
/usr/bin/totem//sanitized_helper<br>
/usr/bin/url_to_unixtime<br>
/usr/lib/onion-grater<br>
/usr/libexec/systemcheck/canary<br>
/usr/sbin/haveged<br>
apt-cacher-ng<br>
bootclockrandomization<br>
lsb_release<br>
man_filter<br>
man_groff<br>
nvidia_modprobe<br>
nvidia_modprobe//kmod<br>
system_tor<br>
18 profiles are in complain mode.<br>
/usr/bin/irssi<br>
/usr/bin/whonix_firewall<br>
/usr/libexec/whonix-firewall/</strong><br>
/usr/sbin/dnsmasq<br>
/usr/sbin/dnsmasq//libvirt_leaseshelper<br>
avahi-daemon<br>
identd<br>
klogd<br>
mdnsd<br>
nmbd<br>
nscd<br>
ping<br>
smbd<br>
smbldap-useradd<br>
smbldap-useradd///etc/init.d/nscd<br>
syslog-ng<br>
syslogd<br>
traceroute<br>
6 processes have profiles defined.<br>
3 processes are in enforce mode.<br>
/usr/bin/python3.9 (843) /usr/lib/onion-grater<br>
/usr/sbin/haveged (511)<br>
/usr/bin/tor (846) system_tor<br>
3 processes are in complain mode.<br>
/usr/bin/bash (704) /usr/libexec/whonix-firewall/**<br>
/usr/bin/bash (723) /usr/libexec/whonix-firewall/**<br>
/usr/bin/inotifywait (724) /usr/libexec/whonix-firewall/**<br>
0 processes are unconfined but have a profile defined.</p>
<p>When I run aa-unconfined I get:</p>
<p>815 /usr/bin/tinyproxy not confined<br>
820 /usr/bin/tinyproxy not confined<br>
821 /usr/bin/tinyproxy not confined<br>
843 /usr/bin/python3.9 (/usr/bin/python3) confined by ‘/usr/lib/onion-grater (enforce)’<br>
846 /usr/bin/tor confined by ‘system_tor (enforce)’<br>
1210 /usr/bin/tinyproxy not confined<br>
1279 /usr/bin/tinyproxy not confined<br>
1337 /usr/bin/tinyproxy not confined<br>
1391 /usr/bin/tinyproxy not confined<br>
1409 /usr/bin/tinyproxy not confined</p>
<p>I understand the concept that complain mode is there so that profiles and processes can tell you they have violations without that necessarily killing them, and you can adjust and test from there, but is this expected?</p>
<p>To my nonspecific question:</p>
<p>When I launch my sys-whonix on startup and run a whonix DVM &amp; my KeepassXC vault (on whonix) I’ve had sys-whonix crash randomly (yes, must be hacked then… <img src="//forums.whonix.org/images/emoji/twitter/smile.png?v=12" title=":smile:" class="emoji" alt=":smile:"> ) and when it loads back up it no longer shows keepassxc in the list when I click on the whonix lock icon (offline vault, should it even be in there?). Sometimes a dispvm that is currently running will no longer appear despite it still running and saying it is on tor.</p>
<p>I also had an occurance where in a DISPVM downloads were going to a mozilla folder, not .tb/tor-browser/… and when I ran ‘top’ I saw systemd-socket-. Does this strike you as just standard random bugs?</p>
<p>I’m sorry if this is long winded or misguided, but I love whonix and I tried to google key search terms to find out, but I’d love an explanation.</p>
<p>THANK YOU!!</p>
          <p><a href="http://forums.whonix.org/t/question-about-unconfined-app-armor-profiles-processes-complain-mode/14697/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/question-about-unconfined-app-armor-profiles-processes-complain-mode/14697/1</link>
        <pubDate>Wed, 31 Aug 2022 10:35:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14697-1</guid>
        <source url="http://forums.whonix.org/t/question-about-unconfined-app-armor-profiles-processes-complain-mode/14697.rss">Question about unconfined App Armor profiles &amp; processes &amp; complain mode</source>
      </item>
  </channel>
</rss>
