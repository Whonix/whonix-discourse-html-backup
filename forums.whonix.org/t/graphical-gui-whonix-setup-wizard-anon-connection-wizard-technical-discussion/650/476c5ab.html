<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion - #476 by Patrick - Development - Whonix Forum</title>
    <meta name="description" content="In whonixsetup disclaimer, do we have to give the German version? I remember reading somewhere that there was some legal issue. 

Edit by Patrick: Changed title.">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../6501d82.html?page=24" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion&#39;" href="../650.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/graphical-gui-whonix-setup-wizard-anon-connection-wizard-technical-discussion/650/476?u=patrick" />
<meta name="twitter:url" content="https://forums.whonix.org/t/graphical-gui-whonix-setup-wizard-anon-connection-wizard-technical-discussion/650/476?u=patrick" />
<meta property="og:title" content="[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion" />
<meta name="twitter:title" content="[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion" />
<meta property="og:description" content="iry:   I did some testing and I think I have some findings now.   To get a clearer picture, may I suggest to grep all of Whonix source code.  grep --exclude=README.md --exclude=GPLv2 --exclude=GPLv3 --exclude=COPYING --exclude=changelog.upstream-old1 --exclude-dir=mnt --exclude-dir=qubes-src/linux-template-builder/mnt --exclude=changelog.upstream --exclude-dir=.git --exclude-dir=chroot-debian --exclude-dir=chroot-jessie -r -i DisableNetwork  (The exclusion part grep --exclude=README.md --exclude..." />
<meta name="twitter:description" content="iry:   I did some testing and I think I have some findings now.   To get a clearer picture, may I suggest to grep all of Whonix source code.  grep --exclude=README.md --exclude=GPLv2 --exclude=GPLv3 --exclude=COPYING --exclude=changelog.upstream-old1 --exclude-dir=mnt --exclude-dir=qubes-src/linux-template-builder/mnt --exclude=changelog.upstream --exclude-dir=.git --exclude-dir=chroot-debian --exclude-dir=chroot-jessie -r -i DisableNetwork  (The exclusion part grep --exclude=README.md --exclude..." />
<meta property="article:published_time" content="2018-01-17T13:01:00+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="../65089ae.html?page=23">
        <link rel="next" href="../6508c06.html?page=25">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../650.html">[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-16T15:36:00Z' class='post-time'>
                January 16, 2018,  3:36pm
              </time>
              <meta itemprop='dateModified' content='2018-01-16T15:36:00Z'>
          <span itemprop='position'>#471</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Patrick Schleizer:</p>
<blockquote>
<aside class="quote" data-post="465" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>Would you please share your approach to intentionally make Tor does not work so that we can test those unusual case?</p>
</blockquote>
</aside>
<p>Just write garbage to /etc/tor/torrc or better any torrc.d file.</p>
</blockquote>
<p>Thank you for your suggestion!</p>
<blockquote>
<aside class="quote" data-post="466" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>We actually advertise in several place that user configurations should go to 50_user.torrc.</p>
</blockquote>
</aside>
<p>We mention it, yes.</p>
<aside class="quote" data-post="466" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>Therefore, do you think it will be a good idea to ship an empty 50_user.torrc file? Or maybe even have some comments telling user “Yes, this is the file you should use for your configuration.”</p>
</blockquote>
</aside>
<p>Makes a lot sense. I however wonder how to update any comment in future should that be required. Creation of the file if none exists should be alright with comments only.</p>
</blockquote>
<p>Great! For updating the comments in the file, can we update it with the<br>
upgrade of its package? I can commit a<br>
<code>/usr/local/etc/torrc.d/50_user.torrc</code> file. Is there anything else I<br>
can do?</p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-16T19:47:00Z' class='post-time'>
                January 16, 2018,  7:47pm
              </time>
              <meta itemprop='dateModified' content='2018-01-16T19:47:00Z'>
          <span itemprop='position'>#472</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>iry:</p>
<blockquote>
<p>Patrick Schleizer:</p>
<blockquote>
<aside class="quote" data-post="467" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>My only concern is a user who ask for some torrc settings online, and someone provides a solution with “DisableNetwork 0” with it.Then, the users happily copy it into 50_user.torrc. From then on, anon-connection-wizard will not control the disable or enable of Tor any more since anon-connection-wizard writes to 40_.torrc which has lower priority than 50_.torrc.</p>
</blockquote>
</aside>
<p>That’s a very valid concern. In these cases, anon-connection-wizard should detect the situation and report it. We might even break the separation, with an additional gui confirmation question?</p>
</blockquote>
<p>When user press the connect or disable button in anon-connection-wizard,<br>
I think anon-connection-wizard has already got the users’ consent that<br>
they REALLY want to enable or disable Tor. Therefore, I guess we may<br>
break the separation without an additional GUI confirmation?</p>
</blockquote>
<p>Yes.</p>
<blockquote>
<blockquote>
<p>The problem is, as far as I know, there is no comparable situation. Or do you know any applications where there are external configuration file generators and <code>.d</code> folders?</p>
</blockquote>
<p>I do not know any configuration files like that yet. I would like to ask<br>
how Tails is going to use torrc.d.</p>
</blockquote>
<p>Ok.</p>
<blockquote>
<blockquote>
<aside class="quote" data-post="467" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>Do you mean anon-connection_wizard should parse all the torrc files like what the real Tor does and then give users a warning saying “DisableNetwork 0 is detected in torrc files which have higher priority than anon-connection-wizard, thus, anon-connection-wizard cannot decide the enable or disable of Tor”? Do I understand it correctly?</p>
</blockquote>
</aside>
<p>Yes.</p>
</blockquote>
<p>This will be a good solution, but reimplementing include line paring in<br>
anon-connection-wizard may be too much work for anon-connection-wizard?<br>
(not too much work for developer as long as it is something worth<br>
implementing.)</p>
</blockquote>
<p>%include parsing is cool but also low priority since very advanced users<br>
would do that only.</p>
<p>Also difficult and low priority: Qubes vs persistence. Standalone VM vs<br>
TemplateBasedVM vs bind-dirs. Like most users would have /etc/tor/torrc<br>
persistent in sys-whonix while /etc/torrc.d is non-persistent while<br>
/usr/local/etc/torrc.d is persistent. Therefore changing DisableNetwork<br>
0/1 in /etc/torrc.d would also be confusing. Not sure<br>
anon-connection-wizard should deal Qubes persistence anyhow.</p>
<blockquote>
<blockquote>
<p>From a usability point of view: the tool should understand all configs fully and do what the user demands. Unless there is some really special file (starting from certain numbers perhaps?) which really should be ignored by user request?</p>
</blockquote>
<p>Yes! This is exactly what I am thinking.</p>
<p>anon-connection-wizard will edit 40_anon_connection_wizard.torrc freely<br>
and also 50_user.torrc just for the “DisableNetwork 0” line. This is<br>
fair and reasonable enough considering it is the user who press that<br>
enable and disable button. anon-connection-wizard is just taking care of<br>
what users wants.</p>
</blockquote>
<p>40_anon_connection_wizard.torrc and 50_user.torrc only seems confusing<br>
and inconsistent. Do you think you could handle DisableNetwork 0/1 in<br>
all Tor config files /etc/tor/torrc /etc/torrc.d /usr/local/etc/torrc.d?<br>
Do you think this is doable/realistic for Whonix 14?</p>
<p>Perhaps except for files containing <code>readonly</code>? Skipped for now. (And<br>
later during anon-connection-development development reported only?)</p>
<blockquote>
<p>Or anon-connection-wizard can just use “DisableNetwork 0” in<br>
40_anon_connection_wizard.torrc and it is users’ responsibility not to<br>
include “DisableNetwork 0” in any other torrc files. But this may be too<br>
advanced for users.</p>
</blockquote>
<p>This goes back to your argument “what if the user copied/pasted from the<br>
internet”. But also this would be good enough for Whonix 14.</p>
<blockquote>
<blockquote>
<p>Any other application that does this or anyone external who could advise?</p>
</blockquote>
<p>Do you have any suggestion? I can definitely ask the question. <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</blockquote>
<p>No suggestion. Just wondering.</p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-16T19:51:00Z' class='post-time'>
                January 16, 2018,  7:51pm
              </time>
              <meta itemprop='dateModified' content='2018-01-16T19:51:00Z'>
          <span itemprop='position'>#473</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>iry:</p>
<blockquote>
<p>Patrick Schleizer:</p>
<blockquote>
<aside class="quote" data-post="465" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>Would you please share your approach to intentionally make Tor does not work so that we can test those unusual case?</p>
</blockquote>
</aside>
<p>Just write garbage to /etc/tor/torrc or better any torrc.d file.</p>
</blockquote>
<p>Thank you for your suggestion!</p>
<blockquote>
<aside class="quote" data-post="466" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>We actually advertise in several place that user configurations should go to 50_user.torrc.</p>
</blockquote>
</aside>
<p>We mention it, yes.</p>
<aside class="quote" data-post="466" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>Therefore, do you think it will be a good idea to ship an empty 50_user.torrc file? Or maybe even have some comments telling user “Yes, this is the file you should use for your configuration.”</p>
</blockquote>
</aside>
<p>Makes a lot sense. I however wonder how to update any comment in future should that be required. Creation of the file if none exists should be alright with comments only.</p>
</blockquote>
<p>Great! For updating the comments in the file, can we update it with the<br>
upgrade of its package? I can commit a<br>
<code>/usr/local/etc/torrc.d/50_user.torrc</code> file. Is there anything else I<br>
can do?</p>
</blockquote>
<p>Debian packages are forbidden to write to /usr/local.</p>
<p>Another issue with that would be: Once users edit that file we get an<br>
dpkg interactive conflict resolution dialog.</p>
<p>( <a href="../../../../external.html?link=https://www.whonix.org/wiki/Whonix_Configuration_Files#dpkg_interactive_conflict_resolution_dialog">https://www.whonix.org/wiki/Whonix_Configuration_Files#dpkg_interactive_conflict_resolution_dialog</a> )</p>
<p>That’s why <code>I wonder how to update any comment in future should that be required</code>. Something hard to solve. Also the reason why we want <code>.d</code> in<br>
the first place.</p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-16T23:42:00Z' class='post-time'>
                January 16, 2018, 11:42pm
              </time>
              <meta itemprop='dateModified' content='2018-01-16T23:42:00Z'>
          <span itemprop='position'>#474</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi Patrick!</p>
<p>I did some testing and I think I have some findings now.</p>
<p>First, the default value of DisableNetwork is 0.</p>
<p>As per: <a href="../../../../external.html?link=https://www.torproject.org/docs/tor-manual.html.en">https://www.torproject.org/docs/tor-manual.html.en</a></p>
<blockquote>
<p>DisableNetwork 0|1</p>
<p>When this option is set, we don’t listen for or accept any connections other than controller connections, and we close (and don’t reattempt) any outbound connections. Controllers sometimes use this option to avoid using the network until Tor is fully configured. (Default: 0)</p>
</blockquote>
<p>This means there is no different between <code>DisableNetwork 0</code> and<br>
<code>#DisableNetwork 0</code>.</p>
<p>Second, no matter the value of DisableNetwork is 0/1, when we want to<br>
disable Tor, we can always disable it successfully without any complain.</p>
<p>Third, the only problem is, when <code>DisableNetwork 1</code> is the final value<br>
which will be used by Tor, we will fail to start Tor (it totally makes<br>
sense) and cause a crash on anon-connection-wizard.</p>
<p>If all my findings above are correct, I propose to at least partly<br>
forget about the <code>DisableNetwork</code> in Whonix, including but not limited<br>
to <code>anon-connection-wizard</code> and <code>whonixsetup</code>.</p>
<p>Since <code>DisableNetwork 1</code> is not a value that is commonly found on the<br>
internet, we may assume whoever uses this line has full understanding on<br>
what it means. Thus, anon-connection-wizard does not take care of<br>
prefixing # to all the <code>DisableNetwork 1</code> lines.</p>
<p>Although <code>DisableNetwork 0</code> is default, anon-connection-wizard may still<br>
add <code>DisableNetwork 0</code> to <code>40_anon_connection_wizard.torrc</code> when Tor<br>
will be enabled. Why? Because it will let Tor work even there is a<br>
<code>DisableNetwork 1</code> in files which have lower priority than<br>
<code>40_anon_connection_wizard.torrc</code>.</p>
<p>How do you like this proposal, Patrick?</p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-16T23:49:00Z' class='post-time'>
                January 16, 2018, 11:49pm
              </time>
              <meta itemprop='dateModified' content='2018-01-17T00:09:35Z'>
          <span itemprop='position'>#475</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Patrick Schleizer:</p>
<blockquote>
<p>Debian packages are forbidden to write to /usr/local.</p>
<p>Another issue with that would be: Once users edit that file we get an<br>
dpkg interactive conflict resolution dialog.</p>
<p>( <a href="../../../../external.html?link=https://www.whonix.org/wiki/Whonix_Configuration_Files#dpkg_interactive_conflict_resolution_dialog">https://www.whonix.org/wiki/Whonix_Configuration_Files#dpkg_interactive_conflict_resolution_dialog</a> )</p>
<p>That’s why <code>I wonder how to update any comment in future should that be required</code>. Something hard to solve. Also the reason why we want <code>.d</code> in<br>
the first place.</p>
</blockquote>
<p>I see. Then how about not shipping the <code>50_user.torrc</code>?</p>
<p>And for better usability, we may use this comment in all the torrc:</p>
<pre><code>## Do not edit this file!
## Please create and then add modifications to the following file instead:
## /usr/local/etc/torrc.d/50_user.torrc</code></pre>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-17T13:01:00Z' class='post-time'>
                January 17, 2018,  1:01pm
              </time>
              <meta itemprop='dateModified' content='2018-01-17T13:01:00Z'>
          <span itemprop='position'>#476</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>iry:</p>
<blockquote>
<p>I did some testing and I think I have some findings now.</p>
</blockquote>
<p>To get a clearer picture, may I suggest to grep all of Whonix source code.</p>
<pre><code>grep --exclude=README.md --exclude=GPLv2 --exclude=GPLv3 --exclude=COPYING --exclude=changelog.upstream-old1 --exclude-dir=mnt --exclude-dir=qubes-src/linux-template-builder/mnt --exclude=changelog.upstream --exclude-dir=.git --exclude-dir=chroot-debian --exclude-dir=chroot-jessie -r -i DisableNetwork
</code></pre>
<p>(The exclusion part <code>grep --exclude=README.md --exclude=GPLv2 --exclude=GPLv3 --exclude=COPYING --exclude=changelog.upstream-old1 --exclude-dir=mnt --exclude-dir=qubes-src/linux-template-builder/mnt --exclude=changelog.upstream --exclude-dir=.git --exclude-dir=chroot-debian --exclude-dir=chroot-jessie</code> is better as a<br>
wrapper.)</p>
<p>Basically <code>grep -r -i DisableNetwork</code> while ignoring all the irrelevant files.</p>
<blockquote>
<p>First, the default value of DisableNetwork is 0.</p>
<p>As per: <a href="../../../../external.html?link=https://www.torproject.org/docs/tor-manual.html.en">https://www.torproject.org/docs/tor-manual.html.en</a></p>
</blockquote>
<p>It’s true but not in case of Whonix.</p>
<blockquote>
<blockquote>
<p>DisableNetwork 0|1</p>
<p>When this option is set, we don’t listen for or accept any connections other than controller connections, and we close (and don’t reattempt) any outbound connections. Controllers sometimes use this option to avoid using the network until Tor is fully configured. (Default: 0)</p>
</blockquote>
<p>This means there is no different between <code>DisableNetwork 0</code> and<br>
<code>#DisableNetwork 0</code>.</p>
</blockquote>
<p>Whonix default <code>DisableNetwork 0</code> in<br>
<code>/usr/share/tor/tor-service-defaults-torrc</code> makes the difference.</p>
<p><a href="../../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/e16ff107a49d75c776334164cb81ca22cc450c01/usr/share/tor/tor-service-defaults-torrc.anondist#L56-L63">https://github.com/Whonix/anon-gw-anonymizer-config/blob/e16ff107a49d75c776334164cb81ca22cc450c01/usr/share/tor/tor-service-defaults-torrc.anondist#L56-L63</a></p>
<blockquote>
<p>Second, no matter the value of DisableNetwork is 0/1, when we want to<br>
disable Tor, we can always disable it successfully without any complain.</p>
</blockquote>
<blockquote>
<p>Third, the only problem is, when <code>DisableNetwork 1</code> is the final value<br>
which will be used by Tor, we will fail to start Tor (it totally makes<br>
sense) and cause a crash on anon-connection-wizard.</p>
</blockquote>
<p><code>DisableNetwork 1</code> doesn’t crash Tor. By the description that you posted…</p>
<blockquote>
<blockquote>
<p>When this option is set, we don’t listen for or accept any<br>
connections other than controller connections, and we close (and don’t<br>
reattempt) any outbound connections. Controllers sometimes use this<br>
option to avoid using the network until Tor is fully configured.<br>
(Default: 0)</p>
</blockquote>
</blockquote>
<p>It doesn’t crash either. And if it did (which it doesn’t), then it would<br>
be a bug.</p>
<p>Perhaps double use of <code>DisableNetwork 1</code> in<br>
<code>/usr/share/tor/tor-service-defaults-torrc</code> as well as in a torrc.d file<br>
causes a crash?</p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../what-is-the-best-whonix-workflow/4718/2.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../what-is-the-best-whonix-workflow/4718/2.html'>
                      <span itemprop='name'>What is the best Whonix workflow</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-17T13:02:00Z' class='post-time'>
                January 17, 2018,  1:02pm
              </time>
              <meta itemprop='dateModified' content='2018-01-17T13:02:00Z'>
          <span itemprop='position'>#477</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>iry:</p>
<blockquote>
<p>Patrick Schleizer:</p>
<blockquote>
<p>Debian packages are forbidden to write to /usr/local.</p>
<p>Another issue with that would be: Once users edit that file we get an<br>
dpkg interactive conflict resolution dialog.</p>
<p>( <a href="../../../../external.html?link=https://www.whonix.org/wiki/Whonix_Configuration_Files#dpkg_interactive_conflict_resolution_dialog">https://www.whonix.org/wiki/Whonix_Configuration_Files#dpkg_interactive_conflict_resolution_dialog</a> )</p>
<p>That’s why <code>I wonder how to update any comment in future should that be required</code>. Something hard to solve. Also the reason why we want <code>.d</code> in<br>
the first place.</p>
</blockquote>
<p>I see. Then how about not shipping the <code>50_user.torrc</code>?</p>
<p>And for better usability, we may use this comment in all the torrc:</p>
<pre><code class="lang-auto">## Do not edit this file!
## Please create and then add modifications to the following file instead:
## /usr/local/etc/torrc.d/50_user.torrc
</code></pre>
</blockquote>
<p>Ok.</p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-18T00:23:28Z' class='post-time'>
                January 18, 2018, 12:23am
              </time>
              <meta itemprop='dateModified' content='2018-01-18T00:23:28Z'>
          <span itemprop='position'>#478</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thank you so much for your guidance, Patrick!</p>
<p>I have created <code>$HOME/bin/mygrep</code>:</p>
<pre><code>#!/bin/bash

grep --exclude=README.md --exclude=GPLv2 --exclude=GPLv3 --exclude=COPYING --exclude=changelog.upstream-old1 --exclude-dir=mnt --exclude-dir=qubes-src/linux-template-builder/mnt --exclude=changelog.upstream --exclude-dir=.git --exclude-dir=chroot-debian --exclude-dir=chroot-jessie "${@:2}"
</code></pre>
<hr>
<aside class="quote" data-post="476" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Whonix default DisableNetwork 0 in</p>
<p>/usr/share/tor/tor-service-defaults-torrc makes the difference.</p>
</blockquote>
</aside>
<p>I see. Whonix is adding <code>DisableNetwork 1</code> to <code>/usr/share/tor/tor-service-defaults-torrc</code> probably because Whonix will try to auto-start Tor when whonix-gw is started. It makes a lot of sense. <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-18T00:31:20Z' class='post-time'>
                January 18, 2018, 12:31am
              </time>
              <meta itemprop='dateModified' content='2018-01-18T00:31:20Z'>
          <span itemprop='position'>#479</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="478" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>“${@:2}”</p>
</blockquote>
</aside>
<p>That should just be</p>
<pre><code>"$@"</code></pre>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-18T00:32:54Z' class='post-time'>
                January 18, 2018, 12:32am
              </time>
              <meta itemprop='dateModified' content='2018-01-18T00:32:54Z'>
          <span itemprop='position'>#480</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="476" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Perhaps double use of DisableNetwork 1 in /usr/share/tor/tor-service-defaults-torrc as well as in a torrc.d file causes a crash?</p>
</blockquote>
</aside>
<p>Double use of <code>DisableNetwork 1</code> will not crash Tor. It will crash anon-connection-wizard when it wants to start Tor but it can not find <code>/run/tor/control</code>. I will handle this error. <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-18T01:30:36Z' class='post-time'>
                January 18, 2018,  1:30am
              </time>
              <meta itemprop='dateModified' content='2018-01-18T01:30:36Z'>
          <span itemprop='position'>#481</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="472" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>40_anon_connection_wizard.torrc and 50_user.torrc only seems confusing and inconsistent. Do you think you could handle DisableNetwork 0/1 in all Tor config files /etc/tor/torrc /etc/torrc.d /usr/local/etc/torrc.d?</p>
<p>Do you think this is doable/realistic for Whonix 14?</p>
</blockquote>
</aside>
<p>Hi Patrick! I have been thinking about this for a while.</p>
<p>I agree that only 40_.torrc and 50_user.torrc is modified is inconsistent. And it seems <code>anon-connection-wizard</code> will be too “powerful” if it also edit “/etc/tor/torrc /etc/torrc.d /usr/local/etc/torrc.d”.</p>
<p>Therefore, here is my new proposal:</p>
<ol>
<li>anon-connection-wizard will write <code>DisableNetwork 0</code> to <code>40_anon_connection_wizard.torrc</code> when user hit connect button.</li>
<li>anon-connection-wizard will write <code>#DisableNetwork 0</code> (or nothing) to <code>40_anon_connection_wizard.torrc</code> when user hit disable button.</li>
<li>The special case is when anon-connection-wizard tries to start the Tor but the final value is <code>DisableNetwork 1</code> . In this case, anon-connection-wizard will tell user why Tor cannot be enabled and let user handle the <code>DisableNetwork 1</code> themselves. Since <code>DisableNetwork 1</code> is not a value that is commonly found on the internet, we may assume whoever uses this line has full understanding on what it means.</li>
</ol>
<p>How do you like this proposal, Patrick?</p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">

            <link itemprop="image" href="../../../uploads/default/original/2X/9/98aa778e974fcee1a884c4cddba27799ebb68f59.png">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-18T02:23:51Z' class='post-time'>
                January 18, 2018,  2:23am
              </time>
              <meta itemprop='dateModified' content='2018-01-18T02:23:51Z'>
          <span itemprop='position'>#482</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="477" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>And for better usability, we may use this comment in all the torrc:</p>
<pre><code>## Do not edit this file!
## Please create and then add modifications to the following file instead:
## /usr/local/etc/torrc.d/50_user.torrc
</code></pre>
</blockquote>
</aside>
<p>Done:<br>
<a href="../../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/pull/8" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/Whonix/anon-gw-anonymizer-config/pull/8</a></p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-18T03:23:02Z' class='post-time'>
                January 18, 2018,  3:23am
              </time>
              <meta itemprop='dateModified' content='2018-01-18T03:23:02Z'>
          <span itemprop='position'>#483</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="481" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>anon-connection-wizard will write DisableNetwork 0 to 40_anon_connection_wizard.torrc when user hit connect button.</p>
</blockquote>
</aside>
<p>Yes.</p>
<aside class="quote" data-post="481" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>anon-connection-wizard will write <span class="hashtag">#DisableNetwork</span> 0 (or nothing) to 40_anon_connection_wizard.torrc when user hit disable button.</p>
</blockquote>
</aside>
<ul>
<li>Nothing or <code>#DisableNetwork 0</code>: Good enough for Whonix (specifically for Whonix 14) but ineffective outside of Whonix.</li>
<li>Therefore I recommend to write <code>DisableNetwork 1</code> to cover non-Whonix use cases such as plain Debian.</li>
</ul>
<aside class="quote" data-post="481" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>The special case is when anon-connection-wizard tries to start the Tor but the final value is DisableNetwork 1 . In this case, anon-connection-wizard will tell user why Tor cannot be enabled and let user handle the DisableNetwork 1 themselves. Since DisableNetwork 1 is not a value that is commonly found on the internet, we may assume whoever uses this line has full understanding on what it means.</p>
</blockquote>
</aside>
<p>Sounds very reasonable.</p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-18T04:57:00Z' class='post-time'>
                January 18, 2018,  4:57am
              </time>
              <meta itemprop='dateModified' content='2018-01-18T04:57:00Z'>
          <span itemprop='position'>#484</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Patrick Schleizer:</p>
<blockquote>
<aside class="quote" data-post="481" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>anon-connection-wizard will write <span class="hashtag">#DisableNetwork</span> 0 (or nothing) to 40_anon_connection_wizard.torrc when user hit disable button.</p>
</blockquote>
</aside>
<ul>
<li>Nothing or <code>#DisableNetwork 0</code>: Good enough for Whonix (specifically for Whonix 14) but ineffective outside of Whonix.</li>
<li>Therefore I recommend to write <code>DisableNetwork 1</code> to cover non-Whonix use cases such as plain Debian.</li>
</ul>
</blockquote>
<p>Hi Patrick!</p>
<p>Thank you so much for your feedback!</p>
<p>I agree with you that explicitly writing <code>DisableNetwork 1</code> is better.</p>
<p>But I am not sure what do you mean by saying “but ineffective outside of<br>
Whonix”.</p>
<p>It seems no matter what value DisableNetwork is, when<br>
anon-connection-wizard asks Tor to stop (<code>systemctl --no-pager stop tor@default</code>), Tor will always stop successfully. And in other<br>
environment, Tor will probably not auto-start.</p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-18T13:27:45Z' class='post-time'>
                January 18, 2018,  1:27pm
              </time>
              <meta itemprop='dateModified' content='2018-01-18T13:27:45Z'>
          <span itemprop='position'>#485</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="484" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>But I am not sure what do you mean by saying “but ineffective outside of Whonix”.</p>
</blockquote>
</aside>
<p>Outside of Whonix = in Debian, in Tails, in Fedora, etc. For those <code>DisableNetwork 1</code> is important.</p>
<p>Ineffective outside of Whonix because they by default don’t set <code>DisableNetwork 1</code> by default. Literal <code>DisableNetwork 1</code> is important outside of Whonix therefore. <code>#DisableNetwork 0</code> or nothing would be fatal outside of Whonix.</p>
<p><code>Adapt Tor installer to allow users to avoid connecting to the public tor network</code><br>
<a href="../../../../external.html?link=https://trac.torproject.org/projects/tor/ticket/7197" class="onebox" target="_blank">https://trac.torproject.org/projects/tor/ticket/7197</a></p>
<aside class="quote" data-post="484" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/i/c5a1d2/40.png" class="avatar"> iry:</div>
<blockquote>
<p>It seems no matter what value DisableNetwork is, when anon-connection-wizard asks Tor to stop (systemctl --no-pager stop tor@default), Tor will always stop successfully. And in other environment, Tor will probably not auto-start.</p>
</blockquote>
</aside>
<p>No surprise. Yes. Stopping always works because this is up to systemd, not Tor. Tor will be autostarted by systemd next boot although then with <code>DisableNetwork 1</code>.</p>
<hr>
<p>Long term, low priority, maybe even good:</p>
<p>We could avoid systemctl tor stop and restart. systemctl stops / restarts the whole Tor program which may not be required anymore.</p>
<p>avoid systemctl stop:</p>
<ul>
<li>reload Tor.</li>
<li>After reloading Tor, ask through Tor control protocol (python-stem) if Tor has networking disabled, i.e. if Tor really knows <code>DisableNetwork 1</code> now. This is for security.</li>
<li>And if <code>DisableNetwork 1</code> is not active, warn the user and stop Tor.</li>
</ul>
<p>avoid systemctl restart::</p>
<ul>
<li>If Tor is not running (check exit code of <code>systemctl status tor@default</code>), start it.</li>
<li>If Tor is running, just reload it, then check if new config was applied.</li>
<li>If reloading failed, restart it.</li>
</ul>
<p>All of this is probably not very useful and would only increase the amount of code.</p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">

            <link itemprop="image" href="../../../uploads/default/original/2X/9/98aa778e974fcee1a884c4cddba27799ebb68f59.png">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-19T00:10:56Z' class='post-time'>
                January 19, 2018, 12:10am
              </time>
              <meta itemprop='dateModified' content='2018-01-19T00:10:56Z'>
          <span itemprop='position'>#486</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a href="../../../../external.html?link=https://github.com/Whonix/anon-connection-wizard/pull/14" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/Whonix/anon-connection-wizard/pull/14</a></p>
<ol>
<li>Pop up message when /run/tor/control is not found</li>
<li>Pop up message when Tor controller cookie is not found</li>
<li>Optimize Tor Bootstrap Status</li>
<li>Now user will feel smooth switching to Tor Bootstrap Page</li>
<li>Disable Tor when user cancel Tor bootstrap</li>
<li>Move DisableNetwork line to 40_anon_connection_wizard.torrc</li>
</ol>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-19T16:10:01Z' class='post-time'>
                January 19, 2018,  4:10pm
              </time>
              <meta itemprop='dateModified' content='2018-01-19T16:10:01Z'>
          <span itemprop='position'>#488</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p><code>buttonReply = QMessageBox.warning(self, 'Tor Controller Not Found', 'Tor fails to start because the Tor controller cannot be found. This is very likely because you have a \"DisableNetwork 1\" line in some torrc file(s). Please manually remove or comment those lines and then run anon-connection-wizard again.')</code></p>
</blockquote>
<p>Probably wrong. <code>DisableNetwork 1</code> does not make Tor daemon (started by systemd) fail to start. The idea of <code>DisableNetwork 1</code> is that the Tor daemon is still starting and running, but with network disabled.</p>
<blockquote>
<p>user@host:~$ sudo journalctl -u tor@default -f<br>
– Logs begin at Fri 2018-01-19 15:53:47 UTC. –<br>
Jan 19 15:55:36 host Tor[3638]: You configured a non-loopback address ‘10.137.11.1:9189’ for SocksPort. This allows everybody on your local network to use your machine as a proxy. Make sure this is what you wanted.<br>
Jan 19 15:55:36 host Tor[3638]: You configured a non-loopback address ‘10.137.11.1:5300’ for DNSPort. This allows everybody on your local network to use your machine as a proxy. Make sure this is what you wanted.<br>
Jan 19 15:55:36 host Tor[3638]: You configured a non-loopback address ‘10.137.11.1:9040’ for TransPort. This allows everybody on your local network to use your machine as a proxy. Make sure this is what you wanted.<br>
Jan 19 15:55:36 host Tor[3638]: DisableNetwork is set. Tor will not make or accept non-control network connections. Shutting down all existing connections.<br>
Jan 19 15:55:36 host Tor[3638]: Parsing GEOIP IPv4 file /usr/share/tor/geoip.<br>
Jan 19 15:55:36 host Tor[3638]: Parsing GEOIP IPv6 file /usr/share/tor/geoip6.<br>
Jan 19 15:55:36 host Tor[3638]: Bootstrapped 0%: Starting<br>
<strong>&gt; Jan 19 15:55:37 host Tor[3638]: Delaying directory fetches: DisableNetwork is set.</strong><br>
Jan 19 15:55:37 host systemd[1]: Started Anonymizing overlay network for TCP.<br>
Jan 19 15:55:37 host Tor[3638]: Signaled readiness to systemd</p>
</blockquote>
<p><code>DisableNetwork</code> really just stops Tor from doing networking. This excludes of course Tor control connections. The option is not <code>ExitOnStart</code> or <code>DoNotStart</code> (does not exist, not needed).</p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-19T21:31:27Z' class='post-time'>
                January 19, 2018,  9:31pm
              </time>
              <meta itemprop='dateModified' content='2018-01-19T21:31:27Z'>
          <span itemprop='position'>#489</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="488" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Probably wrong. DisableNetwork 1 does not make Tor daemon (started by systemd) fail to start. The idea of DisableNetwork 1 is that the Tor daemon is still starting and running, but with network disabled.</p>
</blockquote>
</aside>
<p>Thank you so much for pointing this out, Patrick! I agree with you that Tor does not fail start. Changed the error message to:</p>
<blockquote>
<p>buttonReply = QMessageBox.warning(self, ‘Tor Controller Not Constructed’, ‘Tor controller cannot be constructed. This is very likely because you have a “DisableNetwork 1” line in some torrc file(s). Please manually remove or comment those lines and then run anon-connection-wizard again.’)</p>
</blockquote>
<hr>
<aside class="quote" data-post="488" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>DisableNetwork really just stops Tor from doing networking. This excludes of course Tor control connections.</p>
</blockquote>
</aside>
<p>I agree. And this is also what Tor manual says:</p>
<blockquote>
<p>When this option is set, we don’t listen for or accept any connections other than controller connections and we close (and don’t reattempt) any outbound connections.</p>
</blockquote>
<p>However, it seems when <code>DisableNetwork 1</code> is set, anon-connection-wizard fails to get a Tor controller because <code>/var/run/tor/control</code> does not exist.</p>
<p>Specifically, anon-connection-wizard is using <a href="../../../../external.html?link=https://stem.torproject.org/api/control.html#stem.control.Controller.from_socket_file">stem.control.Controller.from_socket_file()</a> to get Controller:<br>
<code>tor_controller = stem.control.Controller.from_socket_file(Common.control_socket_path)</code>,<br>
where control_socket_path is <code>/var/run/tor/control</code>.</p>
<p>To reproduce this on Whonix-gateway (Whonix 14):</p>
<p>When <code>DisableNetwork 0</code>, run:<br>
<code>systemctl --no-pager restart tor@default</code></p>
<blockquote>
<p>user@host:/usr/local/etc/torrc.d$ ls -l /var/run/tor/<br>
total 1328<br>
srw-rw---- 1 debian-tor debian-tor       0 Jan 19 21:14 control<br>
-rw-r----- 1 debian-tor debian-tor      32 Jan 19 21:14 control.authcookie<br>
-rw-r----- 1 debian-tor debian-tor 1350116 Jan 19 21:14 log<br>
srw-rw-rw- 1 debian-tor debian-tor       0 Jan 19 21:14 socks<br>
-rw-r–r-- 1 debian-tor debian-tor       6 Jan 19 21:14 tor.pid</p>
</blockquote>
<p>When <code>DisableNetwork 1</code>, run:<br>
<code>systemctl --no-pager restart tor@default</code></p>
<blockquote>
<p>user@host:/usr/local/etc/torrc.d$ ls -l /var/run/tor/<br>
total 1244<br>
-rw-r----- 1 debian-tor debian-tor      32 Jan 19 21:00 control.authcookie<br>
-rw-r----- 1 debian-tor debian-tor 1269005 Jan 19 21:00 log</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-19T22:31:54Z' class='post-time'>
                January 19, 2018, 10:31pm
              </time>
              <meta itemprop='dateModified' content='2018-01-19T22:31:54Z'>
          <span itemprop='position'>#490</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Indeed, when <code>DisableNetwork 1</code>, <code>/var/run/tor/control</code> doesn’t exist. As per Tor man page for <code>DisableNetwork 1</code> this looks like a bug.</p>
<blockquote>
<p>DisableNetwork 0|1</p>
</blockquote>
<blockquote>
<p>When this option is set, we don’t listen for or accept any connections <strong>other than controller connections</strong>, and we close (and don’t reattempt) any outbound connections. Controllers sometimes use this option to avoid using the network until Tor is fully configured. (Default: 0)</p>
</blockquote>
<ul>
<li>Could you check if this also happen in Debian please with latest Tor?</li>
<li>If so, check if there is a bug report at tpo for this?
<ul>
<li>If not rebort a bug if you agree?</li>
</ul>
</li>
</ul>
<p>Meanwhile we have to live with this.</p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../650.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-19T22:36:53Z' class='post-time'>
                January 19, 2018, 10:36pm
              </time>
              <meta itemprop='dateModified' content='2018-01-19T22:36:53Z'>
          <span itemprop='position'>#491</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="490" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Could you check if this also happen in Debian please with latest Tor?<br>
If so, check if there is a bug report at tpo for this?</p>
<p>If not rebort a bug if you agree?</p>
</blockquote>
</aside>
<p>Thank you so much for your immediate feedback, Patrick! I will do it right now!</p>
<aside class="quote" data-post="490" data-topic="650">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Meanwhile we have to live with this.</p>
</blockquote>
</aside>
<p>anon-connection-wizard has already handled that! <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="../65089ae.html?page=23">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../6508c06.html?page=25">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
