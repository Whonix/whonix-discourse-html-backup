<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
    <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28</link>
    <description>Running Debian Jessie in VM I cloned https://github.com/adrelanos/nothing-to-see and checked out 7.7.3.1.

I wanted to install on bare metal but it failed early (build script 1700).
http://i43.tinypic.com/33x8xf9.jpg

After that it ran a bit more but finally stopped.
http://i44.tinypic.com/vos978.jpg

Edit by Patrick:
Changed title.</description>
    <language>en</language>
    <lastBuildDate>Sat, 02 Aug 2014 17:14:02 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="56" data-topic="28">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Also the terminology we’re using here is non-ideal. “Building Whonix with --bare-metal option in a VM” doesn’t make a lot sense. When you’re building in a VM it looks strange using the --bare-metal option, no? Any idea s for better option names?</p>
</blockquote>
</aside>
<p>Took a while to come up with a better name… But still…<br>
As suggested by Jason, now using --install-to-root.</p>
<p><a href="https://github.com/Whonix/Whonix/commit/9c6894784af8ae87e401fe1441cde3c5ce062ed1" class="onebox" target="_blank">https://github.com/Whonix/Whonix/commit/9c6894784af8ae87e401fe1441cde3c5ce062ed1</a></p>
<blockquote>New alternative option name --install-to-root. This is an alternative to --bare-metal. Since some users liked to use "--bare-metal in a VM", which sounds like an oxymoron. Now we can talk about "using --install-to-root in a VM".</blockquote>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/123">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/123</link>
        <pubDate>Sat, 02 Aug 2014 17:14:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-123</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Occq]]></dc:creator>
        <description><![CDATA[
            <p>Thanks for the explanation.</p>
<p>The host not resolved messages still appear.</p>
<p>Gateway log.</p>
<p>[code]</p>
<ul>
<li>true ‘INFO: Benchmarking “sudo -u user echo “This is a test echo.”” using “time”…’</li>
<li>sudo -u user echo 'This is a test echo.'<br>
sudo: unable to resolve host debian<br>
This is a test echo.</li>
</ul>
<p>real	0m20.480s<br>
user	0m0.012s<br>
sys	0m0.108s<br>
run-parts: executing /usr/share/whonix/postinst.d/70_build_timestamp</p>
<ul>
<li>sudo -u user mkdir --parents /home/user/Desktop<br>
sudo: unable to resolve host debian</li>
<li>sudo -u user ln -s /usr/share/applications/kde4/konsole.desktop /home/user/Desktop/<br>
sudo: unable to resolve host debian</li>
<li>sudo -u user ln -s /usr/share/applications/whonix/whonix-arm.desktop /usr/share/applications/whonix/whonix-firewall30default.desktop /usr/share/applications/whonix/whonix-firewall50user.desktop /usr/share/applications/whonix/whonix-firsttimesetup.desktop /usr/share/applications/whonix/whonix-reloadfirewall.desktop /usr/share/applications/whonix/whonix-reloadtor.desktop /usr/share/applications/whonix/whonix-repository.desktop /usr/share/applications/whonix/whonix-restarttor.desktop /usr/share/applications/whonix/whonix-stoptor.desktop /usr/share/applications/whonix/whonix-timesync.desktop /usr/share/applications/whonix/whonix-torrc.desktop /usr/share/applications/whonix/whonix-torrcexamples.desktop /usr/share/applications/whonix/whonix-whonixcheck.desktop /home/user/Desktop<br>
sudo: unable to resolve host debian<br>
run-parts: executing /usr/share/whonix/postinst.d/70_disable_kdm_autostart[/code]</li>
</ul>
<p>Five hours is somehow managable and with 2800 disabled, three is perfect (as much as building time can be).</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/122">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/122</link>
        <pubDate>Sat, 15 Feb 2014 11:30:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-122</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>2800_create-report takes a big chunk of time. If</p>
<ul>
<li>you’re not comparing with official images anyway</li>
<li>you’d like to see it build faster,<br>
you can disable this build step to save time.</li>
</ul>
<blockquote>1100_prepare-build-machine (benchmark: 00:52:43)</blockquote>
This takes long due to downloading and installing lots of packages. But when you run that build step for the second time on the same VM, it should just take ~2 seconds (or no more than 10 on slow systems, I guess) - because then this stuff is already installed.
<blockquote>1300_create-debian-img       (benchmark: 00:44:52)'
1700_install-meta-packages     (benchmark: 02:12:00)'
2300_run-chroot-scripts-post-d  (benchmark: 00:28:35)'</blockquote>
These are also steps download lots of packages. Whonix's build script automatically installs an apt-cache (apt-cacher-ng), thus when building the VM for the second time, it will be faster.
<p>If you prefer to build in clean VMs (those which are fresh installed, from a fresh snapshot or so, without having seen Whonix’s source code beforehand, which is by the way very much appreciated), you can still make use of an apt cache, which can run on the host:<br>
<a href="https://www.whonix.org/wiki/Dev/BuildDocumentation_8#APT_Cache_.28Optional.29" class="onebox" target="_blank">https://www.whonix.org/wiki/Dev/BuildDocumentation_8#APT_Cache_.28Optional.29</a></p>
<p>This greatly reduces required time for builds.</p>
<p>Does this explain differences in build times?</p>
<p>I can never exclude any possibilities ever, but I think bugs leading to long build times are all sorted out. When you don’t see any “sudo: unable to resolve host” messages in the log, they’re all fixed.</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/121">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/121</link>
        <pubDate>Sat, 15 Feb 2014 11:21:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-121</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Occq]]></dc:creator>
        <description><![CDATA[
            <p>Building in a VM.<br>
Debian 7.4<br>
Git tag 7.7.8.7<br>
Building Whonix-Workstation image.<br>
Building Whonix-Gateway image.</p>
<p>Success on both!</p>
<p>Only one thing. Workstation build took 6 hours where it used to take 3. Gateway took 5, improvement from the previous 8.</p>
<h1>============================================</h1>
<p>Workstation image in a VM, 7.7.8.7, Laptop</p>
<p>1100_prepare-build-machine 	(benchmark: 00:52:43)'<br>
1200_create-debian-packages 	(benchmark: 00:05:10)'<br>
1300_create-debian-img 		(benchmark: 00:44:52)'<br>
1700_install-meta-packages  	(benchmark: 02:12:00)'<br>
1900_run-chroot-scripts-pre-d 	(benchmark: 00:02:53)'<br>
2000_install-files-packages  	(benchmark: 00:12:21)'<br>
2100_verify-files  		(benchmark: 00:00:31)'<br>
2300_run-chroot-scripts-post-d  (benchmark: 00:28:35)'<br>
2400_convert-img-to-qcow2  	(benchmark: 00:10:51)'<br>
2500_convert-img-to-vdi  	(benchmark: 00:11:14)'<br>
2600_create-vbox-vm  		(benchmark: 00:00:30)'<br>
2700_export-vbox-vm  		(benchmark: 00:07:10)‘<br>
2800_create-report  		(benchmark: 02:15:50)’</p>
<hr>
<p>whonix_build  			(benchmark: 07:24:46)’</p>
<h1>============================================</h1>
<p>Workstation image in a VM, 7.7.8.7, PC</p>
<p>1100_prepare-build-machine  	(benchmark: 00:32:25)'<br>
1200_create-debian-packages  	(benchmark: 00:06:33)'<br>
1300_create-debian-img  	(benchmark: 00:14:57)'<br>
1700_install-meta-packages  	(benchmark: 00:36:50)'<br>
1900_run-chroot-scripts-pre-d   (benchmark: 00:03:16)'<br>
2000_install-files-packages  	(benchmark: 00:10:42)'<br>
2100_verify-files  		(benchmark: 00:00:26)'<br>
2300_run-chroot-scripts-post-d  (benchmark: 00:12:26)'<br>
2400_convert-img-to-qcow2 	(benchmark: 00:38:00)'<br>
2500_convert-img-to-vdi  	(benchmark: 00:39:01)'<br>
2600_create-vbox-vm  		(benchmark: 00:00:24)'<br>
2700_export-vbox-vm 		(benchmark: 00:05:36)‘<br>
2800_create-report  		(benchmark: 02:41:10)’</p>
<hr>
<p>whonix_build  (benchmark: 06:01:55)’</p>
<h1>============================================</h1>
<p>Gateway image in a VM, 7.7.8.7, PC</p>
<p>1100_prepare-build-machine  	(benchmark: 00:31:07)'<br>
1200_create-debian-packages 	(benchmark: 00:06:01)'<br>
1300_create-debian-img  	(benchmark: 00:13:57)'<br>
1700_install-meta-packages 	(benchmark: 00:30:35)'<br>
1900_run-chroot-scripts-pre-d   (benchmark: 00:02:57)'<br>
2000_install-files-packages  	(benchmark: 00:03:29)'<br>
2100_verify-files  		(benchmark: 00:00:26)'<br>
2300_run-chroot-scripts-post-d  (benchmark: 00:13:30)'<br>
2400_convert-img-to-qcow2  	(benchmark: 00:32:46)'<br>
2500_convert-img-to-vdi  	(benchmark: 00:34:47)'<br>
2600_create-vbox-vm  		(benchmark: 00:00:23)'<br>
2700_export-vbox-vm 		(benchmark: 00:04:32)‘<br>
2800_create-report  		(benchmark: 02:28:42)’</p>
<hr>
<p>whonix_build  (benchmark: 05:23:22)’</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/120">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/120</link>
        <pubDate>Sat, 15 Feb 2014 10:39:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-120</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>There is a minor issue with the <a href="https://www.whonix.org/wiki/Dev/KVM" data-bbcode="true">new extra qcow2 images</a>, which are now preallocated. Upload would take ~250 hours per image. Looks like they’re not <a href="https://en.wikipedia.org/wiki/Sparse_file" data-bbcode="true">sparse files</a> anymore. I’ll manually compress and upload them. No need for a new tag, no need to delay the release further.</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/119">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/119</link>
        <pubDate>Fri, 14 Feb 2014 06:33:45 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-119</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Fixed in 7.7.8.7 (minor build script fix, see last post). No other changes. (Report 7.7.8.6 vs 7.7.8.7 should match.)</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/118">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/118</link>
        <pubDate>Thu, 13 Feb 2014 19:37:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-118</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Always amazing to see how a script can fail on another machine even though I tested it more than 10 times. That’s why I get when I test on existing build machine without full reset. Anyway…</p>
<p>Will be fixed in next git tag. You can work around that in meanwhile</p>
<blockquote>sudo mkdir /root/.gnupg</blockquote>
<p>Then build. Then it should work.</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/117">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/117</link>
        <pubDate>Thu, 13 Feb 2014 19:33:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-117</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Occq]]></dc:creator>
        <description><![CDATA[
            <p>Failed build. It seems like another GPG folder error.</p>
<p>Building in a VM.<br>
Debian 7.4<br>
Git tag 7.7.8.6<br>
Building Whonix-Workstation image.</p>
<p>Log 1700.</p>
<pre><code class="lang-auto">INFO: Skipping 1400_backup-img-after-grml-debootstrap, because WHONIX_BUILD_SKIP_SCRIPTS includes it. 
run-parts: executing ./build-steps.d/1700_install-meta-packages
+ true 'Currently running script: ./build-steps.d/1700_install-meta-packages '
+ TEMP_SCRIPTNAME=./build-steps.d/1700_install-meta-packages
+++ dirname ./build-steps.d/1700_install-meta-packages
++ cd ./build-steps.d
++ pwd
+ MYDIR=/home/user/nothing-to-see/build-steps.d
+ cd /home/user/nothing-to-see/build-steps.d
+ cd ..
+ cd help-steps
+ source pre
++ set +x
+ source variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_whonix_version_new: 7.7.8.6
whonix_build_new_changelog_version: 2:7.7.8.6-debpackage1
+ true 'INFO: Currently running script: ./build-steps.d/1700_install-meta-packages '
+ install-meta-packages
+ trap error_handler_unchroot_unprevent_unmount ERR INT TERM
+ '[' 1 = 1 ']'
+ '[' '!' -f /home/user/whonix_binary/gpg-local-signing-key/done ']'
+ sync
+ /home/user/nothing-to-see/help-steps/mount-img
+++ dirname /home/user/nothing-to-see/help-steps/mount-img
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_whonix_version_new: 7.7.8.6
whonix_build_new_changelog_version: 2:7.7.8.6-debpackage1
+ '[' 0 = 1 ']'
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/mount-img '
+ mount_img
+ trap error_handler_mount-img ERR INT TERM
+ '[' '' = '' ']'
+ true
+ sync
+ '[' '' = '' ']'
+ local img=/home/user/whonix_binary/Whonix-Gateway.img
+ losetup --all
+ sync
+ wait 30179
+ sleep 2
+ local kpartx_output a b device
++ kpartx -a -s -v /home/user/whonix_binary/Whonix-Gateway.img
+ kpartx_output='add map loop0p1 (254:0): 0 209711104 linear /dev/loop0 4096'
+ sync
+ '[' 'add map loop0p1 (254:0): 0 209711104 linear /dev/loop0 4096' = '' ']'
+ losetup --all
/dev/loop0: [0801]:1836946 (/home/user/whonix_binary/Whonix-Gateway.img)
+ sync
+ read a b device _
+ dev_mapper_device=/dev/mapper/loop0p1
+ mkdir --parents /home/user/whonix_binary/Whonix-Gateway_image
+ sync
+ mount /dev/mapper/loop0p1 /home/user/whonix_binary/Whonix-Gateway_image
+ sync
+ benchmark_time_end
++ date +%s
+ benchmark_time_end=1391538349
+ benchmark_took_seconds=4
++ convertsecs 4
++ (( h=4/3600 ))
++ (( m=(4%3600)/60 ))
++ (( s=4%60 ))
++ printf '%02d:%02d:%02d\n' 0 0 4
++ true
+ benchmark_took_time=00:00:04
+ true
+ true 'INFO: End of: /home/user/nothing-to-see/help-steps/mount-img No error detected. (benchmark: 00:00:04)'
+ /home/user/nothing-to-see/help-steps/prevent-daemons-from-starting
+++ dirname /home/user/nothing-to-see/help-steps/prevent-daemons-from-starting
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_whonix_version_new: 7.7.8.6
whonix_build_new_changelog_version: 2:7.7.8.6-debpackage1
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/prevent-daemons-from-starting '
+ prevent_daemons_from_starting
+ trap error_handler_prevent_daemons_from_starting ERR INT TERM
+ sync
+ echo 'chroot-img: copy policy-rc.d into /usr/sbin/ to prevent daemons from starting.'
chroot-img: copy policy-rc.d into /usr/sbin/ to prevent daemons from starting.
+ cp --preserve --verbose /home/user/nothing-to-see/whonix_shared/usr/share/whonix/policy-rc.d /home/user/whonix_binary/Whonix-Gateway_image/usr/sbin/policy-rc.d
`/home/user/nothing-to-see/whonix_shared/usr/share/whonix/policy-rc.d' -&gt; `/home/user/whonix_binary/Whonix-Gateway_image/usr/sbin/policy-rc.d'
+ sync
+ benchmark_time_end
++ date +%s
+ benchmark_time_end=1391538351
+ benchmark_took_seconds=2
++ convertsecs 2
++ (( h=2/3600 ))
++ (( m=(2%3600)/60 ))
++ (( s=2%60 ))
++ printf '%02d:%02d:%02d\n' 0 0 2
++ true
+ benchmark_took_time=00:00:02
+ true
+ true 'INFO: End of: /home/user/nothing-to-see/help-steps/prevent-daemons-from-starting No error detected. (benchmark: 00:00:02)'
+ sync
+ chroot /home/user/whonix_binary/Whonix-Gateway_image update-grub -v
grub-mkconfig (GRUB) 1.99-27+deb7u2
+ chroot /home/user/whonix_binary/Whonix-Gateway_image sync
+ sync
+ '[' 0 = 1 ']'
+ cp /home/user/nothing-to-see/whonix_shared/etc/apt/sources.list.whonix /home/user/whonix_binary/Whonix-Gateway_image/etc/apt/sources.list
+ cp /home/user/nothing-to-see/whonix_shared/etc/apt/preferences.d/50_banned-packages /home/user/whonix_binary/Whonix-Gateway_image/etc/apt/preferences.d/
+ cp /home/user/nothing-to-see/whonix_shared/etc/apt/apt.conf.d/90whonix-timeout /home/user/whonix_binary/Whonix-Gateway_image/etc/apt/apt.conf.d/
+ sync
+ /home/user/nothing-to-see/help-steps/chroot-img
+++ dirname /home/user/nothing-to-see/help-steps/chroot-img
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_whonix_version_new: 7.7.8.6
whonix_build_new_changelog_version: 2:7.7.8.6-debpackage1
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/chroot-img '
+ chroot-img
+ trap error_handler_chroot-img ERR INT TERM
+ sync
+ '[' 0 = 1 ']'
+ mount --bind /dev /home/user/whonix_binary/Whonix-Gateway_image/dev
+ mount --bind /proc /home/user/whonix_binary/Whonix-Gateway_image/proc
+ '[' '' = 0 ']'
+ '[' 0 = 1 ']'
+ true 'INFO /home/user/nothing-to-see/help-steps/chroot-img: BARE_METAL is 0, NOT using .backup files as /etc/resolv.conf etc, ok.'
+ mount --bind /etc/resolv.conf /home/user/whonix_binary/Whonix-Gateway_image/etc/resolv.conf
+ mount --bind /etc/hosts /home/user/whonix_binary/Whonix-Gateway_image/etc/hosts
+ mount --bind /etc/hostname /home/user/whonix_binary/Whonix-Gateway_image/etc/hostname
+ mount --bind /etc/network/interfaces /home/user/whonix_binary/Whonix-Gateway_image/etc/network/interfaces
+ sync
+ benchmark_time_end
++ date +%s
+ benchmark_time_end=1391538354
+ benchmark_took_seconds=1
++ convertsecs 1
++ (( h=1/3600 ))
++ (( m=(1%3600)/60 ))
++ (( s=1%60 ))
++ printf '%02d:%02d:%02d\n' 0 0 1
++ true
+ benchmark_took_time=00:00:01
+ true
+ true 'INFO: End of: /home/user/nothing-to-see/help-steps/chroot-img No error detected. (benchmark: 00:00:01)'
+ /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo
+++ dirname /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_whonix_version_new: 7.7.8.6
whonix_build_new_changelog_version: 2:7.7.8.6-debpackage1
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo '
+ create_local_temp_apt_repo
+ trap error_handler_general ERR INT TERM
+ local gpg_temp_homedir
++ chroot /home/user/whonix_binary/Whonix-Gateway_image mktemp --directory
+ gpg_temp_homedir=/tmp/tmp.RDyESAdgCH
+ sudo -u user gpg --no-options --no-default-keyring --homedir /home/user/whonix_binary/gpg-local-signing-key --export whonix@local-signing.key
+ gpg --no-options --no-default-keyring --homedir /home/user/whonix_binary/Whonix-Gateway_image//tmp/tmp.RDyESAdgCH --keyring /home/user/whonix_binary/Whonix-Gateway_image/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg --import
gpg: keyring `/home/user/whonix_binary/Whonix-Gateway_image//tmp/tmp.RDyESAdgCH/secring.gpg' created
gpg: keyring `/home/user/whonix_binary/Whonix-Gateway_image/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg' created
gpg: /home/user/whonix_binary/Whonix-Gateway_image//tmp/tmp.RDyESAdgCH/trustdb.gpg: trustdb created
gpg: key 9DDEFD0B: public key "Whonix auto generated local APT signing key &lt;whonix@local-signing.key&gt;" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)
+ gpg --no-options --no-default-keyring --keyring /home/user/whonix_binary/Whonix-Gateway_image/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg --keyid-format 0xlong --fingerprint
gpg: fatal: /root/.gnupg: directory does not exist!
secmem usage: 0/0 bytes in 0/0 blocks of pool 0/32768
++ error_handler_general
++ local exit_code=2
++ rm --force /etc/apt/sources.list.d/whonix_temp.list
++ benchmark_time_end
+++ date +%s
++ benchmark_time_end=1391538356
++ benchmark_took_seconds=2
+++ convertsecs 2
+++ (( h=2/3600 ))
+++ (( m=(2%3600)/60 ))
+++ (( s=2%60 ))
+++ printf '%02d:%02d:%02d\n' 0 0 2
+++ true
++ benchmark_took_time=00:00:02
++ true
+++ caller
++ echo '
(benchmark: 00:00:02)
BASH_COMMAND: gpg --no-options --no-default-keyring --keyring "$CHROOT_FOLDER/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg" --keyid-format "0xlong" --fingerprint
exit_code: 2
ERROR /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo: | caller: 36 /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo
'

(benchmark: 00:00:02)
BASH_COMMAND: gpg --no-options --no-default-keyring --keyring "$CHROOT_FOLDER/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg" --keyid-format "0xlong" --fingerprint
exit_code: 2
ERROR /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo: | caller: 36 /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo

++ exit 1
++ error_handler_unchroot_unprevent_unmount
++ benchmark_time_end
+++ date +%s
++ benchmark_time_end=1391538356
++ benchmark_took_seconds=13
+++ convertsecs 13
+++ (( h=13/3600 ))
+++ (( m=(13%3600)/60 ))
+++ (( s=13%60 ))
+++ printf '%02d:%02d:%02d\n' 0 0 13
+++ true
++ benchmark_took_time=00:00:13
++ true
++ echo 'ERROR in ./build-steps.d/1700_install-meta-packages. Aborting... (benchmark: 00:00:13)'
ERROR in ./build-steps.d/1700_install-meta-packages. Aborting... (benchmark: 00:00:13)
++ rm --force /var/run/whonix/package_manager_lock
++ /home/user/nothing-to-see/help-steps/remove-local-temp-apt-repo
+++ dirname /home/user/nothing-to-see/help-steps/remove-local-temp-apt-repo
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_whonix_version_new: 7.7.8.6
whonix_build_new_changelog_version: 2:7.7.8.6-debpackage1
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/remove-local-temp-apt-repo '
+ remove_local_temp_apt_repo
+ trap error_handler_general ERR INT TERM
+ rm --force /home/user/whonix_binary/Whonix-Gateway_image/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg
+ rm --force /home/user/whonix_binary/Whonix-Gateway_image/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg~
+ rm --force /home/user/whonix_binary/Whonix-Gateway_image//var/lib/whonix/sources_temp_list.d/whonix_temp_initialdeb.list
+ rm --force /home/user/whonix_binary/Whonix-Gateway_image//var/lib/whonix/sources_temp_list.d/build_sources.list
+ benchmark_time_end
++ date +%s
+ benchmark_time_end=1391538357
+ benchmark_took_seconds=1
++ convertsecs 1
++ (( h=1/3600 ))
++ (( m=(1%3600)/60 ))
++ (( s=1%60 ))
++ printf '%02d:%02d:%02d\n' 0 0 1
++ true
+ benchmark_took_time=00:00:01
+ true
+ true 'INFO: End of: /home/user/nothing-to-see/help-steps/remove-local-temp-apt-repo No error detected. (benchmark: 00:00:01)'
++ /home/user/nothing-to-see/help-steps/unchroot-img
+++ dirname /home/user/nothing-to-see/help-steps/unchroot-img
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_whonix_version_new: 7.7.8.6
whonix_build_new_changelog_version: 2:7.7.8.6-debpackage1
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/unchroot-img '
+ do_unchroot
+ trap error_handler_unchroot-img ERR INT TERM
+ sync
+ '[' 0 = 1 ']'
+ umount /home/user/whonix_binary/Whonix-Gateway_image/dev
+ umount /home/user/whonix_binary/Whonix-Gateway_image/proc
+ umount /home/user/whonix_binary/Whonix-Gateway_image//mnt/initialdeb
umount: /home/user/whonix_binary/Whonix-Gateway_image//mnt/initialdeb: not found
+ true
+ umount /home/user/whonix_binary/Whonix-Gateway_image/etc/resolv.conf
+ umount /home/user/whonix_binary/Whonix-Gateway_image/etc/hosts
+ umount /home/user/whonix_binary/Whonix-Gateway_image/etc/hostname
+ umount /home/user/whonix_binary/Whonix-Gateway_image/etc/network/interfaces
+ sync
+ benchmark_time_end
++ date +%s
+ benchmark_time_end=1391538359
+ benchmark_took_seconds=2
++ convertsecs 2
++ (( h=2/3600 ))
++ (( m=(2%3600)/60 ))
++ (( s=2%60 ))
++ printf '%02d:%02d:%02d\n' 0 0 2
++ true
+ benchmark_took_time=00:00:02
+ true
+ true 'INFO: End of: /home/user/nothing-to-see/help-steps/unchroot-img No error detected. (benchmark: 00:00:02)'
++ /home/user/nothing-to-see/help-steps/unprevent-daemons-from-starting
+++ dirname /home/user/nothing-to-see/help-steps/unprevent-daemons-from-starting
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_whonix_version_new: 7.7.8.6
whonix_build_new_changelog_version: 2:7.7.8.6-debpackage1
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/unprevent-daemons-from-starting '
+ unprevent_daemons_from_starting
+ sync
+ rm --verbose --force /home/user/whonix_binary/Whonix-Gateway_image/usr/sbin/policy-rc.d
removed `/home/user/whonix_binary/Whonix-Gateway_image/usr/sbin/policy-rc.d'
+ sync
+ benchmark_time_end
++ date +%s
+ benchmark_time_end=1391538361
+ benchmark_took_seconds=2
++ convertsecs 2
++ (( h=2/3600 ))
++ (( m=(2%3600)/60 ))
++ (( s=2%60 ))
++ printf '%02d:%02d:%02d\n' 0 0 2
++ true
+ benchmark_took_time=00:00:02
+ true
+ true 'INFO: End of: /home/user/nothing-to-see/help-steps/unprevent-daemons-from-starting No error detected. (benchmark: 00:00:02)'
++ /home/user/nothing-to-see/help-steps/unmount-img
+++ dirname /home/user/nothing-to-see/help-steps/unmount-img
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_whonix_version_new: 7.7.8.6
whonix_build_new_changelog_version: 2:7.7.8.6-debpackage1
+ '[' 0 = 1 ']'
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/unmount-img '
+ unmount_img
+ trap error_handler_unmount-img ERR INT TERM
+ '[' '' = '' ']'
+ true
+ sync
+ wait 31064
+ sleep 2
+ sync
+ umount /home/user/whonix_binary/Whonix-Gateway_image
+ sync
+ '[' '' = '' ']'
+ local img=/home/user/whonix_binary/Whonix-Gateway.img
+ sleep 2
+ losetup --all
/dev/loop0: [0801]:1836946 (/home/user/whonix_binary/Whonix-Gateway.img)
+ sync
+ kpartx -d -s -v /home/user/whonix_binary/Whonix-Gateway.img
del devmap : loop0p1
loop deleted : /dev/loop0
+ sync
+ losetup --all
+ sync
+ rm -r /home/user/whonix_binary/Whonix-Gateway_image
+ sync
+ benchmark_time_end
++ date +%s
+ benchmark_time_end=1391538367
+ benchmark_took_seconds=6
++ convertsecs 6
++ (( h=6/3600 ))
++ (( m=(6%3600)/60 ))
++ (( s=6%60 ))
++ printf '%02d:%02d:%02d\n' 0 0 6
++ true
+ benchmark_took_time=00:00:06
+ true
+ true 'INFO: End of: /home/user/nothing-to-see/help-steps/unmount-img No error detected. (benchmark: 00:00:06)'
++ echo 'ERROR in ./build-steps.d/1700_install-meta-packages! Aborted.'
ERROR in ./build-steps.d/1700_install-meta-packages! Aborted.
++ exit 1
run-parts: ./build-steps.d/1700_install-meta-packages exited with return code 1
++ error_handler_build-machine
+++ caller
++ : echo '
BASH_COMMAND: run-parts --verbose --exit-on-error ./build-steps.d
ERROR ./whonix_build: | caller: 45 ./whonix_build
'
++ exit 1</code></pre>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/116">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/116</link>
        <pubDate>Thu, 13 Feb 2014 18:50:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-116</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Yes.</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/115">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/115</link>
        <pubDate>Thu, 13 Feb 2014 11:16:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-115</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Occq]]></dc:creator>
        <description><![CDATA[
            <p>Is 7.7.8.6 ready for testing Workstation image build?</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/114">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/114</link>
        <pubDate>Thu, 13 Feb 2014 11:00:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-114</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Minor gui related (whonixsetup) related fix in 7.7.8.6.</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/113">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/113</link>
        <pubDate>Wed, 12 Feb 2014 16:34:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-113</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>I was struggling with verifiable builds until now. Probably in 7.7.8.5 it’s sorted out.</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/112">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/112</link>
        <pubDate>Wed, 12 Feb 2014 10:46:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-112</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>No need to test 7.7.8.0. Currently doesn’t boot. Seems deleting whole /dev from the image (for verifiable builds) doesn’t work well.</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/111">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/111</link>
        <pubDate>Mon, 10 Feb 2014 06:14:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-111</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Build configuration:</p>
<ul>
<li>VM Debain Wheezy</li>
<li>VM with 4 GB RAM</li>
<li>ssd on host operating system</li>
<li>build dependencies were already installed (1100_prepare-build-machine)</li>
<li>apt-cache-ng was already filled up with most stuff</li>
</ul>
<p>Whonix-Gateway:</p>
<p>[code]+ true ‘INFO: End of: ./build-steps.d/1100_prepare-build-machine No error detected. (benchmark: 00:00:18)’</p>
<ul>
<li>true ‘INFO: End of: ./build-steps.d/1200_create-debian-packages No error detected. (benchmark: 00:00:54)’</li>
<li>true ‘INFO: End of: ./build-steps.d/1300_create-debian-img No error detected. (benchmark: 00:04:03)’</li>
<li>true ‘INFO: End of: ./build-steps.d/1700_install-meta-packages No error detected. (benchmark: 00:08:46)’</li>
<li>true ‘INFO: End of: ./build-steps.d/1900_run-chroot-scripts-pre-d No error detected. (benchmark: 00:00:22)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2000_install-files-packages No error detected. (benchmark: 00:00:49)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2100_verify-files No error detected. (benchmark: 00:00:09)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2300_run-chroot-scripts-post-d No error detected. (benchmark: 00:03:26)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2350_cleanup No error detected. (benchmark: 00:00:08)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2400_convert-img-to-qcow2 No error detected. (benchmark: 00:00:00)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2500_convert-img-to-vdi No error detected. (benchmark: 00:01:51)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2600_create-vbox-vm No error detected. (benchmark: 00:00:11)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2700_export-vbox-vm No error detected. (benchmark: 00:01:28)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2800_create-report No error detected. (benchmark: 00:16:25)’</li>
<li>true ‘INFO: End of: ./whonix_build No error detected. (benchmark: 00:38:51)’[/code]</li>
</ul>
<p>Whonix-Workstation:</p>
<p>[code]</p>
<ul>
<li>true ‘INFO: End of: ./build-steps.d/1100_prepare-build-machine No error detected. (benchmark: 00:00:03)’</li>
<li>true ‘INFO: End of: ./build-steps.d/1200_create-debian-packages No error detected. (benchmark: 00:00:49)’</li>
<li>true ‘INFO: End of: ./build-steps.d/1300_create-debian-img No error detected. (benchmark: 00:04:45)’</li>
<li>true ‘INFO: End of: ./build-steps.d/1700_install-meta-packages No error detected. (benchmark: 00:07:09)’</li>
<li>true ‘INFO: End of: ./build-steps.d/1900_run-chroot-scripts-pre-d No error detected. (benchmark: 00:00:38)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2000_install-files-packages No error detected. (benchmark: 00:00:32)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2100_verify-files No error detected. (benchmark: 00:00:08)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2300_run-chroot-scripts-post-d No error detected. (benchmark: 00:02:54)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2350_cleanup No error detected. (benchmark: 00:00:08)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2400_convert-img-to-qcow2 No error detected. (benchmark: 00:00:00)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2500_convert-img-to-vdi No error detected. (benchmark: 00:08:12)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2600_create-vbox-vm No error detected. (benchmark: 00:00:13)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2700_export-vbox-vm No error detected. (benchmark: 00:02:00)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2800_create-report No error detected. (benchmark: 00:13:38)’</li>
<li>true ‘INFO: End of: ./whonix_build No error detected. (benchmark: 00:41:12)’[/code]</li>
</ul>
<p>Deleted the build, started fresh.</p>
<p>Whonix-Gateway build number 2:</p>
<p>[code]</p>
<ul>
<li>true ‘INFO: End of: ./build-steps.d/1100_prepare-build-machine No error detected. (benchmark: 00:00:12)’</li>
<li>true ‘INFO: End of: ./build-steps.d/1200_create-debian-packages No error detected. (benchmark: 00:01:02)’</li>
<li>true ‘INFO: End of: ./build-steps.d/1300_create-debian-img No error detected. (benchmark: 00:02:24)’</li>
<li>true ‘INFO: End of: ./build-steps.d/1700_install-meta-packages No error detected. (benchmark: 00:06:38)’</li>
<li>true ‘INFO: End of: ./build-steps.d/1900_run-chroot-scripts-pre-d No error detected. (benchmark: 00:00:30)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2000_install-files-packages No error detected. (benchmark: 00:01:52)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2100_verify-files No error detected. (benchmark: 00:00:09)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2300_run-chroot-scripts-post-d No error detected. (benchmark: 00:03:03)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2350_cleanup No error detected. (benchmark: 00:00:07)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2400_convert-img-to-qcow2 No error detected. (benchmark: 00:00:00)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2500_convert-img-to-vdi No error detected. (benchmark: 00:07:34)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2600_create-vbox-vm No error detected. (benchmark: 00:00:12)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2700_export-vbox-vm No error detected. (benchmark: 00:02:46)’</li>
<li>true ‘INFO: End of: ./build-steps.d/2800_create-report No error detected. (benchmark: 00:37:58)’</li>
<li>true ‘INFO: End of: ./whonix_build No error detected. (benchmark: 01:04:29)’[/code]</li>
</ul>
<p>Whonix-Workstation build number 2:</p>
<pre><code class="lang-auto">+ true 'INFO: End of: ./build-steps.d/1100_prepare-build-machine No error detected. (benchmark: 00:00:03)'
+ true 'INFO: End of: ./build-steps.d/1200_create-debian-packages No error detected. (benchmark: 00:01:03)'
+ true 'INFO: End of: ./build-steps.d/1300_create-debian-img No error detected. (benchmark: 00:02:58)'
+ true 'INFO: End of: ./build-steps.d/1700_install-meta-packages No error detected. (benchmark: 00:07:58)'
+ true 'INFO: End of: ./build-steps.d/1900_run-chroot-scripts-pre-d No error detected. (benchmark: 00:00:43)'
+ true 'INFO: End of: ./build-steps.d/2000_install-files-packages No error detected. (benchmark: 00:02:06)'
+ true 'INFO: End of: ./build-steps.d/2100_verify-files No error detected. (benchmark: 00:00:08)'
+ true 'INFO: End of: ./build-steps.d/2300_run-chroot-scripts-post-d No error detected. (benchmark: 00:02:46)'
+ true 'INFO: End of: ./build-steps.d/2350_cleanup No error detected. (benchmark: 00:00:07)'
+ true 'INFO: End of: ./build-steps.d/2400_convert-img-to-qcow2 No error detected. (benchmark: 00:00:01)'
+ true 'INFO: End of: ./build-steps.d/2500_convert-img-to-vdi No error detected. (benchmark: 00:02:19)'
+ true 'INFO: End of: ./build-steps.d/2600_create-vbox-vm No error detected. (benchmark: 00:00:12)'
+ true 'INFO: End of: ./build-steps.d/2700_export-vbox-vm No error detected. (benchmark: 00:01:34)'
+ true 'INFO: End of: ./build-steps.d/2800_create-report No error detected. (benchmark: 00:33:05)'
+ true 'INFO: End of: ./whonix_build No error detected. (benchmark: 00:55:03)</code></pre>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/110">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/110</link>
        <pubDate>Sun, 09 Feb 2014 22:41:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-110</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <blockquote>I plan a further improvement to speed up build times: making steps 1400_backup-img-after-grml-debootstrap and 1800_backup-img-after-meta-package-install disabled by default, possible opt-in as build configuration. (These steps are only useful at certain points in development as a developer.)</blockquote>
Done.
<p>Speed issues sorted out in 7.7.8.0.</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/109">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/109</link>
        <pubDate>Sun, 09 Feb 2014 22:30:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-109</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>No extra file. The information will be included in the usual output of Whonix’s build script.</p>
<p>The last line in any build/help step looks like this:</p>
<pre><code class="lang-auto"></code></pre>
<p>So for example, it will say:</p>
<blockquote>INFO: End of: ./build-steps/1200_create-debian-packages No error detected. (benchmark: 00:04:05)</blockquote>
<p>That feature seems to work quite well in 7.7.7.3 - but I still need to fix the 2800_create-report step.</p>
<p>I plan a further improvement to speed up build times: making steps 1400_backup-img-after-grml-debootstrap and 1800_backup-img-after-meta-package-install disabled by default, possible opt-in as build configuration. (These steps are only useful at certain points in development as a developer.)</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/108">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/108</link>
        <pubDate>Fri, 07 Feb 2014 17:45:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-108</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Occq]]></dc:creator>
        <description><![CDATA[
            <p>Benchmark value is displayed in a certain file? Or how do I see how long did the build take?</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/107">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/107</link>
        <pubDate>Fri, 07 Feb 2014 15:47:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-107</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <blockquote>This failed miserable but I guess it does not matter.</blockquote>
Yeah, this hostname thing is tricky. When changing /etc/hosts /etc/hostname you either need to reboot or to run "sudo hostname host". Fortunately, will hopefully not be required.
<blockquote>Does the newly added benchmark function contain the total start-end build time?</blockquote>
Per machine/VM, yes. The whonix_build script has a benchmark. (The whonix_build_both script has no benchmark, but it runs the whonix_build script.)
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/106">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/106</link>
        <pubDate>Thu, 06 Feb 2014 18:50:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-106</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Occq]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="103" data-topic="28">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/o/49beb7/40.png" class="avatar"> Occq:</div>
<blockquote>
<p>I’ve set the hostname on “host” (both in etc/hostname and etc/hosts)</p>
</blockquote>
</aside>
<p>This failed miserable but I guess it does not matter.</p>
<p>Building Gateway 7.7.6.7 in a VM I got several “sudo: unable to resolve host host” errors and again the GPG error (as in the case of Workstation).</p>
<p>[quote=“adrelanos, post:104, topic:28”]The gpg folder bug can be fixed in next git tag.</p>
<p>The good news is, it’s not slow due to symlinks/hosts etc. I was wrong on that. It is libguestfs / guestmount, that is slow. They gave me some advice on how to speed that up:<br>
<a href="https://www.redhat.com/archives/libguestfs/2014-February/msg00032.html" class="onebox" target="_blank" rel="nofollow noopener">https://www.redhat.com/archives/libguestfs/2014-February/msg00032.html</a></p>
<p>Since it seems complicated to install recent libguestfs / guestmount on wheezy, I think I revert back to kpartx.[/quote]</p>
<p>Hm, OK. Let me know when I should test the next tag.</p>
<p>Does the newly added benchmark function contain the total start-end build time?</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/105">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/105</link>
        <pubDate>Thu, 06 Feb 2014 17:31:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-105</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>The gpg folder bug can be fixed in next git tag.</p>
<p>The good news is, it’s not slow due to symlinks/hosts etc. I was wrong on that. It is libguestfs / guestmount, that is slow. They gave me some advice on how to speed that up:<br>
<a href="https://www.redhat.com/archives/libguestfs/2014-February/msg00032.html" class="onebox" target="_blank">https://www.redhat.com/archives/libguestfs/2014-February/msg00032.html</a></p>
<p>Since it seems complicated to install recent libguestfs / guestmount on wheezy, I think I revert back to kpartx.</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/104">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/104</link>
        <pubDate>Thu, 06 Feb 2014 17:29:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-104</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Occq]]></dc:creator>
        <description><![CDATA[
            <p>I’ve set the hostname on “host” (both in etc/hostname and etc/hosts) and ran 7.7.6.7 Workstation image build in a VM.</p>
<p>Build failed at 1700. GPG folder creation fail? This is a first.</p>
<pre><code class="lang-auto">run-parts: executing ./build-steps.d/1700_install-meta-packages
+ true 'Currently running script: ./build-steps.d/1700_install-meta-packages '
+ TEMP_SCRIPTNAME=./build-steps.d/1700_install-meta-packages
+++ dirname ./build-steps.d/1700_install-meta-packages
++ cd ./build-steps.d
++ pwd
+ MYDIR=/home/user/nothing-to-see/build-steps.d
+ cd /home/user/nothing-to-see/build-steps.d
+ cd ..
+ cd help-steps
+ source pre
++ set +x
+ source variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_new_changelog_version: 2:7.7.6.7-debpackage1
+ true 'INFO: Currently running script: ./build-steps.d/1700_install-meta-packages '
+ install-meta-packages
+ trap error_handler_unchroot_unprevent_unmount ERR INT TERM
+ '[' 1 = 1 ']'
+ '[' '!' -f /home/user/whonix_binary/gpg-local-signing-key/done ']'
+ sync
+ /home/user/nothing-to-see/help-steps/mount-img
+++ dirname /home/user/nothing-to-see/help-steps/mount-img
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_new_changelog_version: 2:7.7.6.7-debpackage1
+ '[' 0 = 1 ']'
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/mount-img '
+ mount_img
+ trap error_handler_mount-img ERR INT TERM
+ local raw_file=/home/user/whonix_binary/Whonix-Workstation.img
+ mkdir --parents /home/user/whonix_binary/Whonix-Workstation_image
+ sync
+ guestmount -o allow_other -a /home/user/whonix_binary/Whonix-Workstation.img -m /dev/sda1 /home/user/whonix_binary/Whonix-Workstation_image
warning: Unable to get device geometry for /var/tmp/guestfs.gcJZ47/root
+ sync
+ benchmark_time_end
++ date +%s
+ benchmark_time_end=1391688773
+ benchmark_took_seconds=85
++ convertsecs 85
++ (( h=85/3600 ))
++ (( m=(85%3600)/60 ))
++ (( s=85%60 ))
++ printf '%02d:%02d:%02d\n' 0 1 25
++ true
+ benchmark_took_time=00:01:25
+ true
+ true 'INFO: End of: /home/user/nothing-to-see/help-steps/mount-img No error detected. (benchmark: 00:01:25)'
+ /home/user/nothing-to-see/help-steps/prevent-daemons-from-starting
+++ dirname /home/user/nothing-to-see/help-steps/prevent-daemons-from-starting
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_new_changelog_version: 2:7.7.6.7-debpackage1
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/prevent-daemons-from-starting '
+ prevent_daemons_from_starting
+ trap error_handler_prevent_daemons_from_starting ERR INT TERM
+ sync
+ echo 'chroot-img: copy policy-rc.d into /usr/sbin/ to prevent daemons from starting.'
chroot-img: copy policy-rc.d into /usr/sbin/ to prevent daemons from starting.
+ cp --preserve --verbose /home/user/nothing-to-see/whonix_shared/usr/share/whonix/policy-rc.d /home/user/whonix_binary/Whonix-Workstation_image/usr/sbin/policy-rc.d
`/home/user/nothing-to-see/whonix_shared/usr/share/whonix/policy-rc.d' -&gt; `/home/user/whonix_binary/Whonix-Workstation_image/usr/sbin/policy-rc.d'
+ sync
+ benchmark_time_end
++ date +%s
+ benchmark_time_end=1391688778
+ benchmark_took_seconds=5
++ convertsecs 5
++ (( h=5/3600 ))
++ (( m=(5%3600)/60 ))
++ (( s=5%60 ))
++ printf '%02d:%02d:%02d\n' 0 0 5
++ true
+ benchmark_took_time=00:00:05
+ true
+ true 'INFO: End of: /home/user/nothing-to-see/help-steps/prevent-daemons-from-starting No error detected. (benchmark: 00:00:05)'
+ sync
+ chroot /home/user/whonix_binary/Whonix-Workstation_image update-grub -v
grub-mkconfig (GRUB) 1.99-27+deb7u2
+ chroot /home/user/whonix_binary/Whonix-Workstation_image sync
+ sync
+ '[' 0 = 1 ']'
+ cp /home/user/nothing-to-see/whonix_shared/etc/apt/sources.list.whonix /home/user/whonix_binary/Whonix-Workstation_image/etc/apt/sources.list
+ cp /home/user/nothing-to-see/whonix_shared/etc/apt/preferences.d/50_banned-packages /home/user/whonix_binary/Whonix-Workstation_image/etc/apt/preferences.d/
+ cp /home/user/nothing-to-see/whonix_shared/etc/apt/apt.conf.d/90whonix-timeout /home/user/whonix_binary/Whonix-Workstation_image/etc/apt/apt.conf.d/
+ sync
+ /home/user/nothing-to-see/help-steps/chroot-img
+++ dirname /home/user/nothing-to-see/help-steps/chroot-img
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_new_changelog_version: 2:7.7.6.7-debpackage1
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/chroot-img '
+ chroot-img
+ trap error_handler_chroot-img ERR INT TERM
+ sync
+ '[' 0 = 1 ']'
+ mount --bind /dev /home/user/whonix_binary/Whonix-Workstation_image/dev
+ mount --bind /proc /home/user/whonix_binary/Whonix-Workstation_image/proc
+ '[' '' = 0 ']'
+ '[' 0 = 1 ']'
+ true 'INFO /home/user/nothing-to-see/help-steps/chroot-img: BARE_METAL is 0, NOT using .backup files as /etc/resolv.conf etc, ok.'
+ mount --bind /etc/resolv.conf /home/user/whonix_binary/Whonix-Workstation_image/etc/resolv.conf
+ mount --bind /etc/hosts /home/user/whonix_binary/Whonix-Workstation_image/etc/hosts
+ mount --bind /etc/hostname /home/user/whonix_binary/Whonix-Workstation_image/etc/hostname
+ mount --bind /etc/network/interfaces /home/user/whonix_binary/Whonix-Workstation_image/etc/network/interfaces
+ sync
+ benchmark_time_end
++ date +%s
+ benchmark_time_end=1391688787
+ benchmark_took_seconds=2
++ convertsecs 2
++ (( h=2/3600 ))
++ (( m=(2%3600)/60 ))
++ (( s=2%60 ))
++ printf '%02d:%02d:%02d\n' 0 0 2
++ true
+ benchmark_took_time=00:00:02
+ true
+ true 'INFO: End of: /home/user/nothing-to-see/help-steps/chroot-img No error detected. (benchmark: 00:00:02)'
+ /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo
+++ dirname /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_new_changelog_version: 2:7.7.6.7-debpackage1
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo '
+ create_local_temp_apt_repo
+ trap error_handler_general ERR INT TERM
+ sudo -u user gpg --no-options --no-default-keyring --homedir /home/user/whonix_binary/gpg-local-signing-key --export whonix@local-signing.key
+ gpg --no-options --no-default-keyring --keyring /home/user/whonix_binary/Whonix-Workstation_image/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg --import
gpg: keyblock resource `/root/.gnupg/secring.gpg': file open error
gpg: keyring `/home/user/whonix_binary/Whonix-Workstation_image/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg' created
gpg: fatal: /root/.gnupg: directory does not exist!
secmem usage: 1408/1408 bytes in 2/2 blocks of pool 1408/32768
++ error_handler_general
++ local exit_code=2
++ rm --force /etc/apt/sources.list.d/whonix_temp.list
++ benchmark_time_end
+++ date +%s
++ benchmark_time_end=1391688791
++ benchmark_took_seconds=4
+++ convertsecs 4
+++ (( h=4/3600 ))
+++ (( m=(4%3600)/60 ))
+++ (( s=4%60 ))
+++ printf '%02d:%02d:%02d\n' 0 0 4
+++ true
++ benchmark_took_time=00:00:04
++ true
+++ caller
++ echo '
(benchmark: 00:00:04)
BASH_COMMAND: gpg --no-options --no-default-keyring --keyring "$CHROOT_FOLDER/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg" --import
exit_code: 2
ERROR /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo: | caller: 25 /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo
'

(benchmark: 00:00:04)
BASH_COMMAND: gpg --no-options --no-default-keyring --keyring "$CHROOT_FOLDER/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg" --import
exit_code: 2
ERROR /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo: | caller: 25 /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo

++ exit 1
++ error_handler_unchroot_unprevent_unmount
++ benchmark_time_end
+++ date +%s
++ benchmark_time_end=1391688791
++ benchmark_took_seconds=107
+++ convertsecs 107
+++ (( h=107/3600 ))
+++ (( m=(107%3600)/60 ))
+++ (( s=107%60 ))
+++ printf '%02d:%02d:%02d\n' 0 1 47
+++ true
++ benchmark_took_time=00:01:47
++ true
++ echo 'ERROR in ./build-steps.d/1700_install-meta-packages. Aborting... (benchmark: 00:01:47)'
ERROR in ./build-steps.d/1700_install-meta-packages. Aborting... (benchmark: 00:01:47)
++ rm --force /var/run/whonix/package_manager_lock
++ /home/user/nothing-to-see/help-steps/remove-local-temp-apt-repo
+++ dirname /home/user/nothing-to-see/help-steps/remove-local-temp-apt-repo
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_new_changelog_version: 2:7.7.6.7-debpackage1
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/remove-local-temp-apt-repo '
+ remove_local_temp_apt_repo
+ trap error_handler_general ERR INT TERM
+ rm --force /home/user/whonix_binary/Whonix-Workstation_image/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg
+ rm --force /home/user/whonix_binary/Whonix-Workstation_image/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg~
+ rm --force /home/user/whonix_binary/Whonix-Workstation_image//var/lib/whonix/sources_temp_list.d/whonix_temp_initialdeb.list
+ rm --force /home/user/whonix_binary/Whonix-Workstation_image//var/lib/whonix/sources_temp_list.d/build_sources.list
+ benchmark_time_end
++ date +%s
+ benchmark_time_end=1391688794
+ benchmark_took_seconds=3
++ convertsecs 3
++ (( h=3/3600 ))
++ (( m=(3%3600)/60 ))
++ (( s=3%60 ))
++ printf '%02d:%02d:%02d\n' 0 0 3
++ true
+ benchmark_took_time=00:00:03
+ true
+ true 'INFO: End of: /home/user/nothing-to-see/help-steps/remove-local-temp-apt-repo No error detected. (benchmark: 00:00:03)'
++ /home/user/nothing-to-see/help-steps/unchroot-img
+++ dirname /home/user/nothing-to-see/help-steps/unchroot-img
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_new_changelog_version: 2:7.7.6.7-debpackage1
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/unchroot-img '
+ do_unchroot
+ trap error_handler_unchroot-img ERR INT TERM
+ sync
+ '[' 0 = 1 ']'
+ umount /home/user/whonix_binary/Whonix-Workstation_image/dev
+ umount /home/user/whonix_binary/Whonix-Workstation_image/proc
+ umount /home/user/whonix_binary/Whonix-Workstation_image//mnt/initialdeb
umount: /home/user/whonix_binary/Whonix-Workstation_image//mnt/initialdeb: not found
+ true
+ umount /home/user/whonix_binary/Whonix-Workstation_image/etc/resolv.conf
+ umount /home/user/whonix_binary/Whonix-Workstation_image/etc/hosts
+ umount /home/user/whonix_binary/Whonix-Workstation_image/etc/hostname
+ umount /home/user/whonix_binary/Whonix-Workstation_image/etc/network/interfaces
+ sync
+ benchmark_time_end
++ date +%s
+ benchmark_time_end=1391688796
+ benchmark_took_seconds=2
++ convertsecs 2
++ (( h=2/3600 ))
++ (( m=(2%3600)/60 ))
++ (( s=2%60 ))
++ printf '%02d:%02d:%02d\n' 0 0 2
++ true
+ benchmark_took_time=00:00:02
+ true
+ true 'INFO: End of: /home/user/nothing-to-see/help-steps/unchroot-img No error detected. (benchmark: 00:00:02)'
++ /home/user/nothing-to-see/help-steps/unprevent-daemons-from-starting
+++ dirname /home/user/nothing-to-see/help-steps/unprevent-daemons-from-starting
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_new_changelog_version: 2:7.7.6.7-debpackage1
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/unprevent-daemons-from-starting '
+ unprevent_daemons_from_starting
+ sync
+ rm --verbose --force /home/user/whonix_binary/Whonix-Workstation_image/usr/sbin/policy-rc.d
removed `/home/user/whonix_binary/Whonix-Workstation_image/usr/sbin/policy-rc.d'
+ sync
+ benchmark_time_end
++ date +%s
+ benchmark_time_end=1391688798
+ benchmark_took_seconds=2
++ convertsecs 2
++ (( h=2/3600 ))
++ (( m=(2%3600)/60 ))
++ (( s=2%60 ))
++ printf '%02d:%02d:%02d\n' 0 0 2
++ true
+ benchmark_took_time=00:00:02
+ true
+ true 'INFO: End of: /home/user/nothing-to-see/help-steps/unprevent-daemons-from-starting No error detected. (benchmark: 00:00:02)'
++ /home/user/nothing-to-see/help-steps/unmount-img
+++ dirname /home/user/nothing-to-see/help-steps/unmount-img
++ cd /home/user/nothing-to-see/help-steps
++ pwd
+ MYDIR=/home/user/nothing-to-see/help-steps
+ source /home/user/nothing-to-see/help-steps/pre
++ set +x
+ source /home/user/nothing-to-see/help-steps/variables
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
whonix_build_new_changelog_version: 2:7.7.6.7-debpackage1
+ '[' 0 = 1 ']'
+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/unmount-img '
+ unmount_img
+ trap error_handler_unmount-img ERR INT TERM
+ sync
+ wait 24174
+ sleep 2
+ sync
+ local command_v_exit_code=0
+ command -v guestunmount
+ command_v_exit_code=1
+ true
+ '[' 1 = 0 ']'
+ true 'INFO: guestunmount not available, using "fusermount -u" instead, ok... '
+ fusermount -u /home/user/whonix_binary/Whonix-Workstation_image
+ sync
+ rm -r /home/user/whonix_binary/Whonix-Workstation_image
+ sync
+ benchmark_time_end
++ date +%s
+ benchmark_time_end=1391688803
+ benchmark_took_seconds=4
++ convertsecs 4
++ (( h=4/3600 ))
++ (( m=(4%3600)/60 ))
++ (( s=4%60 ))
++ printf '%02d:%02d:%02d\n' 0 0 4
++ true
+ benchmark_took_time=00:00:04
+ true
+ true 'INFO: End of: /home/user/nothing-to-see/help-steps/unmount-img No error detected. (benchmark: 00:00:04)'
++ echo 'ERROR in ./build-steps.d/1700_install-meta-packages! Aborted.'
ERROR in ./build-steps.d/1700_install-meta-packages! Aborted.
++ exit 1
run-parts: ./build-steps.d/1700_install-meta-packages exited with return code 1
++ error_handler_build-machine
+++ caller
++ : echo '
BASH_COMMAND: run-parts --verbose --exit-on-error ./build-steps.d
ERROR ./nothing-to-see/whonix_build: | caller: 45 ./nothing-to-see/whonix_build
'
++ exit 1</code></pre>
<p>Specific error</p>
<pre><code class="lang-auto">+ true 'INFO: Currently running script: /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo '
+ create_local_temp_apt_repo
+ trap error_handler_general ERR INT TERM
+ sudo -u user gpg --no-options --no-default-keyring --homedir /home/user/whonix_binary/gpg-local-signing-key --export whonix@local-signing.key
+ gpg --no-options --no-default-keyring --keyring /home/user/whonix_binary/Whonix-Workstation_image/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg --import
gpg: keyblock resource `/root/.gnupg/secring.gpg': file open error
gpg: keyring `/home/user/whonix_binary/Whonix-Workstation_image/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg' created
gpg: fatal: /root/.gnupg: directory does not exist!
secmem usage: 1408/1408 bytes in 2/2 blocks of pool 1408/32768
++ error_handler_general
++ local exit_code=2
++ rm --force /etc/apt/sources.list.d/whonix_temp.list
++ benchmark_time_end
+++ date +%s
++ benchmark_time_end=1391688791
++ benchmark_took_seconds=4
+++ convertsecs 4
+++ (( h=4/3600 ))
+++ (( m=(4%3600)/60 ))
+++ (( s=4%60 ))
+++ printf '%02d:%02d:%02d\n' 0 0 4
+++ true
++ benchmark_took_time=00:00:04
++ true
+++ caller
++ echo '
(benchmark: 00:00:04)
BASH_COMMAND: gpg --no-options --no-default-keyring --keyring "$CHROOT_FOLDER/etc/apt/trusted.gpg.d/whonix-temporary-local-apt-repository.gpg" --import
exit_code: 2
ERROR /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo: | caller: 25 /home/user/nothing-to-see/help-steps/create-local-temp-apt-repo</code></pre>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/103">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/103</link>
        <pubDate>Thu, 06 Feb 2014 13:42:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-103</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>My attempt to fix it in 7.7.6.7 didn’t work out. Gateway should build (not fully tested) and it includes the benchmark. But it’s still very slow.</p>
<p>The issue is, that by design, the VM image should have another /etc/hostname, /etc/hosts, /etc/resolv.conf and /etc/network/interfaces than the host. For example /etc/hostname in Whonix VMs is “host”. The build script also requires to run some commands as “user”, not “root”. Unfortunately, sudo seems to heavily depend on /etc/hostname, /etc/hosts (and /etc/resolv.conf ?). Otherwise you get “sudo: unable to resolve host debian”. Also lots of other applications seem to depend on these three files being correct.</p>
<p>Currently these host files are temporarily mounted inside the chrooted VM image. From safety/logical standpoint it’s fine. Just much too slow.</p>
<p>I never spotted it before, because I used to build Whonix inside Whonix. And there the host’s and the chrooted image’s hostname match, hence no speed issues.</p>
<p>One solution to this obscure problem would be to ask the builder to set it’s hostname to “host”. Which may not be possible for everyone (might force them to build inside a VM). Or automatically setting up the host, warning in the build documentation that it does that and recommending to always build inside a VM. Someone who reads this must think, “wtf? What botcher messed that up?”</p>
<p>Another solution could be linux network namespaces. Not sure about that. Looks difficult. Or something else. Perhaps guestfish. Or any other workaround/solution.</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/102">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/102</link>
        <pubDate>Thu, 06 Feb 2014 00:22:45 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-102</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <blockquote>Regarding repositories, let me see if I got this correct.</blockquote>
Sorry for the confusion. I am still making up my mind on how to handle that best.
<p>The real fix would be to add “-stable, -testers-only” to the tags as earlier discussed. But that requires some source code changes because version numbers are derived from current git tag. I didn’t get to implement that yet.</p>
<p>Let’s only use Whonix/Whonix until that gets implemented. Non-perfect, but still better than the current mess.</p>
<blockquote>Did you push 7.7.6.4 to adrelanos/Whonix?</blockquote>
No. Pushed now 7.7.6.4 to Whonxi/Whonix.
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/101">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/101</link>
        <pubDate>Thu, 06 Feb 2014 00:00:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-101</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Occq]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="92" data-topic="28">
<div class="title">
<div class="quote-controls"></div>
 adrelanos:</div>
<blockquote>
<p>[quote](Whonix/Whonix vs adrelanos/nothing-to-see)</p>
</blockquote>
</aside>
<p>Please don’t use adrelanos/nothing-to-see in wiki pages all. As soon we train users again to blindly use the latest tag at adrelanos/nothing-to-see and then report versions I just needed a temporary tag for myself and then wonder why it’s broken, I need a new “secret” repository just for those knowing what they are really expecting.</p>
<p>When required, I can push tags Whonix/Whonix and/or adrelanos/Whonix. Takes  only seconds.</p>
<p>I am not sure it’s a good idea having both in wiki pages, having Whonix/Whonix and adrelanos/Whonix at all. I haven’t implemented the x.x.x.x-testers-only etc. thing yet. Until I do it’s probably best to have test tags in adrelanos/Whonix only since the mindset “greatest = best” is too widespread.[/quote]</p>
<p>Regarding repositories, let me see if I got this correct.</p>
<p>[code]Whonix/Whonix<br>
Stable version tags (just stable, no testers no developers?)</p>
<p>adrelanos/Whonix<br>
Stable and testers-only tags (developers here too?)</p>
<p>adrelanos/nothing-to-see<br>
Temporary tags for you<br>
[/code]</p>
<p>Did you push 7.7.6.4 to adrelanos/Whonix?</p>
<aside class="quote" data-post="93" data-topic="28">
<div class="title">
<div class="quote-controls"></div>
 adrelanos:</div>
<blockquote>
<p>I could create a Whonix 8 tag being copy of 7.7.6.4, release it as release candidate, test it more, ask for more testing and then bless it stable. A non-perfect version might be better than no buildable version at all. What do you think?</p>
</blockquote>
</aside>
<p>I plan to deal with Wiki when 8 is released but a 7.7.6.4 short guide will be available when I get a few consecutive successful builds on various hardware done.</p>
<p>When stopwatch function will be implemented and when we figure out those weird bugs, release candidate seems like the right thing to do.</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/100">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/100</link>
        <pubDate>Wed, 05 Feb 2014 20:28:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-100</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
      <item>
        <title>Building Whonix with --install-to-root [[--bare-metal]] option in a VM</title>
        <dc:creator><![CDATA[Occq]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="98" data-topic="28">
<div class="title">
<div class="quote-controls"></div>
 adrelanos:</div>
<blockquote>
<p>Please check your build machine’s grml-debootstrap version. <code>dpkg -l | grep grml-debootstrap</code> Is it 0.59?</p>
</blockquote>
</aside>
<p>0.59.</p>
<blockquote>2) Was it a VM or bare metal build?</blockquote>
<p>Gateway option in VM.</p>
<blockquote>Does this error persist? Let's hope not.</blockquote>
<p>I’ll running it again with a log.</p>
          <p><a href="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/99">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28/99</link>
        <pubDate>Wed, 05 Feb 2014 20:12:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-28-99</guid>
        <source url="http://forums.whonix.org/t/building-whonix-with-install-to-root-bare-metal-option-in-a-vm/28.rss">Building Whonix with --install-to-root [[--bare-metal]] option in a VM</source>
      </item>
  </channel>
</rss>
