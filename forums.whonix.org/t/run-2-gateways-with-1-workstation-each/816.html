<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Run 2 Gateways with 1 Workstation each - Support - Whonix Forum</title>
    <meta name="description" content="Whats the easiest way to achieve this?  

At the moment I&amp;#39;m trying to change the control port on the second gateway and put each pair in a seperate internal network in VirtualBox. This results in error 255 (Tor&amp;#39;s control&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="816.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Run 2 Gateways with 1 Workstation each&#39;" href="816.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/run-2-gateways-with-1-workstation-each/816" />
<meta name="twitter:url" content="https://forums.whonix.org/t/run-2-gateways-with-1-workstation-each/816" />
<meta property="og:title" content="Run 2 Gateways with 1 Workstation each" />
<meta name="twitter:title" content="Run 2 Gateways with 1 Workstation each" />
<meta property="og:description" content="Whats the easiest way to achieve this?  At the moment I’m trying to change the control port on the second gateway and put each pair in a seperate internal network in VirtualBox. This results in error 255 (Tor’s control port could not be reached) in my gateway. I guess there is a firewall preconfigured that blocks all ports but the default one? How can I change this?  My workstations are using Windows XP (I know about the potential security issues), which works fine for the first gateway." />
<meta name="twitter:description" content="Whats the easiest way to achieve this?  At the moment I’m trying to change the control port on the second gateway and put each pair in a seperate internal network in VirtualBox. This results in error 255 (Tor’s control port could not be reached) in my gateway. I guess there is a firewall preconfigured that blocks all ports but the default one? How can I change this?  My workstations are using Windows XP (I know about the potential security issues), which works fine for the first gateway." />
<meta property="article:published_time" content="2015-01-18T22:28:00+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="816.html">Run 2 Gateways with 1 Workstation each</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/support/5.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #8C6238'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Support</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Honsker'><span itemprop='name'>Honsker</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="816.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-18T22:28:00Z' class='post-time'>
                January 18, 2015, 10:28pm
              </time>
              <meta itemprop='dateModified' content='2015-01-18T22:28:00Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Whats the easiest way to achieve this?</p>
<p>At the moment I’m trying to change the control port on the second gateway and put each pair in a seperate internal network in VirtualBox. This results in error 255 (Tor’s control port could not be reached) in my gateway. I guess there is a firewall preconfigured that blocks all ports but the default one? How can I change this?</p>
<p>My workstations are using Windows XP (I know about the potential security issues), which works fine for the first gateway.</p>
        </div>

        <meta itemprop='headline' content='Run 2 Gateways with 1 Workstation each'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="816.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-19T00:35:47Z' class='post-time'>
                January 19, 2015, 12:35am
              </time>
              <meta itemprop='dateModified' content='2015-01-19T00:35:47Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Two gateways for one workstation? What’s the point of this? Congratulations! You’re the first one to my knowledge ever asking this. But this also means, you might be trying something odd here, that could be archived some other way.</p>
<p>See also, XyProblem:<br>
<a href="../../../external.html?link=http://mywiki.wooledge.org/XyProblem" class="onebox" target="_blank">http://mywiki.wooledge.org/XyProblem</a></p>
<p>[hr]</p>
<p>To learn more:</p>
<p>Some design documentation:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Tor_Browser#Whonix_Proxy_Settings" target="_blank" title="05:27PM - 03 May 2020">Whonix – 3 May 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:666/500;"><img src="../../../external.html?link=https://www.whonix.org/w/images/1/19/Torbrowser.png" class="thumbnail" width="666" height="500"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Tor_Browser#Whonix_Proxy_Settings" target="_blank">Tor Browser Basics</a></h3>

<p>Using Tor Browser in Whonix ™. Anonymity vs Pseudonymity, HTTPS Everywhere, Torbutton, Protection against dangerous JavaScript, NoScript, Tips, Update Tor Browser, Browser Plugins, Change Language</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>
(see footnote)</p>
<p>Search in Whonix source code folder:</p>
<pre><code class="lang-auto">grep -r --exclude-dir=".git" 9151
grep -r --exclude-dir=".git" 9051</code></pre>
<p>[hr]</p>
<p>Hint… No finished/tested solution…</p>
<p>Create /etc/whonix.d/50_user</p>
<pre><code class="lang-auto">TOR_CONTROL_HOST="10.152.152.10"
TOR_CONTROL_PORT="9052"</code></pre>
<p>Port is currently hard coded (will be improved in cpfp-py):<br>
<a href="../../../external.html?link=https://github.com/Whonix/control-port-filter/blob/Whonix9/usr/bin/controlportfilt#L69" class="onebox" target="_blank">https://github.com/Whonix/control-port-filter/blob/Whonix9/usr/bin/controlportfilt#L69</a></p>
        </div>

        <meta itemprop='headline' content='Run 2 Gateways with 1 Workstation each'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="816.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-19T00:37:05Z' class='post-time'>
                January 19, 2015, 12:37am
              </time>
              <meta itemprop='dateModified' content='2015-01-19T00:37:05Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>More hints of that sort…<br>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/Whonix9/usr/share/tor/tor-service-defaults-torrc.anondist#L96" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/Whonix9/usr/share/tor/tor-service-defaults-torrc.anondist#L96" target="_blank" rel="nofollow noopener">Whonix/anon-gw-anonymizer-config/blob/Whonix9/usr/share/tor/tor-service-defaults-torrc.anondist#L96</a></h4>
<pre class="onebox"><code class="lang-anondist"><ol class="start lines" start="86" style="counter-reset: li-counter 85 ;">
<li>
</li>
<li>## ControlPort is necessary for tor-arm and Vidalia.</li>
<li>## - Vidalia has to set /var/run/tor/control (default) as</li>
<li>##   Control Cookie. (Not installed by default)</li>
<li>## - Arm autodetects the Control Cookie. (Useful terminal Tor controller.)</li>
<li>## - Tor Control Port Filter Proxy</li>
<li>## - Not using HashedControlPassword or CookieAuthentication.</li>
<li>##   Gateway is no multi purpose machine. It is solely a</li>
<li>##   Tor Gateway. As soon as an adversary has physical access</li>
<li>##   or compromised Gateway, it's Game Over anyway.</li>
<li class="selected">ControlPort 9051</li>
<li>ControlListenAddress 127.0.0.1</li>
<li>
</li>
<li>Log notice syslog</li>
<li>Log notice file /run/tor/log</li>
<li>#Log notice file /var/log/tor/log</li>
<li>
</li>
<li>## Not required:</li>
<li>#DataDirectory /...</li>
<li>#PidFile /...</li>
<li>#ControlSocket /...</li>
</ol></code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>
+<br>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/Whonix9/usr/share/tor/tor-service-defaults-torrc.anondist#L5" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/Whonix9/usr/share/tor/tor-service-defaults-torrc.anondist#L5" target="_blank" rel="nofollow noopener">Whonix/anon-gw-anonymizer-config/blob/Whonix9/usr/share/tor/tor-service-defaults-torrc.anondist#L5</a></h4>
<pre class="onebox"><code class="lang-anondist"><ol class="start lines" start="1" style="counter-reset: li-counter 0 ;">
<li>## This file is part of Whonix.</li>
<li>## Copyright (C) 2012 - 2014 Patrick Schleizer &lt;adrelanos@riseup.net&gt;</li>
<li>## See the file COPYING for copying conditions.</li>
<li>
</li>
<li class="selected"># Please use "/etc/tor/torrc" for your custom configuration,</li>
<li># which will override the defaults found here. When this package is updated,</li>
<li># this file may be overwritten.</li>
<li>
</li>
<li>## You can find the original upstream tor-service-defaults-torrc under</li>
<li>## /usr/share/tor/tor-service-defaults-torrc.anondist-orig</li>
<li>
</li>
<li>######################################################################</li>
<li>## DO NOT CHANGE ANYTHING BELOW, UNLESS YOU KNOW WHAT YOU ARE DOING! #</li>
<li>## DO NOT CHANGE ANYTHING BELOW, UNLESS YOU KNOW WHAT YOU ARE DOING! #</li>
<li>## DO NOT CHANGE ANYTHING BELOW, UNLESS YOU KNOW WHAT YOU ARE DOING! #</li>
</ol></code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
        </div>

        <meta itemprop='headline' content='Run 2 Gateways with 1 Workstation each'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
