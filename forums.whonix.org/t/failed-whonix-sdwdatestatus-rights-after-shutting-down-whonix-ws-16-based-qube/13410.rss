<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>&quot;Failed: whonix.SdwdateStatus&quot; rights after shutting down whonix-ws-16 based qube</title>
    <link>http://forums.whonix.org/t/failed-whonix-sdwdatestatus-rights-after-shutting-down-whonix-ws-16-based-qube/13410</link>
    <description>![whonix|610x93](upload://uTdXTAQ08a3QGCrjebptUvih97M.png)

An error messages like the one above pops up right after I shut down whonix-ws-16-dvm based disposable qube. It&#39;s annoying and may scare some novice users.

## Reproducing
  1. Be on update Qubes 4.1
  2. start whonix-ws-16-based qube
  3. Shut it down

If the timing is right it will show that error message. If it doesn&#39;t just try again.

## Qrexec policy logs

When running in `dom0` the command `sudo journalctl -u qubes-qrexec-policy-daemon`, I see the following logs:

```
Mar 03 10:38:51 dom0 qrexec-policy-daemon[2987]: qrexec: whonix.SdwdateStatus+: sys-whonix -&gt; disp7810: allowed to disp7810
Mar 03 10:39:01 dom0 qrexec-policy-daemon[2987]: qrexec: whonix.SdwdateStatus+: sys-whonix -&gt; disp7810: allowed to disp7810
Mar 03 10:39:11 dom0 qrexec-policy-daemon[2987]: qrexec: whonix.SdwdateStatus+: sys-whonix -&gt; disp7810: allowed to disp7810
Mar 03 10:39:21 dom0 qrexec-policy-daemon[2987]: qrexec: whonix.SdwdateStatus+: sys-whonix -&gt; disp7810: allowed to disp7810
Mar 03 10:39:24 dom0 qrexec-policy-daemon[157609]: 2022-03-03 10:39:24.619 qrexec-client[157609]: process_io.c:187:process_io: vchan connection closed early (fds: 4 11 -1, status: -1 -1)
Mar 03 10:39:27 dom0 qrexec-policy-daemon[2987]: qrexec: whonix.SdwdateStatus: sys-whonix -&gt; disp7810: error while executing: Failed to start the target: &lt;module &#39;qrexec.exc&#39; from &#39;/usr/lib/python3.8/site-packages/qrexec/exc.py&#39;&gt;
```</description>
    <language>en</language>
    <lastBuildDate>Thu, 03 Mar 2022 14:27:39 +0000</lastBuildDate>
    <category>Qubes-Whonix</category>
    <atom:link href="http://forums.whonix.org/t/failed-whonix-sdwdatestatus-rights-after-shutting-down-whonix-ws-16-based-qube/13410.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>&quot;Failed: whonix.SdwdateStatus&quot; rights after shutting down whonix-ws-16 based qube</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote quote-modified" data-post="2" data-topic="13376">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/whonix-ws-16-based-vms-restart-after-shutdown/13376/2">Whonix-ws-16 based vms restart after shutdown</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/qubes-whonix/12"><span class="badge-category-bg" style="background-color: #63a0ff;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Everything specific to Qubes-Whonix. (devs)">Qubes-Whonix</span></a>
  </div>
  <blockquote>
    
  </blockquote>
</aside>

          <p><a href="http://forums.whonix.org/t/failed-whonix-sdwdatestatus-rights-after-shutting-down-whonix-ws-16-based-qube/13410/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/failed-whonix-sdwdatestatus-rights-after-shutting-down-whonix-ws-16-based-qube/13410/4</link>
        <pubDate>Thu, 03 Mar 2022 14:27:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13410-4</guid>
        <source url="http://forums.whonix.org/t/failed-whonix-sdwdatestatus-rights-after-shutting-down-whonix-ws-16-based-qube/13410.rss">&quot;Failed: whonix.SdwdateStatus&quot; rights after shutting down whonix-ws-16 based qube</source>
      </item>
      <item>
        <title>&quot;Failed: whonix.SdwdateStatus&quot; rights after shutting down whonix-ws-16 based qube</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>This update fix most if not all <code>Denied: whonix.</code> alike issues:</p>
<aside class="onebox githubissue" data-onebox-src="https://github.com/QubesOS/updates-status/issues/2824">
  <header class="source">

      <a href="https://github.com/QubesOS/updates-status/issues/2824" target="_blank" rel="noopener">github.com/QubesOS/updates-status</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/QubesOS/updates-status/issues/2824" target="_blank" rel="noopener">core-admin-addon-whonix v4.1.1 (r4.1)</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-02-18" data-time="03:30:22" data-timezone="UTC">03:30AM - 18 Feb 22 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/qubesos-bot" target="_blank" rel="noopener">
          <img alt="qubesos-bot" src="https://avatars.githubusercontent.com/u/24401983?v=4" class="onebox-avatar-inline" width="20" height="20">
          qubesos-bot
        </a>
      </div>
    </div>

    <div class="labels">
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          r4.1-dom0-cur-test
        </span>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">Update of core-admin-addon-whonix to v4.1.1 for Qubes r4.1, see comments below f<span class="show-more-container"><a href="http://forums.whonix.org" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">or details.

Built from: https://github.com/QubesOS/qubes-core-admin-addon-whonix/commit/6569ade6737d422690b2c15c2510b3bc2c5551b9

[Changes since previous version](https://github.com/QubesOS/qubes-core-admin-addon-whonix/compare/v4.0.2...v4.1.1):
QubesOS/qubes-core-admin-addon-whonix@6569ade version 4.1.1
QubesOS/qubes-core-admin-addon-whonix@bb93a3e Merge remote-tracking branch 'origin/pr/14'
QubesOS/qubes-core-admin-addon-whonix@0a74587 indent style fix
QubesOS/qubes-core-admin-addon-whonix@7bbe355 restrict qrexec `whonix.GatewayCommand`
QubesOS/qubes-core-admin-addon-whonix@9ea1779 remove hardcoded qrexec entries for better readability
QubesOS/qubes-core-admin-addon-whonix@cbe60a1 refined qrexec policy error handling
QubesOS/qubes-core-admin-addon-whonix@a7797aa allow empty argument only for `whonix.SdwdateStatus` qrexec call
QubesOS/qubes-core-admin-addon-whonix@d238125 fixed shutdown of App Qube (`anon-whonix`) denied message
QubesOS/qubes-core-admin-addon-whonix@d006367 version 4.1.0
QubesOS/qubes-core-admin-addon-whonix@887328e fix "Denied: whonix.SdwdateStatus" error message after DispVM has halted
QubesOS/qubes-core-admin-addon-whonix@71ffd29 port to new policy format
QubesOS/qubes-core-admin-addon-whonix@e96408c add `autostart=no` to qrexec policy
QubesOS/qubes-core-admin-addon-whonix@97f242c spec: add BR make
QubesOS/qubes-core-admin-addon-whonix@f5c3be1 gitlab-ci: move pylint earlier
QubesOS/qubes-core-admin-addon-whonix@aa70328 Add .gitlab-ci.yml
QubesOS/qubes-core-admin-addon-whonix@dbd239b Update travis
QubesOS/qubes-core-admin-addon-whonix@fffefc6 travis: switch to bionic

Referenced issues:
QubesOS/qubes-issues#7169
QubesOS/qubes-issues#4613
QubesOS/qubes-issues#7013
QubesOS/qubes-issues#6982

If you're release manager, you can issue GPG-inline signed command:

* `Upload core-admin-addon-whonix 6569ade6737d422690b2c15c2510b3bc2c5551b9 r4.1 current repo` (available 7 days from now)
* `Upload core-admin-addon-whonix 6569ade6737d422690b2c15c2510b3bc2c5551b9 r4.1 current (dists) repo`, you can choose subset of distributions, like `vm-fc24 vm-fc25` (available 7 days from now)
* `Upload core-admin-addon-whonix 6569ade6737d422690b2c15c2510b3bc2c5551b9 r4.1 security-testing repo`

Above commands will work only if packages in current-testing repository were built from given commit (i.e. no new version superseded it).</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/failed-whonix-sdwdatestatus-rights-after-shutting-down-whonix-ws-16-based-qube/13410/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/failed-whonix-sdwdatestatus-rights-after-shutting-down-whonix-ws-16-based-qube/13410/3</link>
        <pubDate>Thu, 03 Mar 2022 14:27:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13410-3</guid>
        <source url="http://forums.whonix.org/t/failed-whonix-sdwdatestatus-rights-after-shutting-down-whonix-ws-16-based-qube/13410.rss">&quot;Failed: whonix.SdwdateStatus&quot; rights after shutting down whonix-ws-16 based qube</source>
      </item>
      <item>
        <title>&quot;Failed: whonix.SdwdateStatus&quot; rights after shutting down whonix-ws-16 based qube</title>
        <dc:creator><![CDATA[deeplow]]></dc:creator>
        <description><![CDATA[
            <p>My guess it that it’s constantly trying to get SdwdateStatus and <code>sys-whonix</code> doesn’t detect early enough the shutdown of a Qube and hence sends the qrexec when the service to respond has already shut down.</p>
          <p><a href="http://forums.whonix.org/t/failed-whonix-sdwdatestatus-rights-after-shutting-down-whonix-ws-16-based-qube/13410/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/failed-whonix-sdwdatestatus-rights-after-shutting-down-whonix-ws-16-based-qube/13410/2</link>
        <pubDate>Thu, 03 Mar 2022 10:51:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13410-2</guid>
        <source url="http://forums.whonix.org/t/failed-whonix-sdwdatestatus-rights-after-shutting-down-whonix-ws-16-based-qube/13410.rss">&quot;Failed: whonix.SdwdateStatus&quot; rights after shutting down whonix-ws-16 based qube</source>
      </item>
      <item>
        <title>&quot;Failed: whonix.SdwdateStatus&quot; rights after shutting down whonix-ws-16 based qube</title>
        <dc:creator><![CDATA[deeplow]]></dc:creator>
        <description><![CDATA[
            <p><img src="//forums.whonix.org/uploads/default/original/2X/d/d87f57f7d09084a5396d062b8eac3716f48f373e.png" alt="whonix" data-base62-sha1="uTdXTAQ08a3QGCrjebptUvih97M" width="610" height="93"></p>
<p>An error messages like the one above pops up right after I shut down whonix-ws-16-dvm based disposable qube. It’s annoying and may scare some novice users.</p>
<h2>
<a name="reproducing-1" class="anchor" href="http://forums.whonix.org#reproducing-1"></a>Reproducing</h2>
<ol>
<li>Be on update Qubes 4.1</li>
<li>start whonix-ws-16-based qube</li>
<li>Shut it down</li>
</ol>
<p>If the timing is right it will show that error message. If it doesn’t just try again.</p>
<h2>
<a name="qrexec-policy-logs-2" class="anchor" href="http://forums.whonix.org#qrexec-policy-logs-2"></a>Qrexec policy logs</h2>
<p>When running in <code>dom0</code> the command <code>sudo journalctl -u qubes-qrexec-policy-daemon</code>, I see the following logs:</p>
<pre><code class="lang-auto">Mar 03 10:38:51 dom0 qrexec-policy-daemon[2987]: qrexec: whonix.SdwdateStatus+: sys-whonix -&gt; disp7810: allowed to disp7810
Mar 03 10:39:01 dom0 qrexec-policy-daemon[2987]: qrexec: whonix.SdwdateStatus+: sys-whonix -&gt; disp7810: allowed to disp7810
Mar 03 10:39:11 dom0 qrexec-policy-daemon[2987]: qrexec: whonix.SdwdateStatus+: sys-whonix -&gt; disp7810: allowed to disp7810
Mar 03 10:39:21 dom0 qrexec-policy-daemon[2987]: qrexec: whonix.SdwdateStatus+: sys-whonix -&gt; disp7810: allowed to disp7810
Mar 03 10:39:24 dom0 qrexec-policy-daemon[157609]: 2022-03-03 10:39:24.619 qrexec-client[157609]: process_io.c:187:process_io: vchan connection closed early (fds: 4 11 -1, status: -1 -1)
Mar 03 10:39:27 dom0 qrexec-policy-daemon[2987]: qrexec: whonix.SdwdateStatus: sys-whonix -&gt; disp7810: error while executing: Failed to start the target: &lt;module 'qrexec.exc' from '/usr/lib/python3.8/site-packages/qrexec/exc.py'&gt;
</code></pre>
          <p><a href="http://forums.whonix.org/t/failed-whonix-sdwdatestatus-rights-after-shutting-down-whonix-ws-16-based-qube/13410/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/failed-whonix-sdwdatestatus-rights-after-shutting-down-whonix-ws-16-based-qube/13410/1</link>
        <pubDate>Thu, 03 Mar 2022 10:50:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13410-1</guid>
        <source url="http://forums.whonix.org/t/failed-whonix-sdwdatestatus-rights-after-shutting-down-whonix-ws-16-based-qube/13410.rss">&quot;Failed: whonix.SdwdateStatus&quot; rights after shutting down whonix-ws-16 based qube</source>
      </item>
  </channel>
</rss>
