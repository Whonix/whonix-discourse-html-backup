<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Bridge internet eth0-br0-eth1</title>
    <link>http://forums.whonix.org/t/bridge-internet-eth0-br0-eth1/8710</link>
    <description>
Hi all , I am new inside this forum. 
I wish connect two virtual machines in bridge. Define enp0s3 - br0 - enp0s8
First virtual has enp0s3 (nat with internet connection) and enp0s8 (not attacched). This settings are inside virtualbox settings. 
Second virtual has just bridge with enp0s8 inside setting virtualbox.
Second virtual must take internet connection by first virtual. 

Now I do inside first virtual

ip link add name br0 type bridge

ip link set enp0s8 promisc on

ip link set dev enp0s8 master br0

ip link set up dev br0

ip link set enp0s8 promisc off

ip addr add 10.0.3.10/24 broadcast 10.0.3.255 dev br0
ip addr add 10.0.3.15/24 broadcast 10.0.3.255 dev enp0s8

ip route add default via 10.0.3.10 dev br0 proto static metric 101
ip route add 10.0.3.10 via 10.0.3.15 dev enp0s8 proto static metric 101

iptables-restore nat
-A PREROUTING --src 0.0.0.0 -j DNAT --to-destination 10.0.3.10
-A POSTROUTING --src 10.0.3.10 -j SNAT --to 0.0.0.0

 ip route show
default via 10.0.2.2 dev enp0s3 proto static metric 100 
default via 10.0.3.10 dev br0 proto static metric 101 
10.0.2.0/24 dev enp0s3 proto kernel scope link src 10.0.2.15 metric 100 
10.0.3.0/24 dev br0 proto kernel scope link src 10.0.3.10 
10.0.3.0/24 dev enp0s8 proto kernel scope link src 10.0.3.15 
10.0.3.10 via 10.0.3.15 dev enp0s8 proto static metric 101 

Now I turn on second virtual (windows , debian , whonix , other distros) but it cant go internet

where am I wrong? Should you have the answer to do this connection correctly? 
please help me.</description>
    <language>en</language>
    <lastBuildDate>Thu, 02 Jan 2020 09:25:09 +0000</lastBuildDate>
    <category>VirtualBox</category>
    <atom:link href="http://forums.whonix.org/t/bridge-internet-eth0-br0-eth1/8710.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Bridge internet eth0-br0-eth1</title>
        <dc:creator><![CDATA[tessy]]></dc:creator>
        <description><![CDATA[
            <p>Hi all , I am new inside this forum.<br>
I wish connect two virtual machines in bridge. Define enp0s3 - br0 - enp0s8<br>
First virtual has enp0s3 (nat with internet connection) and enp0s8 (not attacched). This settings are inside virtualbox settings.<br>
Second virtual has just bridge with enp0s8 inside setting virtualbox.<br>
Second virtual must take internet connection by first virtual.</p>
<p>Now I do inside first virtual</p>
<p>ip link add name br0 type bridge</p>
<p>ip link set enp0s8 promisc on</p>
<p>ip link set dev enp0s8 master br0</p>
<p>ip link set up dev br0</p>
<p>ip link set enp0s8 promisc off</p>
<p>ip addr add 10.0.3.10/24 broadcast 10.0.3.255 dev br0<br>
ip addr add 10.0.3.15/24 broadcast 10.0.3.255 dev enp0s8</p>
<p>ip route add default via 10.0.3.10 dev br0 proto static metric 101<br>
ip route add 10.0.3.10 via 10.0.3.15 dev enp0s8 proto static metric 101</p>
<p>iptables-restore nat<br>
-A PREROUTING --src 0.0.0.0 -j DNAT --to-destination 10.0.3.10<br>
-A POSTROUTING --src 10.0.3.10 -j SNAT --to 0.0.0.0</p>
<p>ip route show<br>
default via 10.0.2.2 dev enp0s3 proto static metric 100<br>
default via 10.0.3.10 dev br0 proto static metric 101<br>
10.0.2.0/24 dev enp0s3 proto kernel scope link src 10.0.2.15 metric 100<br>
10.0.3.0/24 dev br0 proto kernel scope link src 10.0.3.10<br>
10.0.3.0/24 dev enp0s8 proto kernel scope link src 10.0.3.15<br>
10.0.3.10 via 10.0.3.15 dev enp0s8 proto static metric 101</p>
<p>Now I turn on second virtual (windows , debian , whonix , other distros) but it cant go internet</p>
<p>where am I wrong? Should you have the answer to do this connection correctly?<br>
please help me.</p>
          <p><a href="http://forums.whonix.org/t/bridge-internet-eth0-br0-eth1/8710/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/bridge-internet-eth0-br0-eth1/8710/1</link>
        <pubDate>Thu, 02 Jan 2020 09:25:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8710-1</guid>
        <source url="http://forums.whonix.org/t/bridge-internet-eth0-br0-eth1/8710.rss">Bridge internet eth0-br0-eth1</source>
      </item>
  </channel>
</rss>
