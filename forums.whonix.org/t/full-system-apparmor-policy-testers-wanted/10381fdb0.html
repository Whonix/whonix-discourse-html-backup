<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Full System AppArmor Policy - Testers Wanted! - News - Whonix Forum</title>
    <meta name="description" content="apparmor-profile-everything is an experimental AppArmor policy which confines all user space processes on the system. It is still currently in development and requires testing. 
Install it by executing: 
sudo apt-get ins&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="10381fdb0.html?page=4" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Full System AppArmor Policy - Testers Wanted!&#39;" href="10381.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/full-system-apparmor-policy-testers-wanted/10381?page=4" />
<meta name="twitter:url" content="https://forums.whonix.org/t/full-system-apparmor-policy-testers-wanted/10381?page=4" />
<meta property="og:title" content="Full System AppArmor Policy - Testers Wanted!" />
<meta name="twitter:title" content="Full System AppArmor Policy - Testers Wanted!" />
<meta property="og:description" content="Unless you’re a developer and can send pull requests to fix these issues or specifically instructed to temporarily use the developers repository (I don’t think we ever did that yet), please do not use that repository.  I am aware of these issues. These changes aren’t ready yet for testers (the testers repository).  After these changes are ready however these might not immediately compatible with apparmor-profile-everything.   Not too bad but weird. Shouldn’t be done that way. Also since Tor as ..." />
<meta name="twitter:description" content="Unless you’re a developer and can send pull requests to fix these issues or specifically instructed to temporarily use the developers repository (I don’t think we ever did that yet), please do not use that repository.  I am aware of these issues. These changes aren’t ready yet for testers (the testers repository).  After these changes are ready however these might not immediately compatible with apparmor-profile-everything.   Not too bad but weird. Shouldn’t be done that way. Also since Tor as ..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="98 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="94 ❤" />
<meta property="article:published_time" content="2021-01-12T05:16:31+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="103819ba9.html?page=3">
        <link rel="next" href="10381af4d.html?page=5">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="10381.html">Full System AppArmor Policy - Testers Wanted!</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/news/21.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>News</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/testers-wanted.html' class='discourse-tag' rel="tag">testers-wanted</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-12T05:16:31Z' class='post-time'>
                January 12, 2021,  5:16am
              </time>
              <meta itemprop='dateModified' content='2021-01-12T05:16:31Z'>
          <span itemprop='position'>#64</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="sudobash" data-post="60" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/s/a4c791/40.png" class="avatar"> sudobash:</div>
<blockquote>
<p>installed from the dev repo</p>
</blockquote>
</aside>
<p>Unless you’re a developer and can send pull requests to fix these issues or specifically instructed to temporarily use the developers repository (I don’t think we ever did that yet), please do not use that repository.</p>
<p>I am aware of these issues. These changes aren’t ready yet for testers (the testers repository).<br>
After these changes are ready however these might not immediately compatible with apparmor-profile-everything.</p>
<aside class="quote no-group" data-username="sudobash" data-post="60" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/s/a4c791/40.png" class="avatar"> sudobash:</div>
<blockquote>
<p>Added to sdwdate apparmor profile:</p>
<pre><code class="lang-auto">/home/user/.tb/tor-browser/Browser/TorBrowser/Data/Tor/control_auth_cookie
</code></pre>
</blockquote>
</aside>
<p>Not too bad but weird. Shouldn’t be done that way. Also since Tor as part of Tor Browser does not run inside Whonix-Workstation that will do effectivly nothing.</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>
          <meta itemprop='keywords' content='testers-wanted'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-17T02:04:16Z' class='post-time'>
                January 17, 2021,  2:04am
              </time>
              <meta itemprop='dateModified' content='2021-01-17T02:04:16Z'>
          <span itemprop='position'>#65</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="sudobash" data-post="60" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/s/a4c791/40.png" class="avatar"> sudobash:</div>
<blockquote>
<p><code>sdwdate</code></p>
</blockquote>
</aside>
<p>Again, sdwdate is not meant to be run from the command line.</p>
<aside class="quote quote-modified" data-post="58" data-topic="10381">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="10381/58.html">Full System AppArmor Policy - Testers Wanted!</a> <a class="badge-wrapper  bullet" href="../../c/news/21.html"><span class="badge-category-bg" style="background-color: #AB9364;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="News posted by Whonix staff. The Whonix Blog. Stay Tuned. (rss)">News</span></a>
  </div>
  <blockquote>
    sudobash via Whonix Forum: 

If I sdwdate in terminal, I get this: 
sdwdate 

Not designed to be run from command line. It’s supposed to be run under 
user sdwdate. In actual production additional restrictions apply. It’s 
run by sdwdate systemd unit which adds systemd hardening which can be a 
further cause for issues. 
Running sdwdate as root could mess up permissions in folder /run/sdwdate 
(adding files owned by root) which would then disrupt sdwdate started by 
systemd under user sdwdate. 
I…
  </blockquote>
</aside>

<p>Please don’t deviate from the standard configuration. It will just cause confusion.</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Melionix'><span itemprop='name'>Melionix</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-04-04T12:54:44Z' class='post-time'>
                April 4, 2021, 12:54pm
              </time>
              <meta itemprop='dateModified' content='2021-04-05T12:49:17Z'>
          <span itemprop='position'>#66</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hello! Decided to try this out on the latest testing version and after installing that and restarting Whonix, I get this error message when trying to update. Any ideas are welcome. Total noobie when it comes to finding logs and stuff, but I’ll dig in for it in an hour or so.</p>
<p>Edit: It also seems to have broken guest additions for me.</p>
<blockquote>
<p>user@host:~$ upgrade-nonroot<br>
Reading package lists…<br>
W: chown to _apt:root of directory /var/lib/apt/lists/partial failed - SetupAPTPartialDirectory (13: Permission denied)<br>
W: chmod 0700 of directory /var/lib/apt/lists/partial failed - SetupAPTPartialDirectory (13: Permission denied)<br>
W: chown to _apt:root of directory /var/lib/apt/lists/auxfiles failed - SetupAPTPartialDirectory (13: Permission denied)<br>
W: chmod 0700 of directory /var/lib/apt/lists/auxfiles failed - SetupAPTPartialDirectory (13: Permission denied)<br>
E: Could not open lock file /var/lib/apt/lists/lock - open (13: Permission denied)<br>
E: Unable to lock directory /var/lib/apt/lists/<br>
W: Problem unlinking the file /var/cache/apt/pkgcache.bin - RemoveCaches (13: Permission denied)<br>
W: Problem unlinking the file /var/cache/apt/srcpkgcache.bin - RemoveCaches (13: Permission denied)</p>
</blockquote>
<p>Link to a systemd log:<br>
<a href="../../../external.html?link=https://p.teknik.io/SvSa8" class="onebox" target="_blank" rel="noopener nofollow ugc">https://p.teknik.io/SvSa8</a></p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/sudobash'><span itemprop='name'>sudobash</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-25T16:51:48Z' class='post-time'>
                May 25, 2021,  4:51pm
              </time>
              <meta itemprop='dateModified' content='2021-05-25T16:51:48Z'>
          <span itemprop='position'>#67</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Coming back to apparmor-profile-everything today from my post in Jan, sdwdate is still broken and xorg has a new DENIED that disables me from entering the OS:</p>
<blockquote>
<p>AVC apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:02.0/0000:03:00.0/vendor" comm=“Xorg” requested_mask=“r” denied_mask=“r”<br>
AVC apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:02.0/0000:03:00.0/config" comm=“Xorg” requested_mask=“r” denied_mask=“r”<br>
AVC apparmor=“DENIED” operation=“open” profile=“init-systemd” name="/sys/power/state" comm=“systemd-logind” requested_mask=“r” denied_mask=“r”</p>
</blockquote>
<p>I have this added within my Xorg profile:</p>
<blockquote>
<p>/sys/devices/pci[0-9]<strong>/{,drm/} r,<br>
/sys/devices/pci[0-9]</strong>/sound/card[0-9]*/id r,</p>
</blockquote>
<p>What needs to be added and has the sdwdate issue been solved, does sdwdate work with the stable version of apparmor-profile-everything? I donated about 2000 in bitcoin to your project around Jan when I was trying to get this to work and it seems like this particular project is dead?</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-25T17:49:49Z' class='post-time'>
                May 25, 2021,  5:49pm
              </time>
              <meta itemprop='dateModified' content='2021-05-25T17:49:49Z'>
          <span itemprop='position'>#68</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="sudobash" data-post="67" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/s/a4c791/40.png" class="avatar"> sudobash:</div>
<blockquote>
<p>I donated about 2000 in bitcoin to your project around Jan when I was trying to get this to work and it seems like this particular project is dead?</p>
</blockquote>
</aside>
<p>If you like to donate for a specific feature… If can proof the donation [1], I can forward it to <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/madaidan">@madaidan</a>.</p>
<hr>
<p>[1] By signing a message from the sending BTC address. (To save you some effort, this can wait until/if <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/madaidan">@madaidan</a> gets back and agrees, thinks that is welcome/would be helpful or …)</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/sudobash'><span itemprop='name'>sudobash</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-25T20:27:35Z' class='post-time'>
                May 25, 2021,  8:27pm
              </time>
              <meta itemprop='dateModified' content='2021-05-25T20:27:35Z'>
          <span itemprop='position'>#69</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I don’t have the donation signature as I wish to remain anon.</p>
<p>This is my dmesg output:</p>
<blockquote>
<p>[   28.083777] audit: type=1400 audit(1621973175.441:84): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:02.0/0000:03:00.0/vendor" pid=972 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   28.084029] audit: type=1400 audit(1621973175.441:85): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:02.0/0000:03:00.0/config" pid=972 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   28.088635] audit: type=1400 audit(1621973175.445:86): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:02.0/0000:03:00.0/vendor" pid=972 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   28.089072] audit: type=1400 audit(1621973175.445:87): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:02.0/0000:03:00.0/config" pid=972 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   28.539758] audit: type=1400 audit(1621973175.897:88): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:02.0/0000:03:00.0/vendor" pid=995 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   28.539767] audit: type=1400 audit(1621973175.897:89): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:02.0/0000:03:00.0/config" pid=995 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   28.544571] audit: type=1400 audit(1621973175.901:90): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:02.0/0000:03:00.0/vendor" pid=995 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   28.544580] audit: type=1400 audit(1621973175.901:91): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:02.0/0000:03:00.0/config" pid=995 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   28.758401] audit: type=1400 audit(1621973176.113:92): apparmor=“DENIED” operation=“open” profile=“init-systemd” name="/sys/power/state" pid=766 comm=“systemd-logind” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   28.761266] audit: type=1400 audit(1621973176.117:93): apparmor=“DENIED” operation=“open” profile=“init-systemd” name="/sys/power/state" pid=766 comm=“systemd-logind” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0</p>
</blockquote>
<p>I noticed in the stable release of apparmor-profile-everything that you have this in Xorg profile:</p>
<blockquote>
<p>@{sys}/devices/**/{uevent,name} r,<br>
@{sys_pci}/{device,revision,subsystem_device,subsystem_vendor,class,vendor,boot_vga,config,resource,drm/,sound/card[0-9]*/id} r,</p>
</blockquote>
<p>I’m thinking a term has not been added to cater to this denied.  This is from a new Kicksecure installation that I just performed and installed apparmor-profile-everything today.</p>
<p>The video card in question is an AMD card.</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/sudobash'><span itemprop='name'>sudobash</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-25T21:34:08Z' class='post-time'>
                May 25, 2021,  9:34pm
              </time>
              <meta itemprop='dateModified' content='2021-05-25T21:34:08Z'>
          <span itemprop='position'>#70</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>rapt must be used.</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-26T07:56:35Z' class='post-time'>
                May 26, 2021,  7:56am
              </time>
              <meta itemprop='dateModified' content='2021-05-26T07:56:35Z'>
          <span itemprop='position'>#71</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>With the information on the donation already posted [1] it might be possible to figure out which transaction was yours anyhow. Seems quite doable to me. Assuming that, signing a message from that BTC address wouldn’t leak any additional information.</p>
<hr>
<p>[1] You might want do delete that if you don’t want that public correlated to this account.</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-26T08:04:15Z' class='post-time'>
                May 26, 2021,  8:04am
              </time>
              <meta itemprop='dateModified' content='2021-05-26T08:04:15Z'>
          <span itemprop='position'>#72</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Since development stalled… Getting too time consuming, complex, daunting? I got an idea to simplify things.</p>
<p>The Whonix firewall AppArmor profile still unfixed. Do we really need a “real” AppArmor profile for Whonix firewall? That script is trusted anyhow.</p>
<p>(Trusted because required. Not because wanted.)</p>
<p>It doesn’t have any relevant attack surface. It’s in a location that should be coneptually only writeable by superadmin.</p>
<p>Going a step back… Due to AAE, now most/all binaries need an AppArmor profile. Otherwise they inherit the default / “everyone’s” AppArmor profile. That is insufficient for Whonix firewall.</p>
<p>To simplify this case and perhaps other related cases, couldn’t we instead just have a passthrough AppArmor profile that permits everything?</p>
<p>And also timesanitycheck. Did we really need an AppArmor profile for timesanitycheck which conceptually has no attack surface? It’s in locations which conceptually should only be wirteable by superadmin. Therefore it could either have a passthorugh AppArmor profile or even be allowed to be run unconfined? That seems a lot simpler than inventing tailored AppArmor profiles for things which conceptually have no attack surface. Otherwise is it still realistic that this will ever reach production level quality?</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-29T15:43:08Z' class='post-time'>
                May 29, 2021,  3:43pm
              </time>
              <meta itemprop='dateModified' content='2021-05-29T15:43:08Z'>
          <span itemprop='position'>#73</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="sudobash" data-post="67" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/s/a4c791/40.png" class="avatar"> sudobash:</div>
<blockquote>
<p>Coming back to apparmor-profile-everything today from my post in Jan, sdwdate is still broken and xorg has a new DENIED that disables me from entering the OS:</p>
</blockquote>
</aside>
<p>This should be allowed: <a href="../../../external.html?link=https://github.com/Whonix/apparmor-profile-everything/blob/master/etc/apparmor.d/usr.lib.xorg.Xorg#L57" rel="noopener nofollow ugc">https://github.com/Whonix/apparmor-profile-everything/blob/master/etc/apparmor.d/usr.lib.xorg.Xorg#L57</a></p>
<p>Does the policy on your system have this line?</p>
<aside class="quote no-group" data-username="sudobash" data-post="67" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/s/a4c791/40.png" class="avatar"> sudobash:</div>
<blockquote>
<p>I have this added within my Xorg profile:</p>
</blockquote>
</aside>
<p>Those wouldn’t solve the denial errors you posted above.</p>
<aside class="quote no-group" data-username="sudobash" data-post="67" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/s/a4c791/40.png" class="avatar"> sudobash:</div>
<blockquote>
<p>What needs to be added and has the sdwdate issue been solved, does sdwdate work with the stable version of apparmor-profile-everything?</p>
</blockquote>
</aside>
<p>It should work, provided one is using it in the expected configuration and not running it from the command line.</p>
<aside class="quote no-group" data-username="sudobash" data-post="67" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/s/a4c791/40.png" class="avatar"> sudobash:</div>
<blockquote>
<p>it seems like this particular project is dead?</p>
</blockquote>
</aside>
<p>It’s not dead; I’ve just been busy with other stuff recently and haven’t had much time to focus on Whonix.</p>
<aside class="quote no-group" data-username="Patrick" data-post="68" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>If you like to donate for a specific feature… If can proof the donation [1], I can forward it to <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/madaidan">@madaidan</a>.</p>
<p>[1] By signing a message from the sending BTC address. (To save you some effort, this can wait until/if <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/madaidan">@madaidan</a> gets back and agrees, thinks that is welcome/would be helpful or …)</p>
</blockquote>
</aside>
<p>It would certainly be helpful. I don’t have a crypto wallet currently, but I’ve been meaning to set one up.</p>
<aside class="quote no-group" data-username="Patrick" data-post="72" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>The Whonix firewall AppArmor profile still unfixed. Do we really need a “real” AppArmor profile for Whonix firewall? That script is trusted anyhow.</p>
</blockquote>
</aside>
<p>The purpose of the whonix-firewall, timesanitycheck and similar profiles are not really to confine those services, but so we can remove certain capabilities from the overall profile. For example, whonix-firewall is the only thing that needs the CAP_NET_ADMIN capability (for setting firewall rules) so if we run it in its own profile, we can exclude that from the init-systemd profile and only grant it in the whonix-firewall profile, thereby preventing even a privileged attacker on the gateway from bypassing the Tor enforcement. Likewise, only a few services need CAP_SYS_TIME (sdwdate and timesanitycheck) so by giving those their own profiles, we can exclude that from the main profile also.</p>
<aside class="quote no-group" data-username="Patrick" data-post="72" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>To simplify this case and perhaps other related cases, couldn’t we instead just have a passthrough AppArmor profile that permits everything?</p>
</blockquote>
</aside>
<p>That would add significant attack surface.</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-29T17:59:15Z' class='post-time'>
                May 29, 2021,  5:59pm
              </time>
              <meta itemprop='dateModified' content='2021-05-29T17:59:15Z'>
          <span itemprop='position'>#74</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I don’t really see any attack surface / threat model for timesanitycheck. Please explain.</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-29T18:12:39Z' class='post-time'>
                May 29, 2021,  6:12pm
              </time>
              <meta itemprop='dateModified' content='2021-05-29T18:12:39Z'>
          <span itemprop='position'>#75</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="74" data-topic="10381" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I don’t really see any attack surface / threat model for timesanitycheck. Please explain.</p>
</blockquote>
</aside>
<p>The attack surface is not in timesanitycheck but rather in just having an unconfined profile on the system at all. It would be the weakest link in the policy. If an attacker gets access to that for any reason, it’s game over. Even if we can’t figure out a way on how to get access to it right now, an attacker will.</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-29T18:17:47Z' class='post-time'>
                May 29, 2021,  6:17pm
              </time>
              <meta itemprop='dateModified' content='2021-05-29T18:17:47Z'>
          <span itemprop='position'>#76</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Alright. Make sense. Just don’t let the perfect (and too hard to create / maintain) be the enemy of the good. <img src="../../images/emoji/twitter/slight_smilec164.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<aside class="quote no-group" data-username="madaidan" data-post="73" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>It would certainly be helpful.</p>
</blockquote>
</aside>
<p>PM’d on telegram.</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/sudobash'><span itemprop='name'>sudobash</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-02T11:36:09Z' class='post-time'>
                June 2, 2021, 11:36am
              </time>
              <meta itemprop='dateModified' content='2021-06-02T11:36:09Z'>
          <span itemprop='position'>#77</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I’ll start fresh with a new Kicksecure install with Whonix VMs and will report back soon.</p>
<p>My setup is Kicksecure with lkrg and hardened kernel along with Whonix VMs in KVM also using hardened kernel with lkrg.</p>
<p>The goal is to use Kicksecure as host with Whonix for work.</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/sudobash'><span itemprop='name'>sudobash</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-02T13:19:50Z' class='post-time'>
                June 2, 2021,  1:19pm
              </time>
              <meta itemprop='dateModified' content='2021-06-02T13:26:53Z'>
          <span itemprop='position'>#78</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I was able to do a fresh install of Kicksecure with hardened-kernel and LKRG installed. I installed apparmor-profile-everything and I receive a blinking underscore screen.  This usually is something to do with lightdm or xorg.  I then F12 and login via the terminal, and enter dmesg:</p>
<blockquote>
<p>27.167825] audit: type=1400 audit(1622638817.178:58): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:03.0/0000:04:00.0/vendor" pid=952 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0</p>
<blockquote>
<p>[   27.167835] audit: type=1400 audit(1622638817.178:59): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:03.0/0000:04:00.0/config" pid=952 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   27.174747] audit: type=1400 audit(1622638817.186:60): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:03.0/0000:04:00.0/vendor" pid=952 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   27.174757] audit: type=1400 audit(1622638817.186:61): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:03.0/0000:04:00.0/config" pid=952 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   27.548757] audit: type=1400 audit(1622638817.558:62): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:03.0/0000:04:00.0/vendor" pid=987 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   27.548793] audit: type=1400 audit(1622638817.558:63): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:03.0/0000:04:00.0/config" pid=987 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   27.556309] audit: type=1400 audit(1622638817.566:64): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:03.0/0000:04:00.0/vendor" pid=987 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   27.556325] audit: type=1400 audit(1622638817.566:65): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:03.0/0000:04:00.0/config" pid=987 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   27.730511] audit: type=1400 audit(1622638817.742:66): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:03.0/0000:04:00.0/vendor" pid=1000 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0<br>
[   27.730522] audit: type=1400 audit(1622638817.742:67): apparmor=“DENIED” operation=“open” profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:03.0/0000:04:00.0/config" pid=1000 comm=“Xorg” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0</p>
</blockquote>
</blockquote>
<p>This is a fresh install from the stable repo. I’m using an older AMD card for this PC to just serve 2D.</p>
<p>Also, same issue from a few months back with the sdwdate GUI app that doesn’t show the log nor does it update the status.</p>
<p>I believe that is the only 2 issues at this time as everything else seems to work.</p>
<p>Thanks,<br>
sudobash</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-03T21:28:19Z' class='post-time'>
                June 3, 2021,  9:28pm
              </time>
              <meta itemprop='dateModified' content='2021-06-03T21:28:19Z'>
          <span itemprop='position'>#79</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Ah, I can see the issue here. There’s a 3rd subdirectory not covered by the existing rules. Try editing <code>/etc/apparmor.d/tunables/init-systemd</code> and change the <code>sys_pci</code> tunable to the following:</p>
<pre><code class="lang-auto">@{sys_pci}=@{sys}/devices/pci@{sys_pci_numbers}/@{sys_pci_numbers}:*.*/{,@{sys_pci_numbers}:*.*/}
</code></pre>
<p>Does that fix it?</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/sudobash'><span itemprop='name'>sudobash</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-04T05:23:41Z' class='post-time'>
                June 4, 2021,  5:23am
              </time>
              <meta itemprop='dateModified' content='2021-06-04T05:53:49Z'>
          <span itemprop='position'>#80</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I edited the file:</p>
<pre><code>## Copyright (C) 2012 - 2021 ENCRYPTED SUPPORT LP &lt;adrelanos@whonix.org&gt;
## See the file COPYING for copying conditions.

@{sys_pci_numbers}=[0-9][0-9][0-9][0-9]:[0-9][0-9]
@{sys_pci}=@{sys}/devices/pci@{sys_pci_numbers}/@{sys_pci_numbers}:*.*/{,@{sys_pci_numbers}:*.*/}
@{dev_ttys}=/dev/tty{,S}[0-9]{,[0-9]}
</code></pre>
<p>Reboot and same issue where the terminal states lightdm cannot start.  I F12 and run dmesg, at the bottom states:</p>
<pre><code>[   40.091338] audit: type=1400 audit(1622782467.894:50): apparmor="DENIED" operation="open" profile="Xorg" name="/sys/devices/pci0000:00/0000:00:00.0/vendor" pid=1010 comm="Xorg" requested_mask="r" denied_mask="r" fsuid=0 ouid=0
[   40.091350] audit: type=1400 audit(1622782467.894:51): apparmor="DENIED" operation="open" profile="Xorg" name="/sys/devices/pci0000:00/0000:00:00.0/config" pid=1010 comm="Xorg" requested_mask="r" denied_mask="r" fsuid=0 ouid=0
[   40.091532] audit: type=1400 audit(1622782467.894:52): apparmor="DENIED" operation="open" profile="Xorg" name="/sys/devices/pci0000:00/0000:00:00.0/vendor" pid=1010 comm="Xorg" requested_mask="r" denied_mask="r" fsuid=0 ouid=0
[   40.091544] audit: type=1400 audit(1622782467.894:53): apparmor="DENIED" operation="open" profile="Xorg" name="/sys/devices/pci0000:00/0000:00:00.0/config" pid=1010 comm="Xorg" requested_mask="r" denied_mask="r" fsuid=0 ouid=0
[   40.780770] audit: type=1400 audit(1622782468.582:54): apparmor="DENIED" operation="open" profile="Xorg" name="/sys/devices/pci0000:00/0000:00:00.0/vendor" pid=1086 comm="Xorg" requested_mask="r" denied_mask="r" fsuid=0 ouid=0
[   40.780785] audit: type=1400 audit(1622782468.582:55): apparmor="DENIED" operation="open" profile="Xorg" name="/sys/devices/pci0000:00/0000:00:00.0/config" pid=1086 comm="Xorg" requested_mask="r" denied_mask="r" fsuid=0 ouid=0
[   40.780960] audit: type=1400 audit(1622782468.582:56): apparmor="DENIED" operation="open" profile="Xorg" name="/sys/devices/pci0000:00/0000:00:00.0/vendor" pid=1086 comm="Xorg" requested_mask="r" denied_mask="r" fsuid=0 ouid=0
[   40.780973] audit: type=1400 audit(1622782468.582:57): apparmor="DENIED" operation="open" profile="Xorg" name="/sys/devices/pci0000:00/0000:00:00.0/config" pid=1086 comm="Xorg" requested_mask="r" denied_mask="r" fsuid=0 ouid=0
[   41.025100] audit: type=1400 audit(1622782468.826:58): apparmor="DENIED" operation="open" profile="Xorg" name="/sys/devices/pci0000:00/0000:00:00.0/vendor" pid=1094 comm="Xorg" requested_mask="r" denied_mask="r" fsuid=0 ouid=0
[   41.025113] audit: type=1400 audit(1622782468.826:59): apparmor="DENIED" operation="open" profile="Xorg" name="/sys/devices/pci0000:00/0000:00:00.0/config" pid=1094 comm="Xorg" requested_mask="r" denied_mask="r" fsuid=0 ouid=0
</code></pre>
<p>I know this is a formatting issue but I’m not elite like you madaidan!</p>
<p>I noticed this:</p>
<blockquote>
<p>profile=“Xorg” name="/sys/devices/pci0000:00/0000:00:00.0/vendor" pid=1010 comm=“Xorg”</p>
</blockquote>
<p>You’ll notice pci0000:00/0000:00:00.0 has a period followed by a zero.</p>
<p>The formating in your file is:</p>
<blockquote>
<p>@{sys_pci_numbers}=[0-9][0-9][0-9][0-9]:[0-9][0-9]</p>
</blockquote>
<p>How would we format pci0000:00/0000:00:00.0 in this regard?</p>
<p>Thanks,<br>
sudobash</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-04T20:17:04Z' class='post-time'>
                June 4, 2021,  8:17pm
              </time>
              <meta itemprop='dateModified' content='2021-06-04T20:17:04Z'>
          <span itemprop='position'>#81</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Perhaps it’s an issue with the <code>@{sys}</code> tunable since <code>tunables/init-systemd</code> does not include <code>tunables/global</code> (I had assumed it would be inherited from the actual profile, but maybe not?). Try editing <code>/etc/apparmor.d/tunables/init-systemd</code> and replace <code>@{sys}</code> with <code>/sys</code> or adding <code>#include &lt;tunables/global</code>&gt; to the top of the file. I.e.</p>
<pre><code class="lang-auto">@{sys_pci}=/sys/devices/...
</code></pre>
<p>or</p>
<pre><code class="lang-auto">## Copyright (C) 2012 - 2021 ENCRYPTED SUPPORT LP &lt;adrelanos@whonix.org&gt;
## See the file COPYING for copying conditions.

#include &lt;tunables/global&gt;

@{sys_pci_numbers}=[0-9][0-9][0-9][0-9]:[0-9][0-9]
@{sys_pci}=@{sys}/devices/...
...
</code></pre>
<aside class="quote no-group" data-username="sudobash" data-post="80" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/s/a4c791/40.png" class="avatar"> sudobash:</div>
<blockquote>
<p>You’ll notice pci0000:00/0000:00:00.0 has a period followed by a zero.</p>
</blockquote>
</aside>
<p>That should already be covered by <code>@{sys_pci_numbers}:*.*</code> in <code>@{sys_pci}</code>.</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/sudobash'><span itemprop='name'>sudobash</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-07T10:18:59Z' class='post-time'>
                June 7, 2021, 10:18am
              </time>
              <meta itemprop='dateModified' content='2021-06-07T10:43:17Z'>
          <span itemprop='position'>#82</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I was only able to get past lightdm with this added to /etc/apparmor.d/tunables/:</p>
<pre><code>## Copyright (C) 2012 - 2021 ENCRYPTED SUPPORT LP &lt;adrelanos@whonix.org&gt;
## See the file COPYING for copying conditions.

@{sys_pci_numbers}=[0-9,a-z][0-9,a-z][0-9,a-z][0-9,a-z]:[0-9,a-z][0-9,a-z]
@{sys_pci}=/sys/devices/***
@{dev_ttys}=/dev/tty{,S}[0-9]{,[0-9]}
</code></pre>
<p>I tried the 3 dots, no go, the asterisk seems to work which brought up other denieds so I added this to /etc/apparmor.d/local/usr.bin.dbus-daemon:</p>
<pre><code>/run/systemd/sessions/*.ref w,
/run/systemd/inhibit/*.ref w,
</code></pre>
<p>I added these to /etc/apparmor.d/local/init-systemd for more denieds:</p>
<pre><code>/sys/power/state r, 
/dev/tty1 rw,
/sys/class/ r,
</code></pre>
<p>I did a reboot and checked dmesg, new denieds came:</p>
<pre><code>[   48.113020] audit: type=1400 audit(1623060317.967:50): apparmor="DENIED" operation="signal" profile="dbus-daemon" pid=1082 comm="systemd" requested_mask="receive" denied_mask="receive" signal=term peer="init-systemd"
[   48.113281] audit: type=1400 audit(1623060317.971:51): apparmor="DENIED" operation="signal" profile="dbus-daemon" pid=1082 comm="systemd" requested_mask="receive" denied_mask="receive" signal=kill peer="init-systemd"
[   48.113431] audit: type=1400 audit(1623060317.971:52): apparmor="DENIED" operation="signal" profile="dbus-daemon" pid=1082 comm="systemd" requested_mask="receive" denied_mask="receive" signal=term peer="init-systemd"
[   48.113623] audit: type=1400 audit(1623060317.971:53): apparmor="DENIED" operation="signal" profile="dbus-daemon" pid=1082 comm="systemd" requested_mask="receive" denied_mask="receive" signal=kill peer="init-systemd"
[   60.348617] audit: type=1400 audit(1623060330.203:54): apparmor="DENIED" operation="open" profile="/**/*-browser/Browser/firefox" name="/proc/1486/cgroup" pid=1486 comm="firefox.real" requested_mask="r" denied_mask="r" fsuid=1000 ouid=1000
</code></pre>
<p>I added this to /etc/apparmor.d/local/usr.bin.dbus-daemon for the new denieds:</p>
<pre><code>signal receive set=term,
signal receive set=kill,
</code></pre>
<p>sdwdate does not work by running sdwdate in terminal:</p>
<pre><code>2021-06-07 10:14:34 - sdwdate - INFO - sdwdate started. PID: 1896
Traceback (most recent call last):
  File "/usr/bin/sdwdate", line 10, in &lt;module&gt;
    sdwdate.main()
  File "/usr/lib/python3/dist-packages/sdwdate/sdwdate.py", line 1022, in main
    global_files()
  File "/usr/lib/python3/dist-packages/sdwdate/sdwdate.py", line 974, in global_files
    Path(sdwdate_status_files_folder).mkdir(parents=True, exist_ok=True)
  File "/usr/lib/python3.7/pathlib.py", line 1251, in mkdir
    self._accessor.mkdir(self, mode)
PermissionError: [Errno 13] Permission denied: '/home/user/sdwdate'
</code></pre>
<p>Also swdate-gui throws up an error, I realized sdwdate-gui isn’t in the sdwdate apparmor profile.</p>
<pre><code>access control disabled, clients can connect from any host
QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-sdwdate-gui'
tor_status_changed unexpected error: &lt;class 'NameError'&gt;
</code></pre>
<p>I do have a better understanding of apparmor now due to this thread so I appreciate everyone’s help on this forum especially <a href="../../../external.html?link=https://forums.whonix.org/u/madaidan">madaidan</a>!</p>
<p>On reboot, another denied:</p>
<blockquote>
<p>[   59.175475] audit: type=1400 audit(1623061641.571:50): apparmor=“DENIED” operation=“signal” profile=“dbus-daemon” pid=1068 comm=“systemd” requested_mask=“receive” denied_mask=“receive” signal=cont peer=“init-systemd”</p>
</blockquote>
<p>So I added to /etc/apparmor.d/local/usr.bin.dbus-daemon:</p>
<blockquote>
<p>signal receive set=cont,</p>
</blockquote>
<p>Reboot and no denieds, just some unconfineds:</p>
<blockquote>
<p>[   26.120617] audit: type=1400 audit(1623062030.560:6): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name=“rapt” pid=684 comm=“apparmor_parser”<br>
[   26.123554] audit: type=1400 audit(1623062030.564:7): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name=“apt.systemd.daily” pid=685 comm=“apparmor_parser”<br>
[   26.126195] audit: type=1400 audit(1623062030.568:8): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name=“spice-vdagent” pid=678 comm=“apparmor_parser”<br>
[   26.126207] audit: type=1400 audit(1623062030.568:9): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name=“spice-vdagentd” pid=678 comm=“apparmor_parser”<br>
[   26.126519] audit: type=1400 audit(1623062030.568:10): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name="/usr/bin/tor-circuit-established-check" pid=682 comm=“apparmor_parser”<br>
[   26.133117] audit: type=1400 audit(1623062030.572:11): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name="/usr/bin/timesanitycheck" pid=681 comm=“apparmor_parser”<br>
[   26.137211] audit: type=1400 audit(1623062030.576:12): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name="/usr/sbin/libvirtd" pid=683 comm=“apparmor_parser”<br>
[   26.137222] audit: type=1400 audit(1623062030.576:13): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name="/usr/sbin/libvirtd//qemu_bridge_helper" pid=683 comm=“apparmor_parser”</p>
</blockquote>
<p>I’m looking into the sdwdate issue so I can get it to work.  I believe it’s an important feature of Kicksecure. I don’t see any denieds for sdwdate so I’m curious as to why it’s not working, perhaps a rule that denys the app from running within the apparmor profile?</p>
<p>Thanks,<br>
sudobash</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="10381.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-07T14:07:53Z' class='post-time'>
                June 7, 2021,  2:07pm
              </time>
              <meta itemprop='dateModified' content='2021-06-07T14:07:53Z'>
          <span itemprop='position'>#83</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="sudobash" data-post="82" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/s/a4c791/40.png" class="avatar"> sudobash:</div>
<blockquote>
<p>sdwdate does not work by running sdwdate in terminal:</p>
<pre><code class="lang-auto">
</code></pre>
</blockquote>
</aside>
<p>sdwdate is not supposed to be run in terminal under user <code>user</code>. Maybe useful during development without AppArmor profile. But otherwise sdwdate’s AppArmor profile doesn’t support that. And if it did, it might weaken AppArmor protections. Dunno. Maybe with some HOME variable in sdwdate apparmor profile it might work. I think running sdwdate under user <code>user</code> was discussed earlier in these forums somewhere. I am not sure what I should be doing in such situations. Changing the clock requires root or a capability. Therefore running under user <code>user</code> seems not useful. To simulate sdwdate from command line:</p>
<pre><code>sudo systemctl stop sdwdate
sudo -u sdwdate sdwdate
</code></pre>
<p>That circumvents systemd sandboxing.</p>
<p>Otherwise <code> sudo systemctl restart sdwdate</code> so it’s run through its systemd unit with apparmor proifle and its systemd sandboxing.</p>
<aside class="quote no-group" data-username="sudobash" data-post="82" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/s/a4c791/40.png" class="avatar"> sudobash:</div>
<blockquote>
<pre><code class="lang-auto">PermissionError: [Errno 13] Permission denied: '/home/user/sdwdate'
</code></pre>
</blockquote>
</aside>
<p>Useful to see this when users post logs with sdwdate so I can answer what I just answered. But not considered an sdwdate bug.</p>
<aside class="quote no-group" data-username="sudobash" data-post="82" data-topic="10381">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/s/a4c791/40.png" class="avatar"> sudobash:</div>
<blockquote>
<p>Also swdate-gui throws up an error, I realized sdwdate-gui isn’t in the sdwdate apparmor profile.</p>
<pre><code class="lang-auto">access control disabled, clients can connect from any host
QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-sdwdate-gui'
tor_status_changed unexpected error: &lt;class 'NameError'&gt;
</code></pre>
</blockquote>
</aside>
<p>This also happens without AAE. Minuscule bug affecting log output only.</p>
        </div>

        <meta itemprop='headline' content='Full System AppArmor Policy - Testers Wanted!'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../sdwdate-and-sdwdate-gui-development-thread/1137/378.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../sdwdate-and-sdwdate-gui-development-thread/1137/378.html'>
                      <span itemprop='name'>sdwdate and sdwdate-gui development thread</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
            </div>
      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="103819ba9.html?page=3">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="10381af4d.html?page=5">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
