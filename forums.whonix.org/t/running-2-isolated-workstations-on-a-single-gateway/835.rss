<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Running 2+ isolated workstations on a single gateway</title>
    <link>http://forums.whonix.org/t/running-2-isolated-workstations-on-a-single-gateway/835</link>
    <description>So I have the Whonix configuration as follows:

[b]Gateway[/b]
10.152.152.10 (eth1)
Internal Network: whonix

[b]Workstation 1[/b]
10.152.152.11 (eth1)
Internal Network: whonix

[b]Workstation 2[/b]
10.152.152.12 (eth1)
Internal Network: whonix


So the two workstations are using the same gateway in a pretty standard setup. But the problem is, let&#39;s say, workstation 1 has been hijacked and an attacker now has root control of Workstation 1, how would I be able to defend workstation 2?

Now one solution is of course things like IP tables and firewalls, but these are a half measure. Preferably, for the sake of anonymity and proper safety, I would prefer they not even be able to communicate at all in the first place and thus can be immune from application exploits etc. So I changed the settings to as follows:

[b]Gateway[/b]
10.152.152.10 (eth1)
Internal Network: whonix
10.152.153.10 (eth2)
Internal Network: whonix-1

[b]Workstation 1[/b]
10.152.152.11 (eth1)
Internal Network: whonix

[b]Workstation 2[/b]
10.152.153.11 (eth1)
Internal Network: whonix-1


I also went to [b]/etc/network/interfaces[/b] on the gateway and added the following to try and enable workstation 2:

auto eth2
iface eth2 inet static
	address 10.152.153.10
	netmask 255.255.192.0

This is basically a clone of eth1 except notching up the IP addresses. However, this configuration does not work. Workstation 2 is unable to get any connection despite me double checking that all the IPs and networks match up correctly. As a matter of disclosing information, I also followed up on a suggestion to look into how the gateways and workstations interact, and it appears they can still communicate when the gateway is completely offline, so there is nothing on the gateway software which can be done to my knowledge to help this (ie so IPTables on the gateway won&#39;t help).

What more do I need to do or is there a better way to implement entirely separate internal networks so workstations cannot talk to each other? 

[i]To those saying I should just start a second gateway, that sure is possible, but when scaled to many workstations (30-40 per server) it becomes too onerous on the hardware. My full intent of this information is to setup an .onion VPS hosting service based on the Whonix model (I don&#39;t use the whonix gateway or workstation, but I use the same idea/model to do it) so keeping client separate is quite important so they cannot attack each other.[/i]</description>
    <language>en</language>
    <lastBuildDate>Mon, 26 Jan 2015 06:07:33 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/running-2-isolated-workstations-on-a-single-gateway/835.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Running 2+ isolated workstations on a single gateway</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Just now cooked something up.</p>
<p>Worked for me. See this chapter:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Connections_between_Whonix-Gateway_and_Whonix-Workstation#Instructions" target="_blank" title="07:33PM - 30 March 2020">Whonix – 30 Mar 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/452;"><img src="https://www.whonix.org/w/images/9/95/Binary-503583640.jpg" class="thumbnail" width="640" height="452"></div>

<h3><a href="https://www.whonix.org/wiki/Connections_between_Whonix-Gateway_and_Whonix-Workstation#Instructions" target="_blank">Connections between Whonix-Gateway ™ and Whonix-Workstation ™</a></h3>

<p>Authenticated / Encrypted Connections between Whonix-Gateway ™ and Whonix-Workstation ™, ARP spoofing defense, SSH, OpenVPN, Using additional (isolated) network interfaces</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<p>Documentation is very chaotic. Needs more work. Hope that helps. Will clean up and retest instructions later.</p>
          <p><a href="http://forums.whonix.org/t/running-2-isolated-workstations-on-a-single-gateway/835/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/running-2-isolated-workstations-on-a-single-gateway/835/2</link>
        <pubDate>Mon, 26 Jan 2015 06:07:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-835-2</guid>
        <source url="http://forums.whonix.org/t/running-2-isolated-workstations-on-a-single-gateway/835.rss">Running 2+ isolated workstations on a single gateway</source>
      </item>
      <item>
        <title>Running 2+ isolated workstations on a single gateway</title>
        <dc:creator><![CDATA[Cthulhu]]></dc:creator>
        <description><![CDATA[
            <p>So I have the Whonix configuration as follows:</p>
<p><span class="bbcode-b">Gateway</span><br>
10.152.152.10 (eth1)<br>
Internal Network: whonix</p>
<p><span class="bbcode-b">Workstation 1</span><br>
10.152.152.11 (eth1)<br>
Internal Network: whonix</p>
<p><span class="bbcode-b">Workstation 2</span><br>
10.152.152.12 (eth1)<br>
Internal Network: whonix</p>
<p>So the two workstations are using the same gateway in a pretty standard setup. But the problem is, let’s say, workstation 1 has been hijacked and an attacker now has root control of Workstation 1, how would I be able to defend workstation 2?</p>
<p>Now one solution is of course things like IP tables and firewalls, but these are a half measure. Preferably, for the sake of anonymity and proper safety, I would prefer they not even be able to communicate at all in the first place and thus can be immune from application exploits etc. So I changed the settings to as follows:</p>
<p><span class="bbcode-b">Gateway</span><br>
10.152.152.10 (eth1)<br>
Internal Network: whonix<br>
10.152.153.10 (eth2)<br>
Internal Network: whonix-1</p>
<p><span class="bbcode-b">Workstation 1</span><br>
10.152.152.11 (eth1)<br>
Internal Network: whonix</p>
<p><span class="bbcode-b">Workstation 2</span><br>
10.152.153.11 (eth1)<br>
Internal Network: whonix-1</p>
<p>I also went to <span class="bbcode-b">/etc/network/interfaces</span> on the gateway and added the following to try and enable workstation 2:</p>
<p>auto eth2<br>
iface eth2 inet static<br>
address 10.152.153.10<br>
netmask 255.255.192.0</p>
<p>This is basically a clone of eth1 except notching up the IP addresses. However, this configuration does not work. Workstation 2 is unable to get any connection despite me double checking that all the IPs and networks match up correctly. As a matter of disclosing information, I also followed up on a suggestion to look into how the gateways and workstations interact, and it appears they can still communicate when the gateway is completely offline, so there is nothing on the gateway software which can be done to my knowledge to help this (ie so IPTables on the gateway won’t help).</p>
<p>What more do I need to do or is there a better way to implement entirely separate internal networks so workstations cannot talk to each other?</p>
<p><span class="bbcode-i">To those saying I should just start a second gateway, that sure is possible, but when scaled to many workstations (30-40 per server) it becomes too onerous on the hardware. My full intent of this information is to setup an .onion VPS hosting service based on the Whonix model (I don’t use the whonix gateway or workstation, but I use the same idea/model to do it) so keeping client separate is quite important so they cannot attack each other.</span></p>
          <p><a href="http://forums.whonix.org/t/running-2-isolated-workstations-on-a-single-gateway/835/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/running-2-isolated-workstations-on-a-single-gateway/835/1</link>
        <pubDate>Mon, 26 Jan 2015 02:49:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-835-1</guid>
        <source url="http://forums.whonix.org/t/running-2-isolated-workstations-on-a-single-gateway/835.rss">Running 2+ isolated workstations on a single gateway</source>
      </item>
  </channel>
</rss>
