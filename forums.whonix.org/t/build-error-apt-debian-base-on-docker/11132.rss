<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Build Error - APT - Debian base on Docker</title>
    <link>http://forums.whonix.org/t/build-error-apt-debian-base-on-docker/11132</link>
    <description>I&#39;m trying to install Whonix in Docker. I have created [a repo](https://u.nu/qirco).

[My Dockerfile](https://u.nu/nqfoj) (Debian Buster) seems to successfully prepare for the build. During execution of the build script

`sudo /home/user/Whonix/whonix_build --flavor whonix-gateway-cli --target root --build&#39;`

I get what looks like an apt error:

    + sudo --non-interactive -u root git submodule update --init --recursive --jobs=200
    + true &#39;INFO: Updated git sub modules.&#39;
    + mkdir -p /usr/lib/security-misc
    + cp /home/user/Whonix/packages/security-misc//usr/lib/security-misc/apt-get-wrapper /usr/lib/security-misc/apt-get-wrapper
    + cp /home/user/Whonix/packages/security-misc//usr/lib/security-misc/apt-get-update-sanity-test /usr/lib/security-misc/apt-get-update-sanity-test
    + /home/user/Whonix/packages/security-misc//usr/lib/security-misc/apt-get-wrapper -o Acquire::http::Proxy=http://127.0.0.1:3142 -o Acquire::https::Proxy=http://127.0.0.1:3142 -o Acquire::tor::Proxy=http://127.0.0.1:3142 -o Acquire::Languages=none -o Acquire::IndexTargets::deb::Contents-deb::DefaultEnabled=false -o Apt::Install-Recommends=false -o Acquire::Retries=3 -o Dpkg::Options::=--force-confnew -o Dir::Etc::sourcelist=/home/user/Whonix/build_sources/debian_stable_current_clearnet.list -o Dir::Etc::sourceparts=- update
    Ign:1 http://HTTPS///deb.debian.org/debian-security buster/updates InRelease
    Ign:2 http://HTTPS///deb.debian.org/debian buster-updates InRelease
    Ign:3 http://HTTPS///deb.debian.org/debian buster InRelease
    Ign:1 http://HTTPS///deb.debian.org/debian-security buster/updates InRelease
    Ign:2 http://HTTPS///deb.debian.org/debian buster-updates InRelease
    Ign:3 http://HTTPS///deb.debian.org/debian buster InRelease
    Ign:1 http://HTTPS///deb.debian.org/debian-security buster/updates InRelease
    Ign:2 http://HTTPS///deb.debian.org/debian buster-updates InRelease
    Ign:3 http://HTTPS///deb.debian.org/debian buster InRelease
    Err:1 http://HTTPS///deb.debian.org/debian-security buster/updates InRelease
      Could not connect to 127.0.0.1:3142 (127.0.0.1). - connect (111: Connection refused)
    Err:2 http://HTTPS///deb.debian.org/debian buster-updates InRelease
      Unable to connect to 127.0.0.1:3142:
    Err:3 http://HTTPS///deb.debian.org/debian buster InRelease
      Unable to connect to 127.0.0.1:3142:
    Reading package lists...
    W: Failed to fetch http://HTTPS///deb.debian.org/debian-security/dists/buster/updates/InRelease  Could not connect to 127.0.0.1:3142 (127.0.0.1). - connect (111: Connection refused)
    W: Failed to fetch http://HTTPS///deb.debian.org/debian/dists/buster-updates/InRelease  Unable to connect to 127.0.0.1:3142:
    W: Failed to fetch http://HTTPS///deb.debian.org/debian/dists/buster/InRelease  Unable to connect to 127.0.0.1:3142:
    W: Some index files failed to download. They have been ignored, or old ones used instead.
    ++ errorhandlergeneral ERR

Why is the build script trying to hit the malformed URLs like http://HTTPS///deb.debian.org/debian ?</description>
    <language>en</language>
    <lastBuildDate>Mon, 15 Feb 2021 11:10:20 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/build-error-apt-debian-base-on-docker/11132.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Build Error - APT - Debian base on Docker</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Trioxin" data-post="3" data-topic="11132">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/trioxin/40/2346_2.png" class="avatar"> Trioxin:</div>
<blockquote>
<p>In exchange, I’ll start making donations. I’m getting paid (Probably not enough) to do this so I’ll pass some on to Whonix.</p>
</blockquote>
</aside>
<p>Please HOLD with donations. I am not sure there is such a thing such as a conditional donation but I am not accepting conditional donations without prior agreement.</p>
<p>Why? That wouldn’t scale if anyone could conditionally donate like 5 USD and then expect complex things being maintained such as RPi support which and/or any tasks which require several hours of work and/or ongoing maintenance hours.</p>
<p>A conditional donation seems more like a contract, payment for service/goal.</p>
          <p><a href="http://forums.whonix.org/t/build-error-apt-debian-base-on-docker/11132/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/build-error-apt-debian-base-on-docker/11132/4</link>
        <pubDate>Mon, 15 Feb 2021 11:10:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-11132-4</guid>
        <source url="http://forums.whonix.org/t/build-error-apt-debian-base-on-docker/11132.rss">Build Error - APT - Debian base on Docker</source>
      </item>
      <item>
        <title>Build Error - APT - Debian base on Docker</title>
        <dc:creator><![CDATA[Trioxin]]></dc:creator>
        <description><![CDATA[
            <p>Thank you for that. In regards to hacks, I’ll do the work if you can just point me back in the right direction when I get stuck. In exchange, I’ll start making donations. I’m getting paid (Probably not enough) to do this so I’ll pass some on to Whonix.</p>
          <p><a href="http://forums.whonix.org/t/build-error-apt-debian-base-on-docker/11132/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/build-error-apt-debian-base-on-docker/11132/3</link>
        <pubDate>Sun, 14 Feb 2021 20:49:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-11132-3</guid>
        <source url="http://forums.whonix.org/t/build-error-apt-debian-base-on-docker/11132.rss">Build Error - APT - Debian base on Docker</source>
      </item>
      <item>
        <title>Build Error - APT - Debian base on Docker</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Not malformed. These are consumed by apt-cacher-ng.<br>
apt-cacher-ng should be running on <code>127.0.0.1:3142</code><br>
apt-cacher-ng should have been installed already during step <code>build-steps.d/1120_prepare-build-machine</code>.</p>
<blockquote>
<p><a href="https://github.com/TensorTom/Docker-Whonix/blob/master/Dockerfile">https://github.com/TensorTom/Docker-Whonix/blob/master/Dockerfile</a></p>
</blockquote>
<p>When building from source code, adding the Whonix signing key has only one optional use (<a href="https://www.whonix.org/wiki/Trust">recommended</a> for better security): verification of Whonix source code.</p>
<p>There is no need to add Whonix signing key to <code>/etc/apt/trusted.gpg.d</code> when building from source code.</p>
<p>For a proper implementation, it shouldn’t be using <code>--target root</code>. Rather <code>--target raw</code> initially during development. And then add another build step to to convert to the docker image format, which I haven’t looked into.</p>
<p>Btw I won’t be spending time on personal projects / hacks.</p>
          <p><a href="http://forums.whonix.org/t/build-error-apt-debian-base-on-docker/11132/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/build-error-apt-debian-base-on-docker/11132/2</link>
        <pubDate>Sun, 14 Feb 2021 13:28:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-11132-2</guid>
        <source url="http://forums.whonix.org/t/build-error-apt-debian-base-on-docker/11132.rss">Build Error - APT - Debian base on Docker</source>
      </item>
      <item>
        <title>Build Error - APT - Debian base on Docker</title>
        <dc:creator><![CDATA[Trioxin]]></dc:creator>
        <description><![CDATA[
            <p>I’m trying to install Whonix in Docker. I have created <a href="https://u.nu/qirco" rel="noopener nofollow ugc">a repo</a>.</p>
<p><a href="https://u.nu/nqfoj" rel="noopener nofollow ugc">My Dockerfile</a> (Debian Buster) seems to successfully prepare for the build. During execution of the build script</p>
<p><code>sudo /home/user/Whonix/whonix_build --flavor whonix-gateway-cli --target root --build'</code></p>
<p>I get what looks like an apt error:</p>
<pre><code>+ sudo --non-interactive -u root git submodule update --init --recursive --jobs=200
+ true 'INFO: Updated git sub modules.'
+ mkdir -p /usr/lib/security-misc
+ cp /home/user/Whonix/packages/security-misc//usr/lib/security-misc/apt-get-wrapper /usr/lib/security-misc/apt-get-wrapper
+ cp /home/user/Whonix/packages/security-misc//usr/lib/security-misc/apt-get-update-sanity-test /usr/lib/security-misc/apt-get-update-sanity-test
+ /home/user/Whonix/packages/security-misc//usr/lib/security-misc/apt-get-wrapper -o Acquire::http::Proxy=http://127.0.0.1:3142 -o Acquire::https::Proxy=http://127.0.0.1:3142 -o Acquire::tor::Proxy=http://127.0.0.1:3142 -o Acquire::Languages=none -o Acquire::IndexTargets::deb::Contents-deb::DefaultEnabled=false -o Apt::Install-Recommends=false -o Acquire::Retries=3 -o Dpkg::Options::=--force-confnew -o Dir::Etc::sourcelist=/home/user/Whonix/build_sources/debian_stable_current_clearnet.list -o Dir::Etc::sourceparts=- update
Ign:1 http://HTTPS///deb.debian.org/debian-security buster/updates InRelease
Ign:2 http://HTTPS///deb.debian.org/debian buster-updates InRelease
Ign:3 http://HTTPS///deb.debian.org/debian buster InRelease
Ign:1 http://HTTPS///deb.debian.org/debian-security buster/updates InRelease
Ign:2 http://HTTPS///deb.debian.org/debian buster-updates InRelease
Ign:3 http://HTTPS///deb.debian.org/debian buster InRelease
Ign:1 http://HTTPS///deb.debian.org/debian-security buster/updates InRelease
Ign:2 http://HTTPS///deb.debian.org/debian buster-updates InRelease
Ign:3 http://HTTPS///deb.debian.org/debian buster InRelease
Err:1 http://HTTPS///deb.debian.org/debian-security buster/updates InRelease
  Could not connect to 127.0.0.1:3142 (127.0.0.1). - connect (111: Connection refused)
Err:2 http://HTTPS///deb.debian.org/debian buster-updates InRelease
  Unable to connect to 127.0.0.1:3142:
Err:3 http://HTTPS///deb.debian.org/debian buster InRelease
  Unable to connect to 127.0.0.1:3142:
Reading package lists...
W: Failed to fetch http://HTTPS///deb.debian.org/debian-security/dists/buster/updates/InRelease  Could not connect to 127.0.0.1:3142 (127.0.0.1). - connect (111: Connection refused)
W: Failed to fetch http://HTTPS///deb.debian.org/debian/dists/buster-updates/InRelease  Unable to connect to 127.0.0.1:3142:
W: Failed to fetch http://HTTPS///deb.debian.org/debian/dists/buster/InRelease  Unable to connect to 127.0.0.1:3142:
W: Some index files failed to download. They have been ignored, or old ones used instead.
++ errorhandlergeneral ERR
</code></pre>
<p>Why is the build script trying to hit the malformed URLs like <a href="http://HTTPS///deb.debian.org/debian" rel="noopener nofollow ugc">http://HTTPS///deb.debian.org/debian</a> ?</p>
          <p><a href="http://forums.whonix.org/t/build-error-apt-debian-base-on-docker/11132/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/build-error-apt-debian-base-on-docker/11132/1</link>
        <pubDate>Sun, 14 Feb 2021 02:06:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-11132-1</guid>
        <source url="http://forums.whonix.org/t/build-error-apt-debian-base-on-docker/11132.rss">Build Error - APT - Debian base on Docker</source>
      </item>
  </channel>
</rss>
