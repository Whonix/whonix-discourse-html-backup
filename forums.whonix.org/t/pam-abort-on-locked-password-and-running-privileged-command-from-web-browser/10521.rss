<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>pam-abort-on-locked-password and running privileged command from web browser</title>
    <link>http://forums.whonix.org/t/pam-abort-on-locked-password-and-running-privileged-command-from-web-browser/10521</link>
    <description>I have functionality on a server that allows users to decrypt and mount a luks partition as needed to provide access to data via a web browser. Wanted to make the ability to open it available via the browser interface to make it easier and not have to give everyone ssh access. I tried giving www-data NOPASSWD access to run *cryptsetup* and *mount* via sudo to achieve this. I am getting an error that seems to be a Whonix hardening measure:

&gt; /usr/lib/security-misc/pam-abort-on-locked-password: ERROR: Password for user &quot;www-data&quot; is locked.

references to this are here: https://github.com/Whonix/security-misc/

and here: http://www.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/Dev/Strong_Linux_User_Account_Isolation

 I don&#39;t know how to disable that security measure or how much of a security risk it would be to do so.
Any suggestions on the best way to achieve my end goal are appreciated.</description>
    <language>en</language>
    <lastBuildDate>Thu, 05 Nov 2020 11:47:27 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/pam-abort-on-locked-password-and-running-privileged-command-from-web-browser/10521.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>pam-abort-on-locked-password and running privileged command from web browser</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/commit/581e31af81015fb85ee1bdd81586dbea13804955" target="_blank">github.com/Whonix/security-misc</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/security-misc/commit/581e31af81015fb85ee1bdd81586dbea13804955" target="_blank">comment</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2020-11-05" data-time="11:46:57" data-timezone="UTC">11:46AM - 05 Nov 20 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 2 additions and 0 deletions">
        <a href="https://github.com/Whonix/security-misc/commit/581e31af81015fb85ee1bdd81586dbea13804955" target="_blank">
          <span class="added">+2</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>

  </div>
</div>




  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/commit/abae787186d48b2cccf220cbf7b553f8478e60be" target="_blank">github.com/Whonix/security-misc</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/security-misc/commit/abae787186d48b2cccf220cbf7b553f8478e60be" target="_blank">usability: pam abort when attempting to login to root when root password is locked</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2020-11-05" data-time="11:47:16" data-timezone="UTC">11:47AM - 05 Nov 20 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 1 additions and 0 deletions">
        <a href="https://github.com/Whonix/security-misc/commit/abae787186d48b2cccf220cbf7b553f8478e60be" target="_blank">
          <span class="added">+1</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>

  </div>
</div>




  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/pam-abort-on-locked-password-and-running-privileged-command-from-web-browser/10521/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/pam-abort-on-locked-password-and-running-privileged-command-from-web-browser/10521/3</link>
        <pubDate>Thu, 05 Nov 2020 11:47:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10521-3</guid>
        <source url="http://forums.whonix.org/t/pam-abort-on-locked-password-and-running-privileged-command-from-web-browser/10521.rss">pam-abort-on-locked-password and running privileged command from web browser</source>
      </item>
      <item>
        <title>pam-abort-on-locked-password and running privileged command from web browser</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://github.com/Whonix/security-misc/blob/master/usr/lib/security-misc/pam-abort-on-locked-password">https://github.com/Whonix/security-misc/blob/master/usr/lib/security-misc/pam-abort-on-locked-password</a></p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/commit/79521397310f5e4e200291b2e2380e8e58953f18" target="_blank">github.com/Whonix/security-misc</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/security-misc/commit/79521397310f5e4e200291b2e2380e8e58953f18" target="_blank">comment</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2020-11-05" data-time="11:39:32" data-timezone="UTC">11:39AM - 05 Nov 20 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 4 additions and 0 deletions">
        <a href="https://github.com/Whonix/security-misc/commit/79521397310f5e4e200291b2e2380e8e58953f18" target="_blank">
          <span class="added">+4</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>

  </div>
</div>




  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/commit/211769dc65a5c98cbdb55ce62e83c9e2a9fa1540" target="_blank">github.com/Whonix/security-misc</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/security-misc/commit/211769dc65a5c98cbdb55ce62e83c9e2a9fa1540" target="_blank">comment</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2020-11-05" data-time="11:41:51" data-timezone="UTC">11:41AM - 05 Nov 20 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 3 additions and 0 deletions">
        <a href="https://github.com/Whonix/security-misc/commit/211769dc65a5c98cbdb55ce62e83c9e2a9fa1540" target="_blank">
          <span class="added">+3</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>

  </div>
</div>




  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/commit/dfe9b0f6c7364e4d3cc3bf13ad7c0fccc2cb7e10" target="_blank">github.com/Whonix/security-misc</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/security-misc/commit/dfe9b0f6c7364e4d3cc3bf13ad7c0fccc2cb7e10" target="_blank">fix, no longer unconditionally abort pam for user accounts with locked passwords</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2020-11-05" data-time="11:42:47" data-timezone="UTC">11:42AM - 05 Nov 20 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 2 additions and 2 deletions">
        <a href="https://github.com/Whonix/security-misc/commit/dfe9b0f6c7364e4d3cc3bf13ad7c0fccc2cb7e10" target="_blank">
          <span class="added">+2</span>
          <span class="removed">-2</span>
        </a>
      </div>
    </div>

  </div>
</div>


  <div class="github-row">
    <pre class="github-content" style="white-space: normal;">as locked user accounts might have valid sudoers exceptions
Thanks to @mimp for the bug report!
https://forums.whonix.org/t/pam-abort-on-locked-password-and-running-privileged-command-from-web-browser/10521</pre>
  </div>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/pam-abort-on-locked-password-and-running-privileged-command-from-web-browser/10521/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/pam-abort-on-locked-password-and-running-privileged-command-from-web-browser/10521/2</link>
        <pubDate>Thu, 05 Nov 2020 11:43:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10521-2</guid>
        <source url="http://forums.whonix.org/t/pam-abort-on-locked-password-and-running-privileged-command-from-web-browser/10521.rss">pam-abort-on-locked-password and running privileged command from web browser</source>
      </item>
      <item>
        <title>pam-abort-on-locked-password and running privileged command from web browser</title>
        <dc:creator><![CDATA[mimp]]></dc:creator>
        <description><![CDATA[
            <p>I have functionality on a server that allows users to decrypt and mount a luks partition as needed to provide access to data via a web browser. Wanted to make the ability to open it available via the browser interface to make it easier and not have to give everyone ssh access. I tried giving www-data NOPASSWD access to run <em>cryptsetup</em> and <em>mount</em> via sudo to achieve this. I am getting an error that seems to be a Whonix hardening measure:</p>
<blockquote>
<p>/usr/lib/security-misc/pam-abort-on-locked-password: ERROR: Password for user “www-data” is locked.</p>
</blockquote>
<p>references to this are here: <a href="https://github.com/Whonix/security-misc/" rel="nofollow noopener">https://github.com/Whonix/security-misc/</a></p>
<p>and here: <a href="http://www.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/Dev/Strong_Linux_User_Account_Isolation" rel="nofollow noopener">http://www.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/Dev/Strong_Linux_User_Account_Isolation</a></p>
<p>I don’t know how to disable that security measure or how much of a security risk it would be to do so.<br>
Any suggestions on the best way to achieve my end goal are appreciated.</p>
          <p><a href="http://forums.whonix.org/t/pam-abort-on-locked-password-and-running-privileged-command-from-web-browser/10521/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/pam-abort-on-locked-password-and-running-privileged-command-from-web-browser/10521/1</link>
        <pubDate>Mon, 02 Nov 2020 22:47:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10521-1</guid>
        <source url="http://forums.whonix.org/t/pam-abort-on-locked-password-and-running-privileged-command-from-web-browser/10521.rss">pam-abort-on-locked-password and running privileged command from web browser</source>
      </item>
  </channel>
</rss>
