<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Debugging isolated Multi-WS setup - Development - Whonix Forum</title>
    <meta name="description" content="I&amp;#39;ve opened a separate thread as per recommendation. I believe that there must be some discrepancy between how internal networks work in different virtualizer. That makes debugging more difficult to pin point. 

This fun&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="648.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Debugging isolated Multi-WS setup&#39;" href="648.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/debugging-isolated-multi-ws-setup/648" />
<meta name="twitter:url" content="https://forums.whonix.org/t/debugging-isolated-multi-ws-setup/648" />
<meta property="og:title" content="Debugging isolated Multi-WS setup" />
<meta name="twitter:title" content="Debugging isolated Multi-WS setup" />
<meta property="og:description" content="I’ve opened a separate thread as per recommendation. I believe that there must be some discrepancy between how internal networks work in different virtualizer. That makes debugging more difficult to pin point.  This function shouldn’t been seen as a “task”. I just think it would be nice to have and document for KVM folks.  The steps I applied to debug is to run tcpdump on eth2. logs show that packets from the non-connecting ws 2 do have an ip of 10.152.152.12. That means that the ws does have an..." />
<meta name="twitter:description" content="I’ve opened a separate thread as per recommendation. I believe that there must be some discrepancy between how internal networks work in different virtualizer. That makes debugging more difficult to pin point.  This function shouldn’t been seen as a “task”. I just think it would be nice to have and document for KVM folks.  The steps I applied to debug is to run tcpdump on eth2. logs show that packets from the non-connecting ws 2 do have an ip of 10.152.152.12. That means that the ws does have an..." />
<meta property="article:published_time" content="2014-11-05T01:42:25+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="648.html">Debugging isolated Multi-WS setup</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="648.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-11-05T01:42:25Z' class='post-time'>
                November 5, 2014,  1:42am
              </time>
              <meta itemprop='dateModified' content='2014-11-05T01:42:25Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I’ve opened a separate thread as per recommendation. I believe that there must be some discrepancy between how internal networks work in different virtualizer. That makes debugging more difficult to pin point.</p>
<p>This function shouldn’t been seen as a “task”. I just think it would be nice to have and document for KVM folks.</p>
<p>The steps I applied to debug is to run tcpdump on eth2. logs show that packets from the non-connecting ws 2 do have an ip of <span class="bbcode-b">10.152.152.12</span>. That means that the ws does have an ip assigned so no problem there. Reasons for why no packets are making it past that point are, I speculate, because no rules are applied to traffic coming from it. iptables on gw can deal with eth1 traffic but it doesn’t know anything about an eth2 or how to treat it. This causes it to do the failsafe of default block all traffic coming from eth2.</p>
<p>Again more speculation but I think if the iptables script on gw is modified to automatically apply eth1 rules to any (eth1+n)  interface that should do it.</p>
<p>If you have any different ideas on what I should do next, I’m all ears.</p>
        </div>

        <meta itemprop='headline' content='Debugging isolated Multi-WS setup'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="648.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-11-05T06:27:13Z' class='post-time'>
                November 5, 2014,  6:27am
              </time>
              <meta itemprop='dateModified' content='2014-11-05T06:27:13Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Looks like a small misunderstanding.</p>
<p>Now you’re back to the multi separate internal network interfaces.</p>
<p>I am not surprised the eth2 thing doesn’t work. In thread<br>
<a href="../../../external.html?link=https://www.whonix.org/forum/index.php/topic,688.0.html" class="onebox" target="_blank">https://www.whonix.org/forum/index.php/topic,688.0.html</a><br>
your question</p>
<blockquote>How difficult is it to do this so that all firewall rules for eth1 are auto-duplicated for any n number of internal network interfaces that the gateway auto-detects has been added to it - while maintaining complete separation between workstations on different internal networks?</blockquote>
<p>was answered by me and I implicitly said it’s not supported by <a href="../../../external.html?link=https://github.com/Whonix/whonix-gw-firewall">https://github.com/Whonix/whonix-gw-firewall</a> yet.</p>
<blockquote>Again more speculation but I think if the iptables script on gw is modified to automatically apply eth1 rules to any (eth1+n)  interface that should do it.</blockquote>
In essence, that's it.
<p>It cannot be solved by Q/A style. Technically the looks quite obvious to me. Just needs bash and some iptables knowledge and several hours of work.</p>
<p>[hr]</p>
<p>If you want <a href="../../../external.html?link=https://www.whonix.org/wiki/Multiple_Whonix-Workstations#How_to_use_more_than_one_Whonix-Workstation_-_EASY">https://www.whonix.org/wiki/Multiple_Whonix-Workstations#How_to_use_more_than_one_Whonix-Workstation_-_EASY</a> (without multiple separate internal networks) to work with KVM should go into a separate thread.</p>
        </div>

        <meta itemprop='headline' content='Debugging isolated Multi-WS setup'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="648.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-11-05T14:30:38Z' class='post-time'>
                November 5, 2014,  2:30pm
              </time>
              <meta itemprop='dateModified' content='2014-11-05T14:30:38Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>Looks like a small misunderstanding.
<p>Now you’re back to the multi separate internal network interfaces.</p>
<p>I am not surprised the eth2 thing doesn’t work. In thread</p>
</blockquote>
<p>Yes I realise it was a misunderstanding.</p>
<blockquote>In essence, that's it.
<p>It cannot be solved by Q/A style. Technically the looks quite obvious to me. Just needs bash and some iptables knowledge and several hours of work.</p>
</blockquote>
<p>Ok I see, makes sense.</p>
<blockquote>If you want https://www.whonix.org/wiki/Multiple_Whonix-Workstations#How_to_use_more_than_one_Whonix-Workstation_-_EASY (without multiple separate internal networks) to work with KVM should go into a separate thread.</blockquote>
<p>I was confused by the page’s title, but now that you explained its actually about multi-ws on the same internal network I report that it has always worked without any changes needed on my part. I never had to apply these instructions for it to work.</p>
        </div>

        <meta itemprop='headline' content='Debugging isolated Multi-WS setup'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
