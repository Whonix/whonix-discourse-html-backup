<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1</title>
    <link>http://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620</link>
    <description>I&#39;ve installed Qubes 4.1 with latest current-testing updates and I can&#39;t start Tor Control panel in sys-whonix but Anon Connection Wizard works fine and tor works fine as well.
When I try to start Tor Control panel from terminal then I&#39;m getting this error:
```
user@host:~$ sudo --set-home tor-control-panel 
QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to &#39;/tmp/runtime-root&#39;
QLayout: Attempting to add QLayout &quot;&quot; to QFrame &quot;&quot;, which already has a layout
Traceback (most recent call last):
  File &quot;/usr/bin/tor-control-panel&quot;, line 8, in &lt;module&gt;
    tor_control_panel.main()
  File &quot;/usr/lib/python3/dist-packages/tor_control_panel/tor_control_panel.py&quot;, line 760, in main
    tor_controller.refresh(True)
  File &quot;/usr/lib/python3/dist-packages/tor_control_panel/tor_control_panel.py&quot;, line 716, in refresh
    self.refresh_user_configuration()
  File &quot;/usr/lib/python3/dist-packages/tor_control_panel/tor_control_panel.py&quot;, line 664, in refresh_user_configuration
    args = torrc_gen.parse_torrc()
  File &quot;/usr/lib/python3/dist-packages/tor_control_panel/torrc_gen.py&quot;, line 128, in parse_torrc
    bridge_type = bridges_display[bridges_type.index(bridge_type)]
IndexError: list index out of range
QThread: Destroyed while thread is still running
Aborted
```
UPD:
It seems that the problem is that I&#39;ve added bridges with pluggable transport &#39;none&#39;. When I add bridges with pluggable transport &#39;obfs4&#39; then I can open Tor Control panel again.</description>
    <language>en</language>
    <lastBuildDate>Tue, 10 May 2022 15:33:01 +0000</lastBuildDate>
    <category>Qubes-Whonix</category>
    <atom:link href="http://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1</title>
        <dc:creator><![CDATA[tzwcfq]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="3" data-topic="13620">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Don’t use bridges of type <code>none</code>. Nowadays obfs4 is available so why downgrade.</p>
</blockquote>
</aside>
<p>The obfs4 bridges that I’m getting from bridges-torproject-org are mostly don’t work for me (I guess my ISP is actively banning tor bridges) or are stopping to work after some time. But bridges with type <code>none</code> are working fine I guess my ISP is not banning them so actively.</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="3" data-topic="13620">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Try [Anon Connection Wizard - Whonix]</p>
</blockquote>
</aside>
<p>Anon Connection Wizard works fine as I’ve stated  above. Tor Control panel was just more convenient as I could just see the Tor connection status and easily restart tor with the button.</p>
          <p><a href="http://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620/4</link>
        <pubDate>Tue, 10 May 2022 15:33:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13620-4</guid>
        <source url="http://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620.rss">Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1</source>
      </item>
      <item>
        <title>Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>A bug that should be fixed one day. Help welcome.</p>
<p>Meanwhile:</p>
<ul>
<li>Don’t use bridges of type <code>none</code>. Nowadays obfs4 is available so why downgrade.</li>
<li>Try <a href="https://www.whonix.org/wiki/Anon_Connection_Wizard" class="inline-onebox">Anon Connection Wizard - Whonix</a>.</li>
<li>File <code>/usr/local/etc/torrc.d/40_tor_control_panel.conf</code> can be deleted
<ul>
<li>
<blockquote>
<p><code>sudo rm /usr/local/etc/torrc.d/40_tor_control_panel.conf</code></p>
</blockquote>
</li>
<li>and then re-created using
<ul>
<li>
<a href="https://www.whonix.org/wiki/Tor-control-panel" class="inline-onebox">Tor Control Panel</a> or</li>
<li><a href="https://www.whonix.org/wiki/Anon_Connection_Wizard" class="inline-onebox">Anon Connection Wizard - Whonix</a></li>
<li><a href="https://www.whonix.org/wiki/Tor#Manual_Bridge_Configuration">Manual Bridge Configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>What to expect from Tor Control Panel / Anon Connection Wizard and what not, see:<br>
<a href="https://www.whonix.org/wiki/Troubleshooting#Unsuitable_Connectivity_Troubleshooting_Tools">Unsuitable Connectivity Troubleshooting Tools</a></p>
          <p><a href="http://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620/3</link>
        <pubDate>Tue, 10 May 2022 15:07:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13620-3</guid>
        <source url="http://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620.rss">Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1</source>
      </item>
      <item>
        <title>Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1</title>
        <dc:creator><![CDATA[tzwcfq]]></dc:creator>
        <description><![CDATA[
            <p>This is Tor Control panel bug and is unrelated to Qubes. I’ve tested it with Whonix on KVM and it fails in the same way.<br>
I’ve found a workaround:<br>
If you add at least one obfs4 bridge in you config in Anon Connection Wizard and add your other bridges with transport ‘none’ then the Tor Control panel can be started and used again.</p>
<p>UPD:<br>
It seems that it’s enough to just add ClientTransportPlugin in torrc config and it works even without adding obfs4 bridge:</p>
<pre><code class="lang-auto">sudo sh -c 'echo "ClientTransportPlugin obfs4 exec /usr/bin/obfs4proxy" &gt;&gt; /usr/local/etc/torrc.d/40_tor_control_panel.conf'
</code></pre>
<p>Also it doesn’t work if I add ClientTransportPlugin /usr/local/etc/torrc.d/50_user.conf.</p>
          <p><a href="http://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620/2</link>
        <pubDate>Tue, 10 May 2022 04:23:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13620-2</guid>
        <source url="http://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620.rss">Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1</source>
      </item>
      <item>
        <title>Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1</title>
        <dc:creator><![CDATA[tzwcfq]]></dc:creator>
        <description><![CDATA[
            <p>I’ve installed Qubes 4.1 with latest current-testing updates and I can’t start Tor Control panel in sys-whonix but Anon Connection Wizard works fine and tor works fine as well.<br>
When I try to start Tor Control panel from terminal then I’m getting this error:</p>
<pre><code class="lang-auto">user@host:~$ sudo --set-home tor-control-panel 
QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-root'
QLayout: Attempting to add QLayout "" to QFrame "", which already has a layout
Traceback (most recent call last):
  File "/usr/bin/tor-control-panel", line 8, in &lt;module&gt;
    tor_control_panel.main()
  File "/usr/lib/python3/dist-packages/tor_control_panel/tor_control_panel.py", line 760, in main
    tor_controller.refresh(True)
  File "/usr/lib/python3/dist-packages/tor_control_panel/tor_control_panel.py", line 716, in refresh
    self.refresh_user_configuration()
  File "/usr/lib/python3/dist-packages/tor_control_panel/tor_control_panel.py", line 664, in refresh_user_configuration
    args = torrc_gen.parse_torrc()
  File "/usr/lib/python3/dist-packages/tor_control_panel/torrc_gen.py", line 128, in parse_torrc
    bridge_type = bridges_display[bridges_type.index(bridge_type)]
IndexError: list index out of range
QThread: Destroyed while thread is still running
Aborted
</code></pre>
<p>UPD:<br>
It seems that the problem is that I’ve added bridges with pluggable transport ‘none’. When I add bridges with pluggable transport ‘obfs4’ then I can open Tor Control panel again.</p>
          <p><a href="http://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620/1</link>
        <pubDate>Tue, 03 May 2022 17:52:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13620-1</guid>
        <source url="http://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620.rss">Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1</source>
      </item>
  </channel>
</rss>
