<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1 - Qubes-Whonix - Whonix Forum</title>
    <meta name="description" content="I’ve installed Qubes 4.1 with latest current-testing updates and I can’t start Tor Control panel in sys-whonix but Anon Connection Wizard works fine and tor works fine as well. 
When I try to start Tor Control panel from&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="13620.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1&#39;" href="13620.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620" />
<meta name="twitter:url" content="https://forums.whonix.org/t/cant-start-tor-control-panel-in-sys-whonix-qubes-4-1/13620" />
<meta property="og:title" content="Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1" />
<meta name="twitter:title" content="Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1" />
<meta property="og:description" content="I’ve installed Qubes 4.1 with latest current-testing updates and I can’t start Tor Control panel in sys-whonix but Anon Connection Wizard works fine and tor works fine as well.  When I try to start Tor Control panel from terminal then I’m getting this error:  user@host:~$ sudo --set-home tor-control-panel  QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to &#39;/tmp/runtime-root&#39; QLayout: Attempting to add QLayout &quot;&quot; to QFrame &quot;&quot;, which already has a layout Traceback (most recent call last):   F..." />
<meta name="twitter:description" content="I’ve installed Qubes 4.1 with latest current-testing updates and I can’t start Tor Control panel in sys-whonix but Anon Connection Wizard works fine and tor works fine as well.  When I try to start Tor Control panel from terminal then I’m getting this error:  user@host:~$ sudo --set-home tor-control-panel  QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to &#39;/tmp/runtime-root&#39; QLayout: Attempting to add QLayout &quot;&quot; to QFrame &quot;&quot;, which already has a layout Traceback (most recent call last):   F..." />
<meta property="article:published_time" content="2022-05-03T17:52:39+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="13620.html">Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/qubes-whonix/12.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #63a0ff'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Qubes-Whonix</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/tzwcfq'><span itemprop='name'>tzwcfq</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="13620.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-05-03T17:52:39Z' class='post-time'>
                May 3, 2022,  5:52pm
              </time>
              <meta itemprop='dateModified' content='2022-05-03T17:56:55Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I’ve installed Qubes 4.1 with latest current-testing updates and I can’t start Tor Control panel in sys-whonix but Anon Connection Wizard works fine and tor works fine as well.<br>
When I try to start Tor Control panel from terminal then I’m getting this error:</p>
<pre><code class="lang-auto">user@host:~$ sudo --set-home tor-control-panel 
QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-root'
QLayout: Attempting to add QLayout "" to QFrame "", which already has a layout
Traceback (most recent call last):
  File "/usr/bin/tor-control-panel", line 8, in &lt;module&gt;
    tor_control_panel.main()
  File "/usr/lib/python3/dist-packages/tor_control_panel/tor_control_panel.py", line 760, in main
    tor_controller.refresh(True)
  File "/usr/lib/python3/dist-packages/tor_control_panel/tor_control_panel.py", line 716, in refresh
    self.refresh_user_configuration()
  File "/usr/lib/python3/dist-packages/tor_control_panel/tor_control_panel.py", line 664, in refresh_user_configuration
    args = torrc_gen.parse_torrc()
  File "/usr/lib/python3/dist-packages/tor_control_panel/torrc_gen.py", line 128, in parse_torrc
    bridge_type = bridges_display[bridges_type.index(bridge_type)]
IndexError: list index out of range
QThread: Destroyed while thread is still running
Aborted
</code></pre>
<p>UPD:<br>
It seems that the problem is that I’ve added bridges with pluggable transport ‘none’. When I add bridges with pluggable transport ‘obfs4’ then I can open Tor Control panel again.</p>
        </div>

        <meta itemprop='headline' content='Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/tzwcfq'><span itemprop='name'>tzwcfq</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="13620.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-05-10T04:23:13Z' class='post-time'>
                May 10, 2022,  4:23am
              </time>
              <meta itemprop='dateModified' content='2022-05-10T04:28:41Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>This is Tor Control panel bug and is unrelated to Qubes. I’ve tested it with Whonix on KVM and it fails in the same way.<br>
I’ve found a workaround:<br>
If you add at least one obfs4 bridge in you config in Anon Connection Wizard and add your other bridges with transport ‘none’ then the Tor Control panel can be started and used again.</p>
<p>UPD:<br>
It seems that it’s enough to just add ClientTransportPlugin in torrc config and it works even without adding obfs4 bridge:</p>
<pre><code class="lang-auto">sudo sh -c 'echo "ClientTransportPlugin obfs4 exec /usr/bin/obfs4proxy" &gt;&gt; /usr/local/etc/torrc.d/40_tor_control_panel.conf'
</code></pre>
<p>Also it doesn’t work if I add ClientTransportPlugin /usr/local/etc/torrc.d/50_user.conf.</p>
        </div>

        <meta itemprop='headline' content='Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="13620.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-05-10T15:07:20Z' class='post-time'>
                May 10, 2022,  3:07pm
              </time>
              <meta itemprop='dateModified' content='2022-05-10T15:07:20Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>A bug that should be fixed one day. Help welcome.</p>
<p>Meanwhile:</p>
<ul>
<li>Don’t use bridges of type <code>none</code>. Nowadays obfs4 is available so why downgrade.</li>
<li>Try <a href="../../../external.html?link=https://www.whonix.org/wiki/Anon_Connection_Wizard" class="inline-onebox">Anon Connection Wizard - Whonix</a>.</li>
<li>File <code>/usr/local/etc/torrc.d/40_tor_control_panel.conf</code> can be deleted
<ul>
<li>
<blockquote>
<p><code>sudo rm /usr/local/etc/torrc.d/40_tor_control_panel.conf</code></p>
</blockquote>
</li>
<li>and then re-created using
<ul>
<li>
<a href="../../../external.html?link=https://www.whonix.org/wiki/Tor-control-panel" class="inline-onebox">Tor Control Panel</a> or</li>
<li><a href="../../../external.html?link=https://www.whonix.org/wiki/Anon_Connection_Wizard" class="inline-onebox">Anon Connection Wizard - Whonix</a></li>
<li><a href="../../../external.html?link=https://www.whonix.org/wiki/Tor#Manual_Bridge_Configuration">Manual Bridge Configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>What to expect from Tor Control Panel / Anon Connection Wizard and what not, see:<br>
<a href="../../../external.html?link=https://www.whonix.org/wiki/Troubleshooting#Unsuitable_Connectivity_Troubleshooting_Tools">Unsuitable Connectivity Troubleshooting Tools</a></p>
        </div>

        <meta itemprop='headline' content='Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/tzwcfq'><span itemprop='name'>tzwcfq</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="13620.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-05-10T15:33:01Z' class='post-time'>
                May 10, 2022,  3:33pm
              </time>
              <meta itemprop='dateModified' content='2022-05-10T15:33:01Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="3" data-topic="13620">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Don’t use bridges of type <code>none</code>. Nowadays obfs4 is available so why downgrade.</p>
</blockquote>
</aside>
<p>The obfs4 bridges that I’m getting from bridges-torproject-org are mostly don’t work for me (I guess my ISP is actively banning tor bridges) or are stopping to work after some time. But bridges with type <code>none</code> are working fine I guess my ISP is not banning them so actively.</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="3" data-topic="13620">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Try [Anon Connection Wizard - Whonix]</p>
</blockquote>
</aside>
<p>Anon Connection Wizard works fine as I’ve stated  above. Tor Control panel was just more convenient as I could just see the Tor connection status and easily restart tor with the button.</p>
        </div>

        <meta itemprop='headline' content='Can&#39;t start Tor Control panel in sys-whonix Qubes 4.1'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
