<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
    <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703</link>
    <description>What will be the optimal paravirtualization setting for Whonix?

- `none`: explicitly turns off exposing any paravirtualization interface sounds good security wise but could be really slow. Please test and leave feedback.
- `minimal`: sounds like a worthwhile alternative if `none` is too slow. But what technology is `minimal` actually using? VirtualBox legacy or kvm? However, documentation says, it lets the VM read the APIC frequency. To be researched how bad this would be.
- `legacy` is good enough for now. That&#39;s like VirtualBox 4.x. But since they now call it legacy, that code will rot, and probably should be avoided in long run.
- `kvm` (VirtualBox) is problematic, since it provides unwanted pvclock kvm-clock. (Which allows a clock correlation attacks once VM is compromised.
- Does not seem like pvclocks can be configured in VirtualBox. (With linux libvirt kvm it&#39;s possible.)
- [clock correlation attack](https://www.whonix.org/wiki/Dev/TimeSync#Clock_Correlation_Attack)
- However, this presupposes that users did read and apply [spoof the initial virtual clock offset](https://www.whonix.org/wiki/Advanced_Security_Guide#Spoof_the_Initial_Virtual_Hardware_Clock_Offset) beforehand, which probably few do.
- Therefore probably not a big issues.
- `default` is problematic, [since in some cases](https://forums.whonix.org/t/recurring-time-error-within-gateway-11-under-virtualbox-5-error-unwanted-pvclock-kvm-clock-tsc-acpi-pm-detected), it does autodetection, then used VirtualBox KVM.
- `hyperv` The microsoft thingy. No idea about that one. May or may not be great for Linux guests (Whonix).

Each virtualization platform should be reviewed for performance, security, pvclock interfaces and [hardware identifiers readable by the vm](https://www.whonix.org/wiki/Protocol-Leak-Protection_and_Fingerprinting-Protection). Please try various settings. Most interesting for now are `none` and `minimal`. Post the following in the forum discussion thread on this topic.

1. Host OS name: Debian, Windows 10, Gentoo, etc.
2. Host OS architecture: 64 or 32 Bit
3. Whonix Version - only 11, or better.
4. VirtualBox Version used - only VirtualBox, or better VirtualBox Acceleration Mode Used
5. Notable Observations - errors, warnings. slowness, failures, etc.
6. Does watching online videos such as youtube still work?
7. Does watching videos in VLC still work?
8. Open a console window. Post the output of. *cat
/sys/devices/system/clocksource/clocksource0/current\_clocksource*
9. And the output of. *cat
/sys/devices/system/clocksource/clocksource0/available\_clocksource*
10- Any other &#39;things&#39; you deem important.

This is related to:

- &lt;https://www.virtualbox.org/manual/ch08.html&gt; read this one very parameter description `--paravirtprovider none|default|legacy|minimal|hyperv|kvm`
- read this one very chapter &lt;https://www.virtualbox.org/manual/ch10.html#gimproviders&gt;</description>
    <language>en</language>
    <lastBuildDate>Mon, 20 Apr 2020 03:44:26 +0000</lastBuildDate>
    <category>VirtualBox</category>
    <atom:link href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            
          <p><a href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/15</link>
        <pubDate>Mon, 20 Apr 2020 12:28:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1703-15</guid>
        <source url="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss">Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</source>
      </item>
      <item>
        <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
        <dc:creator><![CDATA[anontor]]></dc:creator>
        <description><![CDATA[
            <p>There is a post somewhere in the Virtualbox section where I tried and wrote down some notes about the various virtualization settings. “Default” seemed to be optimal, which as you said, uses “KVM” for Linux hosts. Honestly, they were mostly the same, slight differences with clock settings, and cpuid or dmidecode outputs, but that’s all really. I really tried to find the “best” one and settled on simple “default/kvm.”</p>
          <p><a href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/14</link>
        <pubDate>Mon, 20 Apr 2020 03:44:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1703-14</guid>
        <source url="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss">Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</source>
      </item>
      <item>
        <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://www.virtualbox.org/manual/ch10.html#gimproviders" class="onebox" target="_blank">https://www.virtualbox.org/manual/ch10.html#gimproviders</a></p>
<blockquote>
<h2>Paravirtualization Providers</h2>
<p>Oracle VM VirtualBox enables the exposure of a paravirtualization interface, to facilitate accurate and efficient execution of software within a virtual machine. These interfaces require the guest operating system to recognize their presence and make use of them in order to leverage the benefits of communicating with the Oracle VM VirtualBox hypervisor.</p>
<p>Most modern, mainstream guest operating systems, including Windows and Linux, ship with support for one or more paravirtualization interfaces. Hence, there is typically no need to install additional software in the guest to take advantage of this feature.</p>
<p>Exposing a paravirtualization provider to the guest operating system does not rely on the choice of host platforms. For example, the <em>Hyper-V</em> paravirtualization provider can be used for VMs to run<br>
on any host platform supported by Oracle VM VirtualBox and not just Windows.</p>
<p>Oracle VM VirtualBox provides the following interfaces:</p>
<ul>
<li>
<strong>Minimal</strong> : Announces the presence of a virtualized environment. Additionally, reports the TSC and APIC frequency to the guest operating system. This provider is mandatory for running any Mac OS X guests.</li>
<li>
<strong>KVM</strong> : Presents a Linux KVM hypervisor interface which is recognized by Linux kernels version 2.6.25 or later. Oracle VM VirtualBox’s implementation currently supports paravirtualized clocks and SMP spinlocks. This provider is recommended for Linux guests.</li>
<li>
<strong>Hyper-V</strong> : Presents a Microsoft Hyper-V hypervisor interface which is recognized by Windows 7 and newer operating systems. Oracle VM VirtualBox’s implementation currently supports paravirtualized clocks, APIC frequency reporting, guest debugging, guest crash reporting and relaxed timer checks. This provider is recommended for Windows guests.</li>
</ul>
</blockquote>
<p>Quote <a href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-modifyvm-general">https://www.virtualbox.org/manual/ch08.html#vboxmanage-modifyvm-general</a></p>
<blockquote>
<ul>
<li>
<code>--paravirtprovider           none|default|legacy|minimal|hyperv|kvm</code> : Specifies which paravirtualization interface to provide to the guest operating system. Specifying <code>none</code> explicitly turns off exposing any paravirtualization interface. The option <code>default</code> selects an appropriate interface when starting the VM, depending on the guest OS type. This is the default option chosen when creating new VMs. The <code>legacy</code> option is used for VMs which were created with older Oracle VM VirtualBox versions and will pick a paravirtualization interface when starting the VM with Oracle VM VirtualBox 5.0 and newer. The <code>minimal</code> provider is mandatory for Mac OS X guests. <code>kvm</code> and <code>hyperv</code> are recommended for Linux and Windows guests respectively. These options are explained in <a href="https://www.virtualbox.org/manual/ch10.html#gimproviders">Section 10.5, “Paravirtualization Providers”</a>.</li>
</ul>
</blockquote>
<p>Whonix is using <code>default</code> which then results in <code>KVM</code>.</p>
<pre><code>vboxmanage showvminfo Whonix-Gateway-XFCE
</code></pre>
<blockquote>
<p>Paravirt. Provider:          Default<br>
Effective Paravirt. Prov.:   KVM</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/13</link>
        <pubDate>Sun, 19 Apr 2020 18:42:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1703-13</guid>
        <source url="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss">Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</source>
      </item>
      <item>
        <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            
          <p><a href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/12</link>
        <pubDate>Fri, 25 Oct 2019 00:06:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1703-12</guid>
        <source url="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss">Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</source>
      </item>
      <item>
        <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>tempest:</p>
<blockquote>
<p>perhaps i am misreading you, <a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a>. but, in the gui manager for virtualbox 5.1.30 through stretch-backports, there is a pull down menu to select a paravirtualization provider. click on “settings” for the vm in question. then click “system -&gt; acceleration.” there is a gui option to choose providers next to “paravirtualization interface.” current stable whonix defaults to “legacy.”</p>
</blockquote>
<p>Right.</p>
<p>My mistake. Was happening for me since there was no VT-X available.</p>
<p>For Whonix 14 as per VirtualBox it currently defaults to “default”,<br>
which is KVM.</p>
<p>Still debatable which one is best.</p>
          <p><a href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/11</link>
        <pubDate>Mon, 12 Feb 2018 08:38:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1703-11</guid>
        <source url="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss">Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</source>
      </item>
      <item>
        <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
        <dc:creator><![CDATA[tempest]]></dc:creator>
        <description><![CDATA[
            <p>perhaps i am misreading you, <a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a>. but, in the gui manager for virtualbox 5.1.30 through stretch-backports, there is a pull down menu to select a paravirtualization provider. click on “settings” for the vm in question. then click “system -&gt; acceleration.” there is a gui option to choose providers next to “paravirtualization interface.” current stable whonix defaults to “legacy.”</p>
          <p><a href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/10</link>
        <pubDate>Mon, 12 Feb 2018 05:30:07 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1703-10</guid>
        <source url="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss">Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</source>
      </item>
      <item>
        <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>Minimal: Announces the presence of a virtualized environment. Additionally, reports the TSC and APIC frequency to the guest operating system. This provider is mandatory for running any Mac OS X guests.</p>
</blockquote>
<p>This indicates <code>none</code> doesn’t provide <code>TSC</code>. However, <code>TSC</code> is required by <code>haveged</code>.</p>
          <p><a href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/9</link>
        <pubDate>Fri, 02 Feb 2018 19:49:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1703-9</guid>
        <source url="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss">Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</source>
      </item>
      <item>
        <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            
          <p><a href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/8</link>
        <pubDate>Fri, 02 Feb 2018 19:47:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1703-8</guid>
        <source url="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss">Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</source>
      </item>
      <item>
        <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://packages.debian.org/stretch-backports/virtualbox">https://packages.debian.org/stretch-backports/virtualbox</a> ships VirtualBox 5.1.30, which no longer has gui settings for paravirtualization providers. It defaults to <code>KVM</code>.</p>
<hr>
<p>VirtualBox manual doesn’t list most options anymore.</p>
<p><a href="https://www.virtualbox.org/manual/ch10.html#gimproviders" class="onebox" target="_blank">https://www.virtualbox.org/manual/ch10.html#gimproviders</a></p>
<blockquote>
<p>Minimal: Announces the presence of a virtualized environment. Additionally, reports the TSC and APIC frequency to the guest operating system. This provider is mandatory for running any Mac OS X guests.</p>
<p>KVM: Presents a Linux KVM hypervisor interface which is recognized by Linux kernels starting with version 2.6.25. VirtualBox’s implementation currently supports paravirtualized clocks and SMP spinlocks. This provider is recommended for Linux guests.</p>
<p>Hyper-V: Presents a Microsoft Hyper-V hypervisor interface which is recognized by Windows 7 and newer operating systems. VirtualBox’s implementation currently supports paravirtualized clocks, APIC frequency reporting, guest debugging, guest crash reporting and relaxed timer checks. This provider is recommended for Windows guests.</p>
</blockquote>
<hr>
<p><a href="https://www.virtualbox.org/manual/ch08.html#idp47569025503568" class="onebox" target="_blank">https://www.virtualbox.org/manual/ch08.html#idp47569025503568</a></p>
<blockquote>
<p>–paravirtprovider none|default|legacy|minimal|hyperv|kvm: This setting specifies which paravirtualization interface to provide to the guest operating system. Specifying none explicitly turns off exposing any paravirtualization interface. The option default, will pick an appropriate interface depending on the guest OS type while starting the VM. This is the default option chosen while creating new VMs. The legacy option is chosen for VMs which were created with older VirtualBox versions and will pick a paravirtualization interface while starting the VM with VirtualBox 5.0 and newer. The minimal provider is mandatory for Mac OS X guests, while kvm and hyperv are recommended for Linux and Windows guests respectively. These options are explained in detail under Section 10.4, “Paravirtualization providers”.</p>
</blockquote>
<p>Dunno if the latter is still up to date. Perhaps <code>none</code> was removed?</p>
<p>So this still needs research which one is best.</p>
          <p><a href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/7</link>
        <pubDate>Fri, 02 Feb 2018 19:47:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1703-7</guid>
        <source url="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss">Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</source>
      </item>
      <item>
        <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
        <dc:creator><![CDATA[Corrupt_Correct_Pig]]></dc:creator>
        <description><![CDATA[
            <p>Hi Patrick,</p>
<p>Additional Paravirtualization Interface multimedia testing to drive this issue to a conclusion.</p>
<p>64-Bit Linux Host running VBox 5.0.10 and running a fully updated Whonix Gateway 11 with<br>
128 Mb allocated DRAM as one of the Guest operating systems</p>
<p>Test 1:  Running these two Guests concurrently:</p>
<p>Gateway 11 Paravirtualization Interface = None<br>
Whonix Workstation 11 Paravirtualization Interface = None</p>
<p>Notable Results:</p>
<p>In the Gateway:  Notable Observations:  whonixcheck works, and the Gateway operates<br>
correctly.  I suspect the hrtimer interrupt issue is an anomaly, as I have now seen it reported when whonixcheck is not running.  Does not appear to impact anything.</p>
<p>In the Workstation:  whonixcheck works, YouTube works, and VLC works - and everything works correctly at ‘normal’ speeds.</p>
<p>+++++++++++++++++++++++++++++++++++++++++++++++++++</p>
<p>Test 2:  Running these two Guests concurrently:</p>
<p>Gateway 11 Paravirtualization Interface = None<br>
A 64-Bit Linux Guest OS pointed at the Gateway with Paravirtualization Interface = None</p>
<p>Notable Results:</p>
<p>In the Gateway:  Notable Observations:  whonixcheck works, and the Gateway operates<br>
correctly.</p>
<p>In the 64-Bit Linux Guest OS:  YouTube works, and VLC works - and everything works correctly at ‘normal’ speeds.</p>
<p>+++++++++++++++++++++++++++++++++++++++++++++++++++</p>
<p>These results show, at least on my system, that even with both the Gateway and the other Guest OS using Paravirtualization Interface = None, the overall Whonix user ‘experience’ remains within an acceptable range.</p>
<p>Perhaps this configuration is not optimal, but it is indeed, acceptable.  <img src="//forums.whonix.org/images/emoji/twitter/triumph.png?v=5" title=":triumph:" class="emoji" alt=":triumph:"></p>
<p>CCP</p>
          <p><a href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/3</link>
        <pubDate>Wed, 02 Dec 2015 05:54:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1703-3</guid>
        <source url="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss">Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</source>
      </item>
      <item>
        <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            
          <p><a href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/2</link>
        <pubDate>Tue, 01 Dec 2015 18:07:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1703-2</guid>
        <source url="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss">Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</source>
      </item>
      <item>
        <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>What will be the optimal paravirtualization setting for Whonix?</p>
<ul>
<li>
<code>none</code>: explicitly turns off exposing any paravirtualization interface sounds good security wise but could be really slow. Please test and leave feedback.</li>
<li>
<code>minimal</code>: sounds like a worthwhile alternative if <code>none</code> is too slow. But what technology is <code>minimal</code> actually using? VirtualBox legacy or kvm? However, documentation says, it lets the VM read the APIC frequency. To be researched how bad this would be.</li>
<li>
<code>legacy</code> is good enough for now. That’s like VirtualBox 4.x. But since they now call it legacy, that code will rot, and probably should be avoided in long run.</li>
<li>
<code>kvm</code> (VirtualBox) is problematic, since it provides unwanted pvclock kvm-clock. (Which allows a clock correlation attacks once VM is compromised.</li>
<li>Does not seem like pvclocks can be configured in VirtualBox. (With linux libvirt kvm it’s possible.)</li>
<li><a href="https://www.whonix.org/wiki/Dev/TimeSync#Clock_Correlation_Attack">clock correlation attack</a></li>
<li>However, this presupposes that users did read and apply <a href="https://www.whonix.org/wiki/Advanced_Security_Guide#Spoof_the_Initial_Virtual_Hardware_Clock_Offset">spoof the initial virtual clock offset</a> beforehand, which probably few do.</li>
<li>Therefore probably not a big issues.</li>
<li>
<code>default</code> is problematic, <a href="https://forums.whonix.org/t/recurring-time-error-within-gateway-11-under-virtualbox-5-error-unwanted-pvclock-kvm-clock-tsc-acpi-pm-detected">since in some cases</a>, it does autodetection, then used VirtualBox KVM.</li>
<li>
<code>hyperv</code> The microsoft thingy. No idea about that one. May or may not be great for Linux guests (Whonix).</li>
</ul>
<p>Each virtualization platform should be reviewed for performance, security, pvclock interfaces and <a href="https://www.whonix.org/wiki/Protocol-Leak-Protection_and_Fingerprinting-Protection">hardware identifiers readable by the vm</a>. Please try various settings. Most interesting for now are <code>none</code> and <code>minimal</code>. Post the following in the forum discussion thread on this topic.</p>
<ol>
<li>Host OS name: Debian, Windows 10, Gentoo, etc.</li>
<li>Host OS architecture: 64 or 32 Bit</li>
<li>Whonix Version - only 11, or better.</li>
<li>VirtualBox Version used - only VirtualBox, or better VirtualBox Acceleration Mode Used</li>
<li>Notable Observations - errors, warnings. slowness, failures, etc.</li>
<li>Does watching online videos such as youtube still work?</li>
<li>Does watching videos in VLC still work?</li>
<li>Open a console window. Post the output of. <em>cat<br>
/sys/devices/system/clocksource/clocksource0/current_clocksource</em>
</li>
<li>And the output of. <em>cat<br>
/sys/devices/system/clocksource/clocksource0/available_clocksource</em><br>
10- Any other ‘things’ you deem important.</li>
</ol>
<p>This is related to:</p>
<ul>
<li>
<a href="https://www.virtualbox.org/manual/ch08.html">https://www.virtualbox.org/manual/ch08.html</a> read this one very parameter description <code>--paravirtprovider none|default|legacy|minimal|hyperv|kvm</code>
</li>
<li>read this one very chapter <a href="https://www.virtualbox.org/manual/ch10.html#gimproviders">https://www.virtualbox.org/manual/ch10.html#gimproviders</a>
</li>
</ul>
          <p><a href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/1</link>
        <pubDate>Tue, 01 Dec 2015 18:06:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1703-1</guid>
        <source url="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss">Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</source>
      </item>
      <item>
        <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="21" data-topic="1671">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/c/a9adbd/40.png" class="avatar"><a href="//forums.whonix.org/t/recurring-time-error-within-gateway-11-under-virtualbox-5-error-unwanted-pvclock-kvm-clock-tsc-acpi-pm-detected/1671/21">Recurring Time Error within Gateway 11 under VirtualBox 5 - ERROR: Unwanted PVClock kvm-clock tsc acpi_pm detected!</a>
</div>
<blockquote>
<p>hrtimer:  interrupt took xxx ns</p>
</blockquote>
</aside>
<p>From my search I concluded, “if everything is working, then everything is fine”. I also think it’s unrelated. This message has been posted in the forums earlier.</p>
          <p><a href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/6</link>
        <pubDate>Tue, 01 Dec 2015 18:04:10 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1703-6</guid>
        <source url="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss">Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</source>
      </item>
      <item>
        <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
        <dc:creator><![CDATA[Corrupt_Correct_Pig]]></dc:creator>
        <description><![CDATA[
            <p>Hi Patrick,</p>
<p>I do not have time at the moment to go back and test multimedia support under:  None.  Perhaps later.</p>
<p>Here is what I do know:</p>
<p>My Paravirtualization Interface test results:</p>
<p>All tests were run on a fully updated RPM-based, 64-Bit, Host running VBox 5.0.10 and running a fully updated Whonix Gateway 11 with 128 Mb allocated DRAM as one of the Guest operating systems.</p>
<ol>
<li>
<p>Paravirtualization Interface = Default<br>
Notable Observations:  PVClock warning as reported above.  whonixcheck works, and the Gateway operates correctly.</p>
</li>
<li>
<p>Paravirtualization Interface = KVM<br>
Notable Observations:  Exact same results as <span class="hashtag">#1</span> above as KVM acceleration is the VBox default for Linux guests.</p>
</li>
<li>
<p>Paravirtualization Interface = None<br>
Notable Observations:  whonixcheck works, and the Gateway operates correctly.  I noted the ‘hrtimer: interrupt took xxx ns’ issue previously when using this mode.</p>
</li>
<li>
<p>Paravirtualization Interface = Minimal<br>
Notable Observations:  whonixcheck works, and the Gateway operates correctly.</p>
</li>
<li>
<p>Paravirtualization Interface = Legacy<br>
Notable Observations:  whonixcheck works, and the Gateway operates correctly.</p>
</li>
<li>
<p>Paravirtualization Interface = Hyper-V (which is aimed at Windows guests)<br>
Notable Observations:  whonixcheck works, and the Gateway operates correctly.</p>
</li>
</ol>
<p>My take on this data is that the Gateway utilizes almost trivial Host resources, and that is the reason almost no differences are evident irrespective of the Paravirtualization Interface chosen.</p>
<p>I would not be surprised if much larger differences were observed when testing different Paravirtualization Interfaces running full blown operating systems with KDE or Gnome or Cortana running behind the Gateway, such as the Whonix Workstation, Win 10, or Arch Linux.</p>
<p>However, even if that were true, I suspect you would need to have several, if not many, different Host systems, in your test database to draw any valid conclusions concerning which VBox Paravirtualization Interface is the best overall choice for Workstation OS guests.</p>
<p>Keep in mind, the correct answer may be:  it depends, and therefore, it is up to the user to experiment and decide for themselves.</p>
<p>CCP</p>
          <p><a href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/5</link>
        <pubDate>Tue, 01 Dec 2015 16:00:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1703-5</guid>
        <source url="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss">Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</source>
      </item>
      <item>
        <title>Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="21" data-topic="1671">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/c/a9adbd/40.png" class="avatar"><a href="//forums.whonix.org/t/recurring-time-error-within-gateway-11-under-virtualbox-5-error-unwanted-pvclock-kvm-clock-tsc-acpi-pm-detected/1671/21">Recurring Time Error within Gateway 11 under VirtualBox 5 - ERROR: Unwanted PVClock kvm-clock tsc acpi_pm detected!</a>
</div>
<blockquote>
<p>In any event, the Gateway is operating correctly under  Acceleration = None, and if any ‘slowness’ is in fact occurring, it is imperceptible.  Perhaps there is some kind of relevant speed test?</p>
</blockquote>
</aside>
<p>Multimedia. Does watching online videos (youtube) still work? Does watching videos in VLC still work?</p>
          <p><a href="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703/4</link>
        <pubDate>Tue, 01 Dec 2015 14:38:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1703-4</guid>
        <source url="http://forums.whonix.org/t/whonix-virtualbox-paravirtualization-which-acceleration-mode-is-optimal-help-wanted/1703.rss">Whonix VirtualBox Paravirtualization - Which Acceleration Mode is Optimal? Help Wanted!</source>
      </item>
  </channel>
</rss>
