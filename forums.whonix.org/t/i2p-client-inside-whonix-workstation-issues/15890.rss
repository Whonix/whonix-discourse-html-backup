<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>I2P client inside Whonix-Workstation Issues</title>
    <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890</link>
    <description>Hello,

I followed the instructions: on the wiki `https://www.whonix.org/wiki/I2P#I2P_client_inside_Whonix-Workstation` successfully until step 4.

Using `sudo dpkg-reconfigure i2p` worked. After that I tried using `sudoedit /var/lib/i2p/i2p-config/clients.config.d/00-net.i2p.router.web.RouterConsoleRunner-clients.config` but it dropped the message &quot;no such file or directory&quot;. I checked the directory `/var/lib/i2p/` with `ls -a`  and it is empty.

Could you please support me in this case? Maybe I missed something. Thank you.</description>
    <language>en</language>
    <lastBuildDate>Fri, 18 Nov 2022 16:36:29 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[eyedeekay]]></dc:creator>
        <description><![CDATA[
            <p>Yeah I can probably make that happen after the I2P release on the 22nd, maybe a little sooner.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/20</link>
        <pubDate>Fri, 18 Nov 2022 15:49:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-20</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Any chance you could send a pull request to anon-apps-config implementing the better config style please?</p>
<p>Main goals:</p>
<ul>
<li>As simple as possible for users in the end.</li>
<li>Use <code>.d</code> style config files whenever possible.</li>
<li>Avoid need to start I2P just to have it create a default config file and then we having to tell users they need to edit that file. In other words, instructions such as 1. start I2P, 2. edit that file… Not great. Best avoided.</li>
<li>Ideally all the user would have to do would be installing I2P and all the Whonix specific settings required are already preconfigured and nicely contained in the anon-apps-config package.</li>
</ul>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/19</link>
        <pubDate>Fri, 18 Nov 2022 13:17:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-19</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>A post was merged into an existing topic: <a href="http://forums.whonix.org/t/i2p-integration/4981/362">I2P Integration</a></p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/18</link>
        <pubDate>Fri, 11 Nov 2022 06:31:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-18</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[eyedeekay]]></dc:creator>
        <description><![CDATA[
            <p>Sorry it took me a little longer to get back to you. Had a developer leave the project, need to re-allocate some work and offboard him. So let’s see…</p>
<blockquote>
<p>It’s a drop-in folder where distribution maintainers (Whonix) and/or users can drop snippets…?</p>
</blockquote>
<p>Well yes, in that there are places it looks for default configuration files and if you have an existing configuration in that directory it won’t generally interfere with those settings. If we have to touch one of your settings when we configure your router, we also have to publish something about why, couple examples, we had to reach in and enable “Tunnel Testing” in an update to the Java I2P router a few releases ago in order to avoid a conflict with <code>i2pd</code> routers, and I had to change the update URL in the Easy-Install for Windows due to a conflict with de-coupled I2P routers(Easy-Install for Windows is a bundle). The point is, if you put a config file in the config directory, we don’t change the settings unless it’s really, really important.</p>
<blockquote>
<ol>
<li>Whonix should stop telling users to edit <code>/var/lib/i2p/i2p-config/clients.config.d/00- net.i2p.router.web.RouterConsoleRunner-clients.config</code> since there no need for it.</li>
<li>Whonix should stop shipping the config-package-dev <code>divert</code>ed file <a href="https://github.com/Whonix/anon-apps-config/blob/master/usr/share/i2p/router.config.anondist" rel="noopener nofollow ugc"><code>/usr/share/i2p/router.config</code></a> since there’s no need for that either.</li>
<li>Whonix should drop its config snippet(s) into the <code>/var/lib/i2p/i2p-config</code> folder? Any file name possible?</li>
</ol>
</blockquote>
<p>Yes to 2 and 3, if I understand correctly, <strong>but</strong></p>
<p>2. Possibly put <code>router.config.anondist</code> into <code>/var/lib/i2p/i2p-config/router.config</code> instead.</p>
<p>3. You can either use <code>/var/lib/i2p/i2p-config/i2ptunnel.config</code> and <code>/var/lib/i2p/i2p-config/clients.config</code> in which case the names matter, or you can use <code>/var/lib/i2p/i2p-config/i2ptunnel.config.d</code> and <code>/var/lib/i2p/i2p-config/clients.config.d</code> in which case the directory names matter but any filename is OK as long as it ends in <code>.config</code></p>
<p>3.a: If you use <code>/var/lib/i2p/i2p-config/i2ptunnel.config</code> and <code>/var/lib/i2p/i2p-config/clients.config</code> simply make your edits* to the default config files and place them in the <code>/var/lib/i2p/i2p-config</code> directory. They will be migrated on the first run to directory configs. Otherwise everything will function normally.</p>
<p>3.b: If you use <code>/var/lib/i2p/i2p-config/i2ptunnel.config.d/</code> and <code>/var/lib/i2p/i2p-config/clients.config.d/</code>, pre-populate it with all the config files you need, i.e. the migrated versions of the default clients tunnels. In these directories any file with a name ending in <code>.config</code> will be read for a configuration.</p>
<blockquote>
<p>Change from 127.0.0.1 to 127.0.0.2 .</p>
</blockquote>
<p>Those would occur in <code>clients.config</code> or the corresponding <code>clients.config.d</code> directory, and <code>i2ptunnel.config</code> or the corresponding <code>i2ptunnel.config.d</code> directory. Change any value which you want to be reachable on a different address <em>to</em> that different address.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/17</link>
        <pubDate>Mon, 07 Nov 2022 18:02:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-17</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Ok, maybe we’re getting somewhere! <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:"> Appreciate all your support!</p>
<aside class="quote no-group" data-username="eyedeekay" data-post="15" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/eyedeekay/40/1511_2.png" class="avatar"> eyedeekay:</div>
<blockquote>
<p>/var/lib/i2p/i2p-config</p>
</blockquote>
</aside>
<aside class="quote no-group" data-username="eyedeekay" data-post="15" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/eyedeekay/40/1511_2.png" class="avatar"> eyedeekay:</div>
<blockquote>
<p>So if you just drop all your custom I2P config files into <code>/var/lib/i2p/i2p-config</code> they won’t be migrated from the defaults in <code>/usr/share/i2p</code>, including <code>router.config</code>.</p>
</blockquote>
</aside>
<p>It’s a drop-in folder where distribution maintainers (Whonix) and/or users can drop snippets…?</p>
<p>In that case…</p>
<ol>
<li>Whonix should stop telling users to edit <code>/var/lib/i2p/i2p-config/clients.config.d/00-net.i2p.router.web.RouterConsoleRunner-clients.config</code> since there no need for it.</li>
<li>Whonix should stop shipping the config-package-dev <code>divert</code>ed file <a href="https://github.com/Whonix/anon-apps-config/blob/master/usr/share/i2p/router.config.anondist"><code>/usr/share/i2p/router.config</code></a> since there’s no need for that either.</li>
<li>Whonix should drop its config snippet(s) into the <code>/var/lib/i2p/i2p-config</code> folder? Any file name possible?</li>
</ol>
<p>Sounds like a plan?</p>
<p>Or would it be more appropriate for Whonix to use <code>/usr/share/i2p</code> folder to drop snippets?</p>
<p>What’s the config line that we need to add to accomplish</p>
<blockquote>
<p>Change from <code>127.0.0.1</code> to <code>127.0.0.2</code> .</p>
</blockquote>
<p>?</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/16</link>
        <pubDate>Thu, 03 Nov 2022 18:14:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-16</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[eyedeekay]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group">
<blockquote>
<p>Quite possibly because I2P only creates the config files when connectivity is available, which is even more weird. And connectivity is limited in Qubes Templates by Qubes design (at time of writing, only the package manager by default can use networking).</p>
</blockquote>
</aside>
<p>It’s not that weird if you consider that I2PSnark, Hidden Services Manager, and even the Router Console are actually separate applications, which will run only after I2P itself is successfully started. Starting them before I2CP is available would not make sense in the same way that allowing Tor Browser to fetch pages before a SOCKS proxy was available would not make sense. The result is that you start with what we call a “monolithic” config file where all the stuff is stored in one file, called <code>clients.config</code> and <code>i2ptunnel.config</code> respectively, which is immediately migrated to a directory config on most platforms. We did it this way because the monolithic config files are still used on places where the base config directory(<code>/usr/share/i2p</code>) and the working config directory(<code>/var/lib/i2p/i2p-config</code>) are the same which includes Android and Portable installations, so this way we still only need to maintain one config file.</p>
<p>However, if a directory config is already present, the migration will not occur. So if you just drop all your custom I2P config files into <code>/var/lib/i2p/i2p-config</code> they won’t be migrated from the defaults in <code>/usr/share/i2p</code>, including <code>router.config</code>. Everything you don’t include in that config(keys, etc) should be regenerated at runtime, and if it doesn’t file an issue and we’ll take care of it on our end.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/15</link>
        <pubDate>Thu, 03 Nov 2022 18:04:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-15</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>The Qubes particularities on how (non-)persistence is implemented meet I2P’s particularities on how config files are handled. In combination, these are creating a usability mess.</p>
<aside class="quote no-group" data-username="LasVegas" data-post="12" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>Is it effective to configure router.config in <code>/var/lib/i2p/i2p-config/router.config</code> instead of <code>/usr/share/i2p/router.config</code>?</p>
<p>What is the difference between router.config and router.config.anondist?</p>
</blockquote>
</aside>
<p>Ignore <code>.anondist</code>. This doesn’t need user documentation. Nothing special to know. No big deal.</p>
<p>Details:</p>
<pre><code>ls -la /var/lib/i2p/i2p-config/router.config*
</code></pre>
<p>related:<br>
<a href="https://www.kicksecure.com/wiki/Dev/About_Debian_Packaging#config-package-dev">Dev/About Debian Packaging - Kicksecure chapter config-package-dev in Kicksecure wiki</a></p>
<aside class="quote no-group" data-username="LasVegas" data-post="13" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>On a Whonix Template using the command <code>i2prouter start</code> creates the files on the Template but they are not available in the Template-based AppVM afterwards. I guess this has something to do with the Qubes standard persistence settings.</p>
</blockquote>
</aside>
<p>Normal Qubes persistence “issue” if you can call it an issue.</p>
<aside class="quote no-group" data-username="LasVegas" data-post="13" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>Is it a secure and reliable alternative to use <code>i2prouter start</code> in AppVM</p>
</blockquote>
</aside>
<p>I doubt that.</p>
<aside class="quote no-group" data-username="LasVegas" data-post="13" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>Note: <code>sudo dpkg-reconfigure i2p</code> creates configuration files in <code>/var/lib/i2p/</code> on AppVM only.</p>
</blockquote>
</aside>
<p>Quite possibly because I2P only creates the config files when connectivity is available, which is even more weird. And connectivity is limited in Qubes Templates by Qubes design (at time of writing, only the package manager by default can use networking).</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/14</link>
        <pubDate>Thu, 03 Nov 2022 12:24:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-14</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[LasVegas]]></dc:creator>
        <description><![CDATA[
            <p>There is a solution circulating, in which it is described that the service I2P should be started with <code>i2prouter start</code> to create the config files in <code>/home/user/.i2p/clients.config.d/00-net.i2p.router.web.RouterConsoleRunner-clients.config</code>.</p>
<p>On a Whonix Template using the command <code>i2prouter start</code> creates the files on the Template but they are not available in the Template-based AppVM afterwards. I guess this has something to do with the Qubes standard persistence settings.</p>
<p>Therefore on the Template-based AppVM you can run <code>i2prouter start</code> which creates configuration files <strong>persistent</strong> in<code>/home/user/.i2p/clients.config.d/00-net.i2p.router.web.RouterConsoleRunner-clients.config</code>. Note: <code>sudo dpkg-reconfigure i2p</code> creates configuration files in <code>/var/lib/i2p/</code> on AppVM only.</p>
<p>Conclusion:</p>
<ul>
<li>
<code>i2prouter start</code> creates configuration files in <code>/home/user/.i2p/</code> and works on Template and AppVM.</li>
<li>
<code>sudo systemctl start i2p</code> creates configuration files in <code>/var/lib/i2p/</code> but does not work on Whonix Template.</li>
<li>There is currently <strong>no way</strong> to get the configuration files created in a Whonix Template which are available on the accoding Template-based AppVM as <code>/home/user/</code> gets overwritten in AppVM.</li>
<li>Creating configuration files must be done in the Template-based AppVM by starting I2P: 1) With <code>i2prouter start</code> you get the configuration files persistent, with <code>sudo systemctl start i2p</code> you have to create and change configuration files on each restart of the AppVM.</li>
</ul>
<p>Is it a secure and reliable alternative to use <code>i2prouter start</code> in AppVM so that you don’t have to reconfigure the configuration files on each restart of the AppVM?</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/13</link>
        <pubDate>Thu, 03 Nov 2022 11:30:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-13</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[LasVegas]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="10" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Modifications to <code>/usr/share/i2p/router.config</code> will be lost after the next update of package anon-apps-config unfortunately. To solve this, upstream support for <code>/etc/i2p.d</code> is required.</p>
</blockquote>
</aside>
<p>Is it effective to configure router.config in <code>/var/lib/i2p/i2p-config/router.config</code> instead of <code>/usr/share/i2p/router.config</code>?</p>
<p>What is the difference between router.config and router.config.anondist?</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/12</link>
        <pubDate>Thu, 03 Nov 2022 11:15:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-12</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[eyedeekay]]></dc:creator>
        <description><![CDATA[
            <p>They ended up in <code>/var/lib/i2p/i2p-config/i2ptunnel.config.d</code> and <code>/var/lib/i2p/i2p-config/clients.config.d</code>. You can create the <code>clients.config.d</code> files and <code>i2ptunnel.config.d</code> files in advance but IIRC you’ll need to create one for each app you intend to run on your node because the defaults will not be “migrated” from the initial, monolithic config. So you will need to create a config file for every app. The reason it appears that I2P needs connectivity to create these config files is because this migration happens when the apps are started which only happens after the API’s become available which only happens after we connect successfully. It doesn’t intrinsically need to be that way.</p>
<p>There isn’t an equivalent with <code>router.config</code>, but dropping a <code>router.config</code> file in <code>/var/lib/i2p/i2p-config/router.config</code> should change the values your router uses when you set it up.</p>
<p><s>I’ll get back to you on how to move this all into a directory in <code>/etc/</code> instead of <code>/var/lib/</code> as soon as I look it up.</s> <code>/var/lib/i2p/</code> is the <code>i2psvc</code> user’s home directory and moving it would require changing that directory and changing the AppArmor profile to match. This is all handled by <code>debian.preinst</code>, <code>debian.postinst</code> files in the <code>debian</code> directory. <code>wrapper.config</code> is the only one that goes into <code>/etc/i2p</code>. <strong>But(And I haven’t tried this yet)</strong> what you may be able to do is possibly create a directory called <code>/etc/i2p/i2p-dir</code> for instance which is owned by the <code>i2psvc</code> user and in <code>/etc/i2p/wrapper.config</code> add the line <code>wrapper.java.additional.3=-Di2p.dir.config=/etc/i2p/i2p-dir</code>. That would cause it to use <code>/etc/i2p/i2p-dir</code> as the working directory instead and therefore the config files would be placed in <code>/etc/i2p/i2p-dir/clients.config.d</code> <code>/etc/i2p/i2p-dir/i2ptunnel.config.d/</code> instead. Doesn’t address the AppArmor thing though.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/11</link>
        <pubDate>Wed, 02 Nov 2022 23:41:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-11</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="LasVegas" data-post="9" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>The current state is that when you run <code>dpkg-reconfigure i2p</code> in the Whonix Template (whonix-ws-16-clone-1), it does <strong>not</strong> create the configuration files under <code>/var/lib/i2p/</code>.</p>
</blockquote>
</aside>
<p>That might be because I2P is unable to connect so it doesn’t create that config folder.</p>
<p>I2P seems weird in that way anyhow. That it needs connectivity to create that config file. And also the config file location is weird.</p>
<p>Could step “Change I2Pconsole interface local IP change.”</p>
<blockquote>
<p>Open file /var/lib/i2p/i2p-config/clients.config.d/00-net.i2p.router.web.RouterConsoleRunner-clients.config in an editor with root rights.</p>
</blockquote>
<blockquote>
<p>Change from <code>127.0.0.1</code> to <code>127.0.0.2</code>.</p>
</blockquote>
<p>be done in some other file in /etc instead or the config file be created without need to start I2P? <a class="mention" href="http://forums.whonix.org/u/eyedeekay">@eyedeekay</a></p>
<aside class="quote no-group" data-username="LasVegas" data-post="9" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>Step 1 in the wiki (Securely Download of the Key): Why should should someone securely download the key to the Whonix-Workstation as mentioned in step 1 of the wiki instead of downloading it to Whonix Template only?</p>
</blockquote>
</aside>
<p>It doesn’t say that.</p>
<ul>
<li>
<blockquote>
<p><strong>If</strong> you are using Whonix-Workstation ™ (<code>anon-whonix</code>), run.</p>
</blockquote>
</li>
<li>
<blockquote>
<p><strong>If</strong> you are using a Qubes Template (<code>whonix-ws-16</code> ), run.</p>
</blockquote>
</li>
</ul>
<p>gpg key download in Qubes templates is an issue unspecific to Whonix.</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Unspecific">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Unspecific" target="_blank" rel="noopener" title="07:49PM - 25 July 2022">Whonix – 25 Jul 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:250/500;"><img src="https://www.whonix.org/w/images/7/74/Booster132.png" class="thumbnail" width="250" height="500"></div>

<h3><a href="https://www.whonix.org/wiki/Unspecific" target="_blank" rel="noopener">Information Booster might be Available!</a></h3>

  <p>Utilizing other resources to help solve questions/issues unspecific to Whonix ™.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>See this lengthy discussion on that topic in the Qubes forums:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://forum.qubes-os.org/t/curl-proxy-wget-proxy-scripts-in-templates-so-users-can-add-gpg-distro-keys-linked-to-added-external-repositories/10935">
  <header class="source">
      <img src="https://forum.qubes-os.org/uploads/db3820/optimized/2X/5/55de5eaf64516902429c411f66491cc9db06c464_2_32x32.png" class="site-icon" width="32" height="32">

      <a href="https://forum.qubes-os.org/t/curl-proxy-wget-proxy-scripts-in-templates-so-users-can-add-gpg-distro-keys-linked-to-added-external-repositories/10935" target="_blank" rel="noopener" title="03:41PM - 19 April 2022">Qubes OS Forum – 19 Apr 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:472/471;"><img src="https://forum.qubes-os.org/uploads/db3820/original/1X/10549f9dff8a289d117f083e9f5155231c452db2.png" class="thumbnail" width="472" height="471"></div>

<h3><a href="https://forum.qubes-os.org/t/curl-proxy-wget-proxy-scripts-in-templates-so-users-can-add-gpg-distro-keys-linked-to-added-external-repositories/10935" target="_blank" rel="noopener">Curl-proxy / wget-proxy scripts in Templates so users can add GPG distro keys...</a></h3>

  <p>Updates Edit: Extended PoC of this idea is here. This is the blocking version (where non-networked TemplateVM will not translate curl/wget to curl-proxy/wget-proxy in the wrapper scripts.  Edit2: PoC code download here  Edit3: A non-blocking example...</p>

  <p>
    <span class="label1">Reading time: 67 mins 🕑</span>
      <span class="label2">Likes: 80 ❤</span>
  </p>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="LasVegas" data-post="9" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>Using I2P-modified TB to access clearnet: Should we avoid this due to security considerations and why?</p>
</blockquote>
</aside>
<p>The web fingerprint is modified. Therefore best to use</p>
<ul>
<li>multiple Whonix-Workstation (better), or</li>
<li>multiple Tor Browser</li>
</ul>
<p>(All documented in the wiki.)</p>
<aside class="quote no-group" data-username="LasVegas" data-post="9" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>Regarding step 7</p>
</blockquote>
</aside>
<p>These numbers might frequently change unfortunately as this documentation is keep getting updated.</p>
<aside class="quote no-group" data-username="LasVegas" data-post="9" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>Do we have to configure router.config.anondist in <code>/usr/share/i2p/</code> or <code>/var/lib/i2p/i2p-config/</code> to be effective?</p>
</blockquote>
</aside>
<p>Another issue.<br>
I2P doesn’t seem to support <code>/etc/i2p.d</code> and/or <code>/usr/local/etc/i2p.d</code>. Not sure there is now.</p>
<aside class="quote" data-post="297" data-topic="4981">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/eyedeekay/40/1511_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/i2p-integration/4981/297">I2P Integration</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/development/8"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of components looking for maintainer)">Development</span></a>
  </div>
  <blockquote>
    <a class="mention" href="http://forums.whonix.org/u/tnt_bom_bom">@TNT_BOM_BOM</a>  <a class="mention" href="http://forums.whonix.org/u/goldstein-otg">@goldstein-otg</a> I don’t know if anyone has brought <a href="https://github.com/knaccc/i2p-zero" rel="nofollow noopener">i2p-zero</a> to your attention yet, but it might be a way to rely on a simplified java-i2p router without a web interface. Also in the next few months java-i2p should be getting an /etc/i2p.d/-like(Name not settled AFAIK) folder for configuration.
  </blockquote>
</aside>

<p>Any update on <code>/etc/i2p.d</code>? <a class="mention" href="http://forums.whonix.org/u/eyedeekay">@eyedeekay</a></p>
<p>Modifications to <code>/usr/share/i2p/router.config</code> will be lost after the next update of package anon-apps-config unfortunately. To solve this, upstream support for <code>/etc/i2p.d</code> is required.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/10</link>
        <pubDate>Wed, 02 Nov 2022 19:34:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-10</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[LasVegas]]></dc:creator>
        <description><![CDATA[
            <p>The current state is that when you run <code>dpkg-reconfigure i2p</code> in the Whonix Template (whonix-ws-16-clone-1), it does <strong>not</strong> create the configuration files under <code>/var/lib/i2p/</code>.</p>
<p>I don’t currently see a suitable way to do this,. The instructions in the wiki do <strong>not</strong> work after step 3.</p>
<p>Current alternative according to <code>https://forums.whonix.org/t/i2p-integration/4981/355</code> is after doing steps 1-3 in the Whonix Template (whonix-ws-16-clone-1):</p>
<ol>
<li>Shutdown Whonix Template (whonix-ws-16-clone-1)</li>
<li>Start Whonix-Workstation AppVM (anon-whonix-I2P) based on Whonix Template (whonix-ws-16-clone-1)<br>
<strong>Following steps have to be done on every restart of the AppVM due to non-persistance.</strong>
</li>
<li>Run <code>dpkg-reconfigure i2p</code> which also start i2p and creates configuration files in <code>/var/lib/i2p/</code>
</li>
<li>Stop <code>I2P service with sudo systemctl stop i2p</code>
</li>
<li>Use <code>sudoedit /var/lib/i2p/i2p-config/clients.config.d/00-net.i2p.router.web.RouterConsoleRunner-clients.config</code> and change <code>127.0.01</code> to <code>127.0.0.2</code>.</li>
<li>Start I2P service with <code>sudo systemctl start i2p</code>
</li>
<li>Optional: Adjust I2P Router configuration</li>
</ol>
<p><strong>The following step only needs to performed once and after TB updates.</strong></p>
<ol start="8">
<li>Configure TB for usage with I2P</li>
</ol>
<p>TB can be used to access I2P pages. TB can not be used to access onion addreses (Outproxy not found). TB can be used to access clearnet.</p>
<p><strong>Questions</strong></p>
<p>Step 1 in the wiki (Securely Download of the Key): Why should should someone securely download the key to the Whonix-Workstation as mentioned in step 1 of the wiki instead of downloading it to Whonix Template only? Or is this necessary for every case?</p>
<p>Using I2P-modified TB to access clearnet: Should we avoid this due to security considerations and why?</p>
<p>Regarding step 7: Do we have to configure router.config.anondist in <code>/usr/share/i2p/</code> or <code>/var/lib/i2p/i2p-config/</code> to be effective?</p>
<p>Any other things to consider with this setup in terms of security or anonymity?</p>
<p>Are there any solution to be able to setup I2P service and configuration files in Whonix Template (whonix-ws-16-clone-1)?</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/9</link>
        <pubDate>Wed, 02 Nov 2022 10:05:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-9</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[TNT_BOM_BOM]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="LasVegas" data-post="1" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>Could you please support me in this case? Maybe I missed something. Thank you.</p>
</blockquote>
</aside>
<p>Fixed, check the wiki after few hours once get updated.</p>
<aside class="quote no-group" data-username="LasVegas" data-post="5" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>I will keep starting I2P with <code>i2prouter start</code> on App VM manually.</p>
</blockquote>
</aside>
<p>Thats bad way to start I2P because it wont load apparmor I2P profile for it, thats why its not mentioned in the wiki.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/8</link>
        <pubDate>Tue, 01 Nov 2022 07:34:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-8</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="LasVegas" data-post="5" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>I get two popups with “Do not run Tor Browser in Template” then.</p>
</blockquote>
</aside>
<p>Do not run Tor Browser in Template popup is correct. See also:</p>
<p><a href="https://www.whonix.org/wiki/Tor_Browser#In_Qubes-Whonix_.E2.84.A2">Tor Browser Essentials chapter In Qubes-Whonix in Whonix wiki</a></p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/7</link>
        <pubDate>Mon, 31 Oct 2022 23:09:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-7</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[LasVegas]]></dc:creator>
        <description><![CDATA[
            <p>I found that the config files were created in the Qubes App VM instead of the template. I guess the steps in the instruction under Usage (<code>https://www.whonix.org/wiki/I2P#Usage</code>) have to be performed on App VMs instead of the Template. Maybe the instruction needs to be updated then if I am right.</p>
<p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> Could you please confirm?</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/6</link>
        <pubDate>Mon, 31 Oct 2022 21:24:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-6</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[LasVegas]]></dc:creator>
        <description><![CDATA[
            <p>Thanks. My workaround will be to start I2P with <code>i2prouter start</code>. I get two popups with “Do not run Tor Browser in Template” then. Should I anyhow consider these in a specific way? Can not explain why they come up.</p>
<p>I will change the 127.0.0.1 to 127.0.02 according to <code>https://www.whonix.org/wiki/I2P#I2P_client_inside_Whonix-Workstation</code> in this file: <code>/home/user/.i2p/clients.config.d/00-net.i2p.router.web.RouterConsoleRunner-clients.config</code></p>
<p>I will keep starting I2P with <code>i2prouter start</code> on App VM manually.</p>
<p>Any comments on this workaround?</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/5</link>
        <pubDate>Mon, 31 Oct 2022 20:58:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-5</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[eyedeekay]]></dc:creator>
        <description><![CDATA[
            <p>Not sure. We may have possible issues with Kicksecure or immutable state at the moment, but I’m not prepared to debug them yet. I should be able to make more time for that next week.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/4</link>
        <pubDate>Mon, 31 Oct 2022 20:27:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-4</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[LasVegas]]></dc:creator>
        <description><![CDATA[
            <p>Restarting the system after configuring I2P for automatic boot with <code>dpkg-reconfigure i2p</code> didn’t create the directory.</p>
<p>Listing of services with <code>systemctl list-units --type=service --state=running</code> does not show I2P.</p>
<p>Tried <code>sudo service i2p start</code> and <code>sudo systemctl start i2p</code>. No errors but service does still not show up with <code>systemctl list-units --type=service --state=running</code>. Directory <code>/var/lib/i2p/</code> is still empty.</p>
<p>Tried <code>i2prouter start</code> but this created the configuration files on the home directory which is not desired. I restarted the setup procedure on a new Qubes whonix-ws-16 Template after that. So still no solution. What is the mistake here?</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/3</link>
        <pubDate>Mon, 31 Oct 2022 18:51:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-3</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[eyedeekay]]></dc:creator>
        <description><![CDATA[
            <p><code>/var/lib/i2p/i2p-config/clients.config.d/00-net.i2p.router.web.RouterConsoleRunner-clients.config</code> is created by “migrating” the base config to a directory config on the first run, because there are some platforms(Android, Windows with “old” portables) where we use un-migrated, single-file configs. So that directory might not exist if you haven’t run I2P at least once.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/2</link>
        <pubDate>Mon, 31 Oct 2022 18:17:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-2</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[LasVegas]]></dc:creator>
        <description><![CDATA[
            <p>Hello,</p>
<p>I followed the instructions: on the wiki <code>https://www.whonix.org/wiki/I2P#I2P_client_inside_Whonix-Workstation</code> successfully until step 4.</p>
<p>Using <code>sudo dpkg-reconfigure i2p</code> worked. After that I tried using <code>sudoedit /var/lib/i2p/i2p-config/clients.config.d/00-net.i2p.router.web.RouterConsoleRunner-clients.config</code> but it dropped the message “no such file or directory”. I checked the directory <code>/var/lib/i2p/</code> with <code>ls -a</code>  and it is empty.</p>
<p>Could you please support me in this case? Maybe I missed something. Thank you.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/1</link>
        <pubDate>Mon, 31 Oct 2022 11:28:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-1</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
  </channel>
</rss>
