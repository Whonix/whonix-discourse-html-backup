<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>I2P client inside Whonix-Workstation Issues</title>
    <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890</link>
    <description>Hello,

I followed the instructions: on the wiki `https://www.whonix.org/wiki/I2P#I2P_client_inside_Whonix-Workstation` successfully until step 4.

Using `sudo dpkg-reconfigure i2p` worked. After that I tried using `sudoedit /var/lib/i2p/i2p-config/clients.config.d/00-net.i2p.router.web.RouterConsoleRunner-clients.config` but it dropped the message &quot;no such file or directory&quot;. I checked the directory `/var/lib/i2p/` with `ls -a`  and it is empty.

Could you please support me in this case? Maybe I missed something. Thank you.</description>
    <language>en</language>
    <lastBuildDate>Thu, 01 Dec 2022 17:20:57 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[eyedeekay]]></dc:creator>
        <description><![CDATA[
            <p>Hopefully these 2 address your concerns:</p>
<ul>
<li><a href="https://github.com/Whonix/anon-apps-config/pull/10" class="inline-onebox" rel="noopener nofollow ugc">PR 1/2: add a hosts.txt file by eyedeekay · Pull Request #10 · Whonix/anon-apps-config · GitHub</a></li>
<li><a href="https://github.com/Whonix/anon-apps-config/pull/11" class="inline-onebox" rel="noopener nofollow ugc">PR 2/2 create minified version of eepsite docroot by eyedeekay · Pull Request #11 · Whonix/anon-apps-config · GitHub</a></li>
</ul>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/34">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/34</link>
        <pubDate>Thu, 01 Dec 2022 17:20:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-34</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[eyedeekay]]></dc:creator>
        <description><![CDATA[
            <p>Sure absolutely, I’ll make a revised one this evening and rip out the eepsite docroot. Splitting the difference would be to not include anything in the actual docroot(HTML, PNG, CSS) directory and pare it down to just the XML files where the jetty config happenss. Would that be acceptable? It would be more like 7 files instead of 74.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/33">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/33</link>
        <pubDate>Thu, 01 Dec 2022 16:57:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-33</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Thank you for your efforts! However, I am afraid, 74 files, ~ 5000 lines of code, seems far too much. I cannot review that.</p>
<p>Not convinced that it is really, really required to add a lot of html files, png image files, etc. Seems like excessive code duplication. That content if needed should be built into I2P and not duplicated in anon-apps-config which is supposed to only hold minimal, ideally plaintext only config snippets for Whonix compatibility and anonymity improvements.</p>
<p>Also for example <code>/var/lib/i2p/i2p-config/eepsite/etc/realm.properties</code> seems to include passwords.</p>
<p>Could you please minimize, send a new, separate pull request? (I don’t want to add this to the git history.)</p>
<p>Or should I just hand pick the hosts.txt?</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/32">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/32</link>
        <pubDate>Thu, 01 Dec 2022 16:43:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-32</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group">
<blockquote>
<p><a href="https://github.com/Whonix/anon-apps-config/pull/9" class="inline-onebox">Config Directory Completeness by eyedeekay · Pull Request #9 · Whonix/anon-apps-config · GitHub</a></p>
</blockquote>
</aside>
<p>Quote <a class="mention" href="http://forums.whonix.org/u/eyedeekay">@eyedeekay</a></p>
<blockquote>
<p>It seems that if the config directory already exists, the the default files associated with the usable, “I2P distribution” aren’t copied over to the directory if they are missing. This includes 2 important sets of config files which weren’t covered in the previous PR. These are the <code>hosts.txt</code> file and the “eepSite docroot.” The <code>hosts.txt</code> file contains the default map of human-readable keys to cryptographic identifier values which comes with I2P and which forms the most basic part of it’s naming service. This is a single file. The “eepSite docroot” contains the example hidden HTTP service which end-users may enable to host a static site as an I2P client application. This is 73 files, including 7 XML files for configuring jetty with non-leaking defaults, 21 translated HTML files containing identical text, 21 flags in <code>.png</code> format, 18 various other <code>.png</code> files 3 <code>.css</code> files, 1 HTML template, a <code>robots.txt</code> and 1 <code>.ico</code> file. It is quite a lot, but it is simply the stable default configuration for the recommended webserver.</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/31">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/31</link>
        <pubDate>Thu, 01 Dec 2022 16:31:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-31</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubpullrequest" data-onebox-src="https://github.com/Whonix/anon-apps-config/pull/9">
  <header class="source">

      <a href="https://github.com/Whonix/anon-apps-config/pull/9" target="_blank" rel="noopener">github.com/Whonix/anon-apps-config</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/anon-apps-config/pull/9" target="_blank" rel="noopener">Config Directory Completeness</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>eyedeekay:hosts-txt-fix</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-12-01" data-time="02:55:45" data-timezone="UTC">02:55AM - 01 Dec 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/eyedeekay" target="_blank" rel="noopener">
          <img alt="eyedeekay" src="https://avatars.githubusercontent.com/u/8733713?v=4" class="onebox-avatar-inline" width="20" height="20">
          eyedeekay
        </a>
      </div>

      <div class="lines" title="4 commits changed 74 files with 5639 additions and 0 deletions">
        <a href="https://github.com/Whonix/anon-apps-config/pull/9/files" target="_blank" rel="noopener">
          <span class="added">+5639</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">It seems that if the config directory already exists, the the default files asso<span class="show-more-container"><a href="https://github.com/Whonix/anon-apps-config/pull/9" target="_blank" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">ciated with the usable, "I2P distribution" aren't copied over to the directory if they are missing. This includes 2 important sets of config files which weren't covered in the previous PR. These are the `hosts.txt` file and the "eepSite docroot." The `hosts.txt` file contains the default map of human-readable keys to cryptographic identifier values which comes with I2P and which forms the most basic part of it's naming service. This is a single file. The "eepSite docroot" contains the example hidden HTTP service which end-users may enable to host a static site as an I2P client application. This is 73 files, including 7 XML files for configuring jetty with non-leaking defaults, 21 translated HTML files containing identical text, 21 flags in `.png` format, 18 various other `.png` files 3 `.css` files, 1 HTML template, a `robots.txt` and 1 `.ico` file. It is quite a lot, but it is simply the stable default configuration for the recommended webserver.</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/30">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/30</link>
        <pubDate>Thu, 01 Dec 2022 16:29:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-30</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[eyedeekay]]></dc:creator>
        <description><![CDATA[
            <p>Sent last night, also it has the eepsite docroot included which will allow users to enable the default webserver without building their site.</p>
<blockquote>
<p>However, maybe a more complex solution for later… Why I2P can usually bootstrap that by itself but now with the config changes it fails to do that? Hardcoding the address book is non-ideal since this seems a feature degradation versus I2P outside of Whonix. Another thing which needs to be maintained. Would it be possible for I2P inside Whonix to use the same address book bootstrap mechanism that I2P is using outside of Whonix?</p>
</blockquote>
<p>It’s because it sees the existing config and doesn’t want to change it since if it sees an existing config, the assumption is that the options it has are the options that the user wants. However, this probably applies less to the <code>hosts.txt</code> file than it does to i2ptunnel, for instance. <code>hosts.txt</code> is normally the static and unchanging “bootstrap” hosts file just for project sites(and people who applied to be included because they provide something fundamental like optional petname subscriptions), it needs to get copied once and from there, jump services and subscription services like <code>stats.i2p</code> and <code>notbob.i2p</code> take over the addition of new hosts. New hosts post-install go into the “BlockFileNamingDatabase” which manages user-added and subscription-added hostnames. So the long and short of it is that once you have the initial <code>hosts.txt</code> you should be able to add and remove petnames normally. So an old <code>hosts.txt</code> file isn’t too serious of an issue as long as you’ve got a one from the past few years since LS2(because all the keys changed with LS2). Also we only change it like, once a year, so I can just keep making PR’s when we add new hosts.</p>
<p>BUT, I guess there is a better way… to get a flow improvement for Whonix, I think what needs to happen is that when the I2P router checks if it needs to copy a base config to a working config, and if the <code>hosts.txt</code> file is not present, copy it to the working directory. That’ll be at least a 2.1.0 goal but there’s very little to stop me from making it work that way. This could theoretically be applied to the eepSite docroot as well.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/29">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/29</link>
        <pubDate>Thu, 01 Dec 2022 15:57:21 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-29</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Updated ip2-config file names to use underscores instead of white spaces.</p>
<aside class="quote no-group" data-username="eyedeekay" data-post="27" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/eyedeekay/40/1511_2.png" class="avatar"> eyedeekay:</div>
<blockquote>
<p>It will, usually in somewhere between 90 seconds and 10 minutes, but depending on what Whonix does with the <code>/var/lib/i2p/i2p-config/netDb</code> directory at runtime, it may periodically <em>re-appear</em> in cases where the state of that directory is reset or it is otherwise emptied.</p>
</blockquote>
</aside>
<ul>
<li>Non-Qubes-Whonix: No issue.</li>
<li>Qubes-Whonix: Folder <code>/var/lib/i2p/i2p-config/netDb</code> could be added to <a href="https://www.qubes-os.org/doc/bind-dirs/" class="inline-onebox">How to make any file persistent (bind-dirs) | Qubes OS</a>.</li>
</ul>
<aside class="quote no-group" data-username="eyedeekay" data-post="27" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/eyedeekay/40/1511_2.png" class="avatar"> eyedeekay:</div>
<blockquote>
<p>OK this means I need to make another PR, one which contains a <code>hosts.txt</code> file in the <code>/var/lib/i2p/i2p-config</code> directory with a list of default hosts.</p>
</blockquote>
</aside>
<p>Looking forward to. That’s a good solution to quickly get to a working state.</p>
<p>However, maybe a more complex solution for later… Why I2P can usually bootstrap that by itself but now with the config changes it fails to do that? Hardcoding the address book is non-ideal since this seems a feature degradation versus I2P outside of Whonix. Another thing which needs to be maintained. Would it be possible for I2P inside Whonix to use the same address book bootstrap mechanism that I2P is using outside of Whonix?</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/28">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/28</link>
        <pubDate>Thu, 01 Dec 2022 14:54:21 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-28</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[eyedeekay]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>Is this intended? No underscored or minus symbols?</p>
</blockquote>
<p>I actually simply created a an <code>i2ptunnel.config</code> and a <code>clients.config</code> file with the required changes, forced a migration to a directory configuration, then used the migrated files as a result. Inserting an alternate character, <code>_</code> or <code>-</code> for instance, won’t cause any problems.</p>
<blockquote>
<p>Attempting to visit <code>http://i2pforum.i2p/</code> I’ve got an error <code>Website Not Found in Addressbook</code>. The same goes for all other i2p domains such as zzz.i2p or stats.i2p.</p>
</blockquote>
<p>OK this means I need to make another PR, one which contains a <code>hosts.txt</code> file in the <code>/var/lib/i2p/i2p-config</code> directory with a list of default hosts. Normally there are only 61 or so default hosts in this file, the essentials like our project site and our gitlab. Looks like since I did not include this file you are limited to only using <code>.b32.i2p</code> addresses instead. I’ll make another PR tonight to fix it.</p>
<blockquote>
<p>Welcome to I2P! Please have patience as I2P boots up and finds peers.</p>
</blockquote>
<p>It will, usually in somewhere between 90 seconds and 10 minutes, but depending on what Whonix does with the <code>/var/lib/i2p/i2p-config/netDb</code> directory at runtime, it may periodically <em>re-appear</em> in cases where the state of that directory is reset or it is otherwise emptied.</p>
<p>That actually reminds me of another interesting point, though, to avoid the reseed process entirely, it’s possible to include a <code>netDb</code> directory in the config directory itself. The router will scan the <code>netDb</code> directory and attempt a to connect to those peers before attempting a reseed. This might result in the “Welcome” message going away faster.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/27">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/27</link>
        <pubDate>Wed, 30 Nov 2022 20:58:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-27</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[eyedeekay]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>I hope anon-apps-config wouldn’t have to create user <code>i2psvc</code>? That would be a bit much. Would be nice if the <code>i2p</code> package could take care of user creation, folder permissions.</p>
</blockquote>
<p>Let me get back to you on that, it’s probably a small change to create the config directory at package install time I just want to check with zzz who updates our .deb packages/apt repository that it won’t break some part of his process. I doubt it will be a problem but I want to make sure.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/26">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/26</link>
        <pubDate>Wed, 30 Nov 2022 20:47:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-26</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Permissions in folder <code>/var/lib/i2p/i2p-config/i2ptunnel.config.d</code> seem perfect. Owned by user/group <code>i2psvc</code>. So no issue here.</p>
<p>However, some file names contain spaces such as for example:</p>
<pre><code>/var/lib/i2p/i2p-config/i2ptunnel.config.d/00-I2P HTTP Proxy-i2ptunnel.config
</code></pre>
<p>Is this intended? No underscored or minus symbols?</p>
<p>The config changes are available inside the VM:</p>
<pre><code>sudo grep -r --color 127.0.0.2 /var/lib/i2p/i2p-config
</code></pre>
<blockquote>
<p>/var/lib/i2p/i2p-config/i2ptunnel.config.d/05-I2P HTTPS Proxy-i2ptunnel.config:i2cpHost=127.0.0.2<br>
/var/lib/i2p/i2p-config/i2ptunnel.config.d/05-I2P HTTPS Proxy-i2ptunnel.config:interface=127.0.0.2<br>
/var/lib/i2p/i2p-config/i2ptunnel.config.d/06-gitssh.idk.i2p-i2ptunnel.config:interface=127.0.0.2<br>
/var/lib/i2p/i2p-config/i2ptunnel.config.d/04-smtp.postman.i2p-i2ptunnel.config:i2cpHost=127.0.0.2<br>
/var/lib/i2p/i2p-config/i2ptunnel.config.d/04-smtp.postman.i2p-i2ptunnel.config:interface=127.0.0.2<br>
/var/lib/i2p/i2p-config/i2ptunnel.config.d/01-Irc2P-i2ptunnel.config:i2cpHost=127.0.0.2<br>
/var/lib/i2p/i2p-config/i2ptunnel.config.d/01-Irc2P-i2ptunnel.config:interface=127.0.0.2<br>
/var/lib/i2p/i2p-config/i2ptunnel.config.d/03-I2P webserver-i2ptunnel.config:i2cpHost=127.0.0.2<br>
/var/lib/i2p/i2p-config/i2ptunnel.config.d/03-I2P webserver-i2ptunnel.config:targetHost=127.0.0.2<br>
/var/lib/i2p/i2p-config/i2ptunnel.config.d/00-I2P HTTP Proxy-i2ptunnel.config:i2cpHost=127.0.0.2<br>
/var/lib/i2p/i2p-config/i2ptunnel.config.d/00-I2P HTTP Proxy-i2ptunnel.config:interface=127.0.0.2<br>
/var/lib/i2p/i2p-config/i2ptunnel.config.d/02-pop3.postman.i2p-i2ptunnel.config:i2cpHost=127.0.0.2<br>
/var/lib/i2p/i2p-config/i2ptunnel.config.d/02-pop3.postman.i2p-i2ptunnel.config:interface=127.0.0.2<br>
/var/lib/i2p/i2p-config/clients.config.d/04-net.i2p.apps.systray.UrlLauncher-clients.config:clientApp.0.args=http://127.0.0.2:7657/<br>
/var/lib/i2p/i2p-config/clients.config.d/01-net.i2p.sam.SAMBridge-clients.config:clientApp.0.args=sam.keys 127.0.0.2 7656 i2cp.tcp.host=127.0.0.2 i2cp.tcp.port=7654<br>
/var/lib/i2p/i2p-config/clients.config.d/00-net.i2p.router.web.RouterConsoleRunner-clients.config:clientApp.0.args=7657 ::1,127.0.0.2 ./webapps/</p>
</blockquote>
<p>I’ve also updated <a href="https://www.whonix.org/wiki/I2P" class="inline-onebox">Invisible Internet Project (I2P)</a> to remove the complicated steps which should be no longer required.</p>
<p>A change was needed from, old:</p>
<blockquote>
<p><strong>D.</strong> <code>network.proxy.http</code> → set to <code>127.0.0.1</code></p>
</blockquote>
<p>to, new:</p>
<blockquote>
<p><strong>D.</strong> <code>network.proxy.http</code> → set to <code>127.0.0.2</code></p>
</blockquote>
<p>Then I could reach <code>http://127.0.0.2:7657</code> in Tor Browser.</p>
<p>Attempting to visit <code>http://i2pforum.i2p/</code> I’ve got an error <code>Website Not Found in Addressbook</code>. The same goes for all other i2p domains such as zzz.i2p or stats.i2p.</p>
<p>Maybe I need to wait longer, maybe something broken, I don’t know.</p>
<blockquote>
<p>Welcome to I2P! Please have patience as I2P boots up and finds peers.</p>
</blockquote>
<p>Dunno if that message would disappear after a while. Connections were established but address book still empty.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/25">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/25</link>
        <pubDate>Wed, 30 Nov 2022 20:31:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-25</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>This is now available in the testers repository.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/24">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/24</link>
        <pubDate>Wed, 30 Nov 2022 20:00:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-24</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubblob" data-onebox-src="https://github.com/Whonix/anon-apps-config/blob/master/usr/lib/tmpfiles.d/anon-apps-config.conf">
  <header class="source">

      <a href="https://github.com/Whonix/anon-apps-config/blob/master/usr/lib/tmpfiles.d/anon-apps-config.conf" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/anon-apps-config/blob/master/usr/lib/tmpfiles.d/anon-apps-config.conf" target="_blank" rel="noopener">Whonix/anon-apps-config/blob/master/usr/lib/tmpfiles.d/anon-apps-config.conf</a></h4>


      <pre><code class="lang-conf">## Copyright (C) 2022 - 2022 ENCRYPTED SUPPORT LP &lt;adrelanos@whonix.org&gt;
## See the file COPYING for copying conditions.

d /var/lib/i2p/i2p-config 0755 i2psvc i2psvc
</code></pre>




  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>That didn’t work great either:</p>
<blockquote>
<p>anon-apps-config.conf:4: Failed to resolve user ‘i2psvc’: No such process</p>
</blockquote>
<p>Will disable for now.</p>
<p>I hope anon-apps-config wouldn’t have to create user <code>i2psvc</code>? That would be a bit much. Would be nice if the <code>i2p</code> package could take care of user creation, folder permissions. What do you think? <a class="mention" href="http://forums.whonix.org/u/eyedeekay">@eyedeekay</a></p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/23</link>
        <pubDate>Wed, 30 Nov 2022 19:47:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-23</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Merged. Thank you!</p>
<p>Added a few commits on top.</p>
<p>This is making a bit of trouble:</p>
<pre><code class="lang-auto">## Fix permissions on the I2P configuration directory.

chown -R i2psvc:i2psvc /var/lib/i2p/i2p-config/
</code></pre>
<ul>
<li>(Would fail if folder does not exist (but I tried to avoid that by just using <code>mkdir --parents</code>) but then…)</li>
<li>Would fail if user and/or group <code>i2psvc</code> does not exist.</li>
<li>And lintian complains.</li>
</ul>
<pre><code class="lang-auto">################################################################################
W: anon-apps-config: recursive-privilege-change postinst:56
N:
W: recursive-privilege-change
N:
N:   The named maintainer script appears to call chmod or chown with a
N:   --recursive/-R argument, or it uses find(1) with similar intent.
N:   
N:   All such uses are vulnerable to hardlink attacks on mainline (i.e.
N:   non-Debian) kernels that do not set fs.protected_hardlinks=1.
N:   
N:   The security risk arises when when a non-privileged user set links to
N:   files they do not own, such as such as /etc/shadow or files in
N:   /var/lib/dpkg/. A superuser's recursive call to chown or chmod on
N:   behalf of a role user account would then modify the non-owned files in
N:   ways that allow the non-privileged user to manipulate them later.
N:   
N:   There are several ways to mitigate the issue in maintainer scripts:
N:   
N:    - For a static role user, please call chown at build time
N:      and not during the installation.
N:    - If that is too complicated, use runuser(1) in the
N:      relevant build parts to create files with correct ownership.
N:    - Given a static list of files to change, use non-recursive calls
N:      for each file. (Please do not generate the list with find.)
N:   
N:   Refer to Bug#895597, Bug#889060, Bug#889488, and the runuser(1) manual
N:   page for details.
N:   
N:   Severity: warning
N:   
N:   Check: scripts
N:   
N:   Renamed from:
N:   maintainer-script-should-not-use-recursive-chown-or-chmod
N:
################################################################################
</code></pre>
<p>Hence asking is <code>chown -R i2psvc:i2psvc /var/lib/i2p/i2p-config/</code> very important or will the <code>i2p</code> package later take care of setting proper permissions? That would be much better.</p>
<p>Meanwhile therefore I ported that part to systemd tmpfiles.d.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/22</link>
        <pubDate>Wed, 30 Nov 2022 19:27:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-22</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Yay!</p>
<p>Quote <a class="mention" href="http://forums.whonix.org/u/eyedeekay">@eyedeekay</a></p>
<aside class="onebox githubpullrequest" data-onebox-src="https://github.com/Whonix/anon-apps-config/pull/8">
  <header class="source">

      <a href="https://github.com/Whonix/anon-apps-config/pull/8" target="_blank" rel="noopener">github.com/Whonix/anon-apps-config</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/anon-apps-config/pull/8" target="_blank" rel="noopener">I2P auto configuration</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>eyedeekay:i2p-auto-configuration</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-11-29" data-time="20:17:49" data-timezone="UTC">08:17PM - 29 Nov 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/eyedeekay" target="_blank" rel="noopener">
          <img alt="eyedeekay" src="https://avatars.githubusercontent.com/u/8733713?v=4" class="onebox-avatar-inline" width="20" height="20">
          eyedeekay
        </a>
      </div>

      <div class="lines" title="6 commits changed 16 files with 217 additions and 1 deletions">
        <a href="https://github.com/Whonix/anon-apps-config/pull/8/files" target="_blank" rel="noopener">
          <span class="added">+217</span>
          <span class="removed">-1</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">I believe this will accomplish what is discussed ITT: https://forums.whonix.org/<span class="show-more-container"><a href="https://github.com/Whonix/anon-apps-config/pull/8" target="_blank" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">t/i2p-client-inside-whonix-workstation-issues/15890/18 but it wants for testing on an actual Whonix system, I've only tried it on regular Debian so far. It changes the default address for user-facing services to 127.0.0.2 instead of 127.0.0.1 using config.d files placed in the i2p-config directory and applies the Whonix-specific router.config using i2p-config instead of using the base configuration. This should require no intervention from the user to set up.</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<blockquote>
<p>I believe this will accomplish what is discussed ITT: <a href="https://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/18" class="inline-onebox">I2P client inside Whonix-Workstation Issues - #18</a> but it wants for testing on an actual Whonix system, I’ve only tried it on regular Debian so far. It changes the default address for user-facing services to 127.0.0.2 instead of 127.0.0.1 using config.d files placed in the i2p-config directory and applies the Whonix-specific router.config using i2p-config instead of using the base configuration. This should require no intervention from the user to set up.</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/21</link>
        <pubDate>Wed, 30 Nov 2022 19:11:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-21</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[eyedeekay]]></dc:creator>
        <description><![CDATA[
            <p>Yeah I can probably make that happen after the I2P release on the 22nd, maybe a little sooner.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/20</link>
        <pubDate>Fri, 18 Nov 2022 15:49:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-20</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Any chance you could send a pull request to anon-apps-config implementing the better config style please?</p>
<p>Main goals:</p>
<ul>
<li>As simple as possible for users in the end.</li>
<li>Use <code>.d</code> style config files whenever possible.</li>
<li>Avoid need to start I2P just to have it create a default config file and then we having to tell users they need to edit that file. In other words, instructions such as 1. start I2P, 2. edit that file… Not great. Best avoided.</li>
<li>Ideally all the user would have to do would be installing I2P and all the Whonix specific settings required are already preconfigured and nicely contained in the anon-apps-config package.</li>
</ul>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/19</link>
        <pubDate>Fri, 18 Nov 2022 13:17:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-19</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>A post was merged into an existing topic: <a href="http://forums.whonix.org/t/i2p-integration/4981/362">I2P Integration</a></p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/18</link>
        <pubDate>Fri, 11 Nov 2022 06:31:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-18</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[eyedeekay]]></dc:creator>
        <description><![CDATA[
            <p>Sorry it took me a little longer to get back to you. Had a developer leave the project, need to re-allocate some work and offboard him. So let’s see…</p>
<blockquote>
<p>It’s a drop-in folder where distribution maintainers (Whonix) and/or users can drop snippets…?</p>
</blockquote>
<p>Well yes, in that there are places it looks for default configuration files and if you have an existing configuration in that directory it won’t generally interfere with those settings. If we have to touch one of your settings when we configure your router, we also have to publish something about why, couple examples, we had to reach in and enable “Tunnel Testing” in an update to the Java I2P router a few releases ago in order to avoid a conflict with <code>i2pd</code> routers, and I had to change the update URL in the Easy-Install for Windows due to a conflict with de-coupled I2P routers(Easy-Install for Windows is a bundle). The point is, if you put a config file in the config directory, we don’t change the settings unless it’s really, really important.</p>
<blockquote>
<ol>
<li>Whonix should stop telling users to edit <code>/var/lib/i2p/i2p-config/clients.config.d/00- net.i2p.router.web.RouterConsoleRunner-clients.config</code> since there no need for it.</li>
<li>Whonix should stop shipping the config-package-dev <code>divert</code>ed file <a href="https://github.com/Whonix/anon-apps-config/blob/master/usr/share/i2p/router.config.anondist" rel="noopener nofollow ugc"><code>/usr/share/i2p/router.config</code></a> since there’s no need for that either.</li>
<li>Whonix should drop its config snippet(s) into the <code>/var/lib/i2p/i2p-config</code> folder? Any file name possible?</li>
</ol>
</blockquote>
<p>Yes to 2 and 3, if I understand correctly, <strong>but</strong></p>
<p>2. Possibly put <code>router.config.anondist</code> into <code>/var/lib/i2p/i2p-config/router.config</code> instead.</p>
<p>3. You can either use <code>/var/lib/i2p/i2p-config/i2ptunnel.config</code> and <code>/var/lib/i2p/i2p-config/clients.config</code> in which case the names matter, or you can use <code>/var/lib/i2p/i2p-config/i2ptunnel.config.d</code> and <code>/var/lib/i2p/i2p-config/clients.config.d</code> in which case the directory names matter but any filename is OK as long as it ends in <code>.config</code></p>
<p>3.a: If you use <code>/var/lib/i2p/i2p-config/i2ptunnel.config</code> and <code>/var/lib/i2p/i2p-config/clients.config</code> simply make your edits* to the default config files and place them in the <code>/var/lib/i2p/i2p-config</code> directory. They will be migrated on the first run to directory configs. Otherwise everything will function normally.</p>
<p>3.b: If you use <code>/var/lib/i2p/i2p-config/i2ptunnel.config.d/</code> and <code>/var/lib/i2p/i2p-config/clients.config.d/</code>, pre-populate it with all the config files you need, i.e. the migrated versions of the default clients tunnels. In these directories any file with a name ending in <code>.config</code> will be read for a configuration.</p>
<blockquote>
<p>Change from 127.0.0.1 to 127.0.0.2 .</p>
</blockquote>
<p>Those would occur in <code>clients.config</code> or the corresponding <code>clients.config.d</code> directory, and <code>i2ptunnel.config</code> or the corresponding <code>i2ptunnel.config.d</code> directory. Change any value which you want to be reachable on a different address <em>to</em> that different address.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/17</link>
        <pubDate>Mon, 07 Nov 2022 18:02:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-17</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Ok, maybe we’re getting somewhere! <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:"> Appreciate all your support!</p>
<aside class="quote no-group" data-username="eyedeekay" data-post="15" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/eyedeekay/40/1511_2.png" class="avatar"> eyedeekay:</div>
<blockquote>
<p>/var/lib/i2p/i2p-config</p>
</blockquote>
</aside>
<aside class="quote no-group" data-username="eyedeekay" data-post="15" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/eyedeekay/40/1511_2.png" class="avatar"> eyedeekay:</div>
<blockquote>
<p>So if you just drop all your custom I2P config files into <code>/var/lib/i2p/i2p-config</code> they won’t be migrated from the defaults in <code>/usr/share/i2p</code>, including <code>router.config</code>.</p>
</blockquote>
</aside>
<p>It’s a drop-in folder where distribution maintainers (Whonix) and/or users can drop snippets…?</p>
<p>In that case…</p>
<ol>
<li>Whonix should stop telling users to edit <code>/var/lib/i2p/i2p-config/clients.config.d/00-net.i2p.router.web.RouterConsoleRunner-clients.config</code> since there no need for it.</li>
<li>Whonix should stop shipping the config-package-dev <code>divert</code>ed file <a href="https://github.com/Whonix/anon-apps-config/blob/master/usr/share/i2p/router.config.anondist"><code>/usr/share/i2p/router.config</code></a> since there’s no need for that either.</li>
<li>Whonix should drop its config snippet(s) into the <code>/var/lib/i2p/i2p-config</code> folder? Any file name possible?</li>
</ol>
<p>Sounds like a plan?</p>
<p>Or would it be more appropriate for Whonix to use <code>/usr/share/i2p</code> folder to drop snippets?</p>
<p>What’s the config line that we need to add to accomplish</p>
<blockquote>
<p>Change from <code>127.0.0.1</code> to <code>127.0.0.2</code> .</p>
</blockquote>
<p>?</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/16</link>
        <pubDate>Thu, 03 Nov 2022 18:14:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-16</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[eyedeekay]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group">
<blockquote>
<p>Quite possibly because I2P only creates the config files when connectivity is available, which is even more weird. And connectivity is limited in Qubes Templates by Qubes design (at time of writing, only the package manager by default can use networking).</p>
</blockquote>
</aside>
<p>It’s not that weird if you consider that I2PSnark, Hidden Services Manager, and even the Router Console are actually separate applications, which will run only after I2P itself is successfully started. Starting them before I2CP is available would not make sense in the same way that allowing Tor Browser to fetch pages before a SOCKS proxy was available would not make sense. The result is that you start with what we call a “monolithic” config file where all the stuff is stored in one file, called <code>clients.config</code> and <code>i2ptunnel.config</code> respectively, which is immediately migrated to a directory config on most platforms. We did it this way because the monolithic config files are still used on places where the base config directory(<code>/usr/share/i2p</code>) and the working config directory(<code>/var/lib/i2p/i2p-config</code>) are the same which includes Android and Portable installations, so this way we still only need to maintain one config file.</p>
<p>However, if a directory config is already present, the migration will not occur. So if you just drop all your custom I2P config files into <code>/var/lib/i2p/i2p-config</code> they won’t be migrated from the defaults in <code>/usr/share/i2p</code>, including <code>router.config</code>. Everything you don’t include in that config(keys, etc) should be regenerated at runtime, and if it doesn’t file an issue and we’ll take care of it on our end.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/15</link>
        <pubDate>Thu, 03 Nov 2022 18:04:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-15</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>The Qubes particularities on how (non-)persistence is implemented meet I2P’s particularities on how config files are handled. In combination, these are creating a usability mess.</p>
<aside class="quote no-group" data-username="LasVegas" data-post="12" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>Is it effective to configure router.config in <code>/var/lib/i2p/i2p-config/router.config</code> instead of <code>/usr/share/i2p/router.config</code>?</p>
<p>What is the difference between router.config and router.config.anondist?</p>
</blockquote>
</aside>
<p>Ignore <code>.anondist</code>. This doesn’t need user documentation. Nothing special to know. No big deal.</p>
<p>Details:</p>
<pre><code>ls -la /var/lib/i2p/i2p-config/router.config*
</code></pre>
<p>related:<br>
<a href="https://www.kicksecure.com/wiki/Dev/About_Debian_Packaging#config-package-dev">Dev/About Debian Packaging - Kicksecure chapter config-package-dev in Kicksecure wiki</a></p>
<aside class="quote no-group" data-username="LasVegas" data-post="13" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>On a Whonix Template using the command <code>i2prouter start</code> creates the files on the Template but they are not available in the Template-based AppVM afterwards. I guess this has something to do with the Qubes standard persistence settings.</p>
</blockquote>
</aside>
<p>Normal Qubes persistence “issue” if you can call it an issue.</p>
<aside class="quote no-group" data-username="LasVegas" data-post="13" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>Is it a secure and reliable alternative to use <code>i2prouter start</code> in AppVM</p>
</blockquote>
</aside>
<p>I doubt that.</p>
<aside class="quote no-group" data-username="LasVegas" data-post="13" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>Note: <code>sudo dpkg-reconfigure i2p</code> creates configuration files in <code>/var/lib/i2p/</code> on AppVM only.</p>
</blockquote>
</aside>
<p>Quite possibly because I2P only creates the config files when connectivity is available, which is even more weird. And connectivity is limited in Qubes Templates by Qubes design (at time of writing, only the package manager by default can use networking).</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/14</link>
        <pubDate>Thu, 03 Nov 2022 12:24:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-14</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[LasVegas]]></dc:creator>
        <description><![CDATA[
            <p>There is a solution circulating, in which it is described that the service I2P should be started with <code>i2prouter start</code> to create the config files in <code>/home/user/.i2p/clients.config.d/00-net.i2p.router.web.RouterConsoleRunner-clients.config</code>.</p>
<p>On a Whonix Template using the command <code>i2prouter start</code> creates the files on the Template but they are not available in the Template-based AppVM afterwards. I guess this has something to do with the Qubes standard persistence settings.</p>
<p>Therefore on the Template-based AppVM you can run <code>i2prouter start</code> which creates configuration files <strong>persistent</strong> in<code>/home/user/.i2p/clients.config.d/00-net.i2p.router.web.RouterConsoleRunner-clients.config</code>. Note: <code>sudo dpkg-reconfigure i2p</code> creates configuration files in <code>/var/lib/i2p/</code> on AppVM only.</p>
<p>Conclusion:</p>
<ul>
<li>
<code>i2prouter start</code> creates configuration files in <code>/home/user/.i2p/</code> and works on Template and AppVM.</li>
<li>
<code>sudo systemctl start i2p</code> creates configuration files in <code>/var/lib/i2p/</code> but does not work on Whonix Template.</li>
<li>There is currently <strong>no way</strong> to get the configuration files created in a Whonix Template which are available on the accoding Template-based AppVM as <code>/home/user/</code> gets overwritten in AppVM.</li>
<li>Creating configuration files must be done in the Template-based AppVM by starting I2P: 1) With <code>i2prouter start</code> you get the configuration files persistent, with <code>sudo systemctl start i2p</code> you have to create and change configuration files on each restart of the AppVM.</li>
</ul>
<p>Is it a secure and reliable alternative to use <code>i2prouter start</code> in AppVM so that you don’t have to reconfigure the configuration files on each restart of the AppVM?</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/13</link>
        <pubDate>Thu, 03 Nov 2022 11:30:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-13</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[LasVegas]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="10" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Modifications to <code>/usr/share/i2p/router.config</code> will be lost after the next update of package anon-apps-config unfortunately. To solve this, upstream support for <code>/etc/i2p.d</code> is required.</p>
</blockquote>
</aside>
<p>Is it effective to configure router.config in <code>/var/lib/i2p/i2p-config/router.config</code> instead of <code>/usr/share/i2p/router.config</code>?</p>
<p>What is the difference between router.config and router.config.anondist?</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/12</link>
        <pubDate>Thu, 03 Nov 2022 11:15:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-12</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[eyedeekay]]></dc:creator>
        <description><![CDATA[
            <p>They ended up in <code>/var/lib/i2p/i2p-config/i2ptunnel.config.d</code> and <code>/var/lib/i2p/i2p-config/clients.config.d</code>. You can create the <code>clients.config.d</code> files and <code>i2ptunnel.config.d</code> files in advance but IIRC you’ll need to create one for each app you intend to run on your node because the defaults will not be “migrated” from the initial, monolithic config. So you will need to create a config file for every app. The reason it appears that I2P needs connectivity to create these config files is because this migration happens when the apps are started which only happens after the API’s become available which only happens after we connect successfully. It doesn’t intrinsically need to be that way.</p>
<p>There isn’t an equivalent with <code>router.config</code>, but dropping a <code>router.config</code> file in <code>/var/lib/i2p/i2p-config/router.config</code> should change the values your router uses when you set it up.</p>
<p><s>I’ll get back to you on how to move this all into a directory in <code>/etc/</code> instead of <code>/var/lib/</code> as soon as I look it up.</s> <code>/var/lib/i2p/</code> is the <code>i2psvc</code> user’s home directory and moving it would require changing that directory and changing the AppArmor profile to match. This is all handled by <code>debian.preinst</code>, <code>debian.postinst</code> files in the <code>debian</code> directory. <code>wrapper.config</code> is the only one that goes into <code>/etc/i2p</code>. <strong>But(And I haven’t tried this yet)</strong> what you may be able to do is possibly create a directory called <code>/etc/i2p/i2p-dir</code> for instance which is owned by the <code>i2psvc</code> user and in <code>/etc/i2p/wrapper.config</code> add the line <code>wrapper.java.additional.3=-Di2p.dir.config=/etc/i2p/i2p-dir</code>. That would cause it to use <code>/etc/i2p/i2p-dir</code> as the working directory instead and therefore the config files would be placed in <code>/etc/i2p/i2p-dir/clients.config.d</code> <code>/etc/i2p/i2p-dir/i2ptunnel.config.d/</code> instead. Doesn’t address the AppArmor thing though.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/11</link>
        <pubDate>Wed, 02 Nov 2022 23:41:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-11</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
      <item>
        <title>I2P client inside Whonix-Workstation Issues</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="LasVegas" data-post="9" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>The current state is that when you run <code>dpkg-reconfigure i2p</code> in the Whonix Template (whonix-ws-16-clone-1), it does <strong>not</strong> create the configuration files under <code>/var/lib/i2p/</code>.</p>
</blockquote>
</aside>
<p>That might be because I2P is unable to connect so it doesn’t create that config folder.</p>
<p>I2P seems weird in that way anyhow. That it needs connectivity to create that config file. And also the config file location is weird.</p>
<p>Could step “Change I2Pconsole interface local IP change.”</p>
<blockquote>
<p>Open file /var/lib/i2p/i2p-config/clients.config.d/00-net.i2p.router.web.RouterConsoleRunner-clients.config in an editor with root rights.</p>
</blockquote>
<blockquote>
<p>Change from <code>127.0.0.1</code> to <code>127.0.0.2</code>.</p>
</blockquote>
<p>be done in some other file in /etc instead or the config file be created without need to start I2P? <a class="mention" href="http://forums.whonix.org/u/eyedeekay">@eyedeekay</a></p>
<aside class="quote no-group" data-username="LasVegas" data-post="9" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>Step 1 in the wiki (Securely Download of the Key): Why should should someone securely download the key to the Whonix-Workstation as mentioned in step 1 of the wiki instead of downloading it to Whonix Template only?</p>
</blockquote>
</aside>
<p>It doesn’t say that.</p>
<ul>
<li>
<blockquote>
<p><strong>If</strong> you are using Whonix-Workstation ™ (<code>anon-whonix</code>), run.</p>
</blockquote>
</li>
<li>
<blockquote>
<p><strong>If</strong> you are using a Qubes Template (<code>whonix-ws-16</code> ), run.</p>
</blockquote>
</li>
</ul>
<p>gpg key download in Qubes templates is an issue unspecific to Whonix.</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Unspecific">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Unspecific" target="_blank" rel="noopener" title="07:49PM - 25 July 2022">Whonix – 25 Jul 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:250/500;"><img src="https://www.whonix.org/w/images/7/74/Booster132.png" class="thumbnail" width="250" height="500"></div>

<h3><a href="https://www.whonix.org/wiki/Unspecific" target="_blank" rel="noopener">Information Booster might be Available!</a></h3>

  <p>Utilizing other resources to help solve questions/issues unspecific to Whonix ™.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>See this lengthy discussion on that topic in the Qubes forums:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://forum.qubes-os.org/t/curl-proxy-wget-proxy-scripts-in-templates-so-users-can-add-gpg-distro-keys-linked-to-added-external-repositories/10935">
  <header class="source">
      <img src="https://forum.qubes-os.org/uploads/db3820/optimized/2X/5/55de5eaf64516902429c411f66491cc9db06c464_2_32x32.png" class="site-icon" width="32" height="32">

      <a href="https://forum.qubes-os.org/t/curl-proxy-wget-proxy-scripts-in-templates-so-users-can-add-gpg-distro-keys-linked-to-added-external-repositories/10935" target="_blank" rel="noopener" title="03:41PM - 19 April 2022">Qubes OS Forum – 19 Apr 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:472/471;"><img src="https://forum.qubes-os.org/uploads/db3820/original/1X/10549f9dff8a289d117f083e9f5155231c452db2.png" class="thumbnail" width="472" height="471"></div>

<h3><a href="https://forum.qubes-os.org/t/curl-proxy-wget-proxy-scripts-in-templates-so-users-can-add-gpg-distro-keys-linked-to-added-external-repositories/10935" target="_blank" rel="noopener">Curl-proxy / wget-proxy scripts in Templates so users can add GPG distro keys...</a></h3>

  <p>Updates Edit: Extended PoC of this idea is here. This is the blocking version (where non-networked TemplateVM will not translate curl/wget to curl-proxy/wget-proxy in the wrapper scripts.  Edit2: PoC code download here  Edit3: A non-blocking example...</p>

  <p>
    <span class="label1">Reading time: 67 mins 🕑</span>
      <span class="label2">Likes: 80 ❤</span>
  </p>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="LasVegas" data-post="9" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>Using I2P-modified TB to access clearnet: Should we avoid this due to security considerations and why?</p>
</blockquote>
</aside>
<p>The web fingerprint is modified. Therefore best to use</p>
<ul>
<li>multiple Whonix-Workstation (better), or</li>
<li>multiple Tor Browser</li>
</ul>
<p>(All documented in the wiki.)</p>
<aside class="quote no-group" data-username="LasVegas" data-post="9" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>Regarding step 7</p>
</blockquote>
</aside>
<p>These numbers might frequently change unfortunately as this documentation is keep getting updated.</p>
<aside class="quote no-group" data-username="LasVegas" data-post="9" data-topic="15890">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/l/9d8465/40.png" class="avatar"> LasVegas:</div>
<blockquote>
<p>Do we have to configure router.config.anondist in <code>/usr/share/i2p/</code> or <code>/var/lib/i2p/i2p-config/</code> to be effective?</p>
</blockquote>
</aside>
<p>Another issue.<br>
I2P doesn’t seem to support <code>/etc/i2p.d</code> and/or <code>/usr/local/etc/i2p.d</code>. Not sure there is now.</p>
<aside class="quote" data-post="297" data-topic="4981">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/eyedeekay/40/1511_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/i2p-integration/4981/297">I2P Integration</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/development/8"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of components looking for maintainer)">Development</span></a>
  </div>
  <blockquote>
    <a class="mention" href="http://forums.whonix.org/u/tnt_bom_bom">@TNT_BOM_BOM</a>  <a class="mention" href="http://forums.whonix.org/u/goldstein-otg">@goldstein-otg</a> I don’t know if anyone has brought <a href="https://github.com/knaccc/i2p-zero" rel="nofollow noopener">i2p-zero</a> to your attention yet, but it might be a way to rely on a simplified java-i2p router without a web interface. Also in the next few months java-i2p should be getting an /etc/i2p.d/-like(Name not settled AFAIK) folder for configuration.
  </blockquote>
</aside>

<p>Any update on <code>/etc/i2p.d</code>? <a class="mention" href="http://forums.whonix.org/u/eyedeekay">@eyedeekay</a></p>
<p>Modifications to <code>/usr/share/i2p/router.config</code> will be lost after the next update of package anon-apps-config unfortunately. To solve this, upstream support for <code>/etc/i2p.d</code> is required.</p>
          <p><a href="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890/10</link>
        <pubDate>Wed, 02 Nov 2022 19:34:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15890-10</guid>
        <source url="http://forums.whonix.org/t/i2p-client-inside-whonix-workstation-issues/15890.rss">I2P client inside Whonix-Workstation Issues</source>
      </item>
  </channel>
</rss>
