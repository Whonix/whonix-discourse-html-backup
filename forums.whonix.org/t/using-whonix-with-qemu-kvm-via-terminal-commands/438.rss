<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Using whonix with qemu-kvm via terminal commands</title>
    <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438</link>
    <description>Virt-manager and libvirt did not work for me in the past and were slow. But in terminal whonix runs very fast even from USB stick. I can load both gateway and workstation. Gateway has internet connection and timesync works. But unfortunately workstation has no connection. So my question is how should i modify my commands to get internet in workstation too.


I tried this way.
sudo apt-get install vde2 qemu qemu-kvm

sudo vde_switch -hub -tap qtap -sock /var/run/qtap-ctl
and press Enter two times to get $vde command prompt.
Open two other tabs in terminal for other two commands.

sudo /usr/bin/X11/qemu-system-x86_64 -hda ./Whonix-Gateway/Whonix-Gateway.vdi -m 386 -enable-kvm -machine type=pc,accel=kvm -cpu host -smp 2,sockets=1,cores=2 -vga std -net vde,sock=/var/run/qtap-ctl,vlan=1,name=whonix -net nic,vlan=1,macaddr=DE:AD:BE:EF:2A:6E -net user,vlan=1,net=192.168.0.0/24,dhcpstart=192.168.0.10 -net nic,vlan=0,macaddr=DE:AD:BE:EF:9C:BC

sudo /usr/bin/X11/qemu-system-x86_64 -hda ~/Whonix-Workstation/Whonix-Workstation.vdi -m 1500 -enable-kvm -machine type=pc,accel=kvm -cpu host -smp 2,sockets=1,cores=2 -vga std -net vde,sock=/var/run/qtap-ctl,vlan=1,name=whonix -net nic,vlan=1,macaddr=DE:AD:BE:EF:4A:47 -net user,vlan=1,net=192.168.0.0/24,dhcpstart=192.168.0.10 -net nic,vlan=0,macaddr=DE:AD:BE:EF:CD:25

I guess the vde network to which both vms are connected does not route packets from workstation to gateway. Any experts?</description>
    <language>en</language>
    <lastBuildDate>Tue, 26 Aug 2014 03:44:12 +0000</lastBuildDate>
    <category>KVM</category>
    <atom:link href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>There is little value in what you are doing to be honest. It makes no sense from a usability and security perspective. With these words, I advise you to use the official recommended way for using Whonix with KVM.</p>
<p>Thread closed.</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/23</link>
        <pubDate>Tue, 26 Aug 2014 03:44:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-23</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>The problem was not solved unfortunately. Also nested pages was switched off as checked by the appropriate command. -cpu qemu64,+vmx only actives it for booting vms but not on the host. Also i had to activate hugepages and create swapfile because the ram problem persists. Due to swapfile i manage to avoid freezes. I don’t think that hugepages helps. It only may add speed. Swapfile makes 2 gigs and couple of times was almost fully filled. So it’s for you to decide about using qemu. It’s much faster than virtualbox on USB but has this ram issue.</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/22</link>
        <pubDate>Mon, 25 Aug 2014 18:22:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-22</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>Yes, -cpu qemu64,+vmx completely solved the ram problem (:<br>
If you have 32bit guest, use -cpu qemu instead.<br>
Patrick, add to manual (:</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/21</link>
        <pubDate>Fri, 22 Aug 2014 16:11:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-21</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>It seems that i have solved the ram issue. I changed -cpu host to -cpu qemu64,+vmx<br>
Now there is no constant ram increase phenomenon. Ram is quite and stands on one level and even takes less than it was set by -m 1500M.</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/20</link>
        <pubDate>Thu, 21 Aug 2014 23:33:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-20</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>I added -balloon virtio to commands and converted both images to qcow2. OS runs fast like hell but the issue remains. Ram is filled and workstation crashes.</p>
<p>/usr/bin/X11/qemu-system-x86_64 -hda ~/Whonix-Workstation/Whonix-Workstation.qcow2 -m 1500M -enable-kvm -machine type=pc,accel=kvm -cpu host -smp 2,sockets=1,cores=2 -vga qxl -net nic,model=e1000,vlan=0,macaddr=DE:AD:BE:EF:12:4A -net socket,connect=127.0.0.1:1234,vlan=0 -net user,vlan=0,net=192.168.0.11/24,dhcpstart=192.168.0.5 -usb -spice port=5390,addr=127.0.0.1,password=youranyrandomspicepassword,ipv4 -balloon virtio</p>
<p>/usr/bin/X11/qemu-system-x86_64 -drive file=~/Whonix-Workstation/Whonix-Workstation.qcow2,if=virtio -m 1500M -enable-kvm -machine type=pc,accel=kvm -cpu host -smp 2,sockets=1,cores=2 -vga qxl -net nic,model=e1000,vlan=0,macaddr=DE:AD:BE:EF:12:4A -net socket,connect=127.0.0.1:1234,vlan=0 -net user,vlan=0,net=192.168.0.11/24,dhcpstart=192.168.0.5 -usb -spice port=5390,addr=127.0.0.1,password=youranyrandomspicepassword,ipv4 -balloon virtio</p>
<p>How can i fix this memory issue?</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/19</link>
        <pubDate>Thu, 21 Aug 2014 22:58:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-19</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Problem is, user “qemu” hasn’t refereed to what (s)he meant by “hardware tracking issues”. So now you and (s)he are talking about different things, I think.</p>
<p>I guess he meant this:<br>
<a href="https://www.whonix.org/forum/index.php/topic,398.0.html" class="onebox" target="_blank">https://www.whonix.org/forum/index.php/topic,398.0.html</a></p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/18</link>
        <pubDate>Thu, 21 Aug 2014 21:47:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-18</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <blockquote>No need to be afraid of leaks unless you have already solved hardware tracking issues...</blockquote>
<p>These are two separate problems. Hardware serial leakage has been tested for already and is determined not to be a problem. sVirt provides a very important safety net. The developers behind KVM see its relevance. I’d take their opinions seriously if I were you…</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/17</link>
        <pubDate>Thu, 21 Aug 2014 21:32:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-17</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>The option “-cpu host” activates the nested page feature provided that your guest is 64-bit.</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/16</link>
        <pubDate>Thu, 21 Aug 2014 18:01:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-16</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>Ram filling and crash issue has not been solved by -m 1700M.</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/15</link>
        <pubDate>Thu, 21 Aug 2014 17:26:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-15</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>To use spice do as follows:<br>
On host (Debian, Ubuntu)<br>
sudo apt-get install spice-client libspice-server1<br>
On guest whonix-workstation<br>
sudo apt-get install xserver-xorg-video-qxl<br>
Stop workstation. Start it now with command<br>
/usr/bin/X11/qemu-system-x86_64 -hda ~/Whonix-Workstation/Whonix-Workstation.vdi -m 1500M -enable-kvm -machine type=pc,accel=kvm -cpu host -smp 2,sockets=1,cores=2 -vga qxl -net nic,model=e1000,vlan=0,macaddr=DE:AD:BE:EF:12:4A -net socket,connect=127.0.0.1:1234,vlan=0 -net user,vlan=0,net=192.168.0.11/24,dhcpstart=192.168.0.5 -usb -spice port=5390,addr=127.0.0.1,password=youranyrandomspicepassword,ipv4<br>
Open another terminal tab and to start spice window paste<br>
spicec -h 127.0.0.1 -p 5390 -w youranyrandomspicepassword<br>
To maximize/toggle spice window use shift F11<br>
Cursor autocapture will work.<br>
You may also try to start worksation with<br>
/usr/bin/X11/qemu-system-x86_64 -drive file=~/Whonix-Workstation/Whonix-Workstation.vdi,if=virtio -m 1500M -enable-kvm -machine type=pc,accel=kvm -cpu host -smp 2,sockets=1,cores=2 -vga qxl -net nic,model=e1000,vlan=0,macaddr=DE:AD:BE:EF:12:4A -net socket,connect=127.0.0.1:1234,vlan=0 -net user,vlan=0,net=192.168.0.11/24,dhcpstart=192.168.0.5 -usb -spice port=5390,addr=127.0.0.1,password=youranyrandomspicepassword,ipv4</p>
<p>It should give HDD boost.</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/14</link>
        <pubDate>Thu, 21 Aug 2014 14:44:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-14</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>No need to be afraid of leaks unless you have already solved hardware tracking issues…</p>
<p>I modified the commands because I have come across the out-of-ram issues which resulted in crash of one of whonix vms running in qemu. The modified commands are as follows, sudo not needed:</p>
<p>/usr/bin/X11/qemu-system-x86_64 -hda ~/Whonix-Gateway/Whonix-Gateway.vdi -m 386M -enable-kvm -machine type=pc,accel=kvm -cpu host -smp 2,sockets=1,cores=2 -vga std -net nic,model=e1000,vlan=0,macaddr=DE:AD:BE:EF:9C:BC -net socket,listen=:1234,vlan=0 -net user,vlan=0,net=192.168.0.10/24,dhcpstart=192.168.0.10 -usb</p>
<p>/usr/bin/X11/qemu-system-x86_64 -hda ~/Whonix-Workstation/Whonix-Workstation.vdi -m 1500M -enable-kvm -machine type=pc,accel=kvm -cpu host -smp 2,sockets=1,cores=2 -vga std -net nic,model=e1000,vlan=0,macaddr=DE:AD:BE:EF:12:4A -net socket,connect=127.0.0.1:1234,vlan=0 -net user,vlan=0,net=192.168.0.11/24,dhcpstart=192.168.0.5 -usb</p>
<p>You can attach usb, press alt ctrl 2, press info usbhost to get xxxx xxxx id, then usb_add host:xxxx:xxxx to attach usb, press alt ctrl 1 to get back to desktop.</p>
<p>The issue to make hidden services working also solved.<br>
Edit file in workstation:</p>
<p>sudo vi /usr/bin/whonix_firewall<br>
Above ##+# OptionalFeatureNr.2# paste:<br>
iptables -A INPUT -p tcp --dport 5222 -j ACCEPT<br>
iptables -A INPUT -p tcp --dport 5269 -j ACCEPT<br>
iptables -A INPUT -p tcp --dport 5280 -j ACCEPT<br>
iptables -A INPUT -p tcp --dport 11009 -j ACCEPT</p>
<p>Save<br>
Then<br>
sudo /usr/bin/whonix_firewall</p>
<p>This will allow to run torchat and ejabberd server for decentralized chat. ejabberd is better because you may use gpg encrypion. Also two ejabberd servers may communicate with each other. Better than torchat.</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/13</link>
        <pubDate>Thu, 21 Aug 2014 12:46:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-13</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <blockquote>Why shouldn't it work without libvirt?</blockquote>
<p>Like Patrick just mentioned, libvirt is an abstraction API. It does not affect performance in any way.</p>
<p>Running qemu without libvirt removes protections provided by the sVirt framework that are part of it. This will not be encouraged by Whonix devs and therefore will not be documented.</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/12</link>
        <pubDate>Thu, 21 Aug 2014 00:25:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-12</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>Hidden services do not work with gateway’s firewall off and workstation’s on. I allowed the ports of HSs in workstation’s firewall but they still do not work ):</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/11</link>
        <pubDate>Wed, 20 Aug 2014 22:14:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-11</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="qemu" data-post="3" data-topic="438">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/q/9d8465/40.png" class="avatar"> qemu:</div>
<blockquote>
<p>Why shouldn’t it work without libvirt?</p>
</blockquote>
</aside>
<p>I didn’t say that it wouldn’t work with libvirt. Please re-read my answer. Just needs a maintainer/developer working on it and lots of work.</p>
<aside class="quote no-group" data-username="qemu" data-post="4" data-topic="438">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/q/9d8465/40.png" class="avatar"> qemu:</div>
<blockquote>
<p>All commads of qemu should be described in docs.</p>
</blockquote>
</aside>
<p>There is a long list of things “that should be done”.</p>
<p>[quote=“qemu, post:5, topic:438”]I could ping 0.11 from 0.10 but could not ping 0.10 from 0.11. Then i figured out that it was the firewall of 0.10 causing problems. I did<br>
sudo iptables -F<br>
sudo iptables -A INPUT -j ACCEPT<br>
sudo iptables -A OUTPUT -j ACCEPT[/quote]<br>
This should only be using during development.</p>
<aside class="quote no-group" data-username="qemu" data-post="5" data-topic="438">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/q/9d8465/40.png" class="avatar"> qemu:</div>
<blockquote>
<p>What else can i add to gateway’s firewall to make it more solid and protective?</p>
</blockquote>
</aside>
<p>Seems like a question unrelated to qemu / kvm -&gt; please consider a separate thread.</p>
<aside class="quote no-group" data-username="qemu" data-post="6" data-topic="438">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/q/9d8465/40.png" class="avatar"> qemu:</div>
<blockquote>
<p>Onion sites started to work too. Probably I had a bad exit node. So Patrick, if you modify your gateway’s firewall, whonix is usable with qemu wihtout libvirt, and much faster!</p>
</blockquote>
</aside>
<p>Much faster = without Tor?</p>
<p>Leak tests:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Dev/Leak_Tests" target="_blank" title="01:52PM - 10 December 2019">Whonix – 10 Dec 19</a>
  </header>
  <article class="onebox-body">
    <img src="" class="thumbnail" width="" height="">

<h3><a href="https://www.whonix.org/wiki/Dev/Leak_Tests" target="_blank">Dev/Leak Tests - Whonix</a></h3>

<p>Testing for IP/DNS Leaks</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="qemu" data-post="8" data-topic="438">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/q/9d8465/40.png" class="avatar"> qemu:</div>
<blockquote>
<p>So you need to switch off the gateway’s firewall and switch on the workstation’s to use whonix with qemu.</p>
</blockquote>
</aside>
<p>Really bad idea.</p>
<p>If it works with libvirt and without firewall modifications, this is a good indication, that it should work without libvirt and qemu as well without firewall modifications. If firewall modifications are required (recommended against), then there must be something wrong with qemu settings.</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/10</link>
        <pubDate>Wed, 20 Aug 2014 21:14:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-10</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>After doing the said firewalls’ operation you won’t be able to ping 0.11 from 0.10 and vice versa! It seems more solid then with gateway’s firewall on.</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/9</link>
        <pubDate>Wed, 20 Aug 2014 18:55:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-9</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>Patrick, I activated firewall on workstation and it works (: So you need to switch off the gateway’s firewall and switch on the workstation’s to use whonix with qemu.<br>
To switch on the workstation’s one do:<br>
sudo vi /etc/whonix_firewall/30_default<br>
Change 0 to 1<br>
Save and exit.<br>
Then<br>
sudo service networking restart</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/8</link>
        <pubDate>Wed, 20 Aug 2014 18:50:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-8</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>My guess is that qemu’s virtual LAN is not visitble to VMs which was much mentioned in docs and online and since that VLAN is not allowed specifically by the gateways’ firewall it somehow blocks connections from the workstation which is of course connected to the gateway via the same VLAN. So Patrick, we may try to switch on the workstation firewall and switch off the gateway’s and see if it may help. At least one firewall protection could be a good additional means of protection.</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/7</link>
        <pubDate>Wed, 20 Aug 2014 16:52:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-7</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>Onion sites started to work too. Probably I had a bad exit node. So Patrick, if you modify your gateway’s firewall, whonix is usable with qemu wihtout libvirt, and much faster!</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/6</link>
        <pubDate>Wed, 20 Aug 2014 16:48:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-6</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>Patrick, problem partially solved (:<br>
Two commands without vde are enough</p>
<p>sudo /usr/bin/X11/qemu-system-x86_64 -hda ~/Whonix-Gateway/Whonix-Gateway.vdi -m 386 -enable-kvm -machine type=pc,accel=kvm -cpu host -smp 2,sockets=1,cores=2 -vga std -net nic,model=e1000,vlan=0,macaddr=DE:AD:BE:EF:9C:BC -net socket,listen=:1234,vlan=0 -net user,vlan=0,net=192.168.0.10/24,dhcpstart=192.168.0.10</p>
<p>sudo /usr/bin/X11/qemu-system-x86_64 -hda ~/Whonix-Workstation/Whonix-Workstation.vdi -m 1500 -enable-kvm -machine type=pc,accel=kvm -cpu host -smp 2,sockets=1,cores=2 -vga std -net nic,model=e1000,vlan=0,macaddr=DE:AD:BE:EF:12:4A -net socket,connect=127.0.0.1:1234,vlan=0 -net user,vlan=0,net=192.168.0.11/24,dhcpstart=192.168.0.5</p>
<p>I could ping 0.11 from 0.10 but could not ping 0.10 from 0.11. Then i figured out that it was the firewall of 0.10 causing problems. I did<br>
sudo iptables -F<br>
sudo iptables -A INPUT -j ACCEPT<br>
sudo iptables -A OUTPUT -j ACCEPT</p>
<p>Now i have intenet in 0.11 too but onion sites are not opening! I guess why? Stream isolation works (:<br>
What else can i add to gateway’s firewall to make it more solid and protective?</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/5</link>
        <pubDate>Wed, 20 Aug 2014 16:39:04 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-5</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>All commads of qemu should be described in docs. If qemu natively does not provide routing there are other workarounds like tap and bridging linked to qemu. But you must figure out how to configure them properly to provide the said routing capability unless there is something in whonix design attached specifically to virtualbox. If not and it uses standard networking configuration it should work in qemu.</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/4</link>
        <pubDate>Wed, 20 Aug 2014 15:34:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-4</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>Why shouldn’t it work without libvirt?</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/3</link>
        <pubDate>Wed, 20 Aug 2014 15:12:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-3</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Imagine Whonix KVM development hasn’t started and someone asked “how must a libvirt xml file look like for Whonix to work without leaks and how to check?” - your question is almost as that big question. Outside the scope of a forum answer. Would need development.</p>
<p>What could work however is understanding libvirt as what it is - an abstraction layer for virtualizers. So what libvirt is probably doing is converting the libvirt file into native qemu/kvm commands. Maybe you can get libvirt to tell you what command line that actually is and just use that one.</p>
<blockquote>Virt-manager and libvirt did not work for me in the past and were slow.</blockquote>
Would be probably easier/better to fix the original problem than to invent using without libvirt.
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/2</link>
        <pubDate>Wed, 20 Aug 2014 14:10:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-2</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
      <item>
        <title>Using whonix with qemu-kvm via terminal commands</title>
        <dc:creator><![CDATA[qemu]]></dc:creator>
        <description><![CDATA[
            <p>Virt-manager and libvirt did not work for me in the past and were slow. But in terminal whonix runs very fast even from USB stick. I can load both gateway and workstation. Gateway has internet connection and timesync works. But unfortunately workstation has no connection. So my question is how should i modify my commands to get internet in workstation too.</p>
<p>I tried this way.<br>
sudo apt-get install vde2 qemu qemu-kvm</p>
<p>sudo vde_switch -hub -tap qtap -sock /var/run/qtap-ctl<br>
and press Enter two times to get $vde command prompt.<br>
Open two other tabs in terminal for other two commands.</p>
<p>sudo /usr/bin/X11/qemu-system-x86_64 -hda ./Whonix-Gateway/Whonix-Gateway.vdi -m 386 -enable-kvm -machine type=pc,accel=kvm -cpu host -smp 2,sockets=1,cores=2 -vga std -net vde,sock=/var/run/qtap-ctl,vlan=1,name=whonix -net nic,vlan=1,macaddr=DE:AD:BE:EF:2A:6E -net user,vlan=1,net=192.168.0.0/24,dhcpstart=192.168.0.10 -net nic,vlan=0,macaddr=DE:AD:BE:EF:9C:BC</p>
<p>sudo /usr/bin/X11/qemu-system-x86_64 -hda ~/Whonix-Workstation/Whonix-Workstation.vdi -m 1500 -enable-kvm -machine type=pc,accel=kvm -cpu host -smp 2,sockets=1,cores=2 -vga std -net vde,sock=/var/run/qtap-ctl,vlan=1,name=whonix -net nic,vlan=1,macaddr=DE:AD:BE:EF:4A:47 -net user,vlan=1,net=192.168.0.0/24,dhcpstart=192.168.0.10 -net nic,vlan=0,macaddr=DE:AD:BE:EF:CD:25</p>
<p>I guess the vde network to which both vms are connected does not route packets from workstation to gateway. Any experts?</p>
          <p><a href="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438/1</link>
        <pubDate>Wed, 20 Aug 2014 13:57:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-438-1</guid>
        <source url="http://forums.whonix.org/t/using-whonix-with-qemu-kvm-via-terminal-commands/438.rss">Using whonix with qemu-kvm via terminal commands</source>
      </item>
  </channel>
</rss>
