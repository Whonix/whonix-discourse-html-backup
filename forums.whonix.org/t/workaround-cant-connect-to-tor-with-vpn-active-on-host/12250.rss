<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[Workaround] Can&#39;t connect to Tor with VPN active on host</title>
    <link>http://forums.whonix.org/t/workaround-cant-connect-to-tor-with-vpn-active-on-host/12250</link>
    <description>A couple of months ago (I think), I started having a problem with Whonix Gateway; more specifically, after updating the packages one day, the gateway stopped being able to connect to the Tor network

A few notes regarding this problem :
- Problem affects a fresh Whonix setup
- Problem affects people with a setup similar to mine
- Problem is similar to issue No. 3133 from 2016
- Contrary to issue 3133, OpenVPN doesn&#39;t seem affected, only Wireguard (tested by someone else)
- Host (Arch) is using Wireguard through the open source Mullvad VPN daemon (important)
- Gateway is NATed to the VPN interface
- Only Whonix is affected, all other VMs and applications on host work fine
- Connectivity works fine if using an older VM backup (though I can&#39;t figure out what package is to blame as about 40 of them get updated when running the upgrade command)

As written in the title though, there is a workaround that can be applied within Whonix Gateway:
Connectivity can be reestablished by using bridges (tested with obfs4); and oddly enough, until rebooting, connectivity will work fine even if you disable the bridges and restart Tor

I&#39;m not sure I expect a solution to be found given how specific the problem seems to be, but at the very least I figured someone could use the information</description>
    <language>en</language>
    <lastBuildDate>Tue, 26 Oct 2021 21:48:19 +0000</lastBuildDate>
    <category>KVM</category>
    <atom:link href="http://forums.whonix.org/t/workaround-cant-connect-to-tor-with-vpn-active-on-host/12250.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[Workaround] Can&#39;t connect to Tor with VPN active on host</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Check out network manager settings on the host and enable automatic connection to your VPN. Check that all users can use your connection.</p>
          <p><a href="http://forums.whonix.org/t/workaround-cant-connect-to-tor-with-vpn-active-on-host/12250/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/workaround-cant-connect-to-tor-with-vpn-active-on-host/12250/4</link>
        <pubDate>Tue, 26 Oct 2021 21:48:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-12250-4</guid>
        <source url="http://forums.whonix.org/t/workaround-cant-connect-to-tor-with-vpn-active-on-host/12250.rss">[Workaround] Can&#39;t connect to Tor with VPN active on host</source>
      </item>
      <item>
        <title>[Workaround] Can&#39;t connect to Tor with VPN active on host</title>
        <dc:creator><![CDATA[ChiefGyk3D]]></dc:creator>
        <description><![CDATA[
            <p>I was able to replicate the same issue myself here. I was using Wireguard with my VPN and it was not working and was not happy. Switching to OpenVPN seems to have, for the past few minutes, fixed the problem.<br>
<a class="mention" href="http://forums.whonix.org/u/hulahoop">@HulaHoop</a> for reference I have ensured all IP blocks are different and not conflicting, there is a legitimate issue with the Whonix KVM in regards to Wireguard traffic on a VPN as far it seems, or possibly something bigger. I even tried splitting routes to no success. However, my Windows 10 VM on this same machine has never had any network connectivity problems. I haven’t tested other Linux OS to see if issue is among multiple ones as I just migrated from Virtualbox to KVM a couple weeks ago for all my daily work.</p>
<p>I’m using Pop!_OS 20.04 for reference as the Host, and the VM’s were built as of three days ago. I have been reverting to snapshots of the base install I made to ensure any tweaks were tested and working. I even destroyed and recreated the VM’s from scratch and following documentation very closely.</p>
          <p><a href="http://forums.whonix.org/t/workaround-cant-connect-to-tor-with-vpn-active-on-host/12250/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/workaround-cant-connect-to-tor-with-vpn-active-on-host/12250/3</link>
        <pubDate>Sun, 03 Oct 2021 13:12:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-12250-3</guid>
        <source url="http://forums.whonix.org/t/workaround-cant-connect-to-tor-with-vpn-active-on-host/12250.rss">[Workaround] Can&#39;t connect to Tor with VPN active on host</source>
      </item>
      <item>
        <title>[Workaround] Can&#39;t connect to Tor with VPN active on host</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="shd56733" data-post="1" data-topic="12250">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/s/77aa72/40.png" class="avatar"> shd56733:</div>
<blockquote>
<p>A couple of months ago (I think), I started having a problem with Whonix Gateway; more specifically, after updating the packages one day, the gateway stopped being able to connect to the Tor network</p>
</blockquote>
</aside>
<p>My guess is that there’s a conflict between the IP range assigned on the Wireguard interface and the internal range assigned for the external Whonix network. You’d have to manually edit the network settings and GW XML of the latter to accommodate the former perhaps using something in the 172.x.x.x ranges instead.</p>
          <p><a href="http://forums.whonix.org/t/workaround-cant-connect-to-tor-with-vpn-active-on-host/12250/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/workaround-cant-connect-to-tor-with-vpn-active-on-host/12250/2</link>
        <pubDate>Sun, 12 Sep 2021 16:41:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-12250-2</guid>
        <source url="http://forums.whonix.org/t/workaround-cant-connect-to-tor-with-vpn-active-on-host/12250.rss">[Workaround] Can&#39;t connect to Tor with VPN active on host</source>
      </item>
      <item>
        <title>[Workaround] Can&#39;t connect to Tor with VPN active on host</title>
        <dc:creator><![CDATA[shd56733]]></dc:creator>
        <description><![CDATA[
            <p>A couple of months ago (I think), I started having a problem with Whonix Gateway; more specifically, after updating the packages one day, the gateway stopped being able to connect to the Tor network</p>
<p>A few notes regarding this problem :</p>
<ul>
<li>Problem affects a fresh Whonix setup</li>
<li>Problem affects people with a setup similar to mine</li>
<li>Problem is similar to issue No. 3133 from 2016</li>
<li>Contrary to issue 3133, OpenVPN doesn’t seem affected, only Wireguard (tested by someone else)</li>
<li>Host (Arch) is using Wireguard through the open source Mullvad VPN daemon (important)</li>
<li>Gateway is NATed to the VPN interface</li>
<li>Only Whonix is affected, all other VMs and applications on host work fine</li>
<li>Connectivity works fine if using an older VM backup (though I can’t figure out what package is to blame as about 40 of them get updated when running the upgrade command)</li>
</ul>
<p>As written in the title though, there is a workaround that can be applied within Whonix Gateway:<br>
Connectivity can be reestablished by using bridges (tested with obfs4); and oddly enough, until rebooting, connectivity will work fine even if you disable the bridges and restart Tor</p>
<p>I’m not sure I expect a solution to be found given how specific the problem seems to be, but at the very least I figured someone could use the information</p>
          <p><a href="http://forums.whonix.org/t/workaround-cant-connect-to-tor-with-vpn-active-on-host/12250/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/workaround-cant-connect-to-tor-with-vpn-active-on-host/12250/1</link>
        <pubDate>Sun, 05 Sep 2021 14:36:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-12250-1</guid>
        <source url="http://forums.whonix.org/t/workaround-cant-connect-to-tor-with-vpn-active-on-host/12250.rss">[Workaround] Can&#39;t connect to Tor with VPN active on host</source>
      </item>
  </channel>
</rss>
