<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>gateway as proxy for tor</title>
    <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914</link>
    <description>I know that this has been many times discussed through several subject but I would like to know if it&#39;s possible.
here: https://forums.whonix.org/t/how-to-route-windows-internal-network-to-whonix/6483/5
or here : https://forums.whonix.org/t/using-whonix-gateway-as-virtual-access-point/7021

but would it be possible to open a third netword card, apply some rules, open the 9050 port in the rules of virtualbox  and use it to reach the proxy. Like for example to get thunderbird reach tor with torbirdy through your gateway?

I know it&#39;s not supported, I jsut want to know if it&#39;s feasable or if you locked everything to render that impossible?</description>
    <language>en</language>
    <lastBuildDate>Sat, 25 Jan 2020 11:15:55 +0000</lastBuildDate>
    <category>VirtualBox</category>
    <atom:link href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <pre><code>ls -la /usr/share/tor/*

-rw-r--r-- 1 root root 4913550 Dec 16 09:56 /usr/share/tor/geoip
-rw-r--r-- 1 root root 3156350 Dec 16 09:56 /usr/share/tor/geoip6
lrwxrwxrwx 1 root root      35 Oct 11 00:55 /usr/share/tor/tor-service-defaults-torrc -&gt; tor-service-defaults-torrc.anondist
-rw-r--r-- 1 root root   21243 Jan 25 08:28 /usr/share/tor/tor-service-defaults-torrc.anondist
-rw-r--r-- 1 root root     351 Dec 16 09:56 /usr/share/tor/tor-service-defaults-torrc.anondist-orig
-rw-r--r-- 1 root root     431 Dec 16 09:56 /usr/share/tor/tor-service-defaults-torrc-instances
</code></pre>
<aside class="quote no-group" data-post="15" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>tor-geoipdb: /usr/share/tor/geoip<br>
tor-geoipdb: /usr/share/tor/geoip6</p>
</blockquote>
</aside>
<p>Not by Whonix.</p>
<aside class="quote no-group" data-post="15" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>/usr/share/tor/tor-service-defaults-torrc</p>
</blockquote>
</aside>
<p>A symlink from</p>
<pre><code>/usr/share/tor/tor-service-defaults-torrc
</code></pre>
<p>effectively to</p>
<pre><code>/usr/share/tor/tor-service-defaults-torrc.anondist
</code></pre>
<blockquote>
<p>/usr/share/tor/tor-service-defaults-torrc.anondist-orig</p>
</blockquote>
<p>Original by Debian. Was /usr/share/tor/tor-service-defaults-torrc and then renamed to /usr/share/tor/tor-service-defaults-torrc.anondist-orig.</p>
<p>This isn’t a manual process. Using <code>config-pacakge-dev</code> <code>displace</code> action.</p>
<ul>
<li><a href="https://packages.debian.org/config-package-dev">https://packages.debian.org/config-package-dev</a></li>
<li><a href="https://debathena.mit.edu/config-packages/">https://debathena.mit.edu/config-packages/</a></li>
<li><a href="https://www.whonix.org/wiki/Dev/About_Debian_Packaging#config-package-dev">https://www.whonix.org/wiki/Dev/About_Debian_Packaging#config-package-dev</a></li>
</ul>
<aside class="quote no-group" data-post="15" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>tor: /usr/share/tor/tor-service-defaults-torrc-instances</p>
</blockquote>
</aside>
<p>By Debian. Used for running multiple Tor instance which can be enabled using systemd. I haven’t researched that yet. Not used in Whonix currently.</p>
<p>Whonix /usr/share/tor/tor-service-defaults-torrc in the git repository is file /usr/share/tor/tor-service-defaults-torrc.anondist which config-package-dev puts into the right place in a good way.</p>
<p>Check folder /usr/share/tor on Debian vs Whonix.<br>
The other files there such as tor-service-defaults-torrc-instances by Debian make it look more complicated than it ought to be.</p>
<p>Tor upstream doesn’t support “proper” <code>torrc.d/*.conf</code> support yet. See <a href="https://forums.whonix.org/t/torrc-d-is-comming/4041" class="inline-onebox">torrc.d is comming</a><br>
That’s why historically Whonix had to use /usr/share/tor/tor-service-defaults-torrc.</p>
<p>Once <a href="https://phabricator.whonix.org/T947">https://phabricator.whonix.org/T947</a> is implemented, Whonix can stop modifications of /usr/share/tor/tor-service-defaults-torrc which would be cleaner.</p>
          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/16</link>
        <pubDate>Sat, 25 Jan 2020 11:15:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-16</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <pre><code>dpkg -S /usr/share/tor/*

tor-geoipdb: /usr/share/tor/geoip
tor-geoipdb: /usr/share/tor/geoip6
diversion by anon-gw-anonymizer-config from: /usr/share/tor/tor-service-defaults-torrc
diversion by anon-gw-anonymizer-config to: /usr/share/tor/tor-service-defaults-torrc.anondist-orig
tor: /usr/share/tor/tor-service-defaults-torrc
anon-gw-anonymizer-config: /usr/share/tor/tor-service-defaults-torrc.anondist
diversion by anon-gw-anonymizer-config from: /usr/share/tor/tor-service-defaults-torrc
diversion by anon-gw-anonymizer-config to: /usr/share/tor/tor-service-defaults-torrc.anondist-orig
tor: /usr/share/tor/tor-service-defaults-torrc-instances</code></pre>
          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/15</link>
        <pubDate>Sat, 25 Jan 2020 11:06:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-15</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[boistordu]]></dc:creator>
        <description><![CDATA[
            <p>okey I found the solution</p>
<p>in 50_user.conf<br>
to not override completely your config file that you just mentionned, you need to put <code>+SocksPort blablabla</code> in place of <code>SocksPort blablabla</code><br>
Apparently just SocksPort is only within the same primary basic config file.</p>
<aside class="quote no-group" data-post="13" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Also extra VMs don’t require new ports so this doesn’t come up either.</p>
</blockquote>
</aside>
<p>Well it depends if you want to isolate the traffic and put the VM on another internal network with other addressing schematics than the basic one you configured. Which yo udon’t do I know but that could be a usecase too.</p>
<p>May I dig a little deeper and take a bit much more of your time (You don’t need to answer it now). but what’s the hierarchy between all your config files in /usr/share/tor ?<br>
Because there is the orig, the instances. I guess the anon is the main config file of the tor project that you modify for the whole whonix project right?</p>
          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/14</link>
        <pubDate>Sat, 25 Jan 2020 10:48:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-14</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>No, not command line.</p>
<p>Adding new SocksPorts hasn’t happened for a long time.</p>
<p>If I needed to do for whole of Whonix, these would be added here:</p>
<p><a href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/share/tor/tor-service-defaults-torrc.anondist">https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/share/tor/tor-service-defaults-torrc.anondist</a></p>
<p>Otherwise I would re-read here <a href="https://www.whonix.org/wiki/Tor#Additional_SocksPorts">https://www.whonix.org/wiki/Tor#Additional_SocksPorts</a> and if that doesn’t work produce outside of Whonix (Debian and Tor only) and then contact The Tor Project in case of questions / bugs.</p>
<p>Also extra VMs don’t require new ports so this doesn’t come up either.</p>
<p>Quote <a href="https://www.whonix.org/wiki/Stream_Isolation">https://www.whonix.org/wiki/Stream_Isolation</a></p>
<blockquote>
<p><a href="https://www.whonix.org/wiki/Multiple_Whonix-Workstation">Multiple Whonix-Workstation ™</a> using different internal IP’s are automatically separated by Tor (IsolateClientAddr is Tor’s default).</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/13</link>
        <pubDate>Sat, 25 Jan 2020 10:36:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-13</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[boistordu]]></dc:creator>
        <description><![CDATA[
            <p>okey quick question then.</p>
<p>When you ever need a new SockPort… I do’nt know for a new VM linked to your gateway for example, what do you do?<br>
Do you use the command line then ?</p>
          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/12</link>
        <pubDate>Sat, 25 Jan 2020 10:31:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-12</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="10" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/b/ee7513/40.png" class="avatar"> boistordu:</div>
<blockquote>
<p>When I just add the line in the 50_usr.conf file : SockPort 10.0.2.15:9050 then everything else goes to the toilet.</p>
</blockquote>
</aside>
<p><a href="https://www.whonix.org/wiki/Tor#Additional_SocksPorts">https://www.whonix.org/wiki/Tor#Additional_SocksPorts</a> tries to explain that.</p>
<p>I suggest to simplify the setup. Reproduce what you want outside of Whonix with Debian and Tor only. That way your question becomes a pure, non-Whonix related Debian/Tor question and you can ask Tor Project support about this.<br>
As per <a href="https://www.whonix.org/wiki/Free_Support_Principle">https://www.whonix.org/wiki/Free_Support_Principle</a></p>
<aside class="quote no-group" data-post="10" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/b/ee7513/40.png" class="avatar"> boistordu:</div>
<blockquote>
<p>Sorry but I don’t understand the logic here.</p>
</blockquote>
</aside>
<p>Me too. Quote <a href="https://www.whonix.org/wiki/Tor#Additional_SocksPorts">https://www.whonix.org/wiki/Tor#Additional_SocksPorts</a></p>
<blockquote>
<p>Adding additional Tor SocksPorts to <em>/usr/local/etc/torrc.d/50_user.conf</em> is non-intuitive.</p>
</blockquote>
<blockquote>
<p><a href="https://trac.torproject.org/projects/tor/ticket/15261">https://trac.torproject.org/projects/tor/ticket/15261</a></p>
</blockquote>
<p>This implementation is purely up to Tor, not Whonix.</p>
          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/11</link>
        <pubDate>Sat, 25 Jan 2020 10:27:40 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-11</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[boistordu]]></dc:creator>
        <description><![CDATA[
            <p>One of us is not understanding the point of the other one here.<br>
Because for me you are not seeing what I’m trying to do which is :<br>
-&gt; just add a listening adress which is 10.0.2.15  with the port 9050 for the host to be able to connect to it<br>
Or maybe then I don’t get your point that you are trying to explain to me.<br>
But that need to be in addition of all the others SockPort which are already configured and working when you do a fresh isntall.<br>
As you know when you do a fresh install there is no problem for workstation to contact with hexchat the proxy through 9101 by default, etc…<br>
When I just add the line in the 50_usr.conf file : SockPort 10.0.2.15:9050 then everything else goes to the toilet.</p>
<p>Sorry but I don’t understand the logic here. The common sense would say, since there are all those socksports already configured that means the proxy is meant to be versatile enough. So the basic configuration file shouldn’t be disabled but read after the 50_user.conf and all the rules should be applied unless there is a rule that is already mentioned in 50_user.conf and so this one will be applied in place of the specific one in share folder.</p>
<p>in your link it is well said:</p>
<blockquote>
<p>This rule is simple for options that take a single value, but it can become complicated for options that are allowed to occur more than once: if you specify four SOCKSPorts in your configuration file, and one more SOCKSPort on the command line, the option on the command line will replace all of the SOCKSPorts in the configuration file. If this is not what you want, prefix the option name with a plus sign, and it will be appended to the previous set of options instead.</p>
</blockquote>
<p>But I’m not using commandline to add my port here, just one line in the 50_user.conf file, so the other lines in the basic file shouldn’t be ignored. That’s what I’m not understanding.</p>
<p>Is it more clear?</p>
          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/10</link>
        <pubDate>Sat, 25 Jan 2020 10:16:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-10</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="8" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/b/ee7513/40.png" class="avatar"> boistordu:</div>
<blockquote>
<p>But so do you mean that I can’t fill anything in 50_user.conf because then the one in /usr/share is not read?</p>
</blockquote>
</aside>
<p>No.</p>
<aside class="quote no-group" data-post="8" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/b/ee7513/40.png" class="avatar"> boistordu:</div>
<blockquote>
<p>So should I put a copy of this conf file into /usr/loca/etc/torc.d/ then?</p>
</blockquote>
</aside>
<p><a href="https://www.whonix.org/wiki/Tor#Edit_Tor_Configuration" class="onebox" target="_blank">https://www.whonix.org/wiki/Tor#Edit_Tor_Configuration</a></p>
<aside class="quote no-group" data-post="8" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/b/ee7513/40.png" class="avatar"> boistordu:</div>
<blockquote>
<p>is the file in /usr/local/etc/torrc.d/ linked to the firewall configruation?</p>
</blockquote>
</aside>
<p>No.</p>
<aside class="quote no-group" data-post="8" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/b/ee7513/40.png" class="avatar"> boistordu:</div>
<blockquote>
<p>So I’m going to make a copy paste from share to local but is this really the proper way? or am I missing something?</p>
</blockquote>
</aside>
<p><a href="https://www.whonix.org/wiki/Tor#Additional_SocksPorts">https://www.whonix.org/wiki/Tor#Additional_SocksPorts</a></p>
          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/9</link>
        <pubDate>Sat, 25 Jan 2020 10:01:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-9</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[boistordu]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="7" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Variables set in lexical lower configuration files will persist if they are not chaned in lexical higher configuration files.</p>
</blockquote>
</aside>
<p>Okey so I4ve seen:<br>
On Whonix-Gateway ™ in /usr/share/tor/tor-service-defaults-torrc are already a lot custom socks ports prepared for custom installed applications:</p>
<blockquote>
<pre><code>Without IsolateDestAddr and without IsolateDestPort: SocksPort 10.152.152.10:9153 to 9159
With IsolateDestAddr, but without IsolateDestPort: SocksPort 10.152.152.10:9160 to 9169
Without IsolateDestAddr, but with IsolateDestPort: SocksPort: 10.152.152.10:9170 to 9179
With IsolateDestAddr and with IsolateDestPort: SocksPort: 10.152.152.10:9180 to 9189
If those are not enough, you can add your own.
</code></pre>
</blockquote>
<p>and indeed in this file there are a lot of custom ports. But so do you mean that I can’t fill anything in 50_user.conf because then the one in /usr/share is not read? So should I put a copy of this conf file into /usr/loca/etc/torc.d/ then?<br>
Because in the end it’s not a firewall problem, or is the file in /usr/local/etc/torrc.d/ linked to the firewall configruation? I was under the impression that it was not since for that there is a part</p>
<blockquote>
<p>Modify Whonix-Gateway ™ User Firewall Settings</p>
</blockquote>
<p>in <a href="https://www.whonix.org/wiki/Access_Gateway_Port_From_Host" rel="nofollow noopener">here</a></p>
<p>so my problem is really the proxy not the firewall. IT’s not listening to the ports described in usr/share . it only listens to the one in /usr/local/<br>
So I’m going to make a copy paste from share to local but is this really the proper way? or am I missing something?</p>
          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/8</link>
        <pubDate>Sat, 25 Jan 2020 09:46:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-8</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="6" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/b/ee7513/40.png" class="avatar"> boistordu:</div>
<blockquote>
<ul>
<li>hexchat is on 9101</li>
<li>tor browser seems on something else too</li>
<li>swtdate is on another one than 9050 too<br>
etc</li>
</ul>
</blockquote>
</aside>
<p><a href="https://www.whonix.org/wiki/Stream_Isolation" class="onebox" target="_blank">https://www.whonix.org/wiki/Stream_Isolation</a></p>
<aside class="quote no-group" data-post="6" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/b/ee7513/40.png" class="avatar"> boistordu:</div>
<blockquote>
<p>so obviously you just opened the range to communicate or maybe you configured it in a specific file?</p>
</blockquote>
</aside>
<p>Search Whonix source code.</p>
<p><a href="https://www.whonix.org/wiki/Dev/git#grep_Whonix_source_code">https://www.whonix.org/wiki/Dev/git#grep_Whonix_source_code</a></p>
<p>Also:</p>
<ul>
<li><a href="https://forums.whonix.org/t/whonix-networking-implementation-developer-documentation-feedback-wanted/8274" class="inline-onebox">Whonix Networking Implementation - Developer Documentation - Feedback Wanted!</a></li>
<li><a href="https://www.whonix.org/wiki/Dev/Whonix_Networking">https://www.whonix.org/wiki/Dev/Whonix_Networking</a></li>
</ul>
<aside class="quote no-group" data-post="6" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/b/ee7513/40.png" class="avatar"> boistordu:</div>
<blockquote>
<p>So is it possible to open a range in place of “Socksport 10.152.152.10:9101” and put 9000-9200 for example?</p>
</blockquote>
</aside>
<p>General Tor question as per <a href="https://www.whonix.org/wiki/Free_Support_Principle">https://www.whonix.org/wiki/Free_Support_Principle</a><br>
And no, I am not aware of such as Tor feature.<br>
Consider posting a feature request against Tor.<br>
You be able have to auto generate such a config file with a script.</p>
<aside class="quote no-group" data-post="6" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/b/ee7513/40.png" class="avatar"> boistordu:</div>
<blockquote>
<p>And more conceptual question, since without fill the file 50_user.conf with information it works fine, does that mean that because of filling this file, your configuration file got disabled or something like that?</p>
</blockquote>
</aside>
<p>Variables set in lexical lower configuration files will persist if they are not chaned in lexical higher configuration files.</p>
<p><a href="https://www.whonix.org/wiki/Configuration_Files" class="onebox" target="_blank">https://www.whonix.org/wiki/Configuration_Files</a></p>
<p><a href="https://github.com/Whonix/whonix-firewall/blob/master/usr/bin/whonix-gateway-firewall">https://github.com/Whonix/whonix-firewall/blob/master/usr/bin/whonix-gateway-firewall</a></p>
<p>real:</p>
<pre><code>source_config_folder() {
   shopt -s nullglob
   local i
   for i in /etc/whonix_firewall.d/*.conf /rw/config/whonix_firewall.d/*.conf; do
      bash_n_exit_code="0"
      bash_n_output="$(bash -n "$i" 2&gt;&amp;1)" || { bash_n_exit_code="$?" ; true; };
      if [ ! "$bash_n_exit_code" = "0" ]; then
         echo "Invalid config file: $i
   bash_n_exit_code: $bash_n_exit_code
   bash_n_output:
   $bash_n_output" &gt;&amp;2
         exit 1
      fi
      source "$i"
   done
}
</code></pre>
<p>simpler for illustration:</p>
<pre><code class="lang-auto">for i in /etc/whonix_firewall.d/*.conf ; do
   source "$i"
done
</code></pre>
          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/7</link>
        <pubDate>Sat, 25 Jan 2020 09:06:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-7</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[boistordu]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="5" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Redirect ports from where to where?</p>
</blockquote>
</aside>
<p>between the host and the VM-gateway. At least to let the possibility to do that for the user, don’t you think? Because if just NAT is selected then there is no port translation possible.</p>
<aside class="quote no-group" data-post="5" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Why?</p>
</blockquote>
</aside>
<p>because I don’t know you but I managed several VM on my workstation and I use port translation a lot, and so since I use translation port a lot, I need to specify the guest IP to make the translation port to work.</p>
<p>And yes yes, I know, this configuration is not supported blablabla… But in the mean time, it’s not like it’s that complciated to activated the possibility.</p>
<p>By the way I wanted to document my experience and ask some quesitons in the mean time if I may.<br>
So what I discover and what was not documented, is that you don’t use only one port for the use of the proxy apparently. Between gateway and workstation I mean.<br>
examples:</p>
<ul>
<li>hexchat is on 9101</li>
<li>tor browser seems on something else too</li>
<li>swtdate is on another one than 9050 too<br>
etc</li>
</ul>
<p>so obviously you just opened the range to communicate or maybe you configured it in a specific file?</p>
<p>Another thing is that, since I had to activate the file 50_user.conf by filling it some information. I had’nt only need to put the guest ip adresse from the nat network I created for the VM.</p>
<ul>
<li>But I also had to put 127.0.0.1:9050 for the gateway itself to be able to  connect to apt mirrors for example</li>
<li>also the interface from internal network Whonix for the workstation to let it access TOR for the primary services like nslookup, apt , etc…</li>
</ul>
<p>The problem now is that since every single one of the processes installed in the workstation has it’s own port number to communicate to the proxy, I can’t add them all to the file in the gateway VM, or it would be a long and heavy task.<br>
So is it possible to open a range in place of “Socksport 10.152.152.10:9101” and put 9000-9200 for example?</p>
<p>And more conceptual question, since without fill the file 50_user.conf with information it works fine, does that mean that because of filling this file, your configuration file got disabled or something like that?</p>
<p>Thanks in advance for all the enlightment you would be able to provide me.</p>
          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/6</link>
        <pubDate>Fri, 24 Jan 2020 23:38:51 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-6</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="4" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/b/ee7513/40.png" class="avatar"> boistordu:</div>
<blockquote>
<p>to have the ability to redirect ports</p>
</blockquote>
</aside>
<p>Redirect ports from where to where?</p>
<aside class="quote no-group" data-post="4" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/b/ee7513/40.png" class="avatar"> boistordu:</div>
<blockquote>
<p>it would be best to put the guest IP</p>
</blockquote>
</aside>
<p>Why?</p>
          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/5</link>
        <pubDate>Tue, 20 Aug 2019 07:14:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-5</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[boistordu]]></dc:creator>
        <description><![CDATA[
            <p>I can confirm that the solution through the first interface connected to NAT is working still hard and strong on whonix 15.0.0.3.3 but with some modification since virtualbox change a bit or maybe I’m being too obessional.<br>
it would be better to link the VM through a NAT network you created in place of NAT to have the ability to redirect ports. And when you redirect ports, it would be best to put the guest IP. I don’t know we didn’t do it before actually since if not, I don’t see how the process could know where to direct the packet.<br>
I will try later for the third connection, I would find it less messy to pass it through in a third interface.</p>
          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/4</link>
        <pubDate>Tue, 20 Aug 2019 01:29:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-4</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[boistordu]]></dc:creator>
        <description><![CDATA[
            <p>Thanks. Will cautious read the esoteric way and see if I have any question <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>
Thanks again</p>
          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/3</link>
        <pubDate>Mon, 19 Aug 2019 13:08:10 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-3</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="1" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/b/ee7513/40.png" class="avatar"> boistordu:</div>
<blockquote>
<p>if you locked everything to render that impossible?</p>
</blockquote>
</aside>
<p>Whonix is Freedom Software.</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Why_Whonix_is_Freedom_Software" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:103/36;"><img src="https://www.whonix.org/w/images/3/38/Pay-706798-640.jpg" class="thumbnail"></div>

<h3><a href="https://www.whonix.org/wiki/Why_Whonix_is_Freedom_Software" target="_blank" rel="nofollow noopener">Why Whonix is Freedom Software</a></h3>

<p>Why Whonix ™ will always be Free as in Price as well as in Freedom. Security, Legal, Ethical and other Reasons.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>In that tradition, Whonix doesn’t implement deliberate technical hurdles to prevent what advanced users and/or developers from custom modifications.</p>
<aside class="quote no-group" data-post="1" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/b/ee7513/40.png" class="avatar"> boistordu:</div>
<blockquote>
<p>I jsut want to know if it’s feasable</p>
</blockquote>
</aside>
<p>Feasible possibly yes.</p>
<hr>
<p>third interface:</p>
<p>Whonix Firewall contains options to configure multiple interfaces.</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/Whonix/whonix-firewall/blob/master/etc/whonix_firewall.d/30_whonix_gateway_default.conf#L128-L146" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/whonix-firewall/blob/master/etc/whonix_firewall.d/30_whonix_gateway_default.conf#L128-L146" target="_blank" rel="nofollow noopener">Whonix/whonix-firewall/blob/master/etc/whonix_firewall.d/30_whonix_gateway_default.conf#L128-L146</a></h4>
<pre class="onebox"><code class="lang-conf"><ol class="start lines" start="128" style="counter-reset: li-counter 127 ;">
<li>## Internal interface</li>
<li>## defaults to:</li>
<li>#INT_IF="eth1"</li>
<li>## to use multiple:</li>
<li>#INT_IF="\</li>
<li>#eth1</li>
<li>#eth2</li>
<li>#eth3"</li>
<li>
</li>
<li>## Internal "tunnel" interface, usually the same as</li>
<li>## the Internal interface unless using vpn tunnels</li>
<li>## between workstations and gateway</li>
<li>## defaults to:</li>
<li>#INT_TIF="eth1"</li>
<li>## to use multiple:</li>
<li>#INT_TIF="\</li>
<li>#eth1</li>
<li>#eth2</li>
<li>#eth3"</li>
</ol></code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Also then Tor config needs to be modified to bind on that IP.</p>
<hr>
<p>But likely a third interface maybe isn’t even needed. Access Tor running inside Whonix-Gateway from the host was accomplished years ago. On <a href="https://www.whonix.org/wiki/Advanced_Documentation" rel="nofollow noopener">https://www.whonix.org/wiki/Advanced_Documentation</a> under <code>Esoteric Issues</code> we have this wiki page:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Access_Gateway_Port_From_Host" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:103/68;"><img src="https://www.whonix.org/w/images/c/ce/Accessgateway.jpg" class="thumbnail"></div>

<h3><a href="https://www.whonix.org/wiki/Access_Gateway_Port_From_Host" target="_blank" rel="nofollow noopener">Access Gateway Port From Host</a></h3>

<p>Access Whonix-Gateway ™ Port From Host (Esoteric Documentation)</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<blockquote>
<p>This is very esoteric and you probably don’t need it! Advanced users only!</p>
</blockquote>
<blockquote>
<p>Not tested since Whonix ™ 0.5.6. May or may not work. Might need changes for later versions.</p>
</blockquote>
<aside class="quote no-group" data-post="1" data-topic="7914">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/b/ee7513/40.png" class="avatar"> boistordu:</div>
<blockquote>
<p>I know it’s not supported</p>
</blockquote>
</aside>
<p>Indeed. For reference:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Unsupported" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:103/68;"><img src="https://www.whonix.org/w/images/0/0a/Unsupported.jpg" class="thumbnail"></div>

<h3><a href="https://www.whonix.org/wiki/Unsupported" target="_blank" rel="nofollow noopener">Unsupported</a></h3>

<p>What do you mean by unsupported?</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/2</link>
        <pubDate>Mon, 19 Aug 2019 12:02:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-2</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
      <item>
        <title>gateway as proxy for tor</title>
        <dc:creator><![CDATA[boistordu]]></dc:creator>
        <description><![CDATA[
            <p>I know that this has been many times discussed through several subject but I would like to know if it’s possible.<br>
here: <a href="https://forums.whonix.org/t/how-to-route-windows-internal-network-to-whonix/6483/5" class="inline-onebox">How to route Windows internal network to Whonix?</a><br>
or here : <a href="https://forums.whonix.org/t/using-whonix-gateway-as-virtual-access-point/7021" class="inline-onebox">Using whonix gateway as virtual access point</a></p>
<p>but would it be possible to open a third netword card, apply some rules, open the 9050 port in the rules of virtualbox  and use it to reach the proxy. Like for example to get thunderbird reach tor with torbirdy through your gateway?</p>
<p>I know it’s not supported, I jsut want to know if it’s feasable or if you locked everything to render that impossible?</p>
          <p><a href="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914/1</link>
        <pubDate>Mon, 19 Aug 2019 08:56:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7914-1</guid>
        <source url="http://forums.whonix.org/t/gateway-as-proxy-for-tor/7914.rss">gateway as proxy for tor</source>
      </item>
  </channel>
</rss>
