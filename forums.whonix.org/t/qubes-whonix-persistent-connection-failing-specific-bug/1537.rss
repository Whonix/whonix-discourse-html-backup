<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Qubes-Whonix persistent connection failing (specific bug)</title>
    <link>http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537</link>
    <description>putting Qubes to sleep is a problem to Whonix, how is that? 

now follow these steps to produce the error:-

- open qubes 

- open whonix (both GW&amp;WS) and make sure u r aware of this bug https://www.whonix.org/forum/index.php/topic,1784.0.html?PHPSESSID=go2p8pdujtji5bejc5hvqcc6jd0b4ro3

- now keep Whonix working inside Qubes VM manager , go to &quot;Application Launcher Menu&quot; (the blue Q on the left corner) then go to &quot;Leave&quot; then choose &quot;Sleep&quot;

what will happen is:- the network connection will shutdown while qubes sleeping , whonix cant understand this (from my reasoning) so it wont work.

this is simply how to make Whonix connection fail to connect to the internet again , is that the only problem ? no but it goes further:-

Whonix wont ever connect again to the internet no matter how many times u shutdown it. except if u restart the entire Qubes.

so if someone asked how about if we turn OFF/ON &quot;sys-firewall&quot;&amp;&quot;sys-net&quot;? wont that considered similarly to turning off Qubes ?

thought that also , but it is not same. if u gonna try that u r going to face this message from Whonix whonixcheck:-

[code]msgdispatcher script bug.
no panic. nothing is broken. just some rare connection been hit.
try again later.There is likely a solution for this problem.
please see whonix news, whonix blog and whonix user help forum.
please report this bug!

error_text: kdialog --title &quot;$identifier&quot; --passivepopup &quot;$text&quot; &quot;$time&quot;
last exit_code: 127[/code]

why i considered this as a specific bug? because other appVMs r working (like personal , untrusted ...etc. the internet connection is there)</description>
    <language>en</language>
    <lastBuildDate>Wed, 09 Dec 2015 19:04:29 +0000</lastBuildDate>
    <category>Qubes-Whonix</category>
    <atom:link href="http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Qubes-Whonix persistent connection failing (specific bug)</title>
        <dc:creator><![CDATA[TNT_BOM_BOM]]></dc:creator>
        <description><![CDATA[
            <p>yeah tested and it is working fine with whonix 12 <img src="//forums.whonix.org/images/emoji/twitter/+1.png?v=5" title=":+1:" class="emoji" alt=":+1:"></p>
          <p><a href="http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537/7</link>
        <pubDate>Wed, 09 Dec 2015 19:04:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1537-7</guid>
        <source url="http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537.rss">Qubes-Whonix persistent connection failing (specific bug)</source>
      </item>
      <item>
        <title>Qubes-Whonix persistent connection failing (specific bug)</title>
        <dc:creator><![CDATA[TNT_BOM_BOM]]></dc:creator>
        <description><![CDATA[
            <blockquote>Works for me with Qubes Q3 and https://www.whonix.org/blog/qubes-whonix-12-test-images.</blockquote>
<p>well then its specific to Whonix 11 + Qubes R3</p>
<p>when whonix 12 going to be for testers i will try it out.</p>
          <p><a href="http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537/6</link>
        <pubDate>Mon, 26 Oct 2015 23:54:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1537-6</guid>
        <source url="http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537.rss">Qubes-Whonix persistent connection failing (specific bug)</source>
      </item>
      <item>
        <title>Qubes-Whonix persistent connection failing (specific bug)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Works for me with Qubes Q3 and <a href="https://www.whonix.org/blog/qubes-whonix-12-test-images">https://www.whonix.org/blog/qubes-whonix-12-test-images</a>.</p>
          <p><a href="http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537/5</link>
        <pubDate>Mon, 26 Oct 2015 22:13:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1537-5</guid>
        <source url="http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537.rss">Qubes-Whonix persistent connection failing (specific bug)</source>
      </item>
      <item>
        <title>Qubes-Whonix persistent connection failing (specific bug)</title>
        <dc:creator><![CDATA[TNT_BOM_BOM]]></dc:creator>
        <description><![CDATA[
            <blockquote>sleep works for me.</blockquote>
<p>it works for me 2 , i didnt have problem with that…</p>
<blockquote>Only problem is i have to manually reconnect to the internet.   When waking,  qubes makes another network connection named after the interface.  So i go to network manager and delete that and then qubes automatically reconnects to my original connection.  I have not other issues.  All my apps work, for example xchat automatically reconnect to irc in whonix.</blockquote>
<p>well thats what im talking about. sleep/wake making whonix not understanding this which will lead to persistent fail to connect again. so the behavior of how qubes react to the sleep/wake should be known by whonix as well.</p>
<blockquote>Sleep [for too long] in a VM is a general problem to Tor.
https://www.whonix.org/wiki/Security_Guide#Power_Saving_Considerations</blockquote>
<p>not too long , u can try it on ur computer just press “sleep” then press the “power button”</p>
<blockquote>So for now, the closest to a Qubes restart is to shut down all VMs, Then start sys-net. Then start sys-firewall. Then start Whonix. That should work?</blockquote>
<p>nope didnt work either.</p>
<blockquote>Most likely you don't have kdialog installed. Will be fixed in Whonix 12. In meanwhile, install kdialog in your Whonix TemplateVMs:
<p>Code: [Select]</p>
<p>sudo apt-get install kde-baseapps-bin</p>
</blockquote>
<p>aha ok cool will do it.</p>
          <p><a href="http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537/4</link>
        <pubDate>Mon, 26 Oct 2015 19:30:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1537-4</guid>
        <source url="http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537.rss">Qubes-Whonix persistent connection failing (specific bug)</source>
      </item>
      <item>
        <title>Qubes-Whonix persistent connection failing (specific bug)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <blockquote>putting Qubes to sleep is a problem to Whonix, how is that?</blockquote>
Sleep [for too long] in a VM is a general problem to Tor.
https://www.whonix.org/wiki/Security_Guide#Power_Saving_Considerations
<blockquote>Whonix wont ever connect again to the internet no matter how many times u shutdown it. except if u restart the entire Qubes.
<p>so if someone asked how about if we turn OFF/ON “sys-firewall”&amp;“sys-net”? wont that considered similarly to turning off Qubes ?</p>
</blockquote><br>
After turning off/on sys-firewall and sys-net (by using “sudo poweroff”), any existing VMs will no longer be able connect to the internet until you restart them. Qubes upstream issue:<br>
<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/QubesOS/qubes-issues/issues/975" target="_blank" rel="nofollow noopener">github.com/QubesOS/qubes-issues</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/Zrubi" rel="nofollow noopener">
<img src="https://avatars1.githubusercontent.com/u/7664714?v=2&amp;s=96" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="https://github.com/QubesOS/qubes-issues/issues/975" target="_blank" rel="nofollow noopener">Issue: dynamic network attach/detach does not work (kernel oops)</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/Zrubi" target="_blank" rel="nofollow noopener">Zrubi</a>
	on <a href="https://github.com/QubesOS/qubes-issues/issues/975" target="_blank" rel="nofollow noopener">2015-04-28</a>
	</div>
	<div class="user">
	closed by <a href="https://github.com/marmarek" target="_blank" rel="nofollow noopener">marmarek</a>
	on <a href="https://github.com/QubesOS/qubes-issues/issues/975" target="_blank" rel="nofollow noopener">2016-05-18</a>
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">I have a problem related to live network attach/detach:
The 'default' (if attached before booting the VM) is working, and may be...</pre>

<div class="labels">
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">C: core</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">C: xen</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">P: critical</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">bug</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">r3.0-dom0-stable</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">r3.0-fc20-stable</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">r3.0-fc21-stable</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>So for now, the closest to a Qubes restart is to shut down all VMs, Then start sys-net. Then start sys-firewall. Then start Whonix. That should work?</p>
<blockquote>if u gonna try that u r going to face this message from Whonix whonixcheck:-
<p>[code]msgdispatcher script bug.<br>
no panic. nothing is broken. just some rare connection been hit.<br>
try again later.There is likely a solution for this problem.<br>
please see whonix news, whonix blog and whonix user help forum.<br>
please report this bug!</p>
<p>error_text: kdialog --title “$identifier” --passivepopup “$text” "$time"<br>
last exit_code: 127[/code]</p>
</blockquote><br>
Most likely you don’t have kdialog installed. Will be fixed in Whonix 12. In meanwhile, install kdialog in your Whonix TemplateVMs:
<pre><code class="lang-auto"></code></pre>
          <p><a href="http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537/3</link>
        <pubDate>Mon, 26 Oct 2015 17:10:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1537-3</guid>
        <source url="http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537.rss">Qubes-Whonix persistent connection failing (specific bug)</source>
      </item>
      <item>
        <title>Qubes-Whonix persistent connection failing (specific bug)</title>
        <dc:creator><![CDATA[TNT_BOM_BOM]]></dc:creator>
        <description><![CDATA[
            <p>putting Qubes to sleep is a problem to Whonix, how is that?</p>
<p>now follow these steps to produce the error:-</p>
<ul>
<li>
<p>open qubes</p>
</li>
<li>
<p>open whonix (both GW&amp;WS) and make sure u r aware of this bug <a href="https://www.whonix.org/forum/index.php/topic,1784.0.html?PHPSESSID=go2p8pdujtji5bejc5hvqcc6jd0b4ro3" rel="nofollow noopener">https://www.whonix.org/forum/index.php/topic,1784.0.html?PHPSESSID=go2p8pdujtji5bejc5hvqcc6jd0b4ro3</a></p>
</li>
<li>
<p>now keep Whonix working inside Qubes VM manager , go to “Application Launcher Menu” (the blue Q on the left corner) then go to “Leave” then choose “Sleep”</p>
</li>
</ul>
<p>what will happen is:- the network connection will shutdown while qubes sleeping , whonix cant understand this (from my reasoning) so it wont work.</p>
<p>this is simply how to make Whonix connection fail to connect to the internet again , is that the only problem ? no but it goes further:-</p>
<p>Whonix wont ever connect again to the internet no matter how many times u shutdown it. except if u restart the entire Qubes.</p>
<p>so if someone asked how about if we turn OFF/ON “sys-firewall”&amp;“sys-net”? wont that considered similarly to turning off Qubes ?</p>
<p>thought that also , but it is not same. if u gonna try that u r going to face this message from Whonix whonixcheck:-</p>
<p>[code]msgdispatcher script bug.<br>
no panic. nothing is broken. just some rare connection been hit.<br>
try again later.There is likely a solution for this problem.<br>
please see whonix news, whonix blog and whonix user help forum.<br>
please report this bug!</p>
<p>error_text: kdialog --title “$identifier” --passivepopup “$text” "$time"<br>
last exit_code: 127[/code]</p>
<p>why i considered this as a specific bug? because other appVMs r working (like personal , untrusted …etc. the internet connection is there)</p>
          <p><a href="http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537/1</link>
        <pubDate>Sun, 25 Oct 2015 21:45:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1537-1</guid>
        <source url="http://forums.whonix.org/t/qubes-whonix-persistent-connection-failing-specific-bug/1537.rss">Qubes-Whonix persistent connection failing (specific bug)</source>
      </item>
  </channel>
</rss>
