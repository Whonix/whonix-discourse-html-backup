<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Qubes-whonix Debian package - Qubes-Whonix - Whonix Forum</title>
    <meta name="description" content="I just finished creating the whonix-qubes Debian package that contains all the configurations scripts, etc to allow Whonix to function in Qubes.  I am pretty sure we previously agreed they belong with Whonix since they a&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="764.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Qubes-whonix Debian package&#39;" href="764.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/qubes-whonix-debian-package/764" />
<meta name="twitter:url" content="https://forums.whonix.org/t/qubes-whonix-debian-package/764" />
<meta property="og:title" content="Qubes-whonix Debian package" />
<meta name="twitter:title" content="Qubes-whonix Debian package" />
<meta property="og:description" content="I just finished creating the whonix-qubes Debian package that contains all the configurations scripts, etc to allow Whonix to function in Qubes.  I am pretty sure we previously agreed they belong with Whonix since they are Whonix specific.  These scripts will allow online updates to fix any bugs or add features that are not directly related to Whonix or Qubes.  There are no dependencies on Qubes or Whonix since I plan on installing it as the first package once the template has been bootstrapped. ..." />
<meta name="twitter:description" content="I just finished creating the whonix-qubes Debian package that contains all the configurations scripts, etc to allow Whonix to function in Qubes.  I am pretty sure we previously agreed they belong with Whonix since they are Whonix specific.  These scripts will allow online updates to fix any bugs or add features that are not directly related to Whonix or Qubes.  There are no dependencies on Qubes or Whonix since I plan on installing it as the first package once the template has been bootstrapped. ..." />
<meta property="article:published_time" content="2014-12-29T06:54:14+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="next" href="7644658.html?page=2">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="764.html">Qubes-whonix Debian package</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/qubes-whonix/12.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #63a0ff'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Qubes-Whonix</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-29T06:54:14Z' class='post-time'>
                December 29, 2014,  6:54am
              </time>
              <meta itemprop='dateModified' content='2014-12-29T06:54:14Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I just finished creating the whonix-qubes Debian package that contains all the configurations scripts, etc to allow Whonix to function in Qubes.  I am pretty sure we previously agreed they belong with Whonix since they are Whonix specific.</p>
<p>These scripts will allow online updates to fix any bugs or add features that are not directly related to Whonix or Qubes.  There are no dependencies on Qubes or Whonix since I plan on installing it as the first package once the template has been bootstrapped.</p>
<p>I tried to follow the Whonix packaging format as most as I could figure out but I also needed to make sure I can build it with Qubes builder which uses a different logic to build.  I version-ed it to be same as Whonix Release, so this version is 9.4-1 as I figure I will need a matching version for each build.</p>
<p>It would be nice to get this package in the Whonix repo so I can start testing like adding a feature or fix a bug via an update as well as use the Whonix repo directly as my source when initially creating and building the template.  There currently is one issue that would be nice to test on someone like WhonixQubes (I have a way to make those notification work properly; that feature just got missed in the massive merge).</p>
<p>Let me know of any issues.  I don’t have much experience with Debian Packages so there may be some room for improvement.</p>
<p>My repo is here <a href="../../../external.html?link=https://github.com/nrgaway/whonix-qubes.git" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/whonix-qubes.git</a>.  I sign all my commits and tags.  Here is a link to my public key <a href="../../../external.html?link=https://raw.githubusercontent.com/nrgaway/qubes-builder/master/nrgaway-qubes-signing-key.asc" data-bbcode="true" rel="nofollow noopener">https://raw.githubusercontent.com/nrgaway/qubes-builder/master/nrgaway-qubes-signing-key.asc</a> for verification or you can grab key from gpg server (0x5A4C6DAD).  Fingerprint: E0E3 2283 FDCA C1A5 1007 8F27 1BB9 B1FB 5A4C 6DAD.</p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-29T10:06:40Z' class='post-time'>
                December 29, 2014, 10:06am
              </time>
              <meta itemprop='dateModified' content='2014-12-29T10:06:40Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="1" data-topic="764">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>I just finished creating the whonix-qubes Debian package that contains all the configurations scripts, etc to allow Whonix to function in Qubes.</p>
</blockquote>
</aside>
<p>Wow. You are a machine! <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<aside class="quote" data-post="1" data-topic="764">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>I am pretty sure we previously agreed they belong with Whonix since they are Whonix specific.</p>
</blockquote>
</aside>
<p>Yes.</p>
<aside class="quote" data-post="1" data-topic="764">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>It would be nice to get this package in the Whonix repo so I can start testing like adding a feature or fix a bug via an update as well as use the Whonix repo directly as my source when initially creating and building the template.</p>
</blockquote>
</aside>
<p>Yes. Looking forward to seeing this package get incorporated by Patrick as well.</p>
<aside class="quote" data-post="1" data-topic="764">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>There currently is one issue that would be nice to test on someone like WhonixQubes (I have a way to make those notification work properly; that feature just got missed in the massive merge).</p>
</blockquote>
</aside>
<p>Yeah, I think I just read this in your NOTES file:</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/nrgaway/qubes-whonix/blob/master/NOTES" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/nrgaway/qubes-whonix/blob/master/NOTES" target="_blank" rel="nofollow noopener">nrgaway/qubes-whonix/blob/master/NOTES</a></h4>
<pre><code class="lang-">=================================================================================
                       W H O N I X  1 1    N O T E S

           [⏳] = Implemented feature waiting for testing results [23F3]
           [✓] = Feature Implemented and appears working [2713]
=================================================================================

=================================================================================
                          Whonix 11 Checks and Issues
=================================================================================
Current issues:

  - bind-directories...
    'bind-directories' will automatically bind important Whonix configuration
    directories within root image filesystem to the users /rw/ filesystem so the
    changes will persist apon rebbot eliminating the need to have Whonix be a
    standalone VM.

    The first time an AppVM is started the original content from the root image 
    are copied to the users /rw directory (one-time) to make sure any changes
</code></pre>

  This file has been truncated. <a href="../../../external.html?link=https://github.com/nrgaway/qubes-whonix/blob/master/NOTES" target="_blank" rel="nofollow noopener">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<blockquote>Current issues:
- Whonix notifications seems to have reverted back to old style</blockquote>
<p>I’m guessing you’re talking about the “whonixcheck” and “timesync” notifications I mentioned on the Qubes mailing list.</p>
<p>I think I now do remember seeing these notifications be pulled into the upper corner (black and white box) and disappear gracefully and natively by Qubes in one of your prior development builds I had installed.</p>
<p>I had disabled the “whonixcheck” script execution and “timesync” gui, using Patrick’s recommendations to manage this.</p>
<p>Looking for it to handle typical “whonixcheck” and “timesync” notifications without the typical Whonix popup windows getting in the way, and also handle such notifications when the VMs have internet access and when they are cut off from internet access.</p>
<p>Yes. I would be happy to test this fix out for you.</p>
<p>Let me know the best way to proceed with that.</p>
<p>Thanks a ton! <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-29T10:43:47Z' class='post-time'>
                December 29, 2014, 10:43am
              </time>
              <meta itemprop='dateModified' content='2014-12-29T10:43:47Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Awesome! Looking forward to review. Will do so after I return from c3c1. Shortly after next year.</p>
<p>Small comment on:<br>
<a href="../../../external.html?link=https://github.com/nrgaway/whonix-qubes/blob/master/usr/lib/whonix/utility_functions" class="onebox" target="_blank">https://github.com/nrgaway/whonix-qubes/blob/master/usr/lib/whonix/utility_functions</a></p>
<p>We’re already setting a global WHONIX variable here (was maybe not the best idea at that time):<br>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/whonix-base-files/blob/master/usr/lib/whonix/whonix.sh" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/whonix-base-files/blob/master/usr/lib/whonix/whonix.sh" target="_blank" rel="nofollow noopener">Whonix/whonix-base-files/blob/master/usr/lib/whonix/whonix.sh</a></h4>
<pre><code class="lang-sh">#!/bin/bash

## Copyright (C) 2012 - 2018 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## TorBirdy reads this variable and sets appropriate socks proxy settings for
## Stream Isolation.
export WHONIX=1

## Hide the Tor Browser Bundle (TBB) logo in tor-launcher. This is useful to
## avoid users confusing TBB and Whonix. Also useful when running tor-launcher
## in standalone mode, because then it's not TBB that is starting. Lastly also
## useful avoid ​trademark issues when redistributing original, unmodified TBB
## in (linux) distributions.
## https://trac.torproject.org/projects/tor/ticket/14122
## https://www.torproject.org/docs/trademark-faq.html.en
## https://www.whonix.org/wiki/Dev/TPO_Trademark
export TOR_HIDE_BROWSER_LOGO=1
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>So it might be better to change the variable name in utility_functions to avoid conflicts.</p>
<p>I don’t think this will be necessary:</p>
<pre><code class="lang-auto"></code></pre>
<p>Saw this in no Debian package yet. Files in /etc/… are owned by root:root anyhow. /etc/uwt.d/30_uwt_default got permissions 0644 by default. They get the same permissions as in the source folder. So just set permissions as you wish in source folder/git and commit. That should suffice.</p>
<p>For the same reason, <a href="../../../external.html?link=https://github.com/nrgaway/whonix-qubes/blob/master/debian/whonix-qubes.preinst">https://github.com/nrgaway/whonix-qubes/blob/master/debian/whonix-qubes.preinst</a> should be unnecessary.</p>
<pre><code class="lang-auto"></code></pre>
<p>Is that custom code? I think dh_systemd is run automatically during packaging if building on jessie. dh_systemd should abstract all the systemd magic without needing manual custom code in debian maintainer scripts.</p>
<p>The postrm script <a href="../../../external.html?link=https://github.com/nrgaway/whonix-qubes/blob/master/debian/whonix-qubes.postrm">https://github.com/nrgaway/whonix-qubes/blob/master/debian/whonix-qubes.postrm</a> does nothing yet and should be removed as long as it’s doing nothing. Unless you plan on letting it do something in future. (debhelper auto adds such a script to the deb as needed even if it’s not in the source.)</p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-29T22:01:44Z' class='post-time'>
                December 29, 2014, 10:01pm
              </time>
              <meta itemprop='dateModified' content='2014-12-29T22:01:44Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="3" data-topic="764">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Awesome! Looking forward to review. Will do so after I return from c3c1. Shortly after next year.</p>
</blockquote>
</aside>
<p>Great.  What is c3c1?  A google search did not yield any relevant results.</p>
<blockquote>Small comment on:
https://github.com/nrgaway/whonix-qubes/blob/master/usr/lib/whonix/utility_functions
<p>We’re already setting a global WHONIX variable here (was maybe not the best idea at that time):<br>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/whonix-base-files/blob/master/usr/lib/whonix/whonix.sh" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/whonix-base-files/blob/master/usr/lib/whonix/whonix.sh" target="_blank" rel="nofollow noopener">Whonix/whonix-base-files/blob/master/usr/lib/whonix/whonix.sh</a></h4>
<pre><code class="lang-sh">#!/bin/bash

## Copyright (C) 2012 - 2018 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## TorBirdy reads this variable and sets appropriate socks proxy settings for
## Stream Isolation.
export WHONIX=1

## Hide the Tor Browser Bundle (TBB) logo in tor-launcher. This is useful to
## avoid users confusing TBB and Whonix. Also useful when running tor-launcher
## in standalone mode, because then it's not TBB that is starting. Lastly also
## useful avoid ​trademark issues when redistributing original, unmodified TBB
## in (linux) distributions.
## https://trac.torproject.org/projects/tor/ticket/14122
## https://www.torproject.org/docs/trademark-faq.html.en
## https://www.whonix.org/wiki/Dev/TPO_Trademark
export TOR_HIDE_BROWSER_LOGO=1
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>So it might be better to change the variable name in utility_functions to avoid conflicts.</p>
</blockquote>
<p>Okay, I will change this.  I do not think it should cause any issues with the current code since I do not export the variable and am only using it locally.  It would override the global WHONIX=1 variable in the local context, but since I do not need access to that global variable it should be fine.  None the less I will change it.  Will be a good test as I was trying to find things that could be changed <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<blockquote>I don't think this will be necessary:
<pre><code class="lang-auto"></code></pre>
<p>Saw this in no Debian package yet. Files in /etc/… are owned by root:root anyhow. /etc/uwt.d/30_uwt_default got permissions 0644 by default. They get the same permissions as in the source folder. So just set permissions as you wish in source folder/git and commit. That should suffice.</p>
<p>For the same reason, <a href="../../../external.html?link=https://github.com/nrgaway/whonix-qubes/blob/master/debian/whonix-qubes.preinst" rel="nofollow noopener">https://github.com/nrgaway/whonix-qubes/blob/master/debian/whonix-qubes.preinst</a> should be unnecessary.</p>
</blockquote>
<p>I will remove the relevant code then.  That makes it much simpler.</p>
<blockquote>[code]enableSystemdUnits[/code]
<p>Is that custom code? I think dh_systemd is run automatically during packaging if building on jessie. dh_systemd should abstract all the systemd magic without needing manual custom code in debian maintainer scripts.</p>
</blockquote>
<p>Yes it is custom code. I wrote this to be able to verify that a service is either enabled and disabled.  It does not attempt to enable the service if its already enabled as it first checks the status and will only enable if the status returns disabled. There are cases when you need to disable and re-enable as well.</p>
<p>Since these services are core to the operation I prefer to be over cautious and not rely on the installer script to ensure something is enabled as I did have some issues at one point which may or may not exist now.  It could be the issues arose from being installed in a chroot environment, in which much of the systemd functionality is disabled.  This Debian installation package scripts will be used both in the initial chroot creation of the template and on live systems for updates so I need to make sure its reliable in both cases.</p>
<p>On a side note, I have also experimented with systemd-nspawn and LXC containers for creating the templates as this gives me more of a live environment to work with with less limitations of chroot.  I wrote some simple functions that intercept chroot and based on an environmental variable either use chroot, systemd-nspawn or LXC.  This allowed me not to have to modify any source files currently using chroot.  I only mention this since it may be of interest to you when building Whonix.</p>
<blockquote>The postrm script https://github.com/nrgaway/whonix-qubes/blob/master/debian/whonix-qubes.postrm does nothing yet and should be removed as long as it's doing nothing. Unless you plan on letting it do something in future. (debhelper auto adds such a script to the deb as needed even if it's not in the source.)</blockquote>
<p>I added the postrm as a template for completeness so its there if I need it.  The current version of this package is the exact code implemented at this point in time when creating the Whonix-Qubes templates.  My next job will be to actually use this package within my creation of the templates using qubes-builder, then implement any fixes.  If it ends up not being used when we need to push our first update, I will remove anything that is not needed.</p>
<p>I may not have much time in near future, so I am not sure when I can complete this task but will try to squeeze it in; maybe train myself to code while I am sleeping <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-01T08:50:35Z' class='post-time'>
                January 1, 2015,  8:50am
              </time>
              <meta itemprop='dateModified' content='2015-01-01T08:50:35Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“nrgaway, post:4, topic:764”][quote author=Patrick link=topic=841.msg6185#msg6185 date=1419849827]<br>
Awesome! Looking forward to review. Will do so after I return from c3c1. Shortly after next year.[/quote]</p>
<p>Great.  What is c3c1?  A google search did not yield any relevant results.[/quote]<br>
See first post:<br>
<a href="../../../external.html?link=https://www.whonix.org/forum/index.php/topic,815" class="onebox" target="_blank">https://www.whonix.org/forum/index.php/topic,815</a></p>
<blockquote>On a side note, I have also experimented with systemd-nspawn and LXC containers for creating the templates as this gives me more of a live environment to work with with less limitations of chroot.  I wrote some simple functions that intercept chroot and based on an environmental variable either use chroot, systemd-nspawn or LXC.  This allowed me not to have to modify any source files currently using chroot.  I only mention this since it may be of interest to you when building Whonix.</blockquote>
Sounds interesting!
<blockquote>I may not have much time in near future, so I am not sure when I can complete this task but will try to squeeze it in; maybe train myself to code while I am sleeping :)</blockquote>
Ha!  :)
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-01T15:50:54Z' class='post-time'>
                January 1, 2015,  3:50pm
              </time>
              <meta itemprop='dateModified' content='2015-01-01T15:50:54Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a href="../../../external.html?link=https://github.com/nrgaway/whonix-qubes/blob/master/etc/uwt.d/50_uwt_default">https://github.com/nrgaway/whonix-qubes/blob/master/etc/uwt.d/50_uwt_default</a> should be renamed.</p>
<p>I tried to come up with some convention.</p>
<p>20_upstream_distro (debian)<br>
30_whonix<br>
31_whonix_alternative_configs<br>
40_derivatives_based_on_whonix<br>
50_and_above_for_users</p>
<p>Maybe rename it to 32_uwt_qubes? Or got any better suggestions?</p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-01T15:59:50Z' class='post-time'>
                January 1, 2015,  3:59pm
              </time>
              <meta itemprop='dateModified' content='2015-01-01T15:59:50Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>What about renaming the folder <a href="../../../external.html?link=https://github.com/nrgaway/whonix-qubes/tree/master/usr/lib/whonix">https://github.com/nrgaway/whonix-qubes/tree/master/usr/lib/whonix</a> to [font=courier]/usr/lib/whonix-qubes[/font]?</p>
<p>Would help also with the conditional folder we need for:<br>
<a href="../../../external.html?link=https://www.whonix.org/forum/index.php/topic,839.0.html" class="onebox" target="_blank">https://www.whonix.org/forum/index.php/topic,839.0.html</a></p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-03T20:32:06Z' class='post-time'>
                January 3, 2015,  8:32pm
              </time>
              <meta itemprop='dateModified' content='2015-01-03T20:32:06Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“Patrick, post:7, topic:764”]What about renaming the folder <a href="../../../external.html?link=https://github.com/nrgaway/whonix-qubes/tree/master/usr/lib/whonix" rel="nofollow noopener">https://github.com/nrgaway/whonix-qubes/tree/master/usr/lib/whonix</a> to [font=courier]/usr/lib/whonix-qubes[/font]?</p>
<p>Would help also with the conditional folder we need for:<br>
<a href="../../../external.html?link=https://www.whonix.org/forum/index.php/topic,839.0.html%5B/quote%5D" class="onebox" target="_blank" rel="nofollow noopener">https://www.whonix.org/forum/index.php/topic,839.0.html[/quote]</a></p>
<p>I will rename the folder as well as the uwt rule, but not for this version.  This current version I want make as close to possible to what is already released since a change like renaming critical directories will require installation removal scripts.</p>
<p>If you want to know if Qubes is installed, I would use the /var/run/qubes conditional and you could then use /usr/lib/whonix-qubes for whonix-qubes confirmation.</p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-03T20:50:47Z' class='post-time'>
                January 3, 2015,  8:50pm
              </time>
              <meta itemprop='dateModified' content='2015-01-03T20:50:47Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="8" data-topic="764">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>I will rename the folder as well as the uwt rule, but not for this version.  This current version I want make as close to possible to what is already released since a change like renaming critical directories will require installation removal scripts.</p>
</blockquote>
</aside>
<p>Yes. Only talking about next version here. As in Whonix 10 and above. Such big changes should indeed not go into 9.x.</p>
<blockquote>If you want to know if Qubes is installed, I would use the /var/run/qubes conditional</blockquote>
Would not /usr/lib/qubes/ be better for that?
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-03T21:18:48Z' class='post-time'>
                January 3, 2015,  9:18pm
              </time>
              <meta itemprop='dateModified' content='2015-01-03T21:18:48Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Still reviewing… Still looking at the easy stuff.</p>
<p>[hr]</p>
<pre><code class="lang-auto">dist-build-dep::
	@sudo apt-get update
	@grep Build-Depends: debian/control | cut -d: -f 2- |\
	    sed -e 's/ *, */\n/g'| cut -d'(' -f 1 |tr -d " " |\
	    xargs sudo apt-get install -y</code></pre>
<p>This is a great addition. I would like to add this the generic “master” make file:<br>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/Makefile" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/Makefile" target="_blank" rel="nofollow noopener">Whonix/Whonix/blob/master/Makefile</a></h4>
<pre><code class="lang-">#!/usr/bin/make -f

## Copyright (C) 2012 - 2018 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## genmkfile - Makefile - version 1.7

## This is a copy.
## master location:
## https://github.com/Whonix/genmkfile/blob/master/usr/share/genmkfile/Makefile

.PHONY: about

GENMKFILE_NAME ?= makefile-full
GENMKFILE_BOOTSTRAP_ONE ?= ./packages/genmkfile/usr/share/genmkfile
GENMKFILE_BOOTSTRAP_TWO ?= ./usr/share/genmkfile
GENMKFILE_ROOT_DIR := $(dir $(abspath $(lastword $(MAKEFILE_LIST))))
GENMKFILE_CURRENT := $(CURDIR)/$(word $(words $(MAKEFILE_LIST)),$(MAKEFILE_LIST))

ifndef GENMKFILE_INCLUDE_FILE_MAIN
</code></pre>

  This file has been truncated. <a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/Makefile" target="_blank" rel="nofollow noopener">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>But with a small change. If one were to do this for all packages, it would be a waste always running “sudo apt-get update”.</p>
<p>Could you split this into two commands please? One that automatically runs “sudo apt-get update” and one that only apt-get installs?</p>
<p>Also slightly different names would be good if possible. Since it’s debian specific, “deb-pkg-update-build-dep”  and “deb-pkg-build-dep” or so would be good names?</p>
<p>[hr]</p>
<p>Did you modify make-helper.bsh? If not, can you update to <a href="../../../external.html?link=https://github.com/nrgaway/whonix-qubes/blob/master/make-helper.bsh">https://github.com/nrgaway/whonix-qubes/blob/master/make-helper.bsh</a> please?</p>
<p>[hr]</p>
<p>debian/control… This description would look a bit more consistent and nicer.</p>
<pre><code class="lang-auto">Description: Qubes Configuration for Whonix-Gateway and Whonix-Workstation
 This package contains all the scripts and configuration options to be able
 to run Whonix-Gateway and Whonix-Workstation within a Qubes environment.
 .
 Whonix-Gateway should run as a ProxyVM.
 .
 Whonix-Workstation should run as an AppVM.
 .
 Template updates over Tor.</code></pre>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-03T21:34:30Z' class='post-time'>
                January 3, 2015,  9:34pm
              </time>
              <meta itemprop='dateModified' content='2015-01-03T21:34:30Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>most likely you already know this… For changing the paths, I am using a mass search and replace editor such as jedit. Allows changing everything at once without manually forgetting about something.</p>
<p>[hr]</p>
<p>You probably already know this as well. In debian/whonix-qubes.preinst this should not be required for the same reason as setPermissions is not required. Just noting so it will not be forgotten.</p>
<pre><code class="lang-auto">    # --------------------------------------------------------------------------
    # Create required directories
    # --------------------------------------------------------------------------
    mkdir -p /var/lib/whonix/init
    chown -R root:root /usr/lib/whonix
    chmod -R u+rwX,go+rX /usr/lib/whonix</code></pre>
<p>[hr]</p>
<p>Why ship</p>
<ul>
<li>
<a href="../../../external.html?link=https://github.com/nrgaway/whonix-qubes/blob/master/etc/hostname">https://github.com/nrgaway/whonix-qubes/blob/master/etc/hostname</a> and</li>
<li>
<a href="../../../external.html?link=https://github.com/nrgaway/whonix-qubes/blob/master/etc/hosts">https://github.com/nrgaway/whonix-qubes/blob/master/etc/hosts</a><br>
?</li>
</ul>
<p>I think those are likely to conflict with anon-base-files (<a href="../../../external.html?link=https://github.com/Whonix/anon-base-files">https://github.com/Whonix/anon-base-files</a>), with</p>
<ul>
<li>
<a href="../../../external.html?link=https://github.com/Whonix/anon-base-files/blob/master/etc/hostname.anondist">https://github.com/Whonix/anon-base-files/blob/master/etc/hostname.anondist</a> and</li>
<li>
<a href="../../../external.html?link=https://github.com/Whonix/anon-base-files/blob/master/etc/hosts.anondist">https://github.com/Whonix/anon-base-files/blob/master/etc/hosts.anondist</a><br>
.</li>
</ul>
<p>Can you remove those from whonix-qubes package or are they required for something? I think at the moment those files are not in use anyhow. Due to anon-base-files use of config-package-dev and .anondist extension, those will take precedence.</p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-03T21:46:16Z' class='post-time'>
                January 3, 2015,  9:46pm
              </time>
              <meta itemprop='dateModified' content='2015-01-03T21:46:16Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>In debian/whonix-qubes.triggers you are writing twice.</p>
<pre><code class="lang-auto"></code></pre>
<p>Dunno if that could lead to issues. Unless it’s auto generated or some other reasons, I’d rather advice to play safe and remove one.</p>
<p>[hr]</p>
<p>I’ve never used triggers, but it’s most interesting. I see a potential issue here.</p>
<pre><code class="lang-auto"># Reset back to Whonix defaults
interest-noawait /etc/resolv.conf
interest-noawait /etc/hosts
interest-noawait /etc/hostname</code></pre>
<p>I think you might want to use /etc/resolv.conf.anondist instead. Because the file known to dpkg is<br>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/anon-gw-dns-conf/blob/master/etc/resolv.conf.anondist" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/anon-gw-dns-conf/blob/master/etc/resolv.conf.anondist" target="_blank" rel="nofollow noopener">Whonix/anon-gw-dns-conf/blob/master/etc/resolv.conf.anondist</a></h4>
<pre><code class="lang-anondist">## Copyright (C) 2012 - 2018 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## /etc/dhcp/dhclient-enter-hooks.d/nodnsupdate (package anon-gw-dhcp-conf) can
## prevent this file from getting overwritten by DHCP.
## If you want to disable that, run.
## sudo apt-get purge anon-gateway-dhcp-conf

## Torified DNS server for Gateway's own traffic.
nameserver 127.0.0.1

## Advanced users only!
## Only if you know what you are doing!
## If you do *not* want Gateway's own DNS
## (This has nothing to do with Workstation's DNS.)
## to be routed through Tor, but using clearnet DNS,
## use the VirtualBox DHCP server below
## and comment out the torified DNS server above.
#nameserver 10.0.2.3
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>
(or <a href="../../../external.html?link=https://github.com/Whonix/anon-ws-dns-conf/blob/master/etc/resolv.conf.anondist">https://github.com/Whonix/anon-ws-dns-conf/blob/master/etc/resolv.conf.anondist</a>).<br>
Moving /etc/resolv.conf out of the way and the symlink magic is done by config-package-dev. And I suppose that dpkg uses triggers on files it knows to manage. Probably not on dpkg-diverted files. But I might be wrong about this. I advice to actually test this if you want to make sure this really works.</p>
<p>Similarly, you might wish to use:</p>
<ul>
<li>/etc/hosts.anondist and</li>
<li>/etc/hostname.anondist<br>
for the same reasoning.</li>
</ul>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-03T21:48:56Z' class='post-time'>
                January 3, 2015,  9:48pm
              </time>
              <meta itemprop='dateModified' content='2015-01-03T21:48:56Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>This is unnecessary:</p>
<pre><code class="lang-auto"></code></pre>
<p>Shipping a file</p>
<pre><code class="lang-auto"></code></pre>
<p>or so could be a better way.</p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-03T22:06:50Z' class='post-time'>
                January 3, 2015, 10:06pm
              </time>
              <meta itemprop='dateModified' content='2015-01-03T22:06:50Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Instead of dynamically patching /usr/lib/anon-shared-helper-scripts/tor_bootstrap_check.bsh, what do you think about implementing some if/then magic into /usr/lib/anon-shared-helper-scripts/tor_bootstrap_check.bsh?</p>
<p>[hr]</p>
<p>Please add the <a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/CONTRIBUTING.md">https://github.com/Whonix/Whonix/blob/master/CONTRIBUTING.md</a> file to the source root folder unless there are objections.</p>
<p>[hr]</p>
<p>typos:</p>
<ul>
<li>annondist -&gt; anondist</li>
<li>accesss -&gt; access</li>
</ul>
<p>[hr]</p>
<pre><code class="lang-auto"></code></pre>
<p>I would be happy if we could add some suitable hook mechanism to whonix_firewall or add some if/then code to whonix_firewall to simplify that code. Sed injection doesn’t look future proof.</p>
<p>[hr]</p>
<p>Generally all the scripts could use some “set -e” or “trap -E error_handler ERR”. You don’t necessarily have to break execution on ERR, but at least a textual notification for unexpected non-zero exit codes would be useful.</p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-03T23:32:43Z' class='post-time'>
                January 3, 2015, 11:32pm
              </time>
              <meta itemprop='dateModified' content='2015-01-03T23:32:43Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The whonix-qubes packages uses a few [font=courier]Recommends:[/font]:<br>
</p><aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/nrgaway/qubes-whonix/blob/master/debian/control#L22" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/nrgaway/qubes-whonix/blob/master/debian/control#L22" target="_blank">nrgaway/qubes-whonix/blob/master/debian/control#L22</a></h4>
<pre class="onebox"><code class="lang-"><ol class="start lines" start="12" style="counter-reset: li-counter 11 ;">
<li>Maintainer: Jason Mehring &lt;nrgaway@gmail.com&gt;</li>
<li>Uploaders: Patrick Schleizer &lt;adrelanos@riseup.net&gt;</li>
<li>Build-Depends: debhelper (&gt;= 9), faketime, genmkfile, python, dh-systemd (&gt;= 1.5)</li>
<li>Homepage: https://github.com/Whonix/qubes-whonix</li>
<li>Vcs-Browser: https://github.com/Whonix/qubes-whonix</li>
<li>Vcs-Git: https://github.com/Whonix/qubes-whonix.git</li>
<li>Standards-Version: 3.9.6</li>
<li>
</li><li>Package: qubes-whonix</li>
<li>Architecture: all</li>
<li class="selected">Depends: qubes-core-agent (&gt;= 2.1.60), python-guimessages, whonix-setup-wizard, ethtool, initscripts, iptables, lintian, locales, net-tools, notify-osd, python, sudo, systemd, xen-utils-common, xinit, xsettingsd, xdg-user-dirs, ${misc:Depends}</li>
<li>Recommends: nautilus-open-terminal, gnome-packagekit, gnome-terminal, network-manager (&gt;= 0.8.1-1), network-manager-gnome</li>
<li>Description: Qubes Configuration for Whonix-Gateway and Whonix-Workstation</li>
<li> This package contains all the scripts and configuration options to be able</li>
<li> to run Whonix-Gateway and Whonix-Workstation within a Qubes environment.</li>
<li> .</li>
<li> Whonix-Gateway should run as a ProxyVM.</li>
<li> .</li>
<li> Whonix-Workstation should run as an AppVM.</li>
<li> .</li>
<li> Template updates over Tor.</li>
</ol></code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>This is fine. Other packages by the Whonix project do this as well. But… You you need to know it has little effect.</p>
<p>Whonix’s build script installs all packages using “apt-get --no-install-recommends”. Reasons for that are a bit weird and difficult, but explained here:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Whonix_Debian_Packages#Technical_Stuff" target="_blank" title="10:26PM - 23 November 2019">Whonix – 23 Nov 19</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:614/500;"><img src="../../../external.html?link=https://www.whonix.org/w/images/a/aa/Box-158523640.png" class="thumbnail" width="614" height="500"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Whonix_Debian_Packages#Technical_Stuff" target="_blank">Whonix Debian Packages - Whonix</a></h3>

<p>Which Whonix ™ Debian packages are safe to remove? What is a meta package? What other packages do Whonix ™ meta packages install? Which packages should never be removed? Why is package X installed?</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>So care to you get the [font=courier]Recommends:[/font] installed by default and plan to install the whonix-qubes package as part of [font=arial]build-steps.d/1700_install-packages[/font] or some <a href="../../../external.html?link=https://github.com/Whonix/anon-meta-packages/" data-bbcode="true">anon-meta-package</a>, then recommends would not be installed by default. We’d have to think of something. If you install it as part of the Qubes build process somehow without using --no-install-recommends then there will be no problem.</p>
<p>It’s just something to be aware of.</p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-04T01:25:48Z' class='post-time'>
                January 4, 2015,  1:25am
              </time>
              <meta itemprop='dateModified' content='2015-01-04T01:25:48Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“Patrick, post:10, topic:764”]Still reviewing… Still looking at the easy stuff.</p>
<p>[hr]</p>
<pre><code class="lang-auto">dist-build-dep::
	@sudo apt-get update
	@grep Build-Depends: debian/control | cut -d: -f 2- |\
	    sed -e 's/ *, */\n/g'| cut -d'(' -f 1 |tr -d " " |\
	    xargs sudo apt-get install -y</code></pre>
<p>This is a great addition. I would like to add this the generic “master” make file:<br>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/Makefile" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/Makefile" target="_blank" rel="nofollow noopener">Whonix/Whonix/blob/master/Makefile</a></h4>
<pre><code class="lang-">#!/usr/bin/make -f

## Copyright (C) 2012 - 2018 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## genmkfile - Makefile - version 1.7

## This is a copy.
## master location:
## https://github.com/Whonix/genmkfile/blob/master/usr/share/genmkfile/Makefile

.PHONY: about

GENMKFILE_NAME ?= makefile-full
GENMKFILE_BOOTSTRAP_ONE ?= ./packages/genmkfile/usr/share/genmkfile
GENMKFILE_BOOTSTRAP_TWO ?= ./usr/share/genmkfile
GENMKFILE_ROOT_DIR := $(dir $(abspath $(lastword $(MAKEFILE_LIST))))
GENMKFILE_CURRENT := $(CURDIR)/$(word $(words $(MAKEFILE_LIST)),$(MAKEFILE_LIST))

ifndef GENMKFILE_INCLUDE_FILE_MAIN
</code></pre>

  This file has been truncated. <a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/Makefile" target="_blank" rel="nofollow noopener">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>But with a small change. If one were to do this for all packages, it would be a waste always running “sudo apt-get update”.</p>
<p>Could you split this into two commands please? One that automatically runs “sudo apt-get update” and one that only apt-get installs?</p>
<p>Also slightly different names would be good if possible. Since it’s debian specific, “deb-pkg-update-build-dep”  and “deb-pkg-build-dep” or so would be good names?[/quote]</p>
<p>Yes I can do both</p>
<blockquote>Did you modify make-helper.bsh? If not, can you update to https://github.com/nrgaway/whonix-qubes/blob/master/make-helper.bsh please?</blockquote>
<p>I have been unable to get the newer make-helper.bsh play nice with Qubes builder.  I am looking into it more now.  I actually had to use the older script and remove epoch from changelog to get whonix-setup-wizard to build with qubes-builder (5 minutes ago I got it building at least).  I am limited to what Qubes currently supports.  Also Qubes does not support quilt format at the time, but I was able to get it to build anyway.</p>
<p>I will figure it out but I need to make sure I can build with both systems.</p>
<blockquote>debian/control... This description would look a bit more consistent and nicer.
<p><code>
Description: Qubes Configuration for Whonix-Gateway and Whonix-Workstation
 This package contains all the scripts and configuration options to be able
 to run Whonix-Gateway and Whonix-Workstation within a Qubes environment.
 .
 Whonix-Gateway should run as a ProxyVM.
 .
 Whonix-Workstation should run as an AppVM.
 .
 Template updates over Tor.
</code></p>
</blockquote>
<p>Hehe.  Yes it would.  I lack in being descriptive <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:">  Will change that too!</p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-04T17:50:49Z' class='post-time'>
                January 4, 2015,  5:50pm
              </time>
              <meta itemprop='dateModified' content='2015-01-04T17:50:49Z'>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Can you change the location from <a href="../../../external.html?link=https://github.com/nrgaway/qubes-whonix">https://github.com/nrgaway/qubes-whonix</a> to <a href="../../../external.html?link=https://github.com/nrgaway/whonix-qubes">https://github.com/nrgaway/whonix-qubes</a> please?</p>
<p>Because the package is called whonix-qubes as well and the name of the folder is used in scripts as package name. Would really simplify things. That might have been the issue with make-helper.bsh also.</p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-05T05:36:10Z' class='post-time'>
                January 5, 2015,  5:36am
              </time>
              <meta itemprop='dateModified' content='2015-01-05T05:36:10Z'>
          <span itemprop='position'>#18</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks for all the infos.  I am too tired to go though it all today but I will get to it in the next few days.</p>
<p>I implemented many of your suggestions already including moving away from the /usr/lib/whonix directory.  Qubes also has there own so I just picked a new one, based on how my systems unit files were named; /usr/lib/qubes-whonix. I changed the package name to match.</p>
<p>That Makefile scripts that installs dependencies won’t work when the depends span multiple lines.  I am kind of surprised how lacking good tools are for Debian.  I would have expected some easy to use command like Redhat has.  Anyway, today I threw together a short python script that should handle multiple lines.  I designed it so it will be able to parse pretty much anything from the control file.  I also need something to read changelog for proper version detection since the EPOC was messing up Qubes builder.  Hopefully that is sorted for now.</p>
<p><a href="../../../external.html?link=https://github.com/nrgaway/qubes-whonix" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-whonix</a>.</p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-05T10:04:23Z' class='post-time'>
                January 5, 2015, 10:04am
              </time>
              <meta itemprop='dateModified' content='2015-01-05T10:04:23Z'>
          <span itemprop='position'>#19</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>There is dpkg-parsechangelog. See also:<br>
<aside class="onebox stackexchange">
  <header class="source">
      <a href="../../../external.html?link=https://askubuntu.com/questions/332771/how-do-i-extract-the-package-version-from-debian-changelog/423534#423534" target="_blank">askubuntu.com</a>
  </header>
  <article class="onebox-body">
      <a href="../../../external.html?link=https://askubuntu.com/users/92147/martin-geisler" target="_blank">
    <img alt="Martin Geisler" src="../../../external.html?link=https://www.gravatar.com/avatar/6bf0300fc4a5c9012fd254d3da2a6e69?s=128&amp;d=identicon&amp;r=PG" class="thumbnail onebox-avatar" width="128" height="128">
  </a>
<h4>
  <a href="../../../external.html?link=https://askubuntu.com/questions/332771/how-do-i-extract-the-package-version-from-debian-changelog/423534#423534" target="_blank">How do I extract the package version from debian/changelog?</a>
</h4>

<div class="tags">
  <strong>packaging, deb, source-packages</strong>
</div>

<div class="date">
  
  answered by
  <a href="../../../external.html?link=https://askubuntu.com/users/92147/martin-geisler" target="_blank">
    Martin Geisler
  </a>
  on <a href="../../../external.html?link=https://askubuntu.com/questions/332771/how-do-i-extract-the-package-version-from-debian-changelog/423534#423534" target="_blank">08:07AM - 20 Feb 14 UTC</a>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>
I think once based on jessie, it will be improved.</p>
<p>It’s used by make-helper.bsh also.</p>
<p>make-helper.bsh can also be <code>source</code>d, it will do nothing then, but when you run make_get_variables it will set all the version numbers to variables it has parsed from debian/changelog.</p>
<p>Debian must have existing code to parse debian/control, no? Otherwise how is stuff like “apt-get build-dep” working?</p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="764.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-05T10:11:15Z' class='post-time'>
                January 5, 2015, 10:11am
              </time>
              <meta itemprop='dateModified' content='2015-01-05T10:11:15Z'>
          <span itemprop='position'>#20</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>How to install / parse build dependencies from debian/control?:<br>
<aside class="onebox stackexchange">
  <header class="source">
      <a href="../../../external.html?link=https://unix.stackexchange.com/questions/177505/how-to-install-parse-build-dependencies-from-debian-control" target="_blank">unix.stackexchange.com</a>
  </header>
  <article class="onebox-body">
      <a href="../../../external.html?link=https://unix.stackexchange.com/users/49297/adrelanos" target="_blank">
    <img alt="adrelanos" src="../../../external.html?link=https://www.gravatar.com/avatar/83f6805262f0dcc117814487c5b2d1c4?s=128&amp;d=identicon&amp;r=PG" class="thumbnail onebox-avatar" width="128" height="128">
  </a>
<h4>
  <a href="../../../external.html?link=https://unix.stackexchange.com/questions/177505/how-to-install-parse-build-dependencies-from-debian-control" target="_blank">How to install / parse build dependencies from debian/control?</a>
</h4>

<div class="tags">
  <strong>debian, command-line, package-management, packaging</strong>
</div>

<div class="date">
  asked by
  
  <a href="../../../external.html?link=https://unix.stackexchange.com/users/49297/adrelanos" target="_blank">
    adrelanos
  </a>
  on <a href="../../../external.html?link=https://unix.stackexchange.com/questions/177505/how-to-install-parse-build-dependencies-from-debian-control" target="_blank">10:10AM - 05 Jan 15 UTC</a>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>I’d ask some more Debian devs for existing tools. Probably we’re not the first ones ever on the internet that need this, no?</p>
        </div>

        <meta itemprop='headline' content='Qubes-whonix Debian package'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><b><a rel="next" itemprop="url" href="7644658.html?page=2">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
