<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Any limit to transparent proxy connections?</title>
    <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863</link>
    <description>Is there any limit that you will hit by having several different workstations (running arbitrary OSes) connecting through the same Whonix gateway via transparent proxying?

I ask because I&#39;ve got 4 VMs connecting through the gateway and the connectivity seems erratic, both for outgoing and incoming connections. For the outgoing connections, one machine will sometimes be unable to resolve names or to reach the outside Internet at all, for no obvious reason.

For incoming connections to one of my machines which is running a web server, which I try to access over Tor using the address configured on the gateway, and even though the web server is running perfectly locally, the Tor browser returns a 504 Gateway Time-out.

These problems are sporadic though, because sometimes it will randomly start working again, and it&#39;s not predictable which VM will be affected when. I&#39;ve had a VM running for a week trying every day to do an &quot;apt get update&quot; and it won&#39;t resolve the name of the apt archive, then suddenly out of the blue it works. Same with the incoming connections.

So it seems like I am hitting a resource limit somewhere, clogging up the gateway&#39;s ability to serve workstations via the transparent proxying. Is this possible?</description>
    <language>en</language>
    <lastBuildDate>Sun, 11 Mar 2018 00:31:15 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="1" data-topic="4863">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/ec9cab/40.png" class="avatar"> hs-hosting:</div>
<blockquote>
<p>Is there any limit that you will hit by having several different workstations (running arbitrary OSes) connecting through the same Whonix gateway via transparent proxying?</p>
</blockquote>
</aside>
<p>Try giving the GW more RAM in case Tor needs it though I doubt this is your problem which I will explain shortly.</p>
<aside class="quote" data-post="1" data-topic="4863">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/ec9cab/40.png" class="avatar"> hs-hosting:</div>
<blockquote>
<p>I ask because I’ve got 4 VMs connecting through the gateway and the connectivity seems erratic, both for outgoing and incoming connections. For the outgoing connections, one machine will sometimes be unable to resolve names or to reach the outside Internet at all, for no obvious reason.</p>
</blockquote>
</aside>
<p>Whonix uses static addresses because having a DHCP server running on the GW just opens up a huge security hole you can drive a truck thru.</p>
<p>When working with multi-WS you need to go in and manually assign different IPs to those workstations or you will see he behavior you reported an other weird things such as an intermittently working Tor Button in Tor Browser.</p>
<aside class="quote" data-post="15" data-topic="4863" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/ec9cab/40.png" class="avatar"> hs-hosting:</div>
<blockquote>
<p>Thanks for the suggestions. I haven’t had time to clone the Whonix-Workstations yet but the hypervisor is KVM. The template operating system that I am closing is a qcow2 disk image. The method of cloning them is using (a wrapper around the) virt-clone command from libvirt, which I think is why they end up with unique mac addresses; I am not using the graphical Virtual Machine Manager because Whonix and the workstations are running headless.</p>
</blockquote>
</aside>
<p>Indeed libvirt cloning takes care to assign unique MACs to avoid conflicts. I will check and update if there is a similar networking feature for IPs.</p>
<p>Good that you know KVM. Hats off for a user who knows what they’re doing.</p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/17</link>
        <pubDate>Sun, 11 Mar 2018 00:31:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-17</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>//cc <a class="mention" href="http://forums.whonix.org/u/hulahoop">@HulaHoop</a> (just FYI)</p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/16</link>
        <pubDate>Mon, 05 Mar 2018 23:32:07 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-16</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[hs-hosting]]></dc:creator>
        <description><![CDATA[
            <p>Thanks for the suggestions. I haven’t had time to clone the Whonix-Workstations yet but the hypervisor is KVM. The template operating system that I am closing is a qcow2 disk image. The method of cloning them is using (a wrapper around the) virt-clone command from libvirt, which I think is why they end up with unique mac addresses; I am not using the graphical Virtual Machine Manager because Whonix and the workstations are running headless.</p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/15</link>
        <pubDate>Sat, 03 Mar 2018 17:29:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-15</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[entr0py]]></dc:creator>
        <description><![CDATA[
            <p>Which hypervisor? How are you cloning images?</p>
<p>Conflicting HW (MAC) addresses?</p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/14</link>
        <pubDate>Fri, 02 Mar 2018 18:00:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-14</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>Hi <code>hs-hosting</code></p>
<aside class="quote" data-post="12" data-topic="4863">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/ec9cab/40.png" class="avatar"> hs-hosting:</div>
<blockquote>
<p>Usually because it’s a clone of the same OS image, which is a basic install of Debian stretch</p>
</blockquote>
</aside>
<p>Did you verify the ISO image?</p>
<aside class="quote" data-post="12" data-topic="4863">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/ec9cab/40.png" class="avatar"> hs-hosting:</div>
<blockquote>
<p>I’ve installed (just today) a brand new Debian VM to see if that would effect the previous Ubuntu one I was having problems with. It didn’t, but both of them are now suffering from the same problem</p>
</blockquote>
</aside>
<p>This VM you just created, did it have connectivity problems from the start or after a period of time?</p>
<hr>
<p>You should monitor your Tor logs not only when you are having connection problems but also when you’re not. See the difference…</p>
<aside class="quote" data-post="12" data-topic="4863">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/ec9cab/40.png" class="avatar"> hs-hosting:</div>
<blockquote>
<p>I’ve installed (just today) a brand new Debian VM to see if that would effect the previous</p>
</blockquote>
</aside>
<p>Continually recreating the VMs probably isn’t going to help find out what the problem is. Its possible it may not be an issue with your VMs. Could you please try creating/cloning 4 <a href="https://www.whonix.org/wiki/Multiple_Whonix-Workstations#Non-Qubes-Whonix">default Whonix-Workstations</a>, see if you have the same problems (just to check connectivity). This could rule out a Debian/Ubuntu VM issue if the problem still persists.</p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/13</link>
        <pubDate>Mon, 26 Feb 2018 10:56:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-13</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[hs-hosting]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>Are you always using the same address 10.152.152.20 for the problematic VM?</p>
</blockquote>
<p>No.</p>
<blockquote>
<p>Are you running the same exact software on all VMs?</p>
</blockquote>
<p>Usually because it’s a clone of the same OS image, which is a basic install of Debian stretch. Though in the most recent case I installed Ubuntu rather than Debian.</p>
<blockquote>
<p>After resolving does it stay that way. Problem free?</p>
</blockquote>
<p>That’s a good question and I really need to start keeping logs of these problems, because although I want to say “no”, I’m now doubting myself because above I confused a separate problem with web access to the VM with this networking problem. Definitely there have been recurring problems, but maybe they were just those web problems. So to be honest, I can’t say with complete certainty. I will have to make better notes from now on.</p>
<p>I’ve installed (just today) a brand new Debian VM to see if that would effect the previous Ubuntu one I was having problems with. It didn’t, but both of them are now suffering from the same problem. So that’s now two VMs affected at once.</p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/12</link>
        <pubDate>Sat, 24 Feb 2018 18:40:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-12</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>Hi <code>hs-hosting</code></p>
<aside class="quote" data-post="10" data-topic="4863">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/ec9cab/40.png" class="avatar"> hs-hosting:</div>
<blockquote>
<p>It seems to be whichever one I set up most recently.</p>
</blockquote>
</aside>
<ul>
<li>Are you always using the same address <code>10.152.152.20</code> for the problematic VM?</li>
<li>Are you running the same exact software on all VMs?</li>
</ul>
<aside class="quote" data-post="10" data-topic="4863">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/ec9cab/40.png" class="avatar"> hs-hosting:</div>
<blockquote>
<p>it almost always starts off with this problem before magically resolving itself some time later without any configuration changes.</p>
</blockquote>
</aside>
<p>After resolving does it stay that way. Problem free?</p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/11</link>
        <pubDate>Sat, 24 Feb 2018 03:07:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-11</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[hs-hosting]]></dc:creator>
        <description><![CDATA[
            <p>Thanks for your help with this.</p>
<blockquote>
<p>Just so I understand, this VM is the only one having this problem. Correct?</p>
</blockquote>
<p>Yes, but previously it has been different ones. It seems to be whichever one I set up most recently. When I set up a brand new VM, it almost always starts off with this problem before magically resolving itself some time later without any configuration changes.</p>
<blockquote>
<p>Do you have this problem when you run this VM by itself or just when running with other VMs?</p>
</blockquote>
<p>I’ve shut down the others to test that, and restarted the problematic one. It has made no difference.</p>
<blockquote>
<p>These VMs use different circuits (stream isolation), have you seen any problems in Tor/ Arm logs that could indicate why this is happening (i.e circuit collapsing etc.)?</p>
</blockquote>
<p>They are not Whonix workstations they are vanilla Debian/Ubuntu images, so I don’t think stream isolation is in effect. I am not seeing any error messages about circuits, though I am seeing (normal?) errors about “tried resolving or connecting to address ‘[scrubbed]’ at 3 different places, giving up”. Tor says that there are 43 circuits open.</p>
<blockquote>
<p>High load on your machine(s) when this happens…low resources?</p>
</blockquote>
<p>No, and I can reboot either the gateway or the workstation with no effect on the problem.</p>
<blockquote>
<p>Is this the machine that you could SSH but no HTTP ?</p>
</blockquote>
<p>I thought so, but I was wrong about that. The fact that the website wouldn’t load was unrelated. I was confusing two separate problems. And anyway no, this is a different machine now.</p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/10</link>
        <pubDate>Fri, 23 Feb 2018 18:01:51 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-10</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>Hi <code>hs-hosting</code></p>
<blockquote>
<p>I ping or make an HTTP request to any external IP address I don’t get anything.</p>
</blockquote>
<p>Tor does not support <code>ICMP</code> so ping will not work.</p>
<blockquote>
<p>The workstation’s network settings look like this:<br>
iface eth0 inet static<br>
address 10.152.152.20<br>
netmask 255.255.255.0<br>
gateway 10.152.152.10</p>
</blockquote>
<p>Looks good as long as <code>address 10.152.152.20</code> is unique among VMs</p>
<ul>
<li>Just so I understand, this VM is the only one having this problem. Correct?</li>
<li>Do you have this problem when you run this VM by itself or just when running with other VMs?</li>
<li>These VMs use different circuits (stream isolation), have you seen any problems in Tor/ <a href="https://www.whonix.org/wiki/Tor_Controller#Arm">Arm</a> logs that could indicate why this is happening (i.e circuit collapsing etc.)?</li>
<li>High load on your machine(s) when this happens…low resources?</li>
<li>Is this the machine that you could SSH but no HTTP ?</li>
</ul>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/9</link>
        <pubDate>Fri, 23 Feb 2018 02:26:51 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-9</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[hs-hosting]]></dc:creator>
        <description><![CDATA[
            <p>It’s happened again. The clock on the workstation and gateway are the same.</p>
<p>The workstation’s network settings look like this:</p>
<pre><code>iface eth0 inet static
  address 10.152.152.20
  netmask 255.255.255.0
  gateway 10.152.152.10
</code></pre>
<p>The DNS for the workstation is set to 10.152.152.10. When I ping the gateway I get replies. When I ping or make an HTTP request to any external IP address I don’t get anything.</p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/8</link>
        <pubDate>Thu, 22 Feb 2018 21:57:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-8</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[hs-hosting]]></dc:creator>
        <description><![CDATA[
            <p>Thanks for the suggestion, will check that next time.</p>
<p>Also, I’ve ruled out one of the problems that I observed as being related. Any time when there were problems with incoming web connections but not outgoing connections, that was due to an unrelated timeout in a PHP script. I figured that out by testing a plain HTML page, which worked.</p>
<p>Just thought I’d clear that up because this report was kind of misleading. Sorry about that. But the other problem (where one VM will suddenly be unable to reach the Internet or do DNS lookups through the gateway) is a real one which I will still need to solve, next time it happens. Thanks again for the clock jump tip.</p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/7</link>
        <pubDate>Wed, 21 Feb 2018 20:23:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-7</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Clock jumps?</p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/6</link>
        <pubDate>Wed, 21 Feb 2018 20:10:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-6</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[hs-hosting]]></dc:creator>
        <description><![CDATA[
            <p>Sorry for not being clear, but there is no inconsistency in the two messages. Out of the four VMs, at a given time usually one of them (unpredictably, it’s not always the same one) will have trouble with incoming and/or outgoing connections. So per your addendum above, it <em>does</em> affect other machines at random.</p>
<p>Then I went on to give two examples of this. In the apt-get example, one of the VMs will suddenly be unable to even resolve domain names, still less download anything, even though other identically configured VMs have no trouble doing so. In the case of the HTTP example, one VM will be inaccessible over the web even while other identically configured VMs are accessible. Then without any configuration change, those problems might resolve. Maybe I am wrong to write a single message about both problems but it seemed likely to me they would be related.</p>
<p>Edit: After reinstalling the machine that was currently having problems, they went away… so I’ll circle back if I can replicate this later. Anyway, you had answered my main question was that I wasn’t hitting any sort of connection limit on the gateway. Thanks!</p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/5</link>
        <pubDate>Wed, 21 Feb 2018 17:37:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-5</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>Hi <code>hs-hosting</code></p>
<aside class="quote" data-post="1" data-topic="4863">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/ec9cab/40.png" class="avatar"> hs-hosting:</div>
<blockquote>
<p>I ask because I’ve got 4 VMs connecting through the gateway and the connectivity seems erratic, both for outgoing and incoming connections.</p>
</blockquote>
</aside>
<p>First outgoing <strong>and</strong> incoming connections are erratic. Implies all 4 machines.</p>
<aside class="quote" data-post="1" data-topic="4863">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/ec9cab/40.png" class="avatar"> hs-hosting:</div>
<blockquote>
<p>For the outgoing connections, one machine will sometimes be unable to resolve names or to reach the outside Internet at all, for no obvious reason.</p>
</blockquote>
</aside>
<p>Now <strong>just</strong> outgoing connections. On <strong>one</strong> machine.</p>
<aside class="quote" data-post="1" data-topic="4863">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/ec9cab/40.png" class="avatar"> hs-hosting:</div>
<blockquote>
<p>These problems are sporadic though, because sometimes it will randomly start working again, and it’s not predictable which VM will be affected when</p>
</blockquote>
</aside>
<p>Then you say. “Its not predictable which VM with be affected”. So, this says the problem has been affecting <strong>all</strong> of your VMs.</p>
<p><strong>Second Post</strong></p>
<aside class="quote" data-post="3" data-topic="4863">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/ec9cab/40.png" class="avatar"> hs-hosting:</div>
<blockquote>
<p>My gateway has (of course) only one Tor daemon running. Yet out of the 4 VMs, only 1 of them is having any trouble.</p>
</blockquote>
</aside>
<p>I’m confused now.</p>
<aside class="quote" data-post="3" data-topic="4863">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/ec9cab/40.png" class="avatar"> hs-hosting:</div>
<blockquote>
<p>Also, on the VM that isn’t accessible via HTTP over Tor, it is still accessible via SSH over Tor.</p>
</blockquote>
</aside>
<p>Can you please clarify. You are having problems on just 1 VM? All of these problems only affect 1 specific VM.</p>
<p>Edit:</p>
<p>If you are having issues with just 1 and no other.</p>
<ol>
<li>
<p>Its not an issue with Whonix-Gateway since other VMs have no connectivity issues.</p>
</li>
<li>
<p>Its not an issue with “limit to transparent proxy connections”. If there was (a limit) it would affect other VMs at random.</p>
<p><strong>Test:</strong></p>
<p>If you run the problematic VM by itself, no other VMs running, does it still have the same problems?</p>
</li>
<li>
<p>Its likely a configuration issue with the problematic VM. DNS issue?</p>
</li>
</ol>
<p>In the future if asking for help try to be as specific as possible.</p>
<p><em>Exp.</em></p>
<p>Whonx-Gateway: Connects to Tor no problems</p>
<p>VM1:  Sporadic connectivity for outgoing/incoming connections. Not able to apt-get update .<br>
VM2:  Connects to websites, apt-get etc. no problems.<br>
VM3:  Not able to connect to anything (apt-get, web sites etc.).<br>
VM4:  Connects…</p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/4</link>
        <pubDate>Wed, 21 Feb 2018 11:14:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-4</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[hs-hosting]]></dc:creator>
        <description><![CDATA[
            <p>Thanks, that was valuable information. However, here’s why I have trouble accepting that Tor congestion is the only problem here:</p>
<p>My gateway has (of course) only one Tor daemon running. Yet out of the 4 VMs, only 1 of them is having any trouble. There are other VMs that are also running webservers, but which are reachable perfectly well.</p>
<p>Also, on the VM that isn’t accessible via HTTP over Tor, it is still accessible via SSH over Tor.</p>
<p>Also, I just set up a brand new Tor v3 address redirecting to a different IP address on the same VM, just in case the old address was the problem. That brand new, never-before-used v3 address also won’t load via HTTP over Tor, with the 504 Gateway Time-out error.</p>
<p>All of these things seem more like a problem between the workstation and the gateway than with a problem between the gateway and the Tor network. If you insist I’m wrong then I’ll take your word for it though…</p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/3</link>
        <pubDate>Wed, 21 Feb 2018 06:59:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-3</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>Hi <code>hs-hosting</code></p>
<blockquote>
<p>connectivity seems erratic, both for outgoing and incoming connections.</p>
</blockquote>
<blockquote>
<p>These problems are sporadic though, because sometimes it will randomly start working again, and it’s not predictable which VM will be affected when. I’ve had a VM running for a week trying every day to do an “apt get update” and it won’t resolve the name of the apt archive, then suddenly out of the blue it works. Same with the incoming connections.</p>
</blockquote>
<p>Unfortunately this is a common occurrence for many users weather using 1 VM or 4. Starting late last year until present, there has been very sizable <a href="https://lists.torproject.org/pipermail/tor-project/2017-December/001604.html">DDoS attack</a> on the Tor network. What you are experiencing; erratic/intermittent connectivity, trouble updating system ( <code>apt-get</code>) , is reported on the forums all to often as of late.</p>
<p>I think <code>torjunkie</code> summed it up the best…</p>
<blockquote>
<p>torjunkie</p>
<p>If you read through some Tor tickets or mailing lists, you see stories like:</p>
<p>Some form of exhaustion attack on guards in general, whereby the spooks are having clients form many multiple &gt;connections to particular nodes, and then collapsing them all of a sudden, and then recycling this behaviour. No doubt &gt;this overloads those (guard) nodes, leading to poor connectivity for normal users.</p>
<p>I also read reports whereby it’s suggested that malicious guard nodes will likely cut off / drop connections for &gt;normal users who aren’t part of a set of IP addresses that are (most probably) being targeted for end-end traffic &gt;correlation attacks. This is why people can also get shitty connections that drop out all the time, or circuits collapse &gt;etc.</p>
<p>(Think yourself lucky in the second case, since they don’t care about confirming your Whonix posts and porntube &gt;habits <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> )</p>
<p>All in all, the shitter my connection, the more confident I feel.</p>
<p>This is of course counter-balanced with the “frustration hypothesis”, whereby they may attempt to make your Tor &gt;browsing so intolerable, that you are tempted to shift to a pwned guard that they have control over, simply because &gt;they want to see what you’re up to with greater precision.</p>
</blockquote>
<p>This is a common occurrence. I think the best advice, hang in there and give the Tor devs more time to figure this out.  ( They always do ) And by continuing to use Tor, your telling whom ever is responsible for this, that we won’t give in. EVER!</p>
<p>Related…</p>
<p><a href="https://forums.whonix.org/t/internet-connection-drops">https://forums.whonix.org/t/internet-connection-drops</a><br>
<a href="https://metrics.torproject.org/userstats-bridge-version.html">https://metrics.torproject.org/userstats-bridge-version.html</a></p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/2</link>
        <pubDate>Wed, 21 Feb 2018 02:27:10 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-2</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
      <item>
        <title>Any limit to transparent proxy connections?</title>
        <dc:creator><![CDATA[hs-hosting]]></dc:creator>
        <description><![CDATA[
            <p>Is there any limit that you will hit by having several different workstations (running arbitrary OSes) connecting through the same Whonix gateway via transparent proxying?</p>
<p>I ask because I’ve got 4 VMs connecting through the gateway and the connectivity seems erratic, both for outgoing and incoming connections. For the outgoing connections, one machine will sometimes be unable to resolve names or to reach the outside Internet at all, for no obvious reason.</p>
<p>For incoming connections to one of my machines which is running a web server, which I try to access over Tor using the address configured on the gateway, and even though the web server is running perfectly locally, the Tor browser returns a 504 Gateway Time-out.</p>
<p>These problems are sporadic though, because sometimes it will randomly start working again, and it’s not predictable which VM will be affected when. I’ve had a VM running for a week trying every day to do an “apt get update” and it won’t resolve the name of the apt archive, then suddenly out of the blue it works. Same with the incoming connections.</p>
<p>So it seems like I am hitting a resource limit somewhere, clogging up the gateway’s ability to serve workstations via the transparent proxying. Is this possible?</p>
          <p><a href="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863/1</link>
        <pubDate>Tue, 20 Feb 2018 22:07:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4863-1</guid>
        <source url="http://forums.whonix.org/t/any-limit-to-transparent-proxy-connections/4863.rss">Any limit to transparent proxy connections?</source>
      </item>
  </channel>
</rss>
