<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Packaging libvirt files as debian package + unit test + CI</title>
    <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756</link>
    <description>We could package the libvirt files as a proper Debian package. What about moving the libvirt folder to packages/whonix-libvirt? The package (not the installation instructions on KVM wiki page) would could files to /usr/share/whonix-libvirt/xml/Whonix-Gateway_kvm.xml and so forth.

From user&#39;s perspective nothing would change compared to now. (!)

That package wouldn&#39;t be very useful for users. [As long as there is no Whonix Host Operating System (https://phabricator.whonix.org/T21) and perhaps never?]

Advantages:
- We could add a unit test file /usr/share/whonix-libvirt/unit_test that would import and remove the VM&#39;s to see if the xml&#39;s are working as expected. Eventually it would also use the xml validation tool.
- That unit test could be automatically run after each and every commit using CI (https://www.whonix.org/wiki/Dev/Continuous_Integration). Travis CI most likely. It&#39;s Ubuntu based, but that is still somewhat comparable to Debian. It would detect things such as missing quotes.
- Then we&#39;d have some more confirmation, that the xml files are Debian compatible.
- Getting the libvirt folder out of the main source code folder.
- Would make it easier to add a version number to the xml files. Since at the moment, they don&#39;t have version numbers. We could indicate, that the version number of the xml has been increased by using debian/changelog / `make deb-chl-bumpup`. We could have a unit test, that runs during the build process and breaks it when the version numbers of the xml files do not match debian/changelog&#39;s version number.
- Maybe some users would notice when that package gets updated, that libvirt files are now available in a higher version number.

What do you think?

One thing. whonix-libvirt might not be the best name for the package for trademark reasons (https://www.whonix.org/wiki/Dev/TPO_Trademark). Some are rather picky about it and I like to be one the very safe side to not have to rename it later. You know any good package name that does not include &quot;libvirt&quot; but at the same time doesn&#39;t limit it to kvm [because there is also qemu, in future perhaps more]?</description>
    <language>en</language>
    <lastBuildDate>Wed, 10 Feb 2016 17:35:13 +0000</lastBuildDate>
    <category>KVM</category>
    <atom:link href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>I removed a problematic setting from my testing but it may not be related to why CI still shows a failure. Based on what a forum user experienced and what I saw it should work for everybody now and we should ignore build failure warnings as bugs in the CI as before.</p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/26">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/26</link>
        <pubDate>Wed, 10 Feb 2016 17:35:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-26</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Any idea why the CI is failing? See build log:</p>
<p><a href="https://travis-ci.org/Whonix/whonix-libvirt/builds/108185404" class="onebox" target="_blank">https://travis-ci.org/Whonix/whonix-libvirt/builds/108185404</a></p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/25">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/25</link>
        <pubDate>Wed, 10 Feb 2016 02:21:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-25</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>I don’t know about rolling back any edits but I can tell you that my support policy applies to the current Debian stable only. Please upgrade to Jessie. There are many important changes (like better RNG support) that were not  supported by wheezy’s libvirt version.</p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/24">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/24</link>
        <pubDate>Sun, 30 Aug 2015 18:52:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-24</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[spinlocks]]></dc:creator>
        <description><![CDATA[
            <p>[quote=“Patrick, post:16, topic:756”]Tested using QEMU inside a VBox VM with Debian Jessie, because I don’t have a host with Debian Jessie at the moment. Therefore I cannot test KVM.</p>
<p><code>virsh -c qemu:///system start Whonix-Gateway
error: Failed to start domain Whonix-Gateway
error: unsupported configuration: host doesn't support paravirtual spinlocks
</code></p>
<p>After removing</p>
<pre><code class="lang-auto"></code></pre>
<p>VM was bootable.</p>
<p>So I guess it should be removed for all QEMU xml files for better compatibly.[/quote]</p>
<aside class="quote" data-post="18" data-topic="756">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>[quote]So I guess it should be removed for all QEMU xml files for better compatibly.</p>
</blockquote>
</aside>
<p>But pvspinlock is supported on the newer libvirt in Jessie. Debian stable is almost Jessie. I will remove it of course if the problem still persists on Jessie. Are you saying that its not compatible with the qemu xmls only? To be clear here when I say qemu I am talking about the pure emulator mode and not kvm.</p>
<p>converting xml to qemu arguments works with me.[/quote]</p>
<p>Why you beletin me wiggy edits, holms? I had this same problem on Wheezy but when I edit the wiki with a link to this page the changes were not accepted. What are we supposed to do, go back to VirtualBox or upgrade to Jessie? I don’t know what “converting xml to qemu arguments” means. Does Whonix not support Wheezy anymore?</p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/23</link>
        <pubDate>Sat, 29 Aug 2015 22:19:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-23</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>CI fixed:<br>
<a href="https://travis-ci.org/Whonix/whonix-libvirt/builds/63722387" class="onebox" target="_blank">https://travis-ci.org/Whonix/whonix-libvirt/builds/63722387</a></p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/22</link>
        <pubDate>Fri, 22 May 2015 23:07:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-22</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <blockquote>The errors complain that qemu-kvm cannot be installed on the CI server.</blockquote>
Yes.
<blockquote>Unrelated. Can you please not merge and instead close all the recent pull requests to libvirt XML? I don't think the changes are worth the extra maintenance.</blockquote>
Yes, very true. Done.
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/21</link>
        <pubDate>Fri, 22 May 2015 13:41:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-21</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>The errors complain that qemu-kvm cannot be installed on the CI server.</p>
<p>Unrelated. Can you please not merge and instead close all the recent pull requests to libvirt XML? I don’t think the changes are worth the extra maintenance.</p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/20</link>
        <pubDate>Fri, 22 May 2015 02:05:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-20</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>For the record, last CI build was broken:</p>
<ul>
<li><a href="https://travis-ci.org/Whonix/whonix-libvirt">https://travis-ci.org/Whonix/whonix-libvirt</a></li>
<li><a href="https://travis-ci.org/Whonix/whonix-libvirt/builds/60788588">https://travis-ci.org/Whonix/whonix-libvirt/builds/60788588</a></li>
</ul>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/19</link>
        <pubDate>Thu, 21 May 2015 18:24:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-19</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <blockquote>So I guess it should be removed for all QEMU xml files for better compatibly.</blockquote>
<p>But pvspinlock is supported on the newer libvirt in Jessie. Debian stable is almost Jessie. I will remove it of course if the problem still persists on Jessie. Are you saying that its not compatible with the qemu xmls only? To be clear here when I say qemu I am talking about the pure emulator mode and not kvm.</p>
<p>converting xml to qemu arguments works with me.</p>
<hr>
<pre><code class="lang-auto"></code></pre>
<p>This error is directly related to power management settings:</p>

    
    
  
<p>Try and see if removing this section in the xml makes it work. I know for a fact VirtualBox does not have suspend mode available inside it for the guest acpi. It could be libvirt is seeing this unsupported on its “host” (the inside of VirtualBox) and is failing the vml because it doesn’t have this “host” capability.</p>
<p>Hard to say without testing on Jessie baremetal.</p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/18</link>
        <pubDate>Sat, 20 Dec 2014 22:12:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-18</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Added using “virsh domxml-to-native” to unit_test for debug output:<br>
</p><aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/whonix-libvirt/commit/4bcac51b264b9d78042899be005e4c06549224ab" target="_blank">github.com/Whonix/whonix-libvirt</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/whonix-libvirt/commit/4bcac51b264b9d78042899be005e4c06549224ab" target="_blank">unit test: use "virsh domxml-to-native qemu-argv"</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2014-12-20" data-time="19:11:07" data-timezone="UTC">07:11PM - 20 Dec 14 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 13 additions and 0 deletions">
        <a href="https://github.com/Whonix/whonix-libvirt/commit/4bcac51b264b9d78042899be005e4c06549224ab" target="_blank">
          <span class="added">+13</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>

  </div>
</div>




  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<p>It works for QEMU, for example “virsh domxml-to-native qemu-argv ./usr/share/whonix-libvirt/xml/Whonix-Gateway_qemu.xml” works. But it fails for KVM.</p>
<pre><code class="lang-auto">virsh domxml-to-native qemu-argv ./usr/share/whonix-libvirt/xml/Whonix-Gateway_kvm.xml</code></pre>
<pre><code class="lang-auto">error: unsupported configuration: setting ACPI S3 not supported</code></pre>
<p>Any idea? Does it work when you do that on your local disk?</p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/17</link>
        <pubDate>Sat, 20 Dec 2014 19:45:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-17</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Tested using QEMU inside a VBox VM with Debian Jessie, because I don’t have a host with Debian Jessie at the moment. Therefore I cannot test KVM.</p>
<p><code>virsh -c qemu:///system start Whonix-Gateway
error: Failed to start domain Whonix-Gateway
error: unsupported configuration: host doesn't support paravirtual spinlocks
</code></p>
<p>After removing</p>
<pre><code class="lang-auto"></code></pre>
<p>VM was bootable.</p>
<p>So I guess it should be removed for all QEMU xml files for better compatibly.</p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/16</link>
        <pubDate>Sat, 20 Dec 2014 19:02:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-16</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>I downloaded libvirt/kvm inside whonix from jessie repos and I can see what you describe. I started removing all the recent settings then eventually major parts of everything else, but the error keeps coming up. I think somehing is wrong with virt-xml-validate. I’ll be sure if the xml files allow a whonix guest to boot normally on a debian host. Can you please check if it does?</p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/15</link>
        <pubDate>Sat, 20 Dec 2014 17:54:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-15</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="13" data-topic="756">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>I’m running libvirt 1.2.9 here and the files validate fine on my host.</p>
</blockquote>
</aside>
<p>Ubuntu vivid contains 1.2.8. Debian jessie contains 1.2.9.</p>
<p>Same problem outside of CI on a Debian jessie system. (libvirt-bin 1.2.9-6)</p>
<p><code>virt-xml-validate Whonix-Gateway_qemu.xml 
Relax-NG validity error : Extra element devices in interleave
Whonix-Gateway_qemu.xml:32: element devices: Relax-NG validity error : Element domain failed to validate content
Whonix-Gateway_qemu.xml fails to validate</code></p>
<blockquote>What I found about the error is its caused by the kernel lacking bridge support for some reason. Either they don't have bridge-utils package installed or there is some other bug in that package:</blockquote>
The bridge-utils package is installed as per build log (https://s3.amazonaws.com/archive.travis-ci.org/jobs/44612408/log.txt). The CI's kernel could be the issue. It's running in a OpenVZ VM, that comes with some limitations.
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/14</link>
        <pubDate>Sat, 20 Dec 2014 16:17:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-14</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>I’m running libvirt 1.2.9 here and the files validate fine on my host.</p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/13</link>
        <pubDate>Sat, 20 Dec 2014 02:34:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-13</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <blockquote>error: Unable to create bridge virbr1: Package not installed</blockquote>
<p>What I found about the error is its caused by the kernel lacking bridge support for some reason. Either they don’t have bridge-utils package installed or there is some other bug in that package:</p>
<p><a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=542447" class="onebox" target="_blank">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=542447</a><br>
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=524880" class="onebox" target="_blank">https://bugzilla.redhat.com/show_bug.cgi?id=524880</a></p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/12</link>
        <pubDate>Sat, 20 Dec 2014 02:14:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-12</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Apart from the remaining issues, the log looks quite useful already.  <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p><a href="https://travis-ci.org/Whonix/whonix-libvirt/builds/44612407" class="onebox" target="_blank">https://travis-ci.org/Whonix/whonix-libvirt/builds/44612407</a></p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/11</link>
        <pubDate>Fri, 19 Dec 2014 20:29:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-11</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Workaround works.</p>
<p>Using more recent versions from Ubuntu vivid now. (<a href="http://packages.ubuntu.com/vivid/qemu-kvm">http://packages.ubuntu.com/vivid/qemu-kvm</a>) Solved some issues. virsh define and virsh undefine is now functional!  <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> Two more issues.</p>
<p>Log:<br>
<a href="https://travis-ci.org/Whonix/whonix-libvirt/builds/44609513" class="onebox" target="_blank">https://travis-ci.org/Whonix/whonix-libvirt/builds/44609513</a></p>
<p>net-start issue.</p>
<p>[code]virsh -c qemu:///system net-start Whonix</p>
<p>error: Failed to start network Whonix</p>
<p>error: Unable to create bridge virbr1: Package not installed[/code]</p>
<p>virt-xml-validate issue.</p>
<pre><code class="lang-auto">virt-xml-validate ./usr/share/whonix-libvirt/xml/Whonix-Gateway_kvm.xml

Relax-NG validity error : Extra element devices in interleave

./usr/share/whonix-libvirt/xml/Whonix-Gateway_kvm.xml:32: element devices: Relax-NG validity error : Element domain failed to validate content</code></pre>
<p>Any idea how to solve these?</p>
<p>Can you try virt-xml-validate locally please?</p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/10</link>
        <pubDate>Fri, 19 Dec 2014 19:47:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-10</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="7" data-topic="756">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>[quote]Could be because of their Ubuntu version. (<a href="http://docs.travis-ci.com/user/ci-environment/">http://docs.travis-ci.com/user/ci-environment/</a>) (Ubuntu 12.04 LTS)</p>
</blockquote>
</aside>
<p>Ok 12.04 is old in libvirt terms and so things like hypervclock are till not recognized and will trigger errors like it has done.[/quote]<br>
We might also be able to mix with versions from higher Ubuntu repositories. Just needs to be scripted.</p>
<p>[quote=“HulaHoop, post:8, topic:756”]A reason for the error could be group permissions:</p>
<p>[code]virsh -c qemu:///system net-define ./usr/share/whonix-libvirt/xml/Whonix_network.xml</p>
<p>error: Failed to connect socket to ‘/var/run/libvirt/libvirt-sock’: Permission denied</p>
<p>error: failed to connect to the hypervisor[/code]</p>
<p><a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Virtualization_Host_Configuration_and_Guest_Installation_Guide/Sect_Failed_to_connect_socket.html%5B/quote%5D" class="onebox" target="_blank">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Virtualization_Host_Configuration_and_Guest_Installation_Guide/Sect_Failed_to_connect_socket.html[/quote]</a><br>
One thing we cannot do, because unsupported by CI: reboot.</p>
<p>Testing workaround.</p>
<pre><code class="lang-auto"></code></pre>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/9</link>
        <pubDate>Fri, 19 Dec 2014 18:18:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-9</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>A reason for the error could be group permissions:</p>
<p>[code]virsh -c qemu:///system net-define ./usr/share/whonix-libvirt/xml/Whonix_network.xml</p>
<p>error: Failed to connect socket to ‘/var/run/libvirt/libvirt-sock’: Permission denied</p>
<p>error: failed to connect to the hypervisor[/code]</p>
<p><a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Virtualization_Host_Configuration_and_Guest_Installation_Guide/Sect_Failed_to_connect_socket.html" class="onebox" target="_blank">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Virtualization_Host_Configuration_and_Guest_Installation_Guide/Sect_Failed_to_connect_socket.html</a></p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/8</link>
        <pubDate>Fri, 19 Dec 2014 15:52:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-8</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <blockquote>Could be because of their Ubuntu version. (http://docs.travis-ci.com/user/ci-environment/) (Ubuntu 12.04 LTS)</blockquote>
<p>Ok 12.04 is old in libvirt terms and so things like hypervclock are till not recognized and will trigger errors like it has done.</p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/7</link>
        <pubDate>Fri, 19 Dec 2014 15:33:10 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-7</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <blockquote>Dunno if it's possible to fix this one on CI:</blockquote>
<p>If there is an existing network on your system with the same name you will get errors like these. Thats what I saw in my experience.</p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/6</link>
        <pubDate>Fri, 19 Dec 2014 15:20:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-6</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Done:</p>
<ul>
<li><a href="https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/unit_test">https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/unit_test</a></li>
<li><a href="https://travis-ci.org/Whonix/whonix-libvirt">https://travis-ci.org/Whonix/whonix-libvirt</a></li>
</ul>
<p>Dunno if it’s possible to fix this one on CI:<br>
<a href="https://travis-ci.org/Whonix/whonix-libvirt/builds/44553778" class="onebox" target="_blank">https://travis-ci.org/Whonix/whonix-libvirt/builds/44553778</a></p>
<p>[code]virsh -c qemu:///system net-define ./usr/share/whonix-libvirt/xml/Whonix_network.xml</p>
<p>error: Failed to connect socket to ‘/var/run/libvirt/libvirt-sock’: Permission denied</p>
<p>error: failed to connect to the hypervisor<br>
[/code]</p>
<p>Deactivated for now.</p>
<p>Therefore set to only use virt-xml-validate for now.</p>
<p><a href="https://travis-ci.org/Whonix/whonix-libvirt/builds/44554060" class="onebox" target="_blank">https://travis-ci.org/Whonix/whonix-libvirt/builds/44554060</a></p>
<p>[code]+virt-xml-validate ./usr/share/whonix-libvirt/xml/Whonix_network.xml</p>
<p>./usr/share/whonix-libvirt/xml/Whonix_network.xml validates</p>
<p>+virt-xml-validate ./usr/share/whonix-libvirt/xml/Whonix-Gateway_kvm.xml</p>
<p>Relax-NG validity error : Extra element clock in interleave</p>
<p>./usr/share/whonix-libvirt/xml/Whonix-Gateway_kvm.xml:18: element clock: Relax-NG validity error : Element domain failed to validate content</p>
<p>./usr/share/whonix-libvirt/xml/Whonix-Gateway_kvm.xml fails to validate</p>
<p>The command “./usr/share/whonix-libvirt/unit_test” exited with 3.<br>
[/code]</p>
<p>Could be because of their Ubuntu version. (<a href="http://docs.travis-ci.com/user/ci-environment/">http://docs.travis-ci.com/user/ci-environment/</a>) (Ubuntu 12.04 LTS)</p>
<p>Maybe you got any idea about this or like to experiment with CI.</p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/5</link>
        <pubDate>Fri, 19 Dec 2014 09:18:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-5</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Done:<br>
</p><aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/Whonix/commit/e89636a422f53f726ba83871a127371e4adb691e" target="_blank">github.com/Whonix/Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/Whonix/commit/e89636a422f53f726ba83871a127371e4adb691e" target="_blank">moved libvirt folder to its own package https://github.com/Whonix/whonix-libvirt</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2014-12-19" data-time="08:46:29" data-timezone="UTC">08:46AM - 19 Dec 14 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 10 files with 8 additions and 387 deletions">
        <a href="https://github.com/Whonix/Whonix/commit/e89636a422f53f726ba83871a127371e4adb691e" target="_blank">
          <span class="added">+8</span>
          <span class="removed">-387</span>
        </a>
      </div>
    </div>

  </div>
</div>




  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<p>Initial implementation:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">
      <a href="https://github.com/Whonix/whonix-libvirt" target="_blank">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="https://avatars3.githubusercontent.com/u/4500165?s=400&amp;v=4" class="thumbnail onebox-avatar" width="400" height="400">

<h3><a href="https://github.com/Whonix/whonix-libvirt" target="_blank">Whonix/whonix-libvirt</a></h3>

<p>Whonix Libvirt XML Files for KVM - https://www.whonix.org/wiki/KVM - Whonix/whonix-libvirt</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<p>TODO:</p>
<ul>
<li>unit test</li>
<li>CI</li>
</ul>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/4</link>
        <pubDate>Fri, 19 Dec 2014 08:53:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-4</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Hm. Any package name not including “libvirt” seems like a mess.</p>
<p>For VirtualBox there is one package called “vbox-disable-timesync”. For libvirt, I don’t think that there is any meaningful comparable contraction.</p>
<p>I guess let’s use whonix-libvirt, then ask them if that is considered fair use. Could you relay a message please when the package has been created?</p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/3</link>
        <pubDate>Fri, 19 Dec 2014 07:22:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-3</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
      <item>
        <title>Packaging libvirt files as debian package + unit test + CI</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <blockquote>What do you think?</blockquote>
<p>Sounds great.</p>
<p>For names how about any of these?<br>
whonix-virt-api<br>
whonix-modes<br>
whonix-multi</p>
          <p><a href="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756/2</link>
        <pubDate>Thu, 18 Dec 2014 16:28:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-756-2</guid>
        <source url="http://forums.whonix.org/t/packaging-libvirt-files-as-debian-package-unit-test-ci/756.rss">Packaging libvirt files as debian package + unit test + CI</source>
      </item>
  </channel>
</rss>
