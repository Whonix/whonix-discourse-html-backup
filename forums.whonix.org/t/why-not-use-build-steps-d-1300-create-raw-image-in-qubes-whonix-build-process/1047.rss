<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Why not use build-steps.d/1300_create-raw-image in qubes-whonix build process?</title>
    <link>http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047</link>
    <description>Why not use https://github.com/Whonix/Whonix/blob/master/build-steps.d/1300_create-raw-image during the qubes-whonix build process?

That is how Whonix raw images are usually build.

Anything wrong with it?

Because Qubes Builder somehow expects using the Qubes base Debian base image and doesn&#39;t like a &quot;I do all the base image creation, mounting and whatever else until competition&quot; for you way?</description>
    <language>en</language>
    <lastBuildDate>Tue, 07 Jul 2015 16:07:03 +0000</lastBuildDate>
    <category>Qubes-Whonix</category>
    <atom:link href="http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Why not use build-steps.d/1300_create-raw-image in qubes-whonix build process?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Brought up a similar suggestion.</p>
<blockquote>rely on existing tool for Debian base image creation</blockquote>
https://github.com/QubesOS/qubes-issues/issues/1055
          <p><a href="http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047/6</link>
        <pubDate>Tue, 07 Jul 2015 16:07:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1047-6</guid>
        <source url="http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047.rss">Why not use build-steps.d/1300_create-raw-image in qubes-whonix build process?</source>
      </item>
      <item>
        <title>Why not use build-steps.d/1300_create-raw-image in qubes-whonix build process?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>[quote=“MemoryLost, post:1, topic:1046”]in fact…<br>
IMHO we should  disclose a good old unmaintained version through regular community / public template system;<br>
and have a nice secured anonymous hardened etc etc version accessible to developers .<br>
guess my point her?.. ;)[/quote]<br>
Split here:<br>
<a href="https://www.whonix.org/forum/index.php/topic,1379.0.html" class="onebox" target="_blank">https://www.whonix.org/forum/index.php/topic,1379.0.html</a></p>
          <p><a href="http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047/5</link>
        <pubDate>Fri, 03 Jul 2015 11:43:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1047-5</guid>
        <source url="http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047.rss">Why not use build-steps.d/1300_create-raw-image in qubes-whonix build process?</source>
      </item>
      <item>
        <title>Why not use build-steps.d/1300_create-raw-image in qubes-whonix build process?</title>
        <dc:creator><![CDATA[nrgaway]]></dc:creator>
        <description><![CDATA[
            <p>[quote=“Patrick, post:1, topic:1047”]Why not use <a href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/1300_create-raw-image" rel="nofollow noopener">https://github.com/Whonix/Whonix/blob/master/build-steps.d/1300_create-raw-image</a> during the qubes-whonix build process?</p>
<p>That is how Whonix raw images are usually build.</p>
<p>Anything wrong with it?</p>
<p>Because Qubes Builder somehow expects using the Qubes base Debian base image and doesn’t like a “I do all the base image creation, mounting and whatever else until competition” for you way?[/quote]</p>
<p>That’s funny.  I was just thinking the same thing yesterday when I was having package dependency issues for Whonix 11.  Since I solved the issue by installing Whonix first, I did not need to proceed any further.</p>
<p>Since I figured you may be interested in the complete build process, I have provided most of the scripts that are called in order of being called to create Whonix template.  I authored all of them except <code>prepare_image</code> and <code>qubeize_image</code>:</p>
<p>Shared Libraries:<br>
<a href="https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/vars.sh" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/vars.sh</a><br>
<a href="https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/distribution.sh" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/distribution.sh</a><br>
<a href="https://github.com/nrgaway/qubes-linux-template-builder/blob/master/functions.sh" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-linux-template-builder/blob/master/functions.sh</a></p>
<p>Prepare Image:<br>
<a href="https://github.com/nrgaway/qubes-linux-template-builder/blob/master/prepare_image" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-linux-template-builder/blob/master/prepare_image</a></p>
<p>Manage snapshots<br>
<a href="https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/00_prepare.sh" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/00_prepare.sh</a></p>
<p>Install Debootstrap<br>
<a href="https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/01_install_core.sh" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/01_install_core.sh</a></p>
<p>Install Extra Debian Packages<br>
<a href="https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/02_install_groups_jessie.sh" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/02_install_groups_jessie.sh</a></p>
<p>Install Whonix.  <code>02_install_groups_pre.sh</code> is what I used for Whonix 11, <code>02_install_groups_wheezy.sh</code> for Whonix 9.6 and 10<br>
<a href="https://github.com/nrgaway/qubes-template-whonix/blob/Whonix11/whonix-gateway/02_install_groups_pre.sh" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-template-whonix/blob/Whonix11/whonix-gateway/02_install_groups_pre.sh</a><br>
<a href="https://github.com/nrgaway/qubes-template-whonix/blob/master/whonix-gateway/02_install_groups_wheezy.sh" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-template-whonix/blob/master/whonix-gateway/02_install_groups_wheezy.sh</a></p>
<p>Install any specific package that are for distribution (Since certain distros may need special handling… These routines can build wheezy, jessie, whonix, trusty, utopic and vivid at the moment)<br>
<a href="https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/02_install_groups_jessie.sh" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/02_install_groups_jessie.sh</a></p>
<p>Create a copy of prepared image to add qubes components and settings.  Kind of a snapshot so the above does not need to be re-run if only updating Qubes packages.<br>
<a href="https://github.com/nrgaway/qubes-linux-template-builder/blob/master/qubeize_image" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-linux-template-builder/blob/master/qubeize_image</a></p>
<p>Actual script to install packages, modify settings<br>
<a href="https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/04_install_qubes.sh" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/04_install_qubes.sh</a></p>
<p>Whonix script; restores apt-get, etc back to Whonix state<br>
<a href="https://github.com/nrgaway/qubes-template-whonix/blob/master/whonix-gateway/04_install_qubes_post.sh" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-template-whonix/blob/master/whonix-gateway/04_install_qubes_post.sh</a></p>
<p>Cleanup steps<br>
<a href="https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/09_cleanup.sh" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-builder-debian/blob/master/template_debian/09_cleanup.sh</a><br>
<a href="https://github.com/nrgaway/qubes-template-whonix/blob/master/whonix-gateway/09_cleanup_post.sh" data-bbcode="true" rel="nofollow noopener">https://github.com/nrgaway/qubes-template-whonix/blob/master/whonix-gateway/09_cleanup_post.sh</a></p>
          <p><a href="http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047/4</link>
        <pubDate>Mon, 27 Apr 2015 22:01:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1047-4</guid>
        <source url="http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047.rss">Why not use build-steps.d/1300_create-raw-image in qubes-whonix build process?</source>
      </item>
      <item>
        <title>Why not use build-steps.d/1300_create-raw-image in qubes-whonix build process?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>I see. Makes sense.</p>
          <p><a href="http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047/3</link>
        <pubDate>Mon, 27 Apr 2015 16:11:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1047-3</guid>
        <source url="http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047.rss">Why not use build-steps.d/1300_create-raw-image in qubes-whonix build process?</source>
      </item>
      <item>
        <title>Why not use build-steps.d/1300_create-raw-image in qubes-whonix build process?</title>
        <dc:creator><![CDATA[WhonixQubes]]></dc:creator>
        <description><![CDATA[
            <p>I haven’t looked at all the details in code, but the QubesBuilder is taking care of a number of things to make paravirtualized TemplateVMs that are seamless with Qubes OS.</p>
<ul>
<li>Qubes APT Repos</li>
<li>Qubes Tools (qrexec, etc)</li>
<li>Multiple Disk Partitionings</li>
<li>RPM Installer Packaging</li>
<li>etc</li>
</ul>
<p>I believe the QubesBuilder now has a Plugin API architecture, where the Qubes Debian template build configuration comes from a Debian Plugin and then a Whonix Plugin build configuration extends on top of that.</p>
<ul>
<li>
<p>QubesBuilder:   <a href="https://github.com/QubesOS/qubes-builder" rel="nofollow noopener">https://github.com/QubesOS/qubes-builder</a></p>
</li>
<li>
<p>QubesBuilder Debian Plugin:  <a href="https://github.com/QubesOS/qubes-builder-debian" rel="nofollow noopener">https://github.com/QubesOS/qubes-builder-debian</a></p>
</li>
<li>
<p>QubesBuilder Whonix Plugin:  <a href="https://github.com/marmarek/qubes-template-whonix" rel="nofollow noopener">https://github.com/marmarek/qubes-template-whonix</a></p>
</li>
</ul>
<p>So the current method is probably getting its own Debian image, configuring it for Qubes, then later the Whonix install-to-root stuff is done on it.</p>
          <p><a href="http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047/2</link>
        <pubDate>Mon, 27 Apr 2015 15:37:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1047-2</guid>
        <source url="http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047.rss">Why not use build-steps.d/1300_create-raw-image in qubes-whonix build process?</source>
      </item>
      <item>
        <title>Why not use build-steps.d/1300_create-raw-image in qubes-whonix build process?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Why not use <a href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/1300_create-raw-image">https://github.com/Whonix/Whonix/blob/master/build-steps.d/1300_create-raw-image</a> during the qubes-whonix build process?</p>
<p>That is how Whonix raw images are usually build.</p>
<p>Anything wrong with it?</p>
<p>Because Qubes Builder somehow expects using the Qubes base Debian base image and doesn’t like a “I do all the base image creation, mounting and whatever else until competition” for you way?</p>
          <p><a href="http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047/1</link>
        <pubDate>Mon, 27 Apr 2015 14:29:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1047-1</guid>
        <source url="http://forums.whonix.org/t/why-not-use-build-steps-d-1300-create-raw-image-in-qubes-whonix-build-process/1047.rss">Why not use build-steps.d/1300_create-raw-image in qubes-whonix build process?</source>
      </item>
  </channel>
</rss>
