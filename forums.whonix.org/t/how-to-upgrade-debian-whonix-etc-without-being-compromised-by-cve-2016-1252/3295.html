<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>How to upgrade Debian, Whonix, etc. without being compromised by CVE-2016-1252 - News - Whonix Forum</title>
    <meta name="description" content="Originally published at:			https://www.whonix.org/blog/cve-2016-1252 
 See: 
https://www.whonix.org/wiki/CVE-2016-1252">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="3295.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;How to upgrade Debian, Whonix, etc. without being compromised by CVE-2016-1252&#39;" href="3295.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/how-to-upgrade-debian-whonix-etc-without-being-compromised-by-cve-2016-1252/3295" />
<meta name="twitter:url" content="https://forums.whonix.org/t/how-to-upgrade-debian-whonix-etc-without-being-compromised-by-cve-2016-1252/3295" />
<meta property="og:title" content="How to upgrade Debian, Whonix, etc. without being compromised by CVE-2016-1252" />
<meta name="twitter:title" content="How to upgrade Debian, Whonix, etc. without being compromised by CVE-2016-1252" />
<meta property="og:description" content="Originally published at:			https://www.whonix.org/blog/cve-2016-1252   See:  https://www.whonix.org/wiki/CVE-2016-1252" />
<meta name="twitter:description" content="Originally published at:			https://www.whonix.org/blog/cve-2016-1252   See:  https://www.whonix.org/wiki/CVE-2016-1252" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 ‚ù§" />
<meta property="article:published_time" content="2016-12-15T23:02:16+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="3295.html">How to upgrade Debian, Whonix, etc. without being compromised by CVE-2016-1252</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/news/21.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>News</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/important-news.html' class='discourse-tag' rel="tag">important-news</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3295.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-15T23:02:16Z' class='post-time'>
                December 15, 2016, 11:02pm
              </time>
              <meta itemprop='dateModified' content='2018-06-24T00:13:46Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><small>Originally published at:			<a href="../../../external.html?link=https://www.whonix.org/blog/cve-2016-1252">https://www.whonix.org/blog/cve-2016-1252</a><br>
</small><br>See:<a href="../../../external.html?link=https://www.whonix.org/wiki/CVE-2016-1252"><br>
https://www.whonix.org/wiki/CVE-2016-1252</a></p>
        </div>

        <meta itemprop='headline' content='How to upgrade Debian, Whonix, etc. without being compromised by CVE-2016-1252'>
          <meta itemprop='keywords' content='important-news'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3295.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-21T13:24:56Z' class='post-time'>
                December 21, 2016,  1:24pm
              </time>
              <meta itemprop='dateModified' content='2016-12-21T13:24:56Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Based on Qubes Security Bulletin <span class="hashtag">#28</span>, isn‚Äôt the safest advice to reinstall the Debian and Whonix templates from scratch using the steps below?</p>
<p>Assume the worst and hope for the best? Always go full Ripley:</p>
<blockquote>
<p>‚ÄúNuke the entire site [Debian/Whonix Templates] from orbit‚Äìit‚Äôs the only way to be sure‚Äù</p>
</blockquote>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/QubesOS/qubes-secpack/blob/master/QSBs/qsb-028-2016.txt" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/QubesOS/qubes-secpack/blob/master/QSBs/qsb-028-2016.txt" target="_blank" rel="nofollow noopener">QubesOS/qubes-secpack/blob/master/QSBs/qsb-028-2016.txt</a></h4>
<pre><code class="lang-txt">

             ---===[ Qubes Security Bulletin #28 ]===---

                          December 19, 2016


                Debian update mechanism vulnerability


Quick Summary
==============

The Debian Security Team has announced a security bug (DSA-3733-1) in
the signature verification of repository metadata, which could lead to
privilege escalation [1] within a Debian-based VM. This bug does _not_
allow escape from any VM or enable any attacks on other parts of the
Qubes system. In particular, this bug does _not_ affect dom0, the Xen
hypervisor, and non-Debian-based VMs. Nevertheless, we have decided to
release this bulletin, because if a TemplateVM is affected, then every
</code></pre>

  This file has been truncated. <a href="../../../external.html?link=https://github.com/QubesOS/qubes-secpack/blob/master/QSBs/qsb-028-2016.txt" target="_blank" rel="nofollow noopener">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Important bits:</p>
<blockquote>
<p><strong>Impact</strong></p>
</blockquote>
<blockquote>
<p>In theory, this bug allows an attacker to take over any Debian 8 or  Debian 9 template (which includes Whonix templates [3]) and,  consequently, any VMs based on those templates. However, for the  reasons explained above, the configuration used in Qubes OS happens to make this bug hard to exploit. Nevertheless, one should never underestimate the creativity of exploit authors, and thus one should assume that the bug is exploitable and patch immediately, just to stay on the safe side.</p>
</blockquote>
<blockquote>
<p>&amp;</p>
</blockquote>
<blockquote>
<p><strong>Patching</strong></p>
</blockquote>
<blockquote>
<p>As the bug affects Debian-based templates themselves, just applying updates may not be enough, if those VMs are already compromised.  Users, especially those using Debian-based VMs for sensitive tasks, should remove all affected templates and install fresh ones. This also applies to any customized Debian-based templates. Users with customized Debian-based templates should first note their  customizations, remove the potentially compromised templates, install fresh templates, clone them, and reapply their customizations to the cloned templates.</p>
</blockquote>
<blockquote>
<p>The procedure for removing affected templates and installing fresh ones is documented as the ‚ÄúManual Reinstallation Method‚Äù in the Qubes documentation on reinstalling TemplateVMs [5]. (Please note that the simplified template reinstallation method described in the documentation, which uses <code>--action=reinstall</code>, is not sufficient, since it will download the old, vulnerable template.)</p>
</blockquote>
<blockquote>
<p>Fixed APT packages are included in templates listed below:</p>
</blockquote>
<blockquote>
<p>For Qubes 3.2:</p>
<ul>
<li>qubes-template-debian-8-3.0.6-201612171620</li>
<li>qubes-template-whonix-gw-3.0.6-201612182342</li>
<li>qubes-template-whonix-ws-3.0.6-201612190628</li>
</ul>
</blockquote>
<blockquote>
<p>For Qubes 3.1:</p>
<ul>
<li>qubes-template-debian-8-3.0.6-201612171837</li>
<li>qubes-template-whonix-gw-3.0.6-201612190009</li>
<li>qubes-template-whonix-ws-3.0.6-201612190633</li>
</ul>
</blockquote>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.qubes-os.org/attachment/icons/512x512/apps/qubes-logo-icon.png" class="site-icon" width="500" height="500">
      <a href="../../../external.html?link=https://www.qubes-os.org/doc/reinstall-template/#manual-reinstallation-method" target="_blank" rel="nofollow noopener">Qubes OS</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="../../../external.html?link=https://www.qubes-os.org/attachment/icons/qubes-logo-icon-name-slogan-fb.png" class="thumbnail"></div>

<h3><a href="../../../external.html?link=https://www.qubes-os.org/doc/reinstall-template/#manual-reinstallation-method" target="_blank" rel="nofollow noopener">How to Reinstall a TemplateVM</a></h3>

<p>How to Reinstall a TemplateVM  If you suspect your TemplateVM is broken, misconfigured, or compromised, you can reinstall any TemplateVM that was installed from the Qubes repository.  The procedure...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<blockquote>
<p><strong>(1)</strong> (Optional) Clone the existing target TemplateVM.</p>
</blockquote>
<blockquote>
<p>This can be a good idea if you‚Äôve customized the existing template and want to keep your customizations. On the other hand, if you suspect that this template is broken, misconfigured, or compromised, you may want to remove it without cloning it.</p>
</blockquote>
<blockquote>
<p><strong>(2)</strong> Create a temporary dummy template:</p>
</blockquote>
<blockquote>
<p>mkdir /var/lib/qubes/vm-templates/dummy<br>
touch /var/lib/qubes/vm-templates/dummy/{root.img,private.img}<br>
qvm-add-template dummy</p>
</blockquote>
<blockquote>
<p><strong>(3)</strong> Temporarily change all VMs based on the target TemplateVM to the new dummy template, or remove them.</p>
</blockquote>
<blockquote>
<p>This can be a good idea if you have user data in these VMs that you want to keep. On the other hand, if you suspect that these VMs (or the templates on which they are based) are broken, misconfigured, or compromised, you may want to remove them instead. You can do this in Qubes Manager by right-clicking on the VM and clicking Remove VM, or you can use the command qvm-remove  in dom0.</p>
</blockquote>
<blockquote>
<p>Using a dummy template as a temporary template is preferable to using another real TemplateVM because you can‚Äôt accidentally boot any VMs from the dummy template. (There is no OS in the dummy template, so the boot will fail.)</p>
</blockquote>
<blockquote>
<p><strong>(4)</strong> Uninstall the target TemplateVM from dom0:</p>
</blockquote>
<blockquote>
<p>$ sudo yum remove </p>
</blockquote>
<blockquote>
<p>For example, to uninstall the whonix-gw template:</p>
</blockquote>
<blockquote>
<p>$ sudo yum remove qubes-template-whonix-gw</p>
</blockquote>
<blockquote>
<p><strong>(5)</strong> Reinstall the target TemplateVM in dom0:</p>
</blockquote>
<blockquote>
<p>$ sudo qubes-dom0-update --enablerepo= \ </p>
</blockquote>
<blockquote>
<p>For example, to install the whonix-gw template:</p>
</blockquote>
<blockquote>
<p>$ sudo qubes-dom0-update --enablerepo=qubes-templates-community \ qubes-template-whonix-gw</p>
</blockquote>
<blockquote>
<p><strong>(6)</strong> If you temporarily changed all VMs based on the target TemplateVM to the dummy template in step 3, change them back to the new target TemplateVM now. If you instead removed all VMs based on the old target TemplateVM, you can recreate your desired VMs from the newly reinstalled target TemplateVM now.</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='How to upgrade Debian, Whonix, etc. without being compromised by CVE-2016-1252'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
