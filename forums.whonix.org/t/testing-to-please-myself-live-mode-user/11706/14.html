<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Testing (to please myself) Live Mode User - #14 by Patrick - Support - Whonix Forum</title>
    <meta name="description" content="Already some time since I tried Whonix. The feature I still use on a daily basis is the Live Mode (of the host) via Grub-Live. Now I got the idea that I want to verify for myself that the live mode is doing what I always&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../11706.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Testing (to please myself) Live Mode User&#39;" href="../11706.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/testing-to-please-myself-live-mode-user/11706/14" />
<meta name="twitter:url" content="https://forums.whonix.org/t/testing-to-please-myself-live-mode-user/11706/14" />
<meta property="og:title" content="Testing (to please myself) Live Mode User" />
<meta name="twitter:title" content="Testing (to please myself) Live Mode User" />
<meta property="og:description" content="There is a feature, which gets into the way here:    It’s a puzzle. For live mode, we don’t want that feature. Can it be disabled?    If you can find a way to disable it, I’ll think about how to do this by default (in live mode). It looks like it’s not possible but please search more.  It’s related to the superblock.  https://www.slashroot.in/understanding-file-system-superblock-linux    Mount time   It’s a puzzle because there are many ways in theory to solve it. Either by disabling recording o..." />
<meta name="twitter:description" content="There is a feature, which gets into the way here:    It’s a puzzle. For live mode, we don’t want that feature. Can it be disabled?    If you can find a way to disable it, I’ll think about how to do this by default (in live mode). It looks like it’s not possible but please search more.  It’s related to the superblock.  https://www.slashroot.in/understanding-file-system-superblock-linux    Mount time   It’s a puzzle because there are many ways in theory to solve it. Either by disabling recording o..." />
<meta property="article:published_time" content="2021-06-01T08:49:13+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../11706.html">Testing (to please myself) Live Mode User</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/support/5.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #8C6238'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Support</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/rk1'><span itemprop='name'>rk1</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-23T18:55:34Z' class='post-time'>
                May 23, 2021,  6:55pm
              </time>
              <meta itemprop='dateModified' content='2021-05-23T18:55:34Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Already some time since I tried Whonix. The feature I still use on a daily basis is the Live Mode (of the host) via Grub-Live. Now I got the idea that I want to verify for myself that the live mode is doing what I always hoped it was doing: preventing persistance of changes to my disk. So I want to make a system image, do a checksum, work on the system, re-image and recalculate the checksum and test for equality. Ideally I should not have to ask you how to go about this, on the other hand maybe I do not fully understand what I am doing, so I ask you: is this a good approach to testing if the live mode is indeed doing what I think it is doing?<br>
Can I make such an image with clonezilla on a usb stick? What utility do you recommend for the checksums?</p>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../whonix-live-mode-amnesia-amnesic-non-persistent-anti-forensics/3894/231.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../whonix-live-mode-amnesia-amnesic-non-persistent-anti-forensics/3894/231.html'>
                      <span itemprop='name'>Whonix live mode / amnesia / amnesic / non-persistent / anti-forensics</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../whonix-live-testers-wanted/6291/7.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../whonix-live-testers-wanted/6291/7.html'>
                      <span itemprop='name'>Whonix LIVE - Testers Wanted!</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-24T06:05:46Z' class='post-time'>
                May 24, 2021,  6:05am
              </time>
              <meta itemprop='dateModified' content='2021-05-24T06:05:46Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>See this chapter:<br>
<a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/Technical_Introduction#Anti-forensic_Claims">Anti-forensic Claims</a></p>
<ol>
<li>Create an image of the disk using <code>dd</code>. [1]</li>
<li>Checksum it with any tool. sha256, sha512, …</li>
<li>Boot into host live mode.</li>
<li>Create another image of the disk using <code>dd</code>.</li>
<li>Create another checksum.</li>
<li>Compare the checksums.</li>
</ol>
<p>That way the whole disk can be compared. Including changes to files / things which might be overlooked (bootloader, partition table, free space, deleted files not in any manifest).</p>
<p>If checksum was different, we’d only know that something changed. But not exactly what. In that case, indeed it might be easier to have checksums (or even copies) of all individual files.</p>
<hr>
<p>[1] Could be deleted after creating checksum if you’re on low disk space but then later if there where differences, it couldn’t be compared what changed.</p>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/rk1'><span itemprop='name'>rk1</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-24T15:09:02Z' class='post-time'>
                May 24, 2021,  3:09pm
              </time>
              <meta itemprop='dateModified' content='2021-05-24T15:09:02Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Ok, I put Debian on an usb stick, booted from that usb, checked with lsblk that the drive I wanted to check (sda) was unmounted, and dd’ed an image to a second usb-drive. Then I exited, booted again like normal in my ‘live mode user’ in my main drive (sda), did some work (1. sudo apt upgrade, 2. deleted some /va/log files 3. connected to a vpn, and then to the internet 4. emptied the trash in Files 5. wrote a LibreOffice text, 6. connected an encrypted external usb drive and that was about it). I shutdown. Booted again with my usb-stick, checked that sda was unmounted, dd’ed a second image to the external usb drive. Took a sha256sum from both images, compared, and found… that they were not equal.<br>
I wrote up my doings quite literally so you can see that probably I did not make a procedural mistake. The checksums should have been the same, but weren’t. (I must say that sda when unmounted is encrypted, but that is not the problem, is it?)<br>
So, what can I do? I cannot really live with this state of affairs. But compare all individual files seems a too daunting task. There must be a more clever way to go about it. Divide the files in user files, system files, other divisions maybe. I ask what you think might be the most fruitful way of dealing with this. Because this may potentially be a very time consuming investigation.</p>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-25T08:51:21Z' class='post-time'>
                May 25, 2021,  8:51am
              </time>
              <meta itemprop='dateModified' content='2021-05-25T09:56:38Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="rk1" data-post="3" data-topic="11706">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9f8e36/40.png" class="avatar"> rk1:</div>
<blockquote>
<p>sudo apt upgrade</p>
</blockquote>
</aside>
<p>Separate /boot partition?</p>
<p>/boot in separate partition not covered. Tested just now. Created a file <code>/boot/test</code> which persisted after boot. Therefore also not covered because these are symlinks to <code>/boot</code>.</p>
<ul>
<li><code>/initrd.img</code></li>
<li><code>/initrd.img.old</code></li>
<li><code>/vmlinuz</code></li>
<li><code>/vmlinuz.old</code></li>
</ul>
<p>/home/user/test and /etc/test was gone after reboot.</p>
<p>Probably also not covered:</p>
<ul>
<li>Partition management tools such as gparted.</li>
<li>Changes to partition table.</li>
<li>Changes to bootloader (<code>grub-install</code>).</li>
</ul>
<p><code>sudo update-grub</code> and <code>sudo update-initramfs -u</code> do not work in live mode. These shouldn’t result in modifications on the disk.</p>
<aside class="quote no-group" data-username="rk1" data-post="3" data-topic="11706">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9f8e36/40.png" class="avatar"> rk1:</div>
<blockquote>
<p>(I must say that sda when unmounted is encrypted, but that is not the problem, is it?)</p>
</blockquote>
</aside>
<p>Encryption might make analysis harder but goal is to make that work of course too.</p>
<aside class="quote no-group" data-username="rk1" data-post="3" data-topic="11706">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9f8e36/40.png" class="avatar"> rk1:</div>
<blockquote>
<p>Ok, I put Debian on an usb stick, booted from that usb, checked with lsblk that the drive I wanted to check (sda) was unmounted,</p>
</blockquote>
</aside>
<p>Good, because if the disk gets (auto) mounted and modified, then of course checksums would be different. Since encrypted however, I don’t think there could be any auto mounting. Well, except for /boot but I haven’t heard of any auto mount + auto modifications.</p>
<aside class="quote no-group" data-username="rk1" data-post="3" data-topic="11706">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9f8e36/40.png" class="avatar"> rk1:</div>
<blockquote>
<p>So, what can I do?</p>
</blockquote>
</aside>
<p>Reproduce the issue without involving the <code>grub-live</code> package for simplicity and to get access to upstream support.</p>
<aside class="onebox githubfolder">
  <header class="source">
      <img src="../../../../external.html?link=https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">

      <a href="../../../../external.html?link=https://github.com/Whonix/grub-live" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/345;"><img src="../../../../external.html?link=https://opengraph.githubassets.com/4893f8442006485156c0f6891926c963fde9f65c93b67a0feeb0ce0420d68e8f/Whonix/grub-live" class="thumbnail" width="690" height="345"></div>

<h3><a href="../../../../external.html?link=https://github.com/Whonix/grub-live" target="_blank" rel="noopener">Whonix/grub-live</a></h3>


  <p><span class="label1">optional grub live boot menu entry as second option https://www.whonix.org/wiki/Grub-live</span></p>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p><code>grub-live</code> is just a means to easily setup existing functionality created by upstream.</p>
<p>At time of writing it installs the following packages as per <code>debian/control</code> file:</p>
<pre><code>live-boot live-boot-initramfs-tools live-tools
</code></pre>
<p>Most importantly, installs this file:</p>
<p><a href="../../../../external.html?link=https://github.com/Whonix/grub-live/blob/master/etc/grub.d/11_linux_live">/etc/grub.d/11_linux_live</a></p>
<p>And eventually, file <code>debian/grub-live.postinst</code> effectively results in running:</p>
<pre><code>sudo update-grub
</code></pre>
<p>That’s it. For anything more, try contacting upstream.</p>
<aside class="quote no-group" data-username="rk1" data-post="3" data-topic="11706">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9f8e36/40.png" class="avatar"> rk1:</div>
<blockquote>
<p>But compare all individual files seems a too daunting task.</p>
</blockquote>
</aside>
<p>It has to be scripted of course. That reduces the manual labor. Replaces impossible manual labor with medium difficulty scripting. It’s been done. [1]</p>
<aside class="quote no-group" data-username="rk1" data-post="3" data-topic="11706">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9f8e36/40.png" class="avatar"> rk1:</div>
<blockquote>
<p>Divide the files in user files, system files, other divisions maybe.</p>
</blockquote>
</aside>
<p>Maybe “just” the “apt-update” broke it as said above. Because if you create/modify a file in /etc/ or /home/user/ folders in live mode, these are gone after reboot, right?</p>
<p><code>vbindiff</code> might give insights.</p>
<p>[1] <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/help-steps/analyze_image">analyze_image</a> was previously used to reduce non-determinism (related to <code>reproducible builds</code> / <code>verifiable builds</code>) in two different Whonix builds. It creates all the sha512sum files and more in a report folder. When running this twice (for different images), these can be compared (such as using <code>meld</code> and/or <code>kdiff3</code>).</p>
<p>analyze_image requires an unencrypted image. cryptsetup luksOpen would probably suffice.</p>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/rk1'><span itemprop='name'>rk1</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-25T19:21:51Z' class='post-time'>
                May 25, 2021,  7:21pm
              </time>
              <meta itemprop='dateModified' content='2021-05-25T19:21:51Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi Patrick, thanks for responding. I am reading your answer several times, but have some difficulty understanding what you mean.</p>
<ol>
<li>
<p>You say: Separate /boot partition? You suggest that persistent changes occur in /boot, so by creating a separate /boot partition, we can more easily establish that the rest of the system remains unchanged?<br>
1b) my whole system is now in one big partition. Can I rearrange that setup with my current system or does a separate /boot partition require that I reinstall my whole system anew?</p>
</li>
<li>
<p>Reproduce the issue without involving the grub-live package. Haha, yes, nice. You mean I should somehow get a ramdisk loaded like what you have in de grub-live menu entry: linux	/vmlinuz-4.19.0-16-amd64 root=/dev/disk/by-uuid/d89995f1-7a5f-4292-b0d5-8ec000b06184 ro  boot=live plainroot union=overlay ip=frommedia noeject nopersistence quiet</p>
</li>
</ol>
<p>Just so that upstream will not report the case back to you… But I am a bit in the dark how I should accomplish that.</p>
<ol start="3">
<li>
<p>The file debian/grub-live.postinst. Where can I find that file?</p>
</li>
<li>
<p>Maybe “just” the “apt-update” broke it. Ok, that is a good first starting point. I can check it again but this time no apt updates. I will do that tomorrow.</p>
</li>
<li>
<p>If persistent changes in “live”  only occur with apt update/upgrade I might conclude that the changes do not mean a security hazard, right?</p>
</li>
<li>
<p>Lastly I might try analyze_image. I still have the 2 images by dd. Can I ‘cryptsetup luksOpen’ these two, you mean, running from my separate usb-debian?</p>
</li>
</ol>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-26T07:52:37Z' class='post-time'>
                May 26, 2021,  7:52am
              </time>
              <meta itemprop='dateModified' content='2021-05-26T07:52:37Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<ol>
<li>You say: Separate /boot partition? You suggest that persistent changes occur in /boot,</li>
</ol>
</blockquote>
<p>Yes.</p>
<blockquote>
<p>so by creating a separate /boot partition, we can more easily establish that the rest of the system remains unchanged?</p>
</blockquote>
<p>No.</p>
<p>I am just saying /boot isn’t protected from modifications.</p>
<blockquote>
<p>1b) my whole system is now in one big partition. Can I rearrange that setup with my current system or does a separate /boot partition require that I reinstall my whole system anew?</p>
</blockquote>
<p>I don’t think you don’t have a separate /boot partition. In other words:<br>
you probably already have a separate /boot partition. Recommended to<br>
check with partition manager gparted. Actually non-trivial to encrypt<br>
/boot. You need to follow a manual to do that. Not a default feature<br>
unfortunately yet anywhere as far as I know.</p>
<blockquote>
<ol start="2">
<li>Reproduce the issue without involving the grub-live package. Haha, yes, nice. You mean I should somehow get a ramdisk loaded like what you have in de grub-live menu entry: linux	/vmlinuz-4.19.0-16-amd64 root=/dev/disk/by-uuid/d89995f1-7a5f-4292-b0d5-8ec000b06184 ro  boot=live plainroot union=overlay ip=frommedia noeject nopersistence quiet</li>
</ol>
</blockquote>
<p>By doing what the grub-live package does, you don’t have to manually<br>
enter any uuid.</p>
<blockquote>
<p>Just so that upstream will not report the case back to you…</p>
</blockquote>
<blockquote>
<p>But I am a bit in the dark how I should accomplish that.</p>
</blockquote>
<p>In other words, while grub-live was a great contribution to simplify the<br>
setup, it didn’t invent the Debian live packages mentioned in my<br>
previous post. That’s upstream. That’s providing everything you need.<br>
grub-live doesn’t give you anything you couldn’t get from Debian on your<br>
own.</p>
<blockquote>
<ol start="3">
<li>The file debian/grub-live.postinst. Where can I find that file?</li>
</ol>
</blockquote>
<p>In the grub-live git repository.</p>
<blockquote>
<ol start="4">
<li>Maybe “just” the “apt-update” broke it. Ok, that is a good first starting point. I can check it again but this time no apt updates. I will do that tomorrow.</li>
</ol>
</blockquote>
<p>Great!</p>
<blockquote>
<ol start="5">
<li>If persistent changes in “live”  only occur with apt update/upgrade I might conclude that the changes do not mean a security hazard, right?</li>
</ol>
</blockquote>
<p>Yes.</p>
<p>Related: root compromise could re-mount the disk read/write anyhow, do<br>
selective changes. A related concept:</p>
<aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">

      <a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/boot_modes" target="_blank" rel="noopener" title="01:34PM - 01 December 2020">Whonix – 1 Dec 20</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="../../../../external.html?link=https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" class="thumbnail" width="690" height="362"></div>

<h3><a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/boot_modes" target="_blank" rel="noopener">Dev/boot modes</a></h3>

  <p>Persistent User / Live user / Persistent Secureadmin / Persistent Superadmin / Persistent Recovery Mode</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>As per above concept, it would be more secure anyhow to only boot with a<br>
user rights, unable to gain root.</p>
<p>Once sudo/root is used, grub-live can be circumvented through /boot and<br>
other other things mentioned in my previous post (partition table).</p>
<p>Maybe someone (or upstream) has an idea how to protect /boot and/or<br>
other things but ultimately without physical disk write protection it<br>
will always be imperfect against sudo/root (use or compromise). That’s<br>
already documented.</p>
<blockquote>
<ol start="6">
<li>Lastly I might try analyze_image. I still have the 2 images by dd. Can I ‘cryptsetup luksOpen’ these two, you mean, running from my separate usb-debian?</li>
</ol>
</blockquote>
<p>Once you have unencrypted dd images (or any (raw) image), analyze_image<br>
can be used from anywhere. Even normal production system. There is no<br>
need for a special environment. But there are some problems coming to<br>
mind…</p>
<p>crytsetup luksOpen gives you “only” a /dev/mapper/… device. I am not<br>
sure that’s essentially the same as a unencrypted raw image. Would guess<br>
so. dd reading from /dev/mapper to file should give a real raw image but<br>
might not be needed (saving disk space).</p>
<p>analyze_image was developed to analyze Whonix images. Whonix base images<br>
are created using grml-debootstrap. Which doesn’t use multiple<br>
partitions. I.e. creates no separate /boot partition. analyze_image<br>
doesn’t support multiple partitions which are default when installing<br>
using Debian (probably based too) installer(s). Therefore analyze_image<br>
probably won’t work. analyze_image at time of writing lacks two features:</p>
<ul>
<li>encrypted images support (otherwise cryptsetup luksOpen is already<br>
difficult)</li>
<li>multiple partition / separate /boot partition support</li>
</ul>
<p>I am not aware of any other tool that can do that.</p>
<p>Your options:</p>
<ul>
<li>search if there is another tool for this task (reproducible builds<br>
project might have such as sub project)</li>
<li>contribute to analyze_image</li>
<li>wait for reproducible builds project to create such a tool</li>
</ul>
<p>That latter could take years if not decades. I guess reproducible builds<br>
project creates reproducible repository packages, then reproducible<br>
installed packages, then reproducible Debian installer ISO and only<br>
eventually reproducible Debian VM images. Why Debian VM images matter?<br>
Because when comparing two host dd images (which are raw images) that’s<br>
actually similar to comparing two different VM raw image builds.</p>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/rk1'><span itemprop='name'>rk1</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">

            <link itemprop="image" href="../../../uploads/default/original/2X/c/c51a686748c4e887058581be5d3d9b8008e33051.png">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-26T12:04:18Z' class='post-time'>
                May 26, 2021, 12:04pm
              </time>
              <meta itemprop='dateModified' content='2021-05-26T12:04:18Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>An update. Re-image’d my system drive, and compared with checksum the same drive after having done some changes there. No apt update/upgrade this time. Unfortunately the checksums still don’t match.</p>
<p>Patrick, you are right that I do have a separate /boot partition.</p>
<p><img src="../../../uploads/default/original/2X/c/c51a686748c4e887058581be5d3d9b8008e33051.png" alt="sda" data-base62-sha1="s7EDGRWskfnb3vZPj0XmXZPQtxL" width="625" height="92"></p>
<p>What I can do now, what is easiest to do now, is to re-image the drive again, just now solely partition sda5 (from a linux usb drive, so sda5 still unmounted and encrypted). Is that a good idea?<br>
What is sda2 being used for?</p>
<p>Regarding reproducing the issue without grub-live. I understand what you say about all the functionality already being there. But I don’t understand how and when I should give the kernel instructions to load itself ro and non-persistently. You don’t want me to write my own grub scripts, do you? So, how should I go about it?</p>
<p>Regarding analyze-image, it is not a real problem that the tool has no multiple-partition support, is it? We already established (well, you did) that /boot isn’t inmutable, so I can just dd 1 partition: sda5. And use that one in the analysis.</p>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-26T17:56:20Z' class='post-time'>
                May 26, 2021,  5:56pm
              </time>
              <meta itemprop='dateModified' content='2021-05-26T17:56:20Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="rk1" data-post="7" data-topic="11706">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9f8e36/40.png" class="avatar"> rk1:</div>
<blockquote>
<p>What is sda2 being used for?</p>
</blockquote>
</aside>
<p>gparted might have a better idea. You might want to look that up elsewhere such as <a href="../../../../external.html?link=https://unix.stackexchange.com/questions/83781/understanding-partition-table-with-sda1-sda2-sda5" class="inline-onebox">fdisk - Understanding partition table with sda1 sda2 sda5 - Unix &amp; Linux Stack Exchange</a></p>
<aside class="quote no-group" data-username="rk1" data-post="7" data-topic="11706">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9f8e36/40.png" class="avatar"> rk1:</div>
<blockquote>
<p>What I can do now, what is easiest to do now, is to re-image the drive again, just now solely partition sda5 (from a linux usb drive, so sda5 still unmounted and encrypted). Is that a good idea?</p>
</blockquote>
</aside>
<p>I guess if you’d boot from USB then “sda becomes sdb” (maybe) (I guess you know that already). Then cryptsetup luksOpen and only doing a dd backup for the <code>/</code> partition seems a good idea indeed.</p>
<aside class="quote no-group" data-username="rk1" data-post="7" data-topic="11706">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9f8e36/40.png" class="avatar"> rk1:</div>
<blockquote>
<p>Regarding reproducing the issue without grub-live. I understand what you say about all the functionality already being there. But I don’t understand how and when I should give the kernel instructions to load itself ro and non-persistently.</p>
</blockquote>
</aside>
<p>All steps are already in this post: <a href="4.html" class="inline-onebox">Testing (to please myself) Live Mode User - #4 by Patrick</a></p>
<p>It’s just 3 steps to do the same that grub-live is doing. Packaging wise, it’s one of the simplest packages. A lot other files are basically “distractions” (unfortunately required files for licensing, packaging, and whatnot such as file COPYING). “Bloating” the number of files. Making things look more difficult than these actually are.</p>
<ol>
<li>install the packages:</li>
</ol>
<pre><code class="lang-auto">live-boot live-boot-initramfs-tools live-tools
</code></pre>
<ol start="2">
<li>
<p>install the <a href="../../../../external.html?link=https://github.com/Whonix/grub-live/blob/master/etc/grub.d/11_linux_live">/etc/grub.d/11_linux_live</a></p>
</li>
<li>
<p>regenerate /boot/grub/grub.cfg</p>
</li>
</ol>
<pre><code class="lang-auto">sudo update-grub
</code></pre>
<p>That’s it.</p>
<aside class="quote no-group" data-username="rk1" data-post="7" data-topic="11706">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9f8e36/40.png" class="avatar"> rk1:</div>
<blockquote>
<p>You don’t want me to write my own grub scripts, do you?</p>
</blockquote>
</aside>
<p>No need. It’s already there. Mentioned in linked post and this post.</p>
<aside class="quote no-group" data-username="rk1" data-post="7" data-topic="11706">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9f8e36/40.png" class="avatar"> rk1:</div>
<blockquote>
<p>Regarding analyze-image, it is not a real problem that the tool has no multiple-partition support, is it? We already established (well, you did) that /boot isn’t inmutable, so I can just dd 1 partition: sda5. And use that one in the analysis.</p>
</blockquote>
</aside>
<p>Right, in theory that should work.</p>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/rk1'><span itemprop='name'>rk1</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-26T20:12:54Z' class='post-time'>
                May 26, 2021,  8:12pm
              </time>
              <meta itemprop='dateModified' content='2021-05-26T20:12:54Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Ok, I got now two images (before and after activity) of the main partition sdx5. As an aside: I extracted them with dd from the earlier disk images by starting at the relevant sector. I thought that was clever but the amount of sectors in /boot is relatively small and the extraction from the disk image was about three times slower than the dd’ing of the unmounted file system before. But that is not important. What is important is that the checksums proved equal. <img src="../../../images/emoji/twitter/tadac164.png?v=9" title=":tada:" class="emoji" alt=":tada:"></p>
<p>So in effect it is just the /boot partition that caused the persistent changes in “live mode user” (ok, I did not test this second sdx2 partition). So, what should I do? I am not intimately familiar with what is stored in /boot. What matters to me most is that the delta changes in /boot do not reveal interesting forensics about my digital presence. I think I am justified in this hope. Do you agree? What I could do lastly, is do the analyze-image on the /boot partition. See what that comes up with.</p>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-27T14:04:14Z' class='post-time'>
                May 27, 2021,  2:04pm
              </time>
              <meta itemprop='dateModified' content='2021-05-27T14:04:14Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Great!</p>
<p>Ideally /boot would be encrypted by default (when enabling full disk encryption) but Debian (any Linux distribution) isn’t there yet. Most people don’t encrypt /boot yet. See also discussions online whether encrypting /boot is worthwhile or not. Over simplified “most people don’t care about /boot”.</p>
<p>Knowing all of the above however, changes in /boot contains anything super sensitive after use of host live mode. At most it reveals that disk was used if any timestamps or something changed there. I’ve never heard that a browser history or some document backup got accidentally leaked there.</p>
<p>For “normal” use cases such as using host live mode with user <code>user</code> and then browsing, document editing, other things that don’t require root, there is no way for these non-root applications to write into /boot anyhow.</p>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/rk1'><span itemprop='name'>rk1</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-28T16:34:23Z' class='post-time'>
                May 28, 2021,  4:34pm
              </time>
              <meta itemprop='dateModified' content='2021-05-28T16:34:23Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>To ease my soul I investigated some more into the differences in de before and after images of my /boot partition (after having used the “live mode user” of grub). I tried to use analyze_image but that excited with errors without being very clear about the problem. So, really it wasn’t that hard to script a procedure to calculate of every file in the /boot partition a checksum (sha256sum) and compare the resulting reportfiles with diff (and/or cmp).</p>
<p>I extracted the /boot partition of my disk image, that being a file, loaded as a /dev/loop0 device, and mounted that one on /mnt (I tried also to use ‘meld’ here, but couldn’t get rid of the “file filters” so it was totally unclear to me what it did compare and what not, besides the presence of the “lost+found” directory caused an error). My little script of maybe 5 or 6 lines calculated the checksums of all the files in /mnt (really /boot). Diff did not find any difference in checksums of the before- and after- mounts.</p>
<p>So what were the differences about really? Not in de main partition sdx5, and neither in sdx1 (when mounted). It was diff (or cmp) that pointed to differences of the boot image (the image of the /boot partition). The first difference that came up was at byte 1069 or 0x42D. According to a data map of the ext4 filesystem (<a href="../../../../external.html?link=https://ext4.wiki.kernel.org/index.php/Ext4_Disk_Layout" class="inline-onebox" rel="noopener nofollow ugc">Ext4 Disk Layout - Ext4</a>) is that byte one of 4 bytes starting at 0x42C that store the Mount time, in seconds since the epoch. (In the data map it is the 4 bytes starting at 0x2C, but we have to subtract 0x400 = 1024 bytes of the first reserved (unused) block. The superblock is the second block. Ok, the /boot partition is not protected from changes (not by the “live” mode anyway) and this is the first piece of data that changes. And with good reason, I understand why Mount time changes, and I find no security hazard here.</p>
<p>To cut some corners I compared again the before-and-after images of /boot, but this time I skipped the first four sectors (2 blocks, 2048 bytes) of that partition. Now diff and cmp do not find any difference anymore. So far I am pleased (with myself…). And thanks Patrick for pointing me to the right direction.</p>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-28T18:29:37Z' class='post-time'>
                May 28, 2021,  6:29pm
              </time>
              <meta itemprop='dateModified' content='2021-05-28T18:29:37Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>mount time (time of last mounting of partition) is a pretty good guess.</p>
<p>Maybe mount option in <code>/etc/fstab</code> <code>noatime</code> for <code>/boot</code> (and generally?) would help?</p>
<p>Maybe there is a kernel boot parameter similar to <code>noatime</code> that we could set?</p>
<p>Ideally in live mode mount times shouldn’t be recorded. It’s not a critical issue but for simplicity of dd whole encrypted disk and compare it would be much more handy if this issue wouldn’t exist.</p>
<p>Non-Qubes-Whonix (and Kicksecure) VM images do not have a separate /boot partition. Could could test the same there. I don’t see why grub-live in VMs should be for the purposes of tracking disk persistence issues would be much different than a real host. (Except for separate vs non-separate /boot partition.) Therefore it might be (more) comfortable to test using VMs.</p>
<p>If all files in /boot have the same checksums, what might have changed are file creation dates. (And much less likely: linux user permissions.)</p>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../whonix-live-mode-amnesia-amnesic-non-persistent-anti-forensics/3894/232.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../whonix-live-mode-amnesia-amnesic-non-persistent-anti-forensics/3894/232.html'>
                      <span itemprop='name'>Whonix live mode / amnesia / amnesic / non-persistent / anti-forensics</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/rk1'><span itemprop='name'>rk1</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-05-31T14:42:15Z' class='post-time'>
                May 31, 2021,  2:42pm
              </time>
              <meta itemprop='dateModified' content='2021-05-31T14:42:15Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Update to differences noticed in /boot in before-and-after images: the command cmp stops at the first difference it finds. So, with hexedit I gave 0x2C Mount time the same value, then cmp found a difference in 0x30 Write time and when I erased that there was a last difference in 0x178 Number of KiB written to this filesystem over its lifetime. Three differences I found that are not shocking but do reveal that someone was at a specific date/time behind the keyboard doing things.</p>
<p>I did not check the noatime option. It seems to result in no updates when files are merely read but not when written to. So I doubt it will help a lot.</p>
<p>About other solutions: the proliferation of user-roles (persistent user, live user, persistent untrusted root etc) I only use two flavours: the persistent user, who can sudo to root and apply system changes and the live mode of user. Mostly I only use live mode, in that mode you can sudo to root, but changes are not persistent. So I guess, a pretty safe configuration.</p>
<p>The separate /boot partition which is not protected from changes in live mode, and is not encrypted. For protection in live mode I should contact upstream. But encryption of /boot, is that a good idea, and how does it help? When you boot the system, /boot is no longer encrypted, right?</p>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-01T08:49:13Z' class='post-time'>
                June 1, 2021,  8:49am
              </time>
              <meta itemprop='dateModified' content='2021-06-01T08:49:13Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>There is a feature, which gets into the way here:</p>
<aside class="onebox stackexchange">
  <header class="source">

      <a href="../../../../external.html?link=https://superuser.com/questions/152640/finding-out-the-time-a-filesystem-was-last-mounted" target="_blank" rel="noopener">superuser.com</a>
  </header>

  <article class="onebox-body">
      <a href="../../../../external.html?link=https://superuser.com/users/20557/michaelm" target="_blank" rel="noopener">
    <img alt="MichaelM" src="../../../../external.html?link=https://www.gravatar.com/avatar/c6505a4c95f8bc5e703ad9d86c8482e3?s=128&amp;d=identicon&amp;r=PG" class="thumbnail onebox-avatar" width="60" height="60">
  </a>

<h4>
  <a href="../../../../external.html?link=https://superuser.com/questions/152640/finding-out-the-time-a-filesystem-was-last-mounted" target="_blank" rel="noopener">Finding out the time a filesystem was last mounted</a>
</h4>

<div class="tags">
  <strong>linux, ubuntu, filesystems, mount</strong>
</div>

<div class="date">
  asked by
  
  <a href="../../../../external.html?link=https://superuser.com/users/20557/michaelm" target="_blank" rel="noopener">
    MichaelM
  </a>
  on <a href="../../../../external.html?link=https://superuser.com/questions/152640/finding-out-the-time-a-filesystem-was-last-mounted" target="_blank" rel="noopener">07:55AM - 15 Jun 10 UTC</a>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>It’s a puzzle. For live mode, we don’t want that feature. Can it be disabled?</p>
<aside class="onebox stackexchange">
  <header class="source">

      <a href="../../../../external.html?link=https://unix.stackexchange.com/questions/460313/ext4-prevent-last-mounted-to-be-stored" target="_blank" rel="noopener">unix.stackexchange.com</a>
  </header>

  <article class="onebox-body">
      <a href="../../../../external.html?link=https://unix.stackexchange.com/users/11472/arved" target="_blank" rel="noopener">
    <img alt="arved" src="../../../../external.html?link=https://www.gravatar.com/avatar/6706944a2a8b4e2d37b330dd64cf9c69?s=128&amp;d=identicon&amp;r=PG" class="thumbnail onebox-avatar" width="60" height="60">
  </a>

<h4>
  <a href="../../../../external.html?link=https://unix.stackexchange.com/questions/460313/ext4-prevent-last-mounted-to-be-stored" target="_blank" rel="noopener">Ext4: Prevent "Last mounted" to be stored</a>
</h4>

<div class="tags">
  <strong>ext4</strong>
</div>

<div class="date">
  asked by
  
  <a href="../../../../external.html?link=https://unix.stackexchange.com/users/11472/arved" target="_blank" rel="noopener">
    arved
  </a>
  on <a href="../../../../external.html?link=https://unix.stackexchange.com/questions/460313/ext4-prevent-last-mounted-to-be-stored" target="_blank" rel="noopener">11:59AM - 03 Aug 18 UTC</a>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>If you can find a way to disable it, I’ll think about how to do this by default (in live mode). It looks like it’s not possible but please search more.</p>
<p>It’s related to the superblock.</p>
<p><a href="../../../../external.html?link=https://www.slashroot.in/understanding-file-system-superblock-linux" class="onebox" target="_blank" rel="noopener">https://www.slashroot.in/understanding-file-system-superblock-linux</a></p>
<blockquote>
<ul>
<li>Mount time</li>
</ul>
</blockquote>
<p>It’s a puzzle because there are many ways in theory to solve it. Either by disabling recording of mount time. The only suggestion I found so far is “mount as read-only”. Another piece of the puzzle.</p>
<p>What options exist to mount /boot as read only?</p>
<pre><code>cat /etc/fstab | grep boot
</code></pre>
<pre><code class="lang-auto"># /boot was on /dev/sda1 during installation
UUID=redacted /boot           ext2    defaults        0       2
</code></pre>
<p>You could try to configure mounting /boot as read only in /etc/fstab. You might want to experiment dong that in a VM unless you would be able to undo this using <a href="../../../../external.html?link=https://www.whonix.org/wiki/Recovery#Recovery_Mode">Recovery Mode</a> if that renders the system unbootable.</p>
<p>In another quest for more secure mount options in <a href="../../re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.html" class="inline-onebox">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</a> we haven’t implemented a good way yet as a Linux distribution on how to change mount options. Would help if <a href="../../../../external.html?link=https://github.com/systemd/systemd/issues/12506" class="inline-onebox">/etc/fstab.d · Issue #12506 · systemd/systemd · GitHub</a> was implemented.</p>
<p>So until <a href="../../re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.html" class="inline-onebox">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</a> is resolved which would change boot options permanently, I don’t think I’ll figure out how to change boot options dynamically, i.e. enable read-only for /boot when booting into live mode unless anyone contributes.</p>
<p>More puzzle pieces: How does the boot process work generally? Who/what mounts /boot? Initramfs? Where is the source code for that? I cannot easily find that out.</p>
<p>Maybe if Whonix changed to dracut (<a href="../../replacing-initramfs-tools-with-dracut/4487.html" class="inline-onebox">replacing initramfs-tools with dracut</a>) mount related features (<a href="../../re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.html" class="inline-onebox">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</a> and mount /boot as read-only in live mode) would be easier to implement.</p>
<p>dracut’s man page mentions /boot. Maybe, hopefully dracut’s interface (config, modules) are flexible enough to implement this.</p>
<p>Roadmap:</p>
<ol>
<li><a href="../../replacing-initramfs-tools-with-dracut/4487/6.html" class="inline-onebox">replacing initramfs-tools with dracut - #6 by HulaHoop</a></li>
<li><a href="../../re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.html" class="inline-onebox">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</a></li>
<li>mount /boot as read-only in live mode</li>
</ol>
<aside class="quote no-group" data-username="rk1" data-post="13" data-topic="11706">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9f8e36/40.png" class="avatar"> rk1:</div>
<blockquote>
<p>For protection in live mode I should contact upstream.</p>
</blockquote>
</aside>
<p>It’s a matter of empathy. Successful communication. Trying to estimate what the reader will think.</p>
<p>“Hi upstream, can you please do same as grub-live but better?”</p>
<p>“Hi upstream, can you please do same as [something you’ve never ever heard before] but better?”</p>
<p>“Hi upstream, can you please do same as [something you’ve never ever heard before] but better?”</p>
<p>“Hi upstream, can you please do same as [a package with 16 files of which 3 are important] but better?”</p>
<p>“Hi upstream, can you please do same as [1700 lines of code in total package] but better?”</p>
<p>…that might end up with “lost at hello”.</p>
<p>The hope is, that upstream that provides “99%” of the functionality would be able to implement a feature request that would implement the “1%” functionality that grub-live is implementing, but better, with /boot mounted as read-only. Short of implementing it yourself, a well written feature request is your best chance.</p>
<aside class="quote no-group" data-username="rk1" data-post="13" data-topic="11706">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9f8e36/40.png" class="avatar"> rk1:</div>
<blockquote>
<p>But encryption of /boot, is that a good idea, and how does it help?</p>
</blockquote>
</aside>
<p>For live mode / same hash of disk: doesn’t help.</p>
<p>Encrypted /boot generally: I don’t think I could provide a better answer than what is avaialble on search engines for search term “encrypted /boot”.</p>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/rk1'><span itemprop='name'>rk1</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-03T13:31:10Z' class='post-time'>
                June 3, 2021,  1:31pm
              </time>
              <meta itemprop='dateModified' content='2021-06-03T13:31:10Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a>, thanks as always for your answer<br>
Yeah, I will see if I can do something with /boot mounting “ro”. Maybe you are right that I should try this in VM first <img src="../../../images/emoji/twitter/slight_smilec164.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>
The last couple of days I delved in memory forensics (with volatility) to see what they get when they capture your system while running…<br>
When I know more I will post that here.</p>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/rk1'><span itemprop='name'>rk1</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../11706.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-08T17:34:24Z' class='post-time'>
                June 8, 2021,  5:34pm
              </time>
              <meta itemprop='dateModified' content='2021-06-08T17:34:24Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Trying to work my way to daylight. Booting with /boot “ro” worked. But I wondered if that always works, like when the filesystem-journal is dirty and needs to update, etc. I think I saw Whonix itself not having a separate /boot partition. And grub-live only protects one partition. So, maybe I should go back from 2 partitions (/boot and /) to just one big partition. So that grub-live overlays the whole filesystem including /boot. But of course my root partition / was already encrypted with LUKS2, so the question to be addressed was also can GRUB boot from an encrypted partition. Then I found this super-user-friendly Debian guide:<br>
<a href="../../../../external.html?link=https://cryptsetup-team.pages.debian.net/cryptsetup/encrypted-boot.html" rel="noopener nofollow ugc">https://cryptsetup-team.pages.debian.net/cryptsetup/encrypted-boot.html</a><br>
that instructed me exactly how to get an encrypted boot. And my hope was that by doing so, by concentrating everything in just one partition that grub-live would protect everything.<br>
I replicated my partitionscheme in VM with Debian10 as OS. Followed the cryptsetup guide, got rid of the separate /boot. And yes that works, and yes when I choose grub-menu-entry Live mode user, changes to my /boot directory (directory now, not a partition) are gone by the next boot. So that is all very well: in VM at least a fully encrypted and fully by Live mode user protected system. The only reason why I will not implement this on my “real” system (non-VM) is the lack of GRUB support for LUKS2. To be able to boot from an encrypted partition I had to downgrade LUKS2 to LUKS1. So, there are advantages as well as disadvantages. So I reckon it is not worth the trouble.<br>
It seems that this GRUB support for LUKS2 is lacking already for two years now.</p>
        </div>

        <meta itemprop='headline' content='Testing (to please myself) Live Mode User'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
