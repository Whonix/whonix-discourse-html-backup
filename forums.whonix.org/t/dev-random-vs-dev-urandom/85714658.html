<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>/dev/random vs. /dev/urandom - Development - Whonix Forum</title>
    <meta name="description" content="/dev/random vs. /dev/urandom 

 Viewpoint: /dev/random is obsolete
 Viewpoint: better use /dev/random">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="85714658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;/dev/random vs. /dev/urandom&#39;" href="8571.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/dev-random-vs-dev-urandom/8571?page=2" />
<meta name="twitter:url" content="https://forums.whonix.org/t/dev-random-vs-dev-urandom/8571?page=2" />
<meta property="og:title" content="/dev/random vs. /dev/urandom" />
<meta name="twitter:title" content="/dev/random vs. /dev/urandom" />
<meta property="og:description" content="It isn‚Äôt an ‚Äúawful security regression‚Äù. That isn‚Äôt how the CSPRNG works. Once you initially seed the RNG it is suitable for cryptographic applications ‚Äî reseeding adds some forward secrecy but isn‚Äôt really needed. The premise behind the CSPRNG is that cryptography isn‚Äôt broken, and the only applications that require cryptographically secure numbers are cryptography.  Highly suggest you get your information from reputable cryptographers such as Thomas Pornin, Filippo Valsorda, and Daniel J. Ber..." />
<meta name="twitter:description" content="It isn‚Äôt an ‚Äúawful security regression‚Äù. That isn‚Äôt how the CSPRNG works. Once you initially seed the RNG it is suitable for cryptographic applications ‚Äî reseeding adds some forward secrecy but isn‚Äôt really needed. The premise behind the CSPRNG is that cryptography isn‚Äôt broken, and the only applications that require cryptographically secure numbers are cryptography.  Highly suggest you get your information from reputable cryptographers such as Thomas Pornin, Filippo Valsorda, and Daniel J. Ber..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="5 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="12 ‚ù§" />
<meta property="article:published_time" content="2021-10-10T12:03:25+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="8571.html">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="8571.html">/dev/random vs. /dev/urandom</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/qua3k'><span itemprop='name'>qua3k</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8571.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-10-10T12:03:25Z' class='post-time'>
                October 10, 2021, 12:03pm
              </time>
              <meta itemprop='dateModified' content='2021-10-10T12:16:03Z'>
          <span itemprop='position'>#29</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="28" data-topic="8571">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>The part <code>IMHO there is one aspect missing in the kernel: /dev/random should return to be blocked if it cannot be reseeded with sufficient seed at some time. I have applied this in my LRNG /dev/random replacement.</code> sounds like an awful security regression in linux kernel 5.6.</p>
</blockquote>
</aside>
<p>It isn‚Äôt an ‚Äúawful security regression‚Äù. That isn‚Äôt how the CSPRNG works. Once you initially seed the RNG it is suitable for cryptographic applications ‚Äî reseeding adds some forward secrecy but isn‚Äôt really needed. The premise behind the CSPRNG is that cryptography isn‚Äôt broken, and the only applications that require cryptographically secure numbers are cryptography.</p>
<p>Highly suggest you get your information from reputable cryptographers such as <a href="../../../external.html?link=https://security.stackexchange.com/a/3939" rel="noopener nofollow ugc">Thomas</a> <a href="../../../external.html?link=https://stackoverflow.com/a/5639631" rel="noopener nofollow ugc">Pornin</a>, <a href="../../../external.html?link=https://buttondown.email/cryptography-dispatches/archive/cryptography-dispatches-the-linux-csprng-is-now/" rel="noopener nofollow ugc">Filippo Valsorda</a>, and <a href="../../../external.html?link=https://blog.cr.yp.to/20140205-entropy.html" rel="noopener nofollow ugc">Daniel J. Bernstein</a>.</p>
        </div>

        <meta itemprop='headline' content='/dev/random vs. /dev/urandom'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8571.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-10-10T12:27:35Z' class='post-time'>
                October 10, 2021, 12:27pm
              </time>
              <meta itemprop='dateModified' content='2021-10-10T12:27:35Z'>
          <span itemprop='position'>#30</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="qua3k" data-post="24" data-topic="8571">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/qua3k/40/2790_2.png" class="avatar"> qua3k:</div>
<blockquote>
<p><a href="../../../external.html?link=https://research.nccgroup.com/2019/12/19/on-linuxs-random-number-generation/"><code>/dev/random</code> was based on the dated idea that entropy depleted.</a> It isn‚Äôt true, and leads to developers devising weird workarounds to solve the problem.</p>
<p>You should remove the whole section that recommends the use of <code>/dev/random</code> for cryptographic use cases.</p>
</blockquote>
</aside>
<p>That article while intended to argue "pro <code>/dev/urandom</code>" is actually quite eloquent on why not do do that. Quoting from the article:</p>
<blockquote>
<p>Since at least the early 2000s, Linux distributions have applied workarounds to ensure proper entropy at boot time, namely that a boot script injects the contents of a saved file upon boot, and immediately proceeds to regenerate the said file with /dev/urandom. In effect, this transports the entropy across reboots, so that even if the boot sequence was not enough, by itself, to generate enough entropy, the file contents would ensure that everything is all right.</p>
</blockquote>
<p>Yes, great but we should scrutinize if that is working. Known cases where systemd-random-seed.service approaches (restore from previously saves entropy seed file) don‚Äôt work is the first boot, read-only media (Live DVD)</p>
<p>Article goes on‚Ä¶</p>
<blockquote>
<p>there are times when the entropy pool is really empty, namely during the early stages of the boot. At that point, the kernel did not obtain many physical events to work on, and it is conceivable that /dev/urandom output could be predicted.</p>
</blockquote>
<p>Exactly this is an issue. So, avoid /dev/urandom, use /dev/random and perhaps getrandom(2) (depending on kernel version).</p>
<blockquote>
<p>There are now a few extra relevant points to make:</p>
<ul>
<li>Virtual machines are a challenge to entropy gathering, in at least three ways:
<ul>
<li>They provided access to virtual, emulated hardware only. The nice physical events from which entropy is supposed to come (thermal noise, mostly) are then just a simulation, and that which is simulated can, indeed, be simulated.</li>
<li>The hypervisor can prevent access to the cycle counter (rdtsc opcode), which will further hinder attempts by the kernel to get entropy from the (not so) physical events.</li>
<li>VM snapshots can be taken and replayed at will; each restart from the same snapshot will use the recorded pool contents.</li>
</ul>
</li>
</ul>
</blockquote>
<p>Indeed. We should make sure that such issues are handled as best as possible.</p>
<blockquote>
<ul>
<li>
<em>A contrario</em>, sufficiently recent CPU have an embedded hardware generator which is totally available from VM (it‚Äôs the rdrand opcode on x86 CPU). The Linux kernel uses rdrand. It does not trust rdrand, because NSA (I‚Äôm not exaggerating! The kernel source code <a href="../../../external.html?link=https://github.com/torvalds/linux/blob/37d4e84f765bb3038ddfeebdc5d1cfd7e1ef688f/drivers/char/random.c#L1891">explicitly calls out the NSA</a>), so it will not count the rdrand output as worth any entropy. But it will still use it. In all edge cases described above (network boot, VM snapshots‚Ä¶), rdrand will by itself ensure that there is enough entropy for all practical purposes.</li>
</ul>
</blockquote>
<p>The kernel in Debian by default trusts / enables / ‚Äúcredits‚Äù entropy by RDRAND by default since Debian buster. I added the reference here: <a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Entropy#RDRAND">RDRAND</a></p>
<p>The reference contains links that make the case why RDRAND should not be trusted.</p>
<p>Whonix / security-misc flips the setting to ‚Äúdistrust‚Äù RDRAND, disables that entropy from RDRAND are ‚Äúcredited‚Äù. In other words, in RDRAND is not ‚Äúcredited‚Äù in Whonix. (RDRAND isn‚Äôt fully disabled which I am not sure is possible, wasn‚Äôt suggested and should not be an issue if the kernel theory holds true that even malicious entropy sources are OK if mixed with legitimate entropy sources).</p>
<p>related forum discussion:<br>
<a href="../rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.html" class="inline-onebox">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</a></p>
<p>I‚Äôve recently made the argument at Qubes to ‚Äúdistrust‚Äù (which means actually just ‚Äúdon‚Äôt credit‚Äù) RDRAND at Qubes:</p><aside class="onebox githubissue">
  <header class="source">

      <a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/6941" target="_blank" rel="noopener">github.com/QubesOS/qubes-issues</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewbox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/6941" target="_blank" rel="noopener">unprivilege the CPU's random number generator (RDRAND) / set kernel parameter "`random.trust_cpu=off`"</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2021-10-06" data-time="16:04:32" data-timezone="UTC">04:04PM - 06 Oct 21 UTC</span>
      </div>


      <div class="user">
        <a href="../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="noopener">
          <img alt="adrelanos" src="../../../external.html?link=https://avatars.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
      </div>
    </div>

    <div class="labels">
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">T: bug</span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">C: other</span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">P: default</span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">needs diagnosis</span>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">Originally brought up by me in https://github.com/QubesOS/qubes-issues/issues/61<span class="show-more-container"><a href="#" rel="noopener" class="show-more">‚Ä¶</a></span><span class="excerpt hidden">74#issuecomment-936180012

&gt; &gt; &gt; [0.048xxx] random: crng done (trusting CPU's manufacturer)
&gt; &gt; 
&gt; &gt; 
&gt; &gt; This! I've just rechecked the failed log, and I don't see `trusting CPU's manufacturer` part there. And indeed that CPU does not support RDRAND. This means, the extreme issue I see, applies only to quite old systems (and hopefully does not affect majority of our users - even good old x230 already has RDRAND). So, I'm lowering the priority. But it's still worth improving the situation.
&gt; 
&gt; Strongly discouraged to rely on RDRAND for security / entropy quality anyhow as per: https://www.whonix.org/wiki/Dev/Entropy#RDRAND

@marmarek https://github.com/QubesOS/qubes-issues/issues/6174#issuecomment-936226779:
&gt; &gt; Strongly discouraged to rely on RDRAND for security / entropy quality anyhow as per:
&gt; 
&gt; In context of _this issue_, it is not a problem, because stubdomain does not use RNG for any security critical task. There is not crypto involved etc. One could argue it may make ASLR for qemu less effective, but we don't consider qemu trusted, so it is not a huge deal (and remember the RDRAND issues are still very hypothetical - see below).
&gt; 
&gt; In a broader context of RDRAND, I don't think we should worry about _backdoors_ there. Or rather: if you consider intentional backdoors in your CPU a valid threat, throw away that CPU. There is no really a difference how such hypothetical backdoor could work - whether that would be predictable RDRAND, [reacting to some magic values to any other instruction](http://blog.cr4.sh/2015/07/building-reliable-smm-backdoor-for-uefi.html), or anything else. We could worry about its effectiveness - not intentional bugs, which indeed is hard to reason about, since its being opaque.

Seems like I need to make a better argument.

Quote https://www.kernel.org/doc/html/latest/admin-guide/kernel-parameters.html

&gt; random.trust_cpu={on,off}
&gt;
&gt; [KNL] Enable or disable trusting the use of the CPU's random number generator (if available) to fully seed the kernel's CRNG. Default is controlled by CONFIG_RANDOM_TRUST_CPU.

The name of the kernel parameter `random.trust_cpu` is a bit non-ideal. There is no need to invoke big words such as "trust" or "backdoor" for the sake of this argument. Not even trust or a backdoor is required for this being an issue. Even a bug that happened in past would justify this change.

Ars Technica reported, [AMD shipped Ryzen 3000 with a serious microcode bug in its random number generator.](https://arstechnica.com/gadgets/2019/10/how-a-months-old-amd-microcode-bug-destroyed-my-weekend/) Lennart Poettering (@poettering) [summarized](https://twitter.com/pid_eins/status/1149649806056280069) the issue nicely.

&gt; Finally, AMD admits it's their fault, and they are preparing a BIOS update to fix RDRAND. You probably should avoid running a CONFIG_RANDOM_TRUST_CPU=y Linux kernel (Fedora) on a Ryzen system without that BIOS update, or all crypto keys generated are not as random as you hope.

That bug that gladly was discovered and publicized by a white hat. Due to the large amount of different CPU models, different batches it's not a good idea to rely on white hats to swiftly report it.

Or this other bug [Kernel bug report from 2014, rdrand instruction fails after resume on AMD family 22 CPU](https://bugzilla.kernel.org/show_bug.cgi?id=85911).

"[D. J. Bernstein isn't a fan of RDRAND either.](https://groups.google.com/g/randomness-generation/c/z3Uid45DV34)" In the same mailing list thread someone else posted:

&gt; On https://spideroak.com/browse/share/UTwente/RNG/Tests/NIST-STS/ you can find the results of randomness tests of several random generators including RDRAND.
&gt; 
&gt; In the document No_of_failures_calculation.txt you can find the used testing method and the test results.
&gt; 
&gt; The actual number of failed tests of RDRAND deviates more then 4 sigma from the expected number of failed tests.
&gt; 
&gt; The used software can also be downloaded from the same link so these tests can be reproduced.
&gt; 
&gt; As you also can see the XOR_SHIFT PRNG and the Picoquant PQRNG150 TRNG pass the tests with a number of failed tets within the 3 sigma deviation so the tests seem to work fine.

I didn't verify the latter but for my part I've seen enough.

`random.trust_cpu=on` means that  [`RDRAND`](https://en.wikipedia.org/wiki/RDRAND) has a privileged position within Linux entropy gathering process.

`random.trust_cpu=off` makes it only a "normal" ("unprivileged") source of entropy among other sources (such as keyboard, mouse, CPU jitter, and the usual).

----

Current kernel entropy sources in Qubes are:

* "privileged": RDRAND
* "unprivileged": keyboard, etc.

Suggested kernel entropy sources:

* "privileged": none
* "unprivileged": RDRAND, keyboard, etc.

----

`random.trust_cpu=on` advantages:

* Perhaps negligibly faster boot of dom0?

`random.trust_cpu=off` advantages:

* Being used as 1 entropy source normally, equal rights with other entropy sources. It doesn't disable RDRAND entirely.

----

[security-misc](https://github.com/Whonix/security-misc/) does it. (#1885)</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Since RDRAND conceptually cannot be the only solution we should look more. ‚Üí <a href="../moar-entropy-sources/8543.html" class="inline-onebox">Moar Entropy Sources</a></p>
<blockquote>
<p>the early boot moments we are talking about are before there is any notion of a file; this is really about a single case, which is booting a diskless machine over the network, and mounting the root filesystem from a remote server. The relevant network protocol can need some randomness (e.g. TCP sequence numbers).</p>
</blockquote>
<p>I don‚Äôt like that.</p>
<p>Should be only done securely and block if necessary blocking by default, or<br>
opt-in, non-blocking, known security risks.</p>
<p>Should be no in between ‚Äúmaybe random, maybe predictable‚Äù at any time.</p>
<aside class="quote no-group" data-username="qua3k" data-post="29" data-topic="8571">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/qua3k/40/2790_2.png" class="avatar"> qua3k:</div>
<blockquote>
<p>It isn‚Äôt an ‚Äúawful security regression‚Äù. That isn‚Äôt how the CSPRNG works. Once you initially seed the RNG it is suitable for cryptographic applications ‚Äî reseeding adds some forward secrecy but isn‚Äôt really needed.</p>
</blockquote>
</aside>
<p>The critical issue is ‚ÄúOnce‚Äù. If it is conceivable that [random source] output could be predicted in any corner case, that‚Äôs an awful security regression.</p>
<p>Entropy quality is a serious issue‚Ä¶</p>
<ul>
<li>Quote <a href="../../../external.html?link=https://factorable.net/">Widespread Weak Keys in Network Devices - factorable.net</a>:</li>
</ul>
<blockquote>
<p>We performed a large-scale study of RSA and DSA cryptographic keys in use on the Internet and discovered that significant numbers of keys are insecure due to insufficient randomness.</p>
</blockquote>
<blockquote>
<p>Most critically, we found that the Linux random number generator can produce predictable output at boot under certain conditions,</p>
</blockquote>
<ul>
<li><a href="../../../external.html?link=https://forums.raspberrypi.com/viewtopic.php?f=66&amp;t=126892">Predictable SSH host keys</a></li>
</ul>
<aside class="quote no-group quote-modified" data-username="qua3k" data-post="29" data-topic="8571">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/qua3k/40/2790_2.png" class="avatar"> qua3k:</div>
<blockquote>
<p>Highly suggest you get your information from reputable cryptographers such as Thomas Pornin and Filippo Valsorda.</p>
</blockquote>
</aside>
<p>Get information, yes. I am quoting, referencing Filippo Valsorda, Daniel J. Bernstein in <a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Entropy">/dev/random vs. /dev/urandom</a> and Thomas Pornin in this forum post so was obviously reading their related posts in full. Uncritically do as they say without cross-checking and own considerations, no, because they disagree with each other on some points. Thomas Pornin is uncritical of RDRAND in <a href="../../../external.html?link=https://research.nccgroup.com/2019/12/19/on-linuxs-random-number-generation/" class="inline-onebox">On Linux‚Äôs Random Number Generation ‚Äì NCC Group Research</a> as quoted earlier in this forum post. On the other hand, ‚Äú<a href="../../../external.html?link=https://groups.google.com/g/randomness-generation/c/z3Uid45DV34">D. J. Bernstein isn‚Äôt a fan of RDRAND.</a>‚Äù</p>
        </div>

        <meta itemprop='headline' content='/dev/random vs. /dev/urandom'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/qua3k'><span itemprop='name'>qua3k</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8571.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-03-04T18:45:15Z' class='post-time'>
                March 4, 2022,  6:45pm
              </time>
              <meta itemprop='dateModified' content='2022-03-04T18:45:15Z'>
          <span itemprop='position'>#31</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a href="../../../external.html?link=https://git.kernel.org/pub/scm/linux/kernel/git/crng/random.git/commit/?id=2ad310f93ec3d7062bdb73f06743aa56879a0a28" class="onebox" target="_blank" rel="noopener nofollow ugc">https://git.kernel.org/pub/scm/linux/kernel/git/crng/random.git/commit/?id=2ad310f93ec3d7062bdb73f06743aa56879a0a28</a></p>
        </div>

        <meta itemprop='headline' content='/dev/random vs. /dev/urandom'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8571.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-03-04T20:09:57Z' class='post-time'>
                March 4, 2022,  8:09pm
              </time>
              <meta itemprop='dateModified' content='2022-03-04T20:09:57Z'>
          <span itemprop='position'>#32</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Excellent news!</p>
<p>Noted in wiki:</p><aside class="onebox allowlistedgeneric" data-onebox-src="../../../external.html?link=https://www.kicksecure.com/w/index.php?title=Dev%2FEntropy&amp;type=revision&amp;diff=54688&amp;oldid=54479">
  <header class="source">
      <img src="../../../external.html?link=https://www.kicksecure.com/favicon.ico" class="site-icon" width="" height="">

      <a href="../../../external.html?link=https://www.kicksecure.com/w/index.php?title=Dev%2FEntropy&amp;type=revision&amp;diff=54688&amp;oldid=54479" target="_blank" rel="noopener" title="08:09PM - 04 March 2022">Kicksecure ‚Äì 4 Mar 22</a>
  </header>

  <article class="onebox-body">
    <img src="../../../external.html?link=https://www.kicksecure.com/w/images/1/13/Random_entropy.png" class="thumbnail onebox-avatar" width="500" height="500">

<h3><a href="../../../external.html?link=https://www.kicksecure.com/w/index.php?title=Dev%2FEntropy&amp;type=revision&amp;diff=54688&amp;oldid=54479" target="_blank" rel="noopener">Entropy, Randomness, /dev/random vs /dev/urandom, Entropy Sources, Entropy...</a></h3>

  <p>Technical Design Documentation about Entropy</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='/dev/random vs. /dev/urandom'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="8571.html">‚Üê previous page</a></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
