<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Simple clearnet connection proof of concept for Tails</title>
    <link>http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866</link>
    <description>Unlike in Whonix, it&#39;s very easy to start a clearnet connection in Tails - one can use the &quot;Unsafe browser&#39; (included for the purpose of connecting to captive networks).

https://tails.boum.org/contribute/design/Unsafe_Browser/

This browser comes with many warnings though to prevent the user from gaining a false sense of safely.

The browser runs with the clearnet user. Code for that is at the above link.

I am looking for a simple proof of concept though, demonstrating that a simple bash script can create a direct connection to a clearnet site without any warnings (on Tails).

Needless to say, the same script is expected to fail in Whonix.

Is this possible?</description>
    <language>en</language>
    <lastBuildDate>Mon, 25 Feb 2019 18:46:18 +0000</lastBuildDate>
    <category>General Tor and Anonymity Talk</category>
    <atom:link href="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Simple clearnet connection proof of concept for Tails</title>
        <dc:creator><![CDATA[xariv]]></dc:creator>
        <description><![CDATA[
            <p>I completely agree with you. The purpose of this exercise is to demonstrate why an unsafe browser, or any kind of clearnet access in a system that tries to be anonymous <strong>isn’t</strong> a good idea.</p>
<p>I would very much NOT want to see a similar feature in Whonix.</p>
<p>The above exploit, by the way, was reported to Tails 9 months ago, and still works.</p>
          <p><a href="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/12</link>
        <pubDate>Mon, 25 Feb 2019 18:46:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6866-12</guid>
        <source url="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866.rss">Simple clearnet connection proof of concept for Tails</source>
      </item>
      <item>
        <title>Simple clearnet connection proof of concept for Tails</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Instead of weakening Whonix to allow clearnet access, why not use a vanilla Linux distro installed in a VM for that purpose? Since Whonix is mainly for hypervisors you have no problem multiplexing your setup to run many instances at the same time.</p>
          <p><a href="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/11</link>
        <pubDate>Mon, 25 Feb 2019 16:48:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6866-11</guid>
        <source url="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866.rss">Simple clearnet connection proof of concept for Tails</source>
      </item>
      <item>
        <title>Simple clearnet connection proof of concept for Tails</title>
        <dc:creator><![CDATA[xariv]]></dc:creator>
        <description><![CDATA[
            <p>I found this:</p>
<blockquote>
<p>The X11 protocol has long been known to not provide isolation between windows. Here I will show that it can be abused to bypass the firewall without any user interaction or visible side-effects by abusing the Unsafe Browser.</p>
</blockquote>
<p><a href="https://redmine.tails.boum.org/code/issues/15635" class="onebox" target="_blank" rel="nofollow noopener">https://redmine.tails.boum.org/code/issues/15635</a></p>
          <p><a href="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/10</link>
        <pubDate>Sun, 24 Feb 2019 18:29:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6866-10</guid>
        <source url="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866.rss">Simple clearnet connection proof of concept for Tails</source>
      </item>
      <item>
        <title>Simple clearnet connection proof of concept for Tails</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="7" data-topic="6866">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/x/a88e4f/40.png" class="avatar"> xariv:</div>
<blockquote>
<p>The next thing to try will be to replicate the script that runs the browser, but without warnings</p>
</blockquote>
</aside>
<p>unsafe-browser.desktop.in uses <code>sudo unsafe-browser</code>. And only for that there is a sudoers exception.</p>
<aside class="quote no-group" data-post="7" data-topic="6866">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/x/a88e4f/40.png" class="avatar"> xariv:</div>
<blockquote>
<p>possibly with a different profile.</p>
</blockquote>
</aside>
<p><a href="https://git-tails.immerda.ch/tails/plain/config/chroot_local-includes/usr/local/lib/tails-shell-library/tor-browser.sh" rel="nofollow noopener">https://git-tails.immerda.ch/tails/plain/config/chroot_local-includes/usr/local/lib/tails-shell-library/tor-browser.sh</a> uses:</p>
<pre><code>TBB_INSTALL=/usr/local/lib/tor-browser
TBB_PROFILE=/etc/tor-browser/profile
TBB_EXT=/usr/local/share/tor-browser-extensions
</code></pre>
<p>All locations non-root accessible.</p>
<p>I am pretty sure Tails developers have root vs non-root in mind during development.</p>
          <p><a href="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/9</link>
        <pubDate>Sun, 24 Feb 2019 15:10:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6866-9</guid>
        <source url="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866.rss">Simple clearnet connection proof of concept for Tails</source>
      </item>
      <item>
        <title>Simple clearnet connection proof of concept for Tails</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="7" data-topic="6866">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/x/a88e4f/40.png" class="avatar"> xariv:</div>
<blockquote>
<p>BTW, if selenium or anything similar reuqires root priviledges to install this is also a no-no.</p>
</blockquote>
</aside>
<p>May be possible to install it in the home folder including all its dependencies. Not a fun exercise.</p>
          <p><a href="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/8</link>
        <pubDate>Sun, 24 Feb 2019 14:54:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6866-8</guid>
        <source url="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866.rss">Simple clearnet connection proof of concept for Tails</source>
      </item>
      <item>
        <title>Simple clearnet connection proof of concept for Tails</title>
        <dc:creator><![CDATA[xariv]]></dc:creator>
        <description><![CDATA[
            <p>I see. The next thing to try will be to replicate the script that runs the browser, but without warnings and possibly with a different profile. They probably closed that potential hole too but worth checking.</p>
<p>BTW, if selenium or anything similar reuqires root priviledges to install this is also a no-no.</p>
          <p><a href="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/7</link>
        <pubDate>Sun, 24 Feb 2019 14:20:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6866-7</guid>
        <source url="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866.rss">Simple clearnet connection proof of concept for Tails</source>
      </item>
      <item>
        <title>Simple clearnet connection proof of concept for Tails</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>To script it, it should be possible to use some browser automation software like selenium. But that’s a lot more involved than a simple bash script.</p>
          <p><a href="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/6</link>
        <pubDate>Sun, 24 Feb 2019 13:52:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6866-6</guid>
        <source url="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866.rss">Simple clearnet connection proof of concept for Tails</source>
      </item>
      <item>
        <title>Simple clearnet connection proof of concept for Tails</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Tails is using sudo/root to setup the chroot and uses <code>sudo -u clearnet</code> to start the browser. So while the browser runs indeed as non-root, the procedure requires root rights. This is possible through the <a href="https://git-tails.immerda.ch/tails/plain/config/chroot_local-includes/etc/sudoers.d/zzz_unsafe-browser" rel="nofollow noopener">/etc/sudoers.d/zzz unsafe-browser</a> exception. This however doesn’t grant a path to executing arbitrary code/programs as user <code>root</code> or user <code>clearnet</code>. If you find a way to do that, I guess Tails might consider this a security buy.</p>
          <p><a href="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/5</link>
        <pubDate>Sun, 24 Feb 2019 13:50:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6866-5</guid>
        <source url="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866.rss">Simple clearnet connection proof of concept for Tails</source>
      </item>
      <item>
        <title>Simple clearnet connection proof of concept for Tails</title>
        <dc:creator><![CDATA[xariv]]></dc:creator>
        <description><![CDATA[
            <p>Thanks.</p>
<p>curl is installed by default, and for the sake of the proof of concept, connecting to an IP will do, so no need to handle DNS.</p>
<p>But, root access is a deal breaker.</p>
<p>My thinking goes - if the “unsafe browser” runs without root, should it not be possible to do a trivial connection (as in your curl examples) without it?</p>
<p>I guess I need to dig inside the bash scripts that run that browser to figure out the answer.</p>
          <p><a href="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/4</link>
        <pubDate>Sun, 24 Feb 2019 13:43:10 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6866-4</guid>
        <source url="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866.rss">Simple clearnet connection proof of concept for Tails</source>
      </item>
      <item>
        <title>Simple clearnet connection proof of concept for Tails</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>With or without root access?</p>
<p>Without root access / root privilege escalation exploit I wouldn’t know.</p>
<p>Assuming Tails booted with manually enabling root access boot options (if it still exists, I guess so).</p>
<p>Untested. I lack motivation to actually test this. But perhaps below works. That’s my conclusion from reading their code related to that since I was interested in it for other reasons earlier. (These reasons were: Tor Browser over clearnet, separate Tor/i2p browser profiles)</p>
<hr>
<p>Prerequisite: find out the IP address of <code>check.torproject.org</code>. This has to be done on some system with functional system DNS such as a clearnet host or Whonix-Workstation or some online service. (Since my instructions below do not include how to make DNS working.)</p>
<pre><code>nslookup check.torproject.org
</code></pre>
<blockquote>
<p>Address: 138.201.14.212</p>
</blockquote>
<p>The IP address remained unchanged for at least over a year now or so, I think.</p>
<hr>
<p>I don’t know if <code>curl</code> is installed by default in Tails. May or may not be required.</p>
<pre><code>sudo apt-get update
sudo apt-get install curl
</code></pre>
<hr>
<p>From now, assuming curl is installed and root access is available.</p>
<p>The following command can fetch <a href="https://check.torproject.org" rel="nofollow noopener">https://check.torproject.org</a> even while DNS is unconfigured.</p>
<pre><code>sudo -u clearnet curl --tlsv1.2 --proto =https -H 'Host: check.torproject.org' -k https://138.201.14.212
</code></pre>
<p>If that worked… To see your external IP more easily.</p>
<pre><code>sudo -u clearnet curl --tlsv1.2 --proto =https -H 'Host: check.torproject.org' -k https://138.201.14.212 | grep IP
</code></pre>
<hr>
<p>To make clearnet DNS access (for user <code>clearnet</code>) functional the following may or may not work.</p>
<pre><code>sudo cp /etc/resolv-over-clearnet.conf /etc/resolv.conf
</code></pre>
<hr>
<p>Prevent sudo from complaining about failing to resolve the ‘amnesia’ host.</p>
<pre><code>echo "127.0.0.1 localhost amnesia" | sudo tee -a /etc/hosts
</code></pre>
<hr>
<p>In case DNS is functional, even the following should work.</p>
<pre><code class="lang-auto">sudo -u clearnet curl --tlsv1.2 --proto =https https://check.torproject.org
</code></pre>
<p>Perhaps also nslookup would work.</p>
<pre><code class="lang-auto">sudo -u clearnet nslookup check.torproject.org
</code></pre>
          <p><a href="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/3</link>
        <pubDate>Sun, 24 Feb 2019 11:08:37 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6866-3</guid>
        <source url="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866.rss">Simple clearnet connection proof of concept for Tails</source>
      </item>
      <item>
        <title>Simple clearnet connection proof of concept for Tails</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="1" data-topic="6866">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/x/a88e4f/40.png" class="avatar"> xariv:</div>
<blockquote>
<p>Is this possible?</p>
</blockquote>
</aside>
<p>Yes. But this is something you will have to figure out.</p>
          <p><a href="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/2</link>
        <pubDate>Sun, 24 Feb 2019 10:47:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6866-2</guid>
        <source url="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866.rss">Simple clearnet connection proof of concept for Tails</source>
      </item>
      <item>
        <title>Simple clearnet connection proof of concept for Tails</title>
        <dc:creator><![CDATA[xariv]]></dc:creator>
        <description><![CDATA[
            <p>Unlike in Whonix, it’s very easy to start a clearnet connection in Tails - one can use the "Unsafe browser’ (included for the purpose of connecting to captive networks).</p>
<p><a href="https://tails.boum.org/contribute/design/Unsafe_Browser/" class="onebox" target="_blank" rel="nofollow noopener">https://tails.boum.org/contribute/design/Unsafe_Browser/</a></p>
<p>This browser comes with many warnings though to prevent the user from gaining a false sense of safely.</p>
<p>The browser runs with the clearnet user. Code for that is at the above link.</p>
<p>I am looking for a simple proof of concept though, demonstrating that a simple bash script can create a direct connection to a clearnet site without any warnings (on Tails).</p>
<p>Needless to say, the same script is expected to fail in Whonix.</p>
<p>Is this possible?</p>
          <p><a href="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866/1</link>
        <pubDate>Sun, 24 Feb 2019 08:53:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6866-1</guid>
        <source url="http://forums.whonix.org/t/simple-clearnet-connection-proof-of-concept-for-tails/6866.rss">Simple clearnet connection proof of concept for Tails</source>
      </item>
  </channel>
</rss>
