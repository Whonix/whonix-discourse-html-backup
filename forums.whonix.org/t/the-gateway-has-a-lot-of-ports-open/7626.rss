<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>The gateway has a lot of ports open</title>
    <link>http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626</link>
    <description>Running `nmap 127.0.0.1` on the gateway shows all the open ports.

The output is

```
PORT     STATE SERVICE
9050/tcp open  tor-socks
9100/tcp open  jetdirect
9101/tcp open  jetdirect
9102/tcp open  jetdirect
9103/tcp open  jetdirect
9110/tcp open  unknown
9111/tcp open  DragonIDSConsole
9200/tcp open  wap-wsp
9207/tcp open  wap-vcal-s
9220/tcp open  unknown
```

Why are there so many ports open? What are they used for? They should be closed if not in use.</description>
    <language>en</language>
    <lastBuildDate>Fri, 28 Jun 2019 11:25:37 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>The gateway has a lot of ports open</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>I doubt having a few more ports open would increase RAM noticeably. Unless those ports could be used to connect to the Gateway and be used for malicious purposes, the advantages would be slim.</p>
          <p><a href="http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626/5</link>
        <pubDate>Fri, 28 Jun 2019 11:25:37 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7626-5</guid>
        <source url="http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626.rss">The gateway has a lot of ports open</source>
      </item>
      <item>
        <title>The gateway has a lot of ports open</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>In theory - we could save some Whonix-Gateway RAM by using a mechanism similar to <a href="https://github.com/Whonix/anon-ws-disable-stacked-tor" rel="nofollow noopener">https://github.com/Whonix/anon-ws-disable-stacked-tor</a> / <a href="https://www.whonix.org/wiki/Dev/anon-ws-disable-stacked-tor" rel="nofollow noopener">https://www.whonix.org/wiki/Dev/anon-ws-disable-stacked-tor</a> using <code>systemd-socket-proxyd</code> (systemd listens with a stub port and starts the actual service on demand) but this clashes with Tor, which has:</p>
<ul>
<li>usually just one global config file</li>
<li>usually only one Tor ControlPort</li>
<li>usually only one Tor state folder (which contains Tor entry guards)</li>
</ul>
<p>Does Whonix-Gateway RAM use less RAM with less open ports by Tor?</p>
<p>If there is something to it, we could perhaps auto generate Tor config and only on demand add ports to Tor’s config (when an application tried to use them) and then <code>sudo systemctl reload tor@default</code> after config update.</p>
<p>Or if we want to follow <a href="https://www.whonix.org/wiki/Tor_Entry_Guards#Increase_Protection_from_Malicious_Entry_Guards:_One_Guard_per_Application" rel="nofollow noopener">https://www.whonix.org/wiki/Tor_Entry_Guards#Increase_Protection_from_Malicious_Entry_Guards:_One_Guard_per_Application</a> we could start a new Tor instance per application on demand. Still wouldn’t know how to handle the Tor ControlPort in that case. Perhaps only ControlPort for applications where we know these are going to use it.</p>
<p>[Any disk space issues with that due to multiple Tor state folders? ~ 7 MB per Tor data folder.]</p>
          <p><a href="http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626/4</link>
        <pubDate>Fri, 28 Jun 2019 06:49:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7626-4</guid>
        <source url="http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626.rss">The gateway has a lot of ports open</source>
      </item>
      <item>
        <title>The gateway has a lot of ports open</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>Thanks! All the ports were in the file you linked.</p>
          <p><a href="http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626/3</link>
        <pubDate>Thu, 27 Jun 2019 17:43:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7626-3</guid>
        <source url="http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626.rss">The gateway has a lot of ports open</source>
      </item>
      <item>
        <title>The gateway has a lot of ports open</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>A lot references can be found by <code>grep</code>ing Whonix source code.</p>
<p><a href="https://www.whonix.org/wiki/Dev/git#grep_Whonix_source_code" rel="nofollow noopener">https://www.whonix.org/wiki/Dev/git#grep_Whonix_source_code</a></p>
<p>You can find most ports here:</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/share/tor/tor-service-defaults-torrc.anondist" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/share/tor/tor-service-defaults-torrc.anondist" target="_blank" rel="nofollow noopener">Whonix/anon-gw-anonymizer-config/blob/master/usr/share/tor/tor-service-defaults-torrc.anondist</a></h4>
<pre><code class="lang-anondist"># Copyright (C) 2012 - 2018 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
# See the file COPYING for copying conditions.

# Please use "/usr/local/etc/torrc.d/50_user.conf" for your custom
# configuration, which will override the defaults found here.
# When this package is updated, this file may be overwritten.

# You can find the original upstream tor-service-defaults-torrc under
# /usr/share/tor/tor-service-defaults-torrc.anondist-orig

######################################################################
# DO NOT CHANGE ANYTHING BELOW, UNLESS YOU KNOW WHAT YOU ARE DOING! #
# DO NOT CHANGE ANYTHING BELOW, UNLESS YOU KNOW WHAT YOU ARE DOING! #
# DO NOT CHANGE ANYTHING BELOW, UNLESS YOU KNOW WHAT YOU ARE DOING! #
# DO NOT CHANGE ANYTHING BELOW, UNLESS YOU KNOW WHAT YOU ARE DOING! #
# DO NOT CHANGE ANYTHING BELOW, UNLESS YOU KNOW WHAT YOU ARE DOING! #
######################################################################

   ###################
### Internals torrc #
</code></pre>

  This file has been truncated. <a href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/share/tor/tor-service-defaults-torrc.anondist" target="_blank" rel="nofollow noopener">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>And for any unknown ports still, please <code>grep</code> Whonix source code.</p>
          <p><a href="http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626/2</link>
        <pubDate>Thu, 27 Jun 2019 17:37:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7626-2</guid>
        <source url="http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626.rss">The gateway has a lot of ports open</source>
      </item>
      <item>
        <title>The gateway has a lot of ports open</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>Running <code>nmap 127.0.0.1</code> on the gateway shows all the open ports.</p>
<p>The output is</p>
<pre><code class="lang-auto">PORT     STATE SERVICE
9050/tcp open  tor-socks
9100/tcp open  jetdirect
9101/tcp open  jetdirect
9102/tcp open  jetdirect
9103/tcp open  jetdirect
9110/tcp open  unknown
9111/tcp open  DragonIDSConsole
9200/tcp open  wap-wsp
9207/tcp open  wap-vcal-s
9220/tcp open  unknown
</code></pre>
<p>Why are there so many ports open? What are they used for? They should be closed if not in use.</p>
          <p><a href="http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626/1</link>
        <pubDate>Thu, 27 Jun 2019 17:03:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7626-1</guid>
        <source url="http://forums.whonix.org/t/the-gateway-has-a-lot-of-ports-open/7626.rss">The gateway has a lot of ports open</source>
      </item>
  </channel>
</rss>
