<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>inform user that torbrowser won&#39;t start</title>
    <link>http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298</link>
    <description>https://github.com/Kicksecure/tb-starter/blob/master/usr/bin/torbrowser#L747

`export tb_no_start=&quot;true&quot;`

prevents torbrowser from starting, but no info message is shown on the gui or on the cli, would need to enabled `set -x` at the top.

What I want to do is print on both as the default behavior.

I want some of my qubes to not start the browser, but in the future I can forget why the browser is not starting as no info message is printed.

Another thing, `tb_no_start` should be capitalized as it is an environment variable.</description>
    <language>en</language>
    <lastBuildDate>Mon, 26 Sep 2022 11:34:16 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>inform user that torbrowser won&#39;t start</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Excellent! Merged. Thank you!</p>
<p>(But reverted the /rw related changes as per <a href="https://forums.whonix.org/t/rw-config-versus-usr-local-etc/15621" class="inline-onebox">/rw/config versus /usr/local/etc</a>)</p>
          <p><a href="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/11</link>
        <pubDate>Mon, 26 Sep 2022 11:34:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15298-11</guid>
        <source url="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298.rss">inform user that torbrowser won&#39;t start</source>
      </item>
      <item>
        <title>inform user that torbrowser won&#39;t start</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>2 posts were split to a new topic: <a href="http://forums.whonix.org/t/rw-config-versus-usr-local-etc/15621">/rw/config versus /usr/local/etc</a></p>
          <p><a href="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/9</link>
        <pubDate>Mon, 26 Sep 2022 11:15:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15298-9</guid>
        <source url="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298.rss">inform user that torbrowser won&#39;t start</source>
      </item>
      <item>
        <title>inform user that torbrowser won&#39;t start</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubpullrequest" data-onebox-src="https://github.com/Kicksecure/tb-starter/pull/13">
  <header class="source">

      <a href="https://github.com/Kicksecure/tb-starter/pull/13" target="_blank" rel="noopener nofollow ugc">github.com/Kicksecure/tb-starter</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Kicksecure/tb-starter/pull/13" target="_blank" rel="noopener nofollow ugc">print tb_no_start=true output to cli and gui</a>
    </h4>

    <div class="branches">
      <code>Kicksecure:master</code> ← <code>nyxnor:master</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-09-25" data-time="23:10:23" data-timezone="UTC">11:10PM - 25 Sep 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/nyxnor" target="_blank" rel="noopener nofollow ugc">
          <img alt="nyxnor" src="https://avatars.githubusercontent.com/u/69700936?v=4" class="onebox-avatar-inline" width="20" height="20">
          nyxnor
        </a>
      </div>

      <div class="lines" title="3 commits changed 2 files with 29 additions and 8 deletions">
        <a href="https://github.com/Kicksecure/tb-starter/pull/13/files" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+29</span>
          <span class="removed">-8</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">https://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/9
- fa<span class="show-more-container"><a href="https://github.com/Kicksecure/tb-starter/pull/13" target="_blank" rel="noopener nofollow ugc" class="show-more">…</a></span><span class="excerpt hidden">il early if torbrowser is set to not start
- add its option to the man
- correct sourcing precedence</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/10</link>
        <pubDate>Sun, 25 Sep 2022 23:10:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15298-10</guid>
        <source url="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298.rss">inform user that torbrowser won&#39;t start</source>
      </item>
      <item>
        <title>inform user that torbrowser won&#39;t start</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p>Ok, just trying to avoid someone filling a bug beause it reports to them that they should report a bug to whonix, even though I understand it is not a bug.</p>
<p>Will MR soon, just seeing if there is any other option to not start tor not reporting it explictly.</p>
          <p><a href="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/8</link>
        <pubDate>Tue, 20 Sep 2022 10:10:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15298-8</guid>
        <source url="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298.rss">inform user that torbrowser won&#39;t start</source>
      </item>
      <item>
        <title>inform user that torbrowser won&#39;t start</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Pull request welcome.</p>
<p>Not sure about exit code. But I am OK with exit code 1. Because if tb-starter is configured to not start and then uses starts it anyhow, then maybe that should be considered user error and exit non-zero.</p>
          <p><a href="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/7</link>
        <pubDate>Fri, 16 Sep 2022 15:43:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15298-7</guid>
        <source url="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298.rss">inform user that torbrowser won&#39;t start</source>
      </item>
      <item>
        <title>inform user that torbrowser won&#39;t start</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p>Any idea for a better text?</p>
<pre><code class="lang-auto">tb_start_tor_browser() {
   if [ "$tb_no_start" = "true" ]; then
      true "INFO: not starting $tb_title because tb_no_start is set to true."
      local MSG="\
&lt;p&gt;Not starting $tb_title as variable \$tb_no_start set to \"true\"!&lt;br&gt;&lt;/br&gt;
&lt;br&gt;&lt;/br&gt;
More info: User configured tb_no_start=\"true\"&lt;/p&gt;"

      $output ${output_opts[@]} --messagex --titlex "$TITLE" --typex "error" --message "$MSG" --done
      $output ${output_opts[@]} --messagecli --titlecli "$TITLE" --typecli "error" --message "$MSG" --done
      exit 0
   fi

....
}
</code></pre>
<p>maybe the exit code should be a different one, like 1, but it report as a bug if you run with <code>torbrowser whonix.org</code> because of the link confirmation handling.</p>
          <p><a href="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/6</link>
        <pubDate>Thu, 15 Sep 2022 22:24:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15298-6</guid>
        <source url="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298.rss">inform user that torbrowser won&#39;t start</source>
      </item>
      <item>
        <title>inform user that torbrowser won&#39;t start</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p><code>/usr/local/etc/torbrowser.d</code> works for per app qube, just missing documentation.</p>
<h3>
<a name="missing-documentation-1" class="anchor" href="http://forums.whonix.org#missing-documentation-1"></a>Missing documentation:</h3>
<ul>
<li>about <code>/usr/loca/etc/torbrowser.d</code>
</li>
<li>about all variables that can be set</li>
</ul>
<p>to be added to the files:</p>
<ul>
<li>the wiki <a href="https://www.whonix.org/wiki/Tor_Browser" class="inline-onebox" rel="noopener nofollow ugc">Tor Browser Essentials</a>
</li>
<li>the manual <a href="https://github.com/Kicksecure/tb-starter/blob/master/man/torbrowser.1.ronn#config-file" class="inline-onebox" rel="noopener nofollow ugc">tb-starter/torbrowser.1.ronn at master · Kicksecure/tb-starter · GitHub</a>
</li>
</ul>
<h3>
<a name="missing-informative-message-2" class="anchor" href="http://forums.whonix.org#missing-informative-message-2"></a>Missing informative message</h3>
<p>about why the browser won’t start, because some variable was set in this case for it to not start at all.</p>
          <p><a href="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/5</link>
        <pubDate>Wed, 14 Sep 2022 20:05:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15298-5</guid>
        <source url="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298.rss">inform user that torbrowser won&#39;t start</source>
      </item>
      <item>
        <title>inform user that torbrowser won&#39;t start</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p>Now that I saw <code>/etc/torbrowser.d</code>, the variable can be set there, but will only persist on templates.</p>
<p>Which I think it is fine, but that is why I am exporting the variable via <code>/rw/config/rc.local</code>, because it is either that or appending to <code>/etc/torbrowser.d/50_user.conf</code> with rc.local again for per qube configuration.</p>
<p>Anyway, I just want it to inform why torbrowser won’t start.</p>
          <p><a href="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/4</link>
        <pubDate>Wed, 14 Sep 2022 17:38:04 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15298-4</guid>
        <source url="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298.rss">inform user that torbrowser won&#39;t start</source>
      </item>
      <item>
        <title>inform user that torbrowser won&#39;t start</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="2" data-topic="15298">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Just a console output or console output + popup?</p>
</blockquote>
</aside>
<p>yes</p>
          <p><a href="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/3</link>
        <pubDate>Wed, 14 Sep 2022 16:33:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15298-3</guid>
        <source url="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298.rss">inform user that torbrowser won&#39;t start</source>
      </item>
      <item>
        <title>inform user that torbrowser won&#39;t start</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Just a console output or console output + popup?</p>
<aside class="quote no-group" data-username="nyxnor" data-post="1" data-topic="15298">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/nyxnor/40/2874_2.png" class="avatar"> nyxnor:</div>
<blockquote>
<p>Another thing, <code>tb_no_start</code> should be capitalized as it is an environment variable.</p>
</blockquote>
</aside>
<p>For that, could you create a separate forum thread please? Variables naming conventions lower case versus uppercase… That would need to be resolved if there is a convention for this or one way being more popular than the other or some sort of authoritative bash style guide. Because there would be many variables in Whonix source code that would have to be renamed.</p>
          <p><a href="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/2</link>
        <pubDate>Wed, 14 Sep 2022 16:30:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15298-2</guid>
        <source url="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298.rss">inform user that torbrowser won&#39;t start</source>
      </item>
      <item>
        <title>inform user that torbrowser won&#39;t start</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubblob" data-onebox-src="https://github.com/Kicksecure/tb-starter/blob/master/usr/bin/torbrowser#L747">
  <header class="source">

      <a href="https://github.com/Kicksecure/tb-starter/blob/master/usr/bin/torbrowser#L747" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/Kicksecure/tb-starter/blob/master/usr/bin/torbrowser#L747" target="_blank" rel="noopener nofollow ugc">Kicksecure/tb-starter/blob/master/usr/bin/torbrowser#L747</a></h4>



    <pre class="onebox">      <code class="lang-">
        <ol class="start lines" start="737" style="counter-reset: li-counter 736 ;">
            <li>
            </li>
<li>   tb_firejailopts[${#tb_firejailopts[@]}]="--profile=torbrowser-launcher"</li>
            <li>
            </li>
<li>   ## https://forums.whonix.org/t/automatically-firejailing-tor-browser/4767/21</li>
            <li>   #tb_firejailopts[${#tb_firejailopts[@]}]="--x11=xorg"</li>
            <li>
            </li>
<li>   tb_firejailopts[${#tb_firejailopts[@]}]="--quiet"</li>
            <li>}</li>
            <li>
            </li>
<li>tb_start_tor_browser() {</li>
            <li class="selected">   if [ "$tb_no_start" = "true" ]; then</li>
            <li>      true "INFO: not starting $tb_title because tb_no_start is set to true."</li>
            <li>      return 0</li>
            <li>   fi</li>
            <li>
            </li>
<li>   local temp</li>
            <li>   local tb_exit_code="0"</li>
            <li>   if [ "$tb_hardening" = "true" ]; then</li>
            <li>      temp="$tb_firejail_bin ${tb_firejailopts[@]} $tb_starter_bin_pre $tb_starter_bin --verbose --allow-remote $tb_starter_bin_post $@"</li>
            <li>      $tb_firejail_bin ${tb_firejailopts[@]} $tb_starter_bin_pre $tb_starter_bin --verbose --allow-remote $tb_starter_bin_post "$@" || { tb_exit_code="$?" ; true; };</li>
            <li>   else</li>
        </ol>
      </code>
    </pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p><code>export tb_no_start="true"</code></p>
<p>prevents torbrowser from starting, but no info message is shown on the gui or on the cli, would need to enabled <code>set -x</code> at the top.</p>
<p>What I want to do is print on both as the default behavior.</p>
<p>I want some of my qubes to not start the browser, but in the future I can forget why the browser is not starting as no info message is printed.</p>
<p>Another thing, <code>tb_no_start</code> should be capitalized as it is an environment variable.</p>
          <p><a href="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/1</link>
        <pubDate>Wed, 14 Sep 2022 10:43:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15298-1</guid>
        <source url="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298.rss">inform user that torbrowser won&#39;t start</source>
      </item>
  </channel>
</rss>
