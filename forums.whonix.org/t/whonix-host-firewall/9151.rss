<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Whonix-Host Firewall</title>
    <link>http://forums.whonix.org/t/whonix-host-firewall/9151</link>
    <description>[quote=&quot;Patrick, post:188, topic:3931&quot;]
I guess for example at minimum we should have a basic host firewall. -&gt; https://phabricator.whonix.org/T942
[/quote]


How easy is it to adapt corridor and allow non torrified VMs like Kicksecure to connect too? Think dealing with captive portals. Per vm network granularity may be bluntly possible  by excluding the kvm user group from networking restrictions o ensure no other non tor traffic form the host may happen. This should allow updates via apt-tor to work too.</description>
    <language>en</language>
    <lastBuildDate>Sun, 24 May 2020 22:23:07 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/whonix-host-firewall/9151.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Whonix-Host Firewall</title>
        <dc:creator><![CDATA[anontor]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/hulahoop">@HulaHoop</a><br>
Sure, you can try the “iprange” module; use it with -m (match) like that: -m iprange --src-range 192.200.300.100-192.200.300.200 for example.  Narrow it further with -i [interface] | -o [interface] and -p tcp | -p udp<br>
Oh yes almost forgot, use it in the nat table PREROUTING chain for more versatility: iptables -t nat -A PREROUTING -m iprange --src-range [ip ranges here] --j [ACCEPT, DROP, FORWARD, JUMP etc]<br>
caveats are that make sure the ranges and subnets do not criss cross otherwise iptables becomes confused</p>
          <p><a href="http://forums.whonix.org/t/whonix-host-firewall/9151/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-host-firewall/9151/7</link>
        <pubDate>Sun, 24 May 2020 22:16:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9151-7</guid>
        <source url="http://forums.whonix.org/t/whonix-host-firewall/9151.rss">Whonix-Host Firewall</source>
      </item>
      <item>
        <title>Whonix-Host Firewall</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>In the case of Whonix GW we already have a static IP configured on eth0 10.0.2.15 so it might be redundant here?</p>
<p>However this is useful for the case of Kicksecure VM which has DHCP to connect on “default”.</p>
<p>Can iptables on the host be configured to to allow outgoing for the Ranges that libvirt uses for its NAT networks?</p>
          <p><a href="http://forums.whonix.org/t/whonix-host-firewall/9151/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-host-firewall/9151/6</link>
        <pubDate>Sun, 24 May 2020 15:09:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9151-6</guid>
        <source url="http://forums.whonix.org/t/whonix-host-firewall/9151.rss">Whonix-Host Firewall</source>
      </item>
      <item>
        <title>Whonix-Host Firewall</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Quote <a href="https://libvirt.org/formatnwfilter.html#nwfconcepts">https://libvirt.org/formatnwfilter.html#nwfconcepts</a></p>
<pre><code class="lang-auto">&lt;devices&gt;
  &lt;interface type='bridge'&gt;
    &lt;mac address='00:16:3e:5d:c7:9e'/&gt;
    &lt;filterref filter='clean-traffic'&gt;
      &lt;parameter name='IP' value='10.0.0.1'/&gt;
    &lt;/filterref&gt;
  &lt;/interface&gt;
&lt;/devices&gt;
</code></pre>
<p>In this particular example, the clean-traffic network traffic filter will be instantiated with the IP address parameter 10.0.0.1 and enforce that the traffic from this interface will always be using 10.0.0.1 as the source IP address, which is one of the purposes of this particular filter.</p>
<ul>
<li><a href="https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-Gateway.xml">https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-Gateway.xml</a></li>
<li><a href="https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-External.xml">https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-External.xml</a></li>
</ul>
<p>That might be helpful. To write iptables rules to express “traffic from Whonix-Gateway is allowed” is would be helpful to have a stable IP or better stable interface name on the host from which traffic is being sent.</p>
<p>IP address might be non-ideal for multiple Whonix-Gateway use case.</p>
<p>“helpful” could mean “required” if there is no other way to distinguish Whonix-Gateway traffic vs other host traffic.</p>
          <p><a href="http://forums.whonix.org/t/whonix-host-firewall/9151/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-host-firewall/9151/5</link>
        <pubDate>Sat, 23 May 2020 22:36:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9151-5</guid>
        <source url="http://forums.whonix.org/t/whonix-host-firewall/9151.rss">Whonix-Host Firewall</source>
      </item>
      <item>
        <title>Whonix-Host Firewall</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="HulaHoop" data-post="3" data-topic="9151">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>OK I guess next best thing is to permit only debian-tor and kvm groups to connect on the host. Same trick you use for GW.</p>
</blockquote>
</aside>
<p>Not easy either.</p>
<p>On Whonix-Gateway this is possible and for Tor and linux user group <code>debian-tor</code> because Tor is just a normal application.</p>
<p>For Whonix-Host for KVM this might not be possible by simply only allowing kvm groups to connect to the internet because KVM isn’t an application. It’s inside the kernel and works differently.</p>
<p>For first iteration just a “simple” Whonix host firewall. It doesn’t get any less secure than previously Debian Host + Whonix-Gateway + Whonix-Workstation.</p>
<p>corridor and/or kvm-only outgoing traffic can be considered in a later release.</p>
<p>Related:</p>
<aside class="quote" data-post="1" data-topic="7404">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/should-whonix-host-be-fully-torified-by-default/7404">Should Whonix host be fully torified by default?</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/development"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    What are the pros and cons of either?
  </blockquote>
</aside>

          <p><a href="http://forums.whonix.org/t/whonix-host-firewall/9151/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-host-firewall/9151/4</link>
        <pubDate>Tue, 17 Mar 2020 16:36:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9151-4</guid>
        <source url="http://forums.whonix.org/t/whonix-host-firewall/9151.rss">Whonix-Host Firewall</source>
      </item>
      <item>
        <title>Whonix-Host Firewall</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="2" data-topic="9151">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Corridor on the host not easy at all.</p>
</blockquote>
</aside>
<p>OK I guess next best thing is to permit only debian-tor and kvm groups to connect on the host. Same trick you use for GW.</p>
          <p><a href="http://forums.whonix.org/t/whonix-host-firewall/9151/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-host-firewall/9151/3</link>
        <pubDate>Tue, 17 Mar 2020 16:28:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9151-3</guid>
        <source url="http://forums.whonix.org/t/whonix-host-firewall/9151.rss">Whonix-Host Firewall</source>
      </item>
      <item>
        <title>Whonix-Host Firewall</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Corridor on the host not easy at all.</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/rustybird/corridor/issues/28" target="_blank">github.com/rustybird/corridor</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/rustybird/corridor/issues/28" target="_blank">testing on Debian host</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2016-07-24" data-time="13:01:55" data-timezone="UTC">01:01PM - 24 Jul 16 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/HulaHoopWhonix" target="_blank">
          <img alt="HulaHoopWhonix" src="https://avatars3.githubusercontent.com/u/7875239?v=4" class="onebox-avatar-inline" width="20" height="20">
          HulaHoopWhonix
        </a>
      </div>
    </div>
  </div>
</div>

<div class="github-row">
  <p class="github-content">Hi. I tested corridor on a Debian host running Whonix KVM guests.
Results:
It blocks any new Whonix connections after the corridor service...</p>
</div>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/rustybird/corridor/issues/3" target="_blank">github.com/rustybird/corridor</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/rustybird/corridor/issues/3" target="_blank">Option to use corridor as host firewall rather than gateway?</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2014-08-03" data-time="20:23:46" data-timezone="UTC">08:23PM - 03 Aug 14 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
      </div>
    </div>
  </div>
</div>

<div class="github-row">
  <p class="github-content">There are good reasons for anonymity not to emit any non-Tor traffic while browsing with Tor. Example, correlation of torified and...</p>
</div>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/whonix-host-firewall/9151/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-host-firewall/9151/2</link>
        <pubDate>Tue, 17 Mar 2020 16:22:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9151-2</guid>
        <source url="http://forums.whonix.org/t/whonix-host-firewall/9151.rss">Whonix-Host Firewall</source>
      </item>
      <item>
        <title>Whonix-Host Firewall</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="188" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"><a href="//forums.whonix.org/t/whonix-host-operating-system/3931/188">Whonix host operating system</a>
</div>
<blockquote>
<p>I guess for example at minimum we should have a basic host firewall. -&gt; <a href="https://phabricator.whonix.org/T942">https://phabricator.whonix.org/T942</a></p>
</blockquote>
</aside>
<p>How easy is it to adapt corridor and allow non torrified VMs like Kicksecure to connect too? Think dealing with captive portals. Per vm network granularity may be bluntly possible  by excluding the kvm user group from networking restrictions o ensure no other non tor traffic form the host may happen. This should allow updates via apt-tor to work too.</p>
          <p><a href="http://forums.whonix.org/t/whonix-host-firewall/9151/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-host-firewall/9151/1</link>
        <pubDate>Tue, 17 Mar 2020 15:59:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9151-1</guid>
        <source url="http://forums.whonix.org/t/whonix-host-firewall/9151.rss">Whonix-Host Firewall</source>
      </item>
  </channel>
</rss>
