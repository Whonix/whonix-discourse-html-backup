<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>sdwdate and sdwdate-gui development thread</title>
    <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137</link>
    <description>There is a modified standalone url_to_unixtime at https://github.com/troubadoour/url_to_unixtime-asynchronous.

The idea is to get the time from the pool&#39;s remotes asynchronously, using some of the Python gevent magic. Besides an improved transparency of timesync, the rationale is that if we want to implement https://phabricator.whonix.org/T300 and block internet access after boot as long as the time synchronization has not finished, the shorter it takes, the better for the user.

In the script, for the sake of demonstration, the three pools are concatenated into a single one. After running it a sufficient number of times, you should have seen many combinations of errors (connect error, timeout, header parsing...). In all the cases, the duration of the acquisition is reduced drastically.

I do not know if this approach looks sound, but it would require some major changes in sdwdate. The pools being moved in url_to_unixtime, all the logic from sdwdate_pick and above (sdwdate_loop, sdwdate_get_time_from_remote and even sdwdate_build_median) would be done in the new module(s). Perhaps a starting point to port sdwdate to Python.</description>
    <language>en</language>
    <lastBuildDate>Sat, 17 Sep 2022 18:57:13 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Debian bug report:<br>
<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1019581">broken Tor connection after extended suspend/resume - Tor’s systemd service should restart Tor on resume/thaw after sleep/hibernate</a></p>
          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/394">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/394</link>
        <pubDate>Sat, 17 Sep 2022 18:57:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-394</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Yeah. A Tor issue reported again here:</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://gitlab.torproject.org/tpo/core/tor/-/issues/40200">
  <header class="source">
      <img src="https://gitlab.torproject.org/uploads/-/system/appearance/favicon/1/favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/40200" target="_blank" rel="noopener">GitLab</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:246/362;"><img src="https://gitlab.torproject.org/uploads/-/system/project/avatar/426/tor_logo.png" class="thumbnail" width="246" height="362"></div>

<h3><a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/40200" target="_blank" rel="noopener">Tor is slow to reconnect after network connectivity change (#40200) · Issues...</a></h3>

  <p>TBB takes several minutes to become usable again in the following situation: I'm on a laptop and use hibernate. Network interface is shut down before hibernating,...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<blockquote>
<p>Nick Mathewson <img src="//forums.whonix.org/images/emoji/twitter/bridge_at_night.png?v=12" title=":bridge_at_night:" class="emoji" alt=":bridge_at_night:"> <span class="mention">@nickm</span> added<br>
Close in favor of Arti<br>
label 2 months ago</p>
</blockquote>
<p>So Tor Project won’t fix it. Though, it might be fixed when Arti is released or at least then it could be re-tested and re-reported.</p>
          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/393">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/393</link>
        <pubDate>Mon, 12 Sep 2022 15:07:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-393</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>This is the upstream bug report:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://gitlab.torproject.org/tpo/core/tor/-/issues/25456">
  <header class="source">
      <img src="https://gitlab.torproject.org/uploads/-/system/appearance/favicon/1/favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/25456" target="_blank" rel="noopener">GitLab</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:246/362;"><img src="https://gitlab.torproject.org/uploads/-/system/project/avatar/426/tor_logo.png" class="thumbnail" width="246" height="362"></div>

<h3><a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/25456" target="_blank" rel="noopener">tor's systemd service should SIGHUP tor on resume/thaw after sleep/hibernate...</a></h3>

  <p>I very often need to SIGHUP my tor process after reopening my laptop after the new guard algorithm was merged (I had to also do so before, but...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>The ticket was closed because of this:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://gitlab.torproject.org/tpo/core/tor/-/issues/30797">
  <header class="source">
      <img src="https://gitlab.torproject.org/uploads/-/system/appearance/favicon/1/favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/30797" target="_blank" rel="noopener">GitLab</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:246/362;"><img src="https://gitlab.torproject.org/uploads/-/system/project/avatar/426/tor_logo.png" class="thumbnail" width="246" height="362"></div>

<h3><a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/30797" target="_blank" rel="noopener">Stop shipping an abandoned systemd script? (#30797) · Issues · The Tor Project...</a></h3>

  <p>legacy/trac#19759,</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>So the original issue was ignored and not forwarded elsewhere.</p>
          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/392">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/392</link>
        <pubDate>Mon, 12 Sep 2022 14:48:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-392</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[nyxnor]]></dc:creator>
        <description><![CDATA[
            <p>Read all the GETINFO commands, nothing that I think 100% would work.<br>
<a href="https://gitweb.torproject.org/torspec.git/tree/control-spec.txt#n1126" class="onebox" target="_blank" rel="noopener nofollow ugc">https://gitweb.torproject.org/torspec.git/tree/control-spec.txt#n1126</a></p>
<p><code>GETINFO  network-liveness</code> also does not work.</p>
<aside class="onebox githubblob" data-onebox-src="https://github.com/radio24/TorBox/blob/master/log_check_config.py">
  <header class="source">

      <a href="https://github.com/radio24/TorBox/blob/master/log_check_config.py" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/radio24/TorBox/blob/master/log_check_config.py" target="_blank" rel="noopener nofollow ugc">radio24/TorBox/blob/master/log_check_config.py</a></h4>


      <pre><code class="lang-py">#!/usr/bin/python3
# -*- coding: utf-8 -*-

#&nbsp;This file is part of TorBox, an easy to use anonymizing router based on Raspberry Pi.
# Copyright (C) 2022 Patrick Truffer
# Contact: anonym@torbox.ch
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it is useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.

</code></pre>



  This file has been truncated. <a href="https://github.com/radio24/TorBox/blob/master/log_check_config.py" target="_blank" rel="noopener nofollow ugc">show original</a>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>This project tries to act based on tor logs, but instead of a file, we can use <code>tor-ctrl -w -- SETEVENTS WARN</code> for only relevant events.</p>
<p>But found no command alone that could check if tor is really working.<br>
Because there is also that fact that all streams that are using a circuit that has a failing guard, will still try that guard and fail. And even if all guards are unreacheable, tor does not report that as a boolean, but on logs.</p>
<p>Anyway, asking upstream could be the best.</p>
          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/391">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/391</link>
        <pubDate>Mon, 12 Sep 2022 09:26:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-391</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>When using suspend and resume in Qubes-Whonix if too much time passed, Tor circuits will be invalid. This will result in sdwdate failing.</p>
<p>Tor control protocol (“Tor API”) reports everything being okay.</p>
<pre><code>sudo -u sdwdate /usr/libexec/helper-scripts/onion-time-pre-script 
</code></pre>
<blockquote>
<p>__ ### START: ### /usr/libexec/helper-scripts/onion-time-pre-script<br>
__ Status: Subsequent run after boot.<br>
__ Static Time Sanity Check: Within minimum time ‘Fri Feb 18 00:00:00 UTC 2022’ and expiration timestamp ‘Tue May 17 10:00:00 UTC 2033’, ok.<br>
__ Tor circuit: established<br>
__ Tor Consensus Time Sanity Check: Clock within consensus parameters consensus/valid-after 2022-09-11 18:00:00 and consensus/valid-until 2022-09-11 21:00:00.<br>
__ Conclusion: Tor already reports circuit established.<br>
__ ### END: ### Exiting with exit_code ‘0’ indicating ‘success’.</p>
</blockquote>
<p>sys-whonix…</p>
<pre><code>tor-prompt

GETINFO status/circuit-established
</code></pre>
<blockquote>
<p>250-status/circuit-established=1<br>
250 OK</p>
</blockquote>
<pre><code>GETINFO status/bootstrap-phase
</code></pre>
<blockquote>
<p>250-status/bootstrap-phase=NOTICE BOOTSTRAP PROGRESS=100 TAG=done SUMMARY=“Done”<br>
250 OK</p>
</blockquote>
<p>I suspect the information in Tor is actually cached and just returned when asked for. Tor doesn’t actually re-check this information.</p>
<p>Is there any way to force Tor to re-check this using Tor control protocol?</p>
<p>//cc <a class="mention" href="http://forums.whonix.org/u/nyxnor">@nyxnor</a></p>
          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/390">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/390</link>
        <pubDate>Sun, 11 Sep 2022 18:38:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-390</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="TNT_BOM_BOM" data-post="382" data-topic="1137">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/tnt_bom_bom/40/2148_2.png" class="avatar"> TNT_BOM_BOM:</div>
<blockquote>
<p>sdwdate-gui wont show up in the taskbar on non-kicksecure-xfce DE like e.g Gnome</p>
</blockquote>
</aside>
<p>Created for it:</p>
<aside class="quote" data-post="1" data-topic="14516">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/sdwdate-gui-does-not-show-up-in-other-desktop-environments/14516">sdwdate-gui does not show up in Other Desktop Environments</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/development/8"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of components looking for maintainer)">Development</span></a>
  </div>
  <blockquote>
    Was reported here. Separate forum thread as a ticket for tracking purposes.
  </blockquote>
</aside>

          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/389">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/389</link>
        <pubDate>Tue, 16 Aug 2022 09:39:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-389</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Done in git.</p>
          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/388">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/388</link>
        <pubDate>Sun, 24 Jul 2022 11:22:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-388</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[TNT_BOM_BOM]]></dc:creator>
        <description><![CDATA[
            <p>Clarify more 1/10000 in sdwdate message log.</p>
          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/387">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/387</link>
        <pubDate>Sat, 23 Jul 2022 22:44:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-387</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>4 posts were split to a new topic: <a href="http://forums.whonix.org/t/sdwdate-warning-clock-got-changed-by-something-other-than-sdwdate-sleep-time-seconds-6040-time-delta-6043-time-passed-3/13802">sdwdate - WARNING - Clock got changed by something other than sdwdate. sleep_time_seconds: 6040 time_delta: 6043 time_passed: -3</a></p>
          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/384">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/384</link>
        <pubDate>Fri, 17 Jun 2022 10:05:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-384</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubcommit" data-onebox-src="https://github.com/Kicksecure/sdwdate/commit/db6c54d890c4c4ed098f5adba2be9dc81b8664a6">
  <header class="source">

      <a href="https://github.com/Kicksecure/sdwdate/commit/db6c54d890c4c4ed098f5adba2be9dc81b8664a6" target="_blank" rel="noopener">github.com/Kicksecure/sdwdate</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Kicksecure/sdwdate/commit/db6c54d890c4c4ed098f5adba2be9dc81b8664a6" target="_blank" rel="noopener">avoid accidentally starting sdwdate as user/root,</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2022-06-17" data-time="09:49:16" data-timezone="UTC">09:49AM - 17 Jun 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank" rel="noopener">
          <img alt="adrelanos" src="https://avatars.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
      </div>

      <div class="lines" title="changed 3 files with 29 additions and 8 deletions">
        <a href="https://github.com/Kicksecure/sdwdate/commit/db6c54d890c4c4ed098f5adba2be9dc81b8664a6" target="_blank" rel="noopener">
          <span class="added">+29</span>
          <span class="removed">-8</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">if manually started by the user.
Since that does not work.</p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/386">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/386</link>
        <pubDate>Fri, 17 Jun 2022 09:49:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-386</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://www.kicksecure.com/wiki/Dev/sdwdate#sdwdate_linux_user_account">https://www.kicksecure.com/wiki/Dev/sdwdate#sdwdate_linux_user_account</a></p>
          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/385">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/385</link>
        <pubDate>Fri, 17 Jun 2022 09:49:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-385</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[TNT_BOM_BOM]]></dc:creator>
        <description><![CDATA[
            <p>sdwdate-gui wont show up in the taskbar on non-kicksecure-xfce DE like e.g Gnome</p>
<hr>
<p>Confusing Thing: (<strong>Whonix-WS</strong>)</p>
<p>Permission Denied because root not used:</p>
<blockquote>
<p>user@host:~$ sdwdate --verbose --debug<br>
2022-05-31 17:05:34 - sdwdate - INFO - sdwdate started. PID: 42564<br>
Traceback (most recent call last):<br>
File “/usr/bin/sdwdate”, line 10, in <br>
sdwdate.main()<br>
File “/usr/lib/python3/dist-packages/sdwdate/sdwdate.py”, line 1018, in main<br>
global_files()<br>
File “/usr/lib/python3/dist-packages/sdwdate/sdwdate.py”, line 970, in global_files<br>
Path(sdwdate_status_files_folder).mkdir(parents=True, exist_ok=True)<br>
File “/usr/lib/python3.9/pathlib.py”, line 1312, in mkdir<br>
self._accessor.mkdir(self, mode)<br>
PermissionError: [Errno 13] Permission denied: ‘/home/user/sdwdate’<br>
user@host:~$</p>
</blockquote>
<p>But sdwdate should not run as root:</p>
<blockquote>
<p>user@host:~$ sudo sdwdate --verbose --debug<br>
2022-05-31 17:05:18 - sdwdate - INFO - sdwdate started. PID: 42562<br>
2022-05-31 17:05:18 - sdwdate - ERROR - Exit error…         sdwdate should not be run as root!<br>
2022-05-31 17:05:18 - sdwdate - INFO - Exiting with exit_code ‘1’ because or reason ‘sdwdate should not be run as root.’.<br>
2022-05-31 17:05:18 - sdwdate - INFO - sdwdate stopped by user or system.<br>
write_status unexpected error: &lt;class ‘NameError’&gt;<br>
2022-05-31 17:05:18 - sdwdate - INFO - sclockadj process not running, ok.<br>
2022-05-31 17:05:18 - sdwdate - INFO - sleep process not running, ok.<br>
Traceback (most recent call last):<br>
File “/usr/bin/sdwdate”, line 10, in <br>
sdwdate.main()<br>
File “/usr/lib/python3/dist-packages/sdwdate/sdwdate.py”, line 1013, in main<br>
exit_handler(exit_code, reason)<br>
File “/usr/lib/python3/dist-packages/sdwdate/sdwdate.py”, line 116, in exit_handler<br>
Path(sleep_long_file_path).unlink(missing_ok=True)<br>
NameError: name ‘sleep_long_file_path’ is not defined</p>
</blockquote>
<p>?</p>
          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/382">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/382</link>
        <pubDate>Tue, 31 May 2022 15:39:21 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-382</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubcommit">
  <header class="source">

      <a href="https://github.com/Whonix/sdwdate-gui/commit/ccbeb868b20dc55b6c7723374dc7b1a16c1181bd" target="_blank" rel="noopener">github.com/Whonix/sdwdate-gui</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/sdwdate-gui/commit/ccbeb868b20dc55b6c7723374dc7b1a16c1181bd" target="_blank" rel="noopener">fix</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2022-01-01" data-time="10:53:56" data-timezone="UTC">10:53AM - 01 Jan 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank" rel="noopener">
          <img alt="adrelanos" src="https://avatars.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
      </div>

      <div class="lines" title="changed 1 files with 36 additions and 16 deletions">
        <a href="https://github.com/Whonix/sdwdate-gui/commit/ccbeb868b20dc55b6c7723374dc7b1a16c1181bd" target="_blank" rel="noopener">
          <span class="added">+36</span>
          <span class="removed">-16</span>
        </a>
      </div>
    </div>
  </div>
</div>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox githubcommit">
  <header class="source">

      <a href="https://github.com/Whonix/sdwdate-gui/commit/d2ff50f489b4459761633316fe25edb7a34c1ceb" target="_blank" rel="noopener">github.com/Whonix/sdwdate-gui</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/sdwdate-gui/commit/d2ff50f489b4459761633316fe25edb7a34c1ceb" target="_blank" rel="noopener">minor</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2022-01-01" data-time="11:01:14" data-timezone="UTC">11:01AM - 01 Jan 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank" rel="noopener">
          <img alt="adrelanos" src="https://avatars.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
      </div>

      <div class="lines" title="changed 1 files with 1 additions and 1 deletions">
        <a href="https://github.com/Whonix/sdwdate-gui/commit/d2ff50f489b4459761633316fe25edb7a34c1ceb" target="_blank" rel="noopener">
          <span class="added">+1</span>
          <span class="removed">-1</span>
        </a>
      </div>
    </div>
  </div>
</div>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox githubcommit">
  <header class="source">

      <a href="https://github.com/Whonix/sdwdate-gui/commit/a60a996ce2228830607aa7afdde8aec9d512daa0" target="_blank" rel="noopener">github.com/Whonix/sdwdate-gui</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/sdwdate-gui/commit/a60a996ce2228830607aa7afdde8aec9d512daa0" target="_blank" rel="noopener">restart action: use `sdwdate-clock-jump`</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2022-01-01" data-time="11:20:27" data-timezone="UTC">11:20AM - 01 Jan 22 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank" rel="noopener">
          <img alt="adrelanos" src="https://avatars.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
      </div>

      <div class="lines" title="changed 1 files with 1 additions and 4 deletions">
        <a href="https://github.com/Whonix/sdwdate-gui/commit/a60a996ce2228830607aa7afdde8aec9d512daa0" target="_blank" rel="noopener">
          <span class="added">+1</span>
          <span class="removed">-4</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">
instead of restarting sdwdate manually</p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/381">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/381</link>
        <pubDate>Sat, 01 Jan 2022 13:32:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-381</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubissue">
  <header class="source">

      <a href="https://github.com/QubesOS/qubes-issues/issues/5952" target="_blank" rel="noopener">github.com/QubesOS/qubes-issues</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/QubesOS/qubes-issues/issues/5952" target="_blank" rel="noopener">Add 'autostart=no' option to qrexec policy</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-07-14" data-time="19:42:43" data-timezone="UTC">07:42PM - 14 Jul 20 UTC</span>
      </div>

        <div class="date">
          closed <span class="discourse-local-date" data-format="ll" data-date="2021-07-11" data-time="01:29:14" data-timezone="UTC">01:29AM - 11 Jul 21 UTC</span>
        </div>

      <div class="user">
        <a href="https://github.com/marmarek" target="_blank" rel="noopener">
          <img alt="marmarek" src="https://avatars.githubusercontent.com/u/726704?v=4" class="onebox-avatar-inline" width="20" height="20">
          marmarek
        </a>
      </div>
    </div>

    <div class="labels">
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">T: enhancement</span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">C: core</span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">P: default</span>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">**The problem you're addressing (if any)**
Some qrexec calls may cause surprise<span class="show-more-container"><a href="http://forums.whonix.org" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">/unintended domain startup - for example #5930. 

**Describe the solution you'd like**
Add an option to the policy to allow a call, but avoid starting the domain - effectively "allow if target is running".
I think it should be an argument `autostart=no` to the action. It makes sense for `allow` action for sure, but perhaps also `ask` (include the vm only if it's running)?

**Related, [non-duplicate](https://www.qubes-os.org/doc/reporting-bugs/#new-issues-should-not-be-duplicates-of-existing-issues) issues**
#4370</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox githubissue">
  <header class="source">

      <a href="https://github.com/QubesOS/qubes-issues/issues/7169" target="_blank" rel="noopener">github.com/QubesOS/qubes-issues</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/QubesOS/qubes-issues/issues/7169" target="_blank" rel="noopener">qubes-core-admin-addon-whonix sdwdate-gui qrexec service should use autostart=no</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2021-12-31" data-time="15:38:10" data-timezone="UTC">03:38PM - 31 Dec 21 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank" rel="noopener">
          <img alt="adrelanos" src="https://avatars.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
      </div>
    </div>

    <div class="labels">
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">T: bug</span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">P: default</span>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">* https://github.com/QubesOS/qubes-core-admin-addon-whonix/blob/master/qubes-rpc<span class="show-more-container"><a href="http://forums.whonix.org" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">-policy/whonix.GatewayCommand.policy
* https://github.com/QubesOS/qubes-core-admin-addon-whonix/blob/master/qubes-rpc-policy/whonix.NewStatus.policy
* https://github.com/QubesOS/qubes-core-admin-addon-whonix/blob/master/qubes-rpc-policy/whonix.SdwdateStatus.policy

To test, I would just have to append `,autostart=no`, right? I.e.

`allow`
-&gt;
`allow,autostart=no`
?

related:
https://github.com/QubesOS/qubes-issues/issues/5952</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/380">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/380</link>
        <pubDate>Fri, 31 Dec 2021 15:38:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-380</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>access control disabled, clients can connect from any host</p>
</blockquote>
<p>That comes from this:</p>
<aside class="onebox githubblob">
  <header class="source">

      <a href="https://github.com/Whonix/sdwdate-gui/blob/master/usr/bin/sdwdate-gui#L6" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/sdwdate-gui/blob/master/usr/bin/sdwdate-gui#L6" target="_blank" rel="noopener">Whonix/sdwdate-gui/blob/master/usr/bin/sdwdate-gui#L6</a></h4>



  <pre class="onebox">    <code class="lang-">
      <ol class="start lines" start="1" style="counter-reset: li-counter 0 ;">
          <li>#!/bin/bash</li>
          <li>
          </li>
<li>## Copyright (C) 2018 - 2021 ENCRYPTED SUPPORT LP &lt;adrelanos@whonix.org&gt;</li>
          <li>## See the file COPYING for copying conditions.</li>
          <li>
          </li>
<li class="selected">## AUDIT: Is there a safer way?</li>
          <li>## Required since Debian buster.</li>
          <li>xhost +</li>
          <li>
          </li>
<li>sudo \</li>
          <li>   --set-home \</li>
          <li>   --non-interactive \</li>
          <li>   -u sdwdate-gui \</li>
          <li>   /usr/lib/sdwdate-gui/sdwdate-gui</li>
      </ol>
    </code>
  </pre>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<blockquote>
<p>QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to ‘/tmp/runtime-sdwdate-gui’</p>
</blockquote>
<p>See also below.</p>
<p>I guess don’t fix if not broken. We possibly need to redesign this for wayland anyhow. See also above.</p>
          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/379">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/379</link>
        <pubDate>Mon, 07 Jun 2021 14:20:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-379</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote quote-modified" data-post="83" data-topic="10381">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/full-system-apparmor-policy-testers-wanted/10381/83">Full System AppArmor Policy - Testers Wanted!</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/news/21"><span class="badge-category-bg" style="background-color: #AB9364;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="News posted by Whonix staff. The Whonix Blog. Stay Tuned. (rss)">News</span></a>
  </div>
  <blockquote>
    sdwdate is not supposed to be run in terminal under user user. Maybe useful during development without AppArmor profile. But otherwise sdwdate’s AppArmor profile doesn’t support that. And if it did, it might weaken AppArmor protections. Dunno. Maybe with some HOME variable in sdwdate apparmor profile it might work. I think running sdwdate under user user was discussed earlier in these forums somewhere. I am not sure what I should be doing in such situations. Changing the clock requires root or …
  </blockquote>
</aside>

<aside class="onebox githubcommit">
  <header class="source">

      <a href="https://github.com/Whonix/sdwdate-gui/commit/b0aef886b6eda84e9d787868f10b0f105402863b" target="_blank" rel="noopener">github.com/Whonix/sdwdate-gui</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/sdwdate-gui/commit/b0aef886b6eda84e9d787868f10b0f105402863b" target="_blank" rel="noopener">port from tor-control-status tor_status to anon-connection-wizard</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2021-06-07" data-time="14:11:58" data-timezone="UTC">02:11PM - 07 Jun 21 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank" rel="noopener">
          <img alt="adrelanos" src="https://avatars.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
      </div>

      <div class="lines" title="changed 2 files with 20 additions and 12 deletions">
        <a href="https://github.com/Whonix/sdwdate-gui/commit/b0aef886b6eda84e9d787868f10b0f105402863b" target="_blank" rel="noopener">
          <span class="added">+20</span>
          <span class="removed">-12</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">
fix minor confusing log output

https://forums.whonix.org/t/full-system-apparmo<span class="show-more-container"><a href="https://github.com/Whonix/sdwdate-gui/commit/b0aef886b6eda84e9d787868f10b0f105402863b" target="_blank" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">r-policy-testers-wanted/10381/83</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/378">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/378</link>
        <pubDate>Mon, 07 Jun 2021 14:19:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-378</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="376" data-topic="1137">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Could use some help with apparmor / seccomp / systemd / sandbox-app-launcher confinement.</p>
</blockquote>
</aside>
<aside class="quote no-group" data-username="Patrick" data-post="376" data-topic="1137">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<h4><a href="https://github.com/Whonix/sdwdate/commit/b5f0ea11cfc91613490135213b999dee917455a1">disable systemd hardening </a></h4>
</blockquote>
</aside>
<p>This was resolved thanks to:</p>
<aside class="quote" data-post="43" data-topic="7590">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar">
    <a href="https://forums.whonix.org/t/apply-systemd-sandboxing-by-default-to-some-services/7590/43">Apply systemd sandboxing by default to some services</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/development/8"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Is <a href="https://github.com/Whonix/sdwdate/commit/b5f0ea11cfc91613490135213b999dee917455a1" rel="noopener nofollow ugc">https://github.com/Whonix/sdwdate/commit/b5f0ea11cfc91613490135213b999dee917455a1</a> still a problem? I can’t reproduce it with the sandboxing enabled. I can send a PR to strengthen sdwdate’s sandboxing too if that isn’t an issue anymore.
  </blockquote>
</aside>

          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/377">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/377</link>
        <pubDate>Fri, 26 Mar 2021 18:52:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-377</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>sdwdate improvements have been implemented in git master and Whonix developers repository:</p>
<ul>
<li>sdwdate can now recover, successfully set the system clock even if system clock is so slow (year 2000) or fast (year 2050) so that Tor is unable to connect.
<ul>
<li>Based on <a href="https://www.whonix.org/wiki/Dev/TimeSync#Fixing_Time_based_on_Tor_Consensus">Fixing Time based on Tor Consensus</a>.</li>
</ul>
</li>
<li>The time fetching part of sdwdate (abstracted as separate script <code>url_to_unixtime</code> so it can be more easily confined) is now a python3 <a href="https://requests.readthedocs.io">requests</a> based implementation with the following features:
<ul>
<li>HTTP header fetching</li>
<li>HTTP header parsing (we need the <code>Date:</code> field)</li>
<li>HTTP 1.0 and HTTP 1.1 compatibility</li>
<li>TLS support</li>
<li>socks support (for Tor configuration and stream isolation)</li>
</ul>
</li>
</ul>
<p>Issue of <a href="https://forums.whonix.org/t/most-onions-down-due-to-a-denial-of-service-attack-on-the-tor-network/10979" class="inline-onebox">Most Onions Down due to a Denial of Service Attack on the Tor Network</a> / <a href="//forums.whonix.org/t/sdwdate-synchronisation-fails-sometimes-works/10967/4" class="inline-onebox">sdwdate synchronisation fails, sometimes works</a> has not been addressed due to lack of a concept how sdwdate could fetch time if most onions are down most of the time.</p>
<hr>
<ul>
<li><a href="https://github.com/Whonix/sdwdate/blob/master/usr/bin/sdwdate">https://github.com/Whonix/sdwdate/blob/master/usr/bin/sdwdate</a></li>
<li><a href="https://github.com/Whonix/sdwdate/blob/master/usr/bin/url_to_unixtime">https://github.com/Whonix/sdwdate/blob/master/usr/bin/url_to_unixtime</a></li>
<li><a href="https://github.com/Whonix/sdwdate/blob/master/etc/apparmor.d/usr.bin.sdwdate">https://github.com/Whonix/sdwdate/blob/master/etc/apparmor.d/usr.bin.sdwdate</a></li>
<li><a href="https://github.com/Whonix/sdwdate/blob/master/etc/apparmor.d/usr.bin.url_to_unixtime">https://github.com/Whonix/sdwdate/blob/master/etc/apparmor.d/usr.bin.url_to_unixtime</a></li>
<li><a href="https://github.com/Whonix/sdwdate/blob/master/lib/systemd/system/sdwdate.service">https://github.com/Whonix/sdwdate/blob/master/lib/systemd/system/sdwdate.service</a></li>
<li><a href="https://github.com/Whonix/sdwdate/blob/master/lib/systemd/system/sdwdate-restart-tor-request-file-watcher.service">https://github.com/Whonix/sdwdate/blob/master/lib/systemd/system/sdwdate-restart-tor-request-file-watcher.service</a></li>
<li><a href="https://github.com/Whonix/sdwdate/blob/master/usr/lib/sdwdate/sdwdate-restart-tor-request-file-watcher">https://github.com/Whonix/sdwdate/blob/master/usr/lib/sdwdate/sdwdate-restart-tor-request-file-watcher</a></li>
<li><a href="https://github.com/Whonix/sdwdate/blob/master/usr/share/sdwdate/test-clock-fast">https://github.com/Whonix/sdwdate/blob/master/usr/share/sdwdate/test-clock-fast</a></li>
<li><a href="https://github.com/Whonix/sdwdate/blob/master/usr/share/sdwdate/test-clock-slow">https://github.com/Whonix/sdwdate/blob/master/usr/share/sdwdate/test-clock-slow</a></li>
</ul>
<hr>
<ul>
<li><a href="https://github.com/Whonix/helper-scripts/blob/master/usr/sbin/anondate">https://github.com/Whonix/helper-scripts/blob/master/usr/sbin/anondate</a></li>
<li><a href="https://github.com/Whonix/helper-scripts/blob/master/usr/sbin/anondate-get">https://github.com/Whonix/helper-scripts/blob/master/usr/sbin/anondate-get</a></li>
<li><a href="https://github.com/Whonix/helper-scripts/blob/master/usr/sbin/anondate-set">https://github.com/Whonix/helper-scripts/blob/master/usr/sbin/anondate-set</a></li>
<li><a href="https://github.com/Whonix/helper-scripts/blob/master/usr/sbin/anondate-tester">https://github.com/Whonix/helper-scripts/blob/master/usr/sbin/anondate-tester</a></li>
<li><a href="https://github.com/Whonix/helper-scripts/blob/master/etc/apparmor.d/usr.sbin.anondate-get">https://github.com/Whonix/helper-scripts/blob/master/etc/apparmor.d/usr.sbin.anondate-get</a></li>
<li><a href="https://github.com/Whonix/helper-scripts/blob/master/etc/apparmor.d/usr.sbin.anondate-set">https://github.com/Whonix/helper-scripts/blob/master/etc/apparmor.d/usr.sbin.anondate-set</a></li>
</ul>
<hr>
<p>Could use some help with apparmor / seccomp / systemd / sandbox-app-launcher confinement.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/sdwdate/commit/b5f0ea11cfc91613490135213b999dee917455a1" target="_blank" rel="noopener">github.com/Whonix/sdwdate</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/sdwdate/commit/b5f0ea11cfc91613490135213b999dee917455a1" target="_blank" rel="noopener">disable systemd hardening</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2021-01-12" data-time="05:51:48" data-timezone="UTC">05:51AM - 12 Jan 21 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank" rel="noopener">
          <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 25 additions and 22 deletions">
        <a href="https://github.com/Whonix/sdwdate/commit/b5f0ea11cfc91613490135213b999dee917455a1" target="_blank" rel="noopener">
          <span class="added">+25</span>
          <span class="removed">-22</span>
        </a>
      </div>
    </div>

  </div>
</div>


  <div class="github-row">
    <pre class="github-content" style="white-space: normal;">incompatible with apparmor profile
AVC apparmor="DENIED" operation="exec" info="no new privs" error=-1 profile="/usr/bin/sdwdate" name="/usr/bin/url_to_unixtime" pid=17091 comm="sdwdate" requested_mask="x" denied_mask="x" fsuid=125 ouid=0 target="/usr/bin/url_to_unixtime"</pre>
  </div>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>//cc <a class="mention" href="http://forums.whonix.org/u/madaidan">@madaidan</a></p>
          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/376">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/376</link>
        <pubDate>Tue, 12 Jan 2021 08:54:40 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-376</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="314" data-topic="9008">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/system-wide-sandboxing-framework-sandbox-app-launcher/9008/314">System-wide sandboxing framework - sandbox-app-launcher</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/development/8"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Should file 

/etc/sandbox-app-launcher/url_to_unixtime.conf 

## Copyright (C) 2020 - 2020 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

allow_net=yes
allow_webcam=no
allow_mic=no
shared_storage=read-only
allow_dynamic_native_code_exec=yes

be added to package sdwdate or sandbox-app-launcher? 

Also a setting 

shared_storage=no 

would be good?
  </blockquote>
</aside>

<aside class="quote quote-modified" data-post="315" data-topic="9008">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/system-wide-sandboxing-framework-sandbox-app-launcher/9008/315">System-wide sandboxing framework - sandbox-app-launcher</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/development/8"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Cannot manage to run /usr/bin/url_to_unixtime. (Currently in sdwdate git master and developers repository only.) 
sudo bash -x sandbox-app-launcher run url_to_unixtime



/usr/bin/url_to_unixtime 
/var/cache/sandbox-app-launcher-autogenerated/wrappers-wx/url_to_unixtime: /usr/bin/url_to_unixtime: /usr/bin/python3: bad interpreter: Operation not permitted


AVC apparmor="DENIED" operation="ptrace" profile="sandbox-app-launcher-wx" pid=29770 comm="systemd-detect-" requested_mask="read" denied_mask…
  </blockquote>
</aside>

          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/375">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/375</link>
        <pubDate>Tue, 12 Jan 2021 08:26:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-375</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote quote-modified" data-post="1" data-topic="10979">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/most-onions-down-due-to-a-denial-of-service-attack-on-the-tor-network/10979">Most Onions Down due to a Denial of Service Attack on the Tor Network</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/development/8"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Since yesterday due to a denial of service (DOS) on the Tor network most onions where down. 
Most sdwdate onion time sources and SecureDrop onions didn’t work for me. The following references mention onion v3 only but I couldn’t connect to almost no onions v2 or v3 whatsoever. 




Quote Roger: 

Hi folks, 
The overload bugs on the directory authorities are continuing, but they 
also continue to be mostly manageable. 
But today, we spent several consensus intervals in a row without making 
a con…
  </blockquote>
</aside>

<aside class="quote no-group" data-username="Patrick" data-post="1" data-topic="10979">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"><a href="//forums.whonix.org/t/most-onions-down-due-to-a-denial-of-service-attack-on-the-tor-network/10979/1">Most Onions Down due to a Denial of Service Attack on the Tor Network</a>
</div>
<blockquote>
<p>Since <a href="https://www.whonix.org/wiki/Sdwdate">sdwdate</a> relies on Tor consensus (<a href="https://www.whonix.org/wiki/Sdwdate#Tor_Consensus_Time_Sanity_Check">Tor Consensus Time Sanity Check</a>) and fetches time from onions it can no longer fetch and update the system time.</p>
</blockquote>
</aside>
<aside class="quote no-group" data-username="TNT_BOM_BOM" data-post="373" data-topic="1137">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/tnt_bom_bom/40/2148_2.png" class="avatar"> TNT_BOM_BOM:</div>
<blockquote>
<p>I believe I2P support should be added to the development of sdwdate</p>
</blockquote>
</aside>
<p>Not sure that is possible. I2P also needs a (somewhat?) correct clock to be able to connect to the I2P network. Maybe it’s even less tolerant to skewed clock than Tor? Therefore we have a similar bootstrap problem. System clock too slow or too fast for I2P being able to connect -&gt; sdwdate cannot cannot use I2P to fetch time from I2P eepsites.</p>
          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/374">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/374</link>
        <pubDate>Tue, 12 Jan 2021 04:19:07 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-374</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[TNT_BOM_BOM]]></dc:creator>
        <description><![CDATA[
            <p>sdwdate need to have new design of getting its time corrected, because sdwdate can be turned off through turning off all onion connection from the Tor network itself:</p>
<aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="https://gitlab.torproject.org/uploads/-/system/appearance/favicon/1/favicon.ico" class="site-icon" width="32" height="32">
      <a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/40237" target="_blank" rel="noopener nofollow ugc">GitLab</a>
  </header>
  <article class="onebox-body">
    <img src="https://gitlab.torproject.org/assets/gitlab_logo-7ae504fe4f68fdebb3c2034e36621930cd36ea87924c11ff65dbcb8ed50dca58.png" class="thumbnail onebox-avatar" width="128" height="128">

<h3><a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/40237" target="_blank" rel="noopener nofollow ugc">v3 onion services require a "live" consensus to publish or fetch (#40237) ·...</a></h3>

<p>If the Tor v3 onion client, or Tor v3 onion service, do not have a "live" consensus (i.e. one where "valid-until" hasn't elapsed), then they will choose not...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>And today the issue is fixed (connecting to onion v3) without a single update or manual configuration to Tor client, This shows clear instability when relying on Tor network to do always the job.</p>
<p>I believe I2P support should be added to the development  of sdwdate either when Tor fail to connect to then switch to it or as a replacement to Tor entirely (but we dont need to go to the extreme version now as there are no signs showing the need to do that yet).</p>
          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/373">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/373</link>
        <pubDate>Mon, 11 Jan 2021 19:04:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-373</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://github.com/Whonix/sdwdate/blob/master/usr/bin/url_to_unixtime">https://github.com/Whonix/sdwdate/blob/master/usr/bin/url_to_unixtime</a> wants lots of apparmor permissions. How can this be avoided? <a class="mention" href="http://forums.whonix.org/u/madaidan">@madaidan</a></p>
<blockquote>
<p>AVC apparmor=“DENIED” operation=“exec” profile="/usr/bin/url_to_unixtime" name="/usr/bin/x86_64-linux-gnu-gcc-8" comm=“url_to_unixtime” requested_mask=“x” denied_mask=“x”<br>
AVC apparmor=“DENIED” operation=“exec” profile="/usr/bin/url_to_unixtime" name="/usr/bin/x86_64-linux-gnu-ld.bfd" comm=“url_to_unixtime” requested_mask=“x” denied_mask=“x”<br>
AVC apparmor=“DENIED” operation=“exec” profile="/usr/bin/url_to_unixtime" name="/usr/lib/gcc/x86_64-linux-gnu/8/collect2" comm=“gcc” requested_mask=“x” denied_mask=“x”<br>
AVC apparmor=“DENIED” operation=“open” profile="/usr/bin/url_to_unixtime//null-/sbin/ldconfig" name="/etc/ld.so.cache" comm=“ldconfig” requested_mask=“r” denied_mask=“r”</p>
</blockquote>
<p>This is probably from python attempting to compile <code>,pyc</code> files for optimization. That script however doesn’t need any performance optimization whatsoever. It is fine and more than fast enough even without compilation.</p>
<p>Attempted to disable <code>,pyc</code> file creation:</p>
<ul>
<li><code>python -B</code></li>
<li>environment variable <code>PYTHONDONTWRITEBYTECODE=1</code>
</li>
<li><code>sys.dont_write_bytecode = True</code></li>
</ul>
<p>But none of that worked.</p>
<p>Is there some way to add in an apparmor profile “good enough - stop reporting further denials”? I guess not as per:</p>
<aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="https://gitlab.com/assets/favicon-7901bd695fb93edb07975966062049829afb56cf11511236e61bcf425070e36e.png" class="site-icon" width="16" height="16">
      <a href="https://gitlab.com/apparmor/apparmor/-/issues/72" target="_blank" rel="noopener">GitLab</a>
  </header>
  <article class="onebox-body">
    <img src="https://assets.gitlab-static.net/uploads/-/system/project/avatar/4484878/apparmor-red-diag_1w2h.png" class="thumbnail onebox-avatar" width="128" height="128">

<h3><a href="https://gitlab.com/apparmor/apparmor/-/issues/72" target="_blank" rel="noopener">Turn off logging (#72) · Issues · AppArmor / apparmor</a></h3>

<p>There's a long-standing bug in Ubuntu asking for a feature to turn off logging. I've seen this issue as well. The discord app tries to get a process...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/372">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/372</link>
        <pubDate>Sun, 10 Jan 2021 10:42:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-372</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote quote-modified" data-post="169" data-topic="856">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/suggest-trustworthy-tor-hidden-services-as-time-sources-for-sdwdate/856/169">Suggest Trustworthy Tor Hidden Services as Time Sources for sdwdate</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/development/8"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    (Curl --head also Not OK) 

That is a bug. 

ctemplarpizuduxk3fkwrieizstx33kg5chlvrh37nz73pv5smsvl6ad.onion: b’Parsing HTTP header date failed. 

I am not sure. That might be happening because <a href="https://github.com/Whonix/sdwdate/blob/master/usr/lib/sdwdate/url_to_unixtime">url_to_unixtime</a> uses http 1.0. ctemplar might require at least http 1.1. The following code is related: 
s.send('HEAD / HTTP/1.0\r\n\r\n'.encode())

I didn’t manage to update that to http 1.1. (No, it’s not just about changing the string 1.0 to 1.1. That would be easy. By doing that, many webservers repo…
  </blockquote>
</aside>

          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/371">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/371</link>
        <pubDate>Tue, 05 Jan 2021 17:06:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-371</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Awesome. No more denied messages for now.</p>
          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/370">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/370</link>
        <pubDate>Wed, 15 Jan 2020 07:55:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-370</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
      <item>
        <title>sdwdate and sdwdate-gui development thread</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/sdwdate/pull/23" target="_blank">github.com/Whonix/sdwdate</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/sdwdate/pull/23" target="_blank">Apparmor fixes</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:apparmor</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-01-14" data-time="20:59:38" data-timezone="UTC">08:59PM - 14 Jan 20 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/madaidan" target="_blank">
          <img alt="madaidan" src="https://avatars0.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 4 additions and 4 deletions">
        <a href="https://github.com/Whonix/sdwdate/pull/23/files" target="_blank">
          <span class="added">+4</span>
          <span class="removed">-4</span>
        </a>
      </div>
    </div>

  </div>
</div>
  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/369">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137/369</link>
        <pubDate>Tue, 14 Jan 2020 20:59:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1137-369</guid>
        <source url="http://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137.rss">sdwdate and sdwdate-gui development thread</source>
      </item>
  </channel>
</rss>
