<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>sdwdate and sdwdate-gui development thread - Development - Whonix Forum</title>
    <meta name="description" content="There is a modified standalone url_to_unixtime at https://github.com/troubadoour/url_to_unixtime-asynchronous. 
The idea is to get the time from the pool’s remotes asynchronously, using some of the Python gevent magic. B&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="11379ba9.html?page=3" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;sdwdate and sdwdate-gui development thread&#39;" href="1137.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137?page=3" />
<meta name="twitter:url" content="https://forums.whonix.org/t/sdwdate-and-sdwdate-gui-development-thread/1137?page=3" />
<meta property="og:title" content="sdwdate and sdwdate-gui development thread" />
<meta name="twitter:title" content="sdwdate and sdwdate-gui development thread" />
<meta property="og:description" content="Yes, this is expected. When files are removed from the package and the package is reinstalled, then old files are removed. (With exceptions, /etc.)  The solution is to have these files in your branch in the correct location. Then next time they will be [re]installed. Seems like you did that already." />
<meta name="twitter:description" content="Yes, this is expected. When files are removed from the package and the package is reinstalled, then old files are removed. (With exceptions, /etc.)  The solution is to have these files in your branch in the correct location. Then next time they will be [re]installed. Seems like you did that already." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="77 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="48 ❤" />
<meta property="article:published_time" content="2015-07-29T11:16:37+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="11374658.html?page=2">
        <link rel="next" href="1137fdb0.html?page=4">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1137.html">sdwdate and sdwdate-gui development thread</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-07-29T11:16:37Z' class='post-time'>
                July 29, 2015, 11:16am
              </time>
              <meta itemprop='dateModified' content='2015-07-29T11:16:37Z'>
          <span itemprop='position'>#41</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="39" data-topic="1137">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/d9b06d/40.png" class="avatar"> troubadour:</div>
<blockquote>
<p>Note. When installing the package from python branch, sdwdate bash is removed. For testing the behaviour of timesync (which reports a failure at this stage), I had to reinstall /usr/lib/sdwdate/restart_fresh.</p>
</blockquote>
</aside>
<p>Yes, this is expected. When files are removed from the package and the package is reinstalled, then old files are removed. (With exceptions, /etc.)<br>
The solution is to have these files in your branch in the correct location. Then next time they will be [re]installed. Seems like you did that already.</p>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-07-29T12:07:01Z' class='post-time'>
                July 29, 2015, 12:07pm
              </time>
              <meta itemprop='dateModified' content='2015-07-29T12:07:01Z'>
          <span itemprop='position'>#42</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Please restore:<br>
debian/sdwdate.postinst<br>
debian/sdwdate.postrm</p>
<p>Not sure the move of sdwdate to /usr/sbin is good. Maybe /usr/bin is better. Maybe some day we want to support a oneshot, non-daemon operation mode? I.e. type “sdwdate” -&gt; replies with time.</p>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-07-29T12:19:52Z' class='post-time'>
                July 29, 2015, 12:19pm
              </time>
              <meta itemprop='dateModified' content='2015-07-29T12:19:52Z'>
          <span itemprop='position'>#43</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="29" data-topic="1137">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>If it would help, we could also change the pool syntax. Make all pool members “multi lined”. Using same syntax. Just “single line” multi lined.</p>
</blockquote>
</aside>
<p>[quote=“troubadour, post:30, topic:1137”]- Made all the pool members “single line”.<br>
<a href="../../../external.html?link=https://github.com/troubadoour/sdwdate/commit/b3520602181e368ae563182b8b1c7032dc044d08%5B/quote%5D" class="onebox" target="_blank">https://github.com/troubadoour/sdwdate/commit/b3520602181e368ae563182b8b1c7032dc044d08[/quote]</a><br>
I think this was a misunderstanding. Now previously grouped pool members, are not a group anymore. Therefore those members are chosen much more often. Thereby get more influence.</p>
<p>Not good:<br>
meld etc/sdwdate.d/30_sdwdate_default etc/sdwdate-python.d/30_sdwdate_default</p>
<p>What I meant by ‘Make all pool members “multi lined”’…</p>
<p>Original sdwdate-bash:</p>
<pre><code class="lang-auto">SDWDATE_POOL_TWO=(
         "
            atlas777hhh7mcs7.onion:80#Hosted by Thomas White. https://www.whonix.org/pipermail/whonix-devel/2015-February/000297.html
            compass6vpxj32p3.onion:80#Hosted by Thomas White. https://www.whonix.org/pipermail/whonix-devel/2015-February/000297.html
            globe223ezvh6bps.onion:80#Hosted by Thomas White. https://www.whonix.org/pipermail/whonix-devel/2015-February/000297.html
            bbbbbb6qtmqg65g6.onion:80#Hosted by Thomas White. https://www.whonix.org/pipermail/whonix-devel/2015-February/000297.html
            pppppptkftqqnfsq.onion:80#Hosted by Thomas White. https://www.whonix.org/pipermail/whonix-devel/2015-February/000297.html
         "
         "w6csjytbrl273che.onion#Ljost[24][25] 	2012-September-30 	Transparency Activism 	w6csjytbrl273che.onion 	https://w6csjytbrl273che.tor2web.org/ 	Iceland"
         "ak2uqfavwgmjrvtu.onion#MagyarLeaks[26] 	2013-July-7 	Investigative Journalism 	ak2uqfavwgmjrvtu.onion 	https://ak2uqfavwgmjrvtu.tor2web.org 	Hungary"
         ...
)</code></pre>
<p>Proposed if that helps parsing:</p>
<pre><code class="lang-auto">SDWDATE_POOL_TWO=(
         "
            atlas777hhh7mcs7.onion:80#Hosted by Thomas White. https://www.whonix.org/pipermail/whonix-devel/2015-February/000297.html
            compass6vpxj32p3.onion:80#Hosted by Thomas White. https://www.whonix.org/pipermail/whonix-devel/2015-February/000297.html
            globe223ezvh6bps.onion:80#Hosted by Thomas White. https://www.whonix.org/pipermail/whonix-devel/2015-February/000297.html
            bbbbbb6qtmqg65g6.onion:80#Hosted by Thomas White. https://www.whonix.org/pipermail/whonix-devel/2015-February/000297.html
            pppppptkftqqnfsq.onion:80#Hosted by Thomas White. https://www.whonix.org/pipermail/whonix-devel/2015-February/000297.html
         "
         "
            w6csjytbrl273che.onion#Ljost[24][25] 	2012-September-30 	Transparency Activism 	w6csjytbrl273che.onion 	https://w6csjytbrl273che.tor2web.org/ 	Iceland
         "
         "
            ak2uqfavwgmjrvtu.onion#MagyarLeaks[26] 	2013-July-7 	Investigative Journalism 	ak2uqfavwgmjrvtu.onion 	https://ak2uqfavwgmjrvtu.tor2web.org 	Hungary
         "
         ...
)</code></pre>
<p>In other words, from the initial random picking of a pool member “Thomas White”, a multi lined mirror, i.e. a pool member providing mirrors should only appear as one. Not many. And upon picking such a multi lined pool member  “Thomas White”, some random mirror he is providing gets chosen.</p>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-07-29T13:28:22Z' class='post-time'>
                July 29, 2015,  1:28pm
              </time>
              <meta itemprop='dateModified' content='2015-07-29T13:28:22Z'>
          <span itemprop='position'>#44</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>typo: eaxh</p>
<pre><code class="lang-auto">                if len(self.urls) == 0:
                    ## Most likely, internet connection is down.
                    ## Raise eror, log.
                    message = ('No values returned from url_to_unixtime. Internet connection might be down.')
                    print(message)
                    logger.critical(message)
                    sys.exit()</code></pre>
<p>Please don’t exit. The daemon must be able to cope up in case internet connection is down.</p>
<pre><code class="lang-auto">    def general_proxy_error(self, pools):
        '''
        This error occurs (at least) when Tor is not running.
        '''
        if (pools[0] == 'Connection closed unexpectedly' and
            pools[1] == 'Connection closed unexpectedly' and
            pools[2] == 'Connection closed unexpectedly'):
                ## Raise error, log, user warning.
                logger.critical('General Proxy Error')
                sys.exit(1)</code></pre>
<p>Also no reason to exit.</p>
<p>The right fall back action in such special cases is falling back to the loop (which will then continue with a randomized sleep).</p>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-07-29T13:37:31Z' class='post-time'>
                July 29, 2015,  1:37pm
              </time>
              <meta itemprop='dateModified' content='2015-07-29T13:37:31Z'>
          <span itemprop='position'>#45</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Bug: If set_new_time returns false, because median equals zero, then the first_success_file does not get created. However, such cases can be viewed as sdwdate having run successful. first_success_file will be used as an indicator by applications (gui) using state information provided by sdwdate.</p>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-07-29T21:21:14Z' class='post-time'>
                July 29, 2015,  9:21pm
              </time>
              <meta itemprop='dateModified' content='2015-07-29T21:21:14Z'>
          <span itemprop='position'>#46</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“Patrick, post:42, topic:1137”]Please restore:<br>
debian/sdwdate.postinst<br>
debian/sdwdate.postrm[/quote]<br>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/troubadoour/sdwdate/commit/a7a7889709dbdb7cd512527cf25960197cb96bee" target="_blank" rel="nofollow noopener">github.com/troubadoour/sdwdate</a>
  </header>
  <article class="onebox-body">
      <a href="../../../external.html?link=https://github.com/troubadoour" target="_blank" rel="nofollow noopener">
    <img alt="troubadoour" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/7442918?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../external.html?link=https://github.com/troubadoour/sdwdate/commit/a7a7889709dbdb7cd512527cf25960197cb96bee" target="_blank" rel="nofollow noopener">debian/sdwdate.postinst, debian/sdwdate.postrm</a>
</h4>


<div class="date">
  by <a href="../../../external.html?link=https://github.com/troubadoour" target="_blank" rel="nofollow noopener">troubadoour</a>
  on <a href="../../../external.html?link=https://github.com/troubadoour/sdwdate/commit/a7a7889709dbdb7cd512527cf25960197cb96bee" target="_blank" rel="nofollow noopener">07:58PM - 29 Jul 15</a>
</div>

<div class="github-commit-stats">
  changed <strong>2 files</strong>
  with <strong>76 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<blockquote>Not sure the move of sdwdate to /usr/sbin is good. Maybe /usr/bin is better. Maybe some day we want to support a oneshot, non-daemon operation mode? I.e. type "sdwdate" -&gt; replies with time.</blockquote>
Yes, moved it to /usr/bin. There are some minor changes in sdwdate that I forgot to commit earlier.
https://github.com/troubadoour/sdwdate/commit/2142fd9a22cf4e857090d13c617465b205d083f6
<p>Restored the multi-line entries (groups) in 30_sdwdate_default. The new config.py can read any number of groups. It appends one random member from each group to the pool list.<br>
For consistency, the groups are separated by a line with one double-quote (could be anything), but the members have the same format as the single entries, starting with a double-quote. That lets us use the same regular expression operation for parsing the urls from single or multi entries.<br>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/troubadoour/sdwdate/commit/9fd86a920950ea3f5bd5903710893406c658ba7f" target="_blank" rel="nofollow noopener">github.com/troubadoour/sdwdate</a>
  </header>
  <article class="onebox-body">
      <a href="../../../external.html?link=https://github.com/troubadoour" target="_blank" rel="nofollow noopener">
    <img alt="troubadoour" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/7442918?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../external.html?link=https://github.com/troubadoour/sdwdate/commit/9fd86a920950ea3f5bd5903710893406c658ba7f" target="_blank" rel="nofollow noopener">config reads multi-line entries, append random url to pool</a>
</h4>


<div class="date">
  by <a href="../../../external.html?link=https://github.com/troubadoour" target="_blank" rel="nofollow noopener">troubadoour</a>
  on <a href="../../../external.html?link=https://github.com/troubadoour/sdwdate/commit/9fd86a920950ea3f5bd5903710893406c658ba7f" target="_blank" rel="nofollow noopener">08:36PM - 29 Jul 15</a>
</div>

<div class="github-commit-stats">
  changed <strong>2 files</strong>
  with <strong>116 additions</strong>
  and <strong>73 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>The sys.exit() are only temporary solutions. Have yet to implement the error handling.</p>
<blockquote>Bug: If set_new_time returns false, because median equals zero, then the first_success_file does not get created. However, such cases can be viewed as sdwdate having run successful. first_success_file will be used as an indicator by applications (gui) using state information provided by sdwdate.</blockquote>
Yes. Will modify that.
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-07-30T10:52:34Z' class='post-time'>
                July 30, 2015, 10:52am
              </time>
              <meta itemprop='dateModified' content='2015-07-30T10:52:34Z'>
          <span itemprop='position'>#47</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>There is still a diff. Some stuff that I don’t understand.</p>
<pre><code class="lang-auto"></code></pre>
<p>Please check.</p>
<p>Experimenting with a few inline comments:</p>
<ul>
<li><a href="../../../external.html?link=https://github.com/troubadoour/sdwdate/commit/9fd86a920950ea3f5bd5903710893406c658ba7f#diff-15cc7c07b0320d7b9888ea70372c0d6cL267">https://github.com/troubadoour/sdwdate/commit/9fd86a920950ea3f5bd5903710893406c658ba7f#diff-15cc7c07b0320d7b9888ea70372c0d6cL267</a></li>
<li><a href="../../../external.html?link=https://github.com/troubadoour/sdwdate/commit/9fd86a920950ea3f5bd5903710893406c658ba7f#diff-15cc7c07b0320d7b9888ea70372c0d6cR312">https://github.com/troubadoour/sdwdate/commit/9fd86a920950ea3f5bd5903710893406c658ba7f#diff-15cc7c07b0320d7b9888ea70372c0d6cR312</a></li>
</ul>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-07-30T20:01:39Z' class='post-time'>
                July 30, 2015,  8:01pm
              </time>
              <meta itemprop='dateModified' content='2015-07-30T20:01:39Z'>
          <span itemprop='position'>#48</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The inline comments are quite useful.</p>
<p>I’ve been making some experiments with etc/sdwdate-python.d/30_sdwdate_default, hence the readability issue.</p>
<p>Pushed a new one which should better show the differences.</p>
<ul>
<li>replaced the extraneous quote by square brackets. For parsing the groups, a marker is required, anyhow [the modified config.py is in a separate commit].</li>
<li>added the missing quotes.</li>
<li>some entries are redundant, or misspelled (missing .onion). Removed or edited.</li>
<li>the parsing script needs a consistent format for the urls, ex. "cwoiopiifrlzcuos.onion#. The ones with the port extension :80 are edited.</li>
</ul>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-08-03T21:15:55Z' class='post-time'>
                August 3, 2015,  9:15pm
              </time>
              <meta itemprop='dateModified' content='2015-08-03T21:15:55Z'>
          <span itemprop='position'>#49</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Pushed two commits:</p>
<ul>
<li>error handling.</li>
<li>test .d configuration files with invalid pools.</li>
</ul>
<p>There is error logging only so far, because I’m trying to find the way to pass messages from sdwdate to the timesync systray icon, which is running its own event loop. Some progress…</p>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-08-03T21:38:39Z' class='post-time'>
                August 3, 2015,  9:38pm
              </time>
              <meta itemprop='dateModified' content='2015-08-03T21:38:39Z'>
          <span itemprop='position'>#50</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/troubadoour/sdwdate/commit/2e8bf67e3d5d48db13f259f5703e3f02a3097fd7" target="_blank" rel="nofollow noopener">github.com/troubadoour/sdwdate</a>
  </header>
  <article class="onebox-body">
      <a href="../../../external.html?link=https://github.com/troubadoour" target="_blank" rel="nofollow noopener">
    <img alt="troubadoour" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/7442918?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../external.html?link=https://github.com/troubadoour/sdwdate/commit/2e8bf67e3d5d48db13f259f5703e3f02a3097fd7" target="_blank" rel="nofollow noopener">move test .f files to /usr/share</a>
</h4>


<div class="date">
  by <a href="../../../external.html?link=https://github.com/troubadoour" target="_blank" rel="nofollow noopener">troubadoour</a>
  on <a href="../../../external.html?link=https://github.com/troubadoour/sdwdate/commit/2e8bf67e3d5d48db13f259f5703e3f02a3097fd7" target="_blank" rel="nofollow noopener">09:31PM - 03 Aug 15</a>
</div>

<div class="github-commit-stats">
  changed <strong>2 files</strong>
  with <strong>0 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Moved the test configuration files to /usr/share, because they stop sdwdate (to be investigated).</p>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-08-04T23:53:36Z' class='post-time'>
                August 4, 2015, 11:53pm
              </time>
              <meta itemprop='dateModified' content='2015-08-04T23:53:36Z'>
          <span itemprop='position'>#51</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Yes, we haven’t thought through yet how sdwdate would communicate with the tray icon. I think RPC can and should be avoided for simplicity. The tray icon should omit minor details. For example, if fetching some onion failed but time synchronization still succeeded, this information can be buried in sdwdate’s log.</p>
<p>I think ‘Sdwdate Connection Checker Plugin’ - <a href="../../../external.html?link=https://github.com/Whonix/sdwdate-plugin-anon-shared-con-check">https://github.com/Whonix/sdwdate-plugin-anon-shared-con-check</a> - no longer needs to be a plugin. Because sdwdate depends on Tor now so or so. Not sure if it would still be useful to have the code that determines the status of connectivity would be configurable / replaceable by custom code (setting).</p>
<p>I made a first sketch how this interaction could work:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/TimeSync#sdwdate-tray" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="../../../external.html?link=https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" class="thumbnail"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/TimeSync#sdwdate-tray" target="_blank" rel="nofollow noopener">Dev/TimeSync</a></h3>

<p>Design Documentation of Whonix's Time Synchronization Mechanism</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>Please feel free to make bold changes. This needs some hard criticism, so sdwdate-tray can provide good usability.</p>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-08-05T14:43:51Z' class='post-time'>
                August 5, 2015,  2:43pm
              </time>
              <meta itemprop='dateModified' content='2015-08-05T14:43:51Z'>
          <span itemprop='position'>#52</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>There is a sdwdate-tray template in <a href="../../../external.html?link=https://github.com/troubadoour/timesync" rel="nofollow noopener">https://github.com/troubadoour/timesync</a>, python branch.</p>
<p>The approach is simple: besides the Qt event loop, sdwdate_tray runs a second thread, polling a status file updated by sdwdate daemon. It thus acts as a plain (nearly) real time sdwdate monitor, As development goes, I guess it should be able to perform two actions: release or restrict the network.</p>
<p>Have updated the wiki. <a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/TimeSync#sdwdate-tray" rel="nofollow noopener">https://www.whonix.org/wiki/Dev/TimeSync#sdwdate-tray</a></p>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-08-05T14:47:40Z' class='post-time'>
                August 5, 2015,  2:47pm
              </time>
              <meta itemprop='dateModified' content='2015-08-05T14:47:40Z'>
          <span itemprop='position'>#53</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>first version by me:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/w/index.php?title=Dev/TimeSync&amp;oldid=16672#sdwdate-tray" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="../../../external.html?link=https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" class="thumbnail"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/w/index.php?title=Dev/TimeSync&amp;oldid=16672#sdwdate-tray" target="_blank" rel="nofollow noopener">Dev/TimeSync</a></h3>

<p>Design Documentation of Whonix's Time Synchronization Mechanism</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>changes by troubadour:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/w/index.php?title=Dev%2FTimeSync&amp;diff=16673&amp;oldid=16672" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="../../../external.html?link=https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" class="thumbnail"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/w/index.php?title=Dev%2FTimeSync&amp;diff=16673&amp;oldid=16672" target="_blank" rel="nofollow noopener">Dev/TimeSync</a></h3>

<p>Design Documentation of Whonix's Time Synchronization Mechanism</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>second version by troubadour:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/w/index.php?title=Dev/TimeSync&amp;oldid=16673#sdwdate-tray" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="../../../external.html?link=https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" class="thumbnail"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/w/index.php?title=Dev/TimeSync&amp;oldid=16673#sdwdate-tray" target="_blank" rel="nofollow noopener">Dev/TimeSync</a></h3>

<p>Design Documentation of Whonix's Time Synchronization Mechanism</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>I very much like these changes. Much simpler.</p>
<p>We should avoid /tmp though. Files in /tmp are not supposed to be shared files as far I know. /var/run/sdwdate seems more appropriate. Or /var/lib/sdwdate. Actually, I think the latter is more appropriate. But /var/run/sdwdate is better, because it’s empty after reboot. (Guarding against cases where sdwdate-tray starts before sdwdate-daemon. In these cases it should not be fed by outdated information.)</p>
<p>More comments to come.</p>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-08-05T14:52:24Z' class='post-time'>
                August 5, 2015,  2:52pm
              </time>
              <meta itemprop='dateModified' content='2015-08-05T14:52:24Z'>
          <span itemprop='position'>#54</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I think the timesync repository is the wrong place for sdwdate-tray.</p>
<ul>
<li>Perhaps sdwdate-tray -&gt; sdwdate-gui?</li>
<li>repository name: sdwdate-gui?</li>
<li>timesync was a bad name chosen by me earlier. Aids confusing the functionality of sdwdate with timesync. Seems like two competitors.</li>
<li>timesync provides a cli interface to sdwdate (monitor / restart).</li>
<li>As of Whonix 10 / 11, timesync gets called by sdwdate hooks. It informs cli users about the status of network time synchronization in tty0.</li>
<li>I am not sure about that functionality. Maybe it should be deprecated.</li>
</ul>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-08-05T14:56:20Z' class='post-time'>
                August 5, 2015,  2:56pm
              </time>
              <meta itemprop='dateModified' content='2015-08-05T14:56:20Z'>
          <span itemprop='position'>#55</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="52" data-topic="1137">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/d9b06d/40.png" class="avatar"> troubadour:</div>
<blockquote>
<p>As development goes, I guess it should be able to perform two actions: release or restrict the network.</p>
</blockquote>
</aside>
<ul>
<li>restrict: in which cases that would be useful? I think restricting the network after boot is better implemented in Whonix’s firewall.</li>
<li>release: not directly -&gt; dispatching the [first] success hook would care of this to keep sdwdate and whonix’s firewall separated</li>
</ul>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-08-05T14:58:59Z' class='post-time'>
                August 5, 2015,  2:58pm
              </time>
              <meta itemprop='dateModified' content='2015-08-05T14:58:59Z'>
          <span itemprop='position'>#56</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>polling a file</blockquote>
Polling the file system isn't good. On some systems /var/run isn't mounted in RAM. Therefore causing an infinite stream of disk reads. It's better to read the file event based. When notified by the kernel. That's what inotifywait is for.
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-08-05T15:00:52Z' class='post-time'>
                August 5, 2015,  3:00pm
              </time>
              <meta itemprop='dateModified' content='2015-08-05T15:00:52Z'>
          <span itemprop='position'>#57</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Maybe we can have two files maintained by sdwdate-daemon, read by sdwdate-tray…</p>
<ul>
<li>/var/run/sdwdate/tray.color</li>
<li>/var/run/sdwdate/tray.message<br>
What do you think?</li>
</ul>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-08-05T15:25:12Z' class='post-time'>
                August 5, 2015,  3:25pm
              </time>
              <meta itemprop='dateModified' content='2015-08-05T15:25:12Z'>
          <span itemprop='position'>#58</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Changes by me:</p>
<ul>
<li>Added ideas for sdwdate-tray left click action.</li>
<li>Edited normal cycle. No popups. Those are super intrusive and annoying. When running multiple VMs and having an issue, that’s x popups.</li>
</ul>
<blockquote>[done-success] could be handled in the messaging mechanism (not that many possible combinations).</blockquote>
done/success files are useful for other applications checking sdwdate's status. Useful for use in scripts. And for manual investigation it's nice to just check the status file.
<blockquote>The asynchronous times fetching in sdwdate-daemon should render the progress feature obsolete. Yet a safety could be implemented in sdwdate-daemon for the case url_to_unixtime fails.</blockquote>
Due to the asynchronous time fetching... And due to the non-availability of progress during connection initiation from python libs and other downloaders... [Those can only provide a download speed indicator. But what we transmit is super small. And only takes only the smallest time. DNS resolution and initial connection setup cannot be measured as far as I know.] Therefore a progress in percentage will indeed no longer be possible.
<p>However, having a status “progress” is still important. Network can be super slow at times. [Flaky mobile network connection, GPRS, throttling and other stuff.] Even though the asynchronous time fetching may be super fast on our developer machines, it must be expected to be a lot slower on other systems. Taking a minute or even longer. Therefore a color and message for “progress” is required.</p>
<blockquote>(2) In most of the cases, time synchronization should be completed before sdwdate-tray is ready (kdm started, X running).</blockquote>
True. But please also expect/text the corner cases. With a distribution at this size, we're guaranteed to hit those.
<blockquote>sdwdate-tray starts after X is running. Checks bootclockrandomization, checks sdwdate (1), reads the last sdwdate-daemon status file, removes the file.</blockquote>
Removing the file is probably not good. Makes this more obscure. More difficult to debug. In case it's suspected sdwdate-tray shows a wrong message, one couldn't check if the cause was sdwdate-daemon providing a wrong message. While just keeping overwriting the file, we can ask users to manually con`cat`enate it. 
<p>I was always wondering if timesync (Whonix 10 / 11) checking the status of bootclockrandomization was a design mistake. Perhaps that rather should be a feature of sdwdate? If bootclockrandomization is installed, check it. Otherwise, skip it.</p>
<p>Same for timesanitycheck. If timesanitycheck is installed, check it. Otherwise, skip it.</p>
<p>Failed bootclockrandomization and/or timesanitycheck would influence the tray icon color and hovering over message.</p>
<p>What do you think?</p>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-08-05T16:18:54Z' class='post-time'>
                August 5, 2015,  4:18pm
              </time>
              <meta itemprop='dateModified' content='2015-08-05T16:18:54Z'>
          <span itemprop='position'>#59</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>I think the timesync repository is the wrong place for sdwdate-tray.
- Perhaps sdwdate-tray -&gt; sdwdate-gui?
- repository name: sdwdate-gui?</blockquote>
timesync has always been confusing for me too. And a lot of files in timesync will not be used. So, let's say a new sdwdate-gui repository.
<blockquote>- restrict: in which cases that would be useful? I think restricting the network after boot is better implemented in Whonix's firewall.
- release: not directly -&gt; dispatching the [first] success hook would care of this to keep sdwdate and whonix's firewall separated</blockquote>
OK, 
<blockquote>Polling the file system isn't good. On some systems /var/run isn't mounted in RAM. Therefore causing an infinite stream of disk reads. It's better to read the file event based. When notified by the kernel. That's what inotifywait is for.</blockquote>
The tests with a file in @HOME (without removing it) did not show any performance penalty, and we can increase time.sleep() in the loop. But it's probably not the best approach. Will try inotify.
<blockquote>Maybe we can have two files maintained by sdwdate-daemon, read by sdwdate-tray...
- /var/run/sdwdate/tray.color
- /var/run/sdwdate/tray.message
What do you think?</blockquote>
Yes, easier to manage, less code for discriminating the errors.
<blockquote>However, having a status "progress" is still important. Network can be super slow at times. [Flaky mobile network connection, GPRS, throttling and other stuff.] Even though the asynchronous time fetching may be super fast on our developer machines, it must be expected to be a lot slower on other systems. Taking a minute or even longer. Therefore a color and message for "progress" is required.</blockquote>
<blockquote>True. But please also expect/text the corner cases. With a distribution at this size, we're guaranteed to hit those.</blockquote>
In case super slow network, the user would be notified by the color of the icon (status reporting "Fetching time from remotes" or something like that).
<blockquote>Removing the file is probably not good. Makes this more obscure. More difficult to debug. In case it's suspected sdwdate-tray shows a wrong message, one couldn't check if the cause was sdwdate-daemon providing a wrong message. While just keeping overwriting the file, we can ask users to manually con`cat`enate it.</blockquote>
If we use inotify, sdwdate can overwrite the file, and sdwdate-gui only read it without removing it.
<blockquote>I was always wondering if timesync (Whonix 10 / 11) checking the status of bootclockrandomization was a design mistake. Perhaps that rather should be a feature of sdwdate? If bootclockrandomization is installed, check it. Otherwise, skip it.</blockquote>
I was going to ask why bootclockrandomization check was not done in sdwdate. That would be the logical place to implement it, as well as timesanitycheck. Skip if not existing, report error - require color change in case of failure of either or both.
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1137.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-08-05T16:38:27Z' class='post-time'>
                August 5, 2015,  4:38pm
              </time>
              <meta itemprop='dateModified' content='2015-08-05T16:38:27Z'>
          <span itemprop='position'>#60</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Great stuff.</p>
<p>inotifywait -&gt; My comment were about sdwdate-gui. Because reading /var/run/sdwdate/[…] files every or every few seconds is too much disk i/o. In other words, if sdwdate-gui would be a loop that reads the status files every few seconds, that would be too much disk i/o.</p>
<p>sdwdate-daemon probably does not require inotifywait. It can do normal writes. Those are infrequent enough. That’s fine.</p>
<blockquote>In case super slow network, the user would be notified by the color of the icon (status reporting "Fetching time from remotes" or something like that).</blockquote>
Yes. Color:
- (a) on boot / when first success file does not exist: yellow
- (b) during normal cycle: stay green (no need to make the user crazy by regularly switching color)
- (c) on manual restart: yellow [same case as (a)?] (user expects color change then, active action]
<p>(I am open to whether yellow is the best color here. Maybe one has an argument for blue or otherwise.)</p>
<blockquote>If we use inotify, sdwdate can overwrite the file, and sdwdate-gui only read it without removing it.</blockquote>
Yes, that's what I had in mind.
(There is a "modify" event that inotifywait can dispatch. Happens on overwrite.)
<blockquote>I was going to ask why bootclockrandomization check was not done in sdwdate. That would be the logical place to implement it, as well as timesanitycheck. Skip if not existing, report error - require color change in case of failure of either or both.</blockquote>
Yes. Please question such strange things.
<p>By the way, in case anyone is wondering why bootclockrandomization action is not in sdwdate: Because not everyone might want to use that. More interesting in case of anonymity distributions. Therefore keeping sdwdate fit for inclusion into upstream repositories such as Debian. There is interest in NTP replacement tools. (<a href="../../../external.html?link=https://blog.hboeck.de/archives/863-Dont-update-NTP-stop-using-it.html">https://blog.hboeck.de/archives/863-Dont-update-NTP-stop-using-it.html</a>) And I think going more mainstream would be a good thing. Therefore I am keeping the non-Whonix use case in mind. After all, one day we also need secure network time on [non-anonymous] hosts.</p>
        </div>

        <meta itemprop='headline' content='sdwdate and sdwdate-gui development thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="11374658.html?page=2">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="1137fdb0.html?page=4">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
