<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Doing `dist-upgrade` just bricked my Whonix. - Support - Whonix Forum</title>
    <meta name="description" content="To upgrade in-place to the point release 15.0.0.8.9 I just did apt update and dist-upgrade, reboot, and it bricked my Whonix: 
Kernel Panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0) 
In my case I &amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="9025.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Doing `dist-upgrade` just bricked my Whonix.&#39;" href="9025.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/doing-dist-upgrade-just-bricked-my-whonix/9025" />
<meta name="twitter:url" content="https://forums.whonix.org/t/doing-dist-upgrade-just-bricked-my-whonix/9025" />
<meta property="og:title" content="Doing `dist-upgrade` just bricked my Whonix." />
<meta name="twitter:title" content="Doing `dist-upgrade` just bricked my Whonix." />
<meta property="og:description" content="To upgrade in-place to the point release 15.0.0.8.9 I just did apt update and dist-upgrade, reboot, and it bricked my Whonix:  Kernel Panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)  In my case I was even more severely locked out because I had set my grub timeout to 0, and pressing shift (etc) to access grub didn’t work.  I managed to attach my Workstation’s VDI as a second storage drive to another workstation VM, boot into the other VM, and after booting off that other V..." />
<meta name="twitter:description" content="To upgrade in-place to the point release 15.0.0.8.9 I just did apt update and dist-upgrade, reboot, and it bricked my Whonix:  Kernel Panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)  In my case I was even more severely locked out because I had set my grub timeout to 0, and pressing shift (etc) to access grub didn’t work.  I managed to attach my Workstation’s VDI as a second storage drive to another workstation VM, boot into the other VM, and after booting off that other V..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="3 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="4 ❤" />
<meta property="article:published_time" content="2020-02-28T23:39:57+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="9025.html">Doing `dist-upgrade` just bricked my Whonix.</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/support/5.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #8C6238'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Support</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/AnonymousUser'><span itemprop='name'>AnonymousUser</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9025.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-28T23:39:57Z' class='post-time'>
                February 28, 2020, 11:39pm
              </time>
              <meta itemprop='dateModified' content='2020-02-28T23:39:57Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>To upgrade in-place to the point release 15.0.0.8.9 I just did <code>apt update</code> and <code>dist-upgrade</code>, <code>reboot</code>, and it bricked my Whonix:</p>
<p><strong><code>Kernel Panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</code></strong></p>
<p>In my case I was even more severely locked out because I had set my grub timeout to 0, and pressing shift (etc) to access grub didn’t work.</p>
<p>I managed to attach my Workstation’s VDI as a second storage drive to another workstation VM, boot into the other VM, and after booting off that other VM’s grub it strangely loaded my broken workstation as the actual linux system. I could then easily change its particular grub timeout to 5 again instead of mounting its file system externally and doing a more advanced manual grub edit.</p>
<p>So with grub access restored, I booted back in using an older kernel version and did:</p>
<p><code>sudo dpkg --configure -a</code></p>
<p>which fixed it.</p>
<p>I can now boot into the Whonix with normal newest kernel 4.19.0-8, and the problem is resolved.</p>
<hr>
<p>But if this will happen to others in the course of normal system upgrading, people not as advanced will suddenly lose their Whonix! That is terrible for Whonix remaining accessible to people who really need it.</p>
<p>As a possible clue in my case, I have had kernel updates fail at the end of updates for quite a while. (But if it’s happening in my Whonix, isn’t it happening in others?)</p>
<p>People shouldn’t be expected to backup their Whonix right before every dist-upgrade, just in case the upgrade bricks their Whonix. Unless <code>dist-upgrade</code> really is a major thing and people should only regularly perform <code>upgrade</code> without having unexpected concerns?</p>
<p>Either way, this was really bad, so here I am reporting it. What can be done about it?</p>
        </div>

        <meta itemprop='headline' content='Doing `dist-upgrade` just bricked my Whonix.'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9025.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-29T04:33:10Z' class='post-time'>
                February 29, 2020,  4:33am
              </time>
              <meta itemprop='dateModified' content='2020-02-29T04:33:10Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="AnonymousUser" data-post="1" data-topic="9025">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>But if this will happen to others in the course of normal system upgrading, people not as advanced will suddenly lose their Whonix!</p>
</blockquote>
</aside>
<p>Obviously.</p>
<aside class="quote no-group" data-username="AnonymousUser" data-post="1" data-topic="9025">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>People shouldn’t be expected to backup their Whonix right before every dist-upgrade, just in case the upgrade bricks their Whonix.</p>
</blockquote>
</aside>
<p>Obviously.</p>
<aside class="quote no-group" data-username="AnonymousUser" data-post="1" data-topic="9025">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>Unless <code>dist-upgrade</code> really is a major thing and people should only regularly perform <code>upgrade</code> without having unexpected concerns?</p>
</blockquote>
</aside>
<p>Disagree. (Because the difference between dist-upgrade and upgrade is maybe different from what you might think.)</p>
<aside class="quote no-group" data-username="AnonymousUser" data-post="1" data-topic="9025">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>(But if it’s happening in my Whonix, isn’t it happening in others?)</p>
</blockquote>
</aside>
<p>No reports of it happening by others.</p>
<p>Potential causes for bugs which only affect few users:</p>
<ul>
<li>host hardware issues</li>
<li>host operating system bugs</li>
<li>virtualizer bugs</li>
</ul>
<p>See also:</p>
<aside class="quote no-group" data-username="AnonymousUser" data-post="1" data-topic="9025">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>What can be done about it?</p>
</blockquote>
</aside>
<p>Theoretically: many things</p>
<ul>
<li><a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Stateless">https://www.whonix.org/wiki/Dev/Stateless</a></li>
<li><a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">https://www.whonix.org/wiki/Contribute</a></li>
<li>support only a limited amount of hardware (maybe just 1 notebook)</li>
</ul>
<p>Practically:</p>
<ul>
<li>probably nothing
<ul>
<li>see also: <a href="../../../external.html?link=https://www.whonix.org/wiki/Linux_User_Experience_versus_Commercial_Operating_Systems">https://www.whonix.org/wiki/Linux_User_Experience_versus_Commercial_Operating_Systems</a>
</li>
</ul>
</li>
</ul>
        </div>

        <meta itemprop='headline' content='Doing `dist-upgrade` just bricked my Whonix.'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9025.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-29T14:52:13Z' class='post-time'>
                February 29, 2020,  2:52pm
              </time>
              <meta itemprop='dateModified' content='2020-02-29T14:52:13Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="AnonymousUser" data-post="1" data-topic="9025">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>But if it’s happening in my Whonix, isn’t it happening in others?</p>
</blockquote>
</aside>
<p>I’ve never had this happen to me when upgrading Whonix.</p>
<p>I’ve only had stuff like this happen when messing with apparmor-profile-everything or hardened-kernel which isn’t used by ordinary users yet.</p>
<p>Did you do a lot of configuration? Why exactly did your updates fail? Was there an error message?</p>
<p>We can’t really deduce much from “there was an error”.</p>
        </div>

        <meta itemprop='headline' content='Doing `dist-upgrade` just bricked my Whonix.'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/AnonymousUser'><span itemprop='name'>AnonymousUser</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9025.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-02T04:08:24Z' class='post-time'>
                March 2, 2020,  4:08am
              </time>
              <meta itemprop='dateModified' content='2020-03-02T04:08:24Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>OK, if it’s quite possibly an uncommon incident, that makes me more relieved. Thank you for the information.</p>
        </div>

        <meta itemprop='headline' content='Doing `dist-upgrade` just bricked my Whonix.'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/AnonymousUser'><span itemprop='name'>AnonymousUser</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9025.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-23T08:57:12Z' class='post-time'>
                March 23, 2020,  8:57am
              </time>
              <meta itemprop='dateModified' content='2020-03-23T08:57:12Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>In my in-place upgrade from 15.0.0.8.9 to 15.0.0.9.4, once again I had to do <code>sudo dpkg --configure -a</code> after <code>sudo apt upgrade</code>, in order to fix it. Any idea if it’s a common issue that’s commonly fixable? If I had not done that once again my Whonix would have been ‘bricked’ upon restart.</p>
<p>I do customize my Whonix quite a lot but it’s really not hardcore stuff that I change. If it comes up again next time I’ll try to get the terminal output before I apply the <code>dpkg</code> fix.</p>
        </div>

        <meta itemprop='headline' content='Doing `dist-upgrade` just bricked my Whonix.'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9025.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-23T10:24:08Z' class='post-time'>
                March 23, 2020, 10:24am
              </time>
              <meta itemprop='dateModified' content='2020-03-23T10:24:08Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="AnonymousUser" data-post="5" data-topic="9025">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>Any idea if it’s a common issue that’s commonly fixable?</p>
</blockquote>
</aside>
<p>Not common. Might be fixable. Need to see it.</p>
<aside class="quote no-group" data-username="AnonymousUser" data-post="5" data-topic="9025">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>If it comes up again next time I’ll try to get the terminal output before I apply the <code>dpkg</code> fix.</p>
</blockquote>
</aside>
<p>For sure needed.</p>
        </div>

        <meta itemprop='headline' content='Doing `dist-upgrade` just bricked my Whonix.'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/AnonymousUser'><span itemprop='name'>AnonymousUser</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9025.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-07T11:18:15Z' class='post-time'>
                September 7, 2020, 11:18am
              </time>
              <meta itemprop='dateModified' content='2020-09-07T11:18:15Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Yet again, this terrible bug has happened to me. I kept a backup of my broken VM before fixing it via the same exact method reported previously, and this time I’ll come back and share what the errors say so that hopefully it can be effectively troubleshooted.</p>
        </div>

        <meta itemprop='headline' content='Doing `dist-upgrade` just bricked my Whonix.'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/AnonymousUser'><span itemprop='name'>AnonymousUser</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9025.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-11T04:07:58Z' class='post-time'>
                September 11, 2020,  4:07am
              </time>
              <meta itemprop='dateModified' content='2020-09-11T04:07:58Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Here is the info.</p>
<p>For several times when last performing <code>sudo apt upgrade</code>, my Whonix has finished the command with this error output:</p>
<pre><code class="lang-auto">Setting up initramfs-tools (0.133+deb10u1) ...
update-initramfs: deferring update (trigger activated)
Processing triggers for initramfs-tools (0.133+deb10u1) ...
update-initramfs: Generating /boot/initrd.img-4.19.0-10-amd64
cryptsetup: WARNING: The initramfs image may not contain cryptsetup binaries 
    nor crypto modules. If that's on purpose, you may want to uninstall the 
    'cryptsetup-initramfs' package in order to disable the cryptsetup initramfs 
    integration and avoid this warning.
live-boot: core filesystems devices utils udev blockdev dnsE: /usr/share/initramfs-tools/hooks/live failed with return 1.
update-initramfs: failed for /boot/initrd.img-4.19.0-10-amd64 with 1.
dpkg: error processing package initramfs-tools (--configure):
 installed initramfs-tools package post-installation script subprocess returned error exit status 1
Errors were encountered while processing:
 initramfs-tools
E: Sub-process /usr/bin/dpkg returned an error code (1)
</code></pre>
<p>Because it returns to the prompt, it’s easy to not notice that system upgrading didn’t actually succeed.</p>
<p>If I then shut down the Workstation, it’s ‘bricked’, so to speak.</p>
<p>On next boot, it stops at an all black with single cursor screen. It quickly flashes a few kernel errors about unicode.pf2.</p>
<p>I do fairly normal things in my Whonix, just installing packages, not heavily modifying the system in a way that would reasonably ‘void warranty’ so to speak. I do have to apply my own fix to the GDebi policy bug, though.</p>
<p>What would be causing this?</p>
        </div>

        <meta itemprop='headline' content='Doing `dist-upgrade` just bricked my Whonix.'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9025.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-11T09:47:52Z' class='post-time'>
                September 11, 2020,  9:47am
              </time>
              <meta itemprop='dateModified' content='2020-09-11T09:47:52Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Now we have something which can be investigated.</p>
<aside class="quote no-group" data-username="AnonymousUser" data-post="8" data-topic="9025">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<pre><code class="lang-auto">Errors were encountered while processing:
 initramfs-tools
</code></pre>
</blockquote>
</aside>
<p>If you see this message or a similar message about any other <code>grub</code>, <code>initramfs</code> or <code>linux</code> related package there is a probably that the system will not boot after reboot.</p>
<aside class="quote no-group" data-username="AnonymousUser" data-post="8" data-topic="9025">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p><code>live-boot: core filesystems devices utils udev blockdev dnsE: /usr/share/initramfs-tools/hooks/live failed with return 1.</code></p>
</blockquote>
</aside>
<p>This needs to be debugged further. It can possibly be done both, before or after you have seen this error.</p>
<ol>
<li>Open /usr/share/initramfs-tools/hooks/live with root rights.</li>
</ol>
<p>.</p>
<pre><code>sudoedit /usr/share/initramfs-tools/hooks/live
</code></pre>
<ol start="2">
<li>Enable <code>xtrace</code> / <code>-x</code> (for sh script debugging).</li>
</ol>
<p>I.e. change the first line</p>
<pre><code class="lang-auto">#!/bin/sh
</code></pre>
<p>by appending <code>-x</code>. So it looks like this.</p>
<pre><code class="lang-auto">#!/bin/sh -x
</code></pre>
<p>(Btw this also works not only for <code>#!/bin/sh</code> shebang but also for <code>#!/bin/bash</code> shebang.)</p>
<ol start="3">
<li>
<p>Save.</p>
</li>
<li>
<p>Try to trigger this error again.</p>
</li>
</ol>
<p>Command to dpkg finishing upgrades.</p>
<p>First one should work but if not try second one. Running both commands should be safe either way. Just in case run both commands.</p>
<pre><code>sudo dpkg --configure -a
</code></pre>
<p>Or initramfs regeneration.</p>
<pre><code>sudo update-initramfs -u
</code></pre>
<ol start="5">
<li>Post the output of these commands here.</li>
</ol>
        </div>

        <meta itemprop='headline' content='Doing `dist-upgrade` just bricked my Whonix.'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/AnonymousUser'><span itemprop='name'>AnonymousUser</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9025.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-27T07:17:21Z' class='post-time'>
                October 27, 2020,  7:17am
              </time>
              <meta itemprop='dateModified' content='2020-10-27T07:47:57Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a> Patrick, and sorry for the long delay.</p>
<p>I took the opportunity to upgrade my workstation again, and captured the xtrace output for those two commands as you’ve instructed. (Same errors occurred and same <code>dpkg --configure</code> solution needed as usual.)</p>
<p>Text outputs of <code>sudo dpkg --configure -a</code> and <code>sudo update-initramfs -u</code> are 1.5MB each. What’s the best way to share it with you? ZIP file? (Probably too long for Pastebin?) Hope we can solve this one. <img src="../../images/emoji/twitter/slight_smilec164.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='Doing `dist-upgrade` just bricked my Whonix.'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9025.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-27T10:35:00Z' class='post-time'>
                October 27, 2020, 10:35am
              </time>
              <meta itemprop='dateModified' content='2020-10-27T10:35:00Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Output of <code>sudo dpkg --configure -a</code> and <code>sudo update-initramfs -u</code> are probably very, very similar besides minor differences.</p>
<p>I doubt all 1.5MB are needed. Any pastbin would be ok. Also any file hoster would be ok. Check this:<br>
<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices#Uploading_Images_for_Support">https://www.whonix.org/wiki/Forum_Best_Practices#Uploading_Images_for_Support</a></p>
<p>The broken script <code>/usr/share/initramfs-tools/hooks/live</code> is just 256 lines. It’s not that complex.</p>
<p>The mentioned error messages:</p>
<aside class="quote no-group" data-username="AnonymousUser" data-post="8" data-topic="9025">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<pre><code class="lang-auto">Errors were encountered while processing:
 initramfs-tools
</code></pre>
</blockquote>
</aside>
<aside class="quote no-group" data-username="AnonymousUser" data-post="8" data-topic="9025">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>live-boot: core filesystems devices utils udev blockdev dnsE: /usr/share/initramfs-tools/hooks/live failed with return 1.</p>
</blockquote>
</aside>
<p>Interesting are just the last 1000 or 100 lines above these error messages. I.e. just the last 100 to 1000 lines of log would probably be sufficient. Which then could even be posted here in forums.</p>
        </div>

        <meta itemprop='headline' content='Doing `dist-upgrade` just bricked my Whonix.'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
