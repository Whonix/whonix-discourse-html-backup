<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Setting up DNSCrypt on Whonix Gateway. And also another question</title>
    <link>http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249</link>
    <description>I returned to whonix yesterday to try to solve my VPN problem after 10 days or so:
forums.whonix DOT org/t/problem-on-whonix-when-connecting-to-nordvpn-or-basically-any-other-linux-vpn-provider/8126
And I thought of a way to solve this: using DNSCrypt. Because I had similar issues in the past with VPNs and dnscrypt always fixed it and the vpn that didn&#39;t connect, connected fine after setting up dnscrypt.
I tested it and it works on a non-whonix system so I&#39;m pretty sure if I setup dnscrypt on my Gateway I will be able to also solve my VPN problem... Even if you think DNSCrypt won&#39;t solve my VPN problem, just bare with me and help me set it up. Maybe I just want dnscrypt and it doesn&#39;t have anything to do with VPN!

So, I read: whonix DOT org/wiki/Alternative_DNS_Resolver
And although this wiki page says it&#39;s supposed to be applied in Workstation I did it on Gateway, because I need dnscrypt on my Gateway.
Basically after successfully installing dnscrypt-proxy then everything else fails. 
After editing resolv.conf and everything mentioned in the wiki page, when I start the dnscrypt-proxy service it just makes the connection fail, I can&#39;t connect to anything since the nameserver isn&#39;t exactly responding...
Note: the same exact dnscrypt setup works just fine on a non-whonix system. Like the same .toml config file and same resolv.conf and everything...
I don&#39;t know what details to provide here for better help, but just tell me and I&#39;ll post them here.

Oh, and the other question is this:
Is it a good idea to use firefox vpn addons on whonix tor browser for hiding the exit node? You know, instead of TOR &gt; VPN...
Like this: VPN (on gateway after I set it up with success) &gt; TOR &gt; VPN FF Addon

Thanks.</description>
    <language>en</language>
    <lastBuildDate>Fri, 18 Oct 2019 02:49:45 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Setting up DNSCrypt on Whonix Gateway. And also another question</title>
        <dc:creator><![CDATA[TheNordVPNIssueGuy]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="10" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Should now be a ton easier to study Whonix networking.</p>
</blockquote>
</aside>
<p>Thank you for this post.<br>
But I can not get into this whole thing right now, even though I need this VPN/DNSCrypt issue to be solved asap. I’ll get into it when I have time and get back to you (I’ll leave feedback in the linked topic)</p>
<p>I’m gonna post a new topic about a kind of minor problem (although very frustrating!) that I had since the first time I used Whonix until now.</p>
          <p><a href="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/11</link>
        <pubDate>Fri, 18 Oct 2019 02:49:45 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8249-11</guid>
        <source url="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249.rss">Setting up DNSCrypt on Whonix Gateway. And also another question</source>
      </item>
      <item>
        <title>Setting up DNSCrypt on Whonix Gateway. And also another question</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="5" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I know that Whonix network configuration is rather difficult grasp. Therefore advanced modifications are difficult. “read Whonix source code” isn’t an easy task either since there are files related to network configuration and others (security / usability enhancements / gui / build / packaging) which makes it look daunting.</p>
<p>Non-statelessness is an issue as per <a href="https://www.whonix.org/wiki/Dev/Stateless" rel="nofollow noopener">https://www.whonix.org/wiki/Dev/Stateless</a> - i.e. not easy to see a diff between</p>
<ul>
<li>Debian buster OR Whonix</li>
<li>Kicksecure and Whonix</li>
</ul>
<p>I now have an idea how to source code may be used to generate an overview of all the networking related configurations. Don’t hold you breath for it though.</p>
</blockquote>
</aside>
<p>Should now be a ton easier to study Whonix networking.</p>
<aside class="quote quote-modified" data-post="1" data-topic="8274">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/whonix-networking-implementation-developer-documentation-feedback-wanted/8274">Whonix Networking Implementation - Developer Documentation - Feedback Wanted!</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/news"><span class="badge-category-bg" style="background-color: #AB9364;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="News posted by Whonix staff. The Whonix Blog. Stay Tuned. (rss)">News</span></a>
  </div>
  <blockquote>
    The diff between Debian buster and Whonix related to changes to network configuration. 
Whonix Networking Implementation - Developer Documentation was just now updated. 


On above page you can find all changes that Whonix applies related to networking: 

Location of the files on the disk in installed Whonix.
The location of the file in Whonix source code on the disk.
A link to the web version of the file on github.
A comment if

not installed by default
gateway or workstation only
Non-Qubes-Who…
  </blockquote>
</aside>

          <p><a href="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/10</link>
        <pubDate>Tue, 08 Oct 2019 14:30:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8249-10</guid>
        <source url="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249.rss">Setting up DNSCrypt on Whonix Gateway. And also another question</source>
      </item>
      <item>
        <title>Setting up DNSCrypt on Whonix Gateway. And also another question</title>
        <dc:creator><![CDATA[Patrick_mobile]]></dc:creator>
        <description><![CDATA[
            <p>No e-mail.</p>
<aside class="quote no-group" data-post="8" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/977dab/40.png" class="avatar"> TheNordVPNIssueGuy:</div>
<blockquote>
<p>Is encrypting and using your gpg mandatory for contacting you?</p>
</blockquote>
</aside>
<p>No.</p>
          <p><a href="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/9</link>
        <pubDate>Tue, 08 Oct 2019 03:36:21 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8249-9</guid>
        <source url="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249.rss">Setting up DNSCrypt on Whonix Gateway. And also another question</source>
      </item>
      <item>
        <title>Setting up DNSCrypt on Whonix Gateway. And also another question</title>
        <dc:creator><![CDATA[TheNordVPNIssueGuy]]></dc:creator>
        <description><![CDATA[
            <p>I’m busy with work on some other stuff for today and tommorow, but I’ll get back to fixing this issue after my work is done… and I’ll post here how it went.</p>
<aside class="quote no-group" data-post="7" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p><a href="https://www.whonix.org/wiki/Contact#For_Private_Inquiries" rel="nofollow noopener">https://www.whonix.org/wiki/Contact#For_Private_Inquiries</a> is up to date.<br>
No spam folder. No e-mail yet.</p>
</blockquote>
</aside>
<p>I sent you an email twice already, look:<img src="//forums.whonix.org/uploads/default/original/2X/5/582bc871df4740e8df5366b8280e6604e1a5d760.png" alt="Screenshot_2019-10-07_21-22-26" data-base62-sha1="czZOXPQ593kL2qVFOjdW7aThyyQ" width="373" height="131"><br>
(As you can see I even checked to see if my email is working!)<br>
Is encrypting and using your gpg mandatory for contacting you? If yes, then this is the reason you didn’t receive my mails because I sent you two simple emails with no encryption or anything! If using gpg and stuff is a must-do then tell me and I’ll send the email again with encryption.</p>
          <p><a href="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/8</link>
        <pubDate>Mon, 07 Oct 2019 21:26:21 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8249-8</guid>
        <source url="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249.rss">Setting up DNSCrypt on Whonix Gateway. And also another question</source>
      </item>
      <item>
        <title>Setting up DNSCrypt on Whonix Gateway. And also another question</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="6" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/977dab/40.png" class="avatar"> TheNordVPNIssueGuy:</div>
<blockquote>
<p>Whadou mean? What IP? use IP where exactly? IP instead of which DNS? …??? <img src="//forums.whonix.org/images/emoji/twitter/woozy_face.png?v=9" title=":woozy_face:" class="emoji" alt=":woozy_face:"></p>
</blockquote>
</aside>
<p>Don’t ignore this chapter:</p>
<p><a href="https://www.whonix.org/wiki/Tunnels/Connecting_to_a_VPN_before_Tor#VPN_IP_Address" rel="nofollow noopener">https://www.whonix.org/wiki/Tunnels/Connecting_to_a_VPN_before_Tor#VPN_IP_Address</a></p>
<p>Generally, mostly don’t ignore any chapter unless the chapter says it’s optional or something. If a chapter isn’t understood, not much worth trying other much more complex things.</p>
<aside class="quote no-group" data-post="6" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/977dab/40.png" class="avatar"> TheNordVPNIssueGuy:</div>
<blockquote>
<p>Are you sure? Isn’t adrelanos AT R** <em>U</em> .net your email? Maybe take a look in your spam folder?<br>
Anyway I sent another one just now.</p>
</blockquote>
</aside>
<p><a href="https://www.whonix.org/wiki/Contact#For_Private_Inquiries" rel="nofollow noopener">https://www.whonix.org/wiki/Contact#For_Private_Inquiries</a> is up to date.<br>
No spam folder. No e-mail yet.</p>
          <p><a href="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/7</link>
        <pubDate>Sun, 06 Oct 2019 15:32:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8249-7</guid>
        <source url="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249.rss">Setting up DNSCrypt on Whonix Gateway. And also another question</source>
      </item>
      <item>
        <title>Setting up DNSCrypt on Whonix Gateway. And also another question</title>
        <dc:creator><![CDATA[TheNordVPNIssueGuy]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="5" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>This might be difficult even outside of Whonix. Therefore as a prerequisite exercise it is required making that work on Debian buster before proceeding to try this on Whonix.</p>
<ul>
<li>a race condition might result in the VPN starting before DNSCrypt</li>
<li>therefore the VPN might block DNSCrypt</li>
<li>the VPN might try to resolve DNS before DNSCrypt was started</li>
</ul>
</blockquote>
</aside>
<p>I don’t know but I have a vpn on my host (linux) and I’m pretty sure it routes through DNSCrypt.</p>
<aside class="quote no-group" data-post="5" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>At maximum on Whonix-Gateway DNSCrypt would be used to resolve the DNS of the VPN.</p>
<p>Whonix-Gateway apt, curl, wget and others (as per <a href="https://www.whonix.org/wiki/Stream_Isolation" rel="nofollow noopener">https://www.whonix.org/wiki/Stream_Isolation</a>) are configured to talk to Tor directly, hence using a Tor <code>SocksPort</code> , hence using Tor directly to resolve DNS. Of course since Whonix does not restrict user freedom this could be reconfigured so DNS is resolved through DNSCrypt over clearnet or over Tor.<br>
DNSCrypt over clearnet or over Tor?</p>
</blockquote>
</aside>
<p>Maybe over both. Idk man I just want VPN &gt; TOR so that the first node(or is it called relay?!) doesn’t detect my IP and instead it detects the VPN IP… It’s not really much important to me whether apt and curl etc are over tor or clearnet, I just want tor traffic to be routed through VPN, I’m not sure how to do this or which stuff should be routed through what.<br>
Idk whether all traffic should be routed over VPN before Tor in order to get the browsing traffic routed like VPN &gt; Tor, I’m kinda tired and can’t explain this very well so I don’t know if I’m being clear enough and you understand what I mean or not?<br>
Basically apt curl and all the other stuff don’t really matter if they are routed over VPN then Tor, I just want Workstation’s Tor browser traffic to be routed like VPN &gt; Tor… But if somehow we can get literally all the traffic (apt, wget, tor browser and etc.) routed like so, then that’s perfect, but I mostly care about the browsing traffic… you know?</p>
<aside class="quote no-group" data-post="5" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Btw Whonix-Gateway VPN instructions suggest to use IP rather than DNS. That would avoid your DNS issue entirely.</p>
</blockquote>
</aside>
<p>Whadou mean? What IP? use IP where exactly? IP instead of which DNS? …??? <img src="//forums.whonix.org/images/emoji/twitter/woozy_face.png?v=9" title=":woozy_face:" class="emoji" alt=":woozy_face:"></p>
<aside class="quote no-group" data-post="5" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Didn’t get any e-mail but note there is no free support by e-mail as per:</p>
</blockquote>
</aside>
<p>Are you sure? Isn’t adrelanos AT R**<em>U</em>.net your email? Maybe take a look in your spam folder?<br>
Anyway I sent another one just now.<br>
No, it’s not exactly direct request for support, just read it and get back to me, you’ll know what it’s about.</p>
<aside class="quote no-group" data-post="5" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I now have an idea how to source code may be used to generate an overview of all the networking related configurations. Don’t hold you breath for it though.</p>
</blockquote>
</aside>
<p>I’m sorry but Idk why I don’t understand some of the context of your last post, I think it’s because I’m really tired!<br>
You mean I helped u/ am some of the reason that you had an idea for a next release? Like you’re gonna make the network configuration easier? Is this what you meant?</p>
          <p><a href="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/6</link>
        <pubDate>Sun, 06 Oct 2019 14:03:04 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8249-6</guid>
        <source url="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249.rss">Setting up DNSCrypt on Whonix Gateway. And also another question</source>
      </item>
      <item>
        <title>Setting up DNSCrypt on Whonix Gateway. And also another question</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="4" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/977dab/40.png" class="avatar"> TheNordVPNIssueGuy:</div>
<blockquote>
<p>Oh and I read wiki page Whonix-Gateway_System_DNS but IDK why but the <code>nodnsupdate</code> file doesn’t exist in my gateway!</p>
</blockquote>
</aside>
<p>only applies to older versions of Whonix or those who have package <code>anon-gw-dhcp-conf</code> installed. Can be safely ignored. Added to documentation.</p>
<aside class="quote no-group" data-post="4" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/977dab/40.png" class="avatar"> TheNordVPNIssueGuy:</div>
<blockquote>
<p>DNSCrypt &gt; VPN</p>
</blockquote>
</aside>
<p>This might be difficult even outside of Whonix. Therefore as a prerequisite exercise it is required making that work on Debian buster before proceeding to try this on Whonix.</p>
<ul>
<li>a race condition might result in the VPN starting before DNSCrypt</li>
<li>therefore the VPN might block DNSCrypt</li>
<li>the VPN might try to resolve DNS before DNSCrypt was started</li>
</ul>
<aside class="quote no-group" data-post="4" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/977dab/40.png" class="avatar"> TheNordVPNIssueGuy:</div>
<blockquote>
<p>But not eveything passes through dnscrypt</p>
</blockquote>
</aside>
<p>This is expected.</p>
<aside class="quote no-group" data-post="4" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/977dab/40.png" class="avatar"> TheNordVPNIssueGuy:</div>
<blockquote>
<p>Even if dnscrypt isn’t needed for my vpn problem, I just feel better if I have it</p>
</blockquote>
</aside>
<p>At maximum on Whonix-Gateway DNSCrypt would be used to resolve the DNS of the VPN.</p>
<p>Whonix-Gateway apt, curl, wget and others (as per <a href="https://www.whonix.org/wiki/Stream_Isolation" rel="nofollow noopener">https://www.whonix.org/wiki/Stream_Isolation</a>) are configured to talk to Tor directly, hence using a Tor <code>SocksPort</code>, hence using Tor directly to resolve DNS. Of course since Whonix does not restrict user freedom this could be reconfigured so DNS is resolved through DNSCrypt over clearnet or over Tor.<br>
DNSCrypt over clearnet or over Tor?</p>
<p>Whonix-Workstation does not use Whonix-Gateway /etc/resolv.conf. apt, wget, curl are again configured to talk to Tor directly and system default networking is redirected by Whonix Firewall to be redirected to Tor’s <code>TransPort</code> and Tor’s <code>DnsPort</code>. Making Whonix-Workstation use DNSCrypt which is installed on Whonix-Gateway may or may not be possible.</p>
<p>Btw Whonix-Gateway VPN instructions suggest to use IP rather than DNS. That would avoid your DNS issue entirely.</p>
<aside class="quote no-group" data-post="4" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/977dab/40.png" class="avatar"> TheNordVPNIssueGuy:</div>
<blockquote>
<p>Update: I sent an email instead, since I couldn’t find a way to PM you here. But Email’s ok too <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</blockquote>
</aside>
<p>Didn’t get any e-mail but note there is no free support by e-mail as per:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Support" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    

<h3><a href="https://www.whonix.org/wiki/Support" target="_blank" rel="nofollow noopener">Support</a></h3>

<p>Various Ways to get Help with Whonix ™. Free and Professional Support available.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-post="4" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/977dab/40.png" class="avatar"> TheNordVPNIssueGuy:</div>
<blockquote>
<p><strong>Is it a good idea to use a firefox vpn addon on whonix tor browser for hiding the exit node? You know, instead of TOR &gt; VPN it will be like this:</strong><br>
<strong>Host (with any configuration, maybe a vpn, not important) &gt; Whonix gateway with a working VPN &gt; TOR &gt; Workstation &gt; VPN addon on the browser</strong></p>
</blockquote>
</aside>
<p>This is answered on this page:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Tunnels/Introduction" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    

<h3><a href="https://www.whonix.org/wiki/Tunnels/Introduction" target="_blank" rel="nofollow noopener">Tunnels/Introduction</a></h3>

<p>Instructions on how to combine tunnels (VPN, SSH, proxy) with Tor. (User → Tor → proxy/VPN/SSH → Internet) (User → proxy/VPN/S...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>I know that Whonix network configuration is rather difficult grasp. Therefore advanced modifications are difficult. “read Whonix source code” isn’t an easy task either since there are files related to network configuration and others (security / usability enhancements / gui / build / packaging) which makes it look daunting.</p>
<p>Non-statelessness is an issue as per <a href="https://www.whonix.org/wiki/Dev/Stateless" rel="nofollow noopener">https://www.whonix.org/wiki/Dev/Stateless</a> - i.e. not easy to see a diff between</p>
<ul>
<li>Debian buster OR Whonix</li>
<li>Kicksecure and Whonix</li>
</ul>
<p>I now have an idea how to source code may be used to generate an overview of all the networking related configurations. Don’t hold you breath for it though.</p>
          <p><a href="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/5</link>
        <pubDate>Sun, 06 Oct 2019 10:19:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8249-5</guid>
        <source url="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249.rss">Setting up DNSCrypt on Whonix Gateway. And also another question</source>
      </item>
      <item>
        <title>Setting up DNSCrypt on Whonix Gateway. And also another question</title>
        <dc:creator><![CDATA[TheNordVPNIssueGuy]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group quote-modified" data-post="3" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>That does not work for reasons similar to reasons described here:</p>
<p>DNSCrypt runs as user <code>_dnscrypt-proxy</code> by Debian <code>dnscrypt</code> package default. That user on Whonix-Gateway has neither clearnet system default networking access nor torified system default networking access.</p>
<p>This <em>might</em> help or be part of the solution. Untested. This would allow <code>_dnscrypt-proxy</code> to connect to clearnet.</p>
<p><code>/etc/whonix_firewall.d/50_user.conf</code> :</p>
<pre><code class="lang-auto">NO_NAT_USERS+=" $(id -u "_dnscrypt-proxy")"
</code></pre>
<p>But DNSCrypt might not be required. /wiki/Whonix-Gateway_System_DNS might be easier to set up and more reliable.</p>
</blockquote>
</aside>
<p>Thanks Patrick, it helped, but it’s not totally fixed yet. But I’m sure with a little bit more guidance like these from you I’ll fix it and post the results here so everybody can benefit from it. Including all Whonix users, the person who has a similar issue to mine (Forum topic /t/installed-vpn-client-to-whonix-gateway-but-cant-connect/8254 ) *and possibly you if you decide to update the wiki for problems like this, or something like that… (See Update2 at bottom) *</p>
<p>When I used the firewall code you provided here in my whonix user firewall conf, dnscrypt sorta started working! It no longer gives errors when starting the service and starts fine. But not eveything passes through dnscrypt, like when I tried NordVPN again, it still didn’t work. Here’s some of my dnscrypt query log:</p>
<pre><code>[2019-10-05 22:59:05]   127.0.0.1       download.dnscrypt DOT info  A       PASS
[2019-10-05 22:59:05]   127.0.0.1       download.dnscrypt DOT info  A       PASS
[2019-10-05 22:59:05]   127.0.0.1       download.dnscrypt DOT info  A       PASS
[2019-10-05 22:59:29]   127.0.0.1       googleDOT com      A       PASS
[2019-10-05 23:02:33]   127.0.0.1       whonix DOT org      A       PASS
[2019-10-05 23:02:44]   127.0.0.1       queue.amazonawsDOT com     A       PASS
[2019-10-05 23:02:44]   127.0.0.1       queue.amazonawsDOT com     A       PASS
</code></pre>
<p>(My god! the link limitation in forum posts is a pain in my a**!)<br>
I used 127.0.2.1 as the nameserver IDK why it says 127.0.0.1 in the logs!<br>
google and whonix DOT org logs are because I pinged them, obviously ping wasn’t successful but somehow it got logged and it says PASS!<br>
But when I try testing to see if things are going through dnscrypt by using wget instead of ping, the things I wget get downloaded but don’t appear in dnscrypt log.</p>
<p>Here’s some of the logs when I tried connecting nordvpn:</p>
<pre><code>2019-10-05 23:13:28]   127.0.0.1       njtzzrvg0lwj3bsnDOT info   A       SERVER_ERROR
[2019-10-05 23:13:28]   127.0.0.1       se3v5tjfff3aetDOT me       AAAA    SERVER_ERROR
[2019-10-05 23:13:28]   127.0.0.1       zwyr157wwiu6eiorDOT com    AAAA    SERVER_ERROR
[2019-10-05 23:13:28]   127.0.0.1       api.nordvpnDOT com AAAA    SERVER_ERROR
[2019-10-05 23:13:28]   127.0.0.1       x9fnzrtl4x8pynsfDOT com    A       SERVER_ERROR
[2019-10-05 23:13:28]   127.0.0.1       njtzzrvg0lwj3bsnDOT info   AAAA    SERVER_ERROR
[2019-10-05 23:13:28]   127.0.0.1       73dkt-vwrqsDOT xyz A       SERVER_ERROR
[2019-10-05 23:13:35]   127.0.0.1       ns8469rfvth42DOT xyz       AAAA    SERVER_ERROR
[2019-10-05 23:13:35]   127.0.0.1       boi9osyg1uwtyafnDOT com    A       SERVER_ERROR
[2019-10-05 23:13:35]   127.0.0.1       judua3rtinpst0sDOT xyz     AAAA    SERVER_ERROR
[2019-10-05 23:13:35]   127.0.0.1       tptn0rhbtjDOT info AAAA    SERVER_ERROR
[2019-10-05 23:13:35]   127.0.0.1       boi9osyg1uwtyafnDOT com    AAAA    SERVER_ERROR
[2019-10-05 23:13:36]   127.0.0.1       queue.amazonawsDOT com     A       PASS
[2019-10-05 23:16:12]   127.0.0.1       zwyr157wwiu6eiorDOT com    AAAA    PASS
[2019-10-05 23:16:12]   127.0.0.1       zwyr157wwiu6eiorDOT com    A       PASS
[2019-10-05 23:16:14]   127.0.0.1       zwyr157wwiu6eiorDOT com    AAAA    PASS
[2019-10-05 23:16:14]   127.0.0.1       zwyr157wwiu6eiorDOT com    A       PASS
[2019-10-05 23:16:16]   127.0.0.1       se3v5tjfff3aetDOT me       A       SERVER_ERROR
[2019-10-05 23:16:16]   127.0.0.1       p99nxpivfscyverzDOT me     A       SERVER_ERROR
[2019-10-05 23:16:16]   127.0.0.1       api.nordvpnDOT com AAAA    PASS
[2019-10-05 23:16:16]   127.0.0.1       judua3rtinpst0sDOT xyz     AAAA    PASS
[2019-10-05 23:16:16]   127.0.0.1       mxo4bkqvdityebzvpDOT xyz   AAAA    PASS
</code></pre>
<p>Oh and I read wiki page Whonix-Gateway_System_DNS but IDK why but the <code>nodnsupdate</code> file doesn’t exist in my gateway! so I didn’t continue the rest of instructions since I failed to do the first step. There’s only two files there:<br>
user@host:~$ ls -lah /etc/dhcp/dhclient-enter-hooks.d/<br>
total 12K<br>
drwxr-xr-x 2 root root 4.0K Oct  5 23:22 .<br>
drwxr-xr-x 4 root root 4.0K Jun 23 23:39 …<br>
lrwxrwxrwx 1 root root    8 Dec 11  2018 debug -&gt; …/debug<br>
-rw-r–r-- 1 root root 2.8K Apr  1  2016 resolvconf</p>
<p>I just need dnscrypt to work, I need basically everything to go through it, except for TOR if it’s not needed.<br>
i.e. I want it to be something like this:<br>
Host &gt; Whonix-gateway &gt; DNSCrypt &gt; VPN &gt; TOR &gt; Whonix-workstation.<br>
I want the first node to have the IP of the vpn I’m gonna use on gateway instead of anything else, i.e. VPN &gt; TOR. And for this to happen in my situation I also need DNSCrypt. Even if dnscrypt isn’t needed for my vpn problem, I just feel better if I have it, and past expirience and a feeling tells me dnscrypt will help me with vpn.</p>
<p>Sorry this post got long, but hopefully soon all will be resolved we’re done with this.<br>
Also, <a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> I’m going to send you a pm, please check. Thank you.<br>
Update: I sent an email instead, since I couldn’t find a way to PM you here. But Email’s ok too <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Update2:</p>
<aside class="quote no-group" data-post="4" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/977dab/40.png" class="avatar"> TheNordVPNIssueGuy:</div>
<blockquote>
<p>so everybody can benefit from it. Including… *  …<strong>and possibly you if you decide to update the wiki for problems like this, or something like that…</strong></p>
</blockquote>
</aside>
<p>Actually, I will write a wiki page for this myself after everything works out, if you’re ok with that.<br>
As a contribution to the community and kind of a small reimbursement to you for helping me…<br>
The wiki page(or pages) will be about both NordVPN/VPN and DNSCrypt on Gateway…</p>
<p>Edit/Update3:<br>
Can you please answer my other question I posted at the bottom of my first post in this topic? Actually don’t read the one in my first post, I edited it and made it a better question:<br>
<strong>Is it a good idea to use a firefox vpn addon on whonix tor browser for hiding the exit node? You know, instead of TOR &gt; VPN it will be like this:</strong><br>
<strong>Host (with any configuration, maybe a vpn, not important) &gt; Whonix gateway with a working VPN &gt; TOR &gt; Workstation &gt; VPN addon on the browser</strong></p>
          <p><a href="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/4</link>
        <pubDate>Sat, 05 Oct 2019 23:58:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8249-4</guid>
        <source url="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249.rss">Setting up DNSCrypt on Whonix Gateway. And also another question</source>
      </item>
      <item>
        <title>Setting up DNSCrypt on Whonix Gateway. And also another question</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>DNSCrypt itself can be challenging to configure according to our prior experiences:</p>
<ul>
<li><a href="https://forums.whonix.org/t/use-dnscrypt-by-default-in-kicksecure-not-whonix/8117" class="inline-onebox">Use DNSCrypt by default in Kicksecure? (not Whonix!)</a></li>
<li><a href="https://forums.whonix.org/t/mx-srv-dnssec-any-dns-requests-over-tor-dnscrypt/7757" class="inline-onebox">MX / SRV / DNSSEC / any DNS requests over Tor / DNSCrypt</a></li>
</ul>
<p>Therefore a prerequisite exercise is making DNSCrypt work on non-Whonix, on Debian <code>buster</code>.</p>
<aside class="quote no-group" data-post="1" data-topic="8249">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/t/977dab/40.png" class="avatar"> TheNordVPNIssueGuy:</div>
<blockquote>
<p>So, I read: whonix DOT org/wiki/Alternative_DNS_Resolver<br>
And although this wiki page says it’s supposed to be applied in Workstation I did it on Gateway,</p>
</blockquote>
</aside>
<p>That does not work for reasons similar to reasons described here:</p>
<p><a href="https://forums.whonix.org/t/problem-on-whonix-when-connecting-to-nordvpn-or-basically-any-other-linux-vpn-provider/8126/7" class="inline-onebox">Problem on Whonix when connecting to NordVPN, or basically any other linux vpn provider!</a></p>
<p>DNSCrypt runs as user <code>_dnscrypt-proxy</code> by Debian <code>dnscrypt</code> package default. That user on Whonix-Gateway has neither clearnet system default networking access nor torified system default networking access.</p>
<p>This <em>might</em> help or be part of the solution. Untested. This would allow <code>_dnscrypt-proxy</code> to connect to clearnet.</p>
<p><code>/etc/whonix_firewall.d/50_user.conf</code>:</p>
<pre><code>NO_NAT_USERS+=" $(id -u "_dnscrypt-proxy")"
</code></pre>
<hr>
<p>But DNSCrypt might not be required. <a href="https://www.whonix.org/wiki/Whonix-Gateway_System_DNS" rel="nofollow noopener">https://www.whonix.org/wiki/Whonix-Gateway_System_DNS</a> might be easier to set up and more reliable.</p>
          <p><a href="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/3</link>
        <pubDate>Fri, 04 Oct 2019 10:47:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8249-3</guid>
        <source url="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249.rss">Setting up DNSCrypt on Whonix Gateway. And also another question</source>
      </item>
      <item>
        <title>Setting up DNSCrypt on Whonix Gateway. And also another question</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Using DNSCrypt on Whonix-Gateway is possible in theory but undocumented, hence unsupported.</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Unsupported" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    

<h3><a href="https://www.whonix.org/wiki/Unsupported" target="_blank" rel="nofollow noopener">Unsupported</a></h3>

<p>What do you mean by unsupported?</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/2</link>
        <pubDate>Fri, 04 Oct 2019 10:33:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8249-2</guid>
        <source url="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249.rss">Setting up DNSCrypt on Whonix Gateway. And also another question</source>
      </item>
      <item>
        <title>Setting up DNSCrypt on Whonix Gateway. And also another question</title>
        <dc:creator><![CDATA[TheNordVPNIssueGuy]]></dc:creator>
        <description><![CDATA[
            <p>I returned to whonix yesterday to try to solve my VPN problem after 10 days or so:<br>
forums.whonix DOT org/t/problem-on-whonix-when-connecting-to-nordvpn-or-basically-any-other-linux-vpn-provider/8126<br>
And I thought of a way to solve this: using DNSCrypt. Because I had similar issues in the past with VPNs and dnscrypt always fixed it and the vpn that didn’t connect, connected fine after setting up dnscrypt.<br>
I tested it and it works on a non-whonix system so I’m pretty sure if I setup dnscrypt on my Gateway I will be able to also solve my VPN problem… Even if you think DNSCrypt won’t solve my VPN problem, just bare with me and help me set it up. Maybe I just want dnscrypt and it doesn’t have anything to do with VPN!</p>
<p>So, I read: whonix DOT org/wiki/Alternative_DNS_Resolver<br>
And although this wiki page says it’s supposed to be applied in Workstation I did it on Gateway, because I need dnscrypt on my Gateway.<br>
Basically after successfully installing dnscrypt-proxy then everything else fails.<br>
After editing resolv.conf and everything mentioned in the wiki page, when I start the dnscrypt-proxy service it just makes the connection fail, I can’t connect to anything since the nameserver isn’t exactly responding…<br>
Note: the same exact dnscrypt setup works just fine on a non-whonix system. Like the same .toml config file and same resolv.conf and everything…<br>
I don’t know what details to provide here for better help, but just tell me and I’ll post them here.</p>
<p>Oh, and the other question is this:<br>
Is it a good idea to use firefox vpn addons on whonix tor browser for hiding the exit node? You know, instead of TOR &gt; VPN…<br>
Like this: VPN (on gateway after I set it up with success) &gt; TOR &gt; VPN FF Addon</p>
<p>Thanks.</p>
          <p><a href="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249/1</link>
        <pubDate>Fri, 04 Oct 2019 02:56:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8249-1</guid>
        <source url="http://forums.whonix.org/t/setting-up-dnscrypt-on-whonix-gateway-and-also-another-question/8249.rss">Setting up DNSCrypt on Whonix Gateway. And also another question</source>
      </item>
  </channel>
</rss>
