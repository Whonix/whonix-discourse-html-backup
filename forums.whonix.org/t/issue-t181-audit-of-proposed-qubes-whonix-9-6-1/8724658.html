<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Issue T181: Audit of Proposed qubes-whonix 9.6-1 - Qubes-Whonix - Whonix Forum</title>
    <meta name="description" content="[b]Issue T181: Audit qubes-whonix 9.6-1 

Posted by @WhonixQubes 

February 16, 2015 

https://phabricator.whonix.org/T181[/b] 

Audit of qubes-whonix 9.6-1 package release, developed by @nrgaway, is already underway and&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="8724658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Issue T181: Audit of Proposed qubes-whonix 9.6-1&#39;" href="872.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/issue-t181-audit-of-proposed-qubes-whonix-9-6-1/872?page=2" />
<meta name="twitter:url" content="https://forums.whonix.org/t/issue-t181-audit-of-proposed-qubes-whonix-9-6-1/872?page=2" />
<meta property="og:title" content="Issue T181: Audit of Proposed qubes-whonix 9.6-1" />
<meta name="twitter:title" content="Issue T181: Audit of Proposed qubes-whonix 9.6-1" />
<meta property="og:description" content="Great! üòÉ   Right. Understood.  And we should also look to independently make the best choices for the package before putting code in Patrick‚Äôs hands.   Right. Understood.  [quote=‚Äúnrgaway, post:19, topic:872‚Äù]3) I know you are trying to play the ‚Äòdevils advocate‚Äô  here which is fine but one thing I am noticing in some of you recent posts is the narrow-focus on the qubes-whonix package for security hardening.  While I agree that this is important I think it may also be just as important t..." />
<meta name="twitter:description" content="Great! üòÉ   Right. Understood.  And we should also look to independently make the best choices for the package before putting code in Patrick‚Äôs hands.   Right. Understood.  [quote=‚Äúnrgaway, post:19, topic:872‚Äù]3) I know you are trying to play the ‚Äòdevils advocate‚Äô  here which is fine but one thing I am noticing in some of you recent posts is the narrow-focus on the qubes-whonix package for security hardening.  While I agree that this is important I think it may also be just as important t..." />
<meta property="article:published_time" content="2015-02-27T02:09:51+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="872.html">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="872.html">Issue T181: Audit of Proposed qubes-whonix 9.6-1</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/qubes-whonix/12.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #63a0ff'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Qubes-Whonix</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="872.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-02-27T02:09:51Z' class='post-time'>
                February 27, 2015,  2:09am
              </time>
              <meta itemprop='dateModified' content='2015-02-27T02:09:51Z'>
          <span itemprop='position'>#21</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="19" data-topic="872">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>A few comments from me <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</blockquote>
</aside>
<p>Great! <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<aside class="quote" data-post="19" data-topic="872">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>1) Patrick has the ability to create a patch and / or add, remove files from my upstream version which will allow him to control any aspect of a release.  The qubes-whonix package will be using Patrick‚Äôs repo version to build and not the upstream version (mine).</p>
</blockquote>
</aside>
<p>Right. Understood.</p>
<p>And we should also look to independently make the best choices for the package before putting code in Patrick‚Äôs hands.</p>
<aside class="quote" data-post="19" data-topic="872">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>2) I have removed this script in the version that is going to be used to build the 9.6 template</p>
</blockquote>
</aside>
<p>Right. Understood.</p>
<p>[quote=‚Äúnrgaway, post:19, topic:872‚Äù]3) I know you are trying to play the ‚Äòdevils advocate‚Äô  here which is fine but one thing I am noticing in some of you recent posts is the narrow-focus on the qubes-whonix package for security hardening.  While I agree that this is important I think it may also be just as important to expand this to other packages installed as well.</p>
<p>For instance we can spend a lot of time making sure every byte of code in qubes-whonix can not initiate some type of indented compromise or fingerprint, but what about all the other hundreds of Debian packages?  Maybe the vim program has some backdoor that opens up some security hole (I sure hope it doesn‚Äôt).[/quote]</p>
<p>Right.</p>
<p>I did generalize the concept in my discussion for all of Whonix‚Äôs packages.</p>
<p>And I think I mentioned other Linux packages as well.</p>
<p>What got this discussion initially started was the ‚Äúenable-iptables-logging‚Äù script, but it has expanded further in scope, and now the ‚Äúenable-iptables-logging‚Äù script is basically just being referenced as an original example of the greater code security concept in question.</p>
<p>So this qubes-whonix package audit thread context is becoming somewhat inadequate for this discussion now. Partly why I recently established a new tracker ticket for this issue to try to abstract away.</p>
<p>Patrick mentioned not thinking that the presence of extra test code/scripts in Whonix being a viable threat vector, since we can easily know if they are invoked or not, citing that for Bash code we would notice the script strings or would raise red flags if using creative methods.</p>
<p>I‚Äôm not convinced of this, personally, and think I may have an innocent looking approach to invoke such test scripts. And I‚Äôm no expert at covert code exploits at all, so realizing the limits of my own expertise, and seeing ways to pull this off, I take an even more conservative approach, than just basing my conclusions on the certainty in my own personal expertise. Again, this conservative mindset goes double for me when keeping good people‚Äôs mission critical anonymity in mind around the world.</p>
<p>Also, while integrity of anonymity &amp; security is the primary concern when auditing a platform like Qubes + Whonix, I was also looking to make the process of doing so more time-efficient.</p>
<p>I view test code/scripts as often working against this purpose. Because, often, test code/scripts do things counter to the goals of the production code (in order to test systems in alternate non-production states). This is the nature of test code/scripts. To modify the normal intended production of systems.</p>
<p>Philosophically, and often concretely‚Ä¶</p>
<p>PRODUCTION CODE == INTENDED SAFE PRODUCTION SYSTEM STATE</p>
<p>TEST CODE == ALTERED POTENTIALLY UNSAFE NON-PRODUCTION SYSTEM STATE</p>
<p>That‚Äôs why I was simply suggesting, since were dealing with real live anonymity systems here, to exclude such test code/scripts by default, but offer them as user optional add-on packages if need be.</p>
<p>Also, no one can audit all the other code used beyond the Whonix project. And, I don‚Äôt currently have the time to audit all of Whonix-proper itself or Qubes-proper itself. Hopefully, I‚Äôll get more time for diving into the code of Whonix and Qubes in general down the line.</p>
<p>I do AT LEAST want to ensure that my administration of the Qubes + Whonix project involves auditing the code contributions that are specific to Qubes + Whonix, now that we aren‚Äôt just porting stock Whonix with stock Qubes anymore, but rather establishing a newly blended third inter-project platform of sorts.</p>
<p>Patrick also threw out a point about how default included tests for Whonix-proper may have more fundamental utility, like in situations where people‚Äôs internet is down. Can‚Äôt deny the principle of such scenarios. But can still advocate for security conservatism and minimalism.</p>
<p>So, with resistance experienced to this concept, and my personal audit-time capacity being much smaller than all of the packages involved, I thought I‚Äôd try to establish something first with the qubes-whonix package and then maybe expand out from there.</p>
<p>Like I mentioned, with regards to code for Qubes + Whonix, I‚Äôm personally okay with us simply omitting all test code/scripts. Or alternatively, as Patrick said he didn‚Äôt mind us doing, we could put any tests into a separate non-default-installed package, maybe ‚Äúqubes-whonix-tests‚Äù or something else. Either way.</p>
<p>Made this ticket:  <span class="bbcode-b"><a href="../../../external.html?link=https://phabricator.whonix.org/T191" rel="nofollow noopener">https://phabricator.whonix.org/T191</a></span></p>
<p>Personally ‚Äì with code I haven‚Äôt personally written ‚Äì I find it tedious to see production code that makes sense for the intended normal operational functions, but then also see ‚Äútest code/scripts‚Äù existing side-by-side, and then have to go down the rabbit hole hunting for and auditing all the potential ways to confirm whether the test code is invoked by default or not.</p>
<p>Especially since our Qubes + Whonix platform now involves code inside of two separate parent project repos. In my view, it just makes thorough auditing that much more time-inefficient and potentially insecure. Not to mention the lingering security concerns of such non-production code.</p>
<p>But, I think it would be good to establish a precedent for the Qubes + Whonix platform, and not have to debate it with each bit of test code of every single release going forward. Especially as more people start writing code for Qubes + Whonix in the future.</p>
<aside class="quote" data-post="19" data-topic="872">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>What I am trying to say here is I think we should look at also trying to verify every other installed Debian package as well since that is that route would be easier disguise.  With the Whonix-Gateway package being so large at the moment, this would be very difficult to achieve.  Here are my suggestions on how to accomplish this as I believe you should not complain without a solution <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</blockquote>
</aside>
<p>Don‚Äôt know about the ‚Äúverify every other installed Debian package‚Äù part, as this doesn‚Äôt seem feasible to me. But I do like the overall direction you‚Äôre going in here. <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<aside class="quote" data-post="19" data-topic="872">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>A) Create a whonix-gateway package minimal install.  I mean absolutely minimal, only what is required to run and configure it; no gui, nothing not specifically required to run it ‚Ä¶ bare bones.</p>
</blockquote>
</aside>
<p>Love this idea. <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<aside class="quote" data-post="19" data-topic="872">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>B) Allow configuration of Gateway via Workstation</p>
</blockquote>
</aside>
<p>Without further detail of what you mean by this, this statement hits me as a very bad security idea.</p>
<p>AFAIK, the Gateway treats the Workstation more like an untrusted domain. Allowing the Workstation to have direct control over the domain where the Tor networking configuration and real IP exists seems like bad isolation architecture.</p>
<aside class="quote" data-post="19" data-topic="872">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>C) Have a utility on Gateway that periodically checks for un-authorized changes to packages and configuration files.  There are a few out there that already do this.  Find a unauthorized or unexpected change?  shutdown gateway.  There are traffic monitoring tools which can also be used to do same.</p>
</blockquote>
</aside>
<p>I like this idea. This is another layer of some protection, and certainly a good thing.</p>
<p>But, as a caveat, if the VM gets compromised, then such periodic verification results may not be trustworthy, and be simply forged by whatever exploited occurred. But, not all exploits would design themselves to adapt for this, especially non-Whonix specific ones, and so it could still probably catch and warn of some compromises.</p>
<p>I‚Äôm actually involved in developing a new Qubes application that will be doing this for Qubes + Whonix going forward. It would not interfere with this specific implementation though, as it is separate from our Qubes + Whonix codebase. Just work as additional verification to this.</p>
<p>[quote=‚Äúnrgaway, post:19, topic:872‚Äù]Now in relation to the qubes-whonix package I think the most important thing to concentrate on at this moment are the firewall rules.  Not only the only I added, also making sure that the default whonix rules work as expected with qubes.  The Whonix firewall rules seems overly complex to me, so therefore I would also like to see:</p>
<p>D) Simplify whonix gateway firewall rules making them more easily human readable.  Currently these rules are applied or not applied based on many criteria and sometimes rules can be added from other sources as well.  What I would like to see is the whonix_firewall be automatically generated and only show the rules that apply right now.  So move existing whonix_firewall rules to whonix_firewall.template; create a script that will generate /usr/bin/whonix_firewall that contains ONLY the rules that will be set (no conditional statements based on ENV, or var, just exactly the rules that will be applied)</p>
<p>If someone changes an option, in the whonix_firewall.template, or configuration files it reads, they would run ‚Äògenerate-whonix-firewall‚Äô which would re-create it again.  This would allow someone to easily audit the firewall rules and the order of applying them and would not have to worry about some ENV variable being set by accident, or not by accident.</p>
<p>Anyway, that‚Äôs pretty much my thoughts today.  In importance of A, B, C and D, I would like to really see ‚ÄòD‚Äô implemented first as currently it is very difficult to know which firewall rules will be applied and there are too many spots that can be modified to change that behaviour with or without the user knowing about it.[/quote]</p>
<p>Simplification is almost always good, especially in key parts of the system.</p>
<p>I‚Äôm not familiar enough with that component of Whonix‚Äôs codebase to comment on any potential pitfalls of this proposed undertaking right now.</p>
<p>Firewall simplification sounds good in general to me.</p>
        </div>

        <meta itemprop='headline' content='Issue T181: Audit of Proposed qubes-whonix 9.6-1'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="872.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-02-27T02:47:11Z' class='post-time'>
                February 27, 2015,  2:47am
              </time>
              <meta itemprop='dateModified' content='2015-02-27T02:47:11Z'>
          <span itemprop='position'>#22</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="20" data-topic="872">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>[quote]A) Create a whonix-gateway package minimal install.  I mean absolutely minimal, only what is required to run and configure it; no gui, nothing not specifically required to run it ‚Ä¶ bare bones.</p>
</blockquote>
</aside>
<p>I was wondering about this also. It‚Äôs hard to decide what‚Äôs absolutely required and what not for minimal.</p>
<p>Whonix could be created in so many different ways. Even with just instructions only. (That‚Äôs how it all started.)[/quote]</p>
<p>I figure only packages to allow the gateway to run and be configured.  For instance Fedora and install a minimal base system with about a dozen packages.  Then add the required packages for tor, etc.</p>
<blockquote>Ideally, most of Whonix's functionality would be installable from Debian's repository. I'd love to find (co-)maintainer(s) for every package who ideally review the package, upload to Debian, so I would just be upstream. (https://www.whonix.org/wiki/Contribute#Maintainer)
<p>Ideally, Whonix would not be a Debian derivative, but a Debian Pure Blend. (<a href="../../../external.html?link=https://wiki.debian.org/DebianPureBlends" rel="nofollow noopener">https://wiki.debian.org/DebianPureBlends</a>) Therefore build by Debian servers. Deterministically! Tails devs, don‚Äôt attempt this, even though intrigeri is a Debian Developer, because Tails has a 6 week release cycle and because it needs quite some time for packages to migrate from Debian unstable to testing or even stable. It could work better for Whonix. While I think, neither stable nor testing would be really suited for Whonix in the fast changing anonymity world. Rolling Debian distribution would work best. There was an attempt, CUT (Constantly Usable Testing). Unfortunately, it looks like that effort has been abandoned.</p>
<p>Ideally, Qubes would not be a distribution, but an alternative Debian kernel package + other supporting packages. Just as you can install the freebsd kernel as alternative to the linux kernel on Debian, the same would be technically possible with Qubes.</p>
<p>Needless to say, that it‚Äôs a hell of a lot work ahead. Likely, this never happens.</p>
<aside class="quote">
<blockquote>
<p>B) Allow configuration of Gateway via Workstation</p>
</blockquote>
</aside>
<p>a) This would involve a protocol between gateway and workstation that comes with its own issues.<br>
b) The workstation should not be trusted for that purpose. Changes in the workstation should not allow configuring the gateway in any malicious way such as using colluding bridges.</p>
</blockquote>
<p>Yes, I agree; maybe another type of utility then that is solely used to configure gateway if users require a gui to configure gateway; just to get rid of xwindows, etc</p>
<blockquote>[quote]C) Have a utility on Gateway that periodically checks for un-authorized changes to packages and configuration files.  There are a few out there that already do this.  Find a unauthorized or unexpected change?  shutdown gateway. [/quote]
This supposed a compromised gateway. But if it was compromised, with today's malware, it can do malicious stuff and make sure you won't find out. (kernel rootkit, skipping certain backdoor files in kernel file system access, etc.) Compromised (malware infected) = game over. No way around that. (For analysis however, someone could write a VM that analyzed the gateway file system or even RAM for malicious things.)
<p>Related, see ‚ÄúScript to System Check Integrity against Debian Package Repository‚Äù:<br>
<a href="../../../external.html?link=https://lists.debian.org/debian-security/2013/09/msg00053.html" class="onebox" target="_blank" rel="nofollow noopener">https://lists.debian.org/debian-security/2013/09/msg00053.html</a></p>
<p>A fine TODO in the Libre Software security world.</p>
</blockquote>
<p>I actually believe one could detect even the most sophisticated malware on a gateway if the gateway was configured a bit differently.  First off, the root partition can set be read-only.  Modifiable configuration files can be kept in a rw directory.  Now since these are VM‚Äôs, we can write an external utility to checksum the filesystems, where we do not rely on any code within the gateway VM to do the verification.  Since the malware would only infect the VM, it is then therefore detectable.</p>
<p>For example, I would run a utility that checksums /root, /rw, /boot partitions from the host computer.  Any /tmp directorys will be trashed and recreated so are not needed to be checksumed.  If the external checksum differs from the expected result; you have reason to suspect a compromised system.  Updates to system can be applied in a special manner that would startvm with no services running with something like systemd-nspawn and update system, create new checksum and it ready for use again.</p>
<p>It would take a bit of a thought process to work out, but I think doable.</p>
<blockquote>[quote]There are traffic monitoring tools which can also be used to do same.[/quote]
Traffic monitoring can work against simpler kinds of malware, but not against sophisticated ones. (That introduce delays to communicate through them or something similarly creative.)
<aside class="quote">
<blockquote>
<p>but what about all the other hundreds of Debian packages?  Maybe the vim program has some backdoor that opens up some security hole (I sure hope it doesn‚Äôt).</p>
</blockquote>
</aside>
<p>Yeah. That‚Äôs a big issue. Those packages are much harder to grasp. Better don‚Äôt do actual research on how many people audited their code. I am sure, results would be devastating.</p>
<p>Problem is, with C(++) code, backdoors can look the very same as usual security bugs.</p>
<p>Also look up the ‚ÄúDebian OpenSSL debacle‚Äù.</p>
<p>Solution?</p>
<ol>
<li>Todays programming and script languages have been invented by geeks. Thanks for getting us started. Not by people who understand usability on the top level. Invent brain friendly programming and script languages, that are hard to hide backdoors, use aid from brain researches, do actual usability studies. That would allow a much bigger crowd to program and audit.</li>
<li>Use as little code as possible written in difficult languages. Minimal code that very few people are capable of auditing (assembler, C(++)).</li>
<li>Rewrite pretty much everything we got so far.</li>
</ol>
<p>Very likely to happen during my life time. Most people are happy with stuff as is. Only a minority of the Libre Software community is interested hardcore security. Once a solution works fine for most, there is little incentive to rewrite just to make backdoors much more unlikely.</p>
<aside class="quote">
<blockquote>
<p>Simplify whonix gateway firewall rules making them more easily human readable.</p>
</blockquote>
</aside>
<p>Got any specific ideas for that? Looks hard to me. Probably not possible without sacrificing functionality such as stream isolation or configurability.</p>
<aside class="quote">
<blockquote>
<p>What I would like to see is the whonix_firewall be automatically generated and only show the rules that apply right now</p>
</blockquote>
</aside>
<p>I find any solution that auto generates code from code difficult. It adds up complexity. Then one cannot just get the code from git and review. They can, but they‚Äôd need another process in their head ‚Äúhow would the final result look like when the generator finished‚Äù. Something to constantly explain and defend.</p>
<p>What about‚Ä¶</p>
<pre><code class="lang-auto"></code></pre>
<p>? That‚Äôs a compiled list, no?</p>
<p>Before making changes to a firewall (any, be it Whonix or otherwise), I run ‚Äúsudo iptables --list &gt; old‚Äù. Then make changes to the firewall script. Then load the new firewall rules. (Or reboot,.) Then store the new rules also within a file. ‚Äúsudo iptables --list &gt; new‚Äù. Then diff them. ‚Äúdiff old new‚Äù.</p>
</blockquote>
<p>That works too, but I do not find the current whonix_firewall simple since I have no idea what vars are actually enabled.  It is much easier to see what the firewall is supposed to create than to be only auditing the iptables list.  It would be a very difficult task to relate iptables to rules that were set, compared to just seeing what rules are being used to create the iptables list.</p>
<p>My suggestion only creates another step, the one to create whonix_firewall from whonix_firewall.template, where the template is the actually the original whonix_firewall script, so you can still review that to see what options are available and once you generate the whonix_firewall from it you can compare to make sure only the expected configuration was generated.</p>
<p>All you would need to do to convert the whonix_firewall to whonix_firewall.template is:</p>
<ol>
<li>mv whonix_firewall whonix_firewall.template</li>
<li>create a function something like:</li>
</ol>
<pre><code class="lang-auto">generate() {
  echo -e $* &gt;&gt; whonix_firewall
}</code></pre>
<ol start="3">
<li>place generate in front of all the iptables rules, and even comment sections</li>
</ol>
<p>So now, when whonix_filrewall.template is run, you can see exactly the firewall rules it created.</p>
<p>The main reason for doing this was is to be review the actual rules that would be used which can be of benefit to identity rules that are enabled that the user was unaware of.</p>
<p>Also what currently would happen if an ENV var was set before whonix_firewall is run, say ‚ÄòGATEWAY_ALLOW_INCOMING_SSH=1‚Äô.  Does the Whonix script make sure that the external ENVironmental vars are sanitized before running the firewall?</p>
<p>Personally, if I had a need to use Whonix, that would be one of the first things I did, but it could only be me that would have a concern like this.  Once I had confirmed the whonix_firewall rules to contain what I wanted them to contain , I would then do as you suggested and copy iptables list, and check against that every so often to make sure nothing else of modifying them.</p>
        </div>

        <meta itemprop='headline' content='Issue T181: Audit of Proposed qubes-whonix 9.6-1'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="872.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-02-27T04:06:09Z' class='post-time'>
                February 27, 2015,  4:06am
              </time>
              <meta itemprop='dateModified' content='2015-02-27T04:06:09Z'>
          <span itemprop='position'>#23</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="22" data-topic="872">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>Personally, if I had a need to use Whonix</p>
</blockquote>
</aside>
<p>Do you use another anonymity system instead or just simply don‚Äôt care to make personal use of anonymity tools?</p>
<p>Curious what motivates you to specifically develop for the Whonix platform?</p>
<p>BTW, thanks for doing so!</p>
        </div>

        <meta itemprop='headline' content='Issue T181: Audit of Proposed qubes-whonix 9.6-1'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="872.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-02-27T08:01:42Z' class='post-time'>
                February 27, 2015,  8:01am
              </time>
              <meta itemprop='dateModified' content='2015-02-27T08:01:42Z'>
          <span itemprop='position'>#24</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=‚ÄúWhonixQubes, post:23, topic:872‚Äù][quote author=nrgaway link=topic=961.msg7122#msg7122 date=1425005231]<br>
Personally, if I had a need to use Whonix<br>
[/quote]</p>
<p>Do you use another anonymity system instead or just simply don‚Äôt care to make personal use of anonymity tools?</p>
<p>Curious what motivates you to specifically develop for the Whonix platform?</p>
<p>BTW, thanks for doing so![/quote]<br>
I find it interesting and have used it on occasion, but I do find Tor slow so I prefer to use clearnet.  I have not really tried out any other systems as they do not seem to have clearnet gateways.  I also filter my open WiFi though Tor.</p>
<p>I like learning new things and since privacy seems to be a big issue these days, that had prompted me into learning more about it.  I actually found out about Qubes through this web site and I am totally loving it.</p>
        </div>

        <meta itemprop='headline' content='Issue T181: Audit of Proposed qubes-whonix 9.6-1'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="872.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-02-27T10:51:26Z' class='post-time'>
                February 27, 2015, 10:51am
              </time>
              <meta itemprop='dateModified' content='2015-02-27T10:51:26Z'>
          <span itemprop='position'>#25</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=‚Äúnrgaway, post:24, topic:872‚Äù][quote author=WhonixQubes link=topic=961.msg7123#msg7123 date=1425009969]</p>
<aside class="quote">
<blockquote>
<p>Personally, if I had a need to use Whonix</p>
</blockquote>
</aside>
<p>Do you use another anonymity system instead or just simply don‚Äôt care to make personal use of anonymity tools?</p>
<p>Curious what motivates you to specifically develop for the Whonix platform?</p>
<p>BTW, thanks for doing so!<br>
[/quote]<br>
I find it interesting and have used it on occasion, but I do find Tor slow so I prefer to use clearnet.  I have not really tried out any other systems as they do not seem to have clearnet gateways.  I also filter my open WiFi though Tor.</p>
<p>I like learning new things and since privacy seems to be a big issue these days, that had prompted me into learning more about it.  I actually found out about Qubes through this web site and I am totally loving it.[/quote]</p>
<p>Jason,</p>
<p>Got it.</p>
<p>Yeah, for myself, the big reason for developing the Qubes + Whonix platform is about further checking oppressive and immoral political establishments.</p>
<p>I do get that there are a number of more casual use cases for the platform too.</p>
<p>Ultimately, I launched the project for the hope that the more serious security isolation of Qubes and the tailored anonymity environment of Whonix could help meaningfully push forward the status quo of the underdeveloped privacy/anonymity computing industry to offer better solutions to good people in need of true mission critical anonymity.</p>
<p>Even if your own motives are more casual and educational, I‚Äôm very thankful for the contributions you‚Äôre able to make that additionally help towards this bigger mission.</p>
<p>Beyond the core Tor software/protocol, I see the following as being very important to more critical privacy/anonymity needs‚Ä¶</p>
<ul>
<li>
<ol>
<li>Whonix‚Äôs isolated TwoVM implementation of Tor</li>
</ol>
</li>
<li>
<ol start="2">
<li>Qubes‚Äôs hardcore host-level security isolation</li>
</ol>
</li>
<li>
<ol start="3">
<li>Generic fingerprint-resistant anonymous OS environment</li>
</ol>
</li>
<li>
<ol start="4">
<li>Usability for people to make consistent and efficient use of best practices</li>
</ol>
</li>
<li>
<ol start="5">
<li>More open and secure computer hardware</li>
</ol>
</li>
</ul>
<p>And supporting an open, transparent, collaborative, well documented and audited development process for everything.</p>
<p>Thanks to our combined Qubes + Whonix efforts over the past 7+ months, we‚Äôve gone from position <span class="hashtag">#1</span> before last year to now fulfilling position <span class="hashtag">#2</span> since last year.</p>
<p>I‚Äôm working towards trying to fix what is sorely lacking for positions <span class="hashtag">#3</span> and <span class="hashtag">#4</span> with Qubes + Whonix this year.</p>
<p>Thank you for being a meaningful part of this great project! <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
        </div>

        <meta itemprop='headline' content='Issue T181: Audit of Proposed qubes-whonix 9.6-1'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="872.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-02-28T05:26:17Z' class='post-time'>
                February 28, 2015,  5:26am
              </time>
              <meta itemprop='dateModified' content='2015-02-28T05:26:17Z'>
          <span itemprop='position'>#26</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>No, the env vars do not get sanitized. I see no need for that. It‚Äôs a feature. Yes, there has been a terrible bash env var vulnerability, but no reason to freak out and go crazy about it and ditch env vars everywhere. It was never applicable to local scripts of that type. To set environment variables, one needs local access. Once malware has local access, it can do a lot worse stuff than tampering with env vars, so it wouldn‚Äôt help there anyhow. The only one who can set env vars is the user and as well are files on the disk the are shipped by packages. The user cannot be protected from itself anyhow. And files on the disk that come from packages need to be audited the usual way anyhow. Now, if for example the xchat-improved-privacy would ship a file to set some strange env var, that would raise a red flag.</p>
<p>[hr]</p>
<p>If you want to know environment variables set on your system, login root  (or user, depends) and type ‚Äúenv‚Äù. Or add ‚Äúenv‚Äù to the beginning of some script you‚Äôre interested in and echo and/or redirect it anywhere you prefer.</p>
<p>There is also a very limited number of places where global env vars can be set.</p>
<p>[hr]</p>
<p>Which variables for Whonix Firewall are set gets clear by having a look at <code>/etc/whonix_firewall.d/</code>. Files in that folder are <code>source</code>ed in lexical order (as per firewall script, section ‚Äúsource config folder‚Äù). There aren‚Äôt that many in that folder.</p>
<p>You can also write a small script based on the parsing code to show them.</p>
<pre><code class="lang-auto">#!/bin/bash

set -e
set -x

for i in /etc/whonix_firewall.d/*; do
   if [ -f "$i" ]; then
      ## If the last character is a ~, ignore that file, because it was created
      ## by some editor, which creates backup files.
      if [ "${i: -1}" = "~" ]; then
         continue
      fi
      ## Skipping files such as .dpkg-old and .dpkg-dist.
      if ( echo "$i" | grep -q ".dpkg-" ); then
         true "skip $i"
         continue
      fi
      bash_n_exit_code="0"
      bash_n_output="$(bash -n "$i" 2&gt;&amp;1)" || { bash_n_exit_code="$?" ; true; };
      if [ ! "$bash_n_exit_code" = "0" ]; then
         echo "Invalid config file: $i
bash_n_exit_code: $bash_n_exit_code
bash_n_output:
$bash_n_output" &gt;&amp;2
         exit 1
      fi
      source "$i"
   fi
done</code></pre>
<p>Alternative:</p>
<pre><code class="lang-auto">#!/bin/bash

set -e

for i in /etc/whonix_firewall.d/*; do
   if [ -f "$i" ]; then
      ## If the last character is a ~, ignore that file, because it was created
      ## by some editor, which creates backup files.
      if [ "${i: -1}" = "~" ]; then
         continue
      fi
      ## Skipping files such as .dpkg-old and .dpkg-dist.
      if ( echo "$i" | grep -q ".dpkg-" ); then
         true "skip $i"
         continue
      fi
      bash_n_exit_code="0"
      bash_n_output="$(bash -n "$i" 2&gt;&amp;1)" || { bash_n_exit_code="$?" ; true; };
      if [ ! "$bash_n_exit_code" = "0" ]; then
         echo "Invalid config file: $i
bash_n_exit_code: $bash_n_exit_code
bash_n_output:
$bash_n_output" &gt;&amp;2
         exit 1
      fi
      set -x
      source "$i"
      set +x
   fi
done</code></pre>
<p>Example output from my test system:</p>
<pre><code class="lang-auto">+ source /etc/whonix_firewall.d/30_default
++ GATEWAY_ALLOW_INCOMING_FLASHPROXY=0
++ FLASHPROXY_PORT=9000
++ WORKSTATION_TRANSPARENT_TCP=1
++ WORKSTATION_TRANSPARENT_UDP=0
++ WORKSTATION_TRANSPARENT_DNS=1
++ WORKSTATION_ALLOW_SOCKSIFIED=1
++ CONTROL_PORT_FILTER_PROXY_ENABLE=1
++ GATEWAY_ALLOW_INCOMING_DIR_PORT=0
++ GATEWAY_ALLOW_INCOMING_OR_PORT=0
++ DIR_PORT=80
++ OR_PORT=443
++ GATEWAY_TRANSPARENT_TCP=0
++ GATEWAY_TRANSPARENT_UDP=0
++ GATEWAY_TRANSPARENT_DNS=0
++ ALLOW_GATEWAY_ROOT_USER=0
++ ALLOW_GATEWAY_USER_USER=0
++ GATEWAY_ALLOW_INCOMING_SSH=0
++ NO_REJECT_INVALID_OUTGOING_PACKAGES=0
++ GATEWAY_ALLOW_INCOMING_ICMP=0
+ set +x
+ source /etc/whonix_firewall.d/50_user
++ WORKSTATION_TRANSPARENT_TCP=1
++ WORKSTATION_TRANSPARENT_DNS=1
++ GATEWAY_IPv4_DROP_INVALID_INCOMING_PACKAGES_POST_HOOK='echo test'
+ set +x</code></pre>
<p>[hr]</p>
<p>As for the iptables generator‚Ä¶ I‚Äôd find it terrible to document ‚Äúby default you cannot see in the source code how the firewall script will look like, because first you need to run the generator, and then you can look the the generated result‚Äù. Seems more complex than currently to me.</p>
<p>It indeed wouldn‚Äôt be hard to write instead of ‚Äúiptables‚Äù some ‚Äúfunction-name‚Äù. That function could, depending on some setting, either directly apply the iptables rule (as is currently) (and/)or create a compiled firewall script with iptables rules. It would increase the size of the xtrace, though. And also depending on some setting, a to-be-written- wrapper could either directly load /usr/bin/whonix_firewall or /var/cache/whonix-gw-firewall/compiled. Write a pull request?</p>
<p>I implemented lots of feature requests for Whonix Firewall. Now your feature request basically is, ‚Äústrip all the features, make it bar bone‚Äù. Needless to say, that there is no way to make everyone happy. There could be an alternative whonix-simple-fw package that only implements what the current defaults are with no options. They when one or another fw gets changed, the other one would have to be updated as well. That is a concept that works bad, it is often forgotten. And if someone wants to use some feature, the answer would be ‚Äúuse whonix-gw-firewall‚Äù. And then there would be a feature request to add the VPN_FIREWALL feature to whonix-simple-fw. And a debate on which one is best and if both could/should be combined to have advantages of all. There is no perfect solution either way.</p>
<p>What about comments and new lines in the compiled firewall list? Just none? And how/why would this compiled firewall rules list be any better than ‚Äúiptables --list‚Äù?</p>
<p>[hr]</p>
<p>I am not convinced of removal of unit tests and whatnot without seeing an example of creative hidden invocation. Scary stuff that applies to C(++) that‚Äôs often in the news often does not apply to scripts. It‚Äôs useful to stay on top of vulnerabilities, understand them and then try imagine if it could be modified/applied for any scripts as well, sure. But often it doesn‚Äôt.</p>
<p>Most times it‚Äôs best to follow existing standards and conventions. When accepting patches you usually want them to run the test suite. And to extend the test suite if applicable. Now, when you receive a patch and you start answering, ‚Äúoh, but did you get the test suite from that other repository and followed instructions on how to set it up‚Äù you‚Äôll make things actually more difficult.</p>
<p>For a while, whonix-developer-meta-files wasn‚Äôt part of the Whonix source code. An unlinked extra repository that depended on the main source code. Setting that up caused confusion. (<a href="../../../external.html?link=https://github.com/Whonix/Whonix/issues/337">https://github.com/Whonix/Whonix/issues/337</a>)</p>
<p>Telling, other interested contributors ‚Äúbut you also need xyz‚Äù, looks like a non-standard mess and worsens ability and motivation to get into it at all.</p>
<p>Vastly increasing the number of packages with -test packages doesn‚Äôt seem to me like a good way to make things simpler.</p>
<p>There are a lot more low hanging fruits that would improve the stability and auditability.</p>
<ul>
<li>
<p>For Whonix in general, for example, I would like to get rid of the giant code duplication by adding the generic makefile and make-helper.bash to all the packages without the packages being standalone. Getting the generic makefile into Debian so it could be pulled as a build dependency would do the trick.</p>
</li>
<li>
<p>For Qubes specifically, rather than with test scripts and creative invocation of them, I am much more concerned about the current ‚Äúcreativity‚Äù of the qubes-whonix package as I said here: <a href="../../../external.html?link=https://www.whonix.org/forum/index.php/topic,841.msg7019.html#msg7019">https://www.whonix.org/forum/index.php/topic,841.msg7019.html#msg7019</a> Turning the qubes-whonix package into a sort of jack of all trades device rather than the ‚Äúdo one thing, do it well‚Äù paradigm (installing systemd, custom package selection) and all the non-standard things and hacks (using systemd on wheezy, custom systemd code in Debian maintainer scripts, not using default debhelper code and a lot other hacks that mostly or even all have tickets already) concerns me a lot more, since it provides a lot more room for ‚Äúcreativity‚Äù and bugs.</p>
</li>
</ul>
<p>[hr]</p>
<p>I hope I addressed all points.</p>
        </div>

        <meta itemprop='headline' content='Issue T181: Audit of Proposed qubes-whonix 9.6-1'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="872.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-02-28T07:28:44Z' class='post-time'>
                February 28, 2015,  7:28am
              </time>
              <meta itemprop='dateModified' content='2015-02-28T07:28:44Z'>
          <span itemprop='position'>#27</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=‚ÄúPatrick, post:26, topic:872‚Äù]I am not convinced of removal of unit tests and whatnot without seeing an example of creative hidden invocation. Scary stuff that applies to C(++) that‚Äôs often in the news often does not apply to scripts. It‚Äôs useful to stay on top of vulnerabilities, understand them and then try imagine if it could be modified/applied for any scripts as well, sure. But often it doesn‚Äôt.</p>
<p>Most times it‚Äôs best to follow existing standards and conventions. When accepting patches you usually want them to run the test suite. And to extend the test suite if applicable. Now, when you receive a patch and you start answering, ‚Äúoh, but did you get the test suite from that other repository and followed instructions on how to set it up‚Äù you‚Äôll make things actually more difficult.</p>
<p>For a while, whonix-developer-meta-files wasn‚Äôt part of the Whonix source code. An unlinked extra repository that depended on the main source code. Setting that up caused confusion. (<a href="../../../external.html?link=https://github.com/Whonix/Whonix/issues/337" rel="nofollow noopener">https://github.com/Whonix/Whonix/issues/337</a>)</p>
<p>Telling, other interested contributors ‚Äúbut you also need xyz‚Äù, looks like a non-standard mess and worsens ability and motivation to get into it at all.</p>
<p>Vastly increasing the number of packages with -test packages doesn‚Äôt seem to me like a good way to make things simpler.[/quote]</p>
<p>This is ultimately ok, as I can additionally focus on mitigating the potential issue through an independent app and we can keep tests in for all the other packages in the original Whonix codebase.</p>
        </div>

        <meta itemprop='headline' content='Issue T181: Audit of Proposed qubes-whonix 9.6-1'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="872.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-02-28T13:19:06Z' class='post-time'>
                February 28, 2015,  1:19pm
              </time>
              <meta itemprop='dateModified' content='2015-02-28T13:19:06Z'>
          <span itemprop='position'>#28</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I would wonder how this app would operate, but feel free to cook it up.</p>
        </div>

        <meta itemprop='headline' content='Issue T181: Audit of Proposed qubes-whonix 9.6-1'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="872.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-02-28T13:40:45Z' class='post-time'>
                February 28, 2015,  1:40pm
              </time>
              <meta itemprop='dateModified' content='2015-02-28T13:40:45Z'>
          <span itemprop='position'>#29</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="28" data-topic="872">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I would wonder how this app would operate, but feel free to cook it up.</p>
</blockquote>
</aside>
<p>Just simply by stripping out extra test code/scripts that are potentially not good for production anonymity if run.</p>
        </div>

        <meta itemprop='headline' content='Issue T181: Audit of Proposed qubes-whonix 9.6-1'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="872.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-02-28T15:08:47Z' class='post-time'>
                February 28, 2015,  3:08pm
              </time>
              <meta itemprop='dateModified' content='2015-02-28T15:08:47Z'>
          <span itemprop='position'>#30</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>That wouldn‚Äôt need an app. Also because the files the app deletes gets recreated when the package that ships the undesired file is upgraded.</p>
<p>Use config-package-dev‚Äôs hide operation. Link:<br>
<a href="../../../external.html?link=http://debathena.mit.edu/config-packages/" class="onebox" target="_blank">http://debathena.mit.edu/config-packages/</a><br>
Available from Debian repository, stable, used by some Whonix packages.</p>
<p>Here is a simple example package, that hides a single file [equally easy to hide multiple files]:<br>
<a href="../../../external.html?link=https://github.com/Whonix/knetattach-hide" class="onebox" target="_blank">https://github.com/Whonix/knetattach-hide</a></p>
        </div>

        <meta itemprop='headline' content='Issue T181: Audit of Proposed qubes-whonix 9.6-1'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="872.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-02-28T15:26:40Z' class='post-time'>
                February 28, 2015,  3:26pm
              </time>
              <meta itemprop='dateModified' content='2015-02-28T15:26:40Z'>
          <span itemprop='position'>#31</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=‚ÄúPatrick, post:30, topic:872‚Äù]That wouldn‚Äôt need an app. Also because the files the app deletes gets recreated when the package that ships the undesired file is upgraded.</p>
<p>Use config-package-dev‚Äôs hide operation. Link:<br>
<a href="../../../external.html?link=http://debathena.mit.edu/config-packages/" class="onebox" target="_blank" rel="nofollow noopener">http://debathena.mit.edu/config-packages/</a><br>
Available from Debian repository, stable, used by some Whonix packages.</p>
<p>Here is a simple example package, that hides a single file [equally easy to hide multiple files]:<br>
<a href="../../../external.html?link=https://github.com/Whonix/knetattach-hide%5B/quote%5D" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/Whonix/knetattach-hide[/quote]</a></p>
<p>I will be sure to check it out and see if it will work as desired. Thanks! <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
        </div>

        <meta itemprop='headline' content='Issue T181: Audit of Proposed qubes-whonix 9.6-1'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="872.html">‚Üê previous page</a></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
