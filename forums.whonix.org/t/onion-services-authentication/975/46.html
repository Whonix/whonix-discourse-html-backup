<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Onion Services Authentication - #46 by Patrick - Development - Whonix Forum</title>
    <meta name="description" content="../../../../external.html?link=http://tor.stackexchange.com/questions/219/how-to-use-hidden-service-authentication">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../9759ba9.html?page=3" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Onion Services Authentication&#39;" href="../975.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/onion-services-authentication/975/46" />
<meta name="twitter:url" content="https://forums.whonix.org/t/onion-services-authentication/975/46" />
<meta property="og:title" content="Onion Services Authentication" />
<meta name="twitter:title" content="Onion Services Authentication" />
<meta property="og:description" content="HulaHoop via Whonix Forum:    What package do you mean?   anon-gw-anonymizer-config changes Tor config files to include all of  /usr/local/etc/torrc.d/.  %include /usr/local/etc/torrc.d/  As per:    Please check if these files look OK:   /etc/tor/torrc /etc/torrc.d/95_whonix.conf   Tor or autogen? The later still doesn’t how in Testers   Expected." />
<meta name="twitter:description" content="HulaHoop via Whonix Forum:    What package do you mean?   anon-gw-anonymizer-config changes Tor config files to include all of  /usr/local/etc/torrc.d/.  %include /usr/local/etc/torrc.d/  As per:    Please check if these files look OK:   /etc/tor/torrc /etc/torrc.d/95_whonix.conf   Tor or autogen? The later still doesn’t how in Testers   Expected." />
<meta property="article:published_time" content="2020-01-11T16:30:36+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="../9754658.html?page=2">
        <link rel="next" href="../975fdb0.html?page=4">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../975.html">Onion Services Authentication</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-07T15:52:52Z' class='post-time'>
                January 7, 2020,  3:52pm
              </time>
              <meta itemprop='dateModified' content='2020-01-07T15:52:52Z'>
          <span itemprop='position'>#41</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Created the script file in the bin dir. Executing with sudo anon-auth-autogen results in a command not found. Executing at its file path runs it but runs into a showstopper:</p>
<blockquote>
<p>user@host:~$ sudo bash /usr/bin/anon-auth-autogen<br>
INFO: Created torconffile ‘/usr/local/etc/torrc.d/43_hidden_service_hs_autogen.conf’.<br>
cat: /var/lib/tor/hidden_service/hostname: No such file or directory<br>
ERROR: exit_code: 1 | BASH_COMMAND: onion_url="$(cat “$onion_url_file”)"</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-08T08:19:27Z' class='post-time'>
                January 8, 2020,  8:19am
              </time>
              <meta itemprop='dateModified' content='2020-01-08T08:19:27Z'>
          <span itemprop='position'>#42</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Do contents of <code>/usr/local/etc/torrc.d/43_hidden_service_hs_autogen.conf</code> look sensible?</p>
<p>Does folder / file exist now?</p>
<pre><code>sudo ls -la /var/lib/tor/hidden_service/
sudo ls -la /var/lib/tor/hidden_service/hostname
</code></pre>
<p>If both yes, I think I know why this is happening. After creating <code>/usr/local/etc/torrc.d/43_hidden_service_hs_autogen.conf</code> the script runs <code>systemctl reload tor@default</code> but this command is non-blocking and does not wait for the hidden service files to be created. <code>systemctl restart tor@default</code> would be blocking but also interrupt existing connections.</p>
<p>Now fixed by waiting 5 seconds (configurable). Not the cleanest solution but good enough.</p>
<aside class="quote no-group" data-post="41" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>sudo bash</p>
</blockquote>
</aside>
<p>Better <code>sudo chmod +x /usr/bin/anon-auth-autogen</code>. Then you can drop <code>bash</code> and it will use whatever interpreter which is used.</p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-08T15:25:32Z' class='post-time'>
                January 8, 2020,  3:25pm
              </time>
              <meta itemprop='dateModified' content='2020-01-08T15:25:32Z'>
          <span itemprop='position'>#43</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="42" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Does folder / file exist now?</p>
</blockquote>
</aside>
<p>No</p>
<blockquote>
<p>user@host:~$ sudo chmod +x /usr/bin/anon-auth-autogen<br>
user@host:~$ sudo anon-auth-autogen<br>
INFO: Created torconffile ‘/usr/local/etc/torrc.d/43_hidden_service_hs_autogen.conf’.<br>
INFO: Reloading Tor.<br>
INFO: Giving Tor 5 seconds to create hidden service file.<br>
cat: /var/lib/tor/hidden_service/hostname: No such file or directory<br>
ERROR: exit_code: 1 | BASH_COMMAND: onion_url="$(cat “$onion_url_file”)"<br>
user@host:~$ sudo ls -la /var/lib/tor/hidden_service/<br>
ls: cannot access ‘/var/lib/tor/hidden_service/’: No such file or directory<br>
user@host:~$ sudo ls -la /var/lib/tor/hidden_service/hostname<br>
ls: cannot access ‘/var/lib/tor/hidden_service/hostname’: No such file or directory</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-08T17:48:35Z' class='post-time'>
                January 8, 2020,  5:48pm
              </time>
              <meta itemprop='dateModified' content='2020-01-08T17:48:35Z'>
          <span itemprop='position'>#44</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Tor currently totally ignores that file I suppose - you can test by<br>
adding any garbage there which would normally result in Tor to fail to<br>
restart - except for that file which is fully ignored.</p>
<p>Requires using Whonix testers repository. Only that support “real”<br>
<code>torrc.d</code> support.</p>
<p>Then please look at /etc/tor/torrc and all files that follow. (follow<br>
whatever <code>%include</code>) See if all of that makes sense. Compare with git<br>
master.</p>
<p>Otherwise Tor will just ignore any other files in torrc.d.</p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-11T15:20:46Z' class='post-time'>
                January 11, 2020,  3:20pm
              </time>
              <meta itemprop='dateModified' content='2020-01-11T15:20:46Z'>
          <span itemprop='position'>#45</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="44" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Requires using Whonix testers repository. Only that support “real”<br>
<code>torrc.d</code> support.</p>
</blockquote>
</aside>
<p>What package do you mean? Tor or autogen? The later still doesn’t how in Testers</p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-11T16:30:36Z' class='post-time'>
                January 11, 2020,  4:30pm
              </time>
              <meta itemprop='dateModified' content='2020-01-11T16:30:36Z'>
          <span itemprop='position'>#46</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>HulaHoop via Whonix Forum:</p>
<blockquote>
<aside class="quote no-group" data-post="44" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Requires using Whonix testers repository. Only that support “real”<br>
<code>torrc.d</code> support.</p>
</blockquote>
</aside>
<p>What package do you mean?</p>
</blockquote>
<p><code>anon-gw-anonymizer-config</code> changes Tor config files to include all of<br>
<code>/usr/local/etc/torrc.d/</code>.</p>
<pre><code>%include /usr/local/etc/torrc.d/
</code></pre>
<p>As per:</p>
<aside class="quote quote-modified" data-post="73" data-topic="4041">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="../../torrc-d-is-comming/4041/73.html">torrc.d is comming</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    This was implemented in testers repository. In essence: 
/etc/tor/torrc : 
%include /etc/torrc.d/

/etc/torrc.d/95_whonix.conf  : 
%include /usr/local/etc/torrc.d/

/usr/local/etc/torrc.d/ folder: 

40_tor_control_panel.conf  50_user.conf 



<a href="../../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/share/tor/tor-service-defaults-torrc.anondist">https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/share/tor/tor-service-defaults-torrc.anondist</a>
<a href="../../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/etc/tor/torrc.anondist">https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/etc/tor/torrc.anondist</a>
<a href="../../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/etc/torrc.d/95_whonix.conf">https://github.com/Whonix/anon-gw-anonymizer-config/blob…</a>
  </blockquote>
</aside>

<p>Please check if these files look OK:</p>
<ul>
<li><code>/etc/tor/torrc</code></li>
<li><code>/etc/torrc.d/95_whonix.conf</code></li>
</ul>
<blockquote>
<p>Tor or autogen? The later still doesn’t how in Testers</p>
</blockquote>
<p>Expected.</p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-12T14:36:49Z' class='post-time'>
                January 12, 2020,  2:36pm
              </time>
              <meta itemprop='dateModified' content='2020-01-12T14:36:49Z'>
          <span itemprop='position'>#47</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>OK good progress made:</p>
<blockquote>
<p>user@host:~$ sudo anon-auth-autogen<br>
INFO: Created torconffile ‘/usr/local/etc/torrc.d/43_hidden_service_hs_autogen.conf’.<br>
INFO: Reloading Tor.<br>
INFO: Giving Tor 5 seconds to create hidden service file.<br>
INFO: Copied client_authorization_full_path ‘/var/lib/tor_autogen/hidden_service/1.auth’ to ‘/var/lib/tor_autogen/hidden_service/1.auth’.<br>
INFO: You probably want to provide client ‘1’ with auth_private_file ‘/var/lib/tor_autogen/hidden_service/1.auth_private’ for hsname ‘hidden_service’ onion_url ‘verylongv3address.onion’.</p>
</blockquote>
<p>Is there anything else I need to do or is the process complete? Perhaps the script should display a clearer message about what folder one needs to backup?</p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-12T15:54:07Z' class='post-time'>
                January 12, 2020,  3:54pm
              </time>
              <meta itemprop='dateModified' content='2020-01-12T15:54:07Z'>
          <span itemprop='position'>#48</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Once that is done, also a onion service generator for non-authenticated onion services could be considered if that looks worthwhile. Easy to provide a “reduced feature” “fork” of that script.</p>
<aside class="quote no-group" data-post="47" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Is there anything else I need to do or is the process complete?</p>
</blockquote>
</aside>
<p>Testing required.</p>
<p>Can you copy file <code>/var/lib/tor_autogen/hidden_service/1.auth_private</code> to another VM and use it as per <a href="../../../../external.html?link=https://www.whonix.org/wiki/Onion_Services#Onion_Service_Authentication_Client_Setup">Onion Service Authentication Client Setup</a> to actually connect to the onion service? Maybe this needs scripting as well?</p>
<p>This might require previous exercising with un-authenticated Onion Services.</p>
<aside class="quote no-group" data-post="47" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Perhaps the script should display a clearer message about what folder one needs to backup?</p>
</blockquote>
</aside>
<p>Makes sense. Could you draft please the ideal output of the script (everything, not just backup)?</p>
<p>Maybe some messages such as <code>INFO: Reloading Tor.</code> are superfluous?</p>
<p>Output <code>INFO: Created torconffile ‘/usr/local/etc/torrc.d/43_hidden_service_hs_autogen.conf’.</code> probably makes sense in principle? Users should understand a bit what actually happened? Avoiding “black boxes”. Self-documentation as a goal. But perhaps the output could be better formatted?</p>
<p>Output <code> INFO: Copied client_authorization_full_path ‘/var/lib/tor_autogen/hidden_service/1.auth’ to ‘/var/lib/tor_autogen/hidden_service/1.auth’.</code> might be too verbose? I like to let my scripts explain what they’re doing.</p>
<p>Also worth considering: commands users can copy/paste for backup.</p>
<p>What files to backup is a good question. Which ones?</p>
<p>I guess with a backup of both folders:</p>
<ul>
<li>
<code>/var/lib/tor_autogen</code> and</li>
<li><code>/var/lib/tor</code></li>
</ul>
<p>nothing can be forgotten. But that includes Tor state files (Tor consensus and Tor entry guards).</p>
<p>Or better only backup these two folders</p>
<ul>
<li>
<code>/var/lib/tor_autogen/hidden_service</code> and</li>
<li><code>/var/lib/tor/hidden_service</code></li>
</ul>
<p>?</p>
<p>(Note: <code>hidden_service</code> is a variable. It could be <code>mumble_service</code> or anything else. Useful for multiple Tor onion services. Can be set through variable <code>hsname</code>.)</p>
<p>Otherwise a “more selective” backup might makes copies of these three files:</p>
<ul>
<li><code>/var/lib/tor/hidden_service/hs_ed25519_secret_key</code></li>
<li><code>/var/lib/tor_autogen/hidden_service/1.auth_private</code></li>
<li><code>/var/lib/tor_autogen/hidden_service/1.auth</code></li>
</ul>
<p>Other files generated in the process do not need backup?</p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-12T20:25:01Z' class='post-time'>
                January 12, 2020,  8:25pm
              </time>
              <meta itemprop='dateModified' content='2020-01-12T20:25:01Z'>
          <span itemprop='position'>#49</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="48" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Can you copy file <code>/var/lib/tor_autogen/hidden_service/1.auth_private</code> to another VM and use it as per <a href="../../../../external.html?link=https://www.whonix.org/wiki/Onion_Services#Onion_Service_Authentication_Client_Setup">Onion Service Authentication Client Setup</a> to actually connect to the onion service? Maybe this needs scripting as well?</p>
</blockquote>
</aside>
<p>I think I’d run into the same permissions nightmare I saw above. Its worthwhile to script this too in the same program.</p>
<aside class="quote no-group" data-post="48" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Makes sense. Could you draft please the ideal output of the script (everything, not just backup)?</p>
</blockquote>
</aside>
<p>OK</p>
<aside class="quote no-group" data-post="48" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Maybe some messages such as <code>INFO: Reloading Tor.</code> are superfluous?</p>
</blockquote>
</aside>
<p>I find it useful because otherwise I would think the script stalled or something wrong.</p>
<aside class="quote no-group" data-post="48" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Output <code>INFO: Created torconffile ‘/usr/local/etc/torrc.d/43_hidden_service_hs_autogen.conf’.</code> probably makes sense in principle? Users should understand a bit what actually happened?</p>
</blockquote>
</aside>
<p>I agree. Those who have no idea probably don’t care about the messages and just want to see an “operation completed successfully”. Powerusers want to get an idea of what is going on in case they need to debug. IMO split the message output  into a verbose and quiet mode if easily done.</p>
<aside class="quote no-group" data-post="48" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>What files to backup is a good question. Which ones?</p>
</blockquote>
</aside>
<p>I’d limit the scope to HS folders only with contents under them. I imagine users would be surprised if their current guard was changed when restoring an older backup of their service. Selective backup might be nice, but I see it as a niche usecase and not worth the trouble.</p>
<aside class="quote no-group" data-post="48" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Other files generated in the process do not need backup?</p>
</blockquote>
</aside>
<p>Nothing comes to mind.</p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-12T20:48:01Z' class='post-time'>
                January 12, 2020,  8:48pm
              </time>
              <meta itemprop='dateModified' content='2020-01-12T20:48:01Z'>
          <span itemprop='position'>#50</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Suggested backup/restore messages:</p>
<p><em>Your Onion Service conf and keys will be backed up to /home/user. Please transfer to a storage device outside the VM.</em></p>
<p><em>Your Onion Services are now restored</em></p>
<hr>
<p>Suggestion:</p>
<p>Reload Tor to so Tor will load client_authorization_full_path. -&gt;</p>
<blockquote>
<p><strong>Reloading Tor will apply client_authorization_full_path.</strong></p>
</blockquote>
<hr>
<p>Is this message suggesting auth cookie use? Or is it an error message guessing why a failure happened? Let’s make it a concrete statement to guide users on what exactly is wrong.</p>
<blockquote>
<p>INFO: You probably want to provide client ‘$client’ with auth_private_file ‘$auth_private_file’ for hsname ‘$hsname’ onion_url ‘$onion_url’."</p>
</blockquote>
<p>The rest looks good.</p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-13T10:26:50Z' class='post-time'>
                January 13, 2020, 10:26am
              </time>
              <meta itemprop='dateModified' content='2020-01-13T10:26:50Z'>
          <span itemprop='position'>#51</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="49" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>I think I’d run into the same permissions nightmare I saw above. Its worthwhile to script this too in the same program.</p>
</blockquote>
</aside>
<p>We need to master linux file permissions.</p>
<ul>
<li>Step 1) A tool to record all file permissions. Paste them into a file for backup / later comparison.</li>
<li>Step 2) Do some modifications.</li>
<li>Step 3) Repeat step 1 but store output of permissions diagnosis tool in a different file.</li>
<li>Step 4) Compare the the two outputs of the permissions diagnosis tool using <code>meld</code>, <code>kdiff3</code> or similar.</li>
</ul>
<p>What do we use as permissions diagnosis tool?</p>
<pre><code>sudo find /var/lib/tor | sudo xargs stat -cstat -c "
access rights octal: '%a'
access rights human: '%A'
file type: '%F'
user name of owner: '%U'
group name of owner: '%G'
number of hard links: '%h'
quoted file name with dereference if symbolic link: '%N'"
</code></pre>
<p>Or perhaps simpler…</p>
<pre><code>sudo find /var/lib/tor | sudo xargs stat -cstat -c "%a %A %F %U %G %h %N"
</code></pre>
<p>More readable output?</p>
<p>Redirect output to file one.txt.</p>
<pre><code>sudo find /var/lib/tor | sudo xargs stat -cstat -c "%a %A %F %U %G %h %N" &gt; one.txt
</code></pre>
<p>Redirect output to file two.txt.</p>
<pre><code>sudo find /var/lib/tor | sudo xargs stat -cstat -c "%a %A %F %U %G %h %N" &gt; two.txt
</code></pre>
<p>Compare.</p>
<pre><code>meld one.txt two.txt
</code></pre>
<p>Dunno if I am missing something here. <code>stat</code> supports a lot things to output. Quote <a href="../../../../external.html?link=https://manpages.debian.org/stat">https://manpages.debian.org/stat</a></p>
<blockquote>
<p>The valid format sequences for files (without --file-system):</p>
<p>%a<br>
access rights in octal (note ‘#’ and ‘0’ printf flags)<br>
%A<br>
access rights in human readable form<br>
%b<br>
number of blocks allocated (see %B)<br>
…</p>
</blockquote>
<p>Once we know the right permissions / manual commands, I can try to script that.</p>
<aside class="quote no-group" data-post="49" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>I’d limit the scope to HS folders only with contents under them. I imagine users would be surprised if their current guard was changed when restoring an older backup of their service. Selective backup might be nice, but I see it as a niche usecase and not worth the trouble.</p>
</blockquote>
</aside>
<p>Makes sense.</p>
<aside class="quote no-group" data-post="49" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>IMO split the message output into a verbose and quiet mode if easily done.</p>
</blockquote>
</aside>
<p>For “super debug”, just run</p>
<pre><code>sudo bash -x anon-auth-autogen
</code></pre>
<aside class="quote no-group" data-post="49" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>I’d limit the scope to HS folders only with contents under them. I imagine users would be surprised if their current guard was changed when restoring an older backup of their service. Selective backup might be nice, but I see it as a niche usecase and not worth the trouble.</p>
</blockquote>
</aside>
<p>Indeed.</p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-13T10:49:33Z' class='post-time'>
                January 13, 2020, 10:49am
              </time>
              <meta itemprop='dateModified' content='2020-01-13T10:49:33Z'>
          <span itemprop='position'>#52</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="50" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Let’s make it a concrete statement to guide users on what exactly is wrong.</p>
</blockquote>
</aside>
<p>Info. Not error. Messages starting with <code>INFO:</code> aren’t errors. Errors should always start with <code>ERROR:</code> unless I mess that up in the source code but I didn’t manage to mess that up yet.</p>
<aside class="quote no-group quote-modified" data-post="50" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<blockquote>
<p><strong>Reloading Tor will apply client_authorization_full_path.</strong></p>
</blockquote>
<p>Is this message suggesting auth cookie use?</p>
</blockquote>
</aside>
<p>I don’t remember this exact message.<br>
This is confusing indeed. Both <a href="../../../../external.html?link=https://2019.www.torproject.org/docs/tor-manual.html.en">https://2019.www.torproject.org/docs/tor-manual.html.en</a> and don’t use good names for these files.</p>
<p>Tor calls them</p>
<ul>
<li><code>".auth_private" file</code></li>
<li><code>".auth" file</code></li>
</ul>
<p>My interpretation:</p>
<ul>
<li>
<code>".auth_private" file</code>: private key - to be installed on client</li>
<li>
<code>".auth" file</code>: public key - to be installed on onion service</li>
</ul>
<p>I’d preferred if  <code>.auth</code> was <code>.auth_public</code> but it’s not possible as per Tor manual. These file suffixes are hardcoded in Tor. Since I cannot simplify upstream names, I will use the same names in the script output to not invent new terminology to add further confusion.</p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-13T10:51:47Z' class='post-time'>
                January 13, 2020, 10:51am
              </time>
              <meta itemprop='dateModified' content='2020-01-13T10:51:47Z'>
          <span itemprop='position'>#53</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Could you please English language interpret chapter <code>Client Authorization</code> from <a href="../../../../external.html?link=https://2019.www.torproject.org/docs/tor-manual.html.en">https://2019.www.torproject.org/docs/tor-manual.html.en</a> for me? This sentence:</p>
<blockquote>
<p>Revoking a client can be done by removing their “.auth” file, however the revocation will be in effect only after the tor process gets restarted even if a SIGHUP takes place.</p>
</blockquote>
<p>What means <code>even if a SIGHUP takes place.</code>?</p>
<p>Restart or reload required?<br>
Reload (SIGHUP) not sufficient?</p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-13T11:12:30Z' class='post-time'>
                January 13, 2020, 11:12am
              </time>
              <meta itemprop='dateModified' content='2020-01-13T11:12:30Z'>
          <span itemprop='position'>#54</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Yay. Things get more complicated. Quote <a href="../../../../external.html?link=https://gitweb.torproject.org/torspec.git/tree/rend-spec-v3.txt">https://gitweb.torproject.org/torspec.git/tree/rend-spec-v3.txt</a></p>
<blockquote>
<p>The keypair used for client authorization is created by a third party tool for which the public key needs to be transferred to the service operatorin a secure out-of-band way. The third party tool SHOULD add appropriate headers to the private key file to ensure that users won’t accidentally give out their private key.</p>
</blockquote>
<p>Our current process is the server to set up the onion service and client authorization key files.</p>
<p>Tor Project’s idea seems to be vice versa. That clients should create their own <code>".auth_private" file</code> (private key) and <code>".auth" file</code> (public key). Retain their private key, install their private key in Tor’s data directory and then and send their public key to the onion service operator.</p>
<p>Tor Project way: That would have the advantage that 1 client could re-use their private key for multiple services. But is harder for clients.</p>
<p>Whonix way: onion service operators could impersonate clients but does that matter?</p>
<p>I guess arguments could be made for both use cases. Server created authorization files vs client created authorization files.</p>
<p>But not sure we want to follow or ignore this.</p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-13T12:05:43Z' class='post-time'>
                January 13, 2020, 12:05pm
              </time>
              <meta itemprop='dateModified' content='2020-01-13T12:25:02Z'>
          <span itemprop='position'>#55</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>new output:</p>
<pre><code>sudo anon-auth-autogen
</code></pre>
<blockquote>
<p>INFO: Created torconffile ‘/usr/local/etc/torrc.d/43_hidden_service_hs_autogen.conf’.<br>
INFO: Reloading Tor.<br>
INFO: Giving Tor 5 seconds to create hidden service file.<br>
INFO: Installed “.auth” file (public key) ‘/var/lib/tor_autogen/hidden_service/1.auth’ to ‘/var/lib/tor_autogen/hidden_service/1.auth’ to allow client ‘1’ to access hsname ‘hidden_service’ onion_url ‘gky7wbnxkl57vn6bmdoeck4pqsppa3bmjq6i7kkqw3pttkflg7uymjad.onion’.<br>
INFO: Reloading Tor again to activate “.auth” (public key) file for client ‘1’.<br>
INFO: You need to provide client ‘1’ with “.auth_private” file (private key) ‘/var/lib/tor_autogen/hidden_service/1.auth_private’.<br>
INFO: Visitors that use Whonix could store ‘/var/lib/tor_autogen/hidden_service/1.auth_private’ in ‘/home/user/1.auth_private’ and then run ‘sudo sourcefile=/home/user/1.auth_private anon-server-to-client-install’.</p>
</blockquote>
<ul>
<li><a href="../../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-auth-autogen.8.ronn">anon-auth-autogen man page</a></li>
<li><a href="../../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/bin/anon-auth-autogen">anon-auth-autogen</a></li>
</ul>
<hr>
<p><code>anon-server-to-client-install Tor Authenticated Onion Service ".auth_private" file (private key) Server to Client Installer</code> was also creaetd.</p>
<pre><code>sudo anon-server-to-client-install
</code></pre>
<blockquote>
<p>INFO: Installed “.auth_private” file (private key) ‘/home/user/1.auth_private’ to ‘/var/lib/tor/authdir/1.auth_private’.<br>
INFO: Created torconffile ‘/usr/local/etc/torrc.d/43_clientonionauthdir.conf’.<br>
INFO: Reloading Tor to activate “.auth_private” file (private key).<br>
INFO: Success.</p>
</blockquote>
<ul>
<li><a href="../../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-server-to-client-install.8.ronn">anon-server-to-client-install man page</a></li>
<li><a href="../../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/bin/anon-server-to-client-install">anon-server-to-client-install</a></li>
</ul>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-13T12:20:48Z' class='post-time'>
                January 13, 2020, 12:20pm
              </time>
              <meta itemprop='dateModified' content='2020-01-13T12:20:48Z'>
          <span itemprop='position'>#56</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Not sure about the backup feature yet.</p>
<p><code>anon-auth-autogen</code> is not yet idempotent.</p>
<p>Re-running <code>anon-auth-autogen</code> results in files</p>
<ul>
<li>/var/lib/tor/hidden_service/authorized_clients/1.auth</li>
<li>/var/lib/tor_autogen/hidden_service/1.auth_private</li>
</ul>
<p>being overwritten, re-generated. What should be done if either file already exists? I guess not overwrite, notify user and error out?</p>
<ul>
<li><code>Tor Onion Service Backup Tool</code></li>
<li><code>Tor Authenticated Onion Service Backup Tool</code></li>
<li>Backup tool part of <code>anon-auth-autogen</code> and/or <code>anon-server-to-client-install</code>?</li>
<li>Standalone tool?</li>
<li>Restoration tool too?</li>
</ul>
<p>Features? Copy from <code>/var/lib/tor/hidden_service</code> to home folder? What if files in <code>/var/lib/tor/hidden_service</code> differ from contents in <code>/home/user/onion-service-backup/hidden_service</code>? Overwrite? Probably not. Error out?</p>
<p>What’s the main feature of this? Copying some things from <code>/var/lib/tor</code> to <code>/home/user</code>? And then users are supposed to copy yet again to somewhere else? Why they wouldn’t copy straight from <code>/var/lib/tor</code>?</p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-07-23T11:28:45Z' class='post-time'>
                July 23, 2020, 11:28am
              </time>
              <meta itemprop='dateModified' content='2020-07-23T11:28:45Z'>
          <span itemprop='position'>#57</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Can <code>ClientOnionAuthDir</code> be set multiple times to different folders?</p>
<hr>
<p><a href="../../../../external.html?link=https://phabricator.whonix.org/T996" class="onebox" target="_blank">https://phabricator.whonix.org/T996</a></p>
<blockquote>
<p>A release candidate for next Tuesday’s stable Tor Browser 9.5 has been <a href="../../../../external.html?link=https://lists.torproject.org/pipermail/tor-qa/2020-May/000977.html">announced on tor-qa</a>. Some excerpts from the changelog:</p>
<ul>
<li>
<a href="../../../../external.html?link=https://trac.torproject.org/projects/tor/ticket/30237">Bug 30237</a>: Control port module improvements for v3 client authentication</li>
</ul>
<p>(Might be impossible to make this work with onion-grater while still isolating VMs)</p>
<p><a href="../../../../external.html?link=https://blog.torproject.org/new-release-tor-browser-95">https://blog.torproject.org/new-release-tor-browser-95</a></p>
</blockquote>
<p><a href="../../../../external.html?link=https://lists.torproject.org/pipermail/tor-dev/2020-June/014353.html" class="onebox" target="_blank">https://lists.torproject.org/pipermail/tor-dev/2020-June/014353.html</a></p>
<pre><code>    553 Unable to store creds for

Did you set ClientOnionAuthDir in torrc (to a directory with "private
enough" permissions)?

Rusty
</code></pre>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/commit/47cf0e376ab4af6a2b9f2165b6e449c2176a3afd" target="_blank">github.com/Whonix/anon-gw-anonymizer-config</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/commit/47cf0e376ab4af6a2b9f2165b6e449c2176a3afd" target="_blank">ClientOnionAuthDir /var/lib/tor/authdir</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2020-07-23" data-time="11:23:22" data-timezone="UTC">11:23AM - 23 Jul 20 UTC</span>
      </div>

      <div class="user">
        <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 3 files with 23 additions and 0 deletions">
        <a href="../../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/commit/47cf0e376ab4af6a2b9f2165b6e449c2176a3afd" target="_blank">
          <span class="added">+23</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>

  </div>
</div>


  <div class="github-row">
    <pre class="github-content" style="white-space: normal;">https://forums.whonix.org/t/onion-services-authentication/975</pre>
  </div>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-07-30T13:15:35Z' class='post-time'>
                July 30, 2020,  1:15pm
              </time>
              <meta itemprop='dateModified' content='2020-07-30T13:15:35Z'>
          <span itemprop='position'>#58</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="56" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>being overwritten, re-generated. What should be done if either file already exists? I guess not overwrite, notify user and error out?</p>
</blockquote>
</aside>
<p>Perhaps auto rename it to something else/random?</p>
<aside class="quote no-group" data-username="Patrick" data-post="56" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Backup tool part of <code>anon-auth-autogen</code> and/or <code>anon-server-to-client-install</code> ?</p>
</blockquote>
</aside>
<p><code>anon-server-to-client-install</code> makes sense.</p>
<aside class="quote no-group" data-username="Patrick" data-post="56" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Standalone tool?</p>
</blockquote>
</aside>
<p>unnecessary IMO</p>
<aside class="quote no-group" data-username="Patrick" data-post="56" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Restoration tool too?</p>
</blockquote>
</aside>
<p>Yes</p>
<aside class="quote no-group" data-username="Patrick" data-post="56" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Features? Copy from <code>/var/lib/tor/hidden_service</code> to home folder? What if files in <code>/var/lib/tor/hidden_service</code> differ from contents in <code>/home/user/onion-service-backup/hidden_service</code> ? Overwrite? Probably not. Error out?</p>
</blockquote>
</aside>
<p>Perhaps copy to the shared folder straight away? There has to be a sanity check to detect if it is mounted first. I feel like most functionality you are implementing would quickly lead to re-inventing the wheel in many ways that dedicated sync programs  are designed to deal with these problems. Perhaps delegating this to something with a gui like Unison is a good idea. Or even including Unison with preconfigured origin and clone dirs preset would be easier .</p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-07-30T13:33:33Z' class='post-time'>
                July 30, 2020,  1:33pm
              </time>
              <meta itemprop='dateModified' content='2020-07-30T13:33:33Z'>
          <span itemprop='position'>#59</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="57" data-topic="975">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Can <code>ClientOnionAuthDir</code> be set multiple times to different folders?</p>
</blockquote>
</aside>
<p>Does not seem like it:</p>
<p><a href="../../../../external.html?link=https://community.torproject.org/onion-services/advanced/client-auth/" class="onebox" target="_blank">https://community.torproject.org/onion-services/advanced/client-auth/</a></p>
<p>While it supports multiple auth files, there is no mention of Tor accepting mutliple dir paths for it.</p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../975.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-01-02T11:51:44Z' class='post-time'>
                January 2, 2022, 11:51am
              </time>
              <meta itemprop='dateModified' content='2022-01-02T11:51:44Z'>
          <span itemprop='position'>#60</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Tor Browser Onion Client Authorization in Whonix works for me. Just now documented:<br>
<a href="../../../../external.html?link=https://www.whonix.org/wiki/Tor_Browser#Onion_Client_Authorization">Onion Client Authorization</a></p>
        </div>

        <meta itemprop='headline' content='Onion Services Authentication'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../long-wiki-edits-thread/3477/2190.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../long-wiki-edits-thread/3477/2190.html'>
                      <span itemprop='name'>Long Wiki Edits Thread</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../authenticated-onion-service-not-working-using-old-or-new-methods/13110/5.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../authenticated-onion-service-not-working-using-old-or-new-methods/13110/5.html'>
                      <span itemprop='name'>authenticated onion service not working using old or new methods</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
            </div>
      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="../9754658.html?page=2">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../975fdb0.html?page=4">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
