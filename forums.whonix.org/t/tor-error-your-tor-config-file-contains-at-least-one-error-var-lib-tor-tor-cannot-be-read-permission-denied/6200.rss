<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
    <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200</link>
    <description>Hello,

I&#39;ve just made a new TCP proxyVM using this guide &#39;&#39;https://www.qubes-os.org/doc/vpn/&#39;&#39;. I&#39;m on Qubes 3.2 with whonix 14.

This is the terminal &#39;&#39;whonixcheck&#39;&#39; results:
&gt;
user@host:~$ whonixcheck
[INFO] [whonixcheck] sys-whonix | Whonix-Gateway | whonix-gw-14 TemplateBased ProxyVM | Wed Oct 24 16:59:36 UTC 2018
[ERROR] [whonixcheck] Tor Config Check Result:
Your Tor config file contains at least one error.

(Tor exit code: 1)

Tor concise reports (below warns and errors must be fixed before you can use Tor):
Oct 24 16:59:38.898 [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied
Oct 24 16:59:38.898 [warn] Failed to parse/validate config: Couldn&#39;t access private data directory &quot;/var/lib/tor/.tor&quot;
Oct 24 16:59:38.898 [err] Reading config failed--see warnings above.

Tor full reports:
Oct 24 16:59:38.895 [notice] Tor 0.3.4.8 (git-5da0e95e4871a0a1) running on Linux with Libevent 2.0.21-stable, OpenSSL 1.1.0f, Zlib 1.2.8, Liblzma 5.2.2, and Libzstd 1.1.2.
Oct 24 16:59:38.895 [notice] Tor can&#39;t help you if you use it wrong! Learn how to be safe at https://www.torproject.org/download/download#warning
Oct 24 16:59:38.895 [notice] Read configuration file &quot;/etc/tor/torrc&quot;.
Oct 24 16:59:38.898 [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied
Oct 24 16:59:38.898 [warn] Failed to parse/validate config: Couldn&#39;t access private data directory &quot;/var/lib/tor/.tor&quot;
Oct 24 16:59:38.898 [err] Reading config failed--see warnings above.

Try to look at this report yourself by running.

dom0 -&gt; Start Menu -&gt; ServiceVM: sys-whonix -&gt; Terminal                                                                                                                                         
                                                                                                                                                                                                
sudo -u debian-tor tor --verify-config                                                                                                                                                          
                                                                                                                                                                                                
To try to fix this, please open your Tor config file.                                                                                                                                           
                                                                                                                                                                                                
    dom0 -&gt; Start Menu -&gt; ServiceVM: sys-whonix -&gt; Torrc                                                                                                                                        
    or in Terminal: sudo nano /usr/local/etc/torrc.d/50_user.conf

Please restart Tor after fixing this error.

    dom0 -&gt; Start Menu -&gt; ServiceVM: sys-whonix -&gt; Restart Tor
    or in Terminal: sudo service tor@default restart

Restart whonixcheck after fixing this error.

    dom0 -&gt; Start Menu -&gt; ServiceVM: sys-whonix -&gt; Whonix Check
    or in Terminal: whonixcheck

If you know what you are doing, feel free to disable this check.
Create a file /etc/whonix.d/50_whonixcheck_user.conf and add:
whonixcheck_skip_functions+=&quot; check_tor_config &quot;

&gt;</description>
    <language>en</language>
    <lastBuildDate>Wed, 07 Nov 2018 10:36:47 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Unlikely but best to keep group name configurable (if easy to do) in case a need arises.</p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/21</link>
        <pubDate>Wed, 07 Nov 2018 10:36:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-21</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/whonix-legacy/commit/68741a067c0f4d34bc93149fa8e59b4c222bda51" target="_blank">github.com/Whonix/whonix-legacy</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/whonix-legacy/commit/68741a067c0f4d34bc93149fa8e59b4c222bda51" target="_blank">automate Tor permission fix</a>
</h4>


<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank">adrelanos</a>
  on <a href="https://github.com/Whonix/whonix-legacy/commit/68741a067c0f4d34bc93149fa8e59b4c222bda51" target="_blank">04:01AM - 07 Nov 18 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>13 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>^ I hope this won’t be causing issues in future such as when user/group changes from <code>debian-tor</code> to something else (very unlikely?) or when advanced users change user/group ownership for some reason (very unlikely?). //cc <a class="mention" href="http://forums.whonix.org/u/hulahoop">@HulaHoop</a></p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/20</link>
        <pubDate>Wed, 07 Nov 2018 04:03:10 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-20</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[zerop]]></dc:creator>
        <description><![CDATA[
            <p>All my previous issues are now solved!</p>
<p>I wanna thank you both Brand and Patrick. You’re doing an amazing work and I really do appreciate all time you’ve spent helping me out.</p>
<p>I do still have an issue and I hope you can continue assisting me; I’ll make a new thread about it.</p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/19</link>
        <pubDate>Mon, 05 Nov 2018 11:03:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-19</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[zerop]]></dc:creator>
        <description><![CDATA[
            <p>My issue might have been solved with a sudo service tor@default restart.</p>
<p>It told me I had a connection with tor, running a restart and then whonixcheck. I am updating my whonix gw-14 and will check if it’s working!</p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/18</link>
        <pubDate>Mon, 05 Nov 2018 10:25:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-18</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[zerop]]></dc:creator>
        <description><![CDATA[
            <p>Hi Patrick,</p>
<p>I try to run all three commands. But my logs are completly empty; when trying to run ‘‘sudo tail -f /var/run/tor/log’’ I get:</p>
<blockquote>
<p>tail: cannot open ‘/var/run/tor/log’ for reading: No such file or directory<br>
tail: no files remaining</p>
</blockquote>
<p>The first two commands just gives me empty logs.</p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/17</link>
        <pubDate>Sun, 04 Nov 2018 18:39:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-17</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Could you please check Tor’s log as per <a href="https://www.whonix.org/wiki/Tor#Log_Analysis">https://www.whonix.org/wiki/Tor#Log_Analysis</a>?</p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/16</link>
        <pubDate>Sun, 04 Nov 2018 12:39:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-16</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[zerop]]></dc:creator>
        <description><![CDATA[
            <p>Hi brand,</p>
<p>No error running the anon-verify command:</p>
<pre><code>user@host:~$ anon-verify
/===================================================================\
|                      Report Summary                               |
\===================================================================/
No error detected in your Tor configuration.
Tor verify exit code: 0
/===================================================================\
|                      Tor Full Report                              |
\===================================================================/
Nov 04 00:02:26.741 [notice] Tor 0.3.4.8 (git-5da0e95e4871a0a1) running on Linux with Libevent 2.0.21-stable, OpenSSL 1.1.0f, Zlib 1.2.8, Liblzma 5.2.2, and Libzstd 1.1.2.
Nov 04 00:02:26.741 [notice] Tor can't help you if you use it wrong! Learn how to be safe at https://www.torproject.org/download/download#warning
Nov 04 00:02:26.741 [notice] Read configuration file "/usr/share/tor/tor-service-defaults-torrc".
Nov 04 00:02:26.741 [notice] Read configuration file "/etc/tor/torrc".
Nov 04 00:02:26.745 [notice] You configured a non-loopback address '10.137.3.1:5300' for DNSPort. This allows everybody on your local network to use your machine as a proxy. Make sure this is what you wanted.
Nov 04 00:02:26.745 [notice] You configured a non-loopback address '10.137.3.1:9040' for TransPort. This allows everybody on your local network to use your machine as a proxy. Make sure this is what you wanted.
Configuration was valid
/===================================================================\
|                 Used Tor Configuration Files                      |
\===================================================================/
5 files are used as Tor configuration files: 
/usr/share/tor/tor-service-defaults-torrc /etc/tor/torrc /etc/torrc.d/95_whonix.conf /usr/local/etc/torrc.d/40_tor_control_panel.conf /usr/local/etc/torrc.d/50_user.conf
=====================================================================
</code></pre>
<p>And this is the results from ‘‘sudo ls -l /var/lib/tor’’</p>
<pre><code>user@host:~$ sudo ls -l /var/lib/tor
total 7540
-rw------- 1 debian-tor debian-tor   20442 Oct 19 13:20 cached-certs
-rw------- 1 debian-tor debian-tor 2039492 Oct 23 19:35 cached-microdesc-consensus
-rw------- 1 debian-tor debian-tor 5320714 Oct 22 20:23 cached-microdescs
-rw------- 1 debian-tor debian-tor  324899 Oct 23 19:57 cached-microdescs.new
-rw------- 1 debian-tor debian-tor       0 Oct 23 20:16 lock
-rw------- 1 debian-tor debian-tor    6815 Oct 23 20:33 state</code></pre>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/15</link>
        <pubDate>Sun, 04 Nov 2018 00:05:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-15</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>Hi <code>zerop</code></p>
<p>Can you please run these commands . Run both in <code>sys-whonix</code> konsole.</p>
<p><code>anon-verify</code> …Any errors?</p>
<p><code>sudo ls -l /var/lib/tor</code></p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/14</link>
        <pubDate>Sat, 03 Nov 2018 23:54:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-14</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[zerop]]></dc:creator>
        <description><![CDATA[
            <p>Here is my results from running a:</p>
<blockquote>
<p>sudo service tor@default status</p>
</blockquote>
<pre><code>user@host:~$ sudo service tor@default status
● tor@default.service - Anonymizing overlay network for TCP
   Loaded: loaded (/lib/systemd/system/tor@default.service; static; vendor preset: enabled)
  Drop-In: /lib/systemd/system/tor@default.service.d
           └─30_qubes.conf, 40_obfs4proxy-workaround.conf, 40_qubes.conf, 50_controlsocket-workaround.conf
        /etc/systemd/system/tor@default.service.d
           └─override.conf
   Active: failed (Result: exit-code) since Thu 2018-10-25 12:34:50 UTC; 1 weeks 2 days ago
  Process: 20315 ExecStartPre=/usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0 --verify-config (code=exited, status=1/FAILURE)
  Process: 20313 ExecStartPre=/usr/bin/install -Z -m 02755 -o debian-tor -g debian-tor -d /var/run/tor (code=exited, status=0/SUCCESS)

Oct 25 12:34:49 host systemd[1]: tor@default.service: Control process exited, code=exited status=1
Oct 25 12:34:49 host systemd[1]: Failed to start Anonymizing overlay network for TCP.
Oct 25 12:34:49 host systemd[1]: tor@default.service: Unit entered failed state.
Oct 25 12:34:49 host systemd[1]: tor@default.service: Failed with result 'exit-code'.
Oct 25 12:34:50 host systemd[1]: tor@default.service: Service hold-off time over, scheduling restart.
Oct 25 12:34:50 host systemd[1]: Stopped Anonymizing overlay network for TCP.
Oct 25 12:34:50 host systemd[1]: tor@default.service: Start request repeated too quickly.
Oct 25 12:34:50 host systemd[1]: Failed to start Anonymizing overlay network for TCP.
Oct 25 12:34:50 host systemd[1]: tor@default.service: Unit entered failed state.
Oct 25 12:34:50 host systemd[1]: tor@default.service: Failed with result 'exit-code'.</code></pre>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/13</link>
        <pubDate>Sat, 03 Nov 2018 21:32:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-13</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[zerop]]></dc:creator>
        <description><![CDATA[
            <p>Hi Patrick,</p>
<p>Sorry for late reply. I have been busy with private issues.</p>
<p>Anyways; I ran the last command and ran into this issue instead:</p>
<pre><code>user@host:~$ sudo whonixcheck
[INFO] [whonixcheck] sys-whonix | Whonix-Gateway | whonix-gw-14 TemplateBased ProxyVM | Sat Nov  3 21:26:36 UTC 2018
[ERROR] [whonixcheck] Tor Pid Check Result:
Tor not running. (tor_pid_message: Pid file /var/run/tor/tor.pid does not exist.)

You have to fix this error, before you can use Tor.

Please restart Tor after fixing this error.

   dom0 -&gt; Start Menu -&gt; ServiceVM: sys-whonix -&gt; Restart Tor
    or in Terminal: sudo service tor@default restart

Restart whonixcheck after fixing this error.

   dom0 -&gt; Start Menu -&gt; ServiceVM: sys-whonix -&gt; Whonix Check
    or in Terminal: whonixcheck
</code></pre>
<p>Still can’t connect to tor <img src="//forums.whonix.org/images/emoji/twitter/confused.png?v=6" title=":confused:" class="emoji" alt=":confused:"></p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/12</link>
        <pubDate>Sat, 03 Nov 2018 21:29:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-12</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>zerop:</p>
<blockquote>
<blockquote>
<p>sudo chown --recursive debian-tor:debian-tor /var/lib/tor</p>
</blockquote>
<p>Should I type this in my sys-whonix?</p>
</blockquote>
<p>Yes. ( <a href="https://www.whonix.org/wiki/Tor#Permissions_Fix">https://www.whonix.org/wiki/Tor#Permissions_Fix</a> )</p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/11</link>
        <pubDate>Fri, 26 Oct 2018 11:20:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-11</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[zerop]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>sudo chown --recursive debian-tor:debian-tor /var/lib/tor</p>
</blockquote>
<p>Should I type this in my sys-whonix? copied from the other thread.</p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/10</link>
        <pubDate>Fri, 26 Oct 2018 11:11:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-10</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[zerop]]></dc:creator>
        <description><![CDATA[
            <pre><code>user@host:~$ cat /usr/local/etc/torrc.d/50_user.conf
# Tor user specific configuration file
#
# Add user modifications below this line:
############################################



user@host:~$ 
</code></pre>
<blockquote></blockquote>
<p>Like you said it should be IPs and more info in the config file, but it’s completly empty <img src="//forums.whonix.org/images/emoji/twitter/frowning.png?v=6" title=":frowning:" class="emoji" alt=":frowning:"></p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/9</link>
        <pubDate>Fri, 26 Oct 2018 11:10:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-9</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>HI <code>zerop</code></p>
<p>Looks like the issue was solved?</p>
<p><a href="http://forums.whonix.org">https://forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/14</a></p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/8</link>
        <pubDate>Fri, 26 Oct 2018 10:18:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-8</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="5" data-topic="6200">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/z/7c8e57/40.png" class="avatar"> zerop:</div>
<blockquote>
<p>have not tried just using bridges, would that be testing my internet connection with sys-whonix only without VPN?</p>
</blockquote>
</aside>
<p>Yes</p>
<aside class="quote no-group" data-post="5" data-topic="6200">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/z/7c8e57/40.png" class="avatar"> zerop:</div>
<blockquote>
<p>The reason I use VPN and bridges is because I want the bridge to hide the fact that I am using tor.</p>
</blockquote>
</aside>
<p>There is no reason to use both bridges and VPN. Arbitrarily increasing tunnel length by increasing the number of hops i.e adding more Tor relays, VPN tunnels. proxyies - will not strengthen anonymity <strong>or</strong> make it more difficult for your ISP to see that you are using Tor. One method used to do this is Deep Packet Inspection <a href="https://en.wikipedia.org/wiki/Deep_packet_inspection">DPI</a>. If your goal is to hid that fact you are using Tor go with bridges.</p>
<p>Could you please post your torrc. Make sure to redact your bridge IPs and any sensitive information. Its possible there could be 2 issues here. It could be mistake in your torrc and  “<em>Directory /var/lib/tor/.tor cannot be read: Permission denied</em>” issue</p>
<p>In <code>sys-whonix</code> konsole, run.</p>
<p><code>cat /usr/local/etc/torrc.d/50_user.conf</code></p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/7</link>
        <pubDate>Fri, 26 Oct 2018 10:06:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-7</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[zerop]]></dc:creator>
        <description><![CDATA[
            <p>Yes, I did upgrade my whonix from 13 to 14. I’m going to follow up the ‘‘<a href="https://www.whonix.org/wiki/Tor#Permissions_Fix" rel="nofollow noopener">https://www.whonix.org/wiki/Tor#Permissions_Fix</a>’’ guide and see if it solves my issue.</p>
<p>Edit: I tried following the guide, but I ran into an error very early. Here is my terminal:</p>
<pre><code class="lang-auto">user@host:~$ sudo chown --recursive debian-tor:debian-tor /var/run/tor
user@host:~$ sudo service tor@default restart
Job for tor@default.service failed because the control process exited with error code.
See "systemctl status tor@default.service" and "journalctl -xe" for details.
user@host:~$ anon-verify
/===================================================================\
|                      Report Summary                               |
\===================================================================/
Your Tor config files contain at least one error.
Tor verify exit code: 1
/===================================================================\
|                    Tor Concise Report                             |
\===================================================================/
Below warns and errors must be fixed before you can use Tor:
Oct 25 12:35:07.460 [warn] Directory /var/lib/tor cannot be read: Permission denied
Oct 25 12:35:07.460 [warn] Failed to parse/validate config: Couldn't access private data directory "/var/lib/tor"
Oct 25 12:35:07.460 [err] Reading config failed--see warnings above.
/===================================================================\
|                      Tor Full Report                              |
\===================================================================/
Oct 25 12:35:07.455 [notice] Tor 0.3.4.8 (git-5da0e95e4871a0a1) running on Linux with Libevent 2.0.21-stable, OpenSSL 1.1.0f, Zlib 1.2.8, Liblzma 5.2.2, and Libzstd 1.1.2.
Oct 25 12:35:07.455 [notice] Tor can't help you if you use it wrong! Learn how to be safe at https://www.torproject.org/download/download#warning
Oct 25 12:35:07.455 [notice] Read configuration file "/usr/share/tor/tor-service-defaults-torrc".                                                                                               
Oct 25 12:35:07.455 [notice] Read configuration file "/etc/tor/torrc".                                                                                                                          
Oct 25 12:35:07.459 [notice] You configured a non-loopback address 'X' for DNSPort. This allows everybody on your local network to use your machine as a proxy. Make sure this is what you wanted.                                                                                                                                                                                
Oct 25 12:35:07.459 [notice] You configured a non-loopback address 'X' for TransPort. This allows everybody on your local network to use your machine as a proxy. Make sure this is what you wanted.                                                                                                                                                                              
Oct 25 12:35:07.460 [warn] Directory /var/lib/tor cannot be read: Permission denied                                                                                                             
Oct 25 12:35:07.460 [warn] Failed to parse/validate config: Couldn't access private data directory "/var/lib/tor"
Oct 25 12:35:07.460 [err] Reading config failed--see warnings above.
/===================================================================\
|                 Used Tor Configuration Files                      |
\===================================================================/
5 files are used as Tor configuration files: 
/usr/share/tor/tor-service-defaults-torrc /etc/tor/torrc /etc/torrc.d/95_whonix.conf /usr/local/etc/torrc.d/40_tor_control_panel.conf /usr/local/etc/torrc.d/50_user.conf
=====================================================================
</code></pre>
<p>It all seems to get down to that I have an error in one of my Tor config files. Can I reset them to solve this issue, or should I maybe try to open all config files with nano and paste the content in here?</p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/6</link>
        <pubDate>Thu, 25 Oct 2018 12:29:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-6</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[zerop]]></dc:creator>
        <description><![CDATA[
            <p>Hi 0brand,</p>
<ol>
<li>
<p>I have done some changes to my bridge before, I used this guide: <a href="http://www.whonix.org/wiki/bridges" rel="nofollow noopener">www.whonix.org/wiki/bridges</a><br>
Also I have added a command line into my torrc once and later removed it. I don’t remember what exacly I had typed, but it was something like ‘‘Network 0’’. I later removed the command from my torrc file.</p>
</li>
<li>
<p>Connecting only using a VPN have been working since I made a new proxy VM with TCP. It has been working without any problems since yesterday. Sys-net -&gt;  sys-firewall -&gt; VPN -&gt; AppVM. Whonix has not been working so it’s not in the equation.</p>
</li>
<li>
<p>I have not tried just using bridges, would that be testing my internet connection with sys-whonix only without VPN? I made a new appVM connected to sys-whonix that is connected to my firewall. I had no internet access during this testing.</p>
</li>
</ol>
<p>The reason I use VPN and bridges is because I want the bridge to hide the fact that I am using tor.</p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/5</link>
        <pubDate>Thu, 25 Oct 2018 12:23:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-5</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@patrick</a></p>
<aside class="quote no-group" data-post="1" data-topic="6200">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/z/7c8e57/40.png" class="avatar"> zerop:</div>
<blockquote>
<p>Oct 24 16:59:38.898 [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</p>
</blockquote>
</aside>
<p>This seams to be when upgrading Whonix 13 to 14. I’ll have to restore a whonix 13 image from backup and upgrade to 14. See if I can reproduce.</p>
<p>Realted:</p>
<aside class="quote no-group quote-modified" data-post="4" data-topic="6202">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"><a href="//forums.whonix.org/t/tor-cant-start-after-qubes-whonix-templates-reinstall-warn-directory-var-lib-tor-tor-cannot-be-read-permission-denied/6202/4">Tor can't start (After Qubes Whonix templates Reinstall) - [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</a>
</div>
<blockquote>
<blockquote>
<p>Oct 24 07:22:15.693 [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied</p>
</blockquote>
<p>That folder /var/lib/tor/.tor has no place there. Wondering how it was<br>
created. (If someone can figure out how users can possibly create that<br>
folder, let me know.)</p>
<p><a class="mention" href="http://forums.whonix.org/u/vimuz">@vimuz</a> could you try this please and see if that fixes it for you:</p>
<p><a href="https://www.whonix.org/wiki/Tor#Permissions_Fix">https://www.whonix.org/wiki/Tor#Permissions_Fix</a></p>
</blockquote>
</aside>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/4</link>
        <pubDate>Thu, 25 Oct 2018 09:45:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-4</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>Hi <code>zerop</code></p>
<p>A few questions.</p>
<ul>
<li>
<p>You are using bridges? Did you recnetly chance your bridge configuration in your torcc?</p>
</li>
<li>
<p>Have you been able to connect <strong>just</strong> using your VPN?</p>
</li>
<li>
<p>Have you tried connecting <strong>just</strong> using bridges?</p>
</li>
</ul>
<ol>
<li>
<p>Take the VPN out of the equation. Then focus on connecting with your bridge.</p>
</li>
<li>
<p>After connecting with bridges, Try with VPN.</p>
</li>
</ol>
<p>Once again, IMO not benefit to using both VPN and bridges in first 2 hops.</p>
<p>Note: If any other changes have been made to your system it would be helpfull to know.</p>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/3</link>
        <pubDate>Thu, 25 Oct 2018 00:46:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-3</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
      <item>
        <title>Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</title>
        <dc:creator><![CDATA[zerop]]></dc:creator>
        <description><![CDATA[
            <p>Hello,</p>
<p>I’ve just made a new TCP proxyVM using this guide ‘‘<a href="https://www.qubes-os.org/doc/vpn/" rel="nofollow noopener">https://www.qubes-os.org/doc/vpn/</a>’’. I’m on Qubes 3.2 with whonix 14.</p>
<p>This is the terminal ‘‘whonixcheck’’ results:</p>
<blockquote></blockquote>
<p>user@host:~$ whonixcheck<br>
[INFO] [whonixcheck] sys-whonix | Whonix-Gateway | whonix-gw-14 TemplateBased ProxyVM | Wed Oct 24 16:59:36 UTC 2018<br>
[ERROR] [whonixcheck] Tor Config Check Result:<br>
Your Tor config file contains at least one error.</p>
<p>(Tor exit code: 1)</p>
<p>Tor concise reports (below warns and errors must be fixed before you can use Tor):<br>
Oct 24 16:59:38.898 [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied<br>
Oct 24 16:59:38.898 [warn] Failed to parse/validate config: Couldn’t access private data directory “/var/lib/tor/.tor”<br>
Oct 24 16:59:38.898 [err] Reading config failed–see warnings above.</p>
<p>Tor full reports:<br>
Oct 24 16:59:38.895 [notice] Tor 0.3.4.8 (git-5da0e95e4871a0a1) running on Linux with Libevent 2.0.21-stable, OpenSSL 1.1.0f, Zlib 1.2.8, Liblzma 5.2.2, and Libzstd 1.1.2.<br>
Oct 24 16:59:38.895 [notice] Tor can’t help you if you use it wrong! Learn how to be safe at <a href="https://www.torproject.org/download/download#warning" rel="nofollow noopener">https://www.torproject.org/download/download#warning</a><br>
Oct 24 16:59:38.895 [notice] Read configuration file “/etc/tor/torrc”.<br>
Oct 24 16:59:38.898 [warn] Directory /var/lib/tor/.tor cannot be read: Permission denied<br>
Oct 24 16:59:38.898 [warn] Failed to parse/validate config: Couldn’t access private data directory “/var/lib/tor/.tor”<br>
Oct 24 16:59:38.898 [err] Reading config failed–see warnings above.</p>
<p>Try to look at this report yourself by running.</p>
<p>dom0 -&gt; Start Menu -&gt; ServiceVM: sys-whonix -&gt; Terminal</p>
<p>sudo -u debian-tor tor --verify-config</p>
<p>To try to fix this, please open your Tor config file.</p>
<pre><code>dom0 -&gt; Start Menu -&gt; ServiceVM: sys-whonix -&gt; Torrc                                                                                                                                        
or in Terminal: sudo nano /usr/local/etc/torrc.d/50_user.conf
</code></pre>
<p>Please restart Tor after fixing this error.</p>
<pre><code>dom0 -&gt; Start Menu -&gt; ServiceVM: sys-whonix -&gt; Restart Tor
or in Terminal: sudo service tor@default restart
</code></pre>
<p>Restart whonixcheck after fixing this error.</p>
<pre><code>dom0 -&gt; Start Menu -&gt; ServiceVM: sys-whonix -&gt; Whonix Check
or in Terminal: whonixcheck
</code></pre>
<p>If you know what you are doing, feel free to disable this check.<br>
Create a file /etc/whonix.d/50_whonixcheck_user.conf and add:<br>
whonixcheck_skip_functions+=" check_tor_config "</p>
<blockquote></blockquote>
          <p><a href="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200/1</link>
        <pubDate>Wed, 24 Oct 2018 17:01:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6200-1</guid>
        <source url="http://forums.whonix.org/t/tor-error-your-tor-config-file-contains-at-least-one-error-var-lib-tor-tor-cannot-be-read-permission-denied/6200.rss">Tor error: Your Tor config file contains at least one error. - /var/lib/tor/.tor cannot be read: Permission denied</source>
      </item>
  </channel>
</rss>
