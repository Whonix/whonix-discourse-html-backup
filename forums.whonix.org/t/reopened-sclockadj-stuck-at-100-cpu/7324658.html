<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[REOPENED] sclockadj stuck at 100% CPU - Support - Whonix Forum</title>
    <meta name="description" content="ruby script /usr/lib/slockadj (with default options, --no-verbose --no-debug --no-first-wait --move-min 500000 --move-max 500000 etc ) got stuck at 100% CPU use on Whonix Worktation (default options, clean workstation ex&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="7324658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[REOPENED] sclockadj stuck at 100% CPU&#39;" href="732.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/reopened-sclockadj-stuck-at-100-cpu/732?page=2" />
<meta name="twitter:url" content="https://forums.whonix.org/t/reopened-sclockadj-stuck-at-100-cpu/732?page=2" />
<meta property="og:title" content="[REOPENED] sclockadj stuck at 100% CPU" />
<meta name="twitter:title" content="[REOPENED] sclockadj stuck at 100% CPU" />
<meta property="og:description" content="0.0005 is the default value in Whonix 9. Unchanged in Whonix 10. As per sdwdate config:      That usually works well, except at some strange occurrences. It’s the same time changing algorithm as NTP:" />
<meta name="twitter:description" content="0.0005 is the default value in Whonix 9. Unchanged in Whonix 10. As per sdwdate config:      That usually works well, except at some strange occurrences. It’s the same time changing algorithm as NTP:" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="47 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 ❤" />
<meta property="article:published_time" content="2014-12-21T21:05:14+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="732.html">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="732.html">[REOPENED] sclockadj stuck at 100% CPU</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/support/5.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #8C6238'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Support</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="732.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-21T21:05:14Z' class='post-time'>
                December 21, 2014,  9:05pm
              </time>
              <meta itemprop='dateModified' content='2014-12-21T21:05:14Z'>
          <span itemprop='position'>#21</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>0.0005 is the default value in Whonix 9. Unchanged in Whonix 10. As per sdwdate config:<br>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/sdwdate/blob/Whonix9/etc/sdwdate.d/30_sdwdate_default#L123" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/sdwdate/blob/Whonix9/etc/sdwdate.d/30_sdwdate_default#L123" target="_blank">Whonix/sdwdate/blob/Whonix9/etc/sdwdate.d/30_sdwdate_default#L123</a></h4>
<pre class="onebox"><code class="lang-d/30_sdwdate_default"><ol class="start lines" start="113" style="counter-reset: li-counter 112 ;">
<li>
</li><li>## If sclockadj should wait before its first iteration.</li>
<li>## --no-first-wait</li>
<li>## --first-wait</li>
<li>## default to: --no-first-wait</li>
<li>SDWDATE_SCLOCKADJ_FIRST_WAIT="--no-first-wait"</li>
<li>
</li><li>## Move clock minimum nanoseconds (except rest).</li>
<li>## defaults to: 500000</li>
<li>## (500000 ns = 0.5 ms = 0.0005 s)</li>
<li class="selected">SDWDATE_SCLOCKADJ_MOVE_MIN="500000"</li>
<li>
</li><li>## Move clock maximum nanoseconds (except rest).</li>
<li>## defaults to: 500000</li>
<li>## (500000 ns = 0.5 ms = 0.0005 s)</li>
<li>SDWDATE_SCLOCKADJ_MOVE_MAX="500000"</li>
<li>
</li><li>## Wait nanoseconds minimum before next iteration.</li>
<li>## defaults to: 1000000000</li>
<li>## (1000000000 ns = 1000 ms = 1 s)</li>
<li>SDWDATE_SCLOCKADJ_WAIT_MIN="1000000000"</li>
</ol></code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>That usually works well, except at some strange occurrences. It’s the same time changing algorithm as NTP:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/TimeSync#NTP" target="_blank" title="05:27PM - 03 May 2020">Whonix – 3 May 20</a>
  </header>
  <article class="onebox-body">
    <img src="#" class="thumbnail" width="" height="">

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/TimeSync#NTP" target="_blank">Dev/TimeSync - Whonix</a></h3>

<p>Design Documentation of Whonix ™ Time Synchronization Mechanism</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
        </div>

        <meta itemprop='headline' content='[REOPENED] sclockadj stuck at 100% CPU'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/JasonJAyalaP'><span itemprop='name'>JasonJAyalaP</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="732.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-21T21:38:04Z' class='post-time'>
                December 21, 2014,  9:38pm
              </time>
              <meta itemprop='dateModified' content='2014-12-21T21:38:04Z'>
          <span itemprop='position'>#22</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>0.0005 increments is fine (although I don’t see why min and max is the same. I thought we wanted random), but 25 hours?</p>
<p>According to my debug output, the total amount was going down just fine. But it was going to take a lot more than 30 iterations – more like 180 million.</p>
        </div>

        <meta itemprop='headline' content='[REOPENED] sclockadj stuck at 100% CPU'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/John_Howard'><span itemprop='name'>John_Howard</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="732.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-03-05T16:17:39Z' class='post-time'>
                March 5, 2015,  4:17pm
              </time>
              <meta itemprop='dateModified' content='2015-03-05T16:17:39Z'>
          <span itemprop='position'>#23</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Is it possible to turn off this ruby script for good? My laptop gonna fly, because of speed of its fans. <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
        </div>

        <meta itemprop='headline' content='[REOPENED] sclockadj stuck at 100% CPU'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="732.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-03-05T16:42:53Z' class='post-time'>
                March 5, 2015,  4:42pm
              </time>
              <meta itemprop='dateModified' content='2015-03-05T16:42:53Z'>
          <span itemprop='position'>#24</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="23" data-topic="732">
<div class="title">
<div class="quote-controls"></div>
 John Howard:</div>
<blockquote>
<p>Is it possible to turn off this ruby script for good? My laptop gonna fly, because of speed of its fans. <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
</blockquote>
</aside>
<p>There is many ways, but none of them is a solution because then you differ from other Whonix users.</p>
<p>Whonix 9 sdwdate default config:<br>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/sdwdate/blob/Whonix9/etc/sdwdate.d/30_sdwdate_default" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/sdwdate/blob/Whonix9/etc/sdwdate.d/30_sdwdate_default" target="_blank" rel="nofollow noopener">Whonix/sdwdate/blob/Whonix9/etc/sdwdate.d/30_sdwdate_default</a></h4>
<pre><code class="lang-d/30_sdwdate_default">## This file is part of Whonix.
## Copyright (C) 2012 - 2014 Patrick Schleizer &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## Please use "/etc/sdwdate.d/50_sdwdate_user" for your custom
## configuration, which will override the defaults found here.
## When sdwdate is updated, this file may be overwritten.

## Bash Fragment.

## Add this to curl as option.
CURL_VERBOSE="--silent"

## Enable/disable debugging.
## 1 enabled.
## 2 disabled.
DEBUG=0

## Remove "--silent" from invocations of curl.
#CURL_VERBOSE=""
</code></pre>

  This file has been truncated. <a href="../../../external.html?link=https://github.com/Whonix/sdwdate/blob/Whonix9/etc/sdwdate.d/30_sdwdate_default" target="_blank" rel="nofollow noopener">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>Try this, which used date and clockjumps rather than sclockadj.</p>
<pre><code class="lang-auto"></code></pre>
<p>Or try this, which disabled sdwdate after first run which will let the clock drift after while.</p>
<pre><code class="lang-auto"></code></pre>
<p>In any case, restart sdwdate afterwards.</p>
<pre><code class="lang-auto"></code></pre>
<p>[hr]</p>
<p>For a real solution, please help getting this fixed. Try replacing your version of sclockadj with the latest one:<br>
<a href="../../../external.html?link=https://raw.githubusercontent.com/Whonix/sdwdate/master/usr/lib/sdwdate/sclockadj" class="onebox" target="_blank">https://raw.githubusercontent.com/Whonix/sdwdate/master/usr/lib/sdwdate/sclockadj</a></p>
<p>Then restart sdwdate. Perhaps that helps.</p>
<p>Or upgrade [in some VM] to testers repository (<a href="../../../external.html?link=https://www.whonix.org/wiki/Whonix-APT-Repository">https://www.whonix.org/wiki/Whonix-APT-Repository</a>), then you’ll get Whonix 10-ish packages, that comes with more recent sclockadj and more recent sdwdate. Both have more strict error handling and more debugging code added.</p>
<p>This is somewhat of a strange bug, because it seems to work in roughly felt approximately &gt;99% of cases that really should be fixed. This one might just be a manifestation and it might have other consequences. Could be a hardware bug, specific, rare VirtualBox bug or who knows what.</p>
        </div>

        <meta itemprop='headline' content='[REOPENED] sclockadj stuck at 100% CPU'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/John_Howard'><span itemprop='name'>John_Howard</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="732.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-03-05T17:11:23Z' class='post-time'>
                March 5, 2015,  5:11pm
              </time>
              <meta itemprop='dateModified' content='2015-03-05T17:11:23Z'>
          <span itemprop='position'>#25</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>service sdwdate restart</blockquote> Did the job. Maybe it's not great solution, but the 100% cpu bug occurs very rare, maybe 1/10 of whonix starts. Thanks Patrick, keep up the good work.
        </div>

        <meta itemprop='headline' content='[REOPENED] sclockadj stuck at 100% CPU'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../sclockadj2-slow-clock-adjuster-prevent-fingerprintable-clock-adjustments/2230.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../sclockadj2-slow-clock-adjuster-prevent-fingerprintable-clock-adjustments/2230.html'>
                      <span itemprop='name'>sclockadj2 - slow clock adjuster - prevent fingerprintable clock adjustments</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="732.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-02-22T10:52:22Z' class='post-time'>
                February 22, 2016, 10:52am
              </time>
              <meta itemprop='dateModified' content='2016-02-22T10:52:22Z'>
          <span itemprop='position'>#26</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>On Which platform was this happening? VirtualBox, KVM or Qubes? <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/c846478">@c846478</a> <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/john_howard">@John_Howard</a></p>
        </div>

        <meta itemprop='headline' content='[REOPENED] sclockadj stuck at 100% CPU'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="732.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-03-15T11:55:10Z' class='post-time'>
                March 15, 2016, 11:55am
              </time>
              <meta itemprop='dateModified' content='2016-03-15T11:55:10Z'>
          <span itemprop='position'>#27</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>100% CPU but happens reproducibly after suspend and resume in Qubes-Whonix:<br>
<a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/1764#issuecomment-187089419">https://github.com/QubesOS/qubes-issues/issues/1764#issuecomment-187089419</a></p>
<hr>
<a href="../sclockadj2-slow-clock-adjuster-prevent-fingerprintable-clock-adjustments/2230.html">https://forums.whonix.org/t/sclockadj2-slow-clock-adjuster-prevent-fingerprintable-clock-adjustments</a>
        </div>

        <meta itemprop='headline' content='[REOPENED] sclockadj stuck at 100% CPU'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/entr0py'><span itemprop='name'>entr0py</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="732.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-11-28T23:16:26Z' class='post-time'>
                November 28, 2017, 11:16pm
              </time>
              <meta itemprop='dateModified' content='2017-11-28T23:16:26Z'>
          <span itemprop='position'>#28</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="27" data-topic="732">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>100% CPU but happens reproducibly after suspend and resume in Qubes-Whonix</p>
</blockquote>
</aside>
<p>Also happens reproducibly when launching whonix-ws disposable VMs in Qubes.</p>
<p><a href="../../../external.html?link=https://phabricator.whonix.org/T695">https://phabricator.whonix.org/T695</a> was marked <code>closed wontfix</code> because it was assumed to be caused by dvm savefiles. It may actually be a result of broken <code>sclockadj</code>.</p>
<p>There are lots of changes happening soon (Qubes 4, new dispVM implementation, sclockadj rewrite from ruby to C, suspend-resume hooks) so may be better to wait before investigating. Will document what I’m seeing for future reference.</p>
<p>Qubes 3.2, Whonix 13</p>
<p>Using DispVM (DVM) based on DispVMTemplateVM (DTVM) based on TemplateVM (TVM = anon-whonix)</p>
<p>If DTVM savefile is constructed while sdwdate service is in progress of iterating through time servers, then when DVM is launched, results will be highly skewed. If large (insane?) time jumps are sent to sclockadj, then clock is not adjusted and cpu runs at 100%.</p>
<details>
<summary>
disp1: sdwdate.log</summary>
<p>date -s used to set time. no issues. but time is 2 days in the past</p>
<pre><code class="lang-auto">2017-11-26 17:25:50,054 - sdwdate.log - INFO - Fetching remote times, **start Sun Nov 26 17:25:50 UTC 2017** (unixtime 1511717150.05)
2017-11-28 21:10:04,301 - sdwdate.log - INFO - Pool 2 last url: #.onion, web unixtime: 1511717009, web time: Sun Nov 26 17:23:29 UTC 2017, diff: -186395 seconds
2017-11-28 21:10:04,301 - sdwdate.log - INFO - Pool 3 last url: #.onion, web unixtime: 1511717012, web time: Sun Nov 26 17:23:32 UTC 2017, diff: -186392 seconds
2017-11-28 21:10:09,858 - sdwdate.log - INFO - Pool 1 last url: #.onion, web unixtime: 1511903265, web time: Tue Nov 28 21:07:45 UTC 2017, diff: -144 seconds
2017-11-28 21:10:09,859 - sdwdate.log - INFO - Fetching remote times, **end Tue Nov 28 21:10:09 UTC 2017** (unixtime 1511903409.86)
2017-11-28 21:10:09,869 - sdwdate.log - INFO - Pool differences, sorted: [-186395, -186392, -144]
2017-11-28 21:10:09,870 - sdwdate.log - INFO - Median time difference: -186392
2017-11-28 21:10:09,870 - sdwdate.log - INFO - Seconds to add: + 0.832422362
2017-11-28 21:10:09,870 - sdwdate.log - INFO - New time difference: -186391.167578
2017-11-28 21:10:09,870 - sdwdate.log - INFO - Old unixttime: 1511903409.87
2017-11-28 21:10:09,870 - sdwdate.log - INFO - New unixtime : 1511717018.7
2017-11-26 17:23:38,702 - sdwdate.log - INFO - Instantly setting the time by using command "sudo /bin/date --set @1511717018.7"
</code></pre>
<p>sdwdate restarted to get correct time:</p>
<pre><code class="lang-auto">2017-11-26 17:30:19,352 - sdwdate.log - INFO - Fetching remote times, start Sun Nov 26 17:30:19 UTC 2017 (unixtime 1511717419.35)
2017-11-26 17:30:23,906 - sdwdate.log - INFO - Pool 1 last url: #.onion, web unixtime: 1511903669, web time: Tue Nov 28 21:14:29 UTC 2017, diff: 186246 seconds
2017-11-26 17:30:23,907 - sdwdate.log - INFO - Pool 2 last url: #.onion, web unixtime: 1511903670, web time: Tue Nov 28 21:14:30 UTC 2017, diff: 186247 seconds
2017-11-26 17:30:23,907 - sdwdate.log - INFO - Pool 3 last url: #.onion, web unixtime: 1511903669, web time: Tue Nov 28 21:14:29 UTC 2017, diff: 186246 seconds
2017-11-26 17:30:23,907 - sdwdate.log - INFO - Fetching remote times, end Sun Nov 26 17:30:23 UTC 2017 (unixtime 1511717423.91)
2017-11-26 17:30:23,919 - sdwdate.log - INFO - Pool differences, sorted: [186246, 186246, 186247]
2017-11-26 17:30:23,919 - sdwdate.log - INFO - Median time difference: 186246
2017-11-26 17:30:23,919 - sdwdate.log - INFO - Seconds to add: - 0.594058128
2017-11-26 17:30:23,920 - sdwdate.log - INFO - New time difference: 186245.405942
2017-11-26 17:30:23,928 - sdwdate.log - INFO - Gradually adjusting the time by running sclockadj, PID=2400
</code></pre>
<p>cmd: <code>/usr/lib/sdwdate/sclockadj --no-debug --no-verbose --no-systohc --no-first-wait --move-min 5000000 --move-max 5000000 --wait-min 1000000000 --wait-max 1000000000 --add 186243100204744</code><br>
results in 100% cpu (the --add parameter is not actual from this example but close)</p>
<p>These results can be reproduced for arbitrarily many dispVMs.</p>
</details>
        </div>

        <meta itemprop='headline' content='[REOPENED] sclockadj stuck at 100% CPU'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="732.html">← previous page</a></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
