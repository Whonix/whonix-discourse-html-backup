<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF) - #18 by HulaHoop - Development - Whonix Forum</title>
    <meta name="description" content="Also, is Whonix vulnerable beause it hasn’t installed CPU microcode updates to address speculative attacks? That is, the package update is only available from Debian non-free repo? 
See here: https://www.debian.org/secur&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../5739.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)&#39;" href="../5739.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/8/80309285b3e4e8cf58c91f6c2407f6496d952607.png" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/8/80309285b3e4e8cf58c91f6c2407f6496d952607.png" />
<meta property="og:url" content="https://forums.whonix.org/t/whonix-vulerable-due-to-missing-processor-microcode-packages-spectre-meltdown-retpoline-l1-terminal-fault-l1tf/5739/18" />
<meta name="twitter:url" content="https://forums.whonix.org/t/whonix-vulerable-due-to-missing-processor-microcode-packages-spectre-meltdown-retpoline-l1-terminal-fault-l1tf/5739/18" />
<meta property="og:title" content="Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)" />
<meta name="twitter:title" content="Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)" />
<meta property="og:description" content="According to this old thread: Guest systems sees CPU of the Host  TNT’s results show Xen and VBox accessing the majority of host flags. Test by diffing the Dom0/DomU output for cat /proc/cpuinfo  A reference on the inability of guests to manipulate microcode. Different from the paper I read a long time ago and too lazy to dig up.     b) “Qubes and VirtualBox need CPU passthrough enabled, and microcode packages installed, otherwise they’d be vulnerable.”   Yes and I’d add:  microcode on Dom0/hos..." />
<meta name="twitter:description" content="According to this old thread: Guest systems sees CPU of the Host  TNT’s results show Xen and VBox accessing the majority of host flags. Test by diffing the Dom0/DomU output for cat /proc/cpuinfo  A reference on the inability of guests to manipulate microcode. Different from the paper I read a long time ago and too lazy to dig up.     b) “Qubes and VirtualBox need CPU passthrough enabled, and microcode packages installed, otherwise they’d be vulnerable.”   Yes and I’d add:  microcode on Dom0/hos..." />
<meta property="article:published_time" content="2018-08-27T13:52:24+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="next" href="../57394658.html?page=2">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../5739.html">Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Algernon'><span itemprop='name'>Algernon</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-25T21:18:18Z' class='post-time'>
                August 25, 2018,  9:18pm
              </time>
              <meta itemprop='dateModified' content='2018-08-25T21:18:18Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="12" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Is there a non-complex way of excluding/choosing dependencies based on the chosen hardware platform?</p>
</blockquote>
</aside>
<p>Probably yes, it looks like Depends can be made architecture specific.</p>
<aside class="quote no-group" data-post="12" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p><a href="../../../../external.html?link=https://www.berrange.com/posts/2018/06/29/cpu-model-configuration-for-qemu-kvm-on-x86-hosts/" rel="nofollow noopener">https://www.berrange.com/posts/2018/06/29/cpu-model-configuration-for-qemu-kvm-on-x86-hosts/</a></p>
</blockquote>
</aside>
<p>Yeah, the relevant part is actually in one of the comments:</p>
<blockquote>
<p><a href="../../../../external.html?link=http://website/" rel="nofollow noopener">Tim</a> said at 11:14 am on July 9th, 2018:</p>
<p>Is it possible to use default models and include the mitigations for the different vulnerabilities? Something like kvm64 + spec-ctrl …</p>
<p>Daniel Berrange said at 3:06 pm on July 27th, 2018:</p>
<p>Yes, it is possible to use kvm64,+spec-ctrl but I won’t not really advise doing that for a number of reasons.</p>
<p>First as mentioned kvm64 is an ancient CPU model, pretty much awful as qemu64. By using it you are intentionally throwing away performance that your host CPUs have. eg your host CPU almost certainly has ‘aes’ support but with kvm64 your guest won’t see it, so it will do pure software AES and so needlessly burn CPU cycles for TLS connections.</p>
<p>Second, guest kernels look at the CPU family to determine whether they’re running on a CPU that does speculation and thus needs mitigation. If they see kvm64 they’ll think the CPU is so old that no mitigations are needed, even if you did turn on spec-ctrl feature. So the guest OS will likely remain vulnerable.</p>
</blockquote>
<p>From reading the last paragraph it looks like setting a CPU model could help depending on the model. I’m also not sure if anyone did actually do some real research on this. Maybe using the spectre-meltdown-check script  + using different cpu models + the mitigations in the xml file could give some answers</p>
<aside class="quote no-group" data-post="11" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Xen and VBox just passed through all/most of host processor instructions.</p>
</blockquote>
</aside>
<p>What about the CPU model? Afaik XEN should be capable of changing this</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-26T10:24:00Z' class='post-time'>
                August 26, 2018, 10:24am
              </time>
              <meta itemprop='dateModified' content='2018-08-26T10:24:00Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>TNT BOM BOM:</p>
<blockquote>
<p>I can see that everyone thinking its a real patch without being another vulnerability.</p>
<p>so i request to stop thinking about implementing the solution rather than thinking about the solution itself , answer the very simple question:</p>
<p>how can anyone prove that this is fixing patch without being by itself another vulnerability that might be discovered later?</p>
</blockquote>
<p>That’s a too high standard: this is never possible even for the most<br>
exemplary Libre Software projects.</p>
<blockquote>
<p>and i have made my philosophic view through the story that i mentioned above.</p>
<p>you will only know this in case if you have/know the code otherwise we are bullshitting around.</p>
</blockquote>
<p>Well, without microcode package:</p>
<ul>
<li>a vulnerability known to the public can be exploited and there may be<br>
other backdoors</li>
</ul>
<p>With microcode package:</p>
<ul>
<li>there may be other backdoors</li>
</ul>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-26T13:55:48Z' class='post-time'>
                August 26, 2018,  1:55pm
              </time>
              <meta itemprop='dateModified' content='2018-08-26T13:55:48Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="13" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/a/a183cd/40.png" class="avatar"> Algernon:</div>
<blockquote>
<p>What about the CPU model? Afaik XEN should be capable of changing this</p>
</blockquote>
</aside>
<p>Picking a default specific CPU model that approximates the host’s is not a good idea because I cannot predict what model the user is running and if they are using Intel or AMD. Its more likely Xen is capable of changing these settings anyhow because of migration compatibility.</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-27T05:34:48Z' class='post-time'>
                August 27, 2018,  5:34am
              </time>
              <meta itemprop='dateModified' content='2018-08-27T05:34:48Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>As far I know Qubes and VirtualBox are not using CPU passthrough, neither it’s easy to enable it.</p>
<blockquote>
<p>A Whonix guest needs CPU passthrough (non-QEMU emulated model) access to host instructions for the kernel mitigations to take effect.</p>
</blockquote>
<p>This could be understood as:</p>
<ul>
<li>a) “Qubes and VirtualBox need CPU passthrough enabled, otherwise they’d be vulnerable.”</li>
<li>b) “Qubes and VirtualBox need CPU passthrough enabled, and microcode packages installed, otherwise they’d be vulnerable.”</li>
<li>c) “When using Qubes or VirtualBox with CPU passthrough, and microcode packages installed should be installed, otherwise they’d be vulnerable.”</li>
</ul>
<p>Is any of that what you meant? References?</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Algernon'><span itemprop='name'>Algernon</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-27T11:49:35Z' class='post-time'>
                August 27, 2018, 11:49am
              </time>
              <meta itemprop='dateModified' content='2018-08-27T11:49:35Z'>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="15" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Picking a default specific CPU model that approximates the host’s is not a good idea because I cannot predict what model the user is running and if they are using Intel or AMD.</p>
</blockquote>
</aside>
<p>What about something like kvm64? Should be supported for both Intel and AMD. I don’t know what features are not supported, at least aes it seems, but maybe we could live with that?</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">

            <link itemprop="image" href="../../../uploads/default/original/2X/8/80309285b3e4e8cf58c91f6c2407f6496d952607.png">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-27T13:52:24Z' class='post-time'>
                August 27, 2018,  1:52pm
              </time>
              <meta itemprop='dateModified' content='2018-08-27T13:52:24Z'>
          <span itemprop='position'>#18</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="16" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>As far I know Qubes and VirtualBox are not using CPU passthrough, neither it’s easy to enable it.</p>
</blockquote>
</aside>
<p>According to this old thread: <a href="../../guest-systems-sees-cpu-of-the-host/1413/17d80e.html?u=hulahoop" class="inline-onebox">Guest systems sees CPU of the Host</a></p>
<p>TNT’s results show Xen and VBox accessing the majority of host flags. Test by diffing the Dom0/DomU output for cat /proc/cpuinfo</p>
<p>A reference on the inability of guests to manipulate microcode. Different from the paper I read a long time ago and too lazy to dig up.</p>
<aside class="onebox stackexchange">
  <header class="source">
      <a href="../../../../external.html?link=https://serverfault.com/questions/895294/are-cpu-microcode-updates-always-ignored-by-hypervisors/895319#895319" target="_blank" rel="nofollow noopener">serverfault.com</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://serverfault.com/users/454838/anonymous" target="_blank" rel="nofollow noopener">
    <img alt="anonymous" src="../../../uploads/default/original/2X/8/80309285b3e4e8cf58c91f6c2407f6496d952607.png" class="thumbnail onebox-avatar" width="128" height="128">
  </a>
<h4>
  <a href="../../../../external.html?link=https://serverfault.com/questions/895294/are-cpu-microcode-updates-always-ignored-by-hypervisors/895319#895319" target="_blank" rel="nofollow noopener">Are CPU microcode updates always ignored by Hypervisors?</a>
</h4>

<div class="tags">
  <strong>linux, kvm-virtualization</strong>
</div>

<div class="date">
  
  answered by
  <a href="../../../../external.html?link=https://serverfault.com/users/454838/anonymous" target="_blank" rel="nofollow noopener">
    anonymous
  </a>
  on <a href="../../../../external.html?link=https://serverfault.com/questions/895294/are-cpu-microcode-updates-always-ignored-by-hypervisors/895319#895319" target="_blank" rel="nofollow noopener">10:05AM - 02 Feb 18 UTC</a>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<blockquote>
<p>b) “Qubes and VirtualBox need CPU passthrough enabled, and microcode packages installed, otherwise they’d be vulnerable.”</p>
</blockquote>
<p>Yes and I’d add:  microcode on Dom0/host (which is not a virtualized Whonix’s concern). Whonix physical build needs the microcode.</p>
<aside class="quote no-group" data-post="17" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/a/a183cd/40.png" class="avatar"> Algernon:</div>
<blockquote>
<p>What about something like kvm64?</p>
</blockquote>
</aside>
<p>Reference is post above with select quotes:</p>
<blockquote>
<p>Host passthrough<br>
<strong>This is the recommended CPU to use, provided live migration is not required.</strong></p>
</blockquote>
<blockquote>
<p>The following are important CPU features that should be used on Intel x86 hosts, when available in the host CPU. … <strong>In general all of these features are included if using “Host passthrough” or “Host model</strong>”.</p>
</blockquote>
<p>On kvm64:</p>
<blockquote>
<p>their usage is discouraged, as they expose a very limited featureset, … First as mentioned kvm64 is an ancient CPU model, pretty much awful as qemu64. <strong>If they [guest kernels] see kvm64 they’ll think the CPU is so old that no mitigations are needed, even if you did turn on spec-ctrl feature. So the guest OS will likely remain vulnerable.</strong></p>
</blockquote>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-27T15:01:57Z' class='post-time'>
                August 27, 2018,  3:01pm
              </time>
              <meta itemprop='dateModified' content='2018-08-27T15:01:57Z'>
          <span itemprop='position'>#19</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a href="../../../../external.html?link=https://www.berrange.com/posts/2018/06/29/cpu-model-configuration-for-qemu-kvm-on-x86-hosts/" class="onebox" target="_blank">https://www.berrange.com/posts/2018/06/29/cpu-model-configuration-for-qemu-kvm-on-x86-hosts/</a></p>
<blockquote>
<p>With the various CPU hardware vulnerabilities reported this year, guest CPU configuration is now a <strong>security critical</strong> task.</p>
</blockquote>
<p>That is an interesting quote indeed.</p>
<aside class="quote no-group" data-post="18" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>b) “Qubes and VirtualBox need CPU passthrough enabled, and microcode packages installed, otherwise they’d be vulnerable.”</p>
</blockquote>
</aside>
<p>That is</p>
<p>“Qubes dom0 (host) and VirtualBox host need microcode packages installed, otherwise they’d be vulnerable. VM does not need microcode packages installed”?</p>
<p>Yes, until that point, agreed.</p>
<aside class="quote no-group" data-post="18" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>microcode on Dom0/host (which is not a virtualized Whonix’s concern). Whonix physical build needs the microcode.</p>
</blockquote>
</aside>
<p>Yes.</p>
<p>“Qubes dom0 (host) and VirtualBox host need microcode packages installed and they need to use CPU passthorugh, otherwise they’d be vulnerable.” -</p>
<p>?</p>
<p>That’s really big.</p>
<p>I haven’t found any reference stating CPU passthrough is required. <a href="../../../../external.html?link=https://serverfault.com/questions/895294/are-cpu-microcode-updates-always-ignored-by-hypervisors/895319#895319">https://serverfault.com/questions/895294/are-cpu-microcode-updates-always-ignored-by-hypervisors/895319#895319</a> doesn’t talk say “CPU passthrough required” or so either.</p>
<p>There should be discussions and bug reports upstream if that is the case.</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-27T16:03:18Z' class='post-time'>
                August 27, 2018,  4:03pm
              </time>
              <meta itemprop='dateModified' content='2018-08-27T16:03:18Z'>
          <span itemprop='position'>#20</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="19" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I haven’t found any reference stating CPU passthrough is required.</p>
</blockquote>
</aside>
<p>Dan Berrange’s post does say that as far as KVM and I assume it applies to all hypervisors. Since we saw from tests that they don’t mask anything out by default that’s not a problem. There is nothing to fix.</p>
<aside class="quote no-group" data-post="19" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p><a href="../../../../external.html?link=https://serverfault.com/questions/895294/are-cpu-microcode-updates-always-ignored-by-hypervisors/895319#895319">https://serverfault.com/questions/895294/are-cpu-microcode-updates-always-ignored-by-hypervisors/895319#895319</a> doesn’t talk say “CPU passthrough required” or so either.</p>
</blockquote>
</aside>
<p>All this thread substantiates is that you can’t change microcode from inside a guest for security reasons (which makes sense). This applies to any hypervisor worth its salt.</p>
<p>The necessity for passthrough to take advantage of updated microcode comes from my other reference.</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Algernon'><span itemprop='name'>Algernon</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-27T18:05:41Z' class='post-time'>
                August 27, 2018,  6:05pm
              </time>
              <meta itemprop='dateModified' content='2018-08-27T18:05:41Z'>
          <span itemprop='position'>#21</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I read that post multiple times but initially was (and I am still) worried about the “likely” which to me sounds like guessing and noone actually tested it. However, I certainly see a point in using host-model/passthrough instead of kvm64 for performance reasons.<br>
I just made a test with the spectre-meltdown-checker script from the official debian package. While the host showed “not vulnerable” to all listed CVEs an updated Whonix KVM guest  with the respective CPU features enabled in the xml was always vulnerable to CVE-2018-3640 and CVE-2018-3639. 3640 should be fixed by microcode update. 3639 should be fixed with the ssbd feature, but I could not pass it to the VM for whatever reason despite it being available on the host. Changing models to host-passthrough or kvm64 did not change anything. Maybe someone can test the script on qubes or on some other machines.</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-27T18:18:04Z' class='post-time'>
                August 27, 2018,  6:18pm
              </time>
              <meta itemprop='dateModified' content='2018-08-27T22:15:01Z'>
          <span itemprop='position'>#22</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="20" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Dan Berrange’s post does say that as far as KVM and I assume it applies to all hypervisors.</p>
</blockquote>
</aside>
<p>Assumption is too quick here. Virtualizers are very different. KVM is inside Linux kernel and Qubes (Xen) is a microkernel. A good pointer for research very much so indeed.</p>
<hr>
<p>Quote <a href="../../../../external.html?link=https://download.virtualbox.org/virtualbox/5.2.18/UserManual.pdf">https://download.virtualbox.org/virtualbox/5.2.18/UserManual.pdf</a> / <a href="../../../../external.html?link=https://www.virtualbox.org/manual/ch08.html">https://www.virtualbox.org/manual/ch08.html</a></p>
<blockquote>
<p><code>--ibpb-on-vm-[enter|exit] on|off</code> : Enables flushing of the indirect branch prediction buffers on every VM enter or exit respectively. This could be enabled by users overly worried about possible spectre attacks by the VM. Please note that these options may have sever impact on performance.</p>
</blockquote>
<p>Have to research a lot more but this sounds very bad at first. “Enables” implies “not enabled by default” and “could be enabled by users overly worried about possible spectre attacks” indicates Oracle VirtualBox taking the position as Intel with “Indirect Branch Predictor Barrier (IBPB) is a security feature”.</p>
<p><a href="../../../../external.html?link=https://download.virtualbox.org/virtualbox/5.2.6/UserManual.pdf">https://download.virtualbox.org/virtualbox/5.2.6/UserManual.pdf</a> does not contain mentioning of <code>spectre</code>.</p>
<p>Related:<br>
<a href="../../../../external.html?link=http://lkml.iu.edu/hypermail/linux/kernel/1801.2/04628.html" class="onebox" target="_blank">http://lkml.iu.edu/hypermail/linux/kernel/1801.2/04628.html</a></p>
<p>Quote <a href="../../../../external.html?link=https://www.virtualbox.org/manual/ch08.html">https://www.virtualbox.org/manual/ch08.html</a></p>
<blockquote>
<ul>
<li>
<code>--ibpb-on-vm-[enter|exit] on|off</code> : Enables flushing of the indirect branch prediction buffers on every VM enter or exit respectively. This could be enabled by users overly worried about possible spectre attacks by the VM. Please note that these options may have sever impact on performance.</li>
</ul>
</blockquote>
<ul>
<li><code>--ibpb-on-vm-enter on</code></li>
<li><code>--ibpb-on-vm-exit on</code></li>
</ul>
<blockquote>
<ul>
<li>
<code>--spec-ctrl on|off</code> : This setting enables/disables exposing speculation control interfaces to the guest, provided they are available on the host. Depending on the host CPU and workload, enabling speculation control may significantly reduce performance.</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>
<code>--l1d-flush-on-sched on|off</code> : Enables flushing of the level 1 data cache on scheduling EMT for guest execution. See <a href="../../../../external.html?link=https://www.virtualbox.org/manual/ch13.html#sec-rec-cve-2018-3646">Section 13.4.1, “CVE-2018-3646”</a>.</li>
</ul>
</blockquote>
<hr>
<p>Qubes R4 Debian VM:</p>
<pre><code>sudo journalctl | grep -i spectre
</code></pre>
<pre><code class="lang-auto">Aug 27 14:04:24 localhost kernel: Spectre V2 : Mitigation: Full generic retpoline
Aug 27 14:04:24 localhost kernel: Spectre V2 : Spectre v2 mitigation: Enabling Indirect Branch Prediction Barrier
Aug 27 14:04:24 localhost kernel: Spectre V2 : Enabling Restricted Speculation for firmware calls
</code></pre>
<p>Same for Qubes Whonix 14. Same for Qubes fedora-26. Same for Qubes dom0.</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../why-use-virtualbox-over-kvm-on-linux-hosts-considering-deprecation-of-virtualbox-on-linux-hosts/7198/21.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../why-use-virtualbox-over-kvm-on-linux-hosts-considering-deprecation-of-virtualbox-on-linux-hosts/7198/21.html'>
                      <span itemprop='name'>Why use VirtualBox over KVM on Linux hosts? Considering deprecation of VirtualBox on Linux hosts.</span>
                    </a>
                    <meta itemprop='position' content='6'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../virtualbox-vm-settings-security-review/8118/2.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../virtualbox-vm-settings-security-review/8118/2.html'>
                      <span itemprop='name'>VirtualBox VM Settings Security Review</span>
                    </a>
                    <meta itemprop='position' content='7'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../long-wiki-edits-thread/3477/916.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../long-wiki-edits-thread/3477/916.html'>
                      <span itemprop='name'>Long Wiki Edits Thread</span>
                    </a>
                    <meta itemprop='position' content='8'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-27T22:25:25Z' class='post-time'>
                August 27, 2018, 10:25pm
              </time>
              <meta itemprop='dateModified' content='2018-08-27T22:25:25Z'>
          <span itemprop='position'>#23</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Documentation for further diagnosis just now written:</p>
<ul>
<li><a href="../../../../external.html?link=https://www.whonix.org/wiki/Firmware_Security_and_Updates#Install_Microcode_Package">https://www.whonix.org/wiki/Firmware_Security_and_Updates#Install_Microcode_Package</a></li>
<li><a href="../../../../external.html?link=https://www.whonix.org/wiki/Firmware_Security_and_Updates#spectre-meltdown-checker">https://www.whonix.org/wiki/Firmware_Security_and_Updates#spectre-meltdown-checker</a></li>
</ul>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Algernon'><span itemprop='name'>Algernon</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-27T22:52:32Z' class='post-time'>
                August 27, 2018, 10:52pm
              </time>
              <meta itemprop='dateModified' content='2018-08-27T22:52:32Z'>
          <span itemprop='position'>#24</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="22" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Same for Qubes Whonix 14. Same for Qubes fedora-26. Same for Qubes dom0.</p>
</blockquote>
</aside>
<p>What is the output of the spectre-meltdown-checker script?</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/TNT_BOM_BOM'><span itemprop='name'>TNT_BOM_BOM</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-28T10:37:54Z' class='post-time'>
                August 28, 2018, 10:37am
              </time>
              <meta itemprop='dateModified' content='2018-08-28T10:37:54Z'>
          <span itemprop='position'>#25</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="14" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>That’s a too high standard: this is never possible even for the most<br>
exemplary Libre Software projects.</p>
</blockquote>
</aside>
<p>but there is accessibility to the code, anyone who have knowledge about it will fix it/patching it …etc. Not something from an evil company like Intel.</p>
<aside class="quote no-group" data-post="14" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Well, without microcode package:</p>
<ul>
<li>a vulnerability known to the public can be exploited and there may be<br>
other backdoors</li>
</ul>
</blockquote>
</aside>
<p>package not installed in our system = so no backdoor.</p>
<p>for the vulnerability affect, whether we have it or not it will not defend it unless the host support that like Qubes or plain Debian …etc. since Whonix is not a host OS (yet or maybe never) so adding an outsides packages is nonsense from security pointview.</p>
<p>Also if this is a critial issue for all Distros , then Debian for sure will search away to add this package inside their main repo. and if they didnt then this is something not really worth for us to make it superior.</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/TNT_BOM_BOM'><span itemprop='name'>TNT_BOM_BOM</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">

            <link itemprop="image" href="../../../uploads/default/original/2X/d/d2ac1bb757b8d5963881dd05a44309c1a9272c44.png">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-28T10:50:38Z' class='post-time'>
                August 28, 2018, 10:50am
              </time>
              <meta itemprop='dateModified' content='2018-08-28T11:28:48Z'>
          <span itemprop='position'>#26</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>according to the test mentioned in the wiki</p>
<aside class="quote no-group" data-post="23" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p><a href="../../../../external.html?link=https://www.whonix.org/wiki/Firmware_Security_and_Updates#spectre-meltdown-checker" rel="nofollow noopener">https://www.whonix.org/wiki/Firmware_Security_and_Updates#spectre-meltdown-checker</a></p>
</blockquote>
</aside>
<ul>
<li>Results here (before “intel-microcode”): (Test Done on Whonix 14 - Qubes)</li>
</ul>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/2X/d/d2ac1bb757b8d5963881dd05a44309c1a9272c44.png" data-download-href="//forums.whonix.org/uploads/default/d2ac1bb757b8d5963881dd05a44309c1a9272c44" title="spectre1.png"><img src="../../../uploads/default/optimized/2X/d/d2ac1bb757b8d5963881dd05a44309c1a9272c44_2_400x500.png" alt="spectre1" width="400" height="500" srcset="//forums.whonix.org/uploads/default/optimized/2X/d/d2ac1bb757b8d5963881dd05a44309c1a9272c44_2_400x500.png, //forums.whonix.org/uploads/default/optimized/2X/d/d2ac1bb757b8d5963881dd05a44309c1a9272c44_2_600x750.png 1.5x, //forums.whonix.org/uploads/default/original/2X/d/d2ac1bb757b8d5963881dd05a44309c1a9272c44.png 2x" data-small-upload="../../../uploads/default/optimized/2X/d/d2ac1bb757b8d5963881dd05a44309c1a9272c44_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">spectre1.png</span><span class="informations">653×990 78.7 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/2X/5/5fd8a2a129b1b4e1dbf53369fff347daa332f8cd.png" data-download-href="//forums.whonix.org/uploads/default/5fd8a2a129b1b4e1dbf53369fff347daa332f8cd" title="spectre2.png"><img src="../../../uploads/default/optimized/2X/5/5fd8a2a129b1b4e1dbf53369fff347daa332f8cd_2_400x500.png" alt="spectre2" width="400" height="500" srcset="//forums.whonix.org/uploads/default/optimized/2X/5/5fd8a2a129b1b4e1dbf53369fff347daa332f8cd_2_400x500.png, //forums.whonix.org/uploads/default/optimized/2X/5/5fd8a2a129b1b4e1dbf53369fff347daa332f8cd_2_600x750.png 1.5x, //forums.whonix.org/uploads/default/original/2X/5/5fd8a2a129b1b4e1dbf53369fff347daa332f8cd.png 2x" data-small-upload="../../../uploads/default/optimized/2X/5/5fd8a2a129b1b4e1dbf53369fff347daa332f8cd_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">spectre2.png</span><span class="informations">648×928 75.2 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<pre><code>Welcome to Whonix!
https://www.whonix.org

The programs included with the Whonix GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Whonix GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law. Whonix is a derivative of Debian GNU/Linux.

Whonix is based on Tor. Whonix is produced independently from the
Tor (r) anonymity software and carries no guarantee from The Tor Project
about quality, suitability or anything else.

Whonix is experimental software by means of concept and design.
Do not rely on it for strong anonymity.

Type: "whonix" &lt;enter&gt; for help.
uwt INFO: Stream isolation for some applications enabled. uwt / torsocks will be automatically prepended to some commands. What is that? See:
uwt INFO: https://www.whonix.org/wiki/Stream_Isolation/Easy
user@host:~$ sudo su -c "echo -e 'deb http://http.debian.net/debian stretch-backports main' &gt; /etc/apt/sources.list.d/backports.list"
user@host:~$ sudo apt-get update
Hit:1 tor+http://sgvtcaew4bxjd7ln.onion stretch/updates InRelease                       
Hit:2 tor+http://deb.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion stretch InRelease
Ign:3 tor+http://vwakviie2ienjx6t.onion/debian stretch InRelease                        
Hit:4 tor+http://vwakviie2ienjx6t.onion/debian stretch Release      
Hit:7 http://deb.qubes-os.org/r4.0/vm stretch InRelease                 
Get:6 http://cdn-fastly.deb.debian.org/debian stretch-backports InRelease [91.8 kB]
Get:8 http://cdn-fastly.deb.debian.org/debian stretch-backports/main amd64 Packages [409 kB]
Get:9 http://cdn-fastly.deb.debian.org/debian stretch-backports/main Translation-en [301 kB]                                                                                                                                                                                    
Get:10 http://cdn-fastly.deb.debian.org/debian stretch-backports/main amd64 Contents (deb) [4,885 kB]                                                                                                                                                                           
Fetched 5,686 kB in 36s (155 kB/s)                                                                                                                                                                                                                                              
Reading package lists... Done                                                                                                                                                                                                                                                   
user@host:~$ sudo apt-get -t stretch-backports install spectre-meltdown-checker                                                                                                                                                                                                 
Reading package lists... Done                                                                                                                                                                                                                                                   
Building dependency tree                                                                                                                                                                                                                                                        
Reading state information... Done                                                                                                                                                                                                                                               
The following NEW packages will be installed:                                                                                                                                                                                                                                   
  spectre-meltdown-checker                                                                                                                                                                                                                                                      
0 upgraded, 1 newly installed, 0 to remove and 61 not upgraded.                                                                                                                                                                                                                 
Need to get 33.4 kB of archives.                                                                                                                                                                                                                                                
After this operation, 139 kB of additional disk space will be used.                                                                                                                                                                                                             
Get:1 http://cdn-fastly.deb.debian.org/debian stretch-backports/main amd64 spectre-meltdown-checker all 0.39-1~bpo9+1 [33.4 kB]                                                                                                                                                 
Fetched 33.4 kB in 1s (17.9 kB/s)                                                                                                                                                                                                                                               
Selecting previously unselected package spectre-meltdown-checker.                                                                                                                                                                                                               
(Reading database ... 80298 files and directories currently installed.)                                                                                                                                                                                                         
Preparing to unpack .../spectre-meltdown-checker_0.39-1~bpo9+1_all.deb ...                                                                                                                                                                                                      
Unpacking spectre-meltdown-checker (0.39-1~bpo9+1) ...                                                                                                                                                                                                                          
Processing triggers for man-db (2.7.6.1-2) ...                                                                                                                                                                                                                                  
Setting up spectre-meltdown-checker (0.39-1~bpo9+1) ...                                                                                                                                                                                                                         
user@host:~$ sudo spectre-meltdown-checker --paranoid ; echo $?                                                                                                                                                                                                                 
Spectre and Meltdown mitigation detection tool v0.39                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                            
Checking for vulnerabilities on current system                                                                                                                                                                                                                                  
Kernel is Linux 4.14.57-1.pvops.qubes.x86_64 #1 SMP Mon Jul 23 16:28:54 UTC 2018 x86_64                                                                                                                                                                                         
CPU is Intel(R) Core(TM) i7-4710HQ CPU @ 2.50GHz                                                                                                                                                                                                                                
We're missing some kernel info (see -v), accuracy might be reduced                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                            
Hardware check                                                                                                                                                                                                                                                                  
* Hardware support (CPU microcode) for mitigation techniques                                                                                                                                                                                                                    
  * Indirect Branch Restricted Speculation (IBRS)                                                                                                                                                                                                                               
* SPEC_CTRL MSR is available:  YES                                                                                                                                                                                                                                          
* CPU indicates IBRS capability:  YES  (SPEC_CTRL feature bit)                                                                                                                                                                                                              
  * Indirect Branch Prediction Barrier (IBPB)                                                                                                                                                                                                                                   
* PRED_CMD MSR is available:  YES                                                                                                                                                                                                                                           
* CPU indicates IBPB capability:  YES  (SPEC_CTRL feature bit)                                                                                                                                                                                                              
  * Single Thread Indirect Branch Predictors (STIBP)                                                                                                                                                                                                                            
* SPEC_CTRL MSR is available:  YES 
* CPU indicates STIBP capability:  YES  (Intel STIBP feature bit)
  * Speculative Store Bypass Disable (SSBD)
* CPU indicates SSBD capability:  NO 
  * Enhanced IBRS (IBRS_ALL)
* CPU indicates ARCH_CAPABILITIES MSR availability:  NO 
* ARCH_CAPABILITIES MSR advertises IBRS_ALL capability:  NO 
  * CPU explicitly indicates not being vulnerable to Meltdown (RDCL_NO):  NO 
  * CPU explicitly indicates not being vulnerable to Variant 4 (SSB_NO):  NO 
  * Hypervisor indicates host CPU might be vulnerable to RSB underflow (RSBA):  NO 
  * CPU microcode is known to cause stability problems:  NO  (model 0x3c family 0x6 stepping 0x3 ucode 0x24 cpuid 0x306c3)
* CPU vulnerability to the speculative execution attack variants
  * Vulnerable to Variant 1:  YES 
  * Vulnerable to Variant 2:  YES 
  * Vulnerable to Variant 3:  YES 
  * Vulnerable to Variant 3a:  YES 
  * Vulnerable to Variant 4:  YES 

CVE-2017-5753 [bounds check bypass] aka 'Spectre Variant 1'
* Mitigated according to the /sys interface:  YES  (Mitigation: __user pointer sanitization)
* Kernel has array_index_mask_nospec:  UNKNOWN  (couldn't check (couldn't find your kernel image in /boot, if you used netboot, this is normal))
* Kernel has the Red Hat/Ubuntu patch:  UNKNOWN  (couldn't check (couldn't find your kernel image in /boot, if you used netboot, this is normal))
* Kernel has mask_nospec64 (arm64):  UNKNOWN  (couldn't check (couldn't find your kernel image in /boot, if you used netboot, this is normal))
* Checking count of LFENCE instructions following a jump in kernel...  UNKNOWN  (couldn't check (couldn't find your kernel image in /boot, if you used netboot, this is normal))
&gt; STATUS:  NOT VULNERABLE  (Mitigation: __user pointer sanitization)

CVE-2017-5715 [branch target injection] aka 'Spectre Variant 2'
* Mitigated according to the /sys interface:  YES  (Mitigation: Full generic retpoline, IBPB, IBRS_FW)
* Mitigation 1
  * Kernel is compiled with IBRS support:  YES 
* IBRS enabled and active:  YES  (for kernel and firmware code)
  * Kernel is compiled with IBPB support:  YES 
* IBPB enabled and active:  YES 
* Mitigation 2
  * Kernel has branch predictor hardening (arm):  NO 
  * Kernel compiled with retpoline option:  YES 
* Kernel compiled with a retpoline-aware compiler:  YES  (kernel reports full retpoline compilation)
&gt; STATUS:  NOT VULNERABLE  (Full retpoline + IBPB are mitigating the vulnerability)

CVE-2017-5754 [rogue data cache load] aka 'Meltdown' aka 'Variant 3'
* Mitigated according to the /sys interface:  YES  (Mitigation: PTI)
* Kernel supports Page Table Isolation (PTI):  YES 
  * PTI enabled and active:  YES 
  * Reduced performance impact of PTI:  YES  (CPU supports INVPCID, performance impact of PTI will be greatly reduced)
* Running as a Xen PV DomU:  NO 
&gt; STATUS:  NOT VULNERABLE  (Mitigation: PTI)

CVE-2018-3640 [rogue system register read] aka 'Variant 3a'
* CPU microcode mitigates the vulnerability:  NO 
&gt; STATUS:  VULNERABLE  (an up-to-date CPU microcode is needed to mitigate this vulnerability)

CVE-2018-3639 [speculative store bypass] aka 'Variant 4'
* Mitigated according to the /sys interface:  NO  (Vulnerable)
* Kernel supports speculation store bypass:  YES  (found in /proc/self/status)
&gt; STATUS:  VULNERABLE  (Your CPU doesn't support SSBD)

Need more detailed information about mitigation options? Use --explain
A false sense of security is worse than no security at all, see --disclaimer
2
user@host:~$ 
</code></pre>
<ul>
<li>Results after installing “intel-microcode”:</li>
</ul>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/2X/a/aae390a7b711b1e41dacfbaa50b533a20da8725e.png" data-download-href="//forums.whonix.org/uploads/default/aae390a7b711b1e41dacfbaa50b533a20da8725e" title="spectre1.png"><img src="../../../uploads/default/optimized/2X/a/aae390a7b711b1e41dacfbaa50b533a20da8725e_2_400x500.png" alt="spectre1" width="400" height="500" srcset="//forums.whonix.org/uploads/default/optimized/2X/a/aae390a7b711b1e41dacfbaa50b533a20da8725e_2_400x500.png, //forums.whonix.org/uploads/default/optimized/2X/a/aae390a7b711b1e41dacfbaa50b533a20da8725e_2_600x750.png 1.5x, //forums.whonix.org/uploads/default/optimized/2X/a/aae390a7b711b1e41dacfbaa50b533a20da8725e_2_800x1000.png 2x" data-small-upload="../../../uploads/default/optimized/2X/a/aae390a7b711b1e41dacfbaa50b533a20da8725e_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">spectre1.png</span><span class="informations">1230×965 123 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/2X/6/6a2ffc742b6d0e77a05e79f6a63ace7607c94ec4.png" data-download-href="//forums.whonix.org/uploads/default/6a2ffc742b6d0e77a05e79f6a63ace7607c94ec4" title="spectre2.png"><img src="../../../uploads/default/optimized/2X/6/6a2ffc742b6d0e77a05e79f6a63ace7607c94ec4_2_400x500.png" alt="spectre2" width="400" height="500" srcset="//forums.whonix.org/uploads/default/optimized/2X/6/6a2ffc742b6d0e77a05e79f6a63ace7607c94ec4_2_400x500.png, //forums.whonix.org/uploads/default/optimized/2X/6/6a2ffc742b6d0e77a05e79f6a63ace7607c94ec4_2_600x750.png 1.5x, //forums.whonix.org/uploads/default/optimized/2X/6/6a2ffc742b6d0e77a05e79f6a63ace7607c94ec4_2_800x1000.png 2x" data-small-upload="../../../uploads/default/optimized/2X/6/6a2ffc742b6d0e77a05e79f6a63ace7607c94ec4_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">spectre2.png</span><span class="informations">1239×968 123 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<pre><code>Welcome to Whonix!
https://www.whonix.org

The programs included with the Whonix GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Whonix GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law. Whonix is a derivative of Debian GNU/Linux.

Whonix is based on Tor. Whonix is produced independently from the
Tor (r) anonymity software and carries no guarantee from The Tor Project
about quality, suitability or anything else.

Whonix is experimental software by means of concept and design.
Do not rely on it for strong anonymity.

Type: "whonix" &lt;enter&gt; for help.
uwt INFO: Stream isolation for some applications enabled. uwt / torsocks will be automatically prepended to some commands. What is that? See:
uwt INFO: https://www.whonix.org/wiki/Stream_Isolation/Easy
user@host:~$ sudo apt-get install intel-microcode
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following additional packages will be installed:
  initramfs-tools initramfs-tools-core iucode-tool klibc-utils libklibc linux-base
The following NEW packages will be installed:
  initramfs-tools initramfs-tools-core intel-microcode iucode-tool klibc-utils libklibc linux-base
0 upgraded, 7 newly installed, 0 to remove and 0 not upgraded.
Need to get 1,561 kB of archives.
After this operation, 2,564 kB of additional disk space will be used.
Do you want to continue? [Y/n] y
Get:1 tor+http://vwakviie2ienjx6t.onion/debian stretch/main amd64 libklibc amd64 2.0.4-9 [52.6 kB]                  
Get:2 tor+http://sgvtcaew4bxjd7ln.onion stretch/updates/non-free amd64 intel-microcode amd64 3.20180703.2~deb9u1 [1,165 kB]
Get:3 tor+http://vwakviie2ienjx6t.onion/debian stretch/main amd64 klibc-utils amd64 2.0.4-9 [108 kB]
Get:4 tor+http://vwakviie2ienjx6t.onion/debian stretch/main amd64 initramfs-tools-core all 0.130 [97.0 kB]
Get:5 tor+http://vwakviie2ienjx6t.onion/debian stretch/main amd64 linux-base all 4.5 [19.1 kB]
Get:6 tor+http://vwakviie2ienjx6t.onion/debian stretch/main amd64 initramfs-tools all 0.130 [66.0 kB]
Get:7 tor+http://vwakviie2ienjx6t.onion/debian stretch/contrib amd64 iucode-tool amd64 2.1.1-1 [53.3 kB]
Fetched 1,561 kB in 7s (196 kB/s)                                                                                                                                                                                                                                              
Preconfiguring packages ...                                                                                                                                                                                                                                                     
Selecting previously unselected package libklibc.                                                                                                                                                                                                                               
(Reading database ... 80304 files and directories currently installed.)                                                                                                                                                                                                         
Preparing to unpack .../0-libklibc_2.0.4-9_amd64.deb ...                                                                                                                                                                                                                        
Unpacking libklibc (2.0.4-9) ...                                                                                                                                                                                                                                                
Selecting previously unselected package klibc-utils.                                                                                                                                                                                                                            
Preparing to unpack .../1-klibc-utils_2.0.4-9_amd64.deb ...                                                                                                                                                                                                                     
Adding 'diversion of /usr/share/initramfs-tools/hooks/klibc to /usr/share/initramfs-tools/hooks/klibc^i-t by klibc-utils'                                                                                                                                                       
Unpacking klibc-utils (2.0.4-9) ...                                                                                                                                                                                                                                             
Selecting previously unselected package initramfs-tools-core.                                                                                                                                                                                                                   
Preparing to unpack .../2-initramfs-tools-core_0.130_all.deb ...                                                                                                                                                                                                                
Unpacking initramfs-tools-core (0.130) ...                                                                                                                                                                                                                                      
Selecting previously unselected package linux-base.                                                                                                                                                                                                                             
Preparing to unpack .../3-linux-base_4.5_all.deb ...                                                                                                                                                                                                                            
Unpacking linux-base (4.5) ...                                                                                                                                                                                                                                                  
Selecting previously unselected package initramfs-tools.                                                                                                                                                                                                                        
Preparing to unpack .../4-initramfs-tools_0.130_all.deb ...                                                                                                                                                                                                                     
Unpacking initramfs-tools (0.130) ...                                                                                                                                                                                                                                           
Selecting previously unselected package iucode-tool.                                                                                                                                                                                                                            
Preparing to unpack .../5-iucode-tool_2.1.1-1_amd64.deb ...                                                                                                                                                                                                                     
Unpacking iucode-tool (2.1.1-1) ...                                                                                                                                                                                                                                             
Selecting previously unselected package intel-microcode.                                                                                                                                                                                                                        
Preparing to unpack .../6-intel-microcode_3.20180703.2~deb9u1_amd64.deb ...                                                                                                                                                                                                     
Unpacking intel-microcode (3.20180703.2~deb9u1) ...                                                                                                                                                                                                                             
Setting up libklibc (2.0.4-9) ...                                                                                                                                                                                                                                               
Setting up linux-base (4.5) ...                                                                                                                                                                                                                                                 
Setting up iucode-tool (2.1.1-1) ...                                                                                                                                                                                                                                            
Processing triggers for man-db (2.7.6.1-2) ...                                                                                                                                                                                                                                  
Setting up intel-microcode (3.20180703.2~deb9u1) ...
intel-microcode: initramfs support missing
Setting up klibc-utils (2.0.4-9) ...
Setting up initramfs-tools-core (0.130) ...
Setting up initramfs-tools (0.130) ...
update-initramfs: deferring update (trigger activated)
Processing triggers for initramfs-tools (0.130) ...
user@host:~$ sudo spectre-meltdown-checker --paranoid ; echo $?
Spectre and Meltdown mitigation detection tool v0.39

Checking for vulnerabilities on current system
Kernel is Linux 4.14.57-1.pvops.qubes.x86_64 #1 SMP Mon Jul 23 16:28:54 UTC 2018 x86_64
CPU is Intel(R) Core(TM) i7-4710HQ CPU @ 2.50GHz
We're missing some kernel info (see -v), accuracy might be reduced

Hardware check
* Hardware support (CPU microcode) for mitigation techniques
  * Indirect Branch Restricted Speculation (IBRS)
* SPEC_CTRL MSR is available:  YES 
* CPU indicates IBRS capability:  YES  (SPEC_CTRL feature bit)
  * Indirect Branch Prediction Barrier (IBPB)
* PRED_CMD MSR is available:  YES 
* CPU indicates IBPB capability:  YES  (SPEC_CTRL feature bit)
  * Single Thread Indirect Branch Predictors (STIBP)
* SPEC_CTRL MSR is available:  YES 
* CPU indicates STIBP capability:  YES  (Intel STIBP feature bit)
  * Speculative Store Bypass Disable (SSBD)
* CPU indicates SSBD capability:  NO 
  * Enhanced IBRS (IBRS_ALL)
* CPU indicates ARCH_CAPABILITIES MSR availability:  NO 
* ARCH_CAPABILITIES MSR advertises IBRS_ALL capability:  NO 
  * CPU explicitly indicates not being vulnerable to Meltdown (RDCL_NO):  NO 
  * CPU explicitly indicates not being vulnerable to Variant 4 (SSB_NO):  NO 
  * Hypervisor indicates host CPU might be vulnerable to RSB underflow (RSBA):  NO 
  * CPU microcode is known to cause stability problems:  NO  (model 0x3c family 0x6 stepping 0x3 ucode 0x24 cpuid 0x306c3)
* CPU vulnerability to the speculative execution attack variants
  * Vulnerable to Variant 1:  YES 
  * Vulnerable to Variant 2:  YES 
  * Vulnerable to Variant 3:  YES 
  * Vulnerable to Variant 3a:  YES 
  * Vulnerable to Variant 4:  YES 

CVE-2017-5753 [bounds check bypass] aka 'Spectre Variant 1'
* Mitigated according to the /sys interface:  YES  (Mitigation: __user pointer sanitization)
* Kernel has array_index_mask_nospec:  UNKNOWN  (couldn't check (couldn't find your kernel image in /boot, if you used netboot, this is normal))
* Kernel has the Red Hat/Ubuntu patch:  UNKNOWN  (couldn't check (couldn't find your kernel image in /boot, if you used netboot, this is normal))
* Kernel has mask_nospec64 (arm64):  UNKNOWN  (couldn't check (couldn't find your kernel image in /boot, if you used netboot, this is normal))
* Checking count of LFENCE instructions following a jump in kernel...  UNKNOWN  (couldn't check (couldn't find your kernel image in /boot, if you used netboot, this is normal))
&gt; STATUS:  NOT VULNERABLE  (Mitigation: __user pointer sanitization)

CVE-2017-5715 [branch target injection] aka 'Spectre Variant 2'
* Mitigated according to the /sys interface:  YES  (Mitigation: Full generic retpoline, IBPB, IBRS_FW)
* Mitigation 1
  * Kernel is compiled with IBRS support:  YES 
* IBRS enabled and active:  YES  (for kernel and firmware code)
  * Kernel is compiled with IBPB support:  YES 
* IBPB enabled and active:  YES 
* Mitigation 2
  * Kernel has branch predictor hardening (arm):  NO 
  * Kernel compiled with retpoline option:  YES 
* Kernel compiled with a retpoline-aware compiler:  YES  (kernel reports full retpoline compilation)
&gt; STATUS:  NOT VULNERABLE  (Full retpoline + IBPB are mitigating the vulnerability)

CVE-2017-5754 [rogue data cache load] aka 'Meltdown' aka 'Variant 3'
* Mitigated according to the /sys interface:  YES  (Mitigation: PTI)
* Kernel supports Page Table Isolation (PTI):  YES 
  * PTI enabled and active:  YES 
  * Reduced performance impact of PTI:  YES  (CPU supports INVPCID, performance impact of PTI will be greatly reduced)
* Running as a Xen PV DomU:  NO 
&gt; STATUS:  NOT VULNERABLE  (Mitigation: PTI)

CVE-2018-3640 [rogue system register read] aka 'Variant 3a'
* CPU microcode mitigates the vulnerability:  NO 
&gt; STATUS:  VULNERABLE  (an up-to-date CPU microcode is needed to mitigate this vulnerability)

CVE-2018-3639 [speculative store bypass] aka 'Variant 4'
* Mitigated according to the /sys interface:  NO  (Vulnerable)
* Kernel supports speculation store bypass:  YES  (found in /proc/self/status)
&gt; STATUS:  VULNERABLE  (Your CPU doesn't support SSBD)

Need more detailed information about mitigation options? Use --explain
A false sense of security is worse than no security at all, see --disclaimer
2
user@host:~$
</code></pre>
<ul>
<li>Conclusion:</li>
</ul>
<p>It has <strong>Zero</strong> effect.</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-28T12:38:02Z' class='post-time'>
                August 28, 2018, 12:38pm
              </time>
              <meta itemprop='dateModified' content='2018-08-28T12:38:02Z'>
          <span itemprop='position'>#27</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I thought it only matters on the host OS?</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/TNT_BOM_BOM'><span itemprop='name'>TNT_BOM_BOM</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-28T12:43:14Z' class='post-time'>
                August 28, 2018, 12:43pm
              </time>
              <meta itemprop='dateModified' content='2018-08-28T12:43:14Z'>
          <span itemprop='position'>#28</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>yeah thats why its useless to add it inside whonix and thats what im saying. whonix has nothing to do with this vulnerability at all. adding non-free package should be something unquestionable and the answer = always denial.</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-28T12:48:04Z' class='post-time'>
                August 28, 2018, 12:48pm
              </time>
              <meta itemprop='dateModified' content='2018-08-28T12:48:04Z'>
          <span itemprop='position'>#29</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>We fixed the docs (pending edits) - my mistake. Does nothing inside the VM.</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-28T16:05:17Z' class='post-time'>
                August 28, 2018,  4:05pm
              </time>
              <meta itemprop='dateModified' content='2018-08-28T16:05:17Z'>
          <span itemprop='position'>#30</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>TNT BOM BOM:</p>
<blockquote>
<p>package not installed in our system = so no backdoor.</p>
<p>for the vulnerability affect, whether we have it or not it will not defend it unless the host support that like Qubes or plain Debian …etc.</p>
</blockquote>
<p>We might not need the microcode packages inside the VM. I am not totally sure about it yet. Still researching. However, we might have to switch some settings in VirtualBox (As mentined in my post earlier in this thread <a href="22.html">Whonix vulerable due to missing processor microcode packages?</a>) and perhaps other virtualizers. In other words, there could be vulnerable VM settings. Thanks for bringing this to attention!</p>
<blockquote>
<p>Also if this is a critial issue for all Distros , then Debian for sure will search away to add this package inside their main repo.</p>
</blockquote>
<p>They will never manage to do this. Not anytime soon. There is no Libre Software processor microcode project as far as I know since processor vendors are non-cooperative, this requires reverse engineering, and for processor microcode this is one among the most difficult tasks.</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">

            <link itemprop="image" href="../../../uploads/default/original/2X/7/770a15f475a1de4a6ba4d68ffb96bd85c7274aa0.jpg">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-28T16:28:17Z' class='post-time'>
                August 28, 2018,  4:28pm
              </time>
              <meta itemprop='dateModified' content='2018-08-28T16:28:17Z'>
          <span itemprop='position'>#31</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Awesome, thanks for collecting the output, that saved me some time reporting a Qubes issue I was going to report.</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/4262" target="_blank" rel="nofollow noopener">github.com/QubesOS/qubes-issues</a>
  </header>
  <article class="onebox-body">
    <a href="../../../../external.html?link=https://github.com/adrelanos" rel="nofollow noopener">
<img src="../../../uploads/default/original/2X/7/770a15f475a1de4a6ba4d68ffb96bd85c7274aa0.jpg" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/4262" target="_blank" rel="nofollow noopener">Issue: spectre-meltdown-checker saying vulnerable inside Debian based Qubes VMs</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/4262" target="_blank" rel="nofollow noopener">2018-08-28</a>
	</div>
	<div class="user">
	closed by <a href="../../../../external.html?link=https://github.com/marmarek" target="_blank" rel="nofollow noopener">marmarek</a>
	on <a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/4262" target="_blank" rel="nofollow noopener">2018-09-02</a>
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Qubes OS version:
R4
Affected component(s):
probably any Debian based TemplateVM (debian-9 tested by me), Whonix 14 (tested by me)
not affected: Fedora

Steps to reproduce...</pre>

<div class="labels">
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">C: Debian/Ubuntu</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">resolved</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">security</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">task</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../5739.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-28T23:11:26Z' class='post-time'>
                August 28, 2018, 11:11pm
              </time>
              <meta itemprop='dateModified' content='2018-08-28T23:11:26Z'>
          <span itemprop='position'>#32</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="22" data-topic="5739">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Assumption is too quick here. Virtualizers are very different. KVM is inside Linux kernel and Qubes (Xen) is a microkernel. A good pointer for research very much so indeed.</p>
</blockquote>
</aside>
<p>True and your documentation finds indicate that this is indeed the case. VBox lacks these by default it seems.</p>
<hr>
<p>Test Conditions: KVM. Microcode installed on host. spectre-meltdown-checker used. Variable tested is cpu passthrough  to guest and without.</p>
<p>Summary:<br>
Guests better off using CPU passthrough as far as KVM is concerned.</p>
<hr>
<p>HOST:</p>
<p>‘Spectre Variant 1’ STATUS:  NOT VULNERABLE<br>
‘Spectre Variant 2’ STATUS:  VULNERABLE<br>
‘Spectre Variant 3’ STATUS:  NOT VULNERABLE<br>
‘Spectre Variant 3a’ STATUS:  NOT VULNERABLE<br>
‘Spectre Variant 4’ STATUS:  NOT VULNERABLE</p>
<p>GUEST PASSTHROUGH:</p>
<p>‘Spectre Variant 1’ STATUS:  NOT VULNERABLE<br>
‘Spectre Variant 2’ STATUS:  VULNERABLE<br>
‘Spectre Variant 3’ STATUS:  NOT VULNERABLE<br>
‘Spectre Variant 3a’ STATUS:  NOT VULNERABLE<br>
‘Spectre Variant 4’ STATUS:  NOT VULNERABLE</p>
<p>GUEST WITHOUT PASSTHROUGH:</p>
<p>‘Spectre Variant 1’ STATUS:  NOT VULNERABLE<br>
‘Spectre Variant 2’ STATUS:  VULNERABLE<br>
‘Spectre Variant 3’ STATUS:  NOT VULNERABLE<br>
‘Spectre Variant 3a’ STATUS:  NOT VULNERABLE<br>
‘Spectre Variant 4’ STATUS:  VULNERABLE</p>
        </div>

        <meta itemprop='headline' content='Whonix vulerable due to missing processor microcode packages? spectre / meltdown / retpoline / L1 Terminal Fault (L1TF)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../57394658.html?page=2">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
