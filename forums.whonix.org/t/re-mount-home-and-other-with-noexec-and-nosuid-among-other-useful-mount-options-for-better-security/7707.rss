<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
    <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707</link>
    <description>Could we gain security by mounting home with `noexec` (and `nosuid` [among other useful mount options])?

How does `noexec` help if one can use

* `bash ./script`
* `sh ./script`
* `python ./script`

etc.?

EDIT: `bash ./script` etc. does not require `./script` being executable. It will work on any file even when setting `chmod -x ./script` beforehand.

ticket: [lock down interpreters (interpreter lock)](https://phabricator.whonix.org/T941)

`noexec` might make most sense when combined with all the other stuff form `Related` below tin this post?

lynis even recommended to prevent access to compilers such as gcc.

EDIT:
**Keep shared folder vs `noexec` in mind too.**

----

Tor Browser is in user home folder. (Details of this mess: https://www.whonix.org/wiki/Tor_Browser/Advanced_Users#Tor_Browser_Update:_Technical_Details) And needs some files being executable.

So it may not be possible to mount home with noexec for all VMs. But let&#39;s overlook Tor Browser for a moment. Maybe a solution could be found. (Such as a wrapper.) Edit: created https://forums.whonix.org/t/where-should-the-tor-browser-folder-be-placed/7787 for it.

Either way this could at least be an easy opt-in with most things shipped by default but not enabled by default if not a good idea.

----

Related:

* https://forums.whonix.org/t/restrict-root-access/7658/15
* https://forums.whonix.org/t/disable-suid-binaries/7706/5
* https://forums.whonix.org/t/walled-garden-firewall-whitelisting-application-whitelisting-sudo-lockdown-superuser-mode-protected-mode/5725
* https://forums.whonix.org/t/where-should-the-tor-browser-folder-be-placed/7787
* https://forums.whonix.org/t/multiple-boot-modes-for-better-security-persistent-root-persistent-noroot-live-root-live-noroot/7708

----

I also had in mind various boot modes:

* persistent + root
* persistent + noroot
* live + root
* live + noroot

Not all might make sense.

Or think of `noroot` has &quot;hardening&quot; where we can do stuff like noexec, nosuid, no root/sudo possible at all.

&lt;s&gt;But various boot modes is best discussed in a separate thread. Please quote me on this in a different thread. Just wanted to briefly mention the idea here so that something that isn&#39;t great as a default for everyone all the time must not necessarily block alternative configurations / boot options.&lt;/s&gt; Created:

https://forums.whonix.org/t/multiple-boot-modes-for-better-security-persistent-root-persistent-noroot-live-root-live-noroot/7708</description>
    <language>en</language>
    <lastBuildDate>Fri, 16 Oct 2020 19:27:36 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>I tried that too and it didn’t seem to change anything.</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/68">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/68</link>
        <pubDate>Fri, 16 Oct 2020 19:27:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-68</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Just coming to mind now. <code>/etc/initramfs-tools/scripts/init-bottom/sysctl-initramfs</code> is using a proper initramfs header.</p>
<pre><code>PREREQ=""
prereqs()
{
        echo "$PREREQ"
}
case $1 in
prereqs)
        prereqs
        exit 0
        ;;
esac
</code></pre>
<p>remount-secure did not do that yet. Likely that is also a source of issues.</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/67">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/67</link>
        <pubDate>Fri, 16 Oct 2020 19:10:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-67</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>Got them all:</p>
<pre><code class="lang-auto">grub&gt; root=(hd0,msdos1)
grub&gt; linux /boot/vmlinuz-4.19.0-11-amd64
grub&gt; initrd /boot/initrd.img-4.19.0-11-amd64
grub&gt; boot

(initramfs) echo "BOOT_IMAGE=/boot/vmlinuz-$(uname -r) root=/dev/vda1" &gt; /cmdline-fake
(initramfs) mount -o bind /cmdline-fake /proc/cmdline
(initramfs) sh /scripts/functions
(initramfs) mount -o remount,nosuid,nodev,noexec /run
(initramfs) /init
(initramfs) chroot /root

root@(none) mount -o bind,nosuid,noexec,nodev /home /home
root@(none) mount -o bind,nosuid,noexec,nodev /tmp /tmp
root@(none) mkdir /dev/shm
root@(none) mount -t tmpfs -o nosuid,noexec,nodev /dev/shm /dev/shm
root@(none) exit

(initramfs) exit
</code></pre>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/66">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/66</link>
        <pubDate>Fri, 16 Oct 2020 18:59:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-66</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>Remounting <code>/run</code> from initramfs definitely works.</p>
<pre><code class="lang-auto">grub&gt; root=(hd0,msdos1)
grub&gt; linux /boot/vmlinuz-4.19.0-11-amd64
grub&gt; initrd /boot/initrd.img-4.19.0-11-amd64
grub&gt; boot

(initramfs) echo "BOOT_IMAGE=/boot/vmlinuz-$(uname -r) root=/dev/vda1" &gt; /cmdline-fake
(initramfs) mount -o bind /cmdline-fake /proc/cmdline
(initramfs) sh /scripts/functions
(initramfs) mount -o remount,nosuid,nodev,noexec /run
(initramfs) /init
(initramfs) exit
</code></pre>
<p><code>/tmp</code> doesn’t seem to work however (probably being overwritten by systemd or something).</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/65">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/65</link>
        <pubDate>Fri, 16 Oct 2020 18:46:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-65</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>Figured out how to get an initramfs shell from the GRUB command line:</p>
<pre><code class="lang-auto">root=(hd0,msdos1)
linux /boot/vmlinuz-4.19.0-11-amd64
initrd /boot/initrd.img-4.19.0-11-amd64
boot
</code></pre>
<p>Will investigate the remount-secure issue now.</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/64">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/64</link>
        <pubDate>Fri, 16 Oct 2020 18:15:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-64</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>That doesn’t work either. It just makes it hang during boot.</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/63">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/63</link>
        <pubDate>Fri, 16 Oct 2020 18:00:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-63</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Could you try a “proper” initramfs shell instead please?</p>
<p>From <a href="https://manpages.debian.org/buster/initramfs-tools-core/initramfs-tools.7.en.html">https://manpages.debian.org/buster/initramfs-tools-core/initramfs-tools.7.en.html</a> …</p>
<p>Kernel parameter <code>break=bottom</code> might give a initramfs rescue shell which could be used for experimentation, i.e. manually running <code>mount</code> commands.</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/62">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/62</link>
        <pubDate>Fri, 16 Oct 2020 17:53:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-62</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>That doesn’t seem to work. I can’t get a shell in initramfs. Nothing happens.</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/61">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/61</link>
        <pubDate>Fri, 16 Oct 2020 17:50:40 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-61</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Could very well be the reason. Although I was hoping that’s a non-issue:</p>
<aside class="quote no-group" data-username="Patrick" data-post="53" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Can probably stay a <code>bash</code> script. No need to port to <code>sh</code> . <code>/usr/share/initramfs-tools/hooks/resume</code> also uses <code>bash</code> .</p>
</blockquote>
</aside>
<p>Could either port to <code>sh</code> or make <code>bash</code> work inside initramfs if that is possible.</p>
<p>Perhaps try this to easily get a shell:</p>
<pre><code class="lang-auto">#!/bin/sh
echo remount-secure
sleep 10
sh
sleep 10
</code></pre>
<p>The script could run <code>mount</code> before and after running any actual <code>mount</code> commands to see if it actually has any effect. And the <code>sleep 10</code>  (or more) at the end to have a fair chance to read what’s happening. Perhaps the script is functional but then systemd or something is undoing it.</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/60">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/60</link>
        <pubDate>Fri, 16 Oct 2020 15:30:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-60</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="madaidan" data-post="58" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>I tried simply writing to a file to check and it didn’t work.</p>
</blockquote>
</aside>
<p>This worked with <code>/bin/sh</code> although the mounts still don’t.</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/59">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/59</link>
        <pubDate>Fri, 16 Oct 2020 15:28:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-59</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>Seems like an execution issue. I tried simply writing to a file to check and it didn’t work. Could be because sysctl-initramfs uses <code>/bin/sh</code> whereas remount-secure uses <code>/bin/bash</code>?</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/58">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/58</link>
        <pubDate>Fri, 16 Oct 2020 15:25:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-58</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>The actual script task, mounting might be more complicated indeed but at least the script should equally be executed? Is it a script execution issue or script functionality issue?</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/57">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/57</link>
        <pubDate>Fri, 16 Oct 2020 15:13:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-57</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="55" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Was it set to <code>chmod +x</code> ?</p>
</blockquote>
</aside>
<p>Yes.</p>
<aside class="quote no-group" data-username="Patrick" data-post="55" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Then how did you implement<br>
<code>/etc/initramfs-tools/scripts/init-bottom/sysctl-initramfs</code> which is<br>
kinda similar (as far as starts during initramfs)? Why would<br>
sysctl-initramfs work but remote-secure not?</p>
</blockquote>
</aside>
<p>Dunno. sysctl-initramfs is just writing to a few files. This is more complicated.</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/56">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/56</link>
        <pubDate>Fri, 16 Oct 2020 15:10:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-56</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>madaidan via Whonix Forum:</p>
<blockquote>
<p>That doesn’t work. The mount options are only set when running <code>update-initramfs</code>. Nothing happens during boot.</p>
</blockquote>
<p>Strange. Was it set to <code>chmod +x</code>?</p>
<p>Then how did you implement<br>
<code>/etc/initramfs-tools/scripts/init-bottom/sysctl-initramfs</code> which is<br>
kinda similar (as far as starts during initramfs)? Why would<br>
sysctl-initramfs work but remote-secure not?</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/55">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/55</link>
        <pubDate>Thu, 15 Oct 2020 12:01:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-55</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>That doesn’t work. The mount options are only set when running <code>update-initramfs</code>. Nothing happens during boot.</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/54">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/54</link>
        <pubDate>Wed, 14 Oct 2020 17:52:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-54</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>New approach:</p>
<ul>
<li>delete security-misc <code>/lib/systemd/system/remount-secure.service</code>
</li>
<li>move security-misc <code>/usr/lib/security-misc/remount-secure</code> to <code>/etc/initramfs-tools/scripts/init-bottom/30_remount-secure</code>
</li>
</ul>
<hr>
<p>Details:</p>
<p>Script <code>/usr/lib/security-misc/remount-secure</code>  was probably already good enough - the only missing part is moving it to initramfs to avoid race conditions.</p>
<p>initramfs also uses contents from folder <code>/usr/share/initramfs-tools/scripts/init-bottom/</code> (and <code>/usr/share/initramfs-tools/</code>).</p>
<p>File name <code>30_</code> prepended because we want this to be run after <code>/usr/share/initramfs-tools/scripts/init-bottom/udev</code>.</p>
<p>Can probably stay a <code>bash</code> script. No need to port to <code>sh</code>. <code>/usr/share/initramfs-tools/hooks/resume</code> also uses <code>bash</code>.</p>
<blockquote>
<p>if [ -e /etc/remount-disable ] || [ -e /usr/local/etc/remount-disable ]; then</p>
</blockquote>
<p>Does this need <code>${rootmnt}</code>? Likely not because at initramfs stage <code>init-bottom</code>, initramfs already moved everything to its final place?</p>
<p>Kernel parameter <code>break=bottom</code> might give a initramfs rescue shell which could be used for experimentation, i.e. manually running <code>mount</code> commands.</p>
<p>Might also be possible to add command <code>bash</code> followed to <code>/etc/initramfs-tools/scripts/init-bottom/30_remount-secure</code> to easily get shell for experimentation.</p>
<p>Adding <code>sleep 10</code> or so during development to the end of the script might help to easily see what the script is doing, to have sufficient time to read its debug output.</p>
<p>Could you try please? <a class="mention" href="http://forums.whonix.org/u/madaidan">@madaidan</a></p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/53">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/53</link>
        <pubDate>Wed, 14 Oct 2020 12:20:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-53</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote quote-modified" data-post="1" data-topic="10427">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar">
    <a href="https://forums.whonix.org/t/dealing-with-fs-timestamps/10427">Dealing with FS Timestamps</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/development/8"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    This thread is for researching ways/tools to workaround the creation filestamp problem which can leak a lot of info about a files origin and whistelblowing timeline: 
Jeremy Rand: 

In some cases, opening and resaving a file can help, but that will only set the “modified” time field. A lot of filesystems also store a “created” time field, which will not be affected by opening/saving. Also, some file formats will actually leak additional info about what software opened them if you open/resave the…
  </blockquote>
</aside>

          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/52">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/52</link>
        <pubDate>Tue, 13 Oct 2020 13:37:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-52</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>I found a rationale for /etc mounted with nodev,nosuid as well as /var. This is because some folders in /etc or /var such as /var/www are owned by other users than root. In these cases the owner of these folders shouldn’t be able to create devices or suid binaries there.</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/51">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/51</link>
        <pubDate>Thu, 12 Mar 2020 07:37:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-51</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="madaidan" data-post="48" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>There’s not really any legitimate reason of having devices/suid in /etc so why allow it at all?</p>
</blockquote>
</aside>
<p>Brevity.</p>
<aside class="quote no-group" data-username="madaidan" data-post="48" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Not that I know of but we should aim to be <em>proactive</em> i.e. using principle of least privilege to prevent potential future vulnerabilities rather than <em>reactive</em> i.e. responding to a known vulnerability.</p>
</blockquote>
</aside>
<p>It’s good to be innovative. Such as in case of Whonix shipping <a href="https://github.com/Whonix/kloak">kloak</a> by default is a win. That threat model has been demonstrated through a proof of concept already. Proactive yes, but in this case of remounting /etc with nosuid the benefit of the change doesn’t have a strong rationale.</p>
<p>There’s a huge amount of things which won’t make sense from our point of view. For example there is the <a href="https://packages.debian.org/buster/hello">hello</a> package which most users won’t know and won’t install. I am using it as an example here. No need to pick on that particular maintainer of that Debian package. Why allow installation of that package? What if that maintainer turned evil and somehow included a backdoor in the hello package? To prevent such a backdoor from doing damage, there could be an apt wrapper that prevents installation of that and other packages which most users will probably never need. I am not supposing to invent an apt wrapper for this hypothetical scenario. It would be worse having that code than having that risk.</p>
<p>The superior reason from preventing untrusted root writing anything malicious /etc is apparmor-profile-everything. Once that’s done, there is no need for an additional layer for preventive of suid creation in /etc. Many goals can be implemented in multiple ways but I don’t think we should implement every goal using duplicate implementations.</p>
<p>For example, remount-secure all inside initramfs (supposing that is possible) would be fine. Then that shouldn’t be fully duplicated with remount-secure again using systemd.</p>
<aside class="quote no-group" data-username="madaidan" data-post="48" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Root can leave unknown suid/devices lying around.</p>
</blockquote>
</aside>
<p>I cannot imagine any accident how any system administrator would create an suid binary and store it in /etc. And if a system administrator chooses for some reason to but a suid binary there then there’s no need to interfere with that choice.</p>
<p>It’s one valid strategy to optimize is to add safeguards for every cases no matter how likely.  However, also <a href="https://forums.whonix.org/t/focus-on-low-effort-maintainability/9067" class="inline-onebox">Focus on low-effort maintainability</a> is important which includes keeping the amount of lines of code small or even reducing it (i have some plans such as “tb-updater -&gt; binaries-freedom”…). By keeping the code size small it’s also more contributor friendly since more easy to understand, easier to review.</p>
<aside class="quote no-group" data-username="madaidan" data-post="49" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p><a href="https://seifried.org/lasg/installation/">https://seifried.org/lasg/installation/</a> recommends it</p>
</blockquote>
</aside>
<p>It’s in the table there but there’s no rationale for it either.</p>
<hr>
<p>Keeping notes here now:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Dev/remount-secure" target="_blank" title="05:46PM - 11 March 2020">whonix.org – 11 Mar 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:129/86;"><img src="https://www.whonix.org/w/images/thumb/7/7b/Mountoptions.jpg/470px-Mountoptions.jpg" class="thumbnail" width="129" height="86"></div>

<h3><a href="https://www.whonix.org/wiki/Dev/remount-secure" target="_blank">Remount Secure</a></h3>

<p>Secure Mount Options for better Security Hardening</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<hr>
<p>I not not sure if <a href="https://github.com/QubesOS/qubes-issues/issues/5263#issuecomment-597822596">https://github.com/QubesOS/qubes-issues/issues/5263#issuecomment-597822596</a> is indicating that flatpak and snap also break when using nosuid on /home.</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/50">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/50</link>
        <pubDate>Wed, 11 Mar 2020 21:29:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-50</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="47" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I haven’t seen <code>/etc</code> suggested to be mounted with <code>nosuid</code> , <code>nodev</code> anywhere.</p>
</blockquote>
</aside>
<p><a href="https://seifried.org/lasg/installation/">https://seifried.org/lasg/installation/</a> recommends it</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/49">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/49</link>
        <pubDate>Wed, 11 Mar 2020 18:18:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-49</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="47" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Maybe the argument of principle of least privilege?</p>
</blockquote>
</aside>
<p>Yes.</p>
<aside class="quote no-group" data-username="Patrick" data-post="47" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Well, non-root users cannot write to these folders such as <code>/etc</code> by default anyhow. Only root can.</p>
</blockquote>
</aside>
<p>Root can leave unknown suid/devices lying around.</p>
<aside class="quote no-group" data-username="Patrick" data-post="47" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>And compromised root could also change mount options.</p>
</blockquote>
</aside>
<p>Not with apparmor-profile-everything.</p>
<aside class="quote no-group" data-username="Patrick" data-post="47" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Was there ever any vulnerability that would have been prevented by such mount options on such folders?</p>
</blockquote>
</aside>
<p>Not that I know of but we should aim to be <em>proactive</em> i.e. using principle of least privilege to prevent potential future vulnerabilities rather than <em>reactive</em> i.e. responding to a known vulnerability.</p>
<p>There’s not really any legitimate reason of having devices/suid in /etc so why allow it at all?</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/48">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/48</link>
        <pubDate>Wed, 11 Mar 2020 17:57:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-48</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Quote <a href="https://docs.clip-os.org/toolkit/setup.html">https://docs.clip-os.org/toolkit/setup.html</a></p>
<blockquote>
<p>Make sure to work in a filesystem without any restricted features such as noexec or nodev as it will cause undefined issues throughout the building process of some parts of the CLIP OS images.</p>
</blockquote>
<hr>
<p>The rationale of <code>nosuid</code> in <code>/home</code>, <code>/run</code>, <code>/dev/shm</code> and <code>/tmp</code> (all partially user writable) is somewhat clear. Perhaps <code>nosuid</code> by extension too (lower attack surface).</p>
<p>But what’s the rationale of mounting <code>/etc</code> and some other folders with <code>nodev</code>? CLIP OS doesn’t do that. Out commented by their default. I haven’t seen <code>/etc</code> suggested to be mounted with <code>nosuid</code>, <code>nodev</code> anywhere.</p>
<p>Maybe the argument of principle of least privilege? Well, non-root users cannot write to these folders such as <code>/etc</code> by default anyhow. Only root can. And compromised root could also change mount options. Therefore I don’t see any advantage of mounting <code>/etc</code> with <code>nosuid</code>, <code>nodev</code>. Root can always create a lets say suid file in some folder (even <code>/</code>). The only way to prevent that would be untrusted root / appamor-profile-everything.</p>
<p>Maybe a useful question to ask…? Was there ever any vulnerability that would have been prevented by such mount options on such folders?</p>
<p>If not recommended anywhere / not helpful in any threat model, then better keep things minimal.</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/47">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/47</link>
        <pubDate>Wed, 11 Mar 2020 17:28:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-47</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Quote <a href="https://github.com/QubesOS/qubes-issues/issues/5263#issuecomment-597744172">https://github.com/QubesOS/qubes-issues/issues/5263#issuecomment-597744172</a></p>
<blockquote>
<p><code>nodev</code> on /home breaks qubes-builder (specifically: <code>/dev/null</code> and probably other devices inside chroot). I wonder what else…</p>
</blockquote>
<p>Probably also breaks Whonix build script which uses chroot in home and cowbuilder which uses chroot in /var.</p>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/46">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/46</link>
        <pubDate>Wed, 11 Mar 2020 16:58:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-46</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="madaidan" data-post="39" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p><a href="https://github.com/Whonix/security-misc/pull/69">Use systemd .mount files for stricter mount options and remove remount-secure</a></p>
</blockquote>
</aside>
<p>In case you’re wondering why this is not merged yet…</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="42" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>About /run…</p>
<p>Older quote <a href="https://www.freedesktop.org/wiki/Software/systemd/InitrdInterface/:">https://www.freedesktop.org/wiki/Software/systemd/InitrdInterface/:</a></p>
<blockquote>
<ul>
<li>The initrd should mount /run as a tmpfs and pass it pre-mounted when jumping into the main system when executing systemd. The mount options should be mode=755,nodev</li>
</ul>
</blockquote>
<p>Newer quote <a href="https://systemd.io/INITRD_INTERFACE/">https://systemd.io/INITRD_INTERFACE/</a></p>
<blockquote>
<ul>
<li>The initrd should mount <code>/run/</code> as a tmpfs and pass it pre-mounted when jumping into the main system when executing systemd. The mount options should be <code>mode=755,nodev,nosuid,strictatime</code> .</li>
</ul>
</blockquote>
<p>This speaks for a initrd based implementation.</p>
<blockquote>
<p>Now we just need to figure out how to get the /tmp, /dev/shm and /run restrictions to work.</p>
</blockquote>
<p>If stuck, could you please ask on systemd mailing list?</p>
<p>Also I guess it would be better to have only 1 place to implement mount options. Either do everything inside initramfs or do everything using systemd units. Not two places to implement. I.e. not initramfs + systemd units. Reason: lower complexity.</p>
</blockquote>
</aside>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/45">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/45</link>
        <pubDate>Wed, 11 Mar 2020 13:05:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-45</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
      <item>
        <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="42" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Using systemd unit files it may be possible to implement this by requiring kernel boot parameter <code>remount-secure</code> being set by extending the <code>[Unit]</code> section of the systemd unit file.</p>
</blockquote>
</aside>
<p>Checking for /etc/remount-secure would be a better implementation:</p>
<pre><code>ConditionPathExists=/etc/remount-secure
</code></pre>
<aside class="quote no-group" data-username="Patrick" data-post="42" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I.e. two systemd units. <code>home-exec.mount</code> and <code>home-noexec.mount</code> and which one is used/ignored depending on <code>ConditionPathExists</code> .</p>
</blockquote>
</aside>
<p>Won’t work:</p>
<pre><code>home-noexec.mount: Where= setting doesn't match unit name. Refusing.</code></pre>
          <p><a href="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/44">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707/44</link>
        <pubDate>Sun, 08 Mar 2020 15:38:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-7707-44</guid>
        <source url="http://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.rss">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</source>
      </item>
  </channel>
</rss>
