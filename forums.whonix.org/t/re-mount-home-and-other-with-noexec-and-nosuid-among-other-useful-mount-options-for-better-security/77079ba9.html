<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security? - Development - Whonix Forum</title>
    <meta name="description" content="Could we gain security by mounting home with noexec (and nosuid [among other useful mount options])? 
How does noexec help if one can use 

bash ./script
sh ./script
python ./script

etc.? 
EDIT: bash ./script etc. does &amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="77079ba9.html?page=3" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?&#39;" href="7707.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707?page=3" />
<meta name="twitter:url" content="https://forums.whonix.org/t/re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707?page=3" />
<meta property="og:title" content="(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?" />
<meta name="twitter:title" content="(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?" />
<meta property="og:description" content="Options=bind needed? See systemd mailing list. They were asking why use mount bind." />
<meta name="twitter:description" content="Options=bind needed? See systemd mailing list. They were asking why use mount bind." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="12 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="73 ❤" />
<meta property="article:published_time" content="2020-03-08T02:27:30+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="77074658.html?page=2">
        <link rel="next" href="7707fdb0.html?page=4">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="7707.html">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/component_security.html' class='discourse-tag' rel="tag">component_security</a>, 
            <a href='../../tag/status_open_issue_todo.html' class='discourse-tag' rel="tag">status_open_issue_todo</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick_mobile'><span itemprop='name'>Patrick_mobile</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-08T02:27:30Z' class='post-time'>
                March 8, 2020,  2:27am
              </time>
              <meta itemprop='dateModified' content='2020-03-08T02:27:30Z'>
          <span itemprop='position'>#41</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Options=bind needed? See systemd mailing list. They were asking why use mount bind.</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>
          <meta itemprop='keywords' content='component_security, status_open_issue_todo'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-08T07:26:31Z' class='post-time'>
                March 8, 2020,  7:26am
              </time>
              <meta itemprop='dateModified' content='2020-03-08T07:26:31Z'>
          <span itemprop='position'>#42</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="madaidan" data-post="38" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>initramfs-tools hooks are trivial. It’s a minor thing that would make security-misc far more compatible.</p>
</blockquote>
</aside>
<p>Ok.</p>
<p>Seems like we’ll be stuck with initramfs-tools forever or at least until/if all major distributions (or at least Debian) switch to dracut by default.</p>
<aside class="onebox xkcd">
  <header class="source">
      <a href="../../../external.html?link=https://xkcd.com/927/" target="_blank">xkcd.com</a>
  </header>
  <article class="onebox-body">
    <h3><a href="../../../external.html?link=https://xkcd.com/927/" target="_blank">Standards</a></h3>

  <div class="xkcd-image"><img src="../../../external.html?link=https://imgs.xkcd.com/comics/standards.png" width="" height=""></div>

<p>Fortunately, the charging one has been solved now that we've all standardized on mini-USB. Or is it micro-USB? Shit.</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="madaidan" data-post="39" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Now we just need to figure out how to get the /tmp, /dev/shm and /run restrictions to work.</p>
</blockquote>
</aside>
<p>About /run…</p>
<p>Older quote <a href="../../../external.html?link=https://www.freedesktop.org/wiki/Software/systemd/InitrdInterface/:">https://www.freedesktop.org/wiki/Software/systemd/InitrdInterface/:</a></p>
<blockquote>
<ul>
<li>The initrd should mount /run as a tmpfs and pass it pre-mounted when jumping into the main system when executing systemd. The mount options should be mode=755,nodev</li>
</ul>
</blockquote>
<p>Newer quote <a href="../../../external.html?link=https://systemd.io/INITRD_INTERFACE/">https://systemd.io/INITRD_INTERFACE/</a></p>
<blockquote>
<ul>
<li>The initrd should mount <code>/run/</code> as a tmpfs and pass it pre-mounted when jumping into the main system when executing systemd. The mount options should be <code>mode=755,nodev,nosuid,strictatime</code> .</li>
</ul>
</blockquote>
<p>This speaks for a initrd based implementation.</p>
<aside class="quote no-group" data-username="madaidan" data-post="39" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Now we just need to figure out how to get the /tmp, /dev/shm and /run restrictions to work.</p>
</blockquote>
</aside>
<p>If stuck, could you please ask on systemd mailing list?</p>
<p>Also I guess it would be better to have only 1 place to implement mount options. Either do everything inside initramfs or do everything using systemd units. Not two places to implement. I.e. not initramfs + systemd units. Reason: lower complexity.</p>
<aside class="quote no-group" data-username="madaidan" data-post="39" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p><a href="../../../external.html?link=https://github.com/Whonix/security-misc/pull/69">Use systemd .mount files for stricter mount options and remove remount-secure</a></p>
</blockquote>
</aside>
<p>If going the systemd way, could you please make this configurable?<br>
Due to high potential for regressions [1], we’ll ship this disabled by default and then call for testers enabling this.<br>
Using systemd unit files it may be possible to implement this by requiring kernel boot parameter <code>remount-secure</code> being set by extending the <code>[Unit]</code> section of the systemd unit file. Example:</p>
<pre><code class="lang-auto">[Unit]
ConditionKernelCommandLine=|remount-secure
</code></pre>
<hr>
<blockquote>
<p>Type=ext4</p>
</blockquote>
<p>Is this required? Or could be auto detected? Since you like to support non-Whonix, non-Kicksecure users (plain Debian) too, this might break when users are using other file systems such as btrfs.</p>
<blockquote>
<p><code>Type=</code></p>
<p>Takes a string for the file system type. See <a href="../../../external.html?link=http://man7.org/linux/man-pages/man8/mount.8.html">mount(8)</a> for details. This setting is optional.</p>
</blockquote>
<p>Therefore I guess it can be dropped and would be auto detected by systemd if needed.</p>
<pre><code class="lang-auto">[Mount]
## Uncomment this to deny execution of programs in /home.
#Options=noexec
</code></pre>
<p>The problem with that is that this file will be replaced once a comment or something is ever changed there in the package. Would be better to add instructions there how to do that in /etc or glaceing that file in /etc perhaps. Or maybe better, instead we could probably use:</p>
<pre><code class="lang-auto">[Unit]
ConditionPathExists=|/etc/noexec
ConditionPathExists=|/usr/local/etc/noexec
</code></pre>
<p>(And/or <code>/etc/exec</code> / <code>/usr/local/etc/exec</code>.)</p>
<p>I.e. two systemd units. <code>home-exec.mount</code> and <code>home-noexec.mount</code> and which one is used/ignored depending on <code>ConditionPathExists</code>.</p>
<hr>
<blockquote>
<p>filename <code>/lib/systemd/system/bin.mount</code></p>
</blockquote>
<p>Must be <code>/lib/systemd/system/bin.mount</code><br>
Cannot be <code>/lib/systemd/system/bin.mount.d</code>?<br>
Filename could also be <code>/lib/systemd/system/remount-secure-bin.mount</code>?</p>
<p>What about the mount options for the root file system <code>/</code> itself?</p>
<p>How to test if <code>/</code> is mounted with <code>nodev</code>?</p>
<hr>
<p>[1] I previously had Qubes VMs which would boot sometimes, not boot at other times or sometimes would have broken AppArmor</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-08T15:17:54Z' class='post-time'>
                March 8, 2020,  3:17pm
              </time>
              <meta itemprop='dateModified' content='2020-03-08T15:17:54Z'>
          <span itemprop='position'>#43</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick_mobile" data-post="41" data-topic="7707" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>Options=bind needed? See systemd mailing list. They were asking why use mount bind.</p>
</blockquote>
</aside>
<p>Bind mounts are needed because we aren’t using different partitions.</p>
<aside class="quote no-group" data-username="Patrick" data-post="42" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Cannot be <code>/lib/systemd/system/bin.mount.d</code> ?</p>
</blockquote>
</aside>
<p>No, there isn’t a bin.mount in the first place so bin.mount.d won’t work.</p>
<aside class="quote no-group" data-username="Patrick" data-post="42" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Filename could also be <code>/lib/systemd/system/remount-secure-bin.mount</code> ?</p>
</blockquote>
</aside>
<p>No, systemd gives an error.</p>
<aside class="quote no-group" data-username="Patrick" data-post="42" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>What about the mount options for the root file system <code>/</code> itself?</p>
<p>How to test if <code>/</code> is mounted with <code>nodev</code> ?</p>
</blockquote>
</aside>
<p>Mounting / with <code>nodev</code> would break all devices in <code>/dev</code>.</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-08T15:38:38Z' class='post-time'>
                March 8, 2020,  3:38pm
              </time>
              <meta itemprop='dateModified' content='2020-03-08T15:38:38Z'>
          <span itemprop='position'>#44</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="42" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Using systemd unit files it may be possible to implement this by requiring kernel boot parameter <code>remount-secure</code> being set by extending the <code>[Unit]</code> section of the systemd unit file.</p>
</blockquote>
</aside>
<p>Checking for /etc/remount-secure would be a better implementation:</p>
<pre><code>ConditionPathExists=/etc/remount-secure
</code></pre>
<aside class="quote no-group" data-username="Patrick" data-post="42" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I.e. two systemd units. <code>home-exec.mount</code> and <code>home-noexec.mount</code> and which one is used/ignored depending on <code>ConditionPathExists</code> .</p>
</blockquote>
</aside>
<p>Won’t work:</p>
<pre><code>home-noexec.mount: Where= setting doesn't match unit name. Refusing.</code></pre>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-11T13:05:16Z' class='post-time'>
                March 11, 2020,  1:05pm
              </time>
              <meta itemprop='dateModified' content='2020-03-11T13:05:16Z'>
          <span itemprop='position'>#45</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="madaidan" data-post="39" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p><a href="../../../external.html?link=https://github.com/Whonix/security-misc/pull/69">Use systemd .mount files for stricter mount options and remove remount-secure</a></p>
</blockquote>
</aside>
<p>In case you’re wondering why this is not merged yet…</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="42" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>About /run…</p>
<p>Older quote <a href="../../../external.html?link=https://www.freedesktop.org/wiki/Software/systemd/InitrdInterface/:">https://www.freedesktop.org/wiki/Software/systemd/InitrdInterface/:</a></p>
<blockquote>
<ul>
<li>The initrd should mount /run as a tmpfs and pass it pre-mounted when jumping into the main system when executing systemd. The mount options should be mode=755,nodev</li>
</ul>
</blockquote>
<p>Newer quote <a href="../../../external.html?link=https://systemd.io/INITRD_INTERFACE/">https://systemd.io/INITRD_INTERFACE/</a></p>
<blockquote>
<ul>
<li>The initrd should mount <code>/run/</code> as a tmpfs and pass it pre-mounted when jumping into the main system when executing systemd. The mount options should be <code>mode=755,nodev,nosuid,strictatime</code> .</li>
</ul>
</blockquote>
<p>This speaks for a initrd based implementation.</p>
<blockquote>
<p>Now we just need to figure out how to get the /tmp, /dev/shm and /run restrictions to work.</p>
</blockquote>
<p>If stuck, could you please ask on systemd mailing list?</p>
<p>Also I guess it would be better to have only 1 place to implement mount options. Either do everything inside initramfs or do everything using systemd units. Not two places to implement. I.e. not initramfs + systemd units. Reason: lower complexity.</p>
</blockquote>
</aside>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-11T16:58:36Z' class='post-time'>
                March 11, 2020,  4:58pm
              </time>
              <meta itemprop='dateModified' content='2020-03-11T16:58:36Z'>
          <span itemprop='position'>#46</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Quote <a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/5263#issuecomment-597744172">https://github.com/QubesOS/qubes-issues/issues/5263#issuecomment-597744172</a></p>
<blockquote>
<p><code>nodev</code> on /home breaks qubes-builder (specifically: <code>/dev/null</code> and probably other devices inside chroot). I wonder what else…</p>
</blockquote>
<p>Probably also breaks Whonix build script which uses chroot in home and cowbuilder which uses chroot in /var.</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-11T17:28:25Z' class='post-time'>
                March 11, 2020,  5:28pm
              </time>
              <meta itemprop='dateModified' content='2020-03-11T17:28:25Z'>
          <span itemprop='position'>#47</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Quote <a href="../../../external.html?link=https://docs.clip-os.org/toolkit/setup.html">https://docs.clip-os.org/toolkit/setup.html</a></p>
<blockquote>
<p>Make sure to work in a filesystem without any restricted features such as noexec or nodev as it will cause undefined issues throughout the building process of some parts of the CLIP OS images.</p>
</blockquote>
<hr>
<p>The rationale of <code>nosuid</code> in <code>/home</code>, <code>/run</code>, <code>/dev/shm</code> and <code>/tmp</code> (all partially user writable) is somewhat clear. Perhaps <code>nosuid</code> by extension too (lower attack surface).</p>
<p>But what’s the rationale of mounting <code>/etc</code> and some other folders with <code>nodev</code>? CLIP OS doesn’t do that. Out commented by their default. I haven’t seen <code>/etc</code> suggested to be mounted with <code>nosuid</code>, <code>nodev</code> anywhere.</p>
<p>Maybe the argument of principle of least privilege? Well, non-root users cannot write to these folders such as <code>/etc</code> by default anyhow. Only root can. And compromised root could also change mount options. Therefore I don’t see any advantage of mounting <code>/etc</code> with <code>nosuid</code>, <code>nodev</code>. Root can always create a lets say suid file in some folder (even <code>/</code>). The only way to prevent that would be untrusted root / appamor-profile-everything.</p>
<p>Maybe a useful question to ask…? Was there ever any vulnerability that would have been prevented by such mount options on such folders?</p>
<p>If not recommended anywhere / not helpful in any threat model, then better keep things minimal.</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-11T17:57:20Z' class='post-time'>
                March 11, 2020,  5:57pm
              </time>
              <meta itemprop='dateModified' content='2020-03-11T17:57:20Z'>
          <span itemprop='position'>#48</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="47" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Maybe the argument of principle of least privilege?</p>
</blockquote>
</aside>
<p>Yes.</p>
<aside class="quote no-group" data-username="Patrick" data-post="47" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Well, non-root users cannot write to these folders such as <code>/etc</code> by default anyhow. Only root can.</p>
</blockquote>
</aside>
<p>Root can leave unknown suid/devices lying around.</p>
<aside class="quote no-group" data-username="Patrick" data-post="47" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>And compromised root could also change mount options.</p>
</blockquote>
</aside>
<p>Not with apparmor-profile-everything.</p>
<aside class="quote no-group" data-username="Patrick" data-post="47" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Was there ever any vulnerability that would have been prevented by such mount options on such folders?</p>
</blockquote>
</aside>
<p>Not that I know of but we should aim to be <em>proactive</em> i.e. using principle of least privilege to prevent potential future vulnerabilities rather than <em>reactive</em> i.e. responding to a known vulnerability.</p>
<p>There’s not really any legitimate reason of having devices/suid in /etc so why allow it at all?</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-11T18:18:59Z' class='post-time'>
                March 11, 2020,  6:18pm
              </time>
              <meta itemprop='dateModified' content='2020-03-11T18:18:59Z'>
          <span itemprop='position'>#49</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="47" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I haven’t seen <code>/etc</code> suggested to be mounted with <code>nosuid</code> , <code>nodev</code> anywhere.</p>
</blockquote>
</aside>
<p><a href="../../../external.html?link=https://seifried.org/lasg/installation/">https://seifried.org/lasg/installation/</a> recommends it</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-11T21:29:46Z' class='post-time'>
                March 11, 2020,  9:29pm
              </time>
              <meta itemprop='dateModified' content='2020-03-11T21:29:46Z'>
          <span itemprop='position'>#50</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="madaidan" data-post="48" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>There’s not really any legitimate reason of having devices/suid in /etc so why allow it at all?</p>
</blockquote>
</aside>
<p>Brevity.</p>
<aside class="quote no-group" data-username="madaidan" data-post="48" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Not that I know of but we should aim to be <em>proactive</em> i.e. using principle of least privilege to prevent potential future vulnerabilities rather than <em>reactive</em> i.e. responding to a known vulnerability.</p>
</blockquote>
</aside>
<p>It’s good to be innovative. Such as in case of Whonix shipping <a href="../../../external.html?link=https://github.com/Whonix/kloak">kloak</a> by default is a win. That threat model has been demonstrated through a proof of concept already. Proactive yes, but in this case of remounting /etc with nosuid the benefit of the change doesn’t have a strong rationale.</p>
<p>There’s a huge amount of things which won’t make sense from our point of view. For example there is the <a href="../../../external.html?link=https://packages.debian.org/buster/hello">hello</a> package which most users won’t know and won’t install. I am using it as an example here. No need to pick on that particular maintainer of that Debian package. Why allow installation of that package? What if that maintainer turned evil and somehow included a backdoor in the hello package? To prevent such a backdoor from doing damage, there could be an apt wrapper that prevents installation of that and other packages which most users will probably never need. I am not supposing to invent an apt wrapper for this hypothetical scenario. It would be worse having that code than having that risk.</p>
<p>The superior reason from preventing untrusted root writing anything malicious /etc is apparmor-profile-everything. Once that’s done, there is no need for an additional layer for preventive of suid creation in /etc. Many goals can be implemented in multiple ways but I don’t think we should implement every goal using duplicate implementations.</p>
<p>For example, remount-secure all inside initramfs (supposing that is possible) would be fine. Then that shouldn’t be fully duplicated with remount-secure again using systemd.</p>
<aside class="quote no-group" data-username="madaidan" data-post="48" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Root can leave unknown suid/devices lying around.</p>
</blockquote>
</aside>
<p>I cannot imagine any accident how any system administrator would create an suid binary and store it in /etc. And if a system administrator chooses for some reason to but a suid binary there then there’s no need to interfere with that choice.</p>
<p>It’s one valid strategy to optimize is to add safeguards for every cases no matter how likely.  However, also <a href="../focus-on-low-effort-maintainability/9067.html" class="inline-onebox">Focus on low-effort maintainability</a> is important which includes keeping the amount of lines of code small or even reducing it (i have some plans such as “tb-updater -&gt; binaries-freedom”…). By keeping the code size small it’s also more contributor friendly since more easy to understand, easier to review.</p>
<aside class="quote no-group" data-username="madaidan" data-post="49" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p><a href="../../../external.html?link=https://seifried.org/lasg/installation/">https://seifried.org/lasg/installation/</a> recommends it</p>
</blockquote>
</aside>
<p>It’s in the table there but there’s no rationale for it either.</p>
<hr>
<p>Keeping notes here now:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/remount-secure" target="_blank" title="05:46PM - 11 March 2020">whonix.org – 11 Mar 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:129/86;"><img src="../../../external.html?link=https://www.whonix.org/w/images/thumb/7/7b/Mountoptions.jpg/470px-Mountoptions.jpg" class="thumbnail" width="129" height="86"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/remount-secure" target="_blank">Remount Secure</a></h3>

<p>Secure Mount Options for better Security Hardening</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<hr>
<p>I not not sure if <a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/5263#issuecomment-597822596">https://github.com/QubesOS/qubes-issues/issues/5263#issuecomment-597822596</a> is indicating that flatpak and snap also break when using nosuid on /home.</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-12T07:37:09Z' class='post-time'>
                March 12, 2020,  7:37am
              </time>
              <meta itemprop='dateModified' content='2020-09-19T10:57:58Z'>
          <span itemprop='position'>#51</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I found a rationale for /etc mounted with nodev,nosuid as well as /var. This is because some folders in /etc or /var such as /var/www are owned by other users than root. In these cases the owner of these folders shouldn’t be able to create devices or suid binaries there.</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-13T13:37:49Z' class='post-time'>
                October 13, 2020,  1:37pm
              </time>
              <meta itemprop='dateModified' content='2020-10-13T13:37:49Z'>
          <span itemprop='position'>#52</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote quote-modified" data-post="1" data-topic="10427">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar">
    <a href="../dealing-with-file-system-timestamps/10427.html">Dealing with FS Timestamps</a> <a class="badge-wrapper  bullet" href="../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    This thread is for researching ways/tools to workaround the creation filestamp problem which can leak a lot of info about a files origin and whistelblowing timeline: 
Jeremy Rand: 

In some cases, opening and resaving a file can help, but that will only set the “modified” time field. A lot of filesystems also store a “created” time field, which will not be affected by opening/saving. Also, some file formats will actually leak additional info about what software opened them if you open/resave the…
  </blockquote>
</aside>

        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../whonix-15-0-1-5-4-for-virtualbox-point-release/10835.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../whonix-15-0-1-5-4-for-virtualbox-point-release/10835.html'>
                      <span itemprop='name'>Whonix 15.0.1.5.4 - for VirtualBox - Point Release!</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-14T12:20:11Z' class='post-time'>
                October 14, 2020, 12:20pm
              </time>
              <meta itemprop='dateModified' content='2020-10-14T12:20:11Z'>
          <span itemprop='position'>#53</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>New approach:</p>
<ul>
<li>delete security-misc <code>/lib/systemd/system/remount-secure.service</code>
</li>
<li>move security-misc <code>/usr/lib/security-misc/remount-secure</code> to <code>/etc/initramfs-tools/scripts/init-bottom/30_remount-secure</code>
</li>
</ul>
<hr>
<p>Details:</p>
<p>Script <code>/usr/lib/security-misc/remount-secure</code>  was probably already good enough - the only missing part is moving it to initramfs to avoid race conditions.</p>
<p>initramfs also uses contents from folder <code>/usr/share/initramfs-tools/scripts/init-bottom/</code> (and <code>/usr/share/initramfs-tools/</code>).</p>
<p>File name <code>30_</code> prepended because we want this to be run after <code>/usr/share/initramfs-tools/scripts/init-bottom/udev</code>.</p>
<p>Can probably stay a <code>bash</code> script. No need to port to <code>sh</code>. <code>/usr/share/initramfs-tools/hooks/resume</code> also uses <code>bash</code>.</p>
<blockquote>
<p>if [ -e /etc/remount-disable ] || [ -e /usr/local/etc/remount-disable ]; then</p>
</blockquote>
<p>Does this need <code>${rootmnt}</code>? Likely not because at initramfs stage <code>init-bottom</code>, initramfs already moved everything to its final place?</p>
<p>Kernel parameter <code>break=bottom</code> might give a initramfs rescue shell which could be used for experimentation, i.e. manually running <code>mount</code> commands.</p>
<p>Might also be possible to add command <code>bash</code> followed to <code>/etc/initramfs-tools/scripts/init-bottom/30_remount-secure</code> to easily get shell for experimentation.</p>
<p>Adding <code>sleep 10</code> or so during development to the end of the script might help to easily see what the script is doing, to have sufficient time to read its debug output.</p>
<p>Could you try please? <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/madaidan">@madaidan</a></p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-14T17:52:48Z' class='post-time'>
                October 14, 2020,  5:52pm
              </time>
              <meta itemprop='dateModified' content='2020-10-14T17:52:48Z'>
          <span itemprop='position'>#54</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>That doesn’t work. The mount options are only set when running <code>update-initramfs</code>. Nothing happens during boot.</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-15T12:01:38Z' class='post-time'>
                October 15, 2020, 12:01pm
              </time>
              <meta itemprop='dateModified' content='2020-10-15T12:01:38Z'>
          <span itemprop='position'>#55</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>madaidan via Whonix Forum:</p>
<blockquote>
<p>That doesn’t work. The mount options are only set when running <code>update-initramfs</code>. Nothing happens during boot.</p>
</blockquote>
<p>Strange. Was it set to <code>chmod +x</code>?</p>
<p>Then how did you implement<br>
<code>/etc/initramfs-tools/scripts/init-bottom/sysctl-initramfs</code> which is<br>
kinda similar (as far as starts during initramfs)? Why would<br>
sysctl-initramfs work but remote-secure not?</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-16T15:10:00Z' class='post-time'>
                October 16, 2020,  3:10pm
              </time>
              <meta itemprop='dateModified' content='2020-10-16T15:10:00Z'>
          <span itemprop='position'>#56</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="55" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Was it set to <code>chmod +x</code> ?</p>
</blockquote>
</aside>
<p>Yes.</p>
<aside class="quote no-group" data-username="Patrick" data-post="55" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Then how did you implement<br>
<code>/etc/initramfs-tools/scripts/init-bottom/sysctl-initramfs</code> which is<br>
kinda similar (as far as starts during initramfs)? Why would<br>
sysctl-initramfs work but remote-secure not?</p>
</blockquote>
</aside>
<p>Dunno. sysctl-initramfs is just writing to a few files. This is more complicated.</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-16T15:13:24Z' class='post-time'>
                October 16, 2020,  3:13pm
              </time>
              <meta itemprop='dateModified' content='2020-10-16T15:13:24Z'>
          <span itemprop='position'>#57</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The actual script task, mounting might be more complicated indeed but at least the script should equally be executed? Is it a script execution issue or script functionality issue?</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-16T15:25:35Z' class='post-time'>
                October 16, 2020,  3:25pm
              </time>
              <meta itemprop='dateModified' content='2020-10-16T15:25:35Z'>
          <span itemprop='position'>#58</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Seems like an execution issue. I tried simply writing to a file to check and it didn’t work. Could be because sysctl-initramfs uses <code>/bin/sh</code> whereas remount-secure uses <code>/bin/bash</code>?</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-16T15:28:14Z' class='post-time'>
                October 16, 2020,  3:28pm
              </time>
              <meta itemprop='dateModified' content='2020-10-16T15:28:14Z'>
          <span itemprop='position'>#59</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="madaidan" data-post="58" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>I tried simply writing to a file to check and it didn’t work.</p>
</blockquote>
</aside>
<p>This worked with <code>/bin/sh</code> although the mounts still don’t.</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7707.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-16T15:30:18Z' class='post-time'>
                October 16, 2020,  3:30pm
              </time>
              <meta itemprop='dateModified' content='2020-10-16T15:30:18Z'>
          <span itemprop='position'>#60</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Could very well be the reason. Although I was hoping that’s a non-issue:</p>
<aside class="quote no-group" data-username="Patrick" data-post="53" data-topic="7707">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Can probably stay a <code>bash</code> script. No need to port to <code>sh</code> . <code>/usr/share/initramfs-tools/hooks/resume</code> also uses <code>bash</code> .</p>
</blockquote>
</aside>
<p>Could either port to <code>sh</code> or make <code>bash</code> work inside initramfs if that is possible.</p>
<p>Perhaps try this to easily get a shell:</p>
<pre><code class="lang-auto">#!/bin/sh
echo remount-secure
sleep 10
sh
sleep 10
</code></pre>
<p>The script could run <code>mount</code> before and after running any actual <code>mount</code> commands to see if it actually has any effect. And the <code>sleep 10</code>  (or more) at the end to have a fair chance to read what’s happening. Perhaps the script is functional but then systemd or something is undoing it.</p>
        </div>

        <meta itemprop='headline' content='(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="77074658.html?page=2">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="7707fdb0.html?page=4">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
