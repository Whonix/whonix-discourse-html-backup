<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Can&#39;t connect Gateway to tor.</title>
    <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908</link>
    <description>I&#39;m trying to connect Gateway (Qemu/KVM) from Russia. I am using the same bridges that I use for the tor browser on the host machine, other VMs work perfectly fine. I haven&#39;t changed the timezone, it&#39;s set to UTC.
Here&#39;s the output of systemcheck:

[INFO] [systemcheck] Tor Connection Result:
- Connecting for 70 seconds. | 30 % done.
- Tor Circuit: not established.
- Tor reports: WARN BOOTSTRAP PROGRESS=30 TAG=loading_status SUMMARY=&quot;Loading networkstatus consensus&quot; WARNING=&quot;Connection timed out&quot; REASON=TIMEOUT COUNT=148 RECOMMENDATION=warn
- Timesync status: not done.
- sdwdate reports: Preparation not done yet.

Sdwdate log:
/usr/bin/whonix-gateway-firewall - OK: Loading Whonix firewall...
/usr/bin/whonix-gateway-firewall - OK: Skipping firewall mode detection since already set to &#39;full&#39;.
audit: type=1400 audit(1667227101.376:4): apparmor=&quot;STATUS&quot; operation=&quot;profile_load&quot; profile=&quot;unconfined&quot; name=&quot;/usr/bin/sdwdate&quot; pid=253 comm=&quot;apparmor_parser&quot;
audit: type=1400 audit(1667227101.536:6): apparmor=&quot;STATUS&quot; operation=&quot;profile_load&quot; profile=&quot;unconfined&quot; name=&quot;bootclockrandomization&quot; pid=255 comm=&quot;apparmor_parser&quot;
audit: type=1400 audit(1667227101.928:11): apparmor=&quot;STATUS&quot; operation=&quot;profile_load&quot; profile=&quot;unconfined&quot; name=&quot;/usr/bin/whonix_firewall&quot; pid=262 comm=&quot;apparmor_parser&quot;
AVC apparmor=&quot;STATUS&quot; operation=&quot;profile_load&quot; profile=&quot;unconfined&quot; name=&quot;/usr/bin/sdwdate&quot; pid=253 comm=&quot;apparmor_parser&quot;
AVC apparmor=&quot;STATUS&quot; operation=&quot;profile_load&quot; profile=&quot;unconfined&quot; name=&quot;bootclockrandomization&quot; pid=255 comm=&quot;apparmor_parser&quot;
AVC apparmor=&quot;STATUS&quot; operation=&quot;profile_load&quot; profile=&quot;unconfined&quot; name=&quot;/usr/bin/whonix_firewall&quot; pid=262 comm=&quot;apparmor_parser&quot;
AVC apparmor=&quot;STATUS&quot; operation=&quot;profile_load&quot; profile=&quot;unconfined&quot; name=&quot;/usr/libexec/whonix-firewall/**&quot; pid=262 comm=&quot;apparmor_parser&quot;
/usr/bin/whonix-gateway-firewall - OK: (Full torified network access allowed.)
Finished Notify sdwdate-gui on gateway about shutdown..
+ addgroup sdwdate systemd-journal
The user `sdwdate&#39; is already a member of `systemd-journal&#39;.
+ gcc /usr/libexec/sdwdate/sclockadj.c -o /usr/libexec/sdwdate/sclockadj -ldl -D_GNU_SOURCE -Wdate-time -D_FORTIFY_SOURCE=2 -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wl,-z,relro -Wl,-z,now
/usr/bin/whonix-gateway-firewall - OK: Whonix firewall loaded.
Finished Whonix firewall loader.
Started Whonix firewall watcher.
sdwdate - INFO - sdwdate started. PID: 775
sdwdate - INFO - Tor socks host: [127.0.0.1] Tor socks port: 9108
sdwdate - INFO - Running sdwdate main loop. iteration: 1 / 10000
sdwdate - INFO - PREPARATION:
sdwdate - INFO -
__ Status: First run after boot. (Creating file &#39;/run/sdwdate/onion-time-script-after-boot&#39;.)
__ anondate_use: Running &#39;anondate-set&#39; (by creating file &#39;/run/sdwdate/request_anondate-set&#39;)...
sdwdate - INFO - PREPARATION RESULT: WAIT.
sdwdate - INFO -
____ ### START: ### /usr/sbin/anondate-set
____ INFO: Status file &#39;/run/sdwdate/tor_certificate_lifetime_set&#39; does not yet exist.
____ INFO: Running anondate-get...
______ ### START: ### /usr/sbin/anondate-get
____ INFO: anondate-get returned Tor consensus middle range time or minimum time.
____ INFO: The &#39;anondate-get&#39; time_result is earlier than the current system time, ok. Not setting clock backwards.
____ ### END: ### Exiting with exit_code &#39;3&#39; indicating &#39;Setting time using anondate either not possible or not required.&#39;.
(the 4 lines above repeat infinitely)</description>
    <language>en</language>
    <lastBuildDate>Sat, 05 Nov 2022 13:59:44 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="ArtemyVorakh" data-post="3" data-topic="15908">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/8baadc/40.png" class="avatar"> ArtemyVorakh:</div>
<blockquote>
<p>ERROR: invalid file: ‘/etc/torrc.d/*.conf’</p>
</blockquote>
</aside>
<p>Shot, important part:<br>
Never mind this error.</p>
<p>Technical details:<br>
Now it occurred to me that this might be happening in an old version of Whonix. (16.0.5.3)<br>
This is likely fixed in Whonix 16.0.8.2 and above. But that Whonix build version isn’t available for Whonix KVM yet. I don’t have any ETA (estimated time of arrival) either because I am not a maintainer of Whonix KVM. But that’s just an output/textual issue of <code>anon-info</code> which cannot break connectivity. So this can be safely ignored. There’s no need to wait for Whonix 16.0.8.2. The textual/output issues might be fixed but the connectivity issue would likely still be the same.</p>
<p>In summary, the Tor daemon is running fine.</p>
<aside class="quote no-group" data-username="ArtemyVorakh" data-post="1" data-topic="15908">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/8baadc/40.png" class="avatar"> ArtemyVorakh:</div>
<blockquote>
<p>Tor reports: WARN BOOTSTRAP PROGRESS=30 TAG=loading_status SUMMARY=“Loading networkstatus consensus” WARNING=“Connection timed out” REASON=TIMEOUT COUNT=148</p>
</blockquote>
</aside>
<p>This is the main issue. A “simple” connectivity issue. Not an issue with the Tor daemon not properly starting.</p>
<p>In that case, not much help can be provided. Why? See:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Network_Obstacle">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Network_Obstacle" target="_blank" rel="noopener" title="11:18AM - 16 August 2022">Whonix – 16 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/320;"><img src="https://www.whonix.org/w/images/7/73/Networkobstacle123123455.png" class="thumbnail" width="640" height="320"></div>

<h3><a href="https://www.whonix.org/wiki/Network_Obstacle" target="_blank" rel="noopener">Network Obstacle</a></h3>

  <p>Organizational background on Network Obstacles.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>The only option is to troubleshoot this according to the network troubleshooting instructions here:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Troubleshooting">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Troubleshooting" target="_blank" rel="noopener" title="07:44PM - 13 August 2022">Whonix – 13 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/425;"><img src="https://www.whonix.org/w/images/8/81/Troubleshooting-114197640.jpg?version=16db91ac97b46f7f0b70bcee36dbecff" class="thumbnail" width="640" height="425"></div>

<h3><a href="https://www.whonix.org/wiki/Troubleshooting" target="_blank" rel="noopener">Troubleshooting</a></h3>

  <p>Troubleshooting Installation and Network Issues with Whonix ™</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Specifically, you could try following the steps under <a href="https://www.whonix.org/wiki/Troubleshooting#Essential_Connectivity_Troubleshooting_Steps">Troubleshooting - Whonix chapter Essential Connectivity Troubleshooting Steps in Whonix wiki</a>.</p>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/15</link>
        <pubDate>Sat, 05 Nov 2022 13:59:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-15</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[ArtemyVorakh]]></dc:creator>
        <description><![CDATA[
            <p><code>anon-verify</code> results in:</p>
<pre><code class="lang-auto">/===================================================================\
|                      Report Summary                               |
\===================================================================/
No error detected in your Tor configuration.
Tor verify exit code: 0
/===================================================================\
|                      Tor Full Report                              |
\===================================================================/
Nov 04 16:38:33.724 [notice] Tor 0.4.7.8 running on Linux with Libevent 2.1.12-stable, OpenSSL 1.1.1n, Zlib 1.2.11, Liblzma 5.2.5, Libzstd 1.4.8 and Glibc 2.31 as libc.
Nov 04 16:38:33.724 [notice] Tor can't help you if you use it wrong! Learn how to be safe at https://support.torproject.org/faq/staying-anonymous/
Nov 04 16:38:33.724 [notice] Read configuration file "/usr/share/tor/tor-service-defaults-torrc".
Nov 04 16:38:33.724 [notice] Read configuration file "/etc/tor/torrc".
Nov 04 16:38:33.727 [notice] Processing configuration path "/etc/torrc.d/*.conf" at recursion level 1.
Nov 04 16:38:33.727 [notice] Including configuration file "/etc/torrc.d/60_network.conf".
Nov 04 16:38:33.727 [notice] Including configuration file "/etc/torrc.d/65_gateway.conf".
Nov 04 16:38:33.727 [notice] Including configuration file "/etc/torrc.d/65_leak_tests.conf".
Nov 04 16:38:33.727 [notice] Including configuration file "/etc/torrc.d/70_workstation.conf".
Nov 04 16:38:33.727 [notice] Processing configuration path "/usr/share/tor/tor-service-defaults-torrc.anondist" at recursion level 2.
Nov 04 16:38:33.727 [notice] Including configuration file "/usr/share/tor/tor-service-defaults-torrc.anondist".
Nov 04 16:38:33.727 [notice] Including configuration file "/etc/torrc.d/95_whonix.conf".
Nov 04 16:38:33.727 [notice] Processing configuration path "/usr/local/etc/torrc.d/*.conf" at recursion level 2.
Nov 04 16:38:33.727 [notice] Including configuration file "/usr/local/etc/torrc.d/40_tor_control_panel.conf".
Nov 04 16:38:33.728 [notice] Including configuration file "/usr/local/etc/torrc.d/50_user.conf".
Nov 04 16:38:33.731 [warn] Option 'DisableNetwork' used more than once; all but the last value will be ignored.
Nov 04 16:38:33.731 [notice] You configured a non-loopback address '10.152.152.10:5300' for DNSPort. This allows everybody on your local network to use your machine as a proxy. Make sure this is what you wanted.
Nov 04 16:38:33.731 [notice] You configured a non-loopback address '10.152.152.10:9040' for TransPort. This allows everybody on your local network to use your machine as a proxy. Make sure this is what you wanted.
Configuration was valid
ERROR: invalid file: '/etc/torrc.d/*.conf'
/===================================================================\
|                 Used Tor Configuration Files                      |
\===================================================================/
2 files are used as Tor configuration files: 
/usr/share/tor/tor-service-defaults-torrc /etc/tor/torrc
=====================================================================
</code></pre>
<p><code>anon-log</code> results in:<br>
<code>NOTICE[Fri Nov 04 15:55:02 2022]: Tor needs descriptors: Cannot read /var/lib/tor/cached-microdesc-consensus: [Errno 2] No such file or directory: '/var/lib/tor/cached-microdesc-consensus'. Trying again...</code></p>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/14</link>
        <pubDate>Fri, 04 Nov 2022 16:38:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-14</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="ArtemyVorakh" data-post="12" data-topic="15908">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/8baadc/40.png" class="avatar"> ArtemyVorakh:</div>
<blockquote>
<p>It gives me the terms of service, I accept them, the anon connection wizard opens, I choose “configure”, paste the bridges, don’t use proxy, and the connection starts and gets stuck at 20-45%.</p>
</blockquote>
</aside>
<p>Ok, so this is progress.</p>
<p>“ERROR: invalid file: ‘/etc/torrc.d/*.conf’” is a much different and more fundamental error.</p>
<aside class="quote no-group" data-username="ArtemyVorakh" data-post="12" data-topic="15908">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/8baadc/40.png" class="avatar"> ArtemyVorakh:</div>
<blockquote>
<p><code>     Active: active (running) since Fri 2022-11-04 15:52:45 UTC; 19min ago</code></p>
</blockquote>
</aside>
<p>Also good.</p>
<aside class="quote no-group" data-username="ArtemyVorakh" data-post="12" data-topic="15908">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/8baadc/40.png" class="avatar"> ArtemyVorakh:</div>
<blockquote>
<p>Yes, still invalid file error</p>
</blockquote>
</aside>
<p>Still got “ERROR: invalid file: ‘/etc/torrc.d/*.conf’” in “sudo anon-log”?</p>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/13</link>
        <pubDate>Fri, 04 Nov 2022 16:24:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-13</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[ArtemyVorakh]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="11" data-topic="15908">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>So good so far but what after starting Whonix?</p>
</blockquote>
</aside>
<p>It gives me the terms of service, I accept them, the anon connection wizard opens, I choose “configure”, paste the bridges, don’t use proxy, and the connection starts and gets stuck at 20-45%.</p>
<aside class="quote no-group" data-username="Patrick" data-post="11" data-topic="15908">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Still having that?</p>
</blockquote>
</aside>
<p>Yes, still invalid file error</p>
<p>Also, anon-log returns this error:</p>
<pre><code class="lang-auto">NOTICE: Tor needs descriptors: Cannot read /var/lib/tor/cached-microdesc-consensus: [Errno 2] No such file or directory: '/var/lib/tor/cached-microdesc-consensus'. Trying again...
</code></pre>
<p>output for anon-info:</p>
<pre><code class="lang-auto">INFO: /etc/apt/sources.list.d/torproject.list does not exist.
INFO: version of the 'tor' package: 0.4.7.8-1~d11.bullseye+1
</code></pre>
<p>Don’t know if this is useful, but here’s the output for <code>systemctl status tor@default</code></p>
<pre><code class="lang-auto">● tor@default.service - Anonymizing overlay network for TCP
     Loaded: loaded (/lib/systemd/system/tor@default.service; enabled-runtime; vendor preset: enabled)
    Drop-In: /lib/systemd/system/tor@default.service.d
             └─40_obfs4proxy-workaround.conf, 50_controlsocket-workaround.conf
     Active: active (running) since Fri 2022-11-04 15:52:45 UTC; 19min ago
    Process: 2660 ExecStartPre=/usr/bin/install -Z -m 02755 -o debian-tor -g debian-tor -d /run/tor (code=exited, status=0/SUCCESS)
    Process: 2661 ExecStartPre=/usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemo&gt;
    Process: 2669 ExecStartPost=/bin/kill -HUP ${MAINPID} (code=exited, status=0/SUCCESS)
    Process: 2672 ExecReload=/bin/kill -HUP ${MAINPID} (code=exited, status=0/SUCCESS)
   Main PID: 2662 (tor)
      Tasks: 10 (limit: 1099)
     Memory: 33.6M
        CPU: 40.283s
     CGroup: /system.slice/system-tor.slice/tor@default.service
             ├─2662 /usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0
             └─2663 /usr/bin/obfs4proxy

Nov 04 15:52:44 host tor[2662]: Nov 04 15:52:44.562 [notice] Opened HTTP tunnel listener connection (ready) on 10.152.152.10:9227
Nov 04 15:52:44 host tor[2662]: Nov 04 15:52:44.562 [notice] Opening HTTP tunnel listener on 10.152.152.10:9228
Nov 04 15:52:44 host tor[2662]: Nov 04 15:52:44.562 [notice] Opened HTTP tunnel listener connection (ready) on 10.152.152.10:9228
Nov 04 15:52:44 host tor[2662]: Nov 04 15:52:44.562 [notice] Opening HTTP tunnel listener on 10.152.152.10:9229
Nov 04 15:52:44 host tor[2662]: Nov 04 15:52:44.562 [notice] Opened HTTP tunnel listener connection (ready) on 10.152.152.10:9229
Nov 04 15:52:44 host tor[2662]: Nov 04 15:52:44.562 [notice] Opening Control listener on 127.0.0.1:9052
Nov 04 15:52:44 host tor[2662]: Nov 04 15:52:44.562 [notice] Opened Control listener connection (ready) on 127.0.0.1:9052
Nov 04 15:52:45 host systemd[1]: Started Anonymizing overlay network for TCP.
Nov 04 15:52:45 host systemd[1]: Reloading Anonymizing overlay network for TCP.
Nov 04 15:52:45 host systemd[1]: Reloaded Anonymizing overlay network for TCP.
</code></pre>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/12</link>
        <pubDate>Fri, 04 Nov 2022 16:22:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-12</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>So good so far but what after starting Whonix?</p>
<aside class="quote no-group" data-username="ArtemyVorakh" data-post="1" data-topic="15908">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/8baadc/40.png" class="avatar"> ArtemyVorakh:</div>
<blockquote>
<p>Tor reports: WARN BOOTSTRAP PROGRESS=30 TAG=loading_status SUMMARY=“Loading networkstatus consensus” WARNING=“Connection timed out” REASON=TIMEOUT COUNT=148</p>
</blockquote>
</aside>
<p>This means there was previously no issue starting Tor. Connection didn’t succeed but that’s a very different error from Tor not starting.</p>
<aside class="quote no-group" data-username="ArtemyVorakh" data-post="3" data-topic="15908">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/8baadc/40.png" class="avatar"> ArtemyVorakh:</div>
<blockquote>
<p>ERROR: invalid file: ‘/etc/torrc.d/*.conf’</p>
</blockquote>
</aside>
<p>This is a very different error. No other users are reporting it. Hence I am asking. Still having that? If so, instructions how to reproduce how you ended up with that issue are required to be able to help further.</p>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/11</link>
        <pubDate>Fri, 04 Nov 2022 15:36:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-11</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[ArtemyVorakh]]></dc:creator>
        <description><![CDATA[
            <p>Whonix version - 16<br>
Host OS - Linux Mint 21<br>
QEMU emulator version 6.2.0 (Debian 1:6.2+dfsg-2ubuntu6.5)<br>
Steps to reproduce: 1) Set up the VM; 2) launch the VM.<br>
All files in the machine’s folder:</p>
<pre><code class="lang-auto">hulahoop.asc
WHONIX_BINARY_LICENSE_AGREEMENT
WHONIX_BINARY_LICENSE_AGREEMENT_accepted
WHONIX_DISCLAIMER
Whonix_external_network-16.0.5.3.xml
Whonix-Gateway-XFCE-16.0.5.3.Intel_AMD64.qcow2
Whonix-Gateway-XFCE-16.0.5.3.xml
Whonix_internal_network-16.0.5.3.xml
Whonix-Workstation-XFCE-16.0.5.3.Intel_AMD64.qcow2
Whonix-Workstation-XFCE-16.0.5.3.xml
Whonix-XFCE-16.0.5.3.Intel_AMD64.qcow2.libvirt.xz
Whonix-XFCE-16.0.5.3.Intel_AMD64.qcow2.libvirt.xz.asc
</code></pre>
<p>Files in /etc/libvirt/qemu:</p>
<pre><code class="lang-auto">networks  Whonix-Gateway.xml  Whonix-Workstation.xml
</code></pre>
<p>Files in /etc/libvirt/qemu/networks:</p>
<pre><code class="lang-auto">autostart  default.xml  Whonix-External.xml  Whonix-Internal.xml
</code></pre>
<p>The machine is given 2 CPUs and 1000 MiB of memory.</p>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/10</link>
        <pubDate>Fri, 04 Nov 2022 15:32:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-10</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Same checksums so all files there seem OK.</p>
<p>I don’t know why this is happening.</p>
<p>Steps to reproduce this issue are required. As per:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Reporting_Bugs">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Reporting_Bugs" target="_blank" rel="noopener" title="11:25AM - 26 September 2022">Whonix – 26 Sep 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:522/500;"><img src="https://www.whonix.org/w/images/9/97/Ladybug-156624-640.png" class="thumbnail" width="522" height="500"></div>

<h3><a href="https://www.whonix.org/wiki/Reporting_Bugs" target="_blank" rel="noopener">Bug Reports, Software Development and Feature Requests</a></h3>

  <p>How to Report (Security) Bugs in the Whonix ™ Operating System. Software development cycle, patches, and responsiveness to feedback and feature requests.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/9</link>
        <pubDate>Fri, 04 Nov 2022 05:19:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-9</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[ArtemyVorakh]]></dc:creator>
        <description><![CDATA[
            <pre><code class="lang-auto">$ ls -la /etc/torrc.d
total 32
drwxr-xr-x   2 root root 4096 Jun 21 12:14 .
drwxr-xr-x 106 root root 4096 Nov  3 13:36 ..
-rw-r--r--   1 root root 1102 Oct 21  2015 60_network.conf
-rw-r--r--   1 root root 5694 Oct 21  2015 65_gateway.conf
-rw-r--r--   1 root root 1058 Oct 21  2015 65_leak_tests.conf
-rw-r--r--   1 root root 1927 Oct 21  2015 70_workstation.conf
-rw-r--r--   1 root root  615 Oct 21  2015 95_whonix.conf
</code></pre>
<p>I didn’t delete any files, this is a fresh install of the VM.</p>
<pre><code class="lang-auto">$ md5sum /etc/torrc.d/*
b4b0065341d85d5ac5d0a018bf116299  /etc/torrc.d/60_network.conf
b4e43e40ba3654b147629ecfd6359117  /etc/torrc.d/65_gateway.conf
4931bba29b1fd92de02576e5e0d38488  /etc/torrc.d/65_leak_tests.conf
41994734767226c5f51cdd974377778d  /etc/torrc.d/70_workstation.conf
fe8fbc3d3b7c8d7415853249b74ea3e7  /etc/torrc.d/95_whonix.conf
</code></pre>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/8</link>
        <pubDate>Fri, 04 Nov 2022 05:16:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-8</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Which files are in <code>/etc/torrc.d</code>?</p>
<pre><code>ls -la /etc/torrc.d
</code></pre>
<p>Please post here and please regard above link.</p>
<p>Did you delete any files in <code>/etc/torrc.d</code>?</p>
<p>Please run:</p>
<pre><code>md5sum /etc/torrc.d/*
</code></pre>
<p>Expected output at time of writing (this will likely change in the future, i.e. in a few weeks):</p>
<blockquote>
<p>b4b0065341d85d5ac5d0a018bf116299  /etc/torrc.d/60_network.conf<br>
b4e43e40ba3654b147629ecfd6359117  /etc/torrc.d/65_gateway.conf<br>
4931bba29b1fd92de02576e5e0d38488  /etc/torrc.d/65_leak_tests.conf<br>
41994734767226c5f51cdd974377778d  /etc/torrc.d/70_workstation.conf<br>
fe8fbc3d3b7c8d7415853249b74ea3e7  /etc/torrc.d/95_whonix.conf</p>
</blockquote>
<p>If any checksum is different or any file missing, please report that here.</p>
<p>(Is md5sum insecure here? No. It’s used a a simple integrity check to easily, quickly compare the file on my local Whonix-Gateway versus user local files. It’s not used as part of a signature.)</p>
<p>For how the files should look like, refer to:<br>
<a href="https://github.com/Whonix/anon-gw-anonymizer-config/tree/master/etc/torrc.d" class="inline-onebox">anon-gw-anonymizer-config/etc/torrc.d at master · Whonix/anon-gw-anonymizer-config · GitHub</a><br>
But that should not require any manual user action. That should be the default. If something is different, please report.</p>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/7</link>
        <pubDate>Thu, 03 Nov 2022 17:47:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-7</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://www.kicksecure.com/wiki/Forum_Best_Practices#Code_Tags">Kicksecure ™ Forums Usage Instructions, Best Practices and FAQ chapter Code Tags in Kicksecure wiki</a></p>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/6</link>
        <pubDate>Thu, 03 Nov 2022 17:41:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-6</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[ArtemyVorakh]]></dc:creator>
        <description><![CDATA[
            <p>/etc/tor/torrc doesn’t have any bridges in it:</p>
<pre><code class="lang-auto">## Do not edit this file!
## Please create and add modifications to the following file instead:
## /usr/local/etc/torrc.d/50_user.conf
 
%include /etc/torrc.d/*.conf
</code></pre>
<p>Here’s the contents of /usr/local/etc/torrc.d/40_tor_control_panel.conf:</p>
<pre><code class="lang-auto"># This file is generated by and should ONLY be used by anon-connection-wizard.
# User configuration should go to /usr/local/etc/torrc.d/50_user.conf, not here. Because:
#    1. This file can be easily overwritten by anon-connection-wizard.
#    2. Even a single character change in this file may cause error.
# However, deleting this file will be fine since a new plain file will be generated the next time you run anon-connection-wizard.
UseBridges 1
# Custom Bridge is used:
ClientTransportPlugin obfs4 exec /usr/bin/obfs4proxy
Bridge obfs4 x.x.xxx.xxx:xxxx xxxxxxxxxxxx cert=xxxxxx
Bridge obfs4 x.x.xxx.xxx:xxxx xxxxxxxxxxxx cert=xxxxxx
DisableNetwork 0
</code></pre>
<p>and /usr/local/etc/torrc.d/50_user.conf only has comments.</p>
<p>(also, i tried using other relays that work on the host machine, they don’t work here either)</p>
<p>I just uninstalled the VM, downloaded and installed it again, following the official KVM guide on whonix org, launched the anon connection wizard, copypasted the bridges, didn’t touch a single file, and still can’t connect. Maybe I’m making some mistake when setting up the VM?</p>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/5</link>
        <pubDate>Thu, 03 Nov 2022 14:24:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-5</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="ArtemyVorakh" data-post="3" data-topic="15908">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/8baadc/40.png" class="avatar"> ArtemyVorakh:</div>
<blockquote>
<p>2 files are used as Tor configuration files:<br>
/usr/share/tor/tor-service-defaults-torrc /etc/tor/torrc</p>
</blockquote>
</aside>
<p>Could you please share contents of <code>/etc/tor/torrc</code>? Please redact bridge IPs, ports, fingerprints.</p>
<p>Which Whonix version? Could you please provide steps on how to reproduce this issue using a new Whonix?</p>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/4</link>
        <pubDate>Thu, 03 Nov 2022 12:28:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-4</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[ArtemyVorakh]]></dc:creator>
        <description><![CDATA[
            <p>I read those already and took the recommended steps. Now i ran anon-verify and noticed that there’s an error in the output:<br>
ERROR: invalid file: ‘/etc/torrc.d/*.conf’<br>
Used Tor Configuration Files<br>
2 files are used as Tor configuration files:<br>
/usr/share/tor/tor-service-defaults-torrc /etc/tor/torrc<br>
I didn’t edit anything, I can’t understand why these three files:<br>
/usr/local/etc/torrc.d/40_tor_control_panel.conf; /usr/local/etc/torrc.d/50_user.conf; /etc/torrc.d/95_whonix.conf<br>
aren’t used as configs</p>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/3</link>
        <pubDate>Thu, 03 Nov 2022 06:13:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-3</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>See:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Network_Obstacle">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Network_Obstacle" target="_blank" rel="noopener" title="11:18AM - 16 August 2022">Whonix – 16 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/320;"><img src="https://www.whonix.org/w/images/7/73/Networkobstacle123123455.png" class="thumbnail" width="640" height="320"></div>

<h3><a href="https://www.whonix.org/wiki/Network_Obstacle" target="_blank" rel="noopener">Network Obstacle</a></h3>

  <p>Organizational background on Network Obstacles.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Troubleshooting">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Troubleshooting" target="_blank" rel="noopener" title="07:44PM - 13 August 2022">Whonix – 13 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/425;"><img src="https://www.whonix.org/w/images/8/81/Troubleshooting-114197640.jpg?version=16db91ac97b46f7f0b70bcee36dbecff" class="thumbnail" width="640" height="425"></div>

<h3><a href="https://www.whonix.org/wiki/Troubleshooting" target="_blank" rel="noopener">Troubleshooting</a></h3>

  <p>Troubleshooting Installation and Network Issues with Whonix ™</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="ArtemyVorakh" data-post="1" data-topic="15908">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/8baadc/40.png" class="avatar"> ArtemyVorakh:</div>
<blockquote>
<p>sdwdate</p>
</blockquote>
</aside>
<p><a href="https://www.whonix.org/wiki/Troubleshooting#Unsuitable_Connectivity_Troubleshooting_Tools">Unsuitable Connectivity Troubleshooting Tools</a></p>
<hr>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.reddit.com/r/Whonix/comments/yifvv8/cant_connect_whonix_gateway_to_tor_details_in/">
  <header class="source">
      <img src="https://www.redditstatic.com/desktop2x/img/favicon/android-icon-192x192.png" class="site-icon" width="192" height="192">

      <a href="https://www.reddit.com/r/Whonix/comments/yifvv8/cant_connect_whonix_gateway_to_tor_details_in/" target="_blank" rel="noopener">reddit</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://www.reddit.com/r/Whonix/comments/yifvv8/cant_connect_whonix_gateway_to_tor_details_in/" target="_blank" rel="noopener">r/Whonix - Can't connect Whonix Gateway to tor. Details in comments.</a></h3>

  <p>2 votes and 5 comments so far on Reddit</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/2</link>
        <pubDate>Wed, 02 Nov 2022 19:20:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-2</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[ArtemyVorakh]]></dc:creator>
        <description><![CDATA[
            <p>I’m trying to connect Gateway (Qemu/KVM) from Russia. I am using the same bridges that I use for the tor browser on the host machine, other VMs work perfectly fine. I haven’t changed the timezone, it’s set to UTC.<br>
Here’s the output of systemcheck:</p>
<p>[INFO] [systemcheck] Tor Connection Result:</p>
<ul>
<li>Connecting for 70 seconds. | 30 % done.</li>
<li>Tor Circuit: not established.</li>
<li>Tor reports: WARN BOOTSTRAP PROGRESS=30 TAG=loading_status SUMMARY=“Loading networkstatus consensus” WARNING=“Connection timed out” REASON=TIMEOUT COUNT=148 RECOMMENDATION=warn</li>
<li>Timesync status: not done.</li>
<li>sdwdate reports: Preparation not done yet.</li>
</ul>
<p>Sdwdate log:<br>
/usr/bin/whonix-gateway-firewall - OK: Loading Whonix firewall…<br>
/usr/bin/whonix-gateway-firewall - OK: Skipping firewall mode detection since already set to ‘full’.<br>
audit: type=1400 audit(1667227101.376:4): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name="/usr/bin/sdwdate" pid=253 comm=“apparmor_parser”<br>
audit: type=1400 audit(1667227101.536:6): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name=“bootclockrandomization” pid=255 comm=“apparmor_parser”<br>
audit: type=1400 audit(1667227101.928:11): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name="/usr/bin/whonix_firewall" pid=262 comm=“apparmor_parser”<br>
AVC apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name="/usr/bin/sdwdate" pid=253 comm=“apparmor_parser”<br>
AVC apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name=“bootclockrandomization” pid=255 comm=“apparmor_parser”<br>
AVC apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name="/usr/bin/whonix_firewall" pid=262 comm=“apparmor_parser”<br>
AVC apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name="/usr/libexec/whonix-firewall/**" pid=262 comm=“apparmor_parser”<br>
/usr/bin/whonix-gateway-firewall - OK: (Full torified network access allowed.)<br>
Finished Notify sdwdate-gui on gateway about shutdown…</p>
<ul>
<li>addgroup sdwdate systemd-journal<br>
The user <code>sdwdate' is already a member of </code>systemd-journal’.</li>
<li>gcc /usr/libexec/sdwdate/sclockadj.c -o /usr/libexec/sdwdate/sclockadj -ldl -D_GNU_SOURCE -Wdate-time -D_FORTIFY_SOURCE=2 -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wl,-z,relro -Wl,-z,now<br>
/usr/bin/whonix-gateway-firewall - OK: Whonix firewall loaded.<br>
Finished Whonix firewall loader.<br>
Started Whonix firewall watcher.<br>
sdwdate - INFO - sdwdate started. PID: 775<br>
sdwdate - INFO - Tor socks host: [127.0.0.1] Tor socks port: 9108<br>
sdwdate - INFO - Running sdwdate main loop. iteration: 1 / 10000<br>
sdwdate - INFO - PREPARATION:<br>
sdwdate - INFO -<br>
__ Status: First run after boot. (Creating file ‘/run/sdwdate/onion-time-script-after-boot’.)<br>
__ anondate_use: Running ‘anondate-set’ (by creating file ‘/run/sdwdate/request_anondate-set’)…<br>
sdwdate - INFO - PREPARATION RESULT: WAIT.<br>
sdwdate - INFO -<br>
____ ### START: ### /usr/sbin/anondate-set<br>
____ INFO: Status file ‘/run/sdwdate/tor_certificate_lifetime_set’ does not yet exist.<br>
____ INFO: Running anondate-get…<br>
______ ### START: ### /usr/sbin/anondate-get<br>
____ INFO: anondate-get returned Tor consensus middle range time or minimum time.<br>
____ INFO: The ‘anondate-get’ time_result is earlier than the current system time, ok. Not setting clock backwards.<br>
____ ### END: ### Exiting with exit_code ‘3’ indicating ‘Setting time using anondate either not possible or not required.’.<br>
(the 4 lines above repeat infinitely)</li>
</ul>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/1</link>
        <pubDate>Wed, 02 Nov 2022 17:13:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-1</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
  </channel>
</rss>
