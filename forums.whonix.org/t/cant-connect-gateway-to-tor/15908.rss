<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Can&#39;t connect Gateway to tor.</title>
    <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908</link>
    <description>I&#39;m trying to connect Gateway (Qemu/KVM) from Russia. I am using the same bridges that I use for the tor browser on the host machine, other VMs work perfectly fine. I haven&#39;t changed the timezone, it&#39;s set to UTC.
Here&#39;s the output of systemcheck:

[INFO] [systemcheck] Tor Connection Result:
- Connecting for 70 seconds. | 30 % done.
- Tor Circuit: not established.
- Tor reports: WARN BOOTSTRAP PROGRESS=30 TAG=loading_status SUMMARY=&quot;Loading networkstatus consensus&quot; WARNING=&quot;Connection timed out&quot; REASON=TIMEOUT COUNT=148 RECOMMENDATION=warn
- Timesync status: not done.
- sdwdate reports: Preparation not done yet.

Sdwdate log:
/usr/bin/whonix-gateway-firewall - OK: Loading Whonix firewall...
/usr/bin/whonix-gateway-firewall - OK: Skipping firewall mode detection since already set to &#39;full&#39;.
audit: type=1400 audit(1667227101.376:4): apparmor=&quot;STATUS&quot; operation=&quot;profile_load&quot; profile=&quot;unconfined&quot; name=&quot;/usr/bin/sdwdate&quot; pid=253 comm=&quot;apparmor_parser&quot;
audit: type=1400 audit(1667227101.536:6): apparmor=&quot;STATUS&quot; operation=&quot;profile_load&quot; profile=&quot;unconfined&quot; name=&quot;bootclockrandomization&quot; pid=255 comm=&quot;apparmor_parser&quot;
audit: type=1400 audit(1667227101.928:11): apparmor=&quot;STATUS&quot; operation=&quot;profile_load&quot; profile=&quot;unconfined&quot; name=&quot;/usr/bin/whonix_firewall&quot; pid=262 comm=&quot;apparmor_parser&quot;
AVC apparmor=&quot;STATUS&quot; operation=&quot;profile_load&quot; profile=&quot;unconfined&quot; name=&quot;/usr/bin/sdwdate&quot; pid=253 comm=&quot;apparmor_parser&quot;
AVC apparmor=&quot;STATUS&quot; operation=&quot;profile_load&quot; profile=&quot;unconfined&quot; name=&quot;bootclockrandomization&quot; pid=255 comm=&quot;apparmor_parser&quot;
AVC apparmor=&quot;STATUS&quot; operation=&quot;profile_load&quot; profile=&quot;unconfined&quot; name=&quot;/usr/bin/whonix_firewall&quot; pid=262 comm=&quot;apparmor_parser&quot;
AVC apparmor=&quot;STATUS&quot; operation=&quot;profile_load&quot; profile=&quot;unconfined&quot; name=&quot;/usr/libexec/whonix-firewall/**&quot; pid=262 comm=&quot;apparmor_parser&quot;
/usr/bin/whonix-gateway-firewall - OK: (Full torified network access allowed.)
Finished Notify sdwdate-gui on gateway about shutdown..
+ addgroup sdwdate systemd-journal
The user `sdwdate&#39; is already a member of `systemd-journal&#39;.
+ gcc /usr/libexec/sdwdate/sclockadj.c -o /usr/libexec/sdwdate/sclockadj -ldl -D_GNU_SOURCE -Wdate-time -D_FORTIFY_SOURCE=2 -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wl,-z,relro -Wl,-z,now
/usr/bin/whonix-gateway-firewall - OK: Whonix firewall loaded.
Finished Whonix firewall loader.
Started Whonix firewall watcher.
sdwdate - INFO - sdwdate started. PID: 775
sdwdate - INFO - Tor socks host: [127.0.0.1] Tor socks port: 9108
sdwdate - INFO - Running sdwdate main loop. iteration: 1 / 10000
sdwdate - INFO - PREPARATION:
sdwdate - INFO -
__ Status: First run after boot. (Creating file &#39;/run/sdwdate/onion-time-script-after-boot&#39;.)
__ anondate_use: Running &#39;anondate-set&#39; (by creating file &#39;/run/sdwdate/request_anondate-set&#39;)...
sdwdate - INFO - PREPARATION RESULT: WAIT.
sdwdate - INFO -
____ ### START: ### /usr/sbin/anondate-set
____ INFO: Status file &#39;/run/sdwdate/tor_certificate_lifetime_set&#39; does not yet exist.
____ INFO: Running anondate-get...
______ ### START: ### /usr/sbin/anondate-get
____ INFO: anondate-get returned Tor consensus middle range time or minimum time.
____ INFO: The &#39;anondate-get&#39; time_result is earlier than the current system time, ok. Not setting clock backwards.
____ ### END: ### Exiting with exit_code &#39;3&#39; indicating &#39;Setting time using anondate either not possible or not required.&#39;.
(the 4 lines above repeat infinitely)</description>
    <language>en</language>
    <lastBuildDate>Thu, 03 Nov 2022 06:13:33 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[ArtemyVorakh]]></dc:creator>
        <description><![CDATA[
            <p>I read those already and took the recommended steps. Now i ran anon-verify and noticed that there’s an error in the output:<br>
ERROR: invalid file: ‘/etc/torrc.d/*.conf’<br>
Used Tor Configuration Files<br>
2 files are used as Tor configuration files:<br>
/usr/share/tor/tor-service-defaults-torrc /etc/tor/torrc<br>
I didn’t edit anything, I can’t understand why these three files:<br>
/usr/local/etc/torrc.d/40_tor_control_panel.conf; /usr/local/etc/torrc.d/50_user.conf; /etc/torrc.d/95_whonix.conf<br>
aren’t used as configs</p>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/3</link>
        <pubDate>Thu, 03 Nov 2022 06:13:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-3</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>See:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Network_Obstacle">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Network_Obstacle" target="_blank" rel="noopener" title="11:18AM - 16 August 2022">Whonix – 16 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/320;"><img src="https://www.whonix.org/w/images/7/73/Networkobstacle123123455.png" class="thumbnail" width="640" height="320"></div>

<h3><a href="https://www.whonix.org/wiki/Network_Obstacle" target="_blank" rel="noopener">Network Obstacle</a></h3>

  <p>Organizational background on Network Obstacles.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Troubleshooting">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Troubleshooting" target="_blank" rel="noopener" title="07:44PM - 13 August 2022">Whonix – 13 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/425;"><img src="https://www.whonix.org/w/images/8/81/Troubleshooting-114197640.jpg?version=16db91ac97b46f7f0b70bcee36dbecff" class="thumbnail" width="640" height="425"></div>

<h3><a href="https://www.whonix.org/wiki/Troubleshooting" target="_blank" rel="noopener">Troubleshooting</a></h3>

  <p>Troubleshooting Installation and Network Issues with Whonix ™</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="ArtemyVorakh" data-post="1" data-topic="15908">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/8baadc/40.png" class="avatar"> ArtemyVorakh:</div>
<blockquote>
<p>sdwdate</p>
</blockquote>
</aside>
<p><a href="https://www.whonix.org/wiki/Troubleshooting#Unsuitable_Connectivity_Troubleshooting_Tools">Unsuitable Connectivity Troubleshooting Tools</a></p>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/2</link>
        <pubDate>Wed, 02 Nov 2022 19:20:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-2</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
      <item>
        <title>Can&#39;t connect Gateway to tor.</title>
        <dc:creator><![CDATA[ArtemyVorakh]]></dc:creator>
        <description><![CDATA[
            <p>I’m trying to connect Gateway (Qemu/KVM) from Russia. I am using the same bridges that I use for the tor browser on the host machine, other VMs work perfectly fine. I haven’t changed the timezone, it’s set to UTC.<br>
Here’s the output of systemcheck:</p>
<p>[INFO] [systemcheck] Tor Connection Result:</p>
<ul>
<li>Connecting for 70 seconds. | 30 % done.</li>
<li>Tor Circuit: not established.</li>
<li>Tor reports: WARN BOOTSTRAP PROGRESS=30 TAG=loading_status SUMMARY=“Loading networkstatus consensus” WARNING=“Connection timed out” REASON=TIMEOUT COUNT=148 RECOMMENDATION=warn</li>
<li>Timesync status: not done.</li>
<li>sdwdate reports: Preparation not done yet.</li>
</ul>
<p>Sdwdate log:<br>
/usr/bin/whonix-gateway-firewall - OK: Loading Whonix firewall…<br>
/usr/bin/whonix-gateway-firewall - OK: Skipping firewall mode detection since already set to ‘full’.<br>
audit: type=1400 audit(1667227101.376:4): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name="/usr/bin/sdwdate" pid=253 comm=“apparmor_parser”<br>
audit: type=1400 audit(1667227101.536:6): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name=“bootclockrandomization” pid=255 comm=“apparmor_parser”<br>
audit: type=1400 audit(1667227101.928:11): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name="/usr/bin/whonix_firewall" pid=262 comm=“apparmor_parser”<br>
AVC apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name="/usr/bin/sdwdate" pid=253 comm=“apparmor_parser”<br>
AVC apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name=“bootclockrandomization” pid=255 comm=“apparmor_parser”<br>
AVC apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name="/usr/bin/whonix_firewall" pid=262 comm=“apparmor_parser”<br>
AVC apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name="/usr/libexec/whonix-firewall/**" pid=262 comm=“apparmor_parser”<br>
/usr/bin/whonix-gateway-firewall - OK: (Full torified network access allowed.)<br>
Finished Notify sdwdate-gui on gateway about shutdown…</p>
<ul>
<li>addgroup sdwdate systemd-journal<br>
The user <code>sdwdate' is already a member of </code>systemd-journal’.</li>
<li>gcc /usr/libexec/sdwdate/sclockadj.c -o /usr/libexec/sdwdate/sclockadj -ldl -D_GNU_SOURCE -Wdate-time -D_FORTIFY_SOURCE=2 -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wl,-z,relro -Wl,-z,now<br>
/usr/bin/whonix-gateway-firewall - OK: Whonix firewall loaded.<br>
Finished Whonix firewall loader.<br>
Started Whonix firewall watcher.<br>
sdwdate - INFO - sdwdate started. PID: 775<br>
sdwdate - INFO - Tor socks host: [127.0.0.1] Tor socks port: 9108<br>
sdwdate - INFO - Running sdwdate main loop. iteration: 1 / 10000<br>
sdwdate - INFO - PREPARATION:<br>
sdwdate - INFO -<br>
__ Status: First run after boot. (Creating file ‘/run/sdwdate/onion-time-script-after-boot’.)<br>
__ anondate_use: Running ‘anondate-set’ (by creating file ‘/run/sdwdate/request_anondate-set’)…<br>
sdwdate - INFO - PREPARATION RESULT: WAIT.<br>
sdwdate - INFO -<br>
____ ### START: ### /usr/sbin/anondate-set<br>
____ INFO: Status file ‘/run/sdwdate/tor_certificate_lifetime_set’ does not yet exist.<br>
____ INFO: Running anondate-get…<br>
______ ### START: ### /usr/sbin/anondate-get<br>
____ INFO: anondate-get returned Tor consensus middle range time or minimum time.<br>
____ INFO: The ‘anondate-get’ time_result is earlier than the current system time, ok. Not setting clock backwards.<br>
____ ### END: ### Exiting with exit_code ‘3’ indicating ‘Setting time using anondate either not possible or not required.’.<br>
(the 4 lines above repeat infinitely)</li>
</ul>
          <p><a href="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908/1</link>
        <pubDate>Wed, 02 Nov 2022 17:13:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-15908-1</guid>
        <source url="http://forums.whonix.org/t/cant-connect-gateway-to-tor/15908.rss">Can&#39;t connect Gateway to tor.</source>
      </item>
  </channel>
</rss>
