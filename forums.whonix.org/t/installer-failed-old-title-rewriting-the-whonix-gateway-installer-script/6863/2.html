<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Installer failed. (Old title:Rewriting the whonix gateway installer script) - #2 by 0brand - Physical Isolation - Whonix Forum</title>
    <meta name="description" content="Hi. 
I tried to install the Whonix-Gateway on my Laptop ( physical isolated and raw to the disk / no VM ). Well. Doesn’t worked out of the box. 
At first there were some warnings about missing packages that I installed i&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../6863.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Installer failed. (Old title:Rewriting the whonix gateway installer script)&#39;" href="../6863.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/installer-failed-old-title-rewriting-the-whonix-gateway-installer-script/6863/2" />
<meta name="twitter:url" content="https://forums.whonix.org/t/installer-failed-old-title-rewriting-the-whonix-gateway-installer-script/6863/2" />
<meta property="og:title" content="Installer failed. (Old title:Rewriting the whonix gateway installer script)" />
<meta name="twitter:title" content="Installer failed. (Old title:Rewriting the whonix gateway installer script)" />
<meta property="og:description" content="“$SUDO_OPTS -E make deb-icup”.  I believe that issue or something similar was brought up before  https://forums.whonix.org/t/building-from-source-issues/6236" />
<meta name="twitter:description" content="“$SUDO_OPTS -E make deb-icup”.  I believe that issue or something similar was brought up before  https://forums.whonix.org/t/building-from-source-issues/6236" />
<meta property="article:published_time" content="2019-02-23T01:07:42+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="next" href="../68634658.html?page=2">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../6863.html">Installer failed. (Old title:Rewriting the whonix gateway installer script)</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/physical-isolation/19.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #B3B5B4'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Physical Isolation</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/_def'><span itemprop='name'>_def</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-22T19:49:54Z' class='post-time'>
                February 22, 2019,  7:49pm
              </time>
              <meta itemprop='dateModified' content='2019-03-14T13:15:40Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi.</p>
<p>I tried to install the Whonix-Gateway on my Laptop ( physical isolated and raw to the disk / no VM ). Well. Doesn’t worked out of the box.</p>
<p>At first there were some warnings about missing packages that I installed in another terminal and run the retry option which of course worked. But after some time there where two real errors after which I canceled the installation.</p>
<p>I don’t remember the exact errors but it failed at “$SUDO_OPTS -E make deb-icup”.</p>
<p>The reason I want to use the physical isolated setup is hardware limitation. My old CPU can’t handle two full debians ( even with a cli only gateway), one arch host, and all the firefox tabs anymore.</p>
<p>Now… I still want to work this one out but since the default setup that uses eth0 and eth1 on the Gateway doesn’t work for me why not rewrite the installer scripts and make it a bit more flexible…</p>
<p>The installer should give some options about the type of use like:</p>
<blockquote>
<p>whonix setup I</p>
<ul>
<li>connect Workstation with Gateway through eth1</li>
<li>connect Gateway with internet through eth0</li>
</ul>
<p>whonix setup II</p>
<ul>
<li>connect multiple Workstations with Gateway through wlan, using the Gateway as software access point</li>
<li>connect Gateway with internet through ethX</li>
</ul>
<p>whonix setup III</p>
<ul>
<li>connect Gateway to internet through wlan</li>
<li>connect Workstation with Gateway through ethX</li>
</ul>
</blockquote>
<p>Some other things like switching between the different setups while the Gateway is up and set custom MACs if wanted. Since I’m using a hotspot that is bound to the MAC this would be a handy option.</p>
<p>After taking a look at the source it is mixed with VM/RAW installer functions and since I’ve never written a bash script it gets a little bloated for the first bash project. (I’m coming from object orientated PHP and Javascript, learning fast…)</p>
<p>What I have in mind is to split the VM installer from the RAW installer. But since I still need to fully understand what the installer exactly does and what changes are made, what packages are installed and how everything is configured etc, while learning bash :D, it would be really helpful if there is someone that can remove everything only used for the VM installer.</p>
<p>That way there would be a pretty clean codebase with the only purpose to install the gateway RAW and from that on I would write a customizable installer with good documentation and some other useful things.</p>
<p>Anyone interested?</p>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/0brand'><span itemprop='name'>0brand</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-23T01:07:42Z' class='post-time'>
                February 23, 2019,  1:07am
              </time>
              <meta itemprop='dateModified' content='2019-02-23T01:07:42Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>“$SUDO_OPTS -E make deb-icup”.</p>
<p>I believe that issue or something similar was brought up before</p>
<p><a href="../../building-from-source-issues/6236.html">https://forums.whonix.org/t/building-from-source-issues/6236</a></p>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-23T03:42:33Z' class='post-time'>
                February 23, 2019,  3:42am
              </time>
              <meta itemprop='dateModified' content='2019-02-23T03:42:33Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Physical isolation isn’t the development focus. There’s no dedicated maintainer for physical isolation. By removing the if/else for <code>--target root</code> / physical isolation that would move towards deprecation of physical isolation.</p>
<p>By having separate scripts would lead to code duplication and physical isolation lagging behind.</p>
<p>Perhaps…</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/Installation_from_Repository" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:104/55;"><img src="../../../../external.html?link=https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" class="thumbnail"></div>

<h3><a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/Installation_from_Repository" target="_blank" rel="nofollow noopener">Dev/Installation from Repository</a></h3>

<p>Also known as proverbial 'sudo apt-get install whonix'.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>…would be suitable for physical isolation development?</p>
<aside class="quote no-group" data-post="1" data-topic="6863">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/_/48db29/40.png" class="avatar"> _def:</div>
<blockquote>
<p>I don’t remember the exact errors but it failed at “$SUDO_OPTS -E make deb-icup”.</p>
</blockquote>
</aside>
<p>Please post the build log. This is likely fixable.</p>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/_def'><span itemprop='name'>_def</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-14T12:31:17Z' class='post-time'>
                March 14, 2019, 12:31pm
              </time>
              <meta itemprop='dateModified' content='2019-03-14T12:41:50Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi. Yesterday I thought I’ll give it another try. As expected with new errors.</p>
<p>The first problem was that the “update-binfmts” binary wasn’t installed. I fixed it and installed update-binfmts. I had to change the apt sources.list to the default one.</p>
<p>The next problem was “amd64 could not be executed - falling back to qemu”</p>
<ul>
<li>qemu wasn’t installed. Fixed it and installed it. After installing all the qemu packages the installer aborted with an error like: qemu-x86_64 architecture not listed.</li>
</ul>
<p>Following command produces a list of the available architectures:<br>
<code>/usr/sbin/update-binfmts --display</code></p>
<p>It turned out that the architecture x86_64 was not listed here.</p>
<p><code>qemu-x86_64 --version</code></p>
<p>showed that it is installed on the system, so the fix was to add the architecture to update-binfmts with this command:</p>
<pre><code>/usr/sbin/update-binfmts --install qemu-x86_64 \
   /usr/bin/qemu-x86_64-static \
   --magic '\x7f\x45\x4c\x46\x02\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x02\x00\x3e\x00' \
   --mask '\xff\xff\xff\xff\xff\xfe\xfe\xfc\xff\xff\xff\xff\xff\xff\xff\xff\xfe\xff\xff\xff' \
   --offset 0 --credential yes
</code></pre>
<p>Found here: <a href="../../../../external.html?link=https://lists.debian.org/debian-user/2016/05/msg01044.html" rel="nofollow noopener">https://lists.debian.org/debian-user/2016/05/msg01044.html</a><br>
Big thanks to Christian Seiler for this one.</p>
<p>This worked. The next error was:</p>
<pre><code>I: Installing packages...
/usr/sbin/chroot: failed to run command 'dpkg': Permission denied
##long deb package list##
E: /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter failed
W: Aborting with an error
E: pbuilder create failed
I: forking: pbuilder: rm -rf /bar/cache/pbuilder/base.cow
</code></pre>
<p>Something with chroot, debootstrap, pbuilder, cowbuilder…Maybe a wrong mounted filesystem.</p>
<p>At this point I’m out of hope to get it to work. <img src="../../../images/emoji/twitter/smiley1bce.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"> And since my laptops architecture is i686 I’m pretty sure trouble is on its way. <img src="../../../images/emoji/twitter/smiley1bce.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/_def'><span itemprop='name'>_def</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-14T20:58:53Z' class='post-time'>
                March 14, 2019,  8:58pm
              </time>
              <meta itemprop='dateModified' content='2019-03-14T22:19:12Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Anyone here who can help? Here is the part of the build log:</p>
<pre><code>Fetched 24.9 MB in 0s (43.9 MB/s)
Download complete and in download only mode
I: extracting archives...
I: installing packages...
/usr/sbin/chroot: failed to run command ‘dpkg’: Permission denied
env --unset=APT_CONFIG /usr/sbin/chroot /var/cache/pbuilder/base.cow dpkg --install --force-depends /var/cache/apt/archives//sysvinit-utils_2.88dsf-59.9_amd64.deb /var/cache/apt/archives//ncurses-base_6.0+20161126-1+deb9u2_all.deb /var/cache/apt/archives//libc-bin_2.24-11+deb9u4_amd64.deb /var/cache/apt/archives//init-system-helpers_1.48_all.deb /var/cache/apt/archives//base-passwd_3.5.43_amd64.deb /var/cache/apt/archives//libdebconfclient0_0.227_amd64.deb /var/cache/apt/archives//sed_4.4-1_amd64.deb /var/cache/apt/archives//ncurses-bin_6.0+20161126-1+deb9u2_amd64.deb /var/cache/apt/archives//mount_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//login_1%3a4.4-4.1_amd64.deb /var/cache/apt/archives//libpam-runtime_1.1.8-3.6_all.deb /var/cache/apt/archives//hostname_3.18+b1_amd64.deb /var/cache/apt/archives//gzip_1.6-5+b1_amd64.deb /var/cache/apt/archives//grep_2.27-2_amd64.deb /var/cache/apt/archives//findutils_4.6.0+git+20161106-2_amd64.deb /var/cache/apt/archives//e2fsprogs_1.43.4-2_amd64.deb /var/cache/apt/archives//util-linux_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libudev1_232-25+deb9u9_amd64.deb /var/cache/apt/archives//libsmartcols1_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libncursesw5_6.0+20161126-1+deb9u2_amd64.deb /var/cache/apt/archives//libmount1_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libfdisk1_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libss2_1.43.4-2_amd64.deb /var/cache/apt/archives//libcomerr2_1.43.4-2_amd64.deb /var/cache/apt/archives//libblkid1_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libuuid1_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//passwd_1%3a4.4-4.1_amd64.deb /var/cache/apt/archives//libpam-modules_1.1.8-3.6_amd64.deb /var/cache/apt/archives//libpam-modules-bin_1.1.8-3.6_amd64.deb /var/cache/apt/archives//libdb5.3_5.3.28-12+deb9u1_amd64.deb /var/cache/apt/archives//libsemanage1_2.6-2_amd64.deb /var/cache/apt/archives//libustr-1.0-1_1.0.4-6_amd64.deb /var/cache/apt/archives//libsepol1_2.6-2_amd64.deb /var/cache/apt/archives//libsemanage-common_2.6-2_all.deb /var/cache/apt/archives//libpam0g_1.1.8-3.6_amd64.deb /var/cache/apt/archives//debconf_1.5.61_all.deb /var/cache/apt/archives//perl-base_5.24.1-3+deb9u5_amd64.deb /var/cache/apt/archives//libaudit1_1%3a2.6.7-2_amd64.deb /var/cache/apt/archives//libcap-ng0_0.7.7-3+b1_amd64.deb /var/cache/apt/archives//libaudit-common_1%3a2.6.7-2_all.deb /var/cache/apt/archives//e2fslibs_1.43.4-2_amd64.deb /var/cache/apt/archives//diffutils_1%3a3.5-3_amd64.deb /var/cache/apt/archives//coreutils_8.26-3_amd64.deb /var/cache/apt/archives//bsdutils_1%3a2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libsystemd0_232-25+deb9u9_amd64.deb /var/cache/apt/archives//liblz4-1_0.0~r131-2+b1_amd64.deb /var/cache/apt/archives//libgcrypt20_1.7.6-2+deb9u3_amd64.deb /var/cache/apt/archives//libgpg-error0_1.26-2_amd64.deb /var/cache/apt/archives//bash_4.4-5_amd64.deb /var/cache/apt/archives//libtinfo5_6.0+20161126-1+deb9u2_amd64.deb /var/cache/apt/archives//dash_0.5.8-2.4_amd64.deb /var/cache/apt/archives//dpkg_1.18.25_amd64.deb /var/cache/apt/archives//tar_1.29b-1.1_amd64.deb /var/cache/apt/archives//libacl1_2.2.52-3+b1_amd64.deb /var/cache/apt/archives//libattr1_1%3a2.4.47-2+b2_amd64.deb /var/cache/apt/archives//zlib1g_1%3a1.2.8.dfsg-5_amd64.deb /var/cache/apt/archives//libselinux1_2.6-3+b3_amd64.deb /var/cache/apt/archives//libpcre3_2%3a8.39-3_amd64.deb /var/cache/apt/archives//multiarch-support_2.24-11+deb9u4_amd64.deb /var/cache/apt/archives//liblzma5_5.2.2-1.2+b1_amd64.deb /var/cache/apt/archives//libbz2-1.0_1.0.6-8.1_amd64.deb /var/cache/apt/archives//debianutils_4.8.1.1_amd64.deb /var/cache/apt/archives//sensible-utils_0.0.9+deb9u1_all.deb /var/cache/apt/archives//base-files_9.9+deb9u8_amd64.deb /var/cache/apt/archives//mawk_1.3.3-17+b3_amd64.deb /var/cache/apt/archives//libgcc1_1%3a6.3.0-18+deb9u1_amd64.deb /var/cache/apt/archives//libc6_2.24-11+deb9u4_amd64.deb /var/cache/apt/archives//gcc-6-base_6.3.0-18+deb9u1_amd64.deb failed at /home/user/Whonix/help-steps/mmdebstrap line 551.
E: /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter failed
W: Aborting with an error
E: pbuilder create failed
I: forking: rm -rf /var/cache/pbuilder/base.cow
+ cowbuilder_exit_code=1
+ true
+ '[' -d /var/cache/pbuilder/base.cow ']'
+ '[' '!' 1 = 0 ']'
+ return 1
++ errorhandlergeneral ERR
++ last_failed_exit_code=1
++ last_failed_bash_command='return "$cowbuilder_exit_code"'
++ output_cmd_set
++ '[' -o xtrace ']'
++ output_cmd=true
++ true 'INFO: Middle of function errorhandlergeneral of ././build-steps.d/1100_prepare-build-machine.'
++ errorhandlerprocessshared ERR
++ last_script=././build-steps.d/1100_prepare-build-machine
++ trap_signal_type_previous=
++ '[' '' = '' ']'
++ trap_signal_type_previous=unset
++ trap_signal_type_last=ERR
++ whonix_build_error_counter=1
+++ benchmarktimeend 1552601264
++++ date +%s
+++ benchmarktimeend=1552601317
+++ benchmark_took_seconds=53
++++ convertsecs 53
++++ local h m s
++++ (( h=53/3600 ))
++++ true
++++ (( m=(53%3600)/60 ))
++++ true
++++ (( s=53%60 ))
++++ printf '%02d:%02d:%02d\n' 0 0 53
+++ echo 00:00:53
++ benchmark_took_time=00:00:53
++ processbacktracefunction
++ true 'INFO: BEGIN: processbacktracefunction'
++ '[' -o xtrace ']'
++ set +x
++ true 'INFO: END  : processbacktracefunction'
++ functiontracefunction
++ true 'INFO: BEGIN: functiontracefunction'
++ '[' -o xtrace ']'
++ set +x
++ true 'INFO: END  : functiontracefunction'
++ output_cmd_set
++ '[' -o xtrace ']'
++ output_cmd=true
++ true '




############################################################
ERROR in ././build-steps.d/1100_prepare-build-machine detected!
anon_dist_build_version: 14.0.1.4.4
(whonix_build_error_counter: 2)
(benchmark: 00:00:59)
trap_signal_type_previous: ERR
trap_signal_type_last    : ERR
process_backtrace_result:
1: : /sbin/init 
2: : sudo -s 
3: : /bin/bash 
4: : xfce4-terminal 
5: : bash 
6: : sudo ./whonix_build --flavor whonix-gateway-cli --target root --build 
7: : /bin/bash ./whonix_build --flavor whonix-gateway-cli --target root --build 
8: : /bin/bash ././build-steps.d/1100_prepare-build-machine 
function_trace_result:
main (line number: 472)
main (line number: 468)
cowbuilder_setup (line number: 116)
errorhandlergeneral (line number: 334)
errorhandlerprocessshared (line number: 220)
errorhandlergeneral (line number: 334)
errorhandlerprocessshared (line number: 169)
errorhandlerprocessshared (line number: 169)
errorhandlergeneral (line number: 334)
cowbuilder_setup (line number: 116)
main (line number: 468)
main (line number: 472)
last_failed_bash_command: return "$cowbuilder_exit_code"
last_failed_exit_code: 2
ERROR in ././build-steps.d/1100_prepare-build-machine detected!
############################################################
'
+++ '[' ERR = INT ']'
+++ '[' ERR = TERM ']'
+++ '[' ERR = ERR ']'
+++ true 'INFO: trap_signal_type_last: ERR, considering auto retry...'
+++ '[' '!' 1 = 0 ']'
+++ '[' 2 = '' ']'
+++ '[' -n 1 ']'
+++ '[' -n 5 ']'
+++ local first
+++ read -r first _
+++ '[' return = error_ ']'
+++ '[' 2 -gt 1 ']'
+++ true 'INFO: Auto retried (--retry-max) already 1 times. No more auto retry. '
+++ unset whonix_build_auto_retry_counter
+++ true
+++ ignore_error=false
+++ answer=
+++ '[' ERR = ERR ']'
+++ true 'INFO: whonix_build_non_interactive: '
+++ '[' '' = true ']'
+++ '[' -t 0 ']'
+++ true 'INFO: stdin connected to terminal, using interactive error handler.'
+++ true '   ERROR in ././build-steps.d/1100_prepare-build-machine detected!
   Please have a look above (the block within ###...), note the command that failed, last_failed_exit_code and its output (further above).
   - Please enter c and press enter to ignore the error and continue building. (Recommended against!)
   - Please press r and enter to retry.
   - Please press s and enter to open an chroot interactive shell.
   - Please press a and enter to abort.'
+++ read -p 'Answer? ' answer
Answer? a
+++ error_handler_do_retry=
+++ interactive_chroot_shell=
+++ '[' a = continue ']'
+++ '[' a = c ']'
+++ '[' a = s ']'
+++ '[' a = shell ']'
+++ '[' a = r ']'
+++ '[' a = retry ']'
+++ '[' a = a ']'
+++ ignore_error=false
+++ interactive_chroot_shell=false
+++ break
+++ errorhandlermaybeexit ERR
+++ '[' '' = true ']'
+++ '[' false = true ']'
+++ abort_or_continue=Aborted
+++ rm --force /etc/apt/sources.list.d/whonix_temp.list
+++ rm --force /var/run/package_manager_lock
+++ '[' false = true ']'
+++ '[' ERR = INT ']'
+++ '[' ERR = TERM ']'
+++ trap - EXIT
+++ true 'INFO: Now exiting from ././build-steps.d/1100_prepare-build-machine (because error was detected, see above) with exit code 1.'
+++ exit 1
++ error_handler_whonix_build_one
++ true 'ERROR in ./whonix_build'
++ true 'BASH_COMMAND: "./$whonix_build_one_build_step_current"'
++ true 'whonix_build_one_build_step_current: ./build-steps.d/1100_prepare-build-machine'
++ true 'args: --flavor whonix-gateway-cli --target root --build'
++ true 'INFO: Now exiting from ./whonix_build (because error was detected, see above).'
++ exit 1
+ exithandler
+ local exit_code=1
+ '[' '!' 1 = 0 ']'
+ exit 1</code></pre>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/_def'><span itemprop='name'>_def</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-15T00:12:45Z' class='post-time'>
                March 15, 2019, 12:12am
              </time>
              <meta itemprop='dateModified' content='2019-03-15T00:12:45Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>After taking a closer look at the code, debugging this case would be a pain in the ass for me. The last thing I tried was preventing the script from deleting the base.cow file so I can chroot into it and try to manually figure out what produces the error, but after looking at the umount_kill.sh I thought “damn, screw it”</p>
<p>Never thought that installing some packages and changing configuration files could be such a disaster. No offence. <img src="../../../images/emoji/twitter/smiley1bce.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-15T07:20:39Z' class='post-time'>
                March 15, 2019,  7:20am
              </time>
              <meta itemprop='dateModified' content='2019-03-15T07:20:39Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The build log is too short. You could look up the cowbuilder which gets run, and then try manually run that, and fix that.</p>
<pre><code class="lang-auto">rm -rf /var/cache/pbuilder/base.cow
</code></pre>
<p>This indeed isn’t helpful in case of issues. cowbuilder is a standard Debian tool for building packages. Not developed by Whonix.</p>
<p>cowbuilder.c</p>
<pre><code>out:
	if (ret) {
		log_printf(log_error, "pbuilder create failed");
		if (!pc-&gt;debug &amp;&amp; 0 != rmrf_check_mount(pc-&gt;basepath)) {
			log_printf(log_error, "Could not remove original tree");
		}
	}
	return ret;
</code></pre>
<p>It’s related to this.</p>
<pre><code>/**
   remove a directory.

   be careful about bind-mounted directories.

   @return 0 on success
 */
static int rmrf(const char *path) {
	return forkexeclp("rm", "rm", "-rf", path, NULL);
}

/**
   Remove a directory, but only if nothing is mounted under it.

   @return 0 on success
 */
static int rmrf_check_mount(const char *path) {
	/*
   * A directory bind-mounted into path will be cleaned out by rmrf().
   * To avoid that potential disaster we want to detect if there's
   * something mounted under path before deleting it.
   */

	char *canonical_path = strdupa(path);

	canonicalize_doubleslash(path, canonical_path);
	if (check_mountpoint(canonical_path)) {
		return 1;
	}

	return rmrf(path);
}
</code></pre>
<p>I don’t like cowbuilder being written in C either. Don’t know any reason why that’s required/useful.</p>
<p>I don’t see any option to prevent cowbuilder <code>rm -rf /var/cache/pbuilder/base.cow</code>.</p>
<p>Next steps:</p>
<ul>
<li>manually run the cowbuilder command to simplify the issue</li>
<li>ask upstream how to prevent cowbuilder <code>rm -rf /var/cache/pbuilder/base.cow</code>
</li>
<li>ask upstream how to debug failing cowbuilder builds</li>
<li>patch and recompile cowbuilder</li>
<li>perhaps crazy, not sure that would break other things, but move <code>/bin/rm</code> out of the way and replace it with a script that only echos</li>
</ul>
<p>.</p>
<pre><code>sudo mv /bin/rm /bin/rm.real
</code></pre>
<p>.</p>
<pre><code>/bin/rm
</code></pre>
<pre><code class="lang-auto">#!/bin/bash
set -x
</code></pre>
<pre><code>chmod +x /bin/rm</code></pre>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/_def'><span itemprop='name'>_def</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-15T10:56:32Z' class='post-time'>
                March 15, 2019, 10:56am
              </time>
              <meta itemprop='dateModified' content='2019-03-15T11:55:10Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks for the reply. I’ll post the full build log later. Maybe there are systemlogs too if it’s a cowbuilder problem.</p>
<p>Just for information:</p>
<p>The system ist fully encrypted, luks over lvm and the code that failed should be the function run_dpkg_progress called in mmdebstrap at line 1455.</p>
<pre><code>	    # install the extracted packages properly
	    # we need --force-depends because dpkg does not take Pre-Depends into
	    # account and thus doesn't install them in the right order
	    # And the --predep-package option is broken: #539133
	    print STDERR "I: installing packages...\n";
	    run_dpkg_progress({
		    ARGV =&gt; [@chrootcmd, 'dpkg', '--install', '--force-depends'],
		    PKGS =&gt; \@essential_pkgs,
		    VERBOSE =&gt; $options-&gt;{verbose}
		});</code></pre>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/_def'><span itemprop='name'>_def</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-15T16:51:22Z' class='post-time'>
                March 15, 2019,  4:51pm
              </time>
              <meta itemprop='dateModified' content='2019-03-15T16:51:22Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Here ist the full build log:</p>
<p>Part I</p>
<pre><code>user@host:~/Whonix$ sudo ./whonix_build --flavor whonix-gateway-cli --target root --build 
[sudo] Passwort für user: 
+ set -e
+ true 'INFO: Currently running script: ./whonix_build --flavor' whonix-gateway-cli --target root --build
+++ dirname ./whonix_build
++ cd .
++ pwd
+ MYDIR=/home/user/Whonix
+ cd /home/user/Whonix
+ source ./help-steps/pre
++ '[' '!' '' = true ']'
++ set +x
+ source ./help-steps/colors
++ '[' '!' '' = true ']'
++ colors
++ '[' xterm-256color = '' ']'
++ [[ -t 2 ]]
++ export whonix_build_already_defined_colors=true
++ whonix_build_already_defined_colors=true
+ trap error_handler_whonix_build_one ERR
+ export WHONIX_BUILD_ONE_SCRIPT_STARTED=1
+ WHONIX_BUILD_ONE_SCRIPT_STARTED=1
+ main --flavor whonix-gateway-cli --target root --build
+ root_check
++ id -u
+ '[' 0 '!=' 0 ']'
+ echo 'INFO: Script running as root.'
INFO: Script running as root.
+ args='--flavor whonix-gateway-cli --target root --build'
+ whonix_build_preparation --flavor whonix-gateway-cli --target root --build
+ cd help-steps
+ source parse-cmd
+ whonix_build_one_parse_cmd --flavor whonix-gateway-cli --target root --build
+ '[' '!' '' = 1 ']'
+ '[' '--flavor whonix-gateway-cli --target root --build' = '' ']'
+ local build_machines_counter=0
+ local build_target_counter=0
+ :
+ case $1 in
+ true 'INFO: --flavor whonix-gateway-cli chosen.'
+ WHONIX_BUILD_FLAVOR=whonix-gateway-cli
+ export WHONIX_BUILD_FLAVOR
+ '[' whonix-gateway-cli = whonix-gateway-kde ']'
+ '[' whonix-gateway-cli = whonix-gateway-xfce ']'
+ '[' whonix-gateway-cli = whonix-gateway-rpi ']'
+ '[' whonix-gateway-cli = whonix-gateway-cli ']'
+ build_machines_counter=1
+ shift 2
+ :
+ case $1 in
+ true 'INFO: --target root chosen.'
+ '[' root = virtualbox ']'
+ '[' root = root ']'
+ build_target_counter=1
+ export ANON_BUILD_INSTALL_TO_ROOT=1
+ ANON_BUILD_INSTALL_TO_ROOT=1
+ shift 2
+ :
+ case $1 in
+ export WHONIX_BUILD_BUILD=1
+ WHONIX_BUILD_BUILD=1
+ shift
+ :
+ case $1 in
+ '[' '' = '' ']'
+ true
+ break
+ '[' '' = i386 ']'
+ '[' -n '' ']'
+ BUILD_TARGET_ARCH=amd64
+ '[' -n '' ']'
+ BUILD_KERNEL_PKGS=linux-image-amd64
+ '[' -n '' ']'
+ BUILD_HEADER_PKGS=linux-headers-amd64
+ export BUILD_TARGET_ARCH
+ export BUILD_KERNEL_PKGS
+ export BUILD_HEADER_PKGS
+ echo 'INFO: BUILD_TARGET_ARCH    (--arch): amd64'
INFO: BUILD_TARGET_ARCH    (--arch): amd64
+ echo 'INFO: BUILD_KERNEL_PKGS  (--kernel): linux-image-amd64'
INFO: BUILD_KERNEL_PKGS  (--kernel): linux-image-amd64
+ echo 'INFO: BUILD_HEADER_PKGS (--headers): linux-headers-amd64'
INFO: BUILD_HEADER_PKGS (--headers): linux-headers-amd64
+ '[' '' = '' ']'
+ echo 'INFO: No --connection type '\''clearnet'\'' or '\''onion'\'' has been chosen. Defaulting whonix_build_sources_clearnet_or_onion to clearnet.
(Alternative value would be '\''onion'\''.)'
INFO: No --connection type 'clearnet' or 'onion' has been chosen. Defaulting whonix_build_sources_clearnet_or_onion to clearnet.
(Alternative value would be 'onion'.)
+ export whonix_build_sources_clearnet_or_onion=clearnet
+ whonix_build_sources_clearnet_or_onion=clearnet
+ '[' '!' '' = 1 ']'
+ '[' '!' 1 = 1 ']'
+ '[' 1 -gt 1 ']'
+ '[' 1 -le 0 ']'
+ '[' 1 = 1 ']'
+ true
+ '[' 1 = 1 ']'
+ '[' 1 -gt 1 ']'
+ export whonix_build_one_parsed=1
+ whonix_build_one_parsed=1
+ cd ..
+ trap error_handler_whonix_build_one ERR
+ trap - INT
+ trap - TERM
+ '[' '' = 1 ']'
+ '[' 1 = 1 ']'
+ whonix_build_machine
+ run-parts --verbose --test ./build-steps.d
./build-steps.d/1100_prepare-build-machine
./build-steps.d/1150_export-libvirt-xml
./build-steps.d/1200_create-debian-packages
./build-steps.d/1300_create-raw-image
./build-steps.d/1700_install-packages
./build-steps.d/2300_run-chroot-scripts-post-d
./build-steps.d/2350_zerofree-raw
./build-steps.d/2375_build_rpi_fs
./build-steps.d/2400_convert-raw-to-qcow2
./build-steps.d/2500_convert-raw-to-vdi
./build-steps.d/2600_create-vbox-vm
./build-steps.d/2700_create-vm-text
./build-steps.d/2800_create-report
+ for whonix_build_one_build_step_current in ./build-steps.d/*
+ '[' -x ./build-steps.d/1100_prepare-build-machine ']'
+ '[' e = '~' ']'
+ grep -q .dpkg-
+ echo ./build-steps.d/1100_prepare-build-machine
+ true '############################################################'
+ true '############################################################'
+ true '############################################################'
+ true 'INFO: BEGIN: whonix_build_one_build_step_current: ./build-steps.d/1100_prepare-build-machine'
+ ././build-steps.d/1100_prepare-build-machine
+ set -e
+ true 'INFO: Currently running script: ././build-steps.d/1100_prepare-build-machine '
+++ dirname ././build-steps.d/1100_prepare-build-machine
++ cd ././build-steps.d
++ pwd
+ MYDIR=/home/user/Whonix/build-steps.d
+ cd /home/user/Whonix/build-steps.d
+ cd ..
+ cd help-steps
+ VMNAME=internalrun
+ source pre
++ '[' '!' '' = true ']'
++ set +x
+ source colors
++ '[' '!' true = true ']'
+ source variables
++ '[' '!' '' = true ']'
++ set +x
INFO: Setting... export UWT_DEV_PASSTHROUGH="1"
INFO: Variable anon_dist_build_version was unset. Auto detected. Set to: 14.0.1.4.4-1-g53d8aff964a8651dbb8b0cd47b73d9a63d3da9b4
++ true 'INFO: Currently running script: ././build-steps.d/1100_prepare-build-machine '
++ true 'INFO: LD_PRELOAD: '
+ cd /home/user/Whonix/help-steps
+ cd ..
+ main
+ build_machine_setup
+ root_check
++ id -u
+ '[' 0 '!=' 0 ']'
+ echo 'INFO: Script running as root.'
INFO: Script running as root.
+ local required_packages_list required_package_item
+ local 'required_packages_list=git time curl apt-cacher-ng lsb-release fakeroot'
+ for required_package_item in $required_packages_list
+ dpkg-query --show '--showformat=${Version}' git
1:2.11.0-3+deb9u4+ for required_package_item in $required_packages_list
+ dpkg-query --show '--showformat=${Version}' time
1.7-25.1+b1+ for required_package_item in $required_packages_list
+ dpkg-query --show '--showformat=${Version}' curl
7.52.1-5+deb9u9+ for required_package_item in $required_packages_list
+ dpkg-query --show '--showformat=${Version}' apt-cacher-ng
2-2+ for required_package_item in $required_packages_list
+ dpkg-query --show '--showformat=${Version}' lsb-release
9.20161125+ for required_package_item in $required_packages_list
+ dpkg-query --show '--showformat=${Version}' fakeroot
1.21-3.1+ signing_key
+ true 'INFO: GPG_AGENT_INFO: '
+ '[' false = false ']'
+ true
+ '[' '' = true ']'
+ '[' '' = 1 ']'
+ true 'INFO: PWD: /home/user/Whonix '
++ stat -c %U ././build-steps.d/1100_prepare-build-machine
+ stat_output_owner=user
++ stat -c %G ././build-steps.d/1100_prepare-build-machine
+ stat_output_group=user
+ '[' user = root ']'
+ '[' user = root ']'
+ local id_exit_code
+ id_exit_code=0
+ id user
uid=1000(user) gid=1000(user) groups=1000(user),24(cdrom),25(floppy),27(sudo),29(audio),30(dip),44(video),46(plugdev),108(netdev),113(bluetooth),114(lpadmin),119(scanner)
+ '[' 0 = 1 ']'
+ '[' 0 = 0 ']'
+ true 'INFO: Not creating user "user" with password "changeme", because it already exists.'
+ addgroup user sudo
The user `user' is already a member of `sudo'.
+ '[' '!' 1 = 1 ']'
+ true 'INFO: Benchmarking "sudo $SUDO_OPTS echo "This is a test echo." using "time"...'
+ sudo --non-interactive -u user echo 'This is a test echo.'
This is a test echo.

real	0m0.027s
user	0m0.008s
sys	0m0.000s
+ true 'INFO: Updating git sub modules...'
+ sudo --non-interactive -u user git submodule sync --recursive
Synchronizing submodule url for 'packages/anon-apps-config'
Synchronizing submodule url for 'packages/anon-apt-sources-list'
Synchronizing submodule url for 'packages/anon-base-files'
Synchronizing submodule url for 'packages/anon-connection-wizard'
Synchronizing submodule url for 'packages/anon-gpg-tweaks'
Synchronizing submodule url for 'packages/anon-gw-anonymizer-config'
Synchronizing submodule url for 'packages/anon-gw-base-files'
Synchronizing submodule url for 'packages/anon-gw-dhcp-conf'
Synchronizing submodule url for 'packages/anon-gw-dns-conf'
Synchronizing submodule url for 'packages/anon-gw-leaktest'
Synchronizing submodule url for 'packages/anon-iceweasel-warning'
Synchronizing submodule url for 'packages/anon-icon-pack'
Synchronizing submodule url for 'packages/anon-meta-packages'
Synchronizing submodule url for 'packages/anon-mixmaster'
Synchronizing submodule url for 'packages/anon-shared-build-apt-sources-tpo'
Synchronizing submodule url for 'packages/anon-shared-helper-scripts'
Synchronizing submodule url for 'packages/anon-ws-base-files'
Synchronizing submodule url for 'packages/anon-ws-disable-stacked-tor'
Synchronizing submodule url for 'packages/anon-ws-dns-conf'
Synchronizing submodule url for 'packages/anon-ws-leaktest'
Synchronizing submodule url for 'packages/apparmor-profile-anondist'
Synchronizing submodule url for 'packages/apparmor-profile-gwenview'
Synchronizing submodule url for 'packages/apparmor-profile-icedove'
Synchronizing submodule url for 'packages/apparmor-profile-okular'
Synchronizing submodule url for 'packages/apparmor-profile-torbrowser'
Synchronizing submodule url for 'packages/apparmor-profile-virtualbox'
Synchronizing submodule url for 'packages/apparmor-profile-xchat'
Synchronizing submodule url for 'packages/bindp'
Synchronizing submodule url for 'packages/bootclockrandomization'
Synchronizing submodule url for 'packages/corridor'
Synchronizing submodule url for 'packages/curl-scripts'
Synchronizing submodule url for 'packages/damngpl'
Synchronizing submodule url for 'packages/genmkfile'
Synchronizing submodule url for 'packages/gpg-bash-lib'
Synchronizing submodule url for 'packages/gpl-sources-download'
Synchronizing submodule url for 'packages/grub-enable-apparmor'
Synchronizing submodule url for 'packages/grub-live'
Synchronizing submodule url for 'packages/grub-output-verbose'
Synchronizing submodule url for 'packages/grub-screen-resolution'
Synchronizing submodule url for 'packages/ipv4-forward-disable'
Synchronizing submodule url for 'packages/ipv6-disable'
Synchronizing submodule url for 'packages/msgcollector'
Synchronizing submodule url for 'packages/onion-grater'
Synchronizing submodule url for 'packages/open-link-confirmation'
Synchronizing submodule url for 'packages/power-savings-disable-in-vms'
Synchronizing submodule url for 'packages/python-guimessages'
Synchronizing submodule url for 'packages/qubes-whonix'
Synchronizing submodule url for 'packages/rads'
Synchronizing submodule url for 'packages/ro-mode-init'
Synchronizing submodule url for 'packages/scurl'
Synchronizing submodule url for 'packages/sdwdate'
Synchronizing submodule url for 'packages/sdwdate-gui'
Synchronizing submodule url for 'packages/security-misc'
Synchronizing submodule url for 'packages/shared-folder-help'
Synchronizing submodule url for 'packages/swap-file-creator'
Synchronizing submodule url for 'packages/swappiness-lowest'
Synchronizing submodule url for 'packages/tb-default-browser'
Synchronizing submodule url for 'packages/tb-starter'
Synchronizing submodule url for 'packages/tb-updater'
Synchronizing submodule url for 'packages/timesanitycheck'
Synchronizing submodule url for 'packages/timezone-utc'
Synchronizing submodule url for 'packages/tor-control-panel'
Synchronizing submodule url for 'packages/tor-ctrl'
Synchronizing submodule url for 'packages/usability-misc'
Synchronizing submodule url for 'packages/uwt'
Synchronizing submodule url for 'packages/vbox-disable-timesync'
Synchronizing submodule url for 'packages/whonix-base-files'
Synchronizing submodule url for 'packages/whonix-developer-meta-files'
Synchronizing submodule url for 'packages/whonix-firewall'
Synchronizing submodule url for 'packages/whonix-gw-desktop-shortcuts'
Synchronizing submodule url for 'packages/whonix-gw-kde-desktop-conf'
Synchronizing submodule url for 'packages/whonix-gw-network-conf'
Synchronizing submodule url for 'packages/whonix-host-firewall'
Synchronizing submodule url for 'packages/whonix-initializer'
Synchronizing submodule url for 'packages/whonix-legacy'
Synchronizing submodule url for 'packages/whonix-libvirt'
Synchronizing submodule url for 'packages/whonix-repository'
Synchronizing submodule url for 'packages/whonix-setup-wizard'
Synchronizing submodule url for 'packages/whonix-welcome-page'
Synchronizing submodule url for 'packages/whonix-ws-desktop-shortcuts'
Synchronizing submodule url for 'packages/whonix-ws-irc-chat-support'
Synchronizing submodule url for 'packages/whonix-ws-kde-desktop-conf'
Synchronizing submodule url for 'packages/whonix-ws-network-conf'
Synchronizing submodule url for 'packages/whonix-ws-start-menu-additions'
Synchronizing submodule url for 'packages/whonix-xfce-desktop-config'
Synchronizing submodule url for 'packages/whonixcheck'
Synchronizing submodule url for 'packages/whonixsetup'
Synchronizing submodule url for 'packages/xchat-improved-privacy'
+ sudo --non-interactive -u user git submodule update --init --recursive --jobs=200
+ true 'INFO: Updated git sub modules.'
+ /home/user/Whonix/packages/security-misc//usr/lib/security-misc/apt-get-wrapper -o Acquire::http::Proxy=http://127.0.0.1:3142 -o Acquire::https::Proxy=http://127.0.0.1:3142 -o Acquire::tor::Proxy=http://127.0.0.1:3142 -o Acquire::Languages=none -o Acquire::IndexTargets::deb::Contents-deb::DefaultEnabled=false -o Acquire::Retries=3 -o Dir::Etc::sourcelist=/home/user/Whonix/build_sources/debian_stable_current_clearnet.list -o Dir::Etc::sourceparts=- update
Get:1 http://HTTPS///deb.debian.org/debian-security stretch/updates InRelease [94.3 kB]
Get:2 http://HTTPS///deb.debian.org/debian stretch-backports InRelease [91.8 kB]
Ign:3 http://HTTPS///deb.debian.org/debian stretch InRelease
Hit:4 http://HTTPS///deb.debian.org/debian stretch Release
Get:5 http://HTTPS///deb.debian.org/debian stretch-backports/main Sources.diff/Index [27.8 kB]
Get:7 http://HTTPS///deb.debian.org/debian stretch-backports/main i386 Packages.diff/Index [27.8 kB]
Get:8 http://HTTPS///deb.debian.org/debian stretch-backports/main Sources 2019-03-15-1409.20.pdiff [4509 B]
Get:8 http://HTTPS///deb.debian.org/debian stretch-backports/main Sources 2019-03-15-1409.20.pdiff [4509 B]
Get:9 http://HTTPS///deb.debian.org/debian stretch-backports/main i386 Packages 2019-03-15-1409.20.pdiff [1384 B]
Get:9 http://HTTPS///deb.debian.org/debian stretch-backports/main i386 Packages 2019-03-15-1409.20.pdiff [1384 B]
Fetched 248 kB in 3s (68.2 kB/s)
Reading package lists...
+ '[' '!' 0 = 0 ']'
+ local packages_to_be_installed
+ packages_to_be_installed+='  sudo  ruby-ronn  diffutils  debhelper  dialog  haveged  devscripts  git  reprepro  libfile-fcntllock-perl  config-package-dev  dh-apparmor  dh-systemd  dh-python  build-essential  lintian  gawk  bash-completion  grep  debian-archive-keyring  vbindiff  lsb-release  pv  python-all-dev  python-stdeb  time  cowbuilder  strip-nondeterminism  mktorrent  apt-transport-tor  apt-transport-https  python  gnupg2  apt-cacher-ng  fakeroot  '
+ '[' '' = true ']'
+ true 'INFO: Not installing eatmydata, because not using '\''--unsafe-io true'\''.'
+ '[' 1 = 1 ']'
+ local bare_metal_basic_package_list
++ grep -vE '^\s*#' /home/user/Whonix/grml_packages
++ tr '\n' ' '
+ bare_metal_basic_package_list=' locales initramfs-tools eatmydata apt-transport-https apt-transport-tor python '
+ packages_to_be_installed+='  locales initramfs-tools eatmydata apt-transport-https apt-transport-tor python  '
+ apt-get -o Acquire::http::Proxy=http://127.0.0.1:3142 -o Acquire::https::Proxy=http://127.0.0.1:3142 -o Acquire::tor::Proxy=http://127.0.0.1:3142 -o Acquire::Languages=none -o Acquire::IndexTargets::deb::Contents-deb::DefaultEnabled=false -o Acquire::Retries=3 -o Dir::Etc::sourcelist=/home/user/Whonix/build_sources/debian_stable_current_clearnet.list -o Dir::Etc::sourceparts=- --no-install-recommends --yes install sudo ruby-ronn diffutils debhelper dialog haveged devscripts git reprepro libfile-fcntllock-perl config-package-dev dh-apparmor dh-systemd dh-python build-essential lintian gawk bash-completion grep debian-archive-keyring vbindiff lsb-release pv python-all-dev python-stdeb time cowbuilder strip-nondeterminism mktorrent apt-transport-tor apt-transport-https python gnupg2 apt-cacher-ng fakeroot locales initramfs-tools eatmydata apt-transport-https apt-transport-tor python
Reading package lists... Done
Building dependency tree       
Reading state information... Done
apt-transport-https is already the newest version (1.4.9).
git is already the newest version (1:2.11.0-3+deb9u4).
dh-apparmor is already the newest version (2.11.0-3+deb9u2).
apt-cacher-ng is already the newest version (2-2).
apt-transport-tor is already the newest version (0.3).
bash-completion is already the newest version (1:2.1-4.3).
build-essential is already the newest version (12.3).
config-package-dev is already the newest version (5.1.2).
cowbuilder is already the newest version (0.85).
debhelper is already the newest version (10.2.5).
dh-systemd is already the newest version (10.2.5).
debian-archive-keyring is already the newest version (2017.5).
devscripts is already the newest version (2.17.6+deb9u2).
dh-python is already the newest version (2.20170125).
dialog is already the newest version (1.3-20160828-2).
diffutils is already the newest version (1:3.5-3).
fakeroot is already the newest version (1.21-3.1).
gawk is already the newest version (1:4.1.4+dfsg-1).
locales is already the newest version (2.24-11+deb9u4).
gnupg2 is already the newest version (2.1.18-8~deb9u4).
grep is already the newest version (2.27-2).
haveged is already the newest version (1.9.1-5+deb9u1).
initramfs-tools is already the newest version (0.130).
eatmydata is already the newest version (105-5).
libfile-fcntllock-perl is already the newest version (0.22-3+b2).
lintian is already the newest version (2.5.50.4).
lsb-release is already the newest version (9.20161125).
mktorrent is already the newest version (1.0-4+b2).
pv is already the newest version (1.6.0-1+b1).
python is already the newest version (2.7.13-2).
python-all-dev is already the newest version (2.7.13-2).
reprepro is already the newest version (5.1.1-1).
ruby-ronn is already the newest version (0.7.3-5).
python-stdeb is already the newest version (0.8.5-1).
strip-nondeterminism is already the newest version (0.034-1).
sudo is already the newest version (1.8.19p1-2.1).
time is already the newest version (1.7-25.1+b1).
vbindiff is already the newest version (3.0-beta4-1+b3).
0 upgraded, 0 newly installed, 0 to remove and 2 not upgraded.
+ '[' '' = true ']'
+ cat /usr/sbin/policy-rc.d
cat: /usr/sbin/policy-rc.d: No such file or directory
+ true
+ cowbuilder_setup
+ cowbuilder_setup_do
+ true 'INFO: Setting up cowbuilder...'
++ cat /home/user/Whonix/build_sources/debian_stable_current_clearnet.list
+ whonix_build_sources_list_primary_contents='## Copyright (C) 2012 - 2018 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## Using specific codenames (for example: "stretch") rather than generic code
## names (for example: "stable") because grml-debootstrap did not support
## generic code names for --release. See also:
## github.com/grml/grml-debootstrap/issues/37

## Using contrib, because it contains virtualbox-guest-x11.

## Added deb-src so source package can also be downloaded.

deb http://HTTPS///deb.debian.org/debian-security/ stretch/updates main contrib non-free
deb-src http://HTTPS///deb.debian.org/debian-security/ stretch/updates main contrib non-free

## required for virtualbox
deb http://HTTPS///deb.debian.org/debian stretch-backports main contrib non-free
deb-src http://HTTPS///deb.debian.org/debian stretch-backports main contrib non-free

deb http://HTTPS///deb.debian.org/debian stretch main contrib non-free
deb-src http://HTTPS///deb.debian.org/debian stretch main contrib non-free

## Last entry must be a "good" one since whonix_build_apt_stable_release is set
## from last line starting with '\''deb'\''. Should be "stretch" (stable) and not
## backports or something else.'
+ export whonix_build_sources_list_primary_contents
+ '[' '' = true ']'
+ test -f /etc/hostname
+ mount
+ grep tmpfs
+ grep /var/cache/pbuilder
+ mount -t tmpfs -o size=2G none /var/cache/pbuilder
+ cat /home/user/whonix_binary/pbuilder.conf
## This is an auto generated file.
## Auto generated by /home/user/Whonix/help-steps/variables.
## Edits will be lost!

## Debugging.
#set -x

APTGETOPT[${#APTGETOPT[@]}]="-o Acquire::http::Proxy=http://127.0.0.1:3142 -o Acquire::https::Proxy=http://127.0.0.1:3142 -o Acquire::tor::Proxy=http://127.0.0.1:3142 -o Acquire::Languages=none -o Acquire::IndexTargets::deb::Contents-deb::DefaultEnabled=false -o Acquire::Retries=3"

APTGETOPT[${#APTGETOPT[@]}]="-o Acquire::BlockDotOnion=false"

export whonix_aptgetop_file

## making pbuilder /usr/lib/pbuilder/pbuilder-createbuildenv work with mmdebstrap.
## so it can be read by help-steps/pbuilder-debootstrap-command-filter
export BUILDPLACE

## Debugging.
true "APTGETOPT: ${APTGETOPT[@]}"
true "BUILDPLACE: $BUILDPLACE"
true "whonix_aptgetop_file: $whonix_aptgetop_file"

## End of /home/user/whonix_binary/pbuilder.conf.

+ cow_folder=/var/cache/pbuilder/base.cow
+ '[' -d /var/cache/pbuilder/base.cow ']'
+ local cowbuilder_exit_code
+ cowbuilder_exit_code=0
+ env http_proxy=http://127.0.0.1:3142 SOURCE_DATE_EPOCH=1548374400 cowbuilder --create --configfile /home/user/whonix_binary/pbuilder.conf --distribution stretch --mirror http://HTTPS///deb.debian.org/debian --debootstrap /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter --hookdir /home/user/Whonix/help-steps/pbuilder-hooks --extrapackages 'sudo devscripts debhelper strip-nondeterminism fakeroot apt-transport-tor apt-transport-https python eatmydata aptitude cowdancer'
I: Invoking pbuilder
I: forking: pbuilder create --configfile /home/user/whonix_binary/pbuilder.conf --debootstrap /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter --hookdir /home/user/Whonix/help-steps/pbuilder-hooks --buildplace /var/cache/pbuilder/base.cow --mirror http://HTTPS///deb.debian.org/debian --distribution stretch --no-targz --extrapackages 'sudo devscripts debhelper strip-nondeterminism fakeroot apt-transport-tor apt-transport-https python eatmydata aptitude cowdancer cowdancer'
W: /root/.pbuilderrc does not exist
I: Running in no-targz mode
I: Distribution is stretch.
I: Current time: Fri Mar 15 16:47:57 UTC 2019
I: pbuilder-time-stamp: 1552668477
I: Building the build environment
I: running /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter
/home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter
+ set -e
+ true 'INFO: Currently running /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter.'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
+ true 'BUILDPLACE: /var/cache/pbuilder/base.cow'
+ true 'whonix_build_sources_list_primary: /home/user/Whonix/build_sources/debian_stable_current_clearnet.list'
+ true 'http_proxy: http://127.0.0.1:3142'
+ true 'REPO_PROXY: '
+ true 'APTGETOPT: '
+ true 'BUILD_TARGET_ARCH: amd64'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow '
+ args='--include=apt --variant=buildd --force-check-gpg stretch  '
+ args='--include=apt --variant=buildd  stretch  '
+ args='--include=apt --variant=buildd  stretch  '
+ args=' --variant=buildd  stretch  '
+ args='   stretch  '
+ true 'args:    stretch  '
+ '[' /var/cache/pbuilder/base.cow = '' ']'
+ true '/home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter: probably called by called by pbuilder'
+ include_opt=--include=apt,sudo,devscripts,debhelper,strip-nondeterminism,fakeroot,apt-transport-tor,apt-transport-https,python,eatmydata,aptitude,cowdancer
+ cat /home/user/whonix_binary/aptgetopt.conf
Acquire::http::Proxy "http://127.0.0.1:3142";
Acquire::https::Proxy "http://127.0.0.1:3142";
Acquire::tor::Proxy "http://127.0.0.1:3142";
Acquire::Languages none;
Acquire::IndexTargets::deb::Contents-deb::DefaultEnabled false;
Acquire::Retries 3;
+ /home/user/Whonix/help-steps/mmdebstrap --verbose --architectures=amd64 --aptopt=/home/user/whonix_binary/aptgetopt.conf --include=apt,sudo,devscripts,debhelper,strip-nondeterminism,fakeroot,apt-transport-tor,apt-transport-https,python,eatmydata,aptitude,cowdancer stretch /var/cache/pbuilder/base.cow /home/user/Whonix/build_sources/debian_stable_current_clearnet.list
I: automatically chosen mode: root
I: amd64 cannot be executed, falling back to qemu-user
I: Reading sources.list from standard input...
I: running apt-get update...</code></pre>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/_def'><span itemprop='name'>_def</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-15T16:52:18Z' class='post-time'>
                March 15, 2019,  4:52pm
              </time>
              <meta itemprop='dateModified' content='2019-03-15T16:52:18Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Build log full Part II</p>
<pre><code>Get:1 http://HTTPS///deb.debian.org/debian-security stretch/updates InRelease [94.3 kB]
Get:2 http://HTTPS///deb.debian.org/debian stretch-backports InRelease [91.8 kB]
Ign:3 http://HTTPS///deb.debian.org/debian stretch InRelease
Get:4 http://HTTPS///deb.debian.org/debian-security stretch/updates/main Sources [195 kB]
Get:5 http://HTTPS///deb.debian.org/debian-security stretch/updates/non-free Sources [1216 B]
Get:6 http://HTTPS///deb.debian.org/debian-security stretch/updates/contrib Sources [1384 B]
Get:7 http://HTTPS///deb.debian.org/debian-security stretch/updates/contrib amd64 Packages [1760 B]
Get:8 http://HTTPS///deb.debian.org/debian-security stretch/updates/non-free amd64 Packages [1600 B]
Get:9 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 Packages [476 kB]
Get:10 http://HTTPS///deb.debian.org/debian stretch Release [118 kB]
Get:11 http://HTTPS///deb.debian.org/debian stretch-backports/contrib Sources [6448 B]
Get:12 http://HTTPS///deb.debian.org/debian stretch-backports/non-free Sources [8456 B]
Get:13 http://HTTPS///deb.debian.org/debian stretch-backports/main Sources [587 kB]
Get:14 http://HTTPS///deb.debian.org/debian stretch-backports/main amd64 Packages [572 kB]
Get:15 http://HTTPS///deb.debian.org/debian stretch-backports/non-free amd64 Packages [32.6 kB]
Get:16 http://HTTPS///deb.debian.org/debian stretch-backports/contrib amd64 Packages [10.9 kB]
Get:17 http://HTTPS///deb.debian.org/debian stretch Release.gpg [2434 B]
Get:18 http://HTTPS///deb.debian.org/debian stretch/non-free Sources [79.4 kB]
Get:19 http://HTTPS///deb.debian.org/debian stretch/contrib Sources [44.7 kB]
Get:20 http://HTTPS///deb.debian.org/debian stretch/main Sources [6746 kB]
Get:21 http://HTTPS///deb.debian.org/debian stretch/contrib amd64 Packages [50.9 kB]
Get:22 http://HTTPS///deb.debian.org/debian stretch/main amd64 Packages [7084 kB]
Get:23 http://HTTPS///deb.debian.org/debian stretch/non-free amd64 Packages [78.3 kB]
Fetched 16.3 MB in 9s (1736 kB/s)
Reading package lists...
I: downloading packages with apt...
Reading package lists...
Building dependency tree...
The following additional packages will be installed:
  debconf e2fslibs gcc-6-base libacl1 libattr1 libaudit-common libaudit1
  libblkid1 libbz2-1.0 libc6 libcap-ng0 libcomerr2 libdb5.3 libdebconfclient0
  libfdisk1 libgcc1 libgcrypt20 libgpg-error0 liblz4-1 liblzma5 libmount1
  libncursesw5 libpam-modules libpam-modules-bin libpam-runtime libpam0g
  libpcre3 libselinux1 libsemanage-common libsemanage1 libsepol1 libsmartcols1
  libss2 libsystemd0 libtinfo5 libudev1 libustr-1.0-1 libuuid1 mawk
  multiarch-support passwd sensible-utils zlib1g
Suggested packages:
  bash-doc debconf-doc debconf-utils whiptail | dialog
  libterm-readline-gnu-perl libgtk2-perl libnet-ldap-perl perl libqtgui4-perl
  libqtcore4-perl diffutils-doc wdiff apt debsig-verify gpart parted fuse2fs
  e2fsck-static mlocate | locate less glibc-doc libc-l10n locales rng-tools
  libpam-doc nfs-common bzip2 ncompress xz-utils tar-scripts dosfstools kbd
  | console-tools util-linux-locales
Recommended packages:
  bash-completion bsdmainutils apt-utils debconf-i18n manpages libgpm2
  uuid-runtime
The following NEW packages will be installed:
  base-files base-passwd bash bsdutils coreutils dash debconf debianutils
  diffutils dpkg e2fslibs e2fsprogs findutils gcc-6-base grep gzip hostname
  init-system-helpers libacl1 libattr1 libaudit-common libaudit1 libblkid1
  libbz2-1.0 libc-bin libc6 libcap-ng0 libcomerr2 libdb5.3 libdebconfclient0
  libfdisk1 libgcc1 libgcrypt20 libgpg-error0 liblz4-1 liblzma5 libmount1
  libncursesw5 libpam-modules libpam-modules-bin libpam-runtime libpam0g
  libpcre3 libselinux1 libsemanage-common libsemanage1 libsepol1 libsmartcols1
  libss2 libsystemd0 libtinfo5 libudev1 libustr-1.0-1 libuuid1 login mawk
  mount multiarch-support ncurses-base ncurses-bin passwd perl-base sed
  sensible-utils sysvinit-utils tar util-linux zlib1g
0 upgraded, 68 newly installed, 0 to remove and 0 not upgraded.
Need to get 24.9 MB of archives.
After this operation, 89.6 MB of additional disk space will be used.
Get:1 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 gcc-6-base amd64 6.3.0-18+deb9u1 [180 kB]
Get:2 http://HTTPS///deb.debian.org/debian stretch/main amd64 libc6 amd64 2.24-11+deb9u4 [2694 kB]
Get:3 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libgcc1 amd64 1:6.3.0-18+deb9u1 [38.0 kB]
Get:4 http://HTTPS///deb.debian.org/debian stretch/main amd64 mawk amd64 1.3.3-17+b3 [84.6 kB]
Get:5 http://HTTPS///deb.debian.org/debian stretch/main amd64 base-files amd64 9.9+deb9u8 [67.4 kB]
Get:6 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 sensible-utils all 0.0.9+deb9u1 [10.8 kB]
Get:7 http://HTTPS///deb.debian.org/debian stretch/main amd64 debianutils amd64 4.8.1.1 [100 kB]
Get:8 http://HTTPS///deb.debian.org/debian stretch/main amd64 libbz2-1.0 amd64 1.0.6-8.1 [43.5 kB]
Get:9 http://HTTPS///deb.debian.org/debian stretch/main amd64 liblzma5 amd64 5.2.2-1.2+b1 [234 kB]
Get:10 http://HTTPS///deb.debian.org/debian stretch/main amd64 multiarch-support amd64 2.24-11+deb9u4 [201 kB]
Get:11 http://HTTPS///deb.debian.org/debian stretch/main amd64 libpcre3 amd64 2:8.39-3 [337 kB]
Get:12 http://HTTPS///deb.debian.org/debian stretch/main amd64 libselinux1 amd64 2.6-3+b3 [101 kB]
Get:13 http://HTTPS///deb.debian.org/debian stretch/main amd64 zlib1g amd64 1:1.2.8.dfsg-5 [87.5 kB]
Get:14 http://HTTPS///deb.debian.org/debian stretch/main amd64 libattr1 amd64 1:2.4.47-2+b2 [18.4 kB]
Get:15 http://HTTPS///deb.debian.org/debian stretch/main amd64 libacl1 amd64 2.2.52-3+b1 [28.1 kB]
Get:16 http://HTTPS///deb.debian.org/debian stretch/main amd64 tar amd64 1.29b-1.1 [759 kB]
Get:17 http://HTTPS///deb.debian.org/debian stretch/main amd64 dpkg amd64 1.18.25 [2115 kB]
Get:18 http://HTTPS///deb.debian.org/debian stretch/main amd64 dash amd64 0.5.8-2.4 [109 kB]
Get:19 http://HTTPS///deb.debian.org/debian stretch/main amd64 libtinfo5 amd64 6.0+20161126-1+deb9u2 [300 kB]
Get:20 http://HTTPS///deb.debian.org/debian stretch/main amd64 bash amd64 4.4-5 [1427 kB]
Get:21 http://HTTPS///deb.debian.org/debian stretch/main amd64 libgpg-error0 amd64 1.26-2 [112 kB]
Get:22 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libgcrypt20 amd64 1.7.6-2+deb9u3 [524 kB]
Get:23 http://HTTPS///deb.debian.org/debian stretch/main amd64 liblz4-1 amd64 0.0~r131-2+b1 [33.3 kB]
Get:24 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libsystemd0 amd64 232-25+deb9u9 [281 kB]
Get:25 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 bsdutils amd64 1:2.29.2-1+deb9u1 [112 kB]
Get:26 http://HTTPS///deb.debian.org/debian stretch/main amd64 coreutils amd64 8.26-3 [2870 kB]
Get:27 http://HTTPS///deb.debian.org/debian stretch/main amd64 diffutils amd64 1:3.5-3 [314 kB]
Get:28 http://HTTPS///deb.debian.org/debian stretch/main amd64 e2fslibs amd64 1.43.4-2 [208 kB]
Get:29 http://HTTPS///deb.debian.org/debian stretch/main amd64 libaudit-common all 1:2.6.7-2 [18.1 kB]
Get:30 http://HTTPS///deb.debian.org/debian stretch/main amd64 libcap-ng0 amd64 0.7.7-3+b1 [13.8 kB]
Get:31 http://HTTPS///deb.debian.org/debian stretch/main amd64 libaudit1 amd64 1:2.6.7-2 [51.3 kB]
Get:32 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 perl-base amd64 5.24.1-3+deb9u5 [1345 kB]
Get:33 http://HTTPS///deb.debian.org/debian stretch/main amd64 debconf all 1.5.61 [159 kB]
Get:34 http://HTTPS///deb.debian.org/debian stretch/main amd64 libpam0g amd64 1.1.8-3.6 [125 kB]
Get:35 http://HTTPS///deb.debian.org/debian stretch/main amd64 libsemanage-common all 2.6-2 [26.9 kB]
Get:36 http://HTTPS///deb.debian.org/debian stretch/main amd64 libsepol1 amd64 2.6-2 [241 kB]
Get:37 http://HTTPS///deb.debian.org/debian stretch/main amd64 libustr-1.0-1 amd64 1.0.4-6 [76.3 kB]
Get:38 http://HTTPS///deb.debian.org/debian stretch/main amd64 libsemanage1 amd64 2.6-2 [103 kB]
Get:39 http://HTTPS///deb.debian.org/debian stretch/main amd64 libdb5.3 amd64 5.3.28-12+deb9u1 [679 kB]
Get:40 http://HTTPS///deb.debian.org/debian stretch/main amd64 libpam-modules-bin amd64 1.1.8-3.6 [105 kB]
Get:41 http://HTTPS///deb.debian.org/debian stretch/main amd64 libpam-modules amd64 1.1.8-3.6 [308 kB]
Get:42 http://HTTPS///deb.debian.org/debian stretch/main amd64 passwd amd64 1:4.4-4.1 [996 kB]
Get:43 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libuuid1 amd64 2.29.2-1+deb9u1 [70.1 kB]
Get:44 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libblkid1 amd64 2.29.2-1+deb9u1 [168 kB]
Get:45 http://HTTPS///deb.debian.org/debian stretch/main amd64 libcomerr2 amd64 1.43.4-2 [63.5 kB]
Get:46 http://HTTPS///deb.debian.org/debian stretch/main amd64 libss2 amd64 1.43.4-2 [67.7 kB]
Get:47 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libfdisk1 amd64 2.29.2-1+deb9u1 [203 kB]
Get:48 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libmount1 amd64 2.29.2-1+deb9u1 [178 kB]
Get:49 http://HTTPS///deb.debian.org/debian stretch/main amd64 libncursesw5 amd64 6.0+20161126-1+deb9u2 [115 kB]
Get:50 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libsmartcols1 amd64 2.29.2-1+deb9u1 [126 kB]
Get:51 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libudev1 amd64 232-25+deb9u9 [126 kB]
Get:52 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 util-linux amd64 2.29.2-1+deb9u1 [981 kB]
Get:53 http://HTTPS///deb.debian.org/debian stretch/main amd64 e2fsprogs amd64 1.43.4-2 [946 kB]
Get:54 http://HTTPS///deb.debian.org/debian stretch/main amd64 findutils amd64 4.6.0+git+20161106-2 [622 kB]
Get:55 http://HTTPS///deb.debian.org/debian stretch/main amd64 grep amd64 2.27-2 [382 kB]
Get:56 http://HTTPS///deb.debian.org/debian stretch/main amd64 gzip amd64 1.6-5+b1 [114 kB]
Get:57 http://HTTPS///deb.debian.org/debian stretch/main amd64 hostname amd64 3.18+b1 [14.9 kB]
Get:58 http://HTTPS///deb.debian.org/debian stretch/main amd64 libpam-runtime all 1.1.8-3.6 [212 kB]
Get:59 http://HTTPS///deb.debian.org/debian stretch/main amd64 login amd64 1:4.4-4.1 [790 kB]
Get:60 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 mount amd64 2.29.2-1+deb9u1 [189 kB]
Get:61 http://HTTPS///deb.debian.org/debian stretch/main amd64 ncurses-bin amd64 6.0+20161126-1+deb9u2 [366 kB]
Get:62 http://HTTPS///deb.debian.org/debian stretch/main amd64 sed amd64 4.4-1 [280 kB]
Get:63 http://HTTPS///deb.debian.org/debian stretch/main amd64 libdebconfclient0 amd64 0.227 [47.8 kB]
Get:64 http://HTTPS///deb.debian.org/debian stretch/main amd64 base-passwd amd64 3.5.43 [57.7 kB]
Get:65 http://HTTPS///deb.debian.org/debian stretch/main amd64 init-system-helpers all 1.48 [44.0 kB]
Get:66 http://HTTPS///deb.debian.org/debian stretch/main amd64 libc-bin amd64 2.24-11+deb9u4 [782 kB]
Get:67 http://HTTPS///deb.debian.org/debian stretch/main amd64 ncurses-base all 6.0+20161126-1+deb9u2 [238 kB]
Get:68 http://HTTPS///deb.debian.org/debian stretch/main amd64 sysvinit-utils amd64 2.88dsf-59.9 [68.4 kB]
Fetched 24.9 MB in 2s (12.0 MB/s)
Download complete and in download only mode
I: extracting archives...
done
I: marker-b installing packages...
env, --unset=APT_CONFIG, /usr/sbin/chroot, /var/cache/pbuilder/base.cow/usr/sbin/chroot: failed to run command ‘dpkg’: Permission denied
env --unset=APT_CONFIG /usr/sbin/chroot /var/cache/pbuilder/base.cow dpkg --install --force-depends /var/cache/apt/archives//sysvinit-utils_2.88dsf-59.9_amd64.deb /var/cache/apt/archives//ncurses-base_6.0+20161126-1+deb9u2_all.deb /var/cache/apt/archives//libc-bin_2.24-11+deb9u4_amd64.deb /var/cache/apt/archives//init-system-helpers_1.48_all.deb /var/cache/apt/archives//base-passwd_3.5.43_amd64.deb /var/cache/apt/archives//libdebconfclient0_0.227_amd64.deb /var/cache/apt/archives//sed_4.4-1_amd64.deb /var/cache/apt/archives//ncurses-bin_6.0+20161126-1+deb9u2_amd64.deb /var/cache/apt/archives//mount_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//login_1%3a4.4-4.1_amd64.deb /var/cache/apt/archives//libpam-runtime_1.1.8-3.6_all.deb /var/cache/apt/archives//hostname_3.18+b1_amd64.deb /var/cache/apt/archives//gzip_1.6-5+b1_amd64.deb /var/cache/apt/archives//grep_2.27-2_amd64.deb /var/cache/apt/archives//findutils_4.6.0+git+20161106-2_amd64.deb /var/cache/apt/archives//e2fsprogs_1.43.4-2_amd64.deb /var/cache/apt/archives//util-linux_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libudev1_232-25+deb9u9_amd64.deb /var/cache/apt/archives//libsmartcols1_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libncursesw5_6.0+20161126-1+deb9u2_amd64.deb /var/cache/apt/archives//libmount1_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libfdisk1_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libss2_1.43.4-2_amd64.deb /var/cache/apt/archives//libcomerr2_1.43.4-2_amd64.deb /var/cache/apt/archives//libblkid1_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libuuid1_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//passwd_1%3a4.4-4.1_amd64.deb /var/cache/apt/archives//libpam-modules_1.1.8-3.6_amd64.deb /var/cache/apt/archives//libpam-modules-bin_1.1.8-3.6_amd64.deb /var/cache/apt/archives//libdb5.3_5.3.28-12+deb9u1_amd64.deb /var/cache/apt/archives//libsemanage1_2.6-2_amd64.deb /var/cache/apt/archives//libustr-1.0-1_1.0.4-6_amd64.deb /var/cache/apt/archives//libsepol1_2.6-2_amd64.deb /var/cache/apt/archives//libsemanage-common_2.6-2_all.deb /var/cache/apt/archives//libpam0g_1.1.8-3.6_amd64.deb /var/cache/apt/archives//debconf_1.5.61_all.deb /var/cache/apt/archives//perl-base_5.24.1-3+deb9u5_amd64.deb /var/cache/apt/archives//libaudit1_1%3a2.6.7-2_amd64.deb /var/cache/apt/archives//libcap-ng0_0.7.7-3+b1_amd64.deb /var/cache/apt/archives//libaudit-common_1%3a2.6.7-2_all.deb /var/cache/apt/archives//e2fslibs_1.43.4-2_amd64.deb /var/cache/apt/archives//diffutils_1%3a3.5-3_amd64.deb /var/cache/apt/archives//coreutils_8.26-3_amd64.deb /var/cache/apt/archives//bsdutils_1%3a2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libsystemd0_232-25+deb9u9_amd64.deb /var/cache/apt/archives//liblz4-1_0.0~r131-2+b1_amd64.deb /var/cache/apt/archives//libgcrypt20_1.7.6-2+deb9u3_amd64.deb /var/cache/apt/archives//libgpg-error0_1.26-2_amd64.deb /var/cache/apt/archives//bash_4.4-5_amd64.deb /var/cache/apt/archives//libtinfo5_6.0+20161126-1+deb9u2_amd64.deb /var/cache/apt/archives//dash_0.5.8-2.4_amd64.deb /var/cache/apt/archives//dpkg_1.18.25_amd64.deb /var/cache/apt/archives//tar_1.29b-1.1_amd64.deb /var/cache/apt/archives//libacl1_2.2.52-3+b1_amd64.deb /var/cache/apt/archives//libattr1_1%3a2.4.47-2+b2_amd64.deb /var/cache/apt/archives//zlib1g_1%3a1.2.8.dfsg-5_amd64.deb /var/cache/apt/archives//libselinux1_2.6-3+b3_amd64.deb /var/cache/apt/archives//libpcre3_2%3a8.39-3_amd64.deb /var/cache/apt/archives//multiarch-support_2.24-11+deb9u4_amd64.deb /var/cache/apt/archives//liblzma5_5.2.2-1.2+b1_amd64.deb /var/cache/apt/archives//libbz2-1.0_1.0.6-8.1_amd64.deb /var/cache/apt/archives//debianutils_4.8.1.1_amd64.deb /var/cache/apt/archives//sensible-utils_0.0.9+deb9u1_all.deb /var/cache/apt/archives//base-files_9.9+deb9u8_amd64.deb /var/cache/apt/archives//mawk_1.3.3-17+b3_amd64.deb /var/cache/apt/archives//libgcc1_1%3a6.3.0-18+deb9u1_amd64.deb /var/cache/apt/archives//libc6_2.24-11+deb9u4_amd64.deb /var/cache/apt/archives//gcc-6-base_6.3.0-18+deb9u1_amd64.deb failed at /home/user/Whonix/help-steps/mmdebstrap line 551.
E: /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter failed
W: Aborting with an error
E: pbuilder create failed
I: forking: rm -rf /var/cache/pbuilder/base.cow
+ cowbuilder_exit_code=1
+ true
+ '[' -d /var/cache/pbuilder/base.cow ']'
+ '[' '!' 1 = 0 ']'
+ return 1
+ true 'cowbuilder_setup: try again'
+ cowbuilder_setup_do
+ true 'INFO: Setting up cowbuilder...'
++ cat /home/user/Whonix/build_sources/debian_stable_current_clearnet.list
+ whonix_build_sources_list_primary_contents='## Copyright (C) 2012 - 2018 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

## Using specific codenames (for example: "stretch") rather than generic code
## names (for example: "stable") because grml-debootstrap did not support
## generic code names for --release. See also:
## github.com/grml/grml-debootstrap/issues/37

## Using contrib, because it contains virtualbox-guest-x11.

## Added deb-src so source package can also be downloaded.

deb http://HTTPS///deb.debian.org/debian-security/ stretch/updates main contrib non-free
deb-src http://HTTPS///deb.debian.org/debian-security/ stretch/updates main contrib non-free

## required for virtualbox
deb http://HTTPS///deb.debian.org/debian stretch-backports main contrib non-free
deb-src http://HTTPS///deb.debian.org/debian stretch-backports main contrib non-free

deb http://HTTPS///deb.debian.org/debian stretch main contrib non-free
deb-src http://HTTPS///deb.debian.org/debian stretch main contrib non-free

## Last entry must be a "good" one since whonix_build_apt_stable_release is set
## from last line starting with '\''deb'\''. Should be "stretch" (stable) and not
## backports or something else.'
+ export whonix_build_sources_list_primary_contents
+ '[' '' = true ']'
+ test -f /etc/hostname
+ mount
+ grep tmpfs
+ grep /var/cache/pbuilder
none on /var/cache/pbuilder type tmpfs (rw,relatime,size=2097152k)
+ true 'INFO: /var/cache/pbuilder already tmpfs.'
+ cat /home/user/whonix_binary/pbuilder.conf
## This is an auto generated file.
## Auto generated by /home/user/Whonix/help-steps/variables.
## Edits will be lost!

## Debugging.
#set -x

APTGETOPT[${#APTGETOPT[@]}]="-o Acquire::http::Proxy=http://127.0.0.1:3142 -o Acquire::https::Proxy=http://127.0.0.1:3142 -o Acquire::tor::Proxy=http://127.0.0.1:3142 -o Acquire::Languages=none -o Acquire::IndexTargets::deb::Contents-deb::DefaultEnabled=false -o Acquire::Retries=3"

APTGETOPT[${#APTGETOPT[@]}]="-o Acquire::BlockDotOnion=false"

export whonix_aptgetop_file

## making pbuilder /usr/lib/pbuilder/pbuilder-createbuildenv work with mmdebstrap.
## so it can be read by help-steps/pbuilder-debootstrap-command-filter
export BUILDPLACE

## Debugging.
true "APTGETOPT: ${APTGETOPT[@]}"
true "BUILDPLACE: $BUILDPLACE"
true "whonix_aptgetop_file: $whonix_aptgetop_file"

## End of /home/user/whonix_binary/pbuilder.conf.

+ cow_folder=/var/cache/pbuilder/base.cow
+ '[' -d /var/cache/pbuilder/base.cow ']'
+ local cowbuilder_exit_code
+ cowbuilder_exit_code=0
+ env http_proxy=http://127.0.0.1:3142 SOURCE_DATE_EPOCH=1548374400 cowbuilder --create --configfile /home/user/whonix_binary/pbuilder.conf --distribution stretch --mirror http://HTTPS///deb.debian.org/debian --debootstrap /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter --hookdir /home/user/Whonix/help-steps/pbuilder-hooks --extrapackages 'sudo devscripts debhelper strip-nondeterminism fakeroot apt-transport-tor apt-transport-https python eatmydata aptitude cowdancer'
I: Invoking pbuilder
I: forking: pbuilder create --configfile /home/user/whonix_binary/pbuilder.conf --debootstrap /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter --hookdir /home/user/Whonix/help-steps/pbuilder-hooks --buildplace /var/cache/pbuilder/base.cow --mirror http://HTTPS///deb.debian.org/debian --distribution stretch --no-targz --extrapackages 'sudo devscripts debhelper strip-nondeterminism fakeroot apt-transport-tor apt-transport-https python eatmydata aptitude cowdancer cowdancer'
W: /root/.pbuilderrc does not exist
I: Running in no-targz mode
I: Distribution is stretch.
I: Current time: Fri Mar 15 16:48:21 UTC 2019
I: pbuilder-time-stamp: 1552668501
I: Building the build environment
I: running /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter
/home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter
+ set -e
+ true 'INFO: Currently running /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter.'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
+ true 'BUILDPLACE: /var/cache/pbuilder/base.cow'
+ true 'whonix_build_sources_list_primary: /home/user/Whonix/build_sources/debian_stable_current_clearnet.list'
+ true 'http_proxy: http://127.0.0.1:3142'
+ true 'REPO_PROXY: '
+ true 'APTGETOPT: '
+ true 'BUILD_TARGET_ARCH: amd64'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
+ args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow '
+ args='--include=apt --variant=buildd --force-check-gpg stretch  '
+ args='--include=apt --variant=buildd  stretch  '
+ args='--include=apt --variant=buildd  stretch  '
+ args=' --variant=buildd  stretch  '
+ args='   stretch  '
+ true 'args:    stretch  '
+ '[' /var/cache/pbuilder/base.cow = '' ']'
+ true '/home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter: probably called by called by pbuilder'
+ include_opt=--include=apt,sudo,devscripts,debhelper,strip-nondeterminism,fakeroot,apt-transport-tor,apt-transport-https,python,eatmydata,aptitude,cowdancer
+ cat /home/user/whonix_binary/aptgetopt.conf
Acquire::http::Proxy "http://127.0.0.1:3142";
Acquire::https::Proxy "http://127.0.0.1:3142";
Acquire::tor::Proxy "http://127.0.0.1:3142";
Acquire::Languages none;
Acquire::IndexTargets::deb::Contents-deb::DefaultEnabled false;
Acquire::Retries 3;
+ /home/user/Whonix/help-steps/mmdebstrap --verbose --architectures=amd64 --aptopt=/home/user/whonix_binary/aptgetopt.conf --include=apt,sudo,devscripts,debhelper,strip-nondeterminism,fakeroot,apt-transport-tor,apt-transport-https,python,eatmydata,aptitude,cowdancer stretch /var/cache/pbuilder/base.cow /home/user/Whonix/build_sources/debian_stable_current_clearnet.list
I: automatically chosen mode: root
I: amd64 cannot be executed, falling back to qemu-user
I: Reading sources.list from standard input...
I: running apt-get update...
Get:1 http://HTTPS///deb.debian.org/debian-security stretch/updates InRelease [94.3 kB]
Get:2 http://HTTPS///deb.debian.org/debian stretch-backports InRelease [91.8 kB]
Ign:3 http://HTTPS///deb.debian.org/debian stretch InRelease
Get:4 http://HTTPS///deb.debian.org/debian-security stretch/updates/main Sources [195 kB]
Get:5 http://HTTPS///deb.debian.org/debian-security stretch/updates/contrib Sources [1384 B]
Get:6 http://HTTPS///deb.debian.org/debian-security stretch/updates/non-free Sources [1216 B]
Get:7 http://HTTPS///deb.debian.org/debian-security stretch/updates/non-free amd64 Packages [1600 B]
Get:8 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 Packages [476 kB]
Get:9 http://HTTPS///deb.debian.org/debian-security stretch/updates/contrib amd64 Packages [1760 B]
Get:10 http://HTTPS///deb.debian.org/debian stretch-backports/non-free Sources [8456 B]
Get:11 http://HTTPS///deb.debian.org/debian stretch-backports/main Sources [587 kB]
Get:12 http://HTTPS///deb.debian.org/debian stretch-backports/contrib Sources [6448 B]
Get:13 http://HTTPS///deb.debian.org/debian stretch-backports/non-free amd64 Packages [32.6 kB]
Get:14 http://HTTPS///deb.debian.org/debian stretch Release [118 kB]
Get:15 http://HTTPS///deb.debian.org/debian stretch-backports/contrib amd64 Packages [10.9 kB]
Get:16 http://HTTPS///deb.debian.org/debian stretch-backports/main amd64 Packages [572 kB]
Get:17 http://HTTPS///deb.debian.org/debian stretch Release.gpg [2434 B]
Get:18 http://HTTPS///deb.debian.org/debian stretch/main Sources [6746 kB]
Get:19 http://HTTPS///deb.debian.org/debian stretch/contrib Sources [44.7 kB]
Get:20 http://HTTPS///deb.debian.org/debian stretch/non-free Sources [79.4 kB]
Get:21 http://HTTPS///deb.debian.org/debian stretch/main amd64 Packages [7084 kB]
Get:22 http://HTTPS///deb.debian.org/debian stretch/non-free amd64 Packages [78.3 kB]
Get:23 http://HTTPS///deb.debian.org/debian stretch/contrib amd64 Packages [50.9 kB]
Fetched 16.3 MB in 6s (2612 kB/s)
Reading package lists...
I: downloading packages with apt...
Reading package lists...
Building dependency tree...
The following additional packages will be installed:
  debconf e2fslibs gcc-6-base libacl1 libattr1 libaudit-common libaudit1
  libblkid1 libbz2-1.0 libc6 libcap-ng0 libcomerr2 libdb5.3 libdebconfclient0
  libfdisk1 libgcc1 libgcrypt20 libgpg-error0 liblz4-1 liblzma5 libmount1
  libncursesw5 libpam-modules libpam-modules-bin libpam-runtime libpam0g
  libpcre3 libselinux1 libsemanage-common libsemanage1 libsepol1 libsmartcols1
  libss2 libsystemd0 libtinfo5 libudev1 libustr-1.0-1 libuuid1 mawk
  multiarch-support passwd sensible-utils zlib1g
Suggested packages:
  bash-doc debconf-doc debconf-utils whiptail | dialog
  libterm-readline-gnu-perl libgtk2-perl libnet-ldap-perl perl libqtgui4-perl
  libqtcore4-perl diffutils-doc wdiff apt debsig-verify gpart parted fuse2fs
  e2fsck-static mlocate | locate less glibc-doc libc-l10n locales rng-tools
  libpam-doc nfs-common bzip2 ncompress xz-utils tar-scripts dosfstools kbd
  | console-tools util-linux-locales
Recommended packages:
  bash-completion bsdmainutils apt-utils debconf-i18n manpages libgpm2
  uuid-runtime
The following NEW packages will be installed:
  base-files base-passwd bash bsdutils coreutils dash debconf debianutils
  diffutils dpkg e2fslibs e2fsprogs findutils gcc-6-base grep gzip hostname
  init-system-helpers libacl1 libattr1 libaudit-common libaudit1 libblkid1
  libbz2-1.0 libc-bin libc6 libcap-ng0 libcomerr2 libdb5.3 libdebconfclient0
  libfdisk1 libgcc1 libgcrypt20 libgpg-error0 liblz4-1 liblzma5 libmount1
  libncursesw5 libpam-modules libpam-modules-bin libpam-runtime libpam0g
  libpcre3 libselinux1 libsemanage-common libsemanage1 libsepol1 libsmartcols1
  libss2 libsystemd0 libtinfo5 libudev1 libustr-1.0-1 libuuid1 login mawk
  mount multiarch-support ncurses-base ncurses-bin passwd perl-base sed
  sensible-utils sysvinit-utils tar util-linux zlib1g
0 upgraded, 68 newly installed, 0 to remove and 0 not upgraded.
Need to get 24.9 MB of archives.
After this operation, 89.6 MB of additional disk space will be used.
Get:1 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 gcc-6-base amd64 6.3.0-18+deb9u1 [180 kB]
Get:2 http://HTTPS///deb.debian.org/debian stretch/main amd64 libc6 amd64 2.24-11+deb9u4 [2694 kB]
Get:3 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libgcc1 amd64 1:6.3.0-18+deb9u1 [38.0 kB]
Get:4 http://HTTPS///deb.debian.org/debian stretch/main amd64 mawk amd64 1.3.3-17+b3 [84.6 kB]
Get:5 http://HTTPS///deb.debian.org/debian stretch/main amd64 base-files amd64 9.9+deb9u8 [67.4 kB]
Get:6 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 sensible-utils all 0.0.9+deb9u1 [10.8 kB]
Get:7 http://HTTPS///deb.debian.org/debian stretch/main amd64 debianutils amd64 4.8.1.1 [100 kB]
Get:8 http://HTTPS///deb.debian.org/debian stretch/main amd64 libbz2-1.0 amd64 1.0.6-8.1 [43.5 kB]
Get:9 http://HTTPS///deb.debian.org/debian stretch/main amd64 liblzma5 amd64 5.2.2-1.2+b1 [234 kB]
Get:10 http://HTTPS///deb.debian.org/debian stretch/main amd64 multiarch-support amd64 2.24-11+deb9u4 [201 kB]
Get:11 http://HTTPS///deb.debian.org/debian stretch/main amd64 libpcre3 amd64 2:8.39-3 [337 kB]
Get:12 http://HTTPS///deb.debian.org/debian stretch/main amd64 libselinux1 amd64 2.6-3+b3 [101 kB]
Get:13 http://HTTPS///deb.debian.org/debian stretch/main amd64 zlib1g amd64 1:1.2.8.dfsg-5 [87.5 kB]
Get:14 http://HTTPS///deb.debian.org/debian stretch/main amd64 libattr1 amd64 1:2.4.47-2+b2 [18.4 kB]
Get:15 http://HTTPS///deb.debian.org/debian stretch/main amd64 libacl1 amd64 2.2.52-3+b1 [28.1 kB]
Get:16 http://HTTPS///deb.debian.org/debian stretch/main amd64 tar amd64 1.29b-1.1 [759 kB]
Get:17 http://HTTPS///deb.debian.org/debian stretch/main amd64 dpkg amd64 1.18.25 [2115 kB]
Get:18 http://HTTPS///deb.debian.org/debian stretch/main amd64 dash amd64 0.5.8-2.4 [109 kB]
Get:19 http://HTTPS///deb.debian.org/debian stretch/main amd64 libtinfo5 amd64 6.0+20161126-1+deb9u2 [300 kB]
Get:20 http://HTTPS///deb.debian.org/debian stretch/main amd64 bash amd64 4.4-5 [1427 kB]
Get:21 http://HTTPS///deb.debian.org/debian stretch/main amd64 libgpg-error0 amd64 1.26-2 [112 kB]
Get:22 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libgcrypt20 amd64 1.7.6-2+deb9u3 [524 kB]
Get:23 http://HTTPS///deb.debian.org/debian stretch/main amd64 liblz4-1 amd64 0.0~r131-2+b1 [33.3 kB]
Get:24 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libsystemd0 amd64 232-25+deb9u9 [281 kB]
Get:25 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 bsdutils amd64 1:2.29.2-1+deb9u1 [112 kB]
Get:26 http://HTTPS///deb.debian.org/debian stretch/main amd64 coreutils amd64 8.26-3 [2870 kB]
Get:27 http://HTTPS///deb.debian.org/debian stretch/main amd64 diffutils amd64 1:3.5-3 [314 kB]
Get:28 http://HTTPS///deb.debian.org/debian stretch/main amd64 e2fslibs amd64 1.43.4-2 [208 kB]
Get:29 http://HTTPS///deb.debian.org/debian stretch/main amd64 libaudit-common all 1:2.6.7-2 [18.1 kB]
Get:30 http://HTTPS///deb.debian.org/debian stretch/main amd64 libcap-ng0 amd64 0.7.7-3+b1 [13.8 kB]
Get:31 http://HTTPS///deb.debian.org/debian stretch/main amd64 libaudit1 amd64 1:2.6.7-2 [51.3 kB]
Get:32 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 perl-base amd64 5.24.1-3+deb9u5 [1345 kB]
Get:33 http://HTTPS///deb.debian.org/debian stretch/main amd64 debconf all 1.5.61 [159 kB]
Get:34 http://HTTPS///deb.debian.org/debian stretch/main amd64 libpam0g amd64 1.1.8-3.6 [125 kB]
Get:35 http://HTTPS///deb.debian.org/debian stretch/main amd64 libsemanage-common all 2.6-2 [26.9 kB]
Get:36 http://HTTPS///deb.debian.org/debian stretch/main amd64 libsepol1 amd64 2.6-2 [241 kB]
Get:37 http://HTTPS///deb.debian.org/debian stretch/main amd64 libustr-1.0-1 amd64 1.0.4-6 [76.3 kB]
Get:38 http://HTTPS///deb.debian.org/debian stretch/main amd64 libsemanage1 amd64 2.6-2 [103 kB]
Get:39 http://HTTPS///deb.debian.org/debian stretch/main amd64 libdb5.3 amd64 5.3.28-12+deb9u1 [679 kB]
Get:40 http://HTTPS///deb.debian.org/debian stretch/main amd64 libpam-modules-bin amd64 1.1.8-3.6 [105 kB]
Get:41 http://HTTPS///deb.debian.org/debian stretch/main amd64 libpam-modules amd64 1.1.8-3.6 [308 kB]
Get:42 http://HTTPS///deb.debian.org/debian stretch/main amd64 passwd amd64 1:4.4-4.1 [996 kB]
Get:43 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libuuid1 amd64 2.29.2-1+deb9u1 [70.1 kB]
Get:44 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libblkid1 amd64 2.29.2-1+deb9u1 [168 kB]
Get:45 http://HTTPS///deb.debian.org/debian stretch/main amd64 libcomerr2 amd64 1.43.4-2 [63.5 kB]
Get:46 http://HTTPS///deb.debian.org/debian stretch/main amd64 libss2 amd64 1.43.4-2 [67.7 kB]
Get:47 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libfdisk1 amd64 2.29.2-1+deb9u1 [203 kB]
Get:48 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libmount1 amd64 2.29.2-1+deb9u1 [178 kB]
Get:49 http://HTTPS///deb.debian.org/debian stretch/main amd64 libncursesw5 amd64 6.0+20161126-1+deb9u2 [115 kB]
Get:50 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libsmartcols1 amd64 2.29.2-1+deb9u1 [126 kB]
Get:51 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 libudev1 amd64 232-25+deb9u9 [126 kB]
Get:52 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 util-linux amd64 2.29.2-1+deb9u1 [981 kB]
Get:53 http://HTTPS///deb.debian.org/debian stretch/main amd64 e2fsprogs amd64 1.43.4-2 [946 kB]
Get:54 http://HTTPS///deb.debian.org/debian stretch/main amd64 findutils amd64 4.6.0+git+20161106-2 [622 kB]
Get:55 http://HTTPS///deb.debian.org/debian stretch/main amd64 grep amd64 2.27-2 [382 kB]
Get:56 http://HTTPS///deb.debian.org/debian stretch/main amd64 gzip amd64 1.6-5+b1 [114 kB]
Get:57 http://HTTPS///deb.debian.org/debian stretch/main amd64 hostname amd64 3.18+b1 [14.9 kB]
Get:58 http://HTTPS///deb.debian.org/debian stretch/main amd64 libpam-runtime all 1.1.8-3.6 [212 kB]
Get:59 http://HTTPS///deb.debian.org/debian stretch/main amd64 login amd64 1:4.4-4.1 [790 kB]
Get:60 http://HTTPS///deb.debian.org/debian-security stretch/updates/main amd64 mount amd64 2.29.2-1+deb9u1 [189 kB]
Get:61 http://HTTPS///deb.debian.org/debian stretch/main amd64 ncurses-bin amd64 6.0+20161126-1+deb9u2 [366 kB]
Get:62 http://HTTPS///deb.debian.org/debian stretch/main amd64 sed amd64 4.4-1 [280 kB]
Get:63 http://HTTPS///deb.debian.org/debian stretch/main amd64 libdebconfclient0 amd64 0.227 [47.8 kB]
Get:64 http://HTTPS///deb.debian.org/debian stretch/main amd64 base-passwd amd64 3.5.43 [57.7 kB]
Get:65 http://HTTPS///deb.debian.org/debian stretch/main amd64 init-system-helpers all 1.48 [44.0 kB]
Get:66 http://HTTPS///deb.debian.org/debian stretch/main amd64 libc-bin amd64 2.24-11+deb9u4 [782 kB]
Get:67 http://HTTPS///deb.debian.org/debian stretch/main amd64 ncurses-base all 6.0+20161126-1+deb9u2 [238 kB]
Get:68 http://HTTPS///deb.debian.org/debian stretch/main amd64 sysvinit-utils amd64 2.88dsf-59.9 [68.4 kB]
Fetched 24.9 MB in 0s (42.7 MB/s)
Download complete and in download only mode
I: extracting archives...
done
I: marker-b installing packages...
env, --unset=APT_CONFIG, /usr/sbin/chroot, /var/cache/pbuilder/base.cow/usr/sbin/chroot: failed to run command ‘dpkg’: Permission denied
env --unset=APT_CONFIG /usr/sbin/chroot /var/cache/pbuilder/base.cow dpkg --install --force-depends /var/cache/apt/archives//sysvinit-utils_2.88dsf-59.9_amd64.deb /var/cache/apt/archives//ncurses-base_6.0+20161126-1+deb9u2_all.deb /var/cache/apt/archives//libc-bin_2.24-11+deb9u4_amd64.deb /var/cache/apt/archives//init-system-helpers_1.48_all.deb /var/cache/apt/archives//base-passwd_3.5.43_amd64.deb /var/cache/apt/archives//libdebconfclient0_0.227_amd64.deb /var/cache/apt/archives//sed_4.4-1_amd64.deb /var/cache/apt/archives//ncurses-bin_6.0+20161126-1+deb9u2_amd64.deb /var/cache/apt/archives//mount_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//login_1%3a4.4-4.1_amd64.deb /var/cache/apt/archives//libpam-runtime_1.1.8-3.6_all.deb /var/cache/apt/archives//hostname_3.18+b1_amd64.deb /var/cache/apt/archives//gzip_1.6-5+b1_amd64.deb /var/cache/apt/archives//grep_2.27-2_amd64.deb /var/cache/apt/archives//findutils_4.6.0+git+20161106-2_amd64.deb /var/cache/apt/archives//e2fsprogs_1.43.4-2_amd64.deb /var/cache/apt/archives//util-linux_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libudev1_232-25+deb9u9_amd64.deb /var/cache/apt/archives//libsmartcols1_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libncursesw5_6.0+20161126-1+deb9u2_amd64.deb /var/cache/apt/archives//libmount1_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libfdisk1_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libss2_1.43.4-2_amd64.deb /var/cache/apt/archives//libcomerr2_1.43.4-2_amd64.deb /var/cache/apt/archives//libblkid1_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libuuid1_2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//passwd_1%3a4.4-4.1_amd64.deb /var/cache/apt/archives//libpam-modules_1.1.8-3.6_amd64.deb /var/cache/apt/archives//libpam-modules-bin_1.1.8-3.6_amd64.deb /var/cache/apt/archives//libdb5.3_5.3.28-12+deb9u1_amd64.deb /var/cache/apt/archives//libsemanage1_2.6-2_amd64.deb /var/cache/apt/archives//libustr-1.0-1_1.0.4-6_amd64.deb /var/cache/apt/archives//libsepol1_2.6-2_amd64.deb /var/cache/apt/archives//libsemanage-common_2.6-2_all.deb /var/cache/apt/archives//libpam0g_1.1.8-3.6_amd64.deb /var/cache/apt/archives//debconf_1.5.61_all.deb /var/cache/apt/archives//perl-base_5.24.1-3+deb9u5_amd64.deb /var/cache/apt/archives//libaudit1_1%3a2.6.7-2_amd64.deb /var/cache/apt/archives//libcap-ng0_0.7.7-3+b1_amd64.deb /var/cache/apt/archives//libaudit-common_1%3a2.6.7-2_all.deb /var/cache/apt/archives//e2fslibs_1.43.4-2_amd64.deb /var/cache/apt/archives//diffutils_1%3a3.5-3_amd64.deb /var/cache/apt/archives//coreutils_8.26-3_amd64.deb /var/cache/apt/archives//bsdutils_1%3a2.29.2-1+deb9u1_amd64.deb /var/cache/apt/archives//libsystemd0_232-25+deb9u9_amd64.deb /var/cache/apt/archives//liblz4-1_0.0~r131-2+b1_amd64.deb /var/cache/apt/archives//libgcrypt20_1.7.6-2+deb9u3_amd64.deb /var/cache/apt/archives//libgpg-error0_1.26-2_amd64.deb /var/cache/apt/archives//bash_4.4-5_amd64.deb /var/cache/apt/archives//libtinfo5_6.0+20161126-1+deb9u2_amd64.deb /var/cache/apt/archives//dash_0.5.8-2.4_amd64.deb /var/cache/apt/archives//dpkg_1.18.25_amd64.deb /var/cache/apt/archives//tar_1.29b-1.1_amd64.deb /var/cache/apt/archives//libacl1_2.2.52-3+b1_amd64.deb /var/cache/apt/archives//libattr1_1%3a2.4.47-2+b2_amd64.deb /var/cache/apt/archives//zlib1g_1%3a1.2.8.dfsg-5_amd64.deb /var/cache/apt/archives//libselinux1_2.6-3+b3_amd64.deb /var/cache/apt/archives//libpcre3_2%3a8.39-3_amd64.deb /var/cache/apt/archives//multiarch-support_2.24-11+deb9u4_amd64.deb /var/cache/apt/archives//liblzma5_5.2.2-1.2+b1_amd64.deb /var/cache/apt/archives//libbz2-1.0_1.0.6-8.1_amd64.deb /var/cache/apt/archives//debianutils_4.8.1.1_amd64.deb /var/cache/apt/archives//sensible-utils_0.0.9+deb9u1_all.deb /var/cache/apt/archives//base-files_9.9+deb9u8_amd64.deb /var/cache/apt/archives//mawk_1.3.3-17+b3_amd64.deb /var/cache/apt/archives//libgcc1_1%3a6.3.0-18+deb9u1_amd64.deb /var/cache/apt/archives//libc6_2.24-11+deb9u4_amd64.deb /var/cache/apt/archives//gcc-6-base_6.3.0-18+deb9u1_amd64.deb failed at /home/user/Whonix/help-steps/mmdebstrap line 551.
E: /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter failed
W: Aborting with an error
E: pbuilder create failed
I: forking: rm -rf /var/cache/pbuilder/base.cow
+ cowbuilder_exit_code=1
+ true
+ '[' -d /var/cache/pbuilder/base.cow ']'
+ '[' '!' 1 = 0 ']'
+ return 1
++ errorhandlergeneral ERR
++ last_failed_exit_code=1
++ last_failed_bash_command='return "$cowbuilder_exit_code"'
++ output_cmd_set
++ '[' -o xtrace ']'
++ output_cmd=true
++ true 'INFO: Middle of function errorhandlergeneral of ././build-steps.d/1100_prepare-build-machine.'
++ errorhandlerprocessshared ERR
++ last_script=././build-steps.d/1100_prepare-build-machine
++ trap_signal_type_previous=
++ '[' '' = '' ']'
++ trap_signal_type_previous=unset
++ trap_signal_type_last=ERR
++ whonix_build_error_counter=1
+++ benchmarktimeend 1552668455
++++ date +%s
+++ benchmarktimeend=1552668518
+++ benchmark_took_seconds=63
++++ convertsecs 63
++++ local h m s
++++ (( h=63/3600 ))
++++ true
++++ (( m=(63%3600)/60 ))
++++ (( s=63%60 ))
++++ printf '%02d:%02d:%02d\n' 0 1 3
+++ echo 00:01:03
++ benchmark_took_time=00:01:03
++ processbacktracefunction
++ true 'INFO: BEGIN: processbacktracefunction'
++ '[' -o xtrace ']'
++ set +x
++ true 'INFO: END  : processbacktracefunction'
++ functiontracefunction
++ true 'INFO: BEGIN: functiontracefunction'
++ '[' -o xtrace ']'
++ set +x
++ true 'INFO: END  : functiontracefunction'
++ output_cmd_set
++ '[' -o xtrace ']'
++ output_cmd=true
++ true '
############################################################
ERROR in ././build-steps.d/1100_prepare-build-machine detected!
anon_dist_build_version: 14.0.1.4.4-1-g53d8aff964a8651dbb8b0cd47b73d9a63d3da9b4
(whonix_build_error_counter: 1)
(benchmark: 00:01:03)
trap_signal_type_previous: unset
trap_signal_type_last    : ERR
process_backtrace_result:
1: : /sbin/init 
2: : /usr/sbin/lightdm 
3: : lightdm --session-child 14 23 
4: : /usr/bin/lxsession -s LXDE -e LXDE 
5: : pcmanfm --desktop --profile LXDE 
6: : xfce4-terminal 
7: : bash 
8: : sudo ./whonix_build --flavor whonix-gateway-cli --target root --build 
9: : /bin/bash ./whonix_build --flavor whonix-gateway-cli --target root --build 
10: : /bin/bash ././build-steps.d/1100_prepare-build-machine 
function_trace_result:
main (line number: 464)
main (line number: 460)
cowbuilder_setup (line number: 116)
errorhandlergeneral (line number: 334)
errorhandlerprocessshared (line number: 169)
last_failed_bash_command: return "$cowbuilder_exit_code"
last_failed_exit_code: 1
ERROR in ././build-steps.d/1100_prepare-build-machine detected!
############################################################
'
++ '[' ERR = INT ']'
++ '[' ERR = TERM ']'
++ '[' ERR = ERR ']'
++ true 'INFO: trap_signal_type_last: ERR, considering auto retry...'
++ '[' '!' 1 = 0 ']'
++ '[' '' = '' ']'
++ whonix_build_auto_retry_counter=1
++ '[' -n 1 ']'
++ '[' -n 5 ']'
++ local first
++ read -r first _
++ '[' return = error_ ']'
++ '[' 1 -gt 1 ']'
++ true 'INFO: Auto retry attempt number: 1. Max retry attempts: 1 (--retry-max). Auto retry... '
++ whonix_build_auto_retry_counter=2
++ '[' '!' 5 = 0 ']'
++ true 'INFO: Waiting (--retry-wait) 5 seconds before auto retry... '
++ wait 6858
++ sleep 5
++ ignore_error=true
++ error_handler_do_retry=true
++ errorhandlerretry
++ '[' '!' '' = '' ']'
++ true 'INFO: Skipping whonix_build_dispatch_before_retry (--retry-before), because empty, ok.'
++ true 'INFO: Retrying last_failed_bash_command...: return "$cowbuilder_exit_code" '
++ retry_last_failed_bash_command_exit_code=0
++ eval return '"$cowbuilder_exit_code"'
+++ return ''
pre: line 128: return: : numeric argument required
+++ errorhandlergeneral ERR
+++ last_failed_exit_code=2
+++ last_failed_bash_command='return "$cowbuilder_exit_code"'
+++ output_cmd_set
+++ '[' -o xtrace ']'
+++ output_cmd=true
+++ true 'INFO: Middle of function errorhandlergeneral of ././build-steps.d/1100_prepare-build-machine.'
+++ errorhandlerprocessshared ERR
+++ last_script=././build-steps.d/1100_prepare-build-machine
+++ trap_signal_type_previous=ERR
+++ '[' ERR = '' ']'
+++ trap_signal_type_last=ERR
+++ whonix_build_error_counter=2
++++ benchmarktimeend 1552668455
+++++ date +%s
++++ benchmarktimeend=1552668523
++++ benchmark_took_seconds=68
+++++ convertsecs 68
+++++ local h m s
+++++ (( h=68/3600 ))
+++++ true
+++++ (( m=(68%3600)/60 ))
+++++ (( s=68%60 ))
+++++ printf '%02d:%02d:%02d\n' 0 1 8
++++ echo 00:01:08
+++ benchmark_took_time=00:01:08
+++ processbacktracefunction
+++ true 'INFO: BEGIN: processbacktracefunction'
+++ '[' -o xtrace ']'
+++ set +x
+++ true 'INFO: END  : processbacktracefunction'
+++ functiontracefunction
+++ true 'INFO: BEGIN: functiontracefunction'
+++ '[' -o xtrace ']'
+++ set +x
+++ true 'INFO: END  : functiontracefunction'
+++ output_cmd_set
+++ '[' -o xtrace ']'
+++ output_cmd=true
+++ true '
############################################################
ERROR in ././build-steps.d/1100_prepare-build-machine detected!
anon_dist_build_version: 14.0.1.4.4-1-g53d8aff964a8651dbb8b0cd47b73d9a63d3da9b4
(whonix_build_error_counter: 2)
(benchmark: 00:01:08)
trap_signal_type_previous: ERR
trap_signal_type_last    : ERR
process_backtrace_result:
1: : /sbin/init 
2: : /usr/sbin/lightdm 
3: : lightdm --session-child 14 23 
4: : /usr/bin/lxsession -s LXDE -e LXDE 
5: : pcmanfm --desktop --profile LXDE 
6: : xfce4-terminal 
7: : bash 
8: : sudo ./whonix_build --flavor whonix-gateway-cli --target root --build 
9: : /bin/bash ./whonix_build --flavor whonix-gateway-cli --target root --build 
10: : /bin/bash ././build-steps.d/1100_prepare-build-machine 
function_trace_result:
main (line number: 464)
main (line number: 460)
cowbuilder_setup (line number: 116)
errorhandlergeneral (line number: 334)
errorhandlerprocessshared (line number: 220)
errorhandlergeneral (line number: 334)
errorhandlerprocessshared (line number: 169)
errorhandlerprocessshared (line number: 169)
errorhandlergeneral (line number: 334)
cowbuilder_setup (line number: 116)
main (line number: 460)
main (line number: 464)
last_failed_bash_command: return "$cowbuilder_exit_code"
last_failed_exit_code: 2
ERROR in ././build-steps.d/1100_prepare-build-machine detected!
############################################################
'
+++ '[' ERR = INT ']'
+++ '[' ERR = TERM ']'
+++ '[' ERR = ERR ']'
+++ true 'INFO: trap_signal_type_last: ERR, considering auto retry...'
+++ '[' '!' 1 = 0 ']'
+++ '[' 2 = '' ']'
+++ '[' -n 1 ']'
+++ '[' -n 5 ']'
+++ local first
+++ read -r first _
+++ '[' return = error_ ']'
+++ '[' 2 -gt 1 ']'
+++ true 'INFO: Auto retried (--retry-max) already 1 times. No more auto retry. '
+++ unset whonix_build_auto_retry_counter
+++ true
+++ ignore_error=false
+++ answer=
+++ '[' ERR = ERR ']'
+++ true 'INFO: whonix_build_non_interactive: '
+++ '[' '' = true ']'
+++ '[' -t 0 ']'
+++ true 'INFO: stdin connected to terminal, using interactive error handler.'
+++ true '   ERROR in ././build-steps.d/1100_prepare-build-machine detected!
   Please have a look above (the block within ###...), note the command that failed, last_failed_exit_code and its output (further above).
   - Please enter c and press enter to ignore the error and continue building. (Recommended against!)
   - Please press r and enter to retry.
   - Please press s and enter to open an chroot interactive shell.
   - Please press a and enter to abort.'
+++ read -p 'Answer? ' answer
Answer? a
+++ error_handler_do_retry=
+++ interactive_chroot_shell=
+++ '[' a = continue ']'
+++ '[' a = c ']'
+++ '[' a = s ']'
+++ '[' a = shell ']'
+++ '[' a = r ']'
+++ '[' a = retry ']'
+++ '[' a = a ']'
+++ ignore_error=false
+++ interactive_chroot_shell=false
+++ break
+++ errorhandlermaybeexit ERR
+++ '[' '' = true ']'
+++ '[' false = true ']'
+++ abort_or_continue=Aborted
+++ rm --force /etc/apt/sources.list.d/whonix_temp.list
+++ rm --force /var/run/package_manager_lock
+++ '[' false = true ']'
+++ '[' ERR = INT ']'
+++ '[' ERR = TERM ']'
+++ trap - EXIT
+++ true 'INFO: Now exiting from ././build-steps.d/1100_prepare-build-machine (because error was detected, see above) with exit code 1.'
+++ exit 1
++ error_handler_whonix_build_one
++ true 'ERROR in ./whonix_build'
++ true 'BASH_COMMAND: "./$whonix_build_one_build_step_current"'
++ true 'whonix_build_one_build_step_current: ./build-steps.d/1100_prepare-build-machine'
++ true 'args: --flavor whonix-gateway-cli --target root --build'
++ true 'INFO: Now exiting from ./whonix_build (because error was detected, see above).'
++ exit 1
+ exithandler
+ local exit_code=1
+ '[' '!' 1 = 0 ']'
+ exit 1
user@host:~/Whonix$</code></pre>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/_def'><span itemprop='name'>_def</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-15T16:56:30Z' class='post-time'>
                March 15, 2019,  4:56pm
              </time>
              <meta itemprop='dateModified' content='2019-03-15T17:18:17Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>As far as I see theres no infos in /var/log .</p>
<pre><code>hostnamectl
   Static hostname: host
         Icon name: computer-laptop
           Chassis: laptop
  Operating System: Debian GNU/Linux 9 (stretch)
            Kernel: Linux 4.9.0-8-686
      Architecture: x86
</code></pre>
<p>uname -a<br>
<code>Linux host 4.9.0-8-686 #1 SMP Debian 4.9.144-3.1 (2019-02-19) i686 GNU/Linux</code></p>
<p>Debian is 32 bit.</p>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/_def'><span itemprop='name'>_def</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-15T17:25:21Z' class='post-time'>
                March 15, 2019,  5:25pm
              </time>
              <meta itemprop='dateModified' content='2019-03-15T17:25:21Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>What do you think could be the problem?</p>
<p>Do you think switching to 64bit debian could help? With or without encrypted filesystem?</p>
<p>I mean it is not that important. <img src="../../../images/emoji/twitter/smiley1bce.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"> But it would be a nice thing to use the laptop as gateway.</p>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/_def'><span itemprop='name'>_def</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-15T17:42:10Z' class='post-time'>
                March 15, 2019,  5:42pm
              </time>
              <meta itemprop='dateModified' content='2019-03-15T17:42:10Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The laptop has 2G Ram.</p>
<p>free -m<br>
total        used        free      shared  buff/cache   available<br>
Mem:           2010         770         355          98         884         920<br>
Swap:          2039           1</p>
<p>/var/cache/pbuilder is mounted as tmpfs with 2G<br>
<code>mount -t tmpfs -o size=2G none /var/cache/pbuilder</code></p>
<p>Is this a problem?</p>
<p>mount | grep “pbuilder”<br>
<code>none on /var/cache/pbuilder type tmpfs (rw,relatime,size=2097152k)</code></p>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/_def'><span itemprop='name'>_def</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-15T18:33:19Z' class='post-time'>
                March 15, 2019,  6:33pm
              </time>
              <meta itemprop='dateModified' content='2019-03-15T18:33:56Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Ok. We’re getting further.</p>
<p>Executing the cowbuilder command manually showed that the binaries for cowbuilder and pbuilder are in /usr/sbin. I had to change the PATH variable:</p>
<p><code>PATH="/bin:/usr/bin:/usr/sbin"</code></p>
<p>After running the command it failed with:</p>
<pre><code>cowbuilder \
    &gt;          --create \
    &gt;          --configfile /home/user/whonix_binary/pbuilder.conf \
    &gt;          --distribution stretch \
    &gt;          --mirror http://HTTPS///deb.debian.org/debian \
    &gt;          --debootstrap /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter \
    &gt;          --hookdir /home/user/Whonix/help-steps/pbuilder-hooks \
    &gt;          --extrapackages "sudo devscripts debhelper strip-nondeterminism fakeroot apt-transport-tor apt-transport-https python eatmydata aptitude cowdancer" \
    &gt;          
    I: Invoking pbuilder
    I: forking: pbuilder create --configfile /home/user/whonix_binary/pbuilder.conf --debootstrap /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter --hookdir /home/user/Whonix/help-steps/pbuilder-hooks --buildplace /var/cache/pbuilder/base.cow --mirror http://HTTPS///deb.debian.org/debian --distribution stretch --no-targz --extrapackages 'sudo devscripts debhelper strip-nondeterminism fakeroot apt-transport-tor apt-transport-https python eatmydata aptitude cowdancer cowdancer'
    W: /root/.pbuilderrc does not exist
    I: Running in no-targz mode
    I: Distribution is stretch.
    I: Current time: Fri Mar 15 19:31:08 CET 2019
    I: pbuilder-time-stamp: 1552674668
    I: Building the build environment
    I: running /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter
    /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter
    + set -e
    + true 'INFO: Currently running /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter.'
    + args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
    + true 'BUILDPLACE: /var/cache/pbuilder/base.cow'
    + true 'whonix_build_sources_list_primary: '
    + true 'http_proxy: '
    + true 'REPO_PROXY: '
    + true 'APTGETOPT: '
    + true 'BUILD_TARGET_ARCH: '
    + args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
    + args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
    + args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
    + args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
    + args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
    + args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
    + args='--include=apt --variant=buildd --force-check-gpg stretch /var/cache/pbuilder/base.cow http://HTTPS///deb.debian.org/debian'
    + args='--include=apt --variant=buildd --force-check-gpg stretch  http://HTTPS///deb.debian.org/debian'
    + args='--include=apt --variant=buildd  stretch  http://HTTPS///deb.debian.org/debian'
    + args='--include=apt --variant=buildd  stretch  http://HTTPS///deb.debian.org/debian'
    + args=' --variant=buildd  stretch  http://HTTPS///deb.debian.org/debian'
    + args='   stretch  http://HTTPS///deb.debian.org/debian'
    + true 'args:    stretch  http://HTTPS///deb.debian.org/debian'
    + '[' /var/cache/pbuilder/base.cow = '' ']'
    + true '/home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter: probably called by called by pbuilder'
    + include_opt=--include=apt,sudo,devscripts,debhelper,strip-nondeterminism,fakeroot,apt-transport-tor,apt-transport-https,python,eatmydata,aptitude,cowdancer
    + cat ''
    cat: '': No such file or directory
    E: /home/user/Whonix/help-steps/pbuilder-debootstrap-command-filter failed
    W: Aborting with an error
    E: pbuilder create failed
    I: forking: rm -rf /var/cache/pbuilder/base.cow
    root@host:/home/user/Whonix#</code></pre>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-15T18:43:47Z' class='post-time'>
                March 15, 2019,  6:43pm
              </time>
              <meta itemprop='dateModified' content='2019-03-15T18:43:47Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubblob">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/help-steps/pbuilder-debootstrap-command-filter#L82" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/help-steps/pbuilder-debootstrap-command-filter#L82" target="_blank" rel="nofollow noopener">Whonix/Whonix/blob/master/help-steps/pbuilder-debootstrap-command-filter#L82</a></h4>
<pre class="onebox"><code class="lang-"><ol class="start lines" start="72" style="counter-reset: li-counter 71 ;">
<li>   --verbose \</li>
<li>   --architectures="$BUILD_TARGET_ARCH" \</li>
<li>   --aptopt="$whonix_aptgetop_file" \</li>
<li>   $args</li>
<li>else</li>
<li>true "$0: probably called by called by pbuilder"</li>
<li>
</li>
<li>## build dependencies</li>
<li>include_opt="--include=apt,sudo,devscripts,debhelper,strip-nondeterminism,fakeroot,apt-transport-tor,apt-transport-https,python,eatmydata,aptitude,cowdancer"</li>
<li>
</li>
<li class="selected">cat "$whonix_aptgetop_file"</li>
<li>
</li>
<li>"$WHONIX_SOURCE_HELP_STEPS_FOLDER/mmdebstrap" \</li>
<li>   --verbose \</li>
<li>   --architectures="$BUILD_TARGET_ARCH" \</li>
<li>   --aptopt="$whonix_aptgetop_file" \</li>
<li>   $include_opt \</li>
<li>   $args \</li>
<li>   "$BUILDPLACE" \</li>
<li>   "$whonix_build_sources_list_primary"</li>
<li>fi</li>
</ol></code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<pre><code class="lang-auto">whonix_aptgetop_file
</code></pre>
<p><a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/git#grep_Whonix_source_code" rel="nofollow noopener">https://www.whonix.org/wiki/Dev/git#grep_Whonix_source_code</a></p>
<p>More answers later.</p>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/_def'><span itemprop='name'>_def</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-15T18:59:01Z' class='post-time'>
                March 15, 2019,  6:59pm
              </time>
              <meta itemprop='dateModified' content='2019-03-15T19:28:33Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Sorry. This was my fault. This error only occurs if the cowbuilder command is entered manually.</p>
<p>If I use the build script it still produces the previous error.</p>
<p>cowbuilder --create seems to work finde. I can normally chroot into the the base.cow folder and install packages.</p>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-16T12:39:28Z' class='post-time'>
                March 16, 2019, 12:39pm
              </time>
              <meta itemprop='dateModified' content='2019-03-16T12:39:28Z'>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Make sure <code>/home/user/whonix_binary/aptgetopt.conf</code> exists.</p>
<pre><code>ls -la /home/user/whonix_binary/aptgetopt.conf
</code></pre>
<p>If yes…</p>
<aside class="quote no-group" data-post="14" data-topic="6863">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/_/48db29/40.png" class="avatar"> _def:</div>
<blockquote>
<p>cowbuilder \</p>
</blockquote>
</aside>
<p>Add <code>whonix_aptgetop_file="/home/user/whonix_binary/aptgetopt.conf"</code> in front of your cowbuilder  command.</p>
<pre><code>whonix_aptgetop_file="/home/user/whonix_binary/aptgetopt.conf cowbuilder \
</code></pre>
<p>Probably also required (easiest) to hardcode what <code>help-steps/pbuilder-debootstrap-command-filter</code> shall do.</p>
<aside class="quote no-group" data-post="13" data-topic="6863">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/_/48db29/40.png" class="avatar"> _def:</div>
<blockquote>
<p>Is this a problem?</p>
</blockquote>
</aside>
<p>No.</p>
<aside class="quote no-group" data-post="13" data-topic="6863">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/_/48db29/40.png" class="avatar"> _def:</div>
<blockquote>
<p>The laptop has 2G Ram.</p>
</blockquote>
</aside>
<p>Dunno if this could be a out of RAM issue.</p>
<aside class="quote no-group" data-post="12" data-topic="6863">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/_/48db29/40.png" class="avatar"> _def:</div>
<blockquote>
<p>Do you think switching to 64bit debian could help?</p>
</blockquote>
</aside>
<p>It might help. 32bit builds untested.</p>
<aside class="quote no-group" data-post="12" data-topic="6863">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/_/48db29/40.png" class="avatar"> _def:</div>
<blockquote>
<p>With or without encrypted filesystem?</p>
</blockquote>
</aside>
<p>Encrypted filesystem untested (I am building inside a VM and the host is encrypted instead).</p>
<hr>
<p>Other options.</p>
<p>Build from Whonix repository. (not implemented)</p>
<p>Build without cowbuilder. (untested)</p>
<p>Use a build configuration and set <a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/Source_Code_Intro#Build_Configuration" rel="nofollow noopener">https://www.whonix.org/wiki/Dev/Source_Code_Intro#Build_Configuration</a></p>
<pre><code>make_use_cowbuilder="false"
</code></pre>
<p>Also comment out call of <code>cowbuilder_setup</code> in <code>build-steps.d/1100_prepare-build-machine</code>.</p>
<p>(Builds with cowbuilder are “more guaranteed” to be “clean” package builds without missing dependencies. This level of quality is warranted for redistributed packages. It’s a relatively new enhancement. For physical isolation it’s not important.)</p>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/_def'><span itemprop='name'>_def</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-17T02:22:53Z' class='post-time'>
                March 17, 2019,  2:22am
              </time>
              <meta itemprop='dateModified' content='2019-03-17T02:23:39Z'>
          <span itemprop='position'>#18</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks for your help. The good news: After reinstalling the 64bit version of debian stretch and installing some missing packages like dpkg-dev etc. everything worked. The only error occured was at the end with debsum. It said that some packages belonging to aspell have changed.</p>
<p>I ignored the error and installed anyway…</p>
<p>The next step is to change the network adapter to wlan0 like described here<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/Build_Documentation/Physical_Isolation#Network_Verification" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/472;"><img src="../../../../external.html?link=https://www.whonix.org/w/images/9/98/Digital-art-191226640.jpg" class="thumbnail"></div>

<h3><a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/Build_Documentation/Physical_Isolation#Network_Verification" target="_blank" rel="nofollow noopener">Dev/Build Documentation/Physical Isolation</a></h3>

<p>Security by Isolation. Using Whonix with Physical Isolation on Bare Metal for Better Security.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>The workstation conneects through eth0 and teh gateway should use wlan0 to access the internet. But for now I’m happy.</p>
<p>PS: You guys did a great job.</p>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/_def'><span itemprop='name'>_def</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-17T15:20:36Z' class='post-time'>
                March 17, 2019,  3:20pm
              </time>
              <meta itemprop='dateModified' content='2019-03-17T15:27:19Z'>
          <span itemprop='position'>#19</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi. I followed the steps listed in the documentation. But the gateway doesn’t connect to the internet.</p>
<p>After checking <code>ifconfig</code> it “seems” to look good. If I connect to the ESSID with <code>iwconfig wlan0 essid "xyz"</code> it looks like it connects but still does not produce traffic. Using <code>systemctl restart networking</code> gives following error:</p>
<pre><code>● networking.service - Raise network interfaces
   Loaded: loaded (/lib/systemd/system/networking.service; enabled; vendor preset: enabled)
  Drop-In: /lib/systemd/system/networking.service.d
           └─30_whonix-gw-firewall-fail-closed.conf
   Active: failed (Result: exit-code) since Sun 2019-03-17 15:02:07 UTC; 8s ago
     Docs: man:interfaces(5)
  Process: 4883 ExecStart=/sbin/ifup -a --read-environment (code=exited, status=1/FAILURE)
  Process: 4879 ExecStartPre=/bin/sh -c [ "$CONFIGURE_INTERFACES" != "no" ] &amp;&amp; [ -n "$(ifquery --read-environmen
 Main PID: 4883 (code=exited, status=1/FAILURE)

Mar 17 15:02:07 host systemd[1]: Starting Raise network interfaces...
Mar 17 15:02:07 host ifup[4883]: RTNETLINK answers: File exists
Mar 17 15:02:07 host ifup[4883]: ifup: failed to bring up wlan0
Mar 17 15:02:07 host ifup[4883]: RTNETLINK answers: File exists
Mar 17 15:02:07 host ifup[4883]: ifup: failed to bring up eth0
Mar 17 15:02:07 host systemd[1]: networking.service: Main process exited, code=exited, status=1/FAILURE
Mar 17 15:02:07 host systemd[1]: Failed to start Raise network interfaces.
Mar 17 15:02:07 host systemd[1]: networking.service: Unit entered failed state.
Mar 17 15:02:07 host systemd[1]: networking.service: Failed with result 'exit-code'.
</code></pre>
<p>journalctl -xe</p>
<pre><code>Mar 17 14:53:01 host systemd[1]: Starting Load/Save RF Kill Switch Status...
-- Subject: Unit systemd-rfkill.service has begun start-up
-- Defined-By: systemd
-- Support: https://www.debian.org/support
-- 
-- Unit systemd-rfkill.service has begun starting up.
Mar 17 14:53:01 host NetworkManager[806]: &lt;info&gt;  [1552834381.5755] manager: WiFi now enabled by radio killswitc
Mar 17 14:53:01 host systemd[1]: Started Load/Save RF Kill Switch Status.
-- Subject: Unit systemd-rfkill.service has finished start-up
-- Defined-By: systemd
-- Support: https://www.debian.org/support
-- 
-- Unit systemd-rfkill.service has finished starting up.
-- 
-- The start-up result is done.
Mar 17 14:53:01 host audit[1]: SERVICE_START pid=1 uid=0 auid=4294967295 ses=4294967295 msg='unit=systemd-rfkill
Mar 17 14:53:06 host audit[1]: SERVICE_STOP pid=1 uid=0 auid=4294967295 ses=4294967295 msg='unit=systemd-rfkill 
Mar 17 14:53:07 host kernel: usb 5-2: new low-speed USB device number 2 using uhci_hcd
Mar 17 14:53:07 host kernel: usb 5-2: New USB device found, idVendor=1c4f, idProduct=0034
Mar 17 14:53:07 host kernel: usb 5-2: New USB device strings: Mfr=1, Product=2, SerialNumber=0
Mar 17 14:53:07 host kernel: usb 5-2: Product: Usb Mouse
Mar 17 14:53:07 host kernel: usb 5-2: Manufacturer: SIGMACHIP
Mar 17 14:53:07 host mtp-probe[4451]: checking bus 5, device 2: "/sys/devices/pci0000:00/0000:00:1d.0/usb5/5-2"
Mar 17 14:53:07 host mtp-probe[4451]: bus: 5, device: 2 was not an MTP device
Mar 17 14:53:07 host kernel: hidraw: raw HID events driver (C) Jiri Kosina
Mar 17 14:53:07 host kernel: usbcore: registered new interface driver usbhid
Mar 17 14:53:07 host kernel: usbhid: USB HID core driver
Mar 17 14:53:07 host kernel: input: SIGMACHIP Usb Mouse as /devices/pci0000:00/0000:00:1d.0/usb5/5-2/5-2:1.0/000
Mar 17 14:53:07 host kernel: hid-generic 0003:1C4F:0034.0001: input,hidraw0: USB HID v1.10 Mouse [SIGMACHIP Usb 
Mar 17 14:53:21 host avahi-daemon[601]: Joining mDNS multicast group on interface wlan0.IPv4 with address 10.0.2
Mar 17 14:53:21 host avahi-daemon[601]: New relevant interface wlan0.IPv4 for mDNS.
Mar 17 14:53:21 host avahi-daemon[601]: Registering new address record for 10.0.2.15 on wlan0.IPv4.
Mar 17 14:55:23 host kernel: perf: interrupt took too long (2502 &gt; 2500), lowering kernel.perf_event_max_sample_
Mar 17 14:58:20 host dbus-daemon[1338]: Activating service name='org.freedesktop.thumbnails.Thumbnailer1'
Mar 17 14:58:20 host dbus-daemon[1338]: Successfully activated service 'org.freedesktop.thumbnails.Thumbnailer1'
Mar 17 15:02:07 host systemd[1]: Starting Raise network interfaces...
-- Subject: Unit networking.service has begun start-up
-- Defined-By: systemd
-- Support: https://www.debian.org/support
-- 
-- Unit networking.service has begun starting up.
Mar 17 15:02:07 host ifup[4883]: RTNETLINK answers: File exists
Mar 17 15:02:07 host ifup[4883]: ifup: failed to bring up wlan0
Mar 17 15:02:07 host ifup[4883]: RTNETLINK answers: File exists
Mar 17 15:02:07 host ifup[4883]: ifup: failed to bring up eth0
Mar 17 15:02:07 host audit[1]: SERVICE_START pid=1 uid=0 auid=4294967295 ses=4294967295 msg='unit=networking com
Mar 17 15:02:07 host systemd[1]: networking.service: Main process exited, code=exited, status=1/FAILURE
Mar 17 15:02:07 host systemd[1]: Failed to start Raise network interfaces.
-- Subject: Unit networking.service has failed
-- Defined-By: systemd
-- Support: https://www.debian.org/support
-- 
-- Unit networking.service has failed.
-- 
-- The result is failed.
Mar 17 15:02:07 host systemd[1]: networking.service: Unit entered failed state.
Mar 17 15:02:07 host systemd[1]: networking.service: Failed with result 'exit-code'.
</code></pre>
<p>Some other logs:</p>
<pre><code>Mar 17 14:40:04 host kernel: [ 1634.751422] atkbd serio0: Unknown key pressed (translated set 2, code 0x88 on isa0060/serio0).
Mar 17 14:40:04 host kernel: [ 1634.751430] atkbd serio0: Use 'setkeycodes e008 &lt;keycode&gt;' to make it known.
Mar 17 14:40:04 host kernel: [ 1634.751874] iwl3945 0000:0c:00.0: Card state received: HW:Kill SW:On
Mar 17 14:40:04 host kernel: [ 1634.760345] iwl3945 0000:0c:00.0: Not sending command - RF KILL
Mar 17 14:40:04 host kernel: [ 1634.760352] iwl3945 0000:0c:00.0: Error sending C_RXON: enqueue_hcmd failed: -5
Mar 17 14:40:04 host kernel: [ 1634.760361] iwl3945 0000:0c:00.0: Error setting new configuration (-5).
Mar 17 14:40:04 host kernel: [ 1634.764022] iwl3945 0000:0c:00.0: Master Disable Timed Out, 100 usec
Mar 17 14:41:17 host kernel: [ 1707.425033] atkbd serio0: Unknown key pressed (translated set 2, code 0x88 on isa0060/serio0).
Mar 17 14:41:17 host kernel: [ 1707.425041] atkbd serio0: Use 'setkeycodes e008 &lt;keycode&gt;' to make it known.
Mar 17 14:44:27 host kernel: [ 1897.432208] wlan0: authenticate with a6:22:05:b0:56:f9
Mar 17 14:44:27 host kernel: [ 1897.434567] wlan0: send auth to a6:22:05:b0:56:f9 (try 1/3)
Mar 17 14:44:27 host kernel: [ 1897.436467] wlan0: authenticated
Mar 17 14:44:27 host kernel: [ 1897.436511] wlan0: associating with AP with corrupt probe response
Mar 17 14:44:27 host kernel: [ 1897.440113] wlan0: associate with a6:22:05:b0:56:f9 (try 1/3)
Mar 17 14:44:27 host kernel: [ 1897.447920] wlan0: RX AssocResp from a6:22:05:b0:56:f9 (capab=0x421 status=0 aid=2)
Mar 17 14:44:27 host kernel: [ 1897.449423] wlan0: associated
Mar 17 14:47:29 host kernel: [ 2079.716925] iwl3945 0000:0c:00.0: Card state received: HW:Kill SW:On
Mar 17 14:47:29 host kernel: [ 2079.717450] wlan0: deauthenticating from a6:22:05:b0:56:f9 by local choice (Reason: 3=DEAUTH_LEAVING)
Mar 17 14:47:29 host kernel: [ 2079.717923] atkbd serio0: Unknown key pressed (translated set 2, code 0x88 on isa0060/serio0).
Mar 17 14:47:29 host kernel: [ 2079.717930] atkbd serio0: Use 'setkeycodes e008 &lt;keycode&gt;' to make it known.
Mar 17 14:47:29 host kernel: [ 2079.719584] iwl3945 0000:0c:00.0: Not sending command - RF KILL
Mar 17 14:47:29 host kernel: [ 2079.719592] iwl3945 0000:0c:00.0: Error sending C_REM_STA: enqueue_hcmd failed: -5
Mar 17 14:47:29 host kernel: [ 2079.719604] iwl3945 0000:0c:00.0: Error removing station a6:22:05:b0:56:f9
Mar 17 14:47:29 host kernel: [ 2079.719662] iwl3945 0000:0c:00.0: Not sending command - RF KILL
Mar 17 14:47:29 host kernel: [ 2079.719668] iwl3945 0000:0c:00.0: Error sending C_QOS_PARAM: enqueue_hcmd failed: -5
Mar 17 14:47:29 host kernel: [ 2079.719679] iwl3945 0000:0c:00.0: Not sending command - RF KILL
Mar 17 14:47:29 host kernel: [ 2079.719685] iwl3945 0000:0c:00.0: Error sending C_RXON: enqueue_hcmd failed: -5
Mar 17 14:47:29 host kernel: [ 2079.719692] iwl3945 0000:0c:00.0: Error setting new configuration (-5).
Mar 17 14:47:29 host kernel: [ 2079.719700] iwl3945 0000:0c:00.0: Not sending command - RF KILL
Mar 17 14:47:29 host kernel: [ 2079.719706] iwl3945 0000:0c:00.0: Error sending C_RXON_ASSOC: enqueue_hcmd failed: -5
Mar 17 14:47:29 host kernel: [ 2079.719719] iwl3945 0000:0c:00.0: Not sending command - RF KILL
Mar 17 14:47:29 host kernel: [ 2079.719724] iwl3945 0000:0c:00.0: Error sending C_RXON_ASSOC: enqueue_hcmd failed: -5
Mar 17 14:47:29 host kernel: [ 2079.719737] iwl3945 0000:0c:00.0: Not sending command - RF KILL
Mar 17 14:47:29 host kernel: [ 2079.719743] iwl3945 0000:0c:00.0: Error sending C_RXON: enqueue_hcmd failed: -5
Mar 17 14:47:29 host kernel: [ 2079.719750] iwl3945 0000:0c:00.0: Error setting new configuration (-5).
Mar 17 14:47:29 host kernel: [ 2079.719762] iwl3945 0000:0c:00.0: Not sending command - RF KILL
Mar 17 14:47:29 host kernel: [ 2079.719767] iwl3945 0000:0c:00.0: Error sending C_LEDS: enqueue_hcmd failed: -5
Mar 17 14:47:29 host kernel: [ 2079.719784] iwl3945 0000:0c:00.0: Not sending command - RF KILL
Mar 17 14:47:29 host kernel: [ 2079.719789] iwl3945 0000:0c:00.0: Error sending C_RXON: enqueue_hcmd failed: -5
Mar 17 14:47:29 host kernel: [ 2079.719796] iwl3945 0000:0c:00.0: Error setting new configuration (-5).
Mar 17 14:47:29 host kernel: [ 2079.739193] iwl3945 0000:0c:00.0: Not sending command - RF KILL
Mar 17 14:47:29 host kernel: [ 2079.739198] iwl3945 0000:0c:00.0: Error sending C_RXON: enqueue_hcmd failed: -5
Mar 17 14:47:29 host kernel: [ 2079.739204] iwl3945 0000:0c:00.0: Error setting new configuration (-5).
Mar 17 14:47:29 host kernel: [ 2079.740017] iwl3945 0000:0c:00.0: Master Disable Timed Out, 100 usec</code></pre>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/_def'><span itemprop='name'>_def</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../6863.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-17T15:25:32Z' class='post-time'>
                March 17, 2019,  3:25pm
              </time>
              <meta itemprop='dateModified' content='2019-03-17T15:25:32Z'>
          <span itemprop='position'>#20</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>ifconfig</p>
<pre><code>eth0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500
        inet 10.152.152.10  netmask 255.255.192.0  broadcast 10.152.191.255
        ether 00:1d:09:d5:14:76  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        device interrupt 17  

lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        loop  txqueuelen 1  (Local Loopback)
        RX packets 4304  bytes 235520 (230.0 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 4304  bytes 235520 (230.0 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

wlan0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500
        inet 10.0.2.15  netmask 255.255.255.0  broadcast 10.0.2.255
        ether &lt;custom mac used&gt;  txqueuelen 1000  (Ethernet)
        RX packets 87  bytes 38286 (37.3 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
</code></pre>
<p>iwconfig</p>
<pre><code>lo        no wireless extensions.

eth0      no wireless extensions.

wlan0     IEEE 802.11  ESSID:off/any  
          Mode:Managed  Access Point: Not-Associated   Tx-Power=15 dBm   
          Retry short limit:7   RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:off
</code></pre>
<p>The interface configuration file (30_non-qubes-whonix…):</p>
<pre><code>## https://phabricator.whonix.org/T559
#auto eth0
#iface eth0 inet dhcp

## Or alternatively we could use...
## (Out commented by default.## NAT interface to communicate with VirtualBox.
auto wlan0
iface wlan0 inet static
        address 10.0.2.15
        netmask 255.255.255.0
        gateway 10.0.2.2
        ## broadcast required?
        #broadcast 10.0.2.255
        hwaddress ether &lt;custom mac&gt;
        #wireless_mode managed
        #wireless_essid "some essid"


## When using Virtual Machines (not Physical Isolation),
## - eth1 is an internal, isolated, virtual network,
## - provided and only visible inside Virtual Machines
## - solely used to communicate with the Workstation.
## - it has has no access to the host
## - Thus, the following IP address can NOT cause conflicts
##   with your LAN network or router.
auto eth0
iface eth0 inet static
       ## INT_IP and INT_IF
       address 10.152.152.10
       netmask 255.255.192.0
       ## Out commented.
       ## For what do we need network and broadcast anyway?
       #network 192.168.0.0
       #broadcast 192.168.0.255</code></pre>
        </div>

        <meta itemprop='headline' content='Installer failed. (Old title:Rewriting the whonix gateway installer script)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../68634658.html?page=2">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
