<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>kernel recompilation for better hardening - Development - Whonix Forum</title>
    <meta name="description" content="https://docs.clip-os.org/clipos/kernel.html 


These both look interesting. They‚Äôre mainly for kernel compile options though. 
Is there any way to build Whonix with custom kernel configurations? Or will kernels have to b&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="7598f62c.html?page=20" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;kernel recompilation for better hardening&#39;" href="7598.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/kernel-recompilation-for-better-hardening/7598?page=20" />
<meta name="twitter:url" content="https://forums.whonix.org/t/kernel-recompilation-for-better-hardening/7598?page=20" />
<meta property="og:title" content="kernel recompilation for better hardening" />
<meta name="twitter:title" content="kernel recompilation for better hardening" />
<meta property="og:description" content="Quote  https://github.com/dapperlinux/dapper-secure-kernel-patchset/issues/1#issuecomment-589870819   As for some patches, there is a portable and ready to use version of PAX_RAP, a  gcc plugin that implements forward and backword edge control flow integrity  sitting in the VMware Photon repo:  https://github.com/vmware/photon/blob/master/SPECS/linux/0003-Added-rap_plugin.patch  They have some other stuff too, like PAX_RANDKSTACK:  https://github.com/vmware/photon/blob/master/SPECS/linux/0002-Ad..." />
<meta name="twitter:description" content="Quote  https://github.com/dapperlinux/dapper-secure-kernel-patchset/issues/1#issuecomment-589870819   As for some patches, there is a portable and ready to use version of PAX_RAP, a  gcc plugin that implements forward and backword edge control flow integrity  sitting in the VMware Photon repo:  https://github.com/vmware/photon/blob/master/SPECS/linux/0003-Added-rap_plugin.patch  They have some other stuff too, like PAX_RANDKSTACK:  https://github.com/vmware/photon/blob/master/SPECS/linux/0002-Ad..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="105 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="608 ‚ù§" />
<meta property="article:published_time" content="2020-02-22T07:20:06+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="75987537.html?page=19">
        <link rel="next" href="7598e4a7.html?page=21">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="7598.html">kernel recompilation for better hardening</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/component_security.html' class='discourse-tag' rel="tag">component_security</a>, 
            <a href='../../tag/status_open_issue_todo.html' class='discourse-tag' rel="tag">status_open_issue_todo</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-22T07:20:06Z' class='post-time'>
                February 22, 2020,  7:20am
              </time>
              <meta itemprop='dateModified' content='2020-02-22T07:20:06Z'>
          <span itemprop='position'>#382</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Quote  <a href="../../../external.html?link=https://github.com/dapperlinux/dapper-secure-kernel-patchset/issues/1#issuecomment-589870819">https://github.com/dapperlinux/dapper-secure-kernel-patchset/issues/1#issuecomment-589870819</a></p>
<blockquote>
<p>As for some patches, there is a portable and ready to use version of PAX_RAP, a<br>
gcc plugin that implements forward and backword edge control flow integrity<br>
sitting in the VMware Photon repo:</p>
<p><a href="../../../external.html?link=https://github.com/vmware/photon/blob/master/SPECS/linux/0003-Added-rap_plugin.patch">https://github.com/vmware/photon/blob/master/SPECS/linux/0003-Added-rap_plugin.patch</a></p>
<p>They have some other stuff too, like PAX_RANDKSTACK:</p>
<p><a href="../../../external.html?link=https://github.com/vmware/photon/blob/master/SPECS/linux/0002-Added-PAX_RANDKSTACK.patch">https://github.com/vmware/photon/blob/master/SPECS/linux/0002-Added-PAX_RANDKSTACK.patch</a></p>
<p>All their stuff is worth checking out:</p>
<p><a href="../../../external.html?link=https://github.com/vmware/photon/tree/master/SPECS/linux">https://github.com/vmware/photon/tree/master/SPECS/linux</a></p>
<p>Funny you should mention ClipOS. I remember when it first came out, since they<br>
were using the grsecurity 4.9 patchset. They also had a bunch of cool patches,<br>
although most of them got archived when they dropped grsecurity from their<br>
primary repo. They also never switched to using my<br>
dapper-secure-kernel-patchset-stable either, although its easy to see why,<br>
since its difficult to trust some random developer with something security<br>
critical as a kernel hardening patchset.</p>
<p>Anyway, I haven‚Äôt read much of the things they carry in their repos these days.<br>
Its probably pretty good though.</p>
<p>Other things you can easily put into your kernel are the GRKERNSEC_CHROOT_*<br>
features. Those patches are self contained and can be easily extracted from<br>
a grsecurity patchset. They are low risk, stable, and provide good additional<br>
hardening of chroots, although I suppose no one trusts the security of<br>
chroots these days, and we all use namespaces instead.</p>
<p>Other than that, try and enable all the GCC plugins, and set lockdown to<br>
confidentiality and integrity mode.</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>
          <meta itemprop='keywords' content='component_security, status_open_issue_todo'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-22T17:53:16Z' class='post-time'>
                February 22, 2020,  5:53pm
              </time>
              <meta itemprop='dateModified' content='2020-02-22T17:53:16Z'>
          <span itemprop='position'>#384</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="379" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>And then do these changes break</p>
</blockquote>
</aside>
<p>The vboxvideo module wasn‚Äôt removed. Read the pull request description.</p>
<p>This won‚Äôt break anything.</p>
<aside class="quote no-group" data-username="Patrick" data-post="380" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>We would have to be sure if these sources of entropy would be trusted / credited.</p>
</blockquote>
</aside>
<p>We distrust these for initial entropy (<code>CONFIG_RANDOM_TRUST_CPU</code>). Being built-in/module doesn‚Äôt trust/credit it more.</p>
<aside class="quote no-group" data-username="Patrick" data-post="380" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I don‚Äôt see much advantage over built-in vs module anyhow? For something important as this, better just keep it as default as module?</p>
</blockquote>
</aside>
<p>The same advantage as building in the jitterentropy module. Entropy starts being generated earlier rather than need to wait for it to be loaded.</p>
<aside class="quote no-group" data-username="Patrick" data-post="381" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Are these modules auto load?</p>
</blockquote>
</aside>
<p>Yes.</p>
<aside class="quote no-group" data-username="Patrick" data-post="381" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>And when auto load, is this entropy source credited / trusted?</p>
</blockquote>
</aside>
<p>See <code>CONFIG_RANDOM_TRUST_CPU</code>.</p>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-22T18:06:34Z' class='post-time'>
                February 22, 2020,  6:06pm
              </time>
              <meta itemprop='dateModified' content='2020-02-22T18:06:34Z'>
          <span itemprop='position'>#385</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>CONFIG_RANDOM_TRUST_CPU / random.trust_cpu is for CPU, not for hardware rng?</p>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-22T18:15:27Z' class='post-time'>
                February 22, 2020,  6:15pm
              </time>
              <meta itemprop='dateModified' content='2020-02-22T18:15:27Z'>
          <span itemprop='position'>#386</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Ah, I assumed the HWRNG was in the CPU but it turns out these ones are on the motherboard (see <a href="../../../external.html?link=https://github.com/torvalds/linux/blob/master/drivers/char/hw_random/Kconfig">https://github.com/torvalds/linux/blob/master/drivers/char/hw_random/Kconfig</a>) so it is probably trusted.</p>
<p>Either way, the entropy would be trusted regardless if it‚Äôs built-in/module. The only difference is that being built-in means it generates entropy earlier.</p>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick_mobile'><span itemprop='name'>Patrick_mobile</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-22T20:03:52Z' class='post-time'>
                February 22, 2020,  8:03pm
              </time>
              <meta itemprop='dateModified' content='2020-02-22T20:03:52Z'>
          <span itemprop='position'>#387</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>For these might be better to load later than earlier. Or keep defaults  Could even consider distrusting / not crediting. If that is even possible. Could even consider blacklisting. Requires more research.</p>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-22T20:48:22Z' class='post-time'>
                February 22, 2020,  8:48pm
              </time>
              <meta itemprop='dateModified' content='2020-02-22T20:48:22Z'>
          <span itemprop='position'>#388</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick_mobile" data-post="387" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>For these might be better to load later than earlier.</p>
</blockquote>
</aside>
<p>How? It‚Äôd just be delaying entropy.</p>
<aside class="quote no-group" data-username="Patrick_mobile" data-post="387" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>Could even consider distrusting / not crediting.</p>
</blockquote>
</aside>
<p>The ‚Äúreal‚Äù HWRNGs are the only ones that would need to be distrusted. virtio-rng isn‚Äôt an actual HWRNG.</p>
<p>The best solution seems to be to have them all built-in but distrust the real HWRNGs.</p>
<p>Btw can you merge the staging drivers pull request? I‚Äôm going to make more changes but they might conflict.</p>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-22T21:04:30Z' class='post-time'>
                February 22, 2020,  9:04pm
              </time>
              <meta itemprop='dateModified' content='2020-02-22T21:04:30Z'>
          <span itemprop='position'>#389</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I think these HWRNGs actually are in the CPU.</p>
<p><a href="../../../external.html?link=https://www.amd.com/system/files/TechDocs/amd-random-number-generator.pdf" class="onebox" target="_blank">https://www.amd.com/system/files/TechDocs/amd-random-number-generator.pdf</a></p>
<p>In the kernel it‚Äôs only described as ‚ÄúAMD Random Number Generator‚Äù and the only things I can find about this RNG is in the CPU.</p>
<p>Hence, CONFIG_RANDOM_TRUST_CPU does distrust these HWRNGs and we can use them without worry.</p>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-23T16:26:26Z' class='post-time'>
                February 23, 2020,  4:26pm
              </time>
              <meta itemprop='dateModified' content='2020-02-23T16:26:26Z'>
          <span itemprop='position'>#390</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-username="Patrick_mobile" data-post="387" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<blockquote>
<p>For these might be better to load later than earlier.</p>
</blockquote>
<p>How? It‚Äôd just be delaying entropy.</p>
</blockquote>
</aside>
<p>Delay yes but also give better chance that initial entropy after boot is from more trustworthy sources. Or at least following what most are doing (compile as module). And not going a special way. The potential issues over weight the potential gain here.</p>
<p>Reverted for now until we have more input. For something as sensitive as this, shouldn‚Äôt move fast.</p>
<aside class="quote no-group" data-username="madaidan" data-post="388" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>The ‚Äúreal‚Äù HWRNGs are the only ones that would need to be distrusted. virtio-rng isn‚Äôt an actual HWRNG.</p>
</blockquote>
</aside>
<p>virtio-rng is non-controversial indeed. Built-in seems a good idea.</p>
<aside class="quote no-group" data-username="madaidan" data-post="388" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Btw can you merge the staging drivers pull request? I‚Äôm going to make more changes but they might conflict.</p>
</blockquote>
</aside>
<p>Need more time for review.</p>
<p>Wondering how much hardware support would break and how important these devices are. Breaking a popular wifi device would not be great (if that is the case).</p>
<p>Also the threat model. Is it mostly about preventing untrusted root from loading potentially vulnerable modules to exploit these?</p>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-23T20:03:20Z' class='post-time'>
                February 23, 2020,  8:03pm
              </time>
              <meta itemprop='dateModified' content='2020-02-23T20:03:20Z'>
          <span itemprop='position'>#391</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="390" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Delay yes but also give better chance that initial entropy after boot is from more trustworthy sources.</p>
</blockquote>
</aside>
<p>It‚Äôs distrusted via CONFIG_RANDOM_TRUST_CPU anyway. See above. The HWRNGs seem to be in the CPU.</p>
<aside class="quote no-group" data-username="Patrick" data-post="390" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Wondering how much hardware support would break and how important these devices are. Breaking a popular wifi device would not be great (if that is the case).</p>
</blockquote>
</aside>
<p>They aren‚Äôt popular. Hence why they‚Äôre staging drivers and not ordinary drivers. They might not even work anyway.</p>
<aside class="quote no-group" data-username="Patrick" data-post="390" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Also the threat model. Is it mostly about preventing untrusted root from loading potentially vulnerable modules to exploit these?</p>
</blockquote>
</aside>
<p>No, the modules can probably be auto-loaded too. These modules are low quality, are more likely to contain security vulnerabilities and likely won‚Äôt be used by an average user.</p>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-24T06:00:25Z' class='post-time'>
                February 24, 2020,  6:00am
              </time>
              <meta itemprop='dateModified' content='2020-02-24T06:00:25Z'>
          <span itemprop='position'>#392</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="madaidan" data-post="391" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>The HWRNGs seem to be in the CPU.</p>
</blockquote>
</aside>
<p>We need higher certainty here.</p>
<p><a href="../../../external.html?link=https://cateee.net/lkddb/web-lkddb/HW_RANDOM.html">https://cateee.net/lkddb/web-lkddb/HW_RANDOM.html</a> says motherboards, not CPUs:</p>
<blockquote>
<p>The configuration item CONFIG_HW_RANDOM:</p>
</blockquote>
<blockquote>
<p>This driver provides kernel-side support for the Random Number Generator hardware found on Intel i8xx-based <strong>motherboards</strong>, AMD 76x-based motherboards, and</p>
</blockquote>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="390" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<p>Also the threat model. Is it mostly about preventing untrusted root from loading potentially vulnerable modules to exploit these?</p>
</blockquote>
<p>No, the modules can probably be auto-loaded too.</p>
</blockquote>
</aside>
<p>Autoload for those who have such hardware only or autoload thorough some kind of trick by anyone?</p>
<aside class="quote no-group quote-modified" data-username="madaidan" data-post="391" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>These modules [‚Ä¶] likely won‚Äôt be used by an average user.</p>
</blockquote>
</aside>
<p>I guess for some this is true for sure such as <a href="../../../external.html?link=https://cateee.net/lkddb/web-lkddb/COMEDI.html">https://cateee.net/lkddb/web-lkddb/COMEDI.html</a> is not popular indeed. Never heard before.</p>
<p>CONFIG_RTL8192U popular?</p>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-24T15:37:31Z' class='post-time'>
                February 24, 2020,  3:37pm
              </time>
              <meta itemprop='dateModified' content='2020-02-24T15:37:31Z'>
          <span itemprop='position'>#393</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="392" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>CONFIG_RTL8192U popular?</p>
</blockquote>
</aside>
<p>For baremetal yes, however it makes no sense for VM.</p>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-24T17:49:01Z' class='post-time'>
                February 24, 2020,  5:49pm
              </time>
              <meta itemprop='dateModified' content='2020-02-24T17:49:01Z'>
          <span itemprop='position'>#394</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="392" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>We need higher certainty here.</p>
<p><a href="../../../external.html?link=https://cateee.net/lkddb/web-lkddb/HW_RANDOM.html">https://cateee.net/lkddb/web-lkddb/HW_RANDOM.html</a> says motherboards, not CPUs:</p>
</blockquote>
</aside>
<p><a href="../../../external.html?link=https://www.kernel.org/doc/html/latest/admin-guide/hw_random.html" class="onebox" target="_blank">https://www.kernel.org/doc/html/latest/admin-guide/hw_random.html</a></p>
<blockquote>
<p>The hw_random framework is software that makes use of a special hardware feature on your <strong>CPU or motherboard</strong>, a Random Number Generator (RNG).</p>
</blockquote>
<p>The only things I can find about Intel/AMD RNGs are in the CPU.</p>
<aside class="quote no-group" data-username="Patrick" data-post="392" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Autoload for those who have such hardware only or autoload thorough some kind of trick by anyone?</p>
</blockquote>
</aside>
<p>Not sure. There may be tricks people can use to make it autoload but we can‚Äôt really be sure. Would be best to just remove unneeded modules.</p>
<aside class="quote no-group" data-username="Patrick" data-post="392" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>CONFIG_RTL8192U popular?</p>
</blockquote>
</aside>
<p>Dunno. If it was popular, it probably wouldn‚Äôt be a staging driver.</p>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-25T06:37:20Z' class='post-time'>
                February 25, 2020,  6:37am
              </time>
              <meta itemprop='dateModified' content='2020-02-25T06:37:20Z'>
          <span itemprop='position'>#396</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Quote <a href="../../../external.html?link=https://github.com/smuellerDD/jitterentropy-library/issues/16#issuecomment-590342670">https://github.com/smuellerDD/jitterentropy-library/issues/16#issuecomment-590342670</a></p>
<p>Patrick Schleizer:</p>
<blockquote>
<p>Hi Patrick,</p>
<blockquote>
<p>Would it be useful for our upcoming <a href="../../../external.html?link=https://github.com/Whonix/hardened-kernel">hardened-kernel</a> / or generally to enable kernel config options <code>CONFIG_CRYPTO_ANSI_CPRNG</code>? (<code>CONFIG_CRYPTO_ANSI_CPRNG=y</code>)</p>
</blockquote>
<p>This cipher is not really relevant any more - it is the ANSI X9.31 Appendix A2.4 RNG. The SP800-90A DRBGs are superior to the ANSI equivalent due to covering reseed requirements and similar. I see no reason to have that RNG enabled. Ciao Stephan</p>
</blockquote>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="392" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<p>CONFIG_RTL8192U popular?</p>
</blockquote>
<p>For baremetal yes, however it makes no sense for VM.</p>
</blockquote>
</aside>
<p>How would I know if popular or not?</p>
<p>Yes, makes little sense in VM indeed.</p>
<p>(I wouldn‚Äôt say no sense at all maybe one day Whonix-Workstation could serve as a torified WiFi hotspot but since that doesn‚Äôt exist it is not important enough to consider.)</p>
<aside class="quote no-group quote-modified" data-username="madaidan" data-post="394" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<blockquote>
<p>The hw_random framework is software that makes use of a special hardware feature on your <strong>CPU or motherboard</strong> , a Random Number Generator (RNG).</p>
</blockquote>
<p>The only things I can find about Intel/AMD RNGs are in the CPU.</p>
</blockquote>
</aside>
<p>CONFIG_HW_RANDOM_VIA (was included in pull request) is in the motherboard.</p>
<p>Quote <a href="../../../external.html?link=https://cateee.net/lkddb/web-lkddb/HW_RANDOM_VIA.html">https://cateee.net/lkddb/web-lkddb/HW_RANDOM_VIA.html</a></p>
<blockquote>
<p>This driver provides kernel-side support for the Random Number Generator hardware found on VIA based motherboards.</p>
</blockquote>
<p>One good point:</p>
<blockquote>
<p>If unsure, say Y.</p>
</blockquote>
<p>Asked just now if that would be a good idea:</p>
<p><a href="../../../external.html?link=https://github.com/smuellerDD/jitterentropy-library/issues/16#issuecomment-590708246">https://github.com/smuellerDD/jitterentropy-library/issues/16#issuecomment-590708246</a></p>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-25T11:10:08Z' class='post-time'>
                February 25, 2020, 11:10am
              </time>
              <meta itemprop='dateModified' content='2020-02-25T11:10:08Z'>
          <span itemprop='position'>#397</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Got reply.</p>
<p>smuellerDD:</p>
<blockquote>
<p>Am Dienstag, 25. Februar 2020, 07:36:52 CET schrieb Patrick Schleizer:</p>
<p>Hi Patrick,</p>
<blockquote>
<p>We are using kernel command line <code>random.trust_cpu=off</code> to distrust / not<br>
credit randomness sourced from CPU‚Äôs <code>RDRAND</code>.<br>
(<a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Entropy#RDRAND">rationale</a>)</p>
<p>Now we are wondering about the following kernel compile configuration<br>
changes:</p>
<p>Old:</p>
<pre><code class="lang-auto">CONFIG_HW_RANDOM=m
CONFIG_HW_RANDOM_INTEL=m
CONFIG_HW_RANDOM_AMD=m
CONFIG_HW_RANDOM_VIA=m
</code></pre>
<p>New:</p>
<pre><code class="lang-auto">CONFIG_HW_RANDOM=y
CONFIG_HW_RANDOM_INTEL=y
CONFIG_HW_RANDOM_AMD=y
CONFIG_HW_RANDOM_VIA=y
</code></pre>
<p>Would that be a good idea?</p>
</blockquote>
<p>For starters, this is the hardware RNG framework making hardware RNGs<br>
accessible via /dev/hwrand (code residing in drivers/char/hw_random).</p>
<p>The Intel RNG is a different RNG than RDRAND, but I am not fully sure which<br>
hardware component would provide it (I guess some form of chipset that even<br>
provides the QAT hardware crypto system).</p>
<p>If a HW RNG driver sets the struct hwrng-&gt;quality integer (which defines that<br>
it provides entropy), the HW RNG framework will deliver entropy via<br>
add_hwgenerator_randomness to /dev/random. Otherwise the /dev/random is not<br>
affected by the HW RNG framework and its drivers.</p>
<p>Just do a grep quality in the drivers dir to see which drivers set a value and<br>
thus would increase the entropy in /dev/random. Then decide for yourself<br>
whether you want that.</p>
<blockquote>
<p>(Presumption is: ‚Äúdon‚Äôt trust/credit hwrng such as RDRAND but mix it into<br>
the randomness pool‚Äù.<br>
([rationale](<a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Entropy#Write_to_.2Fdev.2Frand">https://www.whonix.org/wiki/Dev/Entropy#Write_to_.2Fdev.2Frand</a><br>
om)))</p>
<p>Would that contradict <code>random.trust_cpu=off</code>?</p>
</blockquote>
<p>As stated above, it would not contradict it as the noise source would be<br>
completely different (dedicated hardware).</p>
<blockquote>
<p>Does <code>random.trust_cpu=off</code> cover hardware random generators that are<br>
located at the motherboard and not inside the CPU? (<code>CONFIG_HW_RANDOM_VIA</code><br>
says it is on the motherboard.)</p>
</blockquote>
<p>No.</p>
<blockquote>
<p>Is <code>CONFIG_HW_RANDOM_INTEL</code> ‚Äúsame as‚Äù <code>RDRAND</code>?</p>
</blockquote>
<p>No, see above.</p>
<blockquote>
<p>In other words, would<br>
<code>CONFIG_HW_RANDOM_INTEL=n</code> result in disabling <code>RDRAND</code>? (I am not<br>
suggesting to configure <code>CONFIG_HW_RANDOM_INTEL=n</code>. This is just for better<br>
understanding.)</p>
<p>My worry is that by having these hardware random generators load earlier<br>
than the module could be load could result in the initial random seeding to<br>
be more likely compromised if these hardware randomness generators are<br>
flawed / predictable / backdoored.</p>
</blockquote>
<p>Ciao<br>
Stephan</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-25T14:22:37Z' class='post-time'>
                February 25, 2020,  2:22pm
              </time>
              <meta itemprop='dateModified' content='2020-02-25T14:22:37Z'>
          <span itemprop='position'>#398</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="396" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>How would I know if popular or not?</p>
</blockquote>
</aside>
<p>Anecdotally I am seeing Realtek Wifi in a bunch of laptops across different brands.</p>
<aside class="onebox wikipedia">
  <header class="source">
      <a href="../../../external.html?link=https://en.wikipedia.org/wiki/Realtek" target="_blank">en.wikipedia.org</a>
  </header>
  <article class="onebox-body">
    <img src="../../../external.html?link=http://upload.wikimedia.org/wikipedia/en/thumb/7/70/Realtek_logo_vector.svg/220px-Realtek_logo_vector.svg.png" class="thumbnail" width="" height="">

<h3><a href="../../../external.html?link=https://en.wikipedia.org/wiki/Realtek" target="_blank">Realtek</a></h3>

<p>Realtek Semiconductor Corp. (Chinese: ÁëûÊò±ÂçäÂ∞éÈ´îËÇ°‰ªΩÊúâÈôêÂÖ¨Âè∏; pinyin: Ru√¨y√π B√†nd«éot«ê G«îf√®n Y«íuxi√†n G≈çngsƒ´), is a fabless semiconductor company situated in the Hsinchu Science Park, Hsinchu, Taiwan. Realtek was founded in October 1987 and subsequently listed on the Taiwan Stock Exchange in 1998. Realtek currently manufactures and sells a variety of microchips globally and its product lines broadly fall into three categories: communications network ICs, computer peripheral ICs, and multimedia ICs. As of 2019,...</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Also Wikipedia indicates it has major marketshare though those stats are a bit dated :</p>
<blockquote>
<p>Notable Realtek products include 10/100M Ethernet controllers (with a global market share of 70% as of 2003) and audio codecs (<a href="../../../external.html?link=https://en.wikipedia.org/wiki/AC%2797">AC‚Äô97</a> and <a href="../../../external.html?link=https://en.wikipedia.org/wiki/Intel_HD_Audio">Intel HD Audio</a>), where Realtek had a 50% market share in 2003 and a 60% market share in 2004, primarily concentrated in the integrated <a href="../../../external.html?link=https://en.wikipedia.org/wiki/Original_equipment_manufacturer">OEM</a> on-board audio market-segment.<a href="../../../external.html?link=https://en.wikipedia.org/wiki/Realtek#cite_note-3">[3]</a> As of 2013 the ALC892 HD Audio codec and RTL8111 Gigabit Ethernet chip have become particular OEM favorites</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-25T17:03:14Z' class='post-time'>
                February 25, 2020,  5:03pm
              </time>
              <meta itemprop='dateModified' content='2020-02-25T17:03:14Z'>
          <span itemprop='position'>#399</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="HulaHoop" data-post="398" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Anecdotally I am seeing Realtek Wifi in a bunch of laptops across different brands.</p>
</blockquote>
</aside>
<p>Just because Realtek in general is popular doesn‚Äôt mean the RTL8192U driver is. Realtek makes plenty of chips.</p>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-25T17:09:12Z' class='post-time'>
                February 25, 2020,  5:09pm
              </time>
              <meta itemprop='dateModified' content='2020-02-25T17:09:12Z'>
          <span itemprop='position'>#400</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/hardened-kernel/pull/46" target="_blank">github.com/Whonix/hardened-kernel</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewbox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/Whonix/hardened-kernel/pull/46" target="_blank">Compile only virtio-rng as built-in</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ‚Üê <code>madaidan:virtio-rng</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-02-25" data-time="17:09:00" data-timezone="UTC">05:09PM - 25 Feb 20 UTC</span>
      </div>

      <div class="user">
        <a href="../../../external.html?link=https://github.com/madaidan" target="_blank">
          <img alt="madaidan" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 4 additions and 4 deletions">
        <a href="../../../external.html?link=https://github.com/Whonix/hardened-kernel/pull/46/files" target="_blank">
          <span class="added">+4</span>
          <span class="removed">-4</span>
        </a>
      </div>
    </div>

  </div>
</div>
  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-25T17:29:03Z' class='post-time'>
                February 25, 2020,  5:29pm
              </time>
              <meta itemprop='dateModified' content='2020-02-25T17:29:03Z'>
          <span itemprop='position'>#401</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/hardened-kernel/pull/47" target="_blank">github.com/Whonix/hardened-kernel</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewbox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/Whonix/hardened-kernel/pull/47" target="_blank">Disable some unneeded drivers</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ‚Üê <code>madaidan:unneeded</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-02-25" data-time="17:28:52" data-timezone="UTC">05:28PM - 25 Feb 20 UTC</span>
      </div>

      <div class="user">
        <a href="../../../external.html?link=https://github.com/madaidan" target="_blank">
          <img alt="madaidan" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="3 commits changed 2 files with 4 additions and 874 deletions">
        <a href="../../../external.html?link=https://github.com/Whonix/hardened-kernel/pull/47/files" target="_blank">
          <span class="added">+4</span>
          <span class="removed">-874</span>
        </a>
      </div>
    </div>

  </div>
</div>
  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-25T21:49:59Z' class='post-time'>
                February 25, 2020,  9:49pm
              </time>
              <meta itemprop='dateModified' content='2020-02-25T21:49:59Z'>
          <span itemprop='position'>#402</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><code>CONFIG_EFI_VARS</code> might be good to disable in the host kernel. It exposes a lot of attack surface as it allows you to mess with EFI variables.</p>
<p><a href="../../../external.html?link=https://github.com/torvalds/linux/blob/master/drivers/firmware/efi/Kconfig">https://github.com/torvalds/linux/blob/master/drivers/firmware/efi/Kconfig</a></p>
<p>There have been cases of people bricking their computers by accidentally deleting EFI variables. An attacker might be able to do far more by writing specific things to them.</p>
<p>CLIP OS disables this.</p>
<p><a href="../../../external.html?link=https://github.com/clipos/src_platform_config-linux-hardware/blob/master/kernel_config/blacklist#L60">https://github.com/clipos/src_platform_config-linux-hardware/blob/master/kernel_config/blacklist#L60</a></p>
<p>There are also the <code>CONFIG_DEV_COREDUMP</code>, <code>CONFIG_WANT_DEV_COREDUMP</code> and <code>CONFIG_ALLOW_DEV_COREDUMP</code> options.</p>
<p><a href="../../../external.html?link=https://github.com/torvalds/linux/blob/master/drivers/base/Kconfig#L92-L114">https://github.com/torvalds/linux/blob/master/drivers/base/Kconfig#L92-L114</a></p>
<p>These seem to add a ‚Äúdevice coredump‚Äù thing regardless of <code>CONFIG_COREDUMP</code> (which we disable).</p>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7598.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-25T21:56:41Z' class='post-time'>
                February 25, 2020,  9:56pm
              </time>
              <meta itemprop='dateModified' content='2020-02-25T21:56:41Z'>
          <span itemprop='position'>#403</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Also, instead of trying to patch out dmesg, we can try just disabling <code>CONFIG_PRINTK</code>.</p>
        </div>

        <meta itemprop='headline' content='kernel recompilation for better hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="75987537.html?page=19">‚Üê previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="7598e4a7.html?page=21">next page ‚Üí</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
