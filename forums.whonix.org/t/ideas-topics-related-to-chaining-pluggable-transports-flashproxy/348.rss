<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Ideas/Topics related to chaining Pluggable Transports / flashproxy</title>
    <link>http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348</link>
    <description>As of yet the framework that allows users to arbitrarily combine pluggable transport combinations to circumvent DPI features, is still a work in progress. This page lists all the transports and the progress made on them, makes for an interesting read:

https://trac.torproject.org/projects/tor/wiki/doc/PluggableTransports 


Meanwhile we can discuss and tackle some of the pitfalls for using some of these transports should the time come when they are ready to be used in the way suggested above.

Flashproxy on its own doesn&#39;t prevent protocol fingerprinting, but it makes bridge connections covert and could foil the harvesting process of bridge lists carried out by intelligence agencies :

First off  lets look at the issues listed here:
https://www.whonix.org/wiki/Dev/Flash_Proxy

&lt;blockquote&gt;* Each flashproxy client requires a listening port on the open Internet. That&#39;s something we&#39;ve never had in Whonix before, neither by default or through some options (our firewall even blocks it). That enables fingerprintability when scanning the ports of a Whonix host.

* Listening on a port like that also increases the attack surface dramatically; before this, no random host could try to attack Whonix by connecting to it -- the Whonix host had to (some how) connect to them first. So, yeah, these two things are quite contradictory.

* The above point also raises some practical issues: in order to listen on an Internet-exposed port, the user must either use IPv6 (which isn&#39;t served by all ISPs, and is unsupported/disabled by default in many routers in use) or, in the case of IPv4, set up port-forwarding (since most people are behind NAT). This limits the usefulness of flashproxy.

* The flashproxy client requires a direct connection to gmail.com, which I feel a bit uncomfortable with for a number of reasons. Currently Whonix only &quot;speaks Tor&quot; outwards, i.e. it communicates directly only with the Tor network or Tor bridges (exceptions: unsafe user on Whonix-Gateawy (e.g. for physical isolation users and captive portal login).&lt;/blockquote&gt;

1. If a firewall is enabled on the host shouldn&#39;t it block portscanners from being able to see if there is a port listening on the host? If this is still fingerprintable anyway, then perhaps we should avoid enabling it be default. And/or advise users to use some random port number manually.

2. Not dramatically, its probably no different than when running Tor in relay mode. They already manage great since their code is of highest quality. From the page linked to at the beginning, its clear that the transports accepted by the Tor project and promoted by them go through a vetting process. Memory safe languages are promoted, with careful exceptions for ones coded in C. 

Tor has added seccomp support which it should use automatically. Pluggable transports can follow suit and have Apparmor profiles added for them too. I don&#39;t know if Whonix&#39;s version of Debian has seccomp backported yet.

3. Almost all off the shelf, run of the mill home routers have UPNP enabled. A problem I see if its used from behind a corporate/organization router which has it disabled - and a user can&#39;t access.

4. They have taken care of that hard requirement by now, allowing other services to be used. Whether they are using an alternative now, I can&#39;t say and its a question best asked on the Tor mailinglist.

Although I can see conceptually how uneasy this would make us, the messages themselves are encrypted which should leave no room for MITM. Also think of gmail as no different than the many untrusted nodes that we traverse in any transaction over the network anyway.


Important Notes: 

KVM guests such as the Gateway in our use case, are using the default NAT network. To configure port-forwarding from the host there is a script they provide on the libvirt wiki which we can adapt to our uses and distribute with the image in the future when transport chaining becomes a reality. one of them is for a single machine, the other can port forward to many - which is useful for multi-Gateway scenarios:

http://wiki.libvirt.org/page/Networking#Forwarding_Incoming_Connections</description>
    <language>en</language>
    <lastBuildDate>Mon, 01 Feb 2016 19:25:28 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Ideas/Topics related to chaining Pluggable Transports / flashproxy</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://trac.torproject.org/projects/tor/ticket/17428">Flashproxy has been removed from TBB. Therefore it can be considered deprecated.</a></p>
<blockquote>
<p>We should remove Flashproxy from Tor Browser as it basically has zero<br>
users. dcf and yawning are fine with that (see discussion in <a href="https://trac.torproject.org/projects/tor/ticket/16756">#16756</a> for more details).</p>
</blockquote>
<p>I must admit, I am not unhappy about it. The project name and the requirement for an incoming connection (port forwarding) was a mess.</p>
<hr>
<p><a href="https://www.whonix.org/wiki/Dev/Flash_Proxy#Snowflake">Snowflake - Soon to replace flashproxy. It uses WebRTC peers to solve NAT connection problems.</a></p>
          <p><a href="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/9</link>
        <pubDate>Mon, 01 Feb 2016 19:25:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-348-9</guid>
        <source url="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348.rss">Ideas/Topics related to chaining Pluggable Transports / flashproxy</source>
      </item>
      <item>
        <title>Ideas/Topics related to chaining Pluggable Transports / flashproxy</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>flashproxy-client is now installable from Debian.</p>
<p><a href="https://packages.debian.org/jessie/flashproxy-client" class="onebox" target="_blank">https://packages.debian.org/jessie/flashproxy-client</a></p>
<p>I think we should install it by default in Whonix 13. Even if we do not encourage using it, it simplifies the setup for those who wish to use it. Done in git master.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/anon-meta-packages/commit/6a08e96030d5c15cacf4c174d40aab7f2305bf46" target="_blank" rel="nofollow noopener">github.com/Whonix/anon-meta-packages</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/anon-meta-packages/commit/6a08e96030d5c15cacf4c174d40aab7f2305bf46" target="_blank" rel="nofollow noopener">added flashproxy-client to anon-gateway-packages-recommended</a>
</h4>


<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="https://github.com/Whonix/anon-meta-packages/commit/6a08e96030d5c15cacf4c174d40aab7f2305bf46" target="_blank" rel="nofollow noopener">06:31PM - 03 Jan 16</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>1 additions</strong>
  and <strong>1 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Updated the wiki:<br>
<a href="https://www.whonix.org/wiki/Bridges#flashproxy">https://www.whonix.org/wiki/Bridges#flashproxy</a></p>
          <p><a href="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/8</link>
        <pubDate>Sun, 03 Jan 2016 18:38:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-348-8</guid>
        <source url="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348.rss">Ideas/Topics related to chaining Pluggable Transports / flashproxy</source>
      </item>
      <item>
        <title>Ideas/Topics related to chaining Pluggable Transports / flashproxy</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Seccomp discussion moved here:<br>
<a href="https://www.whonix.org/forum/index.php/topic,371.0.html" class="onebox" target="_blank">https://www.whonix.org/forum/index.php/topic,371.0.html</a></p>
          <p><a href="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/7</link>
        <pubDate>Thu, 10 Jul 2014 10:28:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-348-7</guid>
        <source url="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348.rss">Ideas/Topics related to chaining Pluggable Transports / flashproxy</source>
      </item>
      <item>
        <title>Ideas/Topics related to chaining Pluggable Transports / flashproxy</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Thanks for investigating. That is good news because we can assume it solves the security problems of port forwarding <span class="bbcode-i">and</span> fingerprinting.</p>
<p>By fingerprinting I mean ports, the Flashproxy protocol itself is easily fingerprintable but thats what obfsproxy is for.</p>
<blockquote>Pushing forward better circumvention support in Whonix is a fine thing to better support censored users. However, the threat model you originally had in mind (that I understand as "protect people from ending up in databases as extremists because they are connecting to known Tor servers by combining pluggable transports"), most likely won't be improved.</blockquote>
<p>Good points. With millions of users who are using it now and ever visited and used the site, the stuff they gather about visitors and users is useless noise which is about as useful as saying ‘this person has an internet connection’. The sheer number and diversity of users makes any censoring have huge collateral damage with an effect similar to cutting off the internet. The meek plugin I was talking about last post, makes use of major US webservices as rendezvous points to relays, censoring access to them is very unprobable in Western countries.</p>
<p>Worthwhile reasons:</p>
<ul>
<li>
<p>To counter censorship in event of any Western society  going full turn and deploying a Great Firewall on its people. NSA may have the whole network but I don’t think they will want to be doing active censoring attacks in other countries’ networks.</p>
</li>
<li>
<p>From the leaked documents, I think its clear that the Tor protocol used in bridge obfuscation is reaching a point of no return for DPI detection. It may be an arms race but there will be a point where there is little any of them can do to find out when a Tor client is being used in the future vs looking up that an ‘extremist’  used Tor in the past.</p>
</li>
<li>
<p>It will confuse the distinction between whether this is a Bridge or someone running a Tor client and also communicating with someone else on the clearnet with a normal looking protocol.</p>
</li>
</ul>
          <p><a href="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/6</link>
        <pubDate>Thu, 10 Jul 2014 01:03:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-348-6</guid>
        <source url="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348.rss">Ideas/Topics related to chaining Pluggable Transports / flashproxy</source>
      </item>
      <item>
        <title>Ideas/Topics related to chaining Pluggable Transports / flashproxy</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <blockquote>[quote]If this is still fingerprintable anyway, then perhaps we should avoid enabling it be default. And/or advise users to use some random port number manually.[/quote]
I've sent a mail to the creator of flash proxy (David) to get an answer to that question.</blockquote>
I got permission to publish it here. Thanks, David!
<p>me:</p>
<blockquote>when flash proxy listens on a random open port, will censors be able to fingerprint that port by doing a port scan / probe?</blockquote>
<p>David Fifield:</p>
<blockquote>Yes, I'm sure it's fingerprintable, because it's just the normal Python BaseHTTPServer.
<p>When we implement WebRTC, I think it won’t be possible to scan for client any more.<br>
<a href="https://trac.torproject.org/projects/tor/ticket/5578" class="onebox" target="_blank">https://trac.torproject.org/projects/tor/ticket/5578</a></p>
<p>You can also link to<br>
<a href="https://trac.torproject.org/projects/tor/wiki/doc/AChildsGardenOfPluggableTransports#Flashproxy">https://trac.torproject.org/projects/tor/wiki/doc/AChildsGardenOfPluggableTransports#Flashproxy</a> .<br>
It shows exactly how it looks when a flash proxy connects to a client.</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/5</link>
        <pubDate>Wed, 09 Jul 2014 22:31:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-348-5</guid>
        <source url="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348.rss">Ideas/Topics related to chaining Pluggable Transports / flashproxy</source>
      </item>
      <item>
        <title>Ideas/Topics related to chaining Pluggable Transports / flashproxy</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Thank you for this interesting discussion!</p>
<aside class="quote" data-post="3" data-topic="343">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"><a href="//forums.whonix.org/t/mentioning-privacy-on-the-internet-is-illegal/343/3">Mentioning Privacy on the Internet is Illegal</a>
</div>
<blockquote>
<p>From what I have seen in this article, I think an important direction to move towards is to concentrate on <span class="bbcode-b">pluggable transport chaining</span>: where obfsproxy hides that Tor is being used while flashproxy makes use of undocumented bridges - combining the benefits of both is possible. And in the future  we could strongly recommend this setup or enable it by default.</p>
</blockquote>
</aside>
<p>Pushing forward better circumvention support in Whonix is a fine thing to better support censored users. However, the threat model you originally had in mind (that I understand as “protect people from ending up in databases as extremists because they are connecting to known Tor servers by combining pluggable transports”), most likely won’t be improved.</p>
<p>Se this quote.</p>
<p>Quote <a href="https://www.whonix.org/wiki/Hide_Tor_and_Whonix_from_your_ISP">https://www.whonix.org/wiki/Hide_Tor_and_Whonix_from_your_ISP</a></p>
<blockquote>Using private and obfuscated bridges alone doesn't provide strong guarantees of hiding the fact you are using Tor from your ISP. Quote (https://mailman.boum.org/pipermail/tails-dev/2013-April/002950.html http://www.webcitation.org/6G67ltL45) Jacob Appelbaum:
<p>[quote]    Some pluggable transports may seek to obfuscate traffic or to morph it. However, they do not claim to hide that you are using Tor in all cases but rather in very specific cases. An example threat model includes a DPI device with limited time to make a classification choice - so the hiding is very specific to functionality and generally does not take into account endless data retention with retroactive policing.[/quote]</p>
</blockquote>
<p>Pluggable transports are an arms race against censors. Unfortunately, by concept it can not reliably hide Tor for everyone from passive eavesdroppers.</p>
<p>So even if they are unable to enumerate all bridges and we are able to trick them now, they’ll log all traffic and reclassify it as soon as they can detect, that pluggable transports have been used in past.</p>
<p>Also this only forwards the problem of ending up in a database marked as extremist from the user to someone else - to the one who hosts the bridge - because the bridge will connect to the public Tor network - and therefore will end up in a database marked as extremist.</p>
<p>The approach in countries who do not dare to ban the Tor network for everyone as censored countries do should be better an offensive one - get more people protest their constitutional right to privacy and marked as Tor users and extremists until the word extremist is so weak, that everyone is marked as one. I don’t see how the other approach “everyone or most should hide they are Tor users” is technically possible. For what you have in mind, the best concept might be friend to friend networks such as retroshare. Using friend to friend networks on top of the internet, we could end up with a net, that can reliably keep out eavesdroppers. However, it is a different approach than Tor. Both approaches are valuable and worthwhile.</p>
<aside class="quote" data-post="1" data-topic="348">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Flashproxy on its own doesn’t prevent protocol fingerprinting, but it makes bridge connections covert and could foil the harvesting process of bridge lists carried out by intelligence agencies :</p>
</blockquote>
</aside>
<p>In my opinion, the flashproxy concept is flawed. Censors can simply say “no open/incoming [server] ports for customer connections” + “open ports only for people who can provide a valid reason to require one”.</p>
<blockquote>1. If a firewall is enabled on the host shouldn't it block portscanners from being able to see if there is a port listening on the host?</blockquote>
Usually firewall block all incoming ports by default. This further complicates flash proxy. Obstacles are host firewalls and/or home routers (due to NAT).
<blockquote>If this is still fingerprintable anyway, then perhaps we should avoid enabling it be default. And/or advise users to use some random port number manually.</blockquote>
I've sent a mail to the creator of flash proxy (David) to get an answer to that question.
<blockquote>I don't know if Whonix's version of Debian has seccomp backported yet.</blockquote>
It's in seccomp wheezy-backports. I don't know about seccomp. Is it enough to install the package and all applications making use of it will benefit from it?
<blockquote>3. Almost all off the shelf, run of the mill home routers have UPNP enabled.</blockquote>
But Tor's UPNP support is still broken and no one working on it?
<blockquote>4. They have taken care of that hard requirement by now, allowing other services to be used. Whether they are using an alternative now, I can't say and its a question best asked on the Tor mailinglist.
<p>Although I can see conceptually how uneasy this would make us, the messages themselves are encrypted which should leave no room for MITM. Also think of gmail as no different than the many untrusted nodes that we traverse in any transaction over the network anyway.</p>
</blockquote><br>
Ok.
          <p><a href="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/4</link>
        <pubDate>Wed, 09 Jul 2014 11:12:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-348-4</guid>
        <source url="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348.rss">Ideas/Topics related to chaining Pluggable Transports / flashproxy</source>
      </item>
      <item>
        <title>Ideas/Topics related to chaining Pluggable Transports / flashproxy</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://mailman.boum.org/pipermail/tails-dev/2013-June/003127.html" class="onebox" target="_blank">https://mailman.boum.org/pipermail/tails-dev/2013-June/003127.html</a></p>
<p><span class="bbcode-b">I think its better if we look for alternatives to Flashproxy</span> as its security implications, may be troubling after all. If there is anything with similar properties, its best to use that instead to avoid portforwarding problems if nothing else.</p>
<p>The bridgeless meek transport comes to mind perhaps</p>
          <p><a href="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/3</link>
        <pubDate>Wed, 09 Jul 2014 02:16:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-348-3</guid>
        <source url="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348.rss">Ideas/Topics related to chaining Pluggable Transports / flashproxy</source>
      </item>
      <item>
        <title>Ideas/Topics related to chaining Pluggable Transports / flashproxy</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>And here’s another dynamic port forwarding script for NAT guests for KVM:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://saschpe.files.wordpress.com/2020/01/cropped-headshot-1024x1024-round.png?w=32" class="site-icon" width="32" height="32">
      <a href="https://saschpe.wordpress.com/2014/03/06/dynamic-iptables-port-forwarding-for-nat-ed-libvirt-networks/" target="_blank" title="03:40PM - 06 March 2014">Sascha Peilicke – 6 Mar 14</a>
  </header>
  <article class="onebox-body">
    <img src="https://saschpe.files.wordpress.com/2020/01/cropped-headshot-1024x1024-round.png?w=200" class="thumbnail onebox-avatar" width="200" height="200">

<h3><a href="https://saschpe.wordpress.com/2014/03/06/dynamic-iptables-port-forwarding-for-nat-ed-libvirt-networks/" target="_blank">Dynamic iptables port-forwarding for NAT-ed libvirt networks</a></h3>

<p>Libvirt is particularly awesome when it comes to managing virtual machines, their underlying storage and networks. However, if you happen to use NAT-ed networking and want to allow external access …</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/2</link>
        <pubDate>Wed, 09 Jul 2014 02:01:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-348-2</guid>
        <source url="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348.rss">Ideas/Topics related to chaining Pluggable Transports / flashproxy</source>
      </item>
      <item>
        <title>Ideas/Topics related to chaining Pluggable Transports / flashproxy</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>As of yet the framework that allows users to arbitrarily combine pluggable transport combinations to circumvent DPI features, is still a work in progress. This page lists all the transports and the progress made on them, makes for an interesting read:</p>
<p><a href="https://trac.torproject.org/projects/tor/wiki/doc/PluggableTransports" class="onebox" target="_blank">https://trac.torproject.org/projects/tor/wiki/doc/PluggableTransports</a></p>
<p>Meanwhile we can discuss and tackle some of the pitfalls for using some of these transports should the time come when they are ready to be used in the way suggested above.</p>
<p>Flashproxy on its own doesn’t prevent protocol fingerprinting, but it makes bridge connections covert and could foil the harvesting process of bridge lists carried out by intelligence agencies :</p>
<p>First off  lets look at the issues listed here:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Dev/Flash_Proxy" target="_blank" title="01:33PM - 30 April 2019">Whonix – 30 Apr 19</a>
  </header>
  <article class="onebox-body">
    <img src="" class="thumbnail" width="" height="">

<h3><a href="https://www.whonix.org/wiki/Dev/Flash_Proxy" target="_blank">Dev/Flash Proxy - Whonix</a></h3>

<p>Development Notes for adding Flash Proxy / Snowflake (circumvention) support to Whonix ™.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<blockquote>* Each flashproxy client requires a listening port on the open Internet. That's something we've never had in Whonix before, neither by default or through some options (our firewall even blocks it). That enables fingerprintability when scanning the ports of a Whonix host.
<ul>
<li>
<p>Listening on a port like that also increases the attack surface dramatically; before this, no random host could try to attack Whonix by connecting to it – the Whonix host had to (some how) connect to them first. So, yeah, these two things are quite contradictory.</p>
</li>
<li>
<p>The above point also raises some practical issues: in order to listen on an Internet-exposed port, the user must either use IPv6 (which isn’t served by all ISPs, and is unsupported/disabled by default in many routers in use) or, in the case of IPv4, set up port-forwarding (since most people are behind NAT). This limits the usefulness of flashproxy.</p>
</li>
<li>
<p>The flashproxy client requires a direct connection to <a href="http://gmail.com">gmail.com</a>, which I feel a bit uncomfortable with for a number of reasons. Currently Whonix only “speaks Tor” outwards, i.e. it communicates directly only with the Tor network or Tor bridges (exceptions: unsafe user on Whonix-Gateawy (e.g. for physical isolation users and captive portal login).</p>
</li>
</ul>
</blockquote>


<ol>
<li>
<p>If a firewall is enabled on the host shouldn’t it block portscanners from being able to see if there is a port listening on the host? If this is still fingerprintable anyway, then perhaps we should avoid enabling it be default. And/or advise users to use some random port number manually.</p>
</li>
<li>
<p>Not dramatically, its probably no different than when running Tor in relay mode. They already manage great since their code is of highest quality. From the page linked to at the beginning, its clear that the transports accepted by the Tor project and promoted by them go through a vetting process. Memory safe languages are promoted, with careful exceptions for ones coded in C.</p>
</li>
</ol>
<p>Tor has added seccomp support which it should use automatically. Pluggable transports can follow suit and have Apparmor profiles added for them too. I don’t know if Whonix’s version of Debian has seccomp backported yet.</p>
<ol start="3">
<li>
<p>Almost all off the shelf, run of the mill home routers have UPNP enabled. A problem I see if its used from behind a corporate/organization router which has it disabled - and a user can’t access.</p>
</li>
<li>
<p>They have taken care of that hard requirement by now, allowing other services to be used. Whether they are using an alternative now, I can’t say and its a question best asked on the Tor mailinglist.</p>
</li>
</ol>
<p>Although I can see conceptually how uneasy this would make us, the messages themselves are encrypted which should leave no room for MITM. Also think of gmail as no different than the many untrusted nodes that we traverse in any transaction over the network anyway.</p>
<p>Important Notes:</p>
<p>KVM guests such as the Gateway in our use case, are using the default NAT network. To configure port-forwarding from the host there is a script they provide on the libvirt wiki which we can adapt to our uses and distribute with the image in the future when transport chaining becomes a reality. one of them is for a single machine, the other can port forward to many - which is useful for multi-Gateway scenarios:</p>
<p><a href="http://wiki.libvirt.org/page/Networking#Forwarding_Incoming_Connections" class="onebox" target="_blank">http://wiki.libvirt.org/page/Networking#Forwarding_Incoming_Connections</a></p>
          <p><a href="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348/1</link>
        <pubDate>Wed, 09 Jul 2014 01:54:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-348-1</guid>
        <source url="http://forums.whonix.org/t/ideas-topics-related-to-chaining-pluggable-transports-flashproxy/348.rss">Ideas/Topics related to chaining Pluggable Transports / flashproxy</source>
      </item>
  </channel>
</rss>
