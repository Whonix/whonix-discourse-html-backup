<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>LKRG need update</title>
    <link>http://forums.whonix.org/t/lkrg-need-update/14771</link>
    <description>Please update LKRG in whonix repos. Version in repos not working with latest debian stable kernel in live mode

Workstation:

```
Loading Linux 5.10.0-17-amd64 ...
Loading initial ramdisk ...
[    5.099451] [p_lkrg] Loading LKRG...
[    5.425888] [p_lkrg] LKRG initialized successfully!
[   14.921276] swap-file-creator[546]: BOOT_IMAGE=/boot/vmlinuz-5.10.0-17-amd64 root=/dev/disk/by-uuid/26ada0c0-1165-4098-884d-aafd2220c2c6 ro console=tty0 console=ttyS0,115200n8 spectre_v2=on spec_store_bypass_disable=on l1tf=full,force mds=full,nosmt tsx=off tsx_async_abort=full,nosmt kvm.nx_huge_pages=force nosmt=force l1d_flush=on mmio_stale_data=full,nosmt random.trust_bootloader=off random.trust_cpu=off intel_iommu=on amd_iommu=on efi=disable_early_pci_dma iommu.passthrough=0 iommu.strict=1 slab_nomerge init_on_alloc=1 init_on_free=1 pti=on vsyscall=none page_alloc.shuffle=1 randomize_kstack_offset=on extra_latent_entropy debugfs=off boot=live plainroot union=overlay ip=frommedia noeject nopersistence rootovl quiet loglevel=0
[   14.955591] swap-file-creator[534]: Live mode detected. Swap file creation skipped.
[   15.939456] ram-adjusted-desktop-starter[666]: [INFO] Trying to start display manager (graphical desktop environment) &#39;gdm3&#39;...
[   16.048915] ram-adjusted-desktop-starter[666]: INFO: Switch virtual console (&#39;tty2&#39;). See: https://www.whonix.org/wiki/vu
[   16.813741] [p_lkrg] ALERT !!! _STEXT MEMORY BLOCK HASH IS DIFFERENT - it is [0xe71407c67619fcdc] and should be [0x8110571e2f15ac2f] !!!
[   16.817246] [p_lkrg] ALERT !!! MODULE&#39;S &lt;nf_conntrack&gt; HASH IS DIFFERENT it is [0xb0d88dba0ca37ab4] and should be [0xb6623605f2889a42] !!!
[   16.818555] [p_lkrg] ALERT !!! MODULE LIST HASH IS DIFFERENT !!! - it is [0x98ecde2d3f52a0cf] and should be [0xa051c0bdec20a959] !!!
[   16.819797] [p_lkrg] ALERT !!! MODULE KOBJ HASH IS DIFFERENT !!! - it is [0x64c66979dfa4ae19] and should be [0x4a654e67e20f591e] !!!
[   16.821055] [p_lkrg] [KOBJ] ALERT !!! MODULE&#39;S &lt;nf_conntrack&gt; HASH IS DIFFERENT it is [0xb0d88dba0ca37ab4] and should be [0xb6623605f2889a42] !!!
[   16.822411] [p_lkrg] ALERT !!! SYSTEM HAS BEEN COMPROMISED - DETECTED DIFFERENT 5 CHECKSUMS !!!
[   16.823364] Kernel panic - not syncing: [p_lkrg] Kernel Integrity verification failed! Killing the kernel...
[   16.824397] CPU: 0 PID: 114 Comm: kworker/u2:2 Tainted: G           OE     5.10.0-17-amd64 #1 Debian 5.10.136-1
[   16.825453] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.14.0-2 04/01/2014
[   16.826343] Workqueue: events_unbound p_check_integrity [p_lkrg]
[   16.826990] Call Trace:
[   16.827259]  dump_stack+0x6b/0x83
[   16.827618]  panic+0x101/0x2d7
[   16.827950]  p_check_integrity.cold+0xb96/0x1e89 [p_lkrg]
[   16.828536]  process_one_work+0x1b6/0x350
[   16.828974]  worker_thread+0x53/0x3e0
[   16.829369]  ? process_one_work+0x350/0x350
[   16.829815]  kthread+0x11b/0x140
[   16.830162]  ? __kthread_bind_mask+0x60/0x60
[   16.830619]  ret_from_fork+0x22/0x30
[   16.831197] Kernel Offset: 0x4e00000 from 0xffffffff81000000 (relocation range: 0xffffffff80000000-0xffffffffbfffffff)
[   16.832333] ---[ end Kernel panic - not syncing: [p_lkrg] Kernel Integrity verification failed! Killing the kernel... ]---
```


Error on Gateway

```
Login Instructions:

1) Type the username. Default user name is &quot;user&quot; without quotes. Then press &lt;enter&gt;.

2) Type the password. When entering the password, no password feedback (no asterisk (&quot;*&quot;) symbol) will be shown. Default password is &quot;changeme&quot; without quotes. Then press &lt;enter&gt;.

host login: [   19.634424] [p_lkrg] ALERT !!! _STEXT MEMORY BLOCK HASH IS DIFFERENT - it is [0xda5c43f8ea4dc4c6] and should be [0x81562e62573ad9f3] !!!
[   19.637767] [p_lkrg] ALERT !!! MODULE&#39;S &lt;nf_nat&gt; HASH IS DIFFERENT it is [0x5f90d8f14c66f42d] and should be [0x8212968ce6669d25] !!!
[   19.638988] [p_lkrg] ALERT !!! MODULE&#39;S &lt;nf_conntrack&gt; HASH IS DIFFERENT it is [0x61e33fd13f834739] and should be [0x73a9058ee386fb69] !!!
[   19.640252] [p_lkrg] ALERT !!! MODULE LIST HASH IS DIFFERENT !!! - it is [0x2f7d92c4b41dbb34] and should be [0xd38d3030d10edf] !!!
[   19.641441] [p_lkrg] ALERT !!! MODULE KOBJ HASH IS DIFFERENT !!! - it is [0x884ebcb348e86b53] and should be [0x76819da0d5e9f74e] !!!
[   19.642764] [p_lkrg] [KOBJ] ALERT !!! MODULE&#39;S &lt;nf_conntrack&gt; HASH IS DIFFERENT it is [0x61e33fd13f834739] and should be [0x73a9058ee386fb69] !!!
[   19.644085] [p_lkrg] [KOBJ] ALERT !!! MODULE&#39;S &lt;nf_nat&gt; HASH IS DIFFERENT it is [0x5f90d8f14c66f42d] and should be [0x8212968ce6669d25] !!!
[   19.645352] [p_lkrg] ALERT !!! SYSTEM HAS BEEN COMPROMISED - DETECTED DIFFERENT 7 CHECKSUMS !!!
[   19.646233] Kernel panic - not syncing: [p_lkrg] Kernel Integrity verification failed! Killing the kernel...
[   19.647229] CPU: 0 PID: 627 Comm: kworker/u2:4 Tainted: G           OE     5.10.0-17-amd64 #1 Debian 5.10.136-1
[   19.648263] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.14.0-2 04/01/2014
[   19.649118] Workqueue: events_unbound p_check_integrity [p_lkrg]
[   19.649734] Call Trace:
[   19.649995]  dump_stack+0x6b/0x83
[   19.650343]  panic+0x101/0x2d7
[   19.650666]  p_check_integrity.cold+0xb96/0x1e89 [p_lkrg]
[   19.651226]  process_one_work+0x1b6/0x350
[   19.651641]  worker_thread+0x53/0x3e0
[   19.652025]  ? process_one_work+0x350/0x350
[   19.652456]  kthread+0x11b/0x140
[   19.652793]  ? __kthread_bind_mask+0x60/0x60
[   19.653235]  ret_from_fork+0x22/0x30
[   19.653820] Kernel Offset: 0xd400000 from 0xffffffff81000000 (relocation range: 0xffffffff80000000-0xffffffffbfffffff)
[   19.654916] ---[ end Kernel panic - not syncing: [p_lkrg] Kernel Integrity verification failed! Killing the kernel... ]---
```

Manual update to 0.9.5 solves the problem</description>
    <language>en</language>
    <lastBuildDate>Mon, 10 Oct 2022 19:07:06 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/lkrg-need-update/14771.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>LKRG need update</title>
        <dc:creator><![CDATA[unas]]></dc:creator>
        <description><![CDATA[
            <p>Just to complement in order to upgrade manually to 0.9.5 follow the official github repo from lkrg (* github com / lkrg-org / lkrg *):</p>
<ol>
<li>
<p>In orther to enter to the system in the boot loader before it enters at start where you select the OS to boot, press the letter ‘e’ to edit linux image kernel parameters, is is the one before the OS name and at the end of that line write " debug nolkrg" without the quotes and then ctrl+x or F10. It should let you boot or at least check for more info</p>
</li>
<li>
<p>then uninstall p_lklrg (lkrg module) following github readme</p>
</li>
<li>
<p>next, install lkrg as shown in github either way (by building it with make or with dkms), but personally the second one with dkms is preferred for me because it recompile with new kernel upgrades</p>
</li>
<li>
<p>at last modify the module auto loading at boot changing “p_lkrg” for “lkrg” without quotes in the conf file “/etc/modules-load.d/lkrg-dkms.conf”</p>
</li>
</ol>
          <p><a href="http://forums.whonix.org/t/lkrg-need-update/14771/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/lkrg-need-update/14771/2</link>
        <pubDate>Mon, 10 Oct 2022 18:52:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14771-2</guid>
        <source url="http://forums.whonix.org/t/lkrg-need-update/14771.rss">LKRG need update</source>
      </item>
      <item>
        <title>LKRG need update</title>
        <dc:creator><![CDATA[nathaniel.haggard]]></dc:creator>
        <description><![CDATA[
            <p>Please update LKRG in whonix repos. Version in repos not working with latest debian stable kernel in live mode</p>
<p>Workstation:</p>
<pre><code class="lang-auto">Loading Linux 5.10.0-17-amd64 ...
Loading initial ramdisk ...
[    5.099451] [p_lkrg] Loading LKRG...
[    5.425888] [p_lkrg] LKRG initialized successfully!
[   14.921276] swap-file-creator[546]: BOOT_IMAGE=/boot/vmlinuz-5.10.0-17-amd64 root=/dev/disk/by-uuid/26ada0c0-1165-4098-884d-aafd2220c2c6 ro console=tty0 console=ttyS0,115200n8 spectre_v2=on spec_store_bypass_disable=on l1tf=full,force mds=full,nosmt tsx=off tsx_async_abort=full,nosmt kvm.nx_huge_pages=force nosmt=force l1d_flush=on mmio_stale_data=full,nosmt random.trust_bootloader=off random.trust_cpu=off intel_iommu=on amd_iommu=on efi=disable_early_pci_dma iommu.passthrough=0 iommu.strict=1 slab_nomerge init_on_alloc=1 init_on_free=1 pti=on vsyscall=none page_alloc.shuffle=1 randomize_kstack_offset=on extra_latent_entropy debugfs=off boot=live plainroot union=overlay ip=frommedia noeject nopersistence rootovl quiet loglevel=0
[   14.955591] swap-file-creator[534]: Live mode detected. Swap file creation skipped.
[   15.939456] ram-adjusted-desktop-starter[666]: [INFO] Trying to start display manager (graphical desktop environment) 'gdm3'...
[   16.048915] ram-adjusted-desktop-starter[666]: INFO: Switch virtual console ('tty2'). See: https://www.whonix.org/wiki/vu
[   16.813741] [p_lkrg] ALERT !!! _STEXT MEMORY BLOCK HASH IS DIFFERENT - it is [0xe71407c67619fcdc] and should be [0x8110571e2f15ac2f] !!!
[   16.817246] [p_lkrg] ALERT !!! MODULE'S &lt;nf_conntrack&gt; HASH IS DIFFERENT it is [0xb0d88dba0ca37ab4] and should be [0xb6623605f2889a42] !!!
[   16.818555] [p_lkrg] ALERT !!! MODULE LIST HASH IS DIFFERENT !!! - it is [0x98ecde2d3f52a0cf] and should be [0xa051c0bdec20a959] !!!
[   16.819797] [p_lkrg] ALERT !!! MODULE KOBJ HASH IS DIFFERENT !!! - it is [0x64c66979dfa4ae19] and should be [0x4a654e67e20f591e] !!!
[   16.821055] [p_lkrg] [KOBJ] ALERT !!! MODULE'S &lt;nf_conntrack&gt; HASH IS DIFFERENT it is [0xb0d88dba0ca37ab4] and should be [0xb6623605f2889a42] !!!
[   16.822411] [p_lkrg] ALERT !!! SYSTEM HAS BEEN COMPROMISED - DETECTED DIFFERENT 5 CHECKSUMS !!!
[   16.823364] Kernel panic - not syncing: [p_lkrg] Kernel Integrity verification failed! Killing the kernel...
[   16.824397] CPU: 0 PID: 114 Comm: kworker/u2:2 Tainted: G           OE     5.10.0-17-amd64 #1 Debian 5.10.136-1
[   16.825453] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.14.0-2 04/01/2014
[   16.826343] Workqueue: events_unbound p_check_integrity [p_lkrg]
[   16.826990] Call Trace:
[   16.827259]  dump_stack+0x6b/0x83
[   16.827618]  panic+0x101/0x2d7
[   16.827950]  p_check_integrity.cold+0xb96/0x1e89 [p_lkrg]
[   16.828536]  process_one_work+0x1b6/0x350
[   16.828974]  worker_thread+0x53/0x3e0
[   16.829369]  ? process_one_work+0x350/0x350
[   16.829815]  kthread+0x11b/0x140
[   16.830162]  ? __kthread_bind_mask+0x60/0x60
[   16.830619]  ret_from_fork+0x22/0x30
[   16.831197] Kernel Offset: 0x4e00000 from 0xffffffff81000000 (relocation range: 0xffffffff80000000-0xffffffffbfffffff)
[   16.832333] ---[ end Kernel panic - not syncing: [p_lkrg] Kernel Integrity verification failed! Killing the kernel... ]---
</code></pre>
<p>Error on Gateway</p>
<pre><code class="lang-auto">Login Instructions:

1) Type the username. Default user name is "user" without quotes. Then press &lt;enter&gt;.

2) Type the password. When entering the password, no password feedback (no asterisk ("*") symbol) will be shown. Default password is "changeme" without quotes. Then press &lt;enter&gt;.

host login: [   19.634424] [p_lkrg] ALERT !!! _STEXT MEMORY BLOCK HASH IS DIFFERENT - it is [0xda5c43f8ea4dc4c6] and should be [0x81562e62573ad9f3] !!!
[   19.637767] [p_lkrg] ALERT !!! MODULE'S &lt;nf_nat&gt; HASH IS DIFFERENT it is [0x5f90d8f14c66f42d] and should be [0x8212968ce6669d25] !!!
[   19.638988] [p_lkrg] ALERT !!! MODULE'S &lt;nf_conntrack&gt; HASH IS DIFFERENT it is [0x61e33fd13f834739] and should be [0x73a9058ee386fb69] !!!
[   19.640252] [p_lkrg] ALERT !!! MODULE LIST HASH IS DIFFERENT !!! - it is [0x2f7d92c4b41dbb34] and should be [0xd38d3030d10edf] !!!
[   19.641441] [p_lkrg] ALERT !!! MODULE KOBJ HASH IS DIFFERENT !!! - it is [0x884ebcb348e86b53] and should be [0x76819da0d5e9f74e] !!!
[   19.642764] [p_lkrg] [KOBJ] ALERT !!! MODULE'S &lt;nf_conntrack&gt; HASH IS DIFFERENT it is [0x61e33fd13f834739] and should be [0x73a9058ee386fb69] !!!
[   19.644085] [p_lkrg] [KOBJ] ALERT !!! MODULE'S &lt;nf_nat&gt; HASH IS DIFFERENT it is [0x5f90d8f14c66f42d] and should be [0x8212968ce6669d25] !!!
[   19.645352] [p_lkrg] ALERT !!! SYSTEM HAS BEEN COMPROMISED - DETECTED DIFFERENT 7 CHECKSUMS !!!
[   19.646233] Kernel panic - not syncing: [p_lkrg] Kernel Integrity verification failed! Killing the kernel...
[   19.647229] CPU: 0 PID: 627 Comm: kworker/u2:4 Tainted: G           OE     5.10.0-17-amd64 #1 Debian 5.10.136-1
[   19.648263] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.14.0-2 04/01/2014
[   19.649118] Workqueue: events_unbound p_check_integrity [p_lkrg]
[   19.649734] Call Trace:
[   19.649995]  dump_stack+0x6b/0x83
[   19.650343]  panic+0x101/0x2d7
[   19.650666]  p_check_integrity.cold+0xb96/0x1e89 [p_lkrg]
[   19.651226]  process_one_work+0x1b6/0x350
[   19.651641]  worker_thread+0x53/0x3e0
[   19.652025]  ? process_one_work+0x350/0x350
[   19.652456]  kthread+0x11b/0x140
[   19.652793]  ? __kthread_bind_mask+0x60/0x60
[   19.653235]  ret_from_fork+0x22/0x30
[   19.653820] Kernel Offset: 0xd400000 from 0xffffffff81000000 (relocation range: 0xffffffff80000000-0xffffffffbfffffff)
[   19.654916] ---[ end Kernel panic - not syncing: [p_lkrg] Kernel Integrity verification failed! Killing the kernel... ]---
</code></pre>
<p>Manual update to 0.9.5 solves the problem</p>
          <p><a href="http://forums.whonix.org/t/lkrg-need-update/14771/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/lkrg-need-update/14771/1</link>
        <pubDate>Mon, 05 Sep 2022 18:21:40 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14771-1</guid>
        <source url="http://forums.whonix.org/t/lkrg-need-update/14771.rss">LKRG need update</source>
      </item>
  </channel>
</rss>
