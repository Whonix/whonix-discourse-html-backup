<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>LKRG need update - Development - Whonix Forum</title>
    <meta name="description" content="Please update LKRG in whonix repos. Version in repos not working with latest debian stable kernel in live mode 
Workstation: 
Loading Linux 5.10.0-17-amd64 ...
Loading initial ramdisk ...
[    5.099451] [p_lkrg] Loading &amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="14771.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;LKRG need update&#39;" href="14771.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/lkrg-need-update/14771" />
<meta name="twitter:url" content="https://forums.whonix.org/t/lkrg-need-update/14771" />
<meta property="og:title" content="LKRG need update" />
<meta name="twitter:title" content="LKRG need update" />
<meta property="og:description" content="Please update LKRG in whonix repos. Version in repos not working with latest debian stable kernel in live mode  Workstation:  Loading Linux 5.10.0-17-amd64 ... Loading initial ramdisk ... [    5.099451] [p_lkrg] Loading LKRG... [    5.425888] [p_lkrg] LKRG initialized successfully! [   14.921276] swap-file-creator[546]: BOOT_IMAGE=/boot/vmlinuz-5.10.0-17-amd64 root=/dev/disk/by-uuid/26ada0c0-1165-4098-884d-aafd2220c2c6 ro console=tty0 console=ttyS0,115200n8 spectre_v2=on spec_store_bypass_disabl..." />
<meta name="twitter:description" content="Please update LKRG in whonix repos. Version in repos not working with latest debian stable kernel in live mode  Workstation:  Loading Linux 5.10.0-17-amd64 ... Loading initial ramdisk ... [    5.099451] [p_lkrg] Loading LKRG... [    5.425888] [p_lkrg] LKRG initialized successfully! [   14.921276] swap-file-creator[546]: BOOT_IMAGE=/boot/vmlinuz-5.10.0-17-amd64 root=/dev/disk/by-uuid/26ada0c0-1165-4098-884d-aafd2220c2c6 ro console=tty0 console=ttyS0,115200n8 spectre_v2=on spec_store_bypass_disabl..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ‚ù§" />
<meta property="article:published_time" content="2022-09-05T18:21:40+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="14771.html">LKRG need update</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nathaniel.haggard'><span itemprop='name'>nathaniel.haggard</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="14771.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-09-05T18:21:40Z' class='post-time'>
                September 5, 2022,  6:21pm
              </time>
              <meta itemprop='dateModified' content='2022-09-06T09:36:32Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Please update LKRG in whonix repos. Version in repos not working with latest debian stable kernel in live mode</p>
<p>Workstation:</p>
<pre><code class="lang-auto">Loading Linux 5.10.0-17-amd64 ...
Loading initial ramdisk ...
[    5.099451] [p_lkrg] Loading LKRG...
[    5.425888] [p_lkrg] LKRG initialized successfully!
[   14.921276] swap-file-creator[546]: BOOT_IMAGE=/boot/vmlinuz-5.10.0-17-amd64 root=/dev/disk/by-uuid/26ada0c0-1165-4098-884d-aafd2220c2c6 ro console=tty0 console=ttyS0,115200n8 spectre_v2=on spec_store_bypass_disable=on l1tf=full,force mds=full,nosmt tsx=off tsx_async_abort=full,nosmt kvm.nx_huge_pages=force nosmt=force l1d_flush=on mmio_stale_data=full,nosmt random.trust_bootloader=off random.trust_cpu=off intel_iommu=on amd_iommu=on efi=disable_early_pci_dma iommu.passthrough=0 iommu.strict=1 slab_nomerge init_on_alloc=1 init_on_free=1 pti=on vsyscall=none page_alloc.shuffle=1 randomize_kstack_offset=on extra_latent_entropy debugfs=off boot=live plainroot union=overlay ip=frommedia noeject nopersistence rootovl quiet loglevel=0
[   14.955591] swap-file-creator[534]: Live mode detected. Swap file creation skipped.
[   15.939456] ram-adjusted-desktop-starter[666]: [INFO] Trying to start display manager (graphical desktop environment) 'gdm3'...
[   16.048915] ram-adjusted-desktop-starter[666]: INFO: Switch virtual console ('tty2'). See: https://www.whonix.org/wiki/vu
[   16.813741] [p_lkrg] ALERT !!! _STEXT MEMORY BLOCK HASH IS DIFFERENT - it is [0xe71407c67619fcdc] and should be [0x8110571e2f15ac2f] !!!
[   16.817246] [p_lkrg] ALERT !!! MODULE'S &lt;nf_conntrack&gt; HASH IS DIFFERENT it is [0xb0d88dba0ca37ab4] and should be [0xb6623605f2889a42] !!!
[   16.818555] [p_lkrg] ALERT !!! MODULE LIST HASH IS DIFFERENT !!! - it is [0x98ecde2d3f52a0cf] and should be [0xa051c0bdec20a959] !!!
[   16.819797] [p_lkrg] ALERT !!! MODULE KOBJ HASH IS DIFFERENT !!! - it is [0x64c66979dfa4ae19] and should be [0x4a654e67e20f591e] !!!
[   16.821055] [p_lkrg] [KOBJ] ALERT !!! MODULE'S &lt;nf_conntrack&gt; HASH IS DIFFERENT it is [0xb0d88dba0ca37ab4] and should be [0xb6623605f2889a42] !!!
[   16.822411] [p_lkrg] ALERT !!! SYSTEM HAS BEEN COMPROMISED - DETECTED DIFFERENT 5 CHECKSUMS !!!
[   16.823364] Kernel panic - not syncing: [p_lkrg] Kernel Integrity verification failed! Killing the kernel...
[   16.824397] CPU: 0 PID: 114 Comm: kworker/u2:2 Tainted: G           OE     5.10.0-17-amd64 #1 Debian 5.10.136-1
[   16.825453] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.14.0-2 04/01/2014
[   16.826343] Workqueue: events_unbound p_check_integrity [p_lkrg]
[   16.826990] Call Trace:
[   16.827259]  dump_stack+0x6b/0x83
[   16.827618]  panic+0x101/0x2d7
[   16.827950]  p_check_integrity.cold+0xb96/0x1e89 [p_lkrg]
[   16.828536]  process_one_work+0x1b6/0x350
[   16.828974]  worker_thread+0x53/0x3e0
[   16.829369]  ? process_one_work+0x350/0x350
[   16.829815]  kthread+0x11b/0x140
[   16.830162]  ? __kthread_bind_mask+0x60/0x60
[   16.830619]  ret_from_fork+0x22/0x30
[   16.831197] Kernel Offset: 0x4e00000 from 0xffffffff81000000 (relocation range: 0xffffffff80000000-0xffffffffbfffffff)
[   16.832333] ---[ end Kernel panic - not syncing: [p_lkrg] Kernel Integrity verification failed! Killing the kernel... ]---
</code></pre>
<p>Error on Gateway</p>
<pre><code class="lang-auto">Login Instructions:

1) Type the username. Default user name is "user" without quotes. Then press &lt;enter&gt;.

2) Type the password. When entering the password, no password feedback (no asterisk ("*") symbol) will be shown. Default password is "changeme" without quotes. Then press &lt;enter&gt;.

host login: [   19.634424] [p_lkrg] ALERT !!! _STEXT MEMORY BLOCK HASH IS DIFFERENT - it is [0xda5c43f8ea4dc4c6] and should be [0x81562e62573ad9f3] !!!
[   19.637767] [p_lkrg] ALERT !!! MODULE'S &lt;nf_nat&gt; HASH IS DIFFERENT it is [0x5f90d8f14c66f42d] and should be [0x8212968ce6669d25] !!!
[   19.638988] [p_lkrg] ALERT !!! MODULE'S &lt;nf_conntrack&gt; HASH IS DIFFERENT it is [0x61e33fd13f834739] and should be [0x73a9058ee386fb69] !!!
[   19.640252] [p_lkrg] ALERT !!! MODULE LIST HASH IS DIFFERENT !!! - it is [0x2f7d92c4b41dbb34] and should be [0xd38d3030d10edf] !!!
[   19.641441] [p_lkrg] ALERT !!! MODULE KOBJ HASH IS DIFFERENT !!! - it is [0x884ebcb348e86b53] and should be [0x76819da0d5e9f74e] !!!
[   19.642764] [p_lkrg] [KOBJ] ALERT !!! MODULE'S &lt;nf_conntrack&gt; HASH IS DIFFERENT it is [0x61e33fd13f834739] and should be [0x73a9058ee386fb69] !!!
[   19.644085] [p_lkrg] [KOBJ] ALERT !!! MODULE'S &lt;nf_nat&gt; HASH IS DIFFERENT it is [0x5f90d8f14c66f42d] and should be [0x8212968ce6669d25] !!!
[   19.645352] [p_lkrg] ALERT !!! SYSTEM HAS BEEN COMPROMISED - DETECTED DIFFERENT 7 CHECKSUMS !!!
[   19.646233] Kernel panic - not syncing: [p_lkrg] Kernel Integrity verification failed! Killing the kernel...
[   19.647229] CPU: 0 PID: 627 Comm: kworker/u2:4 Tainted: G           OE     5.10.0-17-amd64 #1 Debian 5.10.136-1
[   19.648263] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.14.0-2 04/01/2014
[   19.649118] Workqueue: events_unbound p_check_integrity [p_lkrg]
[   19.649734] Call Trace:
[   19.649995]  dump_stack+0x6b/0x83
[   19.650343]  panic+0x101/0x2d7
[   19.650666]  p_check_integrity.cold+0xb96/0x1e89 [p_lkrg]
[   19.651226]  process_one_work+0x1b6/0x350
[   19.651641]  worker_thread+0x53/0x3e0
[   19.652025]  ? process_one_work+0x350/0x350
[   19.652456]  kthread+0x11b/0x140
[   19.652793]  ? __kthread_bind_mask+0x60/0x60
[   19.653235]  ret_from_fork+0x22/0x30
[   19.653820] Kernel Offset: 0xd400000 from 0xffffffff81000000 (relocation range: 0xffffffff80000000-0xffffffffbfffffff)
[   19.654916] ---[ end Kernel panic - not syncing: [p_lkrg] Kernel Integrity verification failed! Killing the kernel... ]---
</code></pre>
<p>Manual update to 0.9.5 solves the problem</p>
        </div>

        <meta itemprop='headline' content='LKRG need update'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/unas'><span itemprop='name'>unas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="14771.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-10-10T18:52:20Z' class='post-time'>
                October 10, 2022,  6:52pm
              </time>
              <meta itemprop='dateModified' content='2022-10-10T19:07:06Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Just to complement in order to upgrade manually to 0.9.5 follow the official github repo from lkrg (* github com / lkrg-org / lkrg *):</p>
<ol>
<li>
<p>In orther to enter to the system in the boot loader before it enters at start where you select the OS to boot, press the letter ‚Äòe‚Äô to edit linux image kernel parameters, is is the one before the OS name and at the end of that line write " debug nolkrg" without the quotes and then ctrl+x or F10. It should let you boot or at least check for more info</p>
</li>
<li>
<p>then uninstall p_lklrg (lkrg module) following github readme</p>
</li>
<li>
<p>next, install lkrg as shown in github either way (by building it with make or with dkms), but personally the second one with dkms is preferred for me because it recompile with new kernel upgrades</p>
</li>
<li>
<p>at last modify the module auto loading at boot changing ‚Äúp_lkrg‚Äù for ‚Äúlkrg‚Äù without quotes in the conf file ‚Äú/etc/modules-load.d/lkrg-dkms.conf‚Äù</p>
</li>
</ol>
        </div>

        <meta itemprop='headline' content='LKRG need update'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
