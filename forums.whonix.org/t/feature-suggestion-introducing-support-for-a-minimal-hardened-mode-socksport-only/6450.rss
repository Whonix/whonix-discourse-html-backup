<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>feature suggestion: introducing support for a minimal/hardened mode (SocksPort only)</title>
    <link>http://forums.whonix.org/t/feature-suggestion-introducing-support-for-a-minimal-hardened-mode-socksport-only/6450</link>
    <description>Hi,

Qubes-Whonix Gateway currently has a single mode of operations which aims to cover many different use-cases and applications and as such exposes a lot of services/ports to the AppVMs behind it:

* onion-grater
* tiny-proxy
* DNSPort
* TransPort
* many SocksPorts

and has a rather long list of iptables rules.

I&#39;d suggest to introduce a &quot;minimal&quot; mode that provides everything needed for an application that just needs access to a single SocksPort with IsolateDestAddr (no DNSPort, no tiny-proxy, no onion-grater, no TransPort). Thunderbird would be an example for such an application.

Such a &quot;minimal&quot; mode could be an option for the anon wizard or just supported for &quot;power users&quot; which can configure their setups themselves. 

To a certain extend &quot;power users&quot; can configure sys-whonix to achieve such a setup by overriding settings from /usr/share/tor-service-defaults-torrc via placing directives in /usr/local/etc/torrc.d/50_user.conf (which persists across reboots in a deployed instance of the whonix-gw-14 template).

Example:  /usr/local/etc/torrc.d/50_user.conf

    DNSPort 0
    TransPort 0
    
    # disable all SocksPort directives from /usr/share/tor/tor-service-defaults-tor
    /SocksPort
    
    SocksPort &lt;IP&gt;:9050 IsolateDestAddr


Due to a bug in the qubes-service subsystem of the whonix-gw-14 template (https://phabricator.whonix.org/T879) I was unable to disable tinyproxy via qvm-service and onion-grater&#39;s systemd service file does not appear to support qvm-service since it is missing a

`ConditionPathExists=/var/run/qubes-service/onion-grater` 

line in its systemd service file to be able to use qvm-service to disable it.
Files as: https://phabricator.whonix.org/T884

What do you think about this idea?</description>
    <language>en</language>
    <lastBuildDate>Sun, 09 Dec 2018 05:51:00 +0000</lastBuildDate>
    <category>Qubes-Whonix</category>
    <atom:link href="http://forums.whonix.org/t/feature-suggestion-introducing-support-for-a-minimal-hardened-mode-socksport-only/6450.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>feature suggestion: introducing support for a minimal/hardened mode (SocksPort only)</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <ul>
<li>Too big backlog of tasks.</li>
<li>Too few developers.</li>
<li><a href="https://www.whonix.org/wiki/FAQ#Feedback_and_Suggestions">https://www.whonix.org/wiki/FAQ#Feedback_and_Suggestions</a></li>
</ul>
          <p><a href="http://forums.whonix.org/t/feature-suggestion-introducing-support-for-a-minimal-hardened-mode-socksport-only/6450/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/feature-suggestion-introducing-support-for-a-minimal-hardened-mode-socksport-only/6450/2</link>
        <pubDate>Sun, 09 Dec 2018 05:51:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6450-2</guid>
        <source url="http://forums.whonix.org/t/feature-suggestion-introducing-support-for-a-minimal-hardened-mode-socksport-only/6450.rss">feature suggestion: introducing support for a minimal/hardened mode (SocksPort only)</source>
      </item>
      <item>
        <title>feature suggestion: introducing support for a minimal/hardened mode (SocksPort only)</title>
        <dc:creator><![CDATA[nusenu]]></dc:creator>
        <description><![CDATA[
            <p>Hi,</p>
<p>Qubes-Whonix Gateway currently has a single mode of operations which aims to cover many different use-cases and applications and as such exposes a lot of services/ports to the AppVMs behind it:</p>
<ul>
<li>onion-grater</li>
<li>tiny-proxy</li>
<li>DNSPort</li>
<li>TransPort</li>
<li>many SocksPorts</li>
</ul>
<p>and has a rather long list of iptables rules.</p>
<p>I’d suggest to introduce a “minimal” mode that provides everything needed for an application that just needs access to a single SocksPort with IsolateDestAddr (no DNSPort, no tiny-proxy, no onion-grater, no TransPort). Thunderbird would be an example for such an application.</p>
<p>Such a “minimal” mode could be an option for the anon wizard or just supported for “power users” which can configure their setups themselves.</p>
<p>To a certain extend “power users” can configure sys-whonix to achieve such a setup by overriding settings from /usr/share/tor-service-defaults-torrc via placing directives in /usr/local/etc/torrc.d/50_user.conf (which persists across reboots in a deployed instance of the whonix-gw-14 template).</p>
<p>Example:  /usr/local/etc/torrc.d/50_user.conf</p>
<pre><code>DNSPort 0
TransPort 0

# disable all SocksPort directives from /usr/share/tor/tor-service-defaults-tor
/SocksPort

SocksPort &lt;IP&gt;:9050 IsolateDestAddr
</code></pre>
<p>Due to a bug in the qubes-service subsystem of the whonix-gw-14 template (<a href="https://phabricator.whonix.org/T879" rel="nofollow noopener">https://phabricator.whonix.org/T879</a>) I was unable to disable tinyproxy via qvm-service and onion-grater’s systemd service file does not appear to support qvm-service since it is missing a</p>
<p><code>ConditionPathExists=/var/run/qubes-service/onion-grater</code></p>
<p>line in its systemd service file to be able to use qvm-service to disable it.<br>
Files as: <a href="https://phabricator.whonix.org/T884" rel="nofollow noopener">https://phabricator.whonix.org/T884</a></p>
<p>What do you think about this idea?</p>
          <p><a href="http://forums.whonix.org/t/feature-suggestion-introducing-support-for-a-minimal-hardened-mode-socksport-only/6450/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/feature-suggestion-introducing-support-for-a-minimal-hardened-mode-socksport-only/6450/1</link>
        <pubDate>Sat, 08 Dec 2018 12:56:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-6450-1</guid>
        <source url="http://forums.whonix.org/t/feature-suggestion-introducing-support-for-a-minimal-hardened-mode-socksport-only/6450.rss">feature suggestion: introducing support for a minimal/hardened mode (SocksPort only)</source>
      </item>
  </channel>
</rss>
