<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</title>
    <link>http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344</link>
    <description>Hi, hoping to find a little bit of help here.

As the topic says, I am using Ubuntu Gnome 15.04 and all networking works fine with in that host system. I can surf the net, and even connect to TOR through the tor browser installed independently on Ubuntu.

I followed the instructions here: https://www.whonix.org/wiki/KVM#Install_KVM

..Installed qemu-KVM, libvirt-bin, virt-manager all smoothly and without any issues. I rebooted and continued, and when I got to the command:

sudo addgroup &quot;$(whoami)&quot; libvirt

I was told there is no such group called &#39;libvirt&#39;  But when I tried it using &quot;libvirtd&quot; instead, I was told I was already a member of that group. So I took this as success and continued.

After unpacking and installing Whonix Gateway and Workstation images successfully and following the rest of the instructions in import them to KVM, I started up the Gateway and found that it no access to networking whatsoever. The &#39;whonixcheck&#39; routine failed over and over again to reach any network destination, even though the host Ubuntu system could do so easily. I restarted a few times, but no change.

Is there anything additional I need to be doing differently? I have seen references sometimes to extra tools used in Ubuntu, to set up &quot;bridged connections&quot; between the host system and KVM, but this is a bit out of my depth and I don&#39;t want to start fiddling with such things without definite confirmation that I should be doing so.

Is there another step that I should do, or try, or check, to help discover what the problem is and fix it?

Thanks.</description>
    <language>en</language>
    <lastBuildDate>Wed, 02 Sep 2015 21:31:01 +0000</lastBuildDate>
    <category>KVM</category>
    <atom:link href="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="8" data-topic="1344">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/praedor/40/21_1.png" class="avatar"> praedor:</div>
<blockquote>
<p>OK, after fighting with kvm and libvirt (and failing with kernel panics) this does look interesting.  I take it you use qemu-img to change the ova file to a qcow2?  Do you untar the ova file first or will it convert as is?</p>
</blockquote>
</aside>
<p>No. Download qcow2.<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/KVM#Download_and_Extract" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/218;"><img src="https://www.whonix.org/w/images/b/be/234234234236kvm.png" class="thumbnail"></div>

<h3><a href="https://www.whonix.org/wiki/KVM#Download_and_Extract" target="_blank" rel="nofollow noopener">KVM</a></h3>

<p>Using Whonix with KVM instead of VirtualBox</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
          <p><a href="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/9</link>
        <pubDate>Wed, 02 Sep 2015 21:31:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1344-9</guid>
        <source url="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344.rss">Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</source>
      </item>
      <item>
        <title>Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</title>
        <dc:creator><![CDATA[praedor]]></dc:creator>
        <description><![CDATA[
            <p>OK, after fighting with kvm and libvirt (and failing with kernel panics) this does look interesting.  I take it you use qemu-img to change the ova file to a qcow2?  Do you untar the ova file first or will it convert as is?</p>
          <p><a href="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/8</link>
        <pubDate>Wed, 02 Sep 2015 14:46:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1344-8</guid>
        <source url="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344.rss">Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</source>
      </item>
      <item>
        <title>Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</title>
        <dc:creator><![CDATA[Otto_Kratik]]></dc:creator>
        <description><![CDATA[
            <p>The problem only seemed to happen that first initial time… since then both Gateway and Workstation have always connected to TOR without issue, sometimes instantly and sometimes after a minute or so. I think I just have to be patient, and the original non-connectivity occurrence was just a random anomaly.</p>
<p>Thanks for the assistance all.</p>
<p>EDIT: Canonical/Ubuntu’s questionable practices toward their users are also why I switched over to Linux Mint. So far no connectivity issues there either.</p>
          <p><a href="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/7</link>
        <pubDate>Mon, 31 Aug 2015 20:20:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1344-7</guid>
        <source url="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344.rss">Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</source>
      </item>
      <item>
        <title>Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>I don’t know what’s causing your problems but I recommend switching your host to a stable distro like Debian stable where KVM networking is known to work. Avoid installing Virtual box because it touches low level networking code and is known to be buggy.</p>
<p>Canonical is also acting hostile to the Libre software community and their users’ privacy. You should not trust them or support them.</p>
          <p><a href="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/6</link>
        <pubDate>Sun, 30 Aug 2015 19:09:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1344-6</guid>
        <source url="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344.rss">Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</source>
      </item>
      <item>
        <title>Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</title>
        <dc:creator><![CDATA[who_me]]></dc:creator>
        <description><![CDATA[
            <p>I have no idea why it’s failing to initially connect.</p>
<p>Since it does work sometimes, I think</p>
<pre><code class="lang-auto"></code></pre>
<p>will get it running without the reboots, VirtualBox, etc.</p>
          <p><a href="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/5</link>
        <pubDate>Tue, 25 Aug 2015 19:22:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1344-5</guid>
        <source url="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344.rss">Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</source>
      </item>
      <item>
        <title>Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</title>
        <dc:creator><![CDATA[Otto_Kratik]]></dc:creator>
        <description><![CDATA[
            <p>A further update with more info:</p>
<p>I installed Virtualbox and imported the Whonix .ova files there, and that version works flawlessly on the same machine. Both Gateway and subsequently Workstation get network/Tor connectivity instantly with no issues at all.</p>
<p>So it is a KVM/libvirt related issue. From terminal running:</p>
<p>virsh net-list --all</p>
<h2>Name        State           Autostart         Persistent</h2>
<p>default       active         yes                  yes<br>
whonix       active         yes                  yes</p>
<p>So I don’t see anything obviously wrong from that. Any further suggestions of where to look/check?</p>
<p>EDIT: Some more information. After successfully running the Virtualbox version of Whonix and then shutting it down, I tried the KVM version again. This time both Gateway and workstation connected to TOR perfectly, without any issues.</p>
<p>HOWEVER, once I shut both down, and restarted the host Ubuntu system again, and tried just the KVM/VirtualManager version of Whonix by itself again, it failed to connect to network/TOR once again. So, something about running Virtualbox temporarily enables networking to work for KVM as well, but without doing that first, the KVM Whonix will not connect. Does this provide any further clues as to what is going on?</p>
<p>**FURTHER EDIT:  Retrying Whonixcheck a moment later, this time it worked and connected to TOR, without needing to run Virtualbox first. So, it is some sort of intermittent issue, and hard to figure out. Sometimes it works, other times it takes a few tries to get going.</p>
          <p><a href="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/4</link>
        <pubDate>Tue, 25 Aug 2015 15:09:04 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1344-4</guid>
        <source url="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344.rss">Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</source>
      </item>
      <item>
        <title>Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</title>
        <dc:creator><![CDATA[Otto_Kratik]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="2" data-topic="1344">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>You may have forgot to enable the default network in libvirt that allows connections from the gateway to the internet. Please see the instructions for that on the wiki.</p>
</blockquote>
</aside>
<p>Thanks for your reply. As a complete novice to both Linux and KVM, the totality of what I did is here: <a href="https://www.whonix.org/wiki/KVM#Install_KVM" rel="nofollow noopener">https://www.whonix.org/wiki/KVM#Install_KVM</a></p>
<p>Nothing more or less, so if there’s an additional step that isn’t mentioned there, I certainly didn’t do it. It seemed like some of the “system-net autostart” type commands were about enabling network, and they reported success after I issued them, so I’m not sure what I missed. Is there something additional elsewhere on the wiki that pertains to your suggestion?</p>
<p>Thanks.</p>
          <p><a href="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/3</link>
        <pubDate>Tue, 25 Aug 2015 13:27:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1344-3</guid>
        <source url="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344.rss">Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</source>
      </item>
      <item>
        <title>Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>You may have forgot to enable the default network in libvirt that allows connections from the gateway to the internet. Please see the instructions for that on the wiki.</p>
          <p><a href="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/2</link>
        <pubDate>Tue, 25 Aug 2015 00:12:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1344-2</guid>
        <source url="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344.rss">Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</source>
      </item>
      <item>
        <title>Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</title>
        <dc:creator><![CDATA[Otto_Kratik]]></dc:creator>
        <description><![CDATA[
            <p>Hi, hoping to find a little bit of help here.</p>
<p>As the topic says, I am using Ubuntu Gnome 15.04 and all networking works fine with in that host system. I can surf the net, and even connect to TOR through the tor browser installed independently on Ubuntu.</p>
<p>I followed the instructions here: <a href="https://www.whonix.org/wiki/KVM#Install_KVM" rel="nofollow noopener">https://www.whonix.org/wiki/KVM#Install_KVM</a></p>
<p>…Installed qemu-KVM, libvirt-bin, virt-manager all smoothly and without any issues. I rebooted and continued, and when I got to the command:</p>
<p>sudo addgroup “$(whoami)” libvirt</p>
<p>I was told there is no such group called ‘libvirt’  But when I tried it using “libvirtd” instead, I was told I was already a member of that group. So I took this as success and continued.</p>
<p>After unpacking and installing Whonix Gateway and Workstation images successfully and following the rest of the instructions in import them to KVM, I started up the Gateway and found that it no access to networking whatsoever. The ‘whonixcheck’ routine failed over and over again to reach any network destination, even though the host Ubuntu system could do so easily. I restarted a few times, but no change.</p>
<p>Is there anything additional I need to be doing differently? I have seen references sometimes to extra tools used in Ubuntu, to set up “bridged connections” between the host system and KVM, but this is a bit out of my depth and I don’t want to start fiddling with such things without definite confirmation that I should be doing so.</p>
<p>Is there another step that I should do, or try, or check, to help discover what the problem is and fix it?</p>
<p>Thanks.</p>
          <p><a href="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344/1</link>
        <pubDate>Mon, 24 Aug 2015 18:43:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1344-1</guid>
        <source url="http://forums.whonix.org/t/ubuntu-gnome-15-04-kvm-whonix-11-0-0-3-0-no-networking-in-gateway/1344.rss">Ubuntu Gnome 15.04 + KVM + Whonix 11.0.0.3.0 : No networking in Gateway</source>
      </item>
  </channel>
</rss>
