<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
    <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566</link>
    <description>I&#39;m not really the best person to ask as entropy is not my forte but I don&#39;t see why this would matter from a security perspective unless there is some vulnerability in RDRAND (which [isn&#39;t just a theoretical concern](https://en.wikipedia.org/wiki/RDRAND#Reception)). Even then, it won&#39;t matter much as RDRAND isn&#39;t the only source of entropy.</description>
    <language>en</language>
    <lastBuildDate>Wed, 06 Oct 2021 16:10:38 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group quote-modified" data-username="HulaHoop" data-post="21" data-topic="8566">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Linux 5.6 introduces a kconfig for non-blocking /random for boot though blocking afterwards is still possible. Optimally Debian enables it while disabling hwrng trust.</p>
<p><a href="https://www.phoronix.com/scan.php?page=news_item&amp;px=Linux-5.6-Random-GRND_INSECURE" class="inline-onebox">Linux 5.6 Seeing Random Changes, New "Insecure" Option With GRND_INSECURE - Phoronix</a></p>
</blockquote>
</aside>
<p>Similar report:</p>
<aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="https://static.lwn.net/images/favicon.png" class="site-icon" width="16" height="16">

      <a href="https://lwn.net/Articles/808575/" target="_blank" rel="noopener">lwn.net</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://lwn.net/Articles/808575/" target="_blank" rel="noopener">Removing the Linux /dev/random blocking pool [LWN.net]</a></h3>

  <p>The random-number generation facilities in the kernel have been reworked
some over the past few months—but problems in that subsystem have been
addressed over an even longer time frame.  The most 
recent changes were made to stop the getrandom()...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/23</link>
        <pubDate>Wed, 06 Oct 2021 16:10:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-23</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubissue">
  <header class="source">

      <a href="https://github.com/QubesOS/qubes-issues/issues/6941" target="_blank" rel="noopener">github.com/QubesOS/qubes-issues</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/QubesOS/qubes-issues/issues/6941" target="_blank" rel="noopener">unprivilege the CPU's random number generator (RDRAND) / set kernel parameter "`random.trust_cpu=off`"</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2021-10-06" data-time="16:04:32" data-timezone="UTC">04:04PM - 06 Oct 21 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/adrelanos" target="_blank" rel="noopener">
          <img alt="adrelanos" src="https://avatars.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
      </div>
    </div>

    <div class="labels">
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">T: bug</span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">P: default</span>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">Originally brought up by me in https://github.com/QubesOS/qubes-issues/issues/61<span class="show-more-container"><a href="http://forums.whonix.org" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">74#issuecomment-936180012

&gt; &gt; &gt; [0.048xxx] random: crng done (trusting CPU's manufacturer)
&gt; &gt; 
&gt; &gt; 
&gt; &gt; This! I've just rechecked the failed log, and I don't see `trusting CPU's manufacturer` part there. And indeed that CPU does not support RDRAND. This means, the extreme issue I see, applies only to quite old systems (and hopefully does not affect majority of our users - even good old x230 already has RDRAND). So, I'm lowering the priority. But it's still worth improving the situation.
&gt; 
&gt; Strongly discouraged to rely on RDRAND for security / entropy quality anyhow as per: https://www.whonix.org/wiki/Dev/Entropy#RDRAND

@marmarek https://github.com/QubesOS/qubes-issues/issues/6174#issuecomment-936226779:
&gt; &gt; Strongly discouraged to rely on RDRAND for security / entropy quality anyhow as per:
&gt; 
&gt; In context of _this issue_, it is not a problem, because stubdomain does not use RNG for any security critical task. There is not crypto involved etc. One could argue it may make ASLR for qemu less effective, but we don't consider qemu trusted, so it is not a huge deal (and remember the RDRAND issues are still very hypothetical - see below).
&gt; 
&gt; In a broader context of RDRAND, I don't think we should worry about _backdoors_ there. Or rather: if you consider intentional backdoors in your CPU a valid threat, throw away that CPU. There is no really a difference how such hypothetical backdoor could work - whether that would be predictable RDRAND, [reacting to some magic values to any other instruction](http://blog.cr4.sh/2015/07/building-reliable-smm-backdoor-for-uefi.html), or anything else. We could worry about its effectiveness - not intentional bugs, which indeed is hard to reason about, since its being opaque.

Seems like I need to make a better argument.

Quote https://www.kernel.org/doc/html/latest/admin-guide/kernel-parameters.html

&gt; random.trust_cpu={on,off}
&gt;
&gt; [KNL] Enable or disable trusting the use of the CPU's random number generator (if available) to fully seed the kernel's CRNG. Default is controlled by CONFIG_RANDOM_TRUST_CPU.

The name of the kernel parameter `random.trust_cpu` is a bit non-ideal. There is no need to invoke big words such as "trust" or "backdoor" for the sake of this argument. Not even trust or a backdoor is required for this being an issue. Even a bug that happened in past would justify this change.

Ars Technica reported, [AMD shipped Ryzen 3000 with a serious microcode bug in its random number generator.](https://arstechnica.com/gadgets/2019/10/how-a-months-old-amd-microcode-bug-destroyed-my-weekend/) Lennart Poettering (@poettering) [summarized](https://twitter.com/pid_eins/status/1149649806056280069) the issue nicely.

&gt; Finally, AMD admits it's their fault, and they are preparing a BIOS update to fix RDRAND. You probably should avoid running a CONFIG_RANDOM_TRUST_CPU=y Linux kernel (Fedora) on a Ryzen system without that BIOS update, or all crypto keys generated are not as random as you hope.

That bug that gladly was discovered and publicized by a white hat. Due to the large amount of different CPU models, different batches it's not a good idea to rely on white hats to swiftly report it.

Or this other bug [Kernel bug report from 2014, rdrand instruction fails after resume on AMD family 22 CPU](https://bugzilla.kernel.org/show_bug.cgi?id=85911).

"[D. J. Bernstein isn't a fan of RDRAND either.](https://groups.google.com/g/randomness-generation/c/z3Uid45DV34)" In the same mailing list thread someone else posted:

&gt; On https://spideroak.com/browse/share/UTwente/RNG/Tests/NIST-STS/ you can find the results of randomness tests of several random generators including RDRAND.
&gt; 
&gt; In the document No_of_failures_calculation.txt you can find the used testing method and the test results.
&gt; 
&gt; The actual number of failed tests of RDRAND deviates more then 4 sigma from the expected number of failed tests.
&gt; 
&gt; The used software can also be downloaded from the same link so these tests can be reproduced.
&gt; 
&gt; As you also can see the XOR_SHIFT PRNG and the Picoquant PQRNG150 TRNG pass the tests with a number of failed tets within the 3 sigma deviation so the tests seem to work fine.

I didn't verify the latter but for my part I've seen enough.

`random.trust_cpu=on` means that  [`RDRAND`](https://en.wikipedia.org/wiki/RDRAND) has a privileged position within Linux entropy gathering process.

`random.trust_cpu=off` makes it only a "normal" ("unprivileged") source of entropy among other sources (such as keyboard, mouse, CPU jitter, and the usual).

----

Current kernel entropy sources in Qubes are:

* "privileged": RDRAND
* "unprivileged": keyboard, etc.

Suggested kernel entropy sources:

* "privileged": none
* "unprivileged": RDRAND, keyboard, etc.

----

`random.trust_cpu=on` advantages:

* Perhaps negligibly faster boot of dom0?

`random.trust_cpu=off` advantages:

* Being used as 1 entropy source normally, equal rights with other entropy sources. It doesn't disable RDRAND entirely.

----

[security-misc](https://github.com/Whonix/security-misc/) does it. (#1885)</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/22</link>
        <pubDate>Wed, 06 Oct 2021 16:06:04 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-22</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Linux 5.6 introduces a kconfig for non-blocking /random for boot though blocking afterwards is still possible. Optimally Debian enables it while disabling hwrng trust.</p>
<p><a href="https://www.phoronix.com/scan.php?page=news_item&amp;px=Linux-5.6-Random-GRND_INSECURE" class="onebox" target="_blank">https://www.phoronix.com/scan.php?page=news_item&amp;px=Linux-5.6-Random-GRND_INSECURE</a></p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/21</link>
        <pubDate>Wed, 08 Jan 2020 15:47:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-21</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[anontor]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a>, thank you for the solid reply<br>
I was wrong about Debian’s reasoning; the systemd issue was just a bug for certain workloads.<br>
from (Debian’s) wiki page, they included CONFIG_RANDOM_TRUST_CPU  to help with long boot delays<br>
I was mistaken about the entropy gathering and did not want to mislead anyone, sorry about the mixup</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/20</link>
        <pubDate>Wed, 04 Dec 2019 01:29:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-20</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>This might have slipped through. People might not have seen the consequences of that change. We should write a Debian bug report asking them to disable <code>CONFIG_RANDOM_TRUST_CPU</code> for non-cloud environments. Here is a list of sources which may be good to be quoted to make a convincing argument:</p>
<ul>
<li><a href="https://lists.debian.org/debian-devel/2014/06/msg00214.html">https://lists.debian.org/debian-devel/2014/06/msg00214.html</a></li>
<li><a href="https://lists.debian.org/debian-devel/2018/12/msg00204.html">https://lists.debian.org/debian-devel/2018/12/msg00204.html</a></li>
<li><a href="https://en.wikipedia.org/wiki/RDRAND#Reception">https://en.wikipedia.org/wiki/RDRAND#Reception</a></li>
<li><a href="https://twitter.com/pid_eins/status/1149649806056280069">https://twitter.com/pid_eins/status/1149649806056280069</a></li>
<li><a href="https://archive.nytimes.com/www.nytimes.com/interactive/2013/09/05/us/documents-reveal-nsa-campaign-against-encryption.html">https://archive.nytimes.com/www.nytimes.com/interactive/2013/09/05/us/documents-reveal-nsa-campaign-against-encryption.html</a></li>
<li>no human noticeable performance difference by our testers on host and in VMs.</li>
<li>
<a href="https://lists.debian.org/debian-security-announce/2008/msg00152.html">https://lists.debian.org/debian-security-announce/2008/msg00152.html</a> <a href="https://web.archive.org/web/https://lists.debian.org/debian-security-announce/2008/msg00152.html">[archive]</a>
</li>
<li>
<a href="https://research.swtch.com/openssl">Lessons from the Debian/OpenSSL Fiasco</a> <a href="https://web.archive.org/web/https://research.swtch.com/openssl">[archive]</a>
</li>
</ul>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/19</link>
        <pubDate>Tue, 03 Dec 2019 17:43:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-19</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Quote <a href="https://www.debian.org/releases/buster/amd64/release-notes/ch-information.en.html">https://www.debian.org/releases/buster/amd64/release-notes/ch-information.en.html</a></p>
<blockquote>
<h3>5.1.4. Daemons fail to start or system appears to hang during boot</h3>
<p>Due to <code>systemd</code> needing entropy during boot and the kernel treating such calls as blocking when available entropy is low, the system may hang for minutes to hours until the randomness subsystem is sufficiently initialized ( <code>random: crng       init done</code> ). For <code>amd64</code> systems supporting the <code>RDRAND</code> instruction this issue is avoided by the Debian kernel using this instruction by default ( <code>CONFIG_RANDOM_TRUST_CPU</code> ).</p>
<p>Non- <code>amd64</code> systems and some types of virtual machines need to provide a different source of entropy to continue fast booting. <code>haveged</code> has been chosen for this within the Debian Installer project and may be a valid option if hardware entropy is not available on the system. On virtual machines consider forwarding entropy from the host to the VMs via <code>virtio_rng</code> .</p>
<p>If you read this after upgrading a remote system to buster, ping the system on the network continuously as this adds entropy to the randomness pool and the system will eventually be reachable by ssh again.</p>
<p>See <a href="https://wiki.debian.org/BoottimeEntropyStarvation">the wiki</a> and <a href="https://daniel-lange.com/archives/152-hello-buster.html"> DLange’s overview of the issue</a> for other options.</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/18</link>
        <pubDate>Tue, 03 Dec 2019 17:25:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-18</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group quote-modified" data-post="16" data-topic="8566">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/b2d939/40.png" class="avatar"> anontor:</div>
<blockquote>
<p>The “other” way the Stretch kernel used to gather early entropy was through urandom.</p>
</blockquote>
</aside>
<p>I wouldn’t know how that would be possible. Please elaborate / link to references.</p>
<aside class="quote no-group" data-post="16" data-topic="8566">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/b2d939/40.png" class="avatar"> anontor:</div>
<blockquote>
<p>An upstream change with systemd is a reason why Debian now uses the method they do.</p>
</blockquote>
</aside>
<p>Citation required.</p>
<aside class="quote no-group" data-post="16" data-topic="8566">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/b2d939/40.png" class="avatar"> anontor:</div>
<blockquote>
<p>If we are going to use systemd 241 and above</p>
</blockquote>
</aside>
<p>Following whatever version Debian uses. Depending on which version of Debian will be used as basis for Whonix. No systemd version specialties.</p>
<p>At time of writing <a href="https://packages.debian.org/buster/systemd">https://packages.debian.org/buster/systemd</a> is <code>241-7~deb10u2</code>.</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/17</link>
        <pubDate>Tue, 03 Dec 2019 17:25:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-17</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group quote-modified" data-post="11" data-topic="8566">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>That’s not the meaning I understood:</p>
<blockquote>
<p>This instance is currently (barring the acceptance of [1]) only used to seed<br>
the in-kernel DRBG in case the driver/char/random.c is not yet fully seeded.</p>
</blockquote>
</blockquote>
</aside>
<p>The critical point is:</p>
<blockquote>
<p>(barring the acceptance of [1]</p>
</blockquote>
<p>And [1] is not yet accepted.</p>
<p>Other quotes that indicate that:</p>
<blockquote>
<p>The in-kernel DRBG currently is only used to support the IV generation as part<br>
of IPSEC.</p>
</blockquote>
<blockquote>
<p>I guess you can answer your question now yourself: if you need the<br>
in-kernel DRBG, you want the jitterentropy_rng statically in the kernel.</p>
</blockquote>
<blockquote>
<p>Given the answer above, I think it is clear that building it as a module will<br>
most likely defeat the intent of it.</p>
</blockquote>
<p>Currenlty it is build as a module by Debian kernel default.</p>
<p>Modules load through /etc/modprobe.d or /usr/lib/modules-load.d/ are load at at much later time than initial entropy pool seeding.</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/15</link>
        <pubDate>Tue, 03 Dec 2019 15:22:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-15</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>anontor via Whonix Forum:</p>
<blockquote>
<p>And also going with what you said HulaHoop, it could end up hurting the user if applied improperly</p>
</blockquote>
<p>I don’t see how. / I don’t get that one.</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/14</link>
        <pubDate>Tue, 03 Dec 2019 14:07:51 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-14</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>Everyone seems to agree that this isn’t a good idea so I’ve created pull requests to disable this in security-misc and hardened-vm-kernel.</p>
<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/security-misc/pull/38" target="_blank">github.com/Whonix/security-misc</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/security-misc/pull/38" target="_blank">Distrust the CPU for initial entropy </a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:distrust-cpu</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2019-12-02" data-time="16:47:04" data-timezone="UTC">04:47PM - 02 Dec 19 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/madaidan" target="_blank">
          <img alt="madaidan" src="https://avatars0.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="2 commits changed 2 files with 12 additions and 0 deletions">
        <a href="https://github.com/Whonix/security-misc/pull/38/files" target="_blank">
          <span class="added">+12</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>

  </div>
</div>
  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/hardened-vm-kernel/pull/8" target="_blank">github.com/Whonix/hardened-vm-kernel</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Whonix/hardened-vm-kernel/pull/8" target="_blank">Distrust the CPU for initial entropy</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:distrust-cpu</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2019-12-02" data-time="16:46:27" data-timezone="UTC">04:46PM - 02 Dec 19 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/madaidan" target="_blank">
          <img alt="madaidan" src="https://avatars0.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 1 additions and 1 deletions">
        <a href="https://github.com/Whonix/hardened-vm-kernel/pull/8/files" target="_blank">
          <span class="added">+1</span>
          <span class="removed">-1</span>
        </a>
      </div>
    </div>

  </div>
</div>
  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/13</link>
        <pubDate>Mon, 02 Dec 2019 16:48:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-13</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[anontor]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/hulahoop">@HulaHoop</a> That is an important point to bring to the community’s attention ,many may not be aware.</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/12</link>
        <pubDate>Sun, 01 Dec 2019 16:03:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-12</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="10" data-topic="8566">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>jitterentropy-rng as much as it is appreciated… Its user space daemon starts too late and jitterentropy-rng kernel module “doesn’t do much”.</p>
</blockquote>
</aside>
<p>That’s not the meaning I understood:</p>
<blockquote>
<p>This instance is currently (barring the acceptance of [1]) only used to seed<br>
the in-kernel DRBG in case the driver/char/random.c is not yet fully seeded.</p>
</blockquote>
<p>This implies the kernel module’s purpose is to take care of the seeding in event of random.c not having completed yet.</p>
<aside class="quote no-group" data-post="10" data-topic="8566">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>Even with jitterentropy-rng, CONFIG_RANDOM_TRUST_CPU is wrong since iy gives rdrand a privileged position in entropy seeding.</p>
</blockquote>
</aside>
<p>+1</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/11</link>
        <pubDate>Sun, 01 Dec 2019 15:22:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-11</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[Patrick_mobile]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="9" data-topic="8566">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>It should be disabled.</p>
</blockquote>
</aside>
<p>Agreed.</p>
<p>Though one detail.</p>
<aside class="quote no-group" data-post="9" data-topic="8566">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Enabling CONFIG_RANDOM_TRUST_CPU when jitter-entropy is not installed is a big mistake as it tricks systems without sufficient entropy into booting with a rigged seed instead of blocking until the pool is seeded properly.</p>
</blockquote>
</aside>
<p>jitterentropy-rng as much as it is appreciated… Its user space daemon starts too late and jitterentropy-rng kernel module “doesn’t do much”.</p>
<p>See: <a href="https://github.com/smuellerDD/jitterentropy-rngd/issues/9" rel="nofollow noopener">https://github.com/smuellerDD/jitterentropy-rngd/issues/9</a></p>
<p>Even with jitterentropy-rng, CONFIG_RANDOM_TRUST_CPU is wrong since iy gives rdrand a privileged position in entropy seeding.</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/10</link>
        <pubDate>Sun, 01 Dec 2019 15:14:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-10</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Enabling CONFIG_RANDOM_TRUST_CPU when jitter-entropy is not installed is a big mistake as it tricks systems without sufficient entropy into booting with a rigged seed instead of blocking until the pool is seeded properly. It should be disabled.</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/9</link>
        <pubDate>Sun, 01 Dec 2019 14:09:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-9</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[anontor]]></dc:creator>
        <description><![CDATA[
            <p>I tested the random.trust_cpu=off boot parameter in a “regular” Debian Buster with XFCE and also one with LXDE destops.<br>
The actual difference was just under 3 seconds.<br>
And dmesg acknowledges the difference also. With the parameter set, the log recognized it later on in the boot sequence (about 3 seconds). When not using the parameter, the seeding happens 3 seconds quicker and the log entry said: random : crng done (trusting cpu manufacturer).<br>
I tried the same with both haveged and jitterentropy-rngd enabled at boot-time as well. Although they both initialized with no errors or dealys, there was no gain in saved time for boot.<br>
The only real difference I noticed was the 3 second difference that is there if we use the boot parameter (random.trust_cpu=false). In this case there is the small delay with or without haveged and jitterentropy.</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/8</link>
        <pubDate>Sat, 30 Nov 2019 19:41:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-8</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[Patrick_mobile]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="6" data-topic="8566">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Just less entropy which is obvious.</p>
</blockquote>
</aside>
<p>There’s a lot to unpack here so this isn’t misinterpreted. Trying to describe this really well for documentation purposes.</p>
<p>I am not sure we can make a statement “more/less entropy”.</p>
<p>Maybe randomness is being collected slower during random pool initialization phase.</p>
<p>/dev/random should be providing same (or higher) quality of entropy during any phase.</p>
<p>/dev/random might be slower during random pool initialization phase. Once user space daemons are started (haveged, jitterentropy-rng), it will be same speed.</p>
<p>rdrand would just be 1 source of entropy. Mixed with equal priority with other sources of entropy.</p>
<p>We’d trade (marginally) longer booting time against less chance to get hit by an implementation flaw ot backdoor in rdrand.</p>
<p>Looks like an easy decision to make in favor of security.</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/7</link>
        <pubDate>Sat, 30 Nov 2019 05:20:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-7</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="5" data-topic="8566">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Can you find any security disadvantage?</p>
</blockquote>
</aside>
<p>Just less entropy which is obvious.</p>
<aside class="quote no-group" data-post="5" data-topic="8566">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>If it’s not too bad performance wise, we could go for it.</p>
</blockquote>
</aside>
<p>I’m not seeing any significant performance decrease.</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/6</link>
        <pubDate>Fri, 29 Nov 2019 20:10:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-6</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://strugglers.net/~andy/blog/2019/07/11/experiments-with-rdrand-and-entropykey/" class="onebox" target="_blank">https://strugglers.net/~andy/blog/2019/07/11/experiments-with-rdrand-and-entropykey/</a></p>
<aside class="quote no-group" data-post="4" data-topic="8566">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Use <code>random.trust_cpu=off</code> as a boot parameter to disable it.</p>
</blockquote>
</aside>
<p>The worst case here is probably prolonged boot times. Can you find any security disadvantage?<br>
<code>random.trust_cpu=off</code> is probably worth trying.<br>
If it’s not too bad performance wise, we could go for it.</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/5</link>
        <pubDate>Fri, 29 Nov 2019 18:06:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-5</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="3" data-topic="8566">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Can <code>CONFIG_RANDOM_TRUST_CPU</code> be similar be configured as a kernel parameter or sysctl?</p>
</blockquote>
</aside>
<p>Use <code>random.trust_cpu=off</code> as a boot parameter to disable it.</p>
<aside class="quote no-group" data-post="3" data-topic="8566">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Is <code>rng_core.default_quality</code> related?</p>
</blockquote>
</aside>
<p>Dunno what that does. Can’t find any documentation.</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/4</link>
        <pubDate>Fri, 29 Nov 2019 17:19:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-4</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Yes…</p>
<aside class="onebox twitterstatus">
  <header class="source">
      <a href="https://twitter.com/pid_eins/status/1149649806056280069" target="_blank">twitter.com</a>
  </header>
  <article class="onebox-body">
    <img src="https://pbs.twimg.com/profile_images/1060882042576093189/8xxzfqyq_400x400.jpg" class="thumbnail onebox-avatar" width="60" height="60">

<h4><a href="https://twitter.com/pid_eins/status/1149649806056280069" target="_blank">Lennart Poettering (pid_eins)</a></h4>

<div class="tweet"> Finally, AMD admits it's their fault, and they are preparing a BIOS update to fix RDRAND. You probably should avoid running a CONFIG_RANDOM_TRUST_CPU=y Linux kernel (Fedora) on a Ryzen system without that BIOS update, or all crypto keys generated are not as random as you hope. <a target="_blank" href="https://twitter.com/kernellogger/status/1149622184681197569">twitter.com/kernellogger/s…</a><div class="quoted">
<a class="quoted-link" href="https://twitter.com/kernellogger/status/1149622184681197569"><p class="quoted-title">Thorsten 'the Linux kernel logger' Leemhuis(6/6) <span>@kernellogger</span></p></a><div>AMD released BIOS updates to partners that in the next few days are supposed to fix the #RDRAND/#RDSEED issue in the new #Ryzen 3000 CPUs that prevents many Linux distributions from booting: https://t.co/3gCHj5D7Hb (sorry, German; but it quotes AMDs original English statement) https://t.co/WSsC2r8GJs</div>
</div>
</div>

<div class="date">
  <a href="https://twitter.com/pid_eins/status/1149649806056280069" target="_blank">12:00 PM - 12 Jul 2019</a>
    <span class="like">
      <svg viewBox="0 0 512 512" width="14px" height="16px" aria-hidden="true">
        <path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"></path>
      </svg> 49
    </span>
    <span class="retweet">
      <svg viewBox="0 0 640 512" width="14px" height="16px" aria-hidden="true">
        <path d="M629.657 343.598L528.971 444.284c-9.373 9.372-24.568 9.372-33.941 0L394.343 343.598c-9.373-9.373-9.373-24.569 0-33.941l10.823-10.823c9.562-9.562 25.133-9.34 34.419.492L480 342.118V160H292.451a24.005 24.005 0 0 1-16.971-7.029l-16-16C244.361 121.851 255.069 96 276.451 96H520c13.255 0 24 10.745 24 24v222.118l40.416-42.792c9.285-9.831 24.856-10.054 34.419-.492l10.823 10.823c9.372 9.372 9.372 24.569-.001 33.941zm-265.138 15.431A23.999 23.999 0 0 0 347.548 352H160V169.881l40.416 42.792c9.286 9.831 24.856 10.054 34.419.491l10.822-10.822c9.373-9.373 9.373-24.569 0-33.941L144.971 67.716c-9.373-9.373-24.569-9.373-33.941 0L10.343 168.402c-9.373 9.373-9.373 24.569 0 33.941l10.822 10.822c9.562 9.562 25.133 9.34 34.419-.491L96 169.881V392c0 13.255 10.745 24 24 24h243.549c21.382 0 32.09-25.851 16.971-40.971l-16.001-16z"></path>
      </svg> 31
    </span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Can be considered. But we need to understand more about how entropy is bootstrapped during the early boot process. Because entropy is a difficult subject. Even more so in virtual machines.</p>
<p>General good read about entropy:<br>
<a href="https://www.av8n.com/computer/htm/secure-random.htm" class="onebox" target="_blank">https://www.av8n.com/computer/htm/secure-random.htm</a></p>
<p>Excellent writeup by systemd:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <a href="https://systemd.io/RANDOM_SEEDS.html" target="_blank">systemd</a>
  </header>
  <article class="onebox-body">
    <img src="" class="thumbnail">

<h3><a href="https://systemd.io/RANDOM_SEEDS.html" target="_blank">Random Seeds</a></h3>

<p>The systemd System and Service Manager</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<p>After reading above I concluded that flipping the wrong setting could worsen entropy, specifically in VMs.</p>
<p><a href="https://wiki.debian.org/BoottimeEntropyStarvation" class="onebox" target="_blank">https://wiki.debian.org/BoottimeEntropyStarvation</a></p>
<p>Can <code>CONFIG_RANDOM_TRUST_CPU</code> be similar be configured as a kernel parameter or sysctl?</p>
<p>I am asking, because until users machines will automatically re-compile their own kernel could be a long time, if ever, due to an unresolved blocker. See this very post <a href="https://forums.whonix.org/t/kernel-recompilation-for-better-hardening/7598/77">kernel recompilation for better hardening</a> starting from <code>However, there is one blocker.</code></p>
<p>Is <code>rng_core.default_quality</code> related?</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/3</link>
        <pubDate>Fri, 29 Nov 2019 00:51:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-3</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="101" data-topic="7598">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>I’m not really the best person to ask as entropy is not my forte but I don’t see why this would matter from a security perspective unless there is some vulnerability in RDRAND (which <a href="https://en.wikipedia.org/wiki/RDRAND#Reception">isn’t just a theoretical concern</a>). Even then, it won’t matter much as RDRAND isn’t the only source of entropy.</p>
</blockquote>
</aside>
<p>linux-hardened and ClipOS both disable CONFIG_RANDOM_TRUST_CPU. I think we should look into this more.</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/2</link>
        <pubDate>Fri, 29 Nov 2019 00:15:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-2</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
      <item>
        <title>RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</title>
        <dc:creator><![CDATA[madaidan]]></dc:creator>
        <description><![CDATA[
            <p>I’m not really the best person to ask as entropy is not my forte but I don’t see why this would matter from a security perspective unless there is some vulnerability in RDRAND (which <a href="https://en.wikipedia.org/wiki/RDRAND#Reception" rel="noopener nofollow ugc">isn’t just a theoretical concern</a>). Even then, it won’t matter much as RDRAND isn’t the only source of entropy.</p>
          <p><a href="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566/1</link>
        <pubDate>Thu, 14 Nov 2019 18:32:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8566-1</guid>
        <source url="http://forums.whonix.org/t/rdrand-entropy-config-random-trust-cpu-yes-or-no-rng-core-default-quality/8566.rss">RDRAND - entropy CONFIG_RANDOM_TRUST_CPU yes or no? / rng_core.default_quality</source>
      </item>
  </channel>
</rss>
