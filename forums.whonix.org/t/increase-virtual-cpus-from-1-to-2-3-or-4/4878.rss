<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Increase Virtual CPUs from 1 to 2, 3 or 4?</title>
    <link>http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878</link>
    <description>Due to https://forums.whonix.org/t/whonix-14-increase-ram-to-1024-mb/4796/1 I have been experimenting with zram.

Problem is, with 1 CPU core only (current VirtualBox default), when RAM is full, VM CPU gets 100% used, feels like locking up (would take ages) and makes the system unusable. That while the host CPU is still underused. So that does not help too much.

Should we increase VirtualBox (and KVM...) virtual CPUs from 1 to 4 or so? Any reason against it?

Whonix 14 download version requires 64 bit hosts anyhow. How many CPU cores do most 64 bit hosts nowadays have anyhow?

What if we set VirtualBox virtual CPUs in ova settings by default to 4 but the host system only has 2 CPUs? Will VirtualBox automatically fix it (reduce virtual CPUs) or just show some error message?

Does someone have two cores only? Can anyone test that?</description>
    <language>en</language>
    <lastBuildDate>Fri, 07 Oct 2022 17:44:54 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Increase Virtual CPUs from 1 to 2, 3 or 4?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="3" data-topic="4878">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Yes, more work to do on that front. Complex subject.</p>
</blockquote>
</aside>
<p>The current implementation is stable. Switching to something like zram / zswap would require lots of testing on different systems. Currently not a priority. (<a href="https://www.whonix.org/wiki/Reporting_Bugs#Community_Feedback">About priorities</a>.) Help welcome.</p>
          <p><a href="http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878/7</link>
        <pubDate>Fri, 07 Oct 2022 17:44:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4878-7</guid>
        <source url="http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878.rss">Increase Virtual CPUs from 1 to 2, 3 or 4?</source>
      </item>
      <item>
        <title>Increase Virtual CPUs from 1 to 2, 3 or 4?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <ul>
<li><a href="https://www.kicksecure.com/wiki/VirtualBox/Troubleshooting#Assign_Less_Virtual_CPUs">Assign Less Virtual CPUs</a></li>
<li><a href="https://www.virtualbox.org/ticket/19500">https://www.virtualbox.org/ticket/19500</a></li>
</ul>
<aside class="onebox githubblob" data-onebox-src="https://github.com/derivative-maker/derivative-maker/blob/master/build-steps.d/2600_create-vbox-vm#L64-L67">
  <header class="source">

      <a href="https://github.com/derivative-maker/derivative-maker/blob/master/build-steps.d/2600_create-vbox-vm#L64-L67" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/derivative-maker/derivative-maker/blob/master/build-steps.d/2600_create-vbox-vm#L64-L67" target="_blank" rel="noopener">derivative-maker/derivative-maker/blob/master/build-steps.d/2600_create-vbox-vm#L64-L67</a></h4>



    <pre class="onebox">      <code class="lang-d/2600_create-vbox-vm">
        <ol class="start lines" start="64" style="counter-reset: li-counter 63 ;">
            <li>## 3 virtual CPU cores by default.</li>
            <li>## No longer 4 virtual CPU cores by default.</li>
            <li>## https://www.virtualbox.org/ticket/19500</li>
            <li>VBoxManage modifyvm "$VMNAME" --cpus 3</li>
        </ol>
      </code>
    </pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.kicksecure.com/wiki/Swap-file-creator">
  <header class="source">
      <img src="https://www.kicksecure.com/w/images/4/45/Kicksecure-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.kicksecure.com/wiki/Swap-file-creator" target="_blank" rel="noopener" title="07:47AM - 17 June 2022">Kicksecure – 17 Jun 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/471;"><img src="https://www.kicksecure.com/w/images/b/be/Swapfile21312345.png" class="thumbnail" width="640" height="471"></div>

<h3><a href="https://www.kicksecure.com/wiki/Swap-file-creator" target="_blank" rel="noopener">swap-file-creator</a></h3>

  <p>Adds encrypted swap file to the system.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>(Whonix is based on Kicksecure.)</p>
          <p><a href="http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878/6</link>
        <pubDate>Fri, 07 Oct 2022 17:42:10 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4878-6</guid>
        <source url="http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878.rss">Increase Virtual CPUs from 1 to 2, 3 or 4?</source>
      </item>
      <item>
        <title>Increase Virtual CPUs from 1 to 2, 3 or 4?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubcommit" data-onebox-src="https://github.com/derivative-maker/derivative-maker/commit/336452ee6ff9d623afce56018d16ed30f7eb7cc2">
  <header class="source">

      <a href="https://github.com/derivative-maker/derivative-maker/commit/336452ee6ff9d623afce56018d16ed30f7eb7cc2" target="_blank" rel="noopener">github.com/derivative-maker/derivative-maker</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/derivative-maker/derivative-maker/commit/336452ee6ff9d623afce56018d16ed30f7eb7cc2" target="_blank" rel="noopener">VirtualBox: 4 virtual CPU cores by default.</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2018-02-25" data-time="21:56:20" data-timezone="UTC">09:56PM - 25 Feb 18 UTC</span>
      </div>

      <div class="user">
        <a href="http://forums.whonix.org" rel="noopener">
          <img alt="" src="" class="onebox-avatar-inline" width="20" height="20">
          
        </a>
      </div>

      <div class="lines" title="changed 1 files with 3 additions and 0 deletions">
        <a href="https://github.com/derivative-maker/derivative-maker/commit/336452ee6ff9d623afce56018d16ed30f7eb7cc2" target="_blank" rel="noopener">
          <span class="added">+3</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>
  </div>
</div>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878/5</link>
        <pubDate>Sun, 25 Feb 2018 21:57:21 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4878-5</guid>
        <source url="http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878.rss">Increase Virtual CPUs from 1 to 2, 3 or 4?</source>
      </item>
      <item>
        <title>Increase Virtual CPUs from 1 to 2, 3 or 4?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="1" data-topic="4878">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>What if we set VirtualBox virtual CPUs in ova settings by default to 4 but the host system only has 2 CPUs? Will VirtualBox automatically fix it (reduce virtual CPUs) or just show some error message?</p>
</blockquote>
</aside>
<p>No such issue. 5 CPUs would be an invalid setting on my system using VirtualBox gui settings. <code>vboxmanage modifyvm --cpus 8</code> doesn’t cause a VM startup problem.</p>
          <p><a href="http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878/4</link>
        <pubDate>Sun, 25 Feb 2018 21:21:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4878-4</guid>
        <source url="http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878.rss">Increase Virtual CPUs from 1 to 2, 3 or 4?</source>
      </item>
      <item>
        <title>Increase Virtual CPUs from 1 to 2, 3 or 4?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>No worries. No need to make this uniform among VirtualBox / KVM. Not going to push this on KVM. This of course stays up to the KVM maintainer (<a class="mention" href="http://forums.whonix.org/u/hulahoop">@HulaHoop</a>) to decide.</p>
<aside class="quote" data-post="2" data-topic="4878">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>In the case of Whonix KVM 1 CPU per machine seems to cut it even for video playback.</p>
</blockquote>
</aside>
<p>Same for VirtualBox however for this discussion the context of “did you try when zram was active” is crucial. Then 1 vs 4 cores might make the difference between “practically frozen” (while theoretically you maybe wait ages for the lock up to end) and “still usable system”.</p>
<aside class="quote" data-post="2" data-topic="4878">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Try playing around with the zram settings, compression algo choices to find a better trade off for CPU use vs memory savings. My other suggestion is to try zswap which might be more easy going on CPU since older memory pages can be swapped out unlike zram.</p>
</blockquote>
</aside>
<p>Yes, more work to do on that front. Complex subject.</p>
          <p><a href="http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878/3</link>
        <pubDate>Sun, 25 Feb 2018 03:34:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4878-3</guid>
        <source url="http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878.rss">Increase Virtual CPUs from 1 to 2, 3 or 4?</source>
      </item>
      <item>
        <title>Increase Virtual CPUs from 1 to 2, 3 or 4?</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>In the case of Whonix KVM 1 CPU per machine seems to cut it even for video playback. I pin 1 cpu per vm to avoid machines co-sharing a CPU cache - as extra hardening against sidechannel attacks on crypto libraries. I’d like to keep that if I can.</p>
<p>Overcommitting cpu will cause the host to lock up if the user runs more than 2 GW-WS pairs from experience.</p>
<aside class="quote no-group" data-post="1" data-topic="4878">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Whonix 14 download version requires 64 bit hosts anyhow. How many CPU cores do most 64 bit hosts nowadays have anyhow?</p>
</blockquote>
</aside>
<p>Quadcore is pretty standard now.</p>
<p>Try playing around with the zram settings, compression algo choices to find a better trade off for CPU use vs memory savings. My other suggestion is to try zswap which might be more easy going on CPU since older memory pages can be swapped out unlike zram.</p>
<aside class="onebox stackexchange">
  <header class="source">
      <a href="https://stackoverflow.com/questions/18437205/difference-between-zram-and-zswap/18598732#18598732" target="_blank" rel="nofollow noopener">stackoverflow.com</a>
  </header>
  <article class="onebox-body">
      <a href="https://stackoverflow.com/users/2744059/ava1ar" target="_blank" rel="nofollow noopener">
    <img alt="ava1ar" src="//forums.whonix.org/uploads/default/original/2X/0/0ec9507507df268fd9c30ab8fb049ceac19b6c47.png" class="thumbnail onebox-avatar" width="128" height="128">
  </a>
<h4>
  <a href="https://stackoverflow.com/questions/18437205/difference-between-zram-and-zswap/18598732#18598732" target="_blank" rel="nofollow noopener">Difference between ZRAM and ZSWAP</a>
</h4>

<div class="tags">
  <strong>linux-kernel</strong>
</div>

<div class="date">
  
  answered by
  <a href="https://stackoverflow.com/users/2744059/ava1ar" target="_blank" rel="nofollow noopener">
    ava1ar
  </a>
  on <a href="https://stackoverflow.com/questions/18437205/difference-between-zram-and-zswap/18598732#18598732" target="_blank" rel="nofollow noopener">06:04PM - 03 Sep 13 UTC</a>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878/2</link>
        <pubDate>Sat, 24 Feb 2018 05:21:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4878-2</guid>
        <source url="http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878.rss">Increase Virtual CPUs from 1 to 2, 3 or 4?</source>
      </item>
      <item>
        <title>Increase Virtual CPUs from 1 to 2, 3 or 4?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Due to <a href="https://forums.whonix.org/t/whonix-14-increase-ram-to-1024-mb/4796/1" class="inline-onebox">Whonix-Workstation 14 - increase default RAM?</a> I have been experimenting with zram.</p>
<p>Problem is, with 1 CPU core only (current VirtualBox default), when RAM is full, VM CPU gets 100% used, feels like locking up (would take ages) and makes the system unusable. That while the host CPU is still underused. So that does not help too much.</p>
<p>Should we increase VirtualBox (and KVM…) virtual CPUs from 1 to 4 or so? Any reason against it?</p>
<p>Whonix 14 download version requires 64 bit hosts anyhow. How many CPU cores do most 64 bit hosts nowadays have anyhow?</p>
<p>What if we set VirtualBox virtual CPUs in ova settings by default to 4 but the host system only has 2 CPUs? Will VirtualBox automatically fix it (reduce virtual CPUs) or just show some error message?</p>
<p>Does someone have two cores only? Can anyone test that?</p>
          <p><a href="http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878/1</link>
        <pubDate>Sat, 24 Feb 2018 02:53:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4878-1</guid>
        <source url="http://forums.whonix.org/t/increase-virtual-cpus-from-1-to-2-3-or-4/4878.rss">Increase Virtual CPUs from 1 to 2, 3 or 4?</source>
      </item>
  </channel>
</rss>
