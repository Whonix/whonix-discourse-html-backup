<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Hardening Qubes-Whonix - #34 by entr0py - Qubes-Whonix - Whonix Forum</title>
    <meta name="description" content="(Continuing the discussion from Split Browser for Qubes.) 

In fact, I think it is worth noting somewhere that hardcore Qubes-Whonix  recommendations could arguably include: 


all apparmor profiles installed in the WS a&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../32214658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Hardening Qubes-Whonix&#39;" href="../3221.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/hardening-qubes-whonix/3221/34" />
<meta name="twitter:url" content="https://forums.whonix.org/t/hardening-qubes-whonix/3221/34" />
<meta property="og:title" content="Hardening Qubes-Whonix" />
<meta name="twitter:title" content="Hardening Qubes-Whonix" />
<meta property="og:description" content="No, if anything, it should get its own torproject.list. I would leave it out of the end-user security guide. Only for testers or paranoid. Testers Wanted! Tor - Stable Upgrades" />
<meta name="twitter:description" content="No, if anything, it should get its own torproject.list. I would leave it out of the end-user security guide. Only for testers or paranoid. Testers Wanted! Tor - Stable Upgrades" />
<meta property="article:published_time" content="2016-12-22T05:05:09+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="../3221.html">
        <link rel="next" href="../32219ba9.html?page=3">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../3221.html">Hardening Qubes-Whonix</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/qubes-whonix/12.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #63a0ff'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Qubes-Whonix</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-21T16:43:00Z' class='post-time'>
                December 21, 2016,  4:43pm
              </time>
              <meta itemprop='dateModified' content='2016-12-22T00:45:49Z'>
          <span itemprop='position'>#29</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>torjunkie:</p>
<blockquote>
<p>Tested on my system. Working, except for a 404 error on the Whonix server:</p>
<blockquote>
<p>Failed to fetch <a href="../../../../external.html?link=http://kkkkkkkkkk63ava6.onion/dists/jessie/main/binary-amd64/Packages">http://kkkkkkkkkk63ava6.onion/dists/jessie/main/binary-amd64/Packages</a> 404 Not Found<br>
I think we can also add these .onions entries to a new user.list, instead of manually changing the debian.list and whonix.list so i.e so they are not later written over by packages updates?</p>
</blockquote>
</blockquote>
<p>The canonical way is:</p>
<pre><code>sudo whonix_repository --baseuri http://deb.kkkkkkkkkk63ava6.onion --enable --repository stable
</code></pre>
<p>Won’t ever be automatically overwritten.</p>
<p>[With a small exception, if the onion ever changes (upcoming strong<br>
hidden services keys) we’ll <code>sed</code> replace the old to the new onion<br>
trough <code>whonix-legacy</code> package.]</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/entr0py'><span itemprop='name'>entr0py</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-21T17:35:16Z' class='post-time'>
                December 21, 2016,  5:35pm
              </time>
              <meta itemprop='dateModified' content='2016-12-21T17:35:16Z'>
          <span itemprop='position'>#30</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="28" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Tested on my system. Working, except for a 404 error on the Whonix server:</p>
<blockquote>
<p>Failed to fetch <a href="../../../../external.html?link=http://kkkkkkkkkk63ava6.onion/dists/jessie/main/binary-amd64/Packages">http://kkkkkkkkkk63ava6.onion/dists/jessie/main/binary-amd64/Packages</a> 404 Not Found</p>
</blockquote>
</blockquote>
</aside>
<p>Wow, really sloppy. Sorry.</p>
<p><code>deb http://deb.kkkkkkkkkk63ava6.onion jessie main</code> vs<br>
<code>deb http://kkkkkkkkkk63ava6.onion jessie main</code></p>
<aside class="quote" data-post="28" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>I think we can also add these .onions entries to a new user.list, instead of manually changing the debian.list and whonix.list so i.e so they are not later written over by packages updates?</p>
</blockquote>
</aside>
<p>Whonix 14 ticket: <a href="../../../../external.html?link=https://phabricator.whonix.org/T399">https://phabricator.whonix.org/T399</a></p>
<hr>
<aside class="quote" data-post="28" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/entr0py">@entr0py</a> please check this is okay.</p>
</blockquote>
</aside>
<p>Looks good to me. Thanks!</p>
<p>[I need a wiki for the wiki. I know there are templates for <span class="hashtag">#1</span> and <span class="hashtag">#2</span> that generalize instructions for qubes-whonix &amp; non-qubes-whonix. I don’t know where to find them though.]</p>
<blockquote>
<p><strong>(1)</strong> In the TemplateVM, open a terminal with Konsole.</p>
</blockquote>
<blockquote>
<p><strong>(2)</strong> Edit the Debian sources file:</p>
</blockquote>
<aside class="quote" data-post="28" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>[6] '<span class="bbcode-s">Credit to entr0py for this information.</span></p>
</blockquote>
</aside>
<p>[6] <a href="../../debian-starts-onionizing/2797/11.html">Debian starts Onionizing</a></p>
<p>Community effort. Better to link to discussions I think - unless attributing to a well-known expert. [Plus I don’t want any blame.] <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-22T00:45:30Z' class='post-time'>
                December 22, 2016, 12:45am
              </time>
              <meta itemprop='dateModified' content='2016-12-22T00:45:30Z'>
          <span itemprop='position'>#31</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="30" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/e/8dc957/40.png" class="avatar"> entr0py:</div>
<blockquote>
<p>[I need a wiki for the wiki. I know there are templates for <span class="hashtag">#1</span> and <span class="hashtag">#2</span> that generalize instructions for qubes-whonix &amp; non-qubes-whonix. I don’t know where to find them though.]</p>
</blockquote>
</aside>
<p>Here is a list of all templates (since we have not categorized them):<br>
<a href="../../../../external.html?link=https://www.whonix.org/wiki/Special:UncategorizedTemplates" class="onebox" target="_blank">https://www.whonix.org/wiki/Special:UncategorizedTemplates</a></p>
<p>(You can find such special pages through <a href="../../../../external.html?link=https://www.whonix.org/wiki/Special:SpecialPages.)">https://www.whonix.org/wiki/Special:SpecialPages.)</a></p>
<p>If you like to create any new templates, please just tell me the template page names and I create them.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-22T00:56:48Z' class='post-time'>
                December 22, 2016, 12:56am
              </time>
              <meta itemprop='dateModified' content='2016-12-22T00:56:48Z'>
          <span itemprop='position'>#32</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="25" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Qubes-Whonix users can achieve significant hardening of their system by completing a number of additional steps after installation of the base system.</p>
</blockquote>
</aside>
<p>(Many are general, non-Qubes specific.)</p>
<aside class="quote" data-post="25" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Successful completion of these steps below is dependent upon the user’s skill level and available hardware. Applicable steps are marked with ‘easy’, ‘medium’ or ‘difficult’ tags to reflect this:</p>
</blockquote>
</aside>
<p>I like the ordering in various difficulties.</p>
<p><a href="../../../../external.html?link=https://www.whonix.org/wiki/Security_Guide">https://www.whonix.org/wiki/Security_Guide</a> is supposed to contain only items being ‘easy’ and perhaps ‘medium’.</p>
<p><a href="../../../../external.html?link=https://www.whonix.org/wiki/Advanced_Security_Guide">https://www.whonix.org/wiki/Advanced_Security_Guide</a> is supposed to contain only ‘difficult’ items.</p>
<p>Perhaps Security_Guide needs a face lift? Perhaps remove all non-actionable items? I.t. remove all items that are just knowledge. Move that elsewhere, to where? And then have only ‘easy’ and ‘medium’ difficult actionable items on that page? [Plus links to other actionable items that have a separate page such as grsecurity.]</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-22T03:51:27Z' class='post-time'>
                December 22, 2016,  3:51am
              </time>
              <meta itemprop='dateModified' content='2016-12-22T03:56:33Z'>
          <span itemprop='position'>#33</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks!</p>
<p>Works with entr0py’s amended .onion mirror link, as does the canonical method for enabling the Whonix repository. <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/entr0py">@entr0py</a> does the Tor project .onion mirror belong in the Debian sources file?</p>
<p>See edits above. If this is okay, I will insert it in the security guide somewhere.</p>
<p>Patrick - I agree re: security docs. If entr0py and Ego have the quick-start guide in hand, then I hope to take this on as a mini-project. It is one of the most important sections of the wiki.</p>
<p>My other main interests are getting the Tor sandboxing stuff working (when you have the time) and helping to test and document this, and seeing that GRSEC documentation and testing works in Qubes-Whonix. Most of this will hopefully just be cut and pasting from coldhacka’s blog with the appropriate attribution.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/entr0py'><span itemprop='name'>entr0py</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-22T05:05:09Z' class='post-time'>
                December 22, 2016,  5:05am
              </time>
              <meta itemprop='dateModified' content='2016-12-22T05:05:09Z'>
          <span itemprop='position'>#34</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="33" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>does the Tor project .onion mirror belong in the Debian sources file?</p>
</blockquote>
</aside>
<p>No, if anything, it should get its own <code>torproject.list</code>. I would leave it out of the end-user security guide. Only for testers or paranoid. <a href="../../testers-wanted-tor-stable-upgrades/3233/5.html">Testers Wanted! Tor - Stable Upgrades</a></p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-22T15:32:42Z' class='post-time'>
                December 22, 2016,  3:32pm
              </time>
              <meta itemprop='dateModified' content='2016-12-22T15:32:42Z'>
          <span itemprop='position'>#35</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>They do but can just as easily work for other hypervisors by changing a single config option.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-22T19:59:12Z' class='post-time'>
                December 22, 2016,  7:59pm
              </time>
              <meta itemprop='dateModified' content='2016-12-22T19:59:12Z'>
          <span itemprop='position'>#36</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>For Qubes [Xen] it’s not as simple. ( <a href="../../../../external.html?link=https://github.com/coldhakca/coldkernel/issues/35">https://github.com/coldhakca/coldkernel/issues/35</a> )</p>
<p>Doesn’t work out of the box for VirtualBox either. (Breaks X, guest additions and apparmor.)</p>
<p>So I wonder it works with KVM at all.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-22T20:04:27Z' class='post-time'>
                December 22, 2016,  8:04pm
              </time>
              <meta itemprop='dateModified' content='2016-12-22T20:04:27Z'>
          <span itemprop='position'>#37</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Another point to add… Due to <a href="../../disable-sys-net-pings-to-fedoraproject-org/1952.html">https://forums.whonix.org/t/disable-sys-net-pings-to-fedoraproject-org</a> switch your sys-net and sys-firewall to Debian, if that works for you. [medium difficulty since this can break your networking. I advice to keep the original sys-net and sys-firewall Fedora based. Just in case. So you can switch back. And have a separate sys-net-debian as well as sys-firewall-debian.]</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-23T02:12:42Z' class='post-time'>
                December 23, 2016,  2:12am
              </time>
              <meta itemprop='dateModified' content='2016-12-23T02:12:42Z'>
          <span itemprop='position'>#38</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="36" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Doesn’t work out of the box for VirtualBox either.</p>
</blockquote>
</aside>
<p>VBox is an out of tree module and things with dkms are very flaky.</p>
<aside class="quote" data-post="36" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>So I wonder it works with KVM at all.</p>
</blockquote>
</aside>
<p>Working here but thats not much consolation and I won’t pretend to know whats wrong in Xen’s case.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-23T18:15:18Z' class='post-time'>
                December 23, 2016,  6:15pm
              </time>
              <meta itemprop='dateModified' content='2016-12-23T18:15:18Z'>
          <span itemprop='position'>#39</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Good call. I have tested this and it works (Debian sys-net and firewall).</p>
<p>The side benefit is you can defer to .onions also in the debian-8 templateVM, meaning the whole system is onionized, except for Qubes mirrors currently (with the .onion project underway).</p>
<p>I realize another addition to the list is putting any clear-net browsing (Firefox in Debian AppVM) in a firejail sandbox. Firejail is available from Jessie backports and seems to work well.</p>
<p>The only question is (I know you have a huge firejail thread going on elsewhere), how does one edit the qubes desktop file to run not just plain FF, but the command “firejail firefox” in the executable line? I have located the .desktop file, but wasn’t sure. Is some kind of symbolic link required or “” somewhere? Just throwing in “firejail firefox” there doesn’t work.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-23T19:56:46Z' class='post-time'>
                December 23, 2016,  7:56pm
              </time>
              <meta itemprop='dateModified' content='2016-12-23T19:56:46Z'>
          <span itemprop='position'>#40</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>re Qubes dom0 desktop files edit for firejail support:</p>
<p>Don’t. <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> Really. <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> Unless of course there is really no other way around. dom0 should not be involved at all. That should be purely up to the VM templates. Qubes dom0 start menu is capable to extract the full exec line. For example <a href="../../../../external.html?link=https://github.com/Whonix/whonix-ws-irc-chat-support/blob/master/usr/share/applications/whonix-irc-chat-support.desktop">whonix-irc-chat-support.desktop</a> uses <code>hexchat --url ircs://irc.oftc.net:9999/#Whonix</code>. The only place where this is configured is inside the template.</p>
<p>The question is: “How to <code>firejail</code>ify an application without requiring the user manually typing <code>firejail</code> into the console.”</p>
<p>Or a wider question: "How to automatically prepend commands (such as <code>firejail</code> before applications (such as <code>firefox</code>).</p>
<p>Has been (partially*) discussed here:<br>
<a href="../../firejail-seccomp-more-options-for-program-containment/1030.html">https://forums.whonix.org/t/firejail-seccomp-more-options-for-program-containment</a></p>
<p>(* I’d have to re-read first to know.)</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-24T06:19:05Z' class='post-time'>
                December 24, 2016,  6:19am
              </time>
              <meta itemprop='dateModified' content='2016-12-24T17:25:49Z'>
          <span itemprop='position'>#41</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi</p>
<p>According to this: <a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/Firejail">https://www.whonix.org/wiki/Dev/Firejail</a></p>
<blockquote>
<p>A short term workaround until the proposed upstreaming of start-tor-browser [4] happens: is to append Firejail to all launcher commands under: /usr/share/applications. Reasoning: TBB folder not visible to users. For a user to accidentally execute Tor Browser without protection, they have to go out of their way to find and launch the start-tor-browser script in the hidden TBB folder. In TBB’s use-model we don’t have to worry about command line users because TBB is a GUI app first and foremost. Visual indicators further help warn against accidental execution in the unlikely event it happens. If they use command line the might as well put Firejail before the script name. This solution is tested and working and survives TBB upgrades.</p>
</blockquote>
<p>So, I imagined this would mean:</p>
<p><strong>1)</strong> In Qubes-Whonix, we would edit the relevant file in the Debian-8 TemplateVM</p>
<blockquote>
<p>/usr/share/applications/firefox-esr.desktop</p>
</blockquote>
<p><strong>2)</strong> Prepend the firefox executable in the following line with “firejail”</p>
<blockquote>
<p>Exec=/usr/lib/firefox-esr/firefox-esr %u</p>
</blockquote>
<p>-&gt;</p>
<blockquote>
<p>Exec=/usr/lib/firefox-esr/firejail firefox-esr %u</p>
</blockquote>
<p>And hoping for Christmas magic, it would lead to Firefox automatically starting contained, because the Qubes menu entry points to: /usr/share/applications/firefox-esr.desktop</p>
<p>Of course, not that easy. Help?</p>
<p>I’m trying to make this easy for dumb users like me. We need our hands held every step of the way, or we will do something really stupid <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Although, I don’t mind running a terminal with “firejail firefox” every time, there must be an easy solution.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-24T10:29:00Z' class='post-time'>
                December 24, 2016, 10:29am
              </time>
              <meta itemprop='dateModified' content='2016-12-24T10:29:00Z'>
          <span itemprop='position'>#42</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>torjunkie:</p>
<blockquote>
<p><strong>2)</strong> Prepend the firefox executable in the following line with<br>
"firejail"</p>
<blockquote>
<p>Exec=/usr/lib/firefox-esr/firefox-esr %u</p>
</blockquote>
<p>-&gt;</p>
<blockquote>
<p>Exec=/usr/lib/firefox-esr/firejail firefox-esr %u</p>
</blockquote>
</blockquote>
<pre><code>Exec=firejail /usr/lib/firefox-esr/firefox-esr %u
</code></pre>
<p>Maybe full path to firejail is required as well.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-24T17:35:27Z' class='post-time'>
                December 24, 2016,  5:35pm
              </time>
              <meta itemprop='dateModified' content='2016-12-28T04:17:26Z'>
          <span itemprop='position'>#43</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Ha ha ha <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:">  Dyslexia at its finest. Yep - that works.</p>
<p>What about an entry something like this below? (DebianVM Firefox-ESR tested; Whonix-WS Tor Browser tested) - please point out my many errors, misunderstandings and poor, non-canonical method.</p>
<blockquote>
<p><strong>To Do:</strong> <strong>Non-Qubes-Whonix only - Running Tor Browser in the Alpha Tor Sandbox</strong></p>
</blockquote>
<blockquote>
<p>[Copy working instructions from sandboxing thread]</p>
</blockquote>
<blockquote>
<p><strong>Sandboxing Tor Browser and Firefox with Firejail in Qubes-Whonix</strong></p>
</blockquote>
<blockquote>
<p>Until the alpha Tor Browser sandbox is fully integrated into Qubes-Whonix (experimental instructions are now available for non-Qubes-Whonix), Qubes-Whonix users should strongly consider running instances of the Tor Browser in a restricted environment using the Firejail Security Sandbox.</p>
</blockquote>
<blockquote>
<p>It must be remembered that the Tor Browser is an untrusted application with a huge attack surface. It is frequently, and successfully, attacked in the wild. Therefore, it makes sense to mitigate the risk of security breaches with a sandboxing approach. According to the Firejail project page:</p>
</blockquote>
<blockquote>
<p><a href="../../../../external.html?link=https://firejail.wordpress.com/">https://firejail.wordpress.com/</a></p>
</blockquote>
<blockquote>
<blockquote>
<p>Firejail is a SUID program that reduces the risk of security breaches by restricting the running environment of untrusted applications using Linux namespaces and seccomp-bpf. It allows a process and all its descendants to have their own private view of the globally shared kernel resources, such as the network stack, process table, mount table.</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>Written in C with virtually no dependencies, the software runs on any Linux computer with a 3.x kernel version or newer. The sandbox is lightweight, the overhead is low. There are no complicated configuration files to edit, no socket connections open, no daemons running in the background. All security features are implemented directly in Linux kernel and available on any Linux computer. The program is released under GPL v2 license.</p>
</blockquote>
</blockquote>
<blockquote>
<p>Best of all, Firejail has built-in profiles for a large number of popular Linux programs including: Firefox, Chromium, VLC and Transmission. Sandboxes can be started by simply prefixing your program command with “firejail” in a terminal e.g. “firejail firefox”, “firejail vlc” etc.</p>
</blockquote>
<blockquote>
<p>Alternatively, a simple work-around in Qubes-Whonix is to edit the relevant .desktop file that launches a process and prepend the executable path with the firejail command.[1][2]</p>
</blockquote>
<blockquote>
<p><strong>Running Tor Browser in a Firejail Sandbox (tested)</strong></p>
</blockquote>
<blockquote>
<p><strong>Note:</strong> preferably clone your Whonix-Workstation-TemplateVM prior to taking these steps below, as some dependencies will be added.</p>
</blockquote>
<blockquote>
<p><strong>(1)</strong> Open /etc/apt/preferences.d/debian-pinning.pref in an editor with root rights.[3][4]</p>
</blockquote>
<blockquote>
<p>If you are using a graphical Whonix or Qubes-Whonix, run:</p>
</blockquote>
<blockquote>
<blockquote>
<p>kdesudo kwrite /etc/apt/preferences.d/debian-pinning.pref</p>
</blockquote>
</blockquote>
<blockquote>
<p>If you are using a terminal-only Whonix, run:</p>
</blockquote>
<blockquote>
<blockquote>
<p>sudo nano /etc/apt/preferences.d/debian-pinning.pref</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>(2)</strong> Paste:</p>
</blockquote>
<blockquote>
<blockquote>
<p>Package: *<br>
Pin: release a=stable<br>
Pin-Priority: 700</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>Package: *<br>
Pin: release a=jessie-backports<br>
Pin-Priority: 650</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>Package: *<br>
Pin: release a=testing<br>
Pin-Priority: 600</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>Package: *<br>
Pin: release a=unstable<br>
Pin-Priority: 550</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>Package: *<br>
Pin: release a=experimental<br>
Pin-Priority: 500</p>
</blockquote>
</blockquote>
<blockquote>
<p>Save.</p>
</blockquote>
<blockquote>
<p><strong>(3)</strong> Add Debian Backports to the Debian sources file</p>
</blockquote>
<blockquote>
<p>If you are using a graphical Whonix or Qubes-Whonix, run:</p>
</blockquote>
<blockquote>
<blockquote>
<p>kdesudo kwrite /etc/apt/sources.list.d/debian.list</p>
</blockquote>
</blockquote>
<blockquote>
<p>If you are using a terminal-only Whonix, run:</p>
</blockquote>
<blockquote>
<blockquote>
<p>sudo nano /etc/apt/sources.list.d/debian.list</p>
</blockquote>
</blockquote>
<blockquote>
<p>Cut and paste the following Debian Backports mirror (choose the http OR .onion mirror):</p>
</blockquote>
<blockquote>
<blockquote>
<p>deb <a href="../../../../external.html?link=http://ftp.debian.org/debian">http://ftp.debian.org/debian</a> jessie-backports main contrib non-free</p>
</blockquote>
</blockquote>
<blockquote>
<p>OR</p>
</blockquote>
<blockquote>
<blockquote>
<p>deb <a href="../../../../external.html?link=http://vwakviie2ienjx6t.onion/debian">http://vwakviie2ienjx6t.onion/debian</a> jessie-backports main contrib non-free</p>
</blockquote>
</blockquote>
<blockquote>
<p>Save and exit.</p>
</blockquote>
<blockquote>
<p><strong>(4)</strong> Update the TemplateVM and Install Firejail from the backports mirror</p>
</blockquote>
<blockquote>
<blockquote>
<p>sudo apt-get update</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>sudo apt-get -t jessie-backports install firejail</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>(5)</strong> Create a local directory for the Tor Browser desktop file</p>
</blockquote>
<blockquote>
<blockquote>
<p>mkdir -p /home/user/.local/share/applications</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>(6)</strong> Copy the existing Tor Browser desktop file to the local directory</p>
</blockquote>
<blockquote>
<blockquote>
<p>sudo cp /usr/share/applications/janondisttorbrowser.desktop /home/user/.local/share/applications/janondisttorbrowser.desktop</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>(7)</strong> Edit janondisttorbrowser.desktop in an editor with root rights.[5]</p>
</blockquote>
<blockquote>
<p>If you are using a graphical Whonix or Qubes-Whonix, run:</p>
</blockquote>
<blockquote>
<blockquote>
<p>kdesudo kwrite /home/user/.local/share/applications/janondisttorbrowser.desktop</p>
</blockquote>
</blockquote>
<blockquote>
<p>If you are using a terminal-only Whonix, run:</p>
</blockquote>
<blockquote>
<blockquote>
<p>sudo nano /home/user/.local/share/applications/janondisttorbrowser.desktop</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>(8)</strong> Prepend the Exec= line with “firejail”[6]</p>
</blockquote>
<blockquote>
<blockquote>
<p>Exec=firejail torbrowser %u</p>
</blockquote>
</blockquote>
<blockquote>
<p>OR to use the existing Firefox profile with Tor</p>
</blockquote>
<blockquote>
<blockquote>
<p>Exec=firejail --profile=/etc/firejail/firefox.profile torbrowser %u</p>
</blockquote>
</blockquote>
<blockquote>
<p>Save and exit</p>
</blockquote>
<blockquote>
<p><strong>(9)</strong> Populate the newly created folder in the TemplateVM</p>
</blockquote>
<blockquote>
<p><strong>Note:</strong> change the name of the template below if you created a whonix-ws-clone-1 to test this procedure.</p>
</blockquote>
<blockquote>
<p>While Whonix-Workstation TemplateVM is still running, in dom0 run:</p>
</blockquote>
<blockquote>
<blockquote>
<p>qvm-sync-appmenus whonix-ws</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>(10)</strong> Create a new Whonix-Workstation-AppVM based on your modified template</p>
</blockquote>
<blockquote>
<p>The Tor Browser entry will now point to the modified janondisttorbrowser.desktop file in the .local directory which is prepended with firejail.</p>
</blockquote>
<blockquote>
<p><strong>Running Firefox-ESR in a Firejail Sandbox (Qubes Debian-8 Template only; tested)</strong></p>
</blockquote>
<blockquote>
<p><strong>Note:</strong> preferably clone your Debian-8 TemplateVM prior to taking these steps below, as some dependencies will be added.[7]</p>
</blockquote>
<blockquote>
<p>Repeat the steps above for the Tor Browser entry, EXCEPT:</p>
</blockquote>
<blockquote>
<p>At steps <strong>(6)</strong> and <strong>(7)</strong>, edit the following file:</p>
</blockquote>
<blockquote>
<blockquote>
<p>/usr/share/applications/firefox-esr.desktop</p>
</blockquote>
</blockquote>
<blockquote>
<p>At step <strong>(9)</strong>, run in dom0:</p>
</blockquote>
<blockquote>
<blockquote>
<p>qvm-sync-appmenus debian-8</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>Note:</strong> change the name of the template if you cloned it at an earlier step.</p>
</blockquote>
<blockquote>
<p><strong>Footnotes:</strong></p>
</blockquote>
<blockquote>
<p>[1] <a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/Firejail">https://www.whonix.org/wiki/Dev/Firejail</a><br>
[2] This process can be repeated with every .desktop application file if desired<br>
[3]<a href="../../../../external.html?link=https://www.whonix.org/wiki/Template:Apt-Pinning">https://www.whonix.org/wiki/Template:Apt-Pinning</a><br>
[4] Apt-Pinning allows the user to mix and match packages from different Debian repos without breaking the base distro<br>
[5] Yawning’s script for Firejail integration with Tor Browser is no longer available at <a href="../../../../external.html?link=https://git.schwanenlied.me/yawning/tor-firejail/src/master/start-tor-browser">https://git.schwanenlied.me/yawning/tor-firejail/src/master/start-tor-browser</a><br>
[6] Advanced users can create a custom profile for Tor Browser by following these steps at <a href="../../../../external.html?link=https://firejail.wordpress.com/documentation-2/building-custom-profiles/">https://firejail.wordpress.com/documentation-2/building-custom-profiles/</a><br>
[7] Users should NOT use Firefox in a Whonix template. It is easily fingerprinted and less secure than Tor Browser</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-24T19:05:34Z' class='post-time'>
                December 24, 2016,  7:05pm
              </time>
              <meta itemprop='dateModified' content='2016-12-24T19:05:34Z'>
          <span itemprop='position'>#44</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="43" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>I suppose that this lends itself to another basic entry in the security guide - not a reference to a forum link or another dev section of the wiki - since it needs to be spelled out step-by-step, or it won’t be used, except by experts like yourself, entr0py and HulaHoop.</p>
</blockquote>
</aside>
<p>Of course right.</p>
<aside class="quote" data-post="43" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>As it stands, the Tor Browser in Whonix is not yet using the Tor Project’s sandbox binary, and most normal people won’t have ever even seen their .desktop file before, nor knew (or cared) /usr/share/applications existed.</p>
</blockquote>
</aside>
<p>Yes.</p>
<aside class="quote" data-post="43" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>I would also bet that 95% of Qubes-Whonix users who default to FF or Chrome/Chromium for clearnet purposes in a Fedora or Debian AppVM are running it unsandboxed.</p>
</blockquote>
</aside>
<p>Quite possible.</p>
<aside class="quote" data-post="43" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>What about an entry something like this below?</p>
</blockquote>
</aside>
<p>We’re on the same page. Our world view on that topic matches. The reason it’s not already done is lack of time. I am still working on the <a href="../../../../external.html?link=https://phabricator.whonix.org/maniphest/query/5sZ7FpwCEQDz/#R">tickets for Whonix 14</a>. Some of them are incredible hard for me. What Whonix needs is contributions like this. <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<aside class="quote" data-post="43" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>(1) Install Firejail from Jessie Backports in the Whonix-Workstation TemplateVM</p>
</blockquote>
</aside>
<p>Can you please use this template?<br>
<a href="../../../../external.html?link=https://www.whonix.org/wiki/Template:Apt-Pinning">https://www.whonix.org/wiki/Template:Apt-Pinning</a></p>
<p>(Unless you see it unfit, then we fix it?)</p>
<p>(((For usage examples of that template: <code>Tools -&gt; What links here</code>)))</p>
<aside class="quote" data-post="43" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>sudo nano /usr/share/applications/janondisttorbrowser.desktop</p>
</blockquote>
</aside>
<p>Please use <a href="../../../../external.html?link=https://www.whonix.org/wiki/Template:Open_with_root_rights">https://www.whonix.org/wiki/Template:Open_with_root_rights</a> instead.</p>
<aside class="quote" data-post="43" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>/usr/share/applications/janondisttorbrowser.desktop</p>
</blockquote>
</aside>
<p>Please don’t directly edit that file. That can lead to unexpected results. Next time tb-updater is updated (each time there is a new Tor Browser stable release) that file be overwritten. From then, no more firejail. That’s how Debian [and others] packaging works. There are workarounds for that. One is using dpkg-divert, but not a great one. Can you try please if overwriting the desktop file using <code>/home/user/.local/share/applications</code> works? That would be much better.</p>
<aside class="quote" data-post="43" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Running Firefox-ESR in a Firejail Sandbox (Qubes-Whonix only; tested)</p>
</blockquote>
</aside>
<p>This need a warning box stating that one should not run Firefox in Whonix and expect anonymity. Generally, I am open to non-anonymity related security also. But some things may not be confused with each other.</p>
<p>(For that purpose I was wondering to hack Tor Browser that gets more and more hardened and then use it for browsing clearnet. Will probably not be easyly possible since TCP support will be removed from Tor Browser [using SocksSocket only]. Would require recompilation or finding a clever socks to clearnet solution.)</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/eujan1'><span itemprop='name'>eujan1</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-25T01:50:09Z' class='post-time'>
                December 25, 2016,  1:50am
              </time>
              <meta itemprop='dateModified' content='2016-12-25T01:50:09Z'>
          <span itemprop='position'>#45</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="28" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>To use the .onion mirrors, it is necessary to change the whonix.list and debian.list files in the /etc/apt/sources.list.d directory in both the Whonix-Workstation and Whonix-Gateway TemplateVMs.[6]<br>
(1) In the TemplateVM, open a terminal with Konsole.<br>
(2) Edit the Debian sources file:<br>
sudo nano /etc/apt/sources.list.d/debian.list<br>
(3) Cut and paste the following .onion mirrors and comment out (#) the corresponding http repositories noted in bold:</p>
<p><span class="hashtag">#deb</span> <a href="../../../../external.html?link=http://ftp.debian.org/debian" rel="nofollow noopener">http://ftp.debian.org/debian</a> jessie main contrib non-freedeb <a href="../../../../external.html?link=http://vwakviie2ienjx6t.onion/debian" rel="nofollow noopener">http://vwakviie2ienjx6t.onion/debian</a> jessie main contrib non-free</p>
<h1>deb <a href="../../../../external.html?link=http://security.debian.org/" rel="nofollow noopener">http://security.debian.org</a> jessie/updates main contrib non-freedeb <a href="../../../../external.html?link=http://sgvtcaew4bxjd7ln.onion/" rel="nofollow noopener">http://sgvtcaew4bxjd7ln.onion</a> jessie/updates main contrib non-free</h1>
<p>(Optional - Backports)<br>
<span class="hashtag">#deb</span> <a href="../../../../external.html?link=http://ftp.debian.org/debian" rel="nofollow noopener">http://ftp.debian.org/debian</a> jessie-backports main contrib non-freedeb <a href="../../../../external.html?link=http://vwakviie2ienjx6t.onion/debian" rel="nofollow noopener">http://vwakviie2ienjx6t.onion/debian</a> jessie-backports main contrib non-free</p>
<p>(4) Save the new debian.list file<br>
(5) Point to the Whonix APT Repository .onion mirror:<br>
sudo whonix_repository --baseuri <a href="../../../../external.html?link=http://deb.kkkkkkkkkk63ava6.onion/" rel="nofollow noopener">http://deb.kkkkkkkkkk63ava6.onion</a> --enable --repository stable</p>
</blockquote>
</aside>
<p>This is great.  Thanks!</p>
<p>One thing to note, I was not able to save the the “debian.list” file due to not having write access using “sudo nano /etc/apt/sources.list.d/debian.list”.  Had to open dolphin with “sudo dolphin” and edit the file from there.  Is there a better way?</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-25T05:10:45Z' class='post-time'>
                December 25, 2016,  5:10am
              </time>
              <meta itemprop='dateModified' content='2016-12-25T05:10:45Z'>
          <span itemprop='position'>#46</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Patrick - thanks. I know you are a very busy man. I will use the templates and fix up both the suggested .onion sources entry and Firejail entry in this forum, prior to any wiki editing.</p>
<p><span class="mention">@eujuan1</span></p>
<p>I should have used the Whonix template for that step (will fix that up). See here:</p>
<p><a href="../../../../external.html?link=https://www.whonix.org/wiki/Template:Open_with_root_rights" class="onebox" target="_blank">https://www.whonix.org/wiki/Template:Open_with_root_rights</a></p>
<blockquote>
<p>Open {{{filename}}} in an editor with root rights.</p>
</blockquote>
<blockquote>
<p>If you are using a graphical Whonix or Qubes-Whonix, run:</p>
</blockquote>
<blockquote>
<p>kdesudo kwrite {{{filename}}}</p>
</blockquote>
<blockquote>
<p>If you are using a terminal-only Whonix, run:</p>
</blockquote>
<blockquote>
<p>sudo nano {{{filename}}}</p>
</blockquote>
<p>Does that work okay (kdesudo kwrite)?</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-25T11:51:01Z' class='post-time'>
                December 25, 2016, 11:51am
              </time>
              <meta itemprop='dateModified' content='2016-12-25T11:51:01Z'>
          <span itemprop='position'>#47</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I’ve made all your recommended changes (see edited version of suggested .onions mirrors and firejail entries above). The only problem is -&gt;</p>
<p>/home/user/.local/share/applications directory doesn’t exist?</p>
<p>Using the find / -name command, it shows in the Whonix-WS Template VM, the file only exists at:</p>
<p>/usr/share/applications/janondisttorbrowser.desktop</p>
<p>&amp;</p>
<p>/home.orig/user/Desktop/janondisttorbrowser.desktop</p>
<p>Ditto for anon-whonix appVM. Not sure what I’m doing wrong here.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-25T15:59:55Z' class='post-time'>
                December 25, 2016,  3:59pm
              </time>
              <meta itemprop='dateModified' content='2016-12-25T15:59:55Z'>
          <span itemprop='position'>#48</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>torjunkie:</p>
<blockquote>
<p>Not sure what I’m doing wrong here.</p>
</blockquote>
<p>Only expecting the file to be already there. <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<blockquote>
<p>I’ve made all your recommended changes (see edited version of suggested .onions mirrors and firejail entries above). The only problem is -&gt;</p>
<p>/home/user/.local/share/applications directory doesn’t exist?</p>
</blockquote>
<p>Please try creating the folder.</p>
<pre><code>mkdir -p /home/user/.local/share/applications
</code></pre>
<p>Can you try with Non-Qubes-Whonix first or any operating system with a regular start menu if that works first? Otherwise I gotta try this. (First need to understand the usual mechanism before the Qubes mechanism.)</p>
<p>You might also be able to skip that. I guess in Qubes <code>/home/user/.local/share/applications/</code> folder has to be populated in TemplateVM. And after that - while the TemplateVM is still running - run in dom0.</p>
<p>(whonix-ws vs whonix-ws-clone)</p>
<pre><code>qvm-sync-appmenus whonix-ws
</code></pre>
<p>Or perhaps better to learn more.</p>
<pre><code>qvm-sync-appemnus --verbose whonix-ws
</code></pre>
<blockquote>
<p>Using the find / -name command, it shows in the Whonix-WS Template VM, the file only exists at:</p>
<p>/usr/share/applications/janondisttorbrowser.desktop</p>
</blockquote>
<p>This file is owned by tb-updater in a system wide folder.</p>
<blockquote>
<p>&amp;</p>
<p>/home.orig/user/Desktop/janondisttorbrowser.desktop</p>
</blockquote>
<p>That should be totally unrelated. It’s a desktop shortcut that is only visible in Non-Qubes-Whonix.</p>
<hr>
<p><code>/home/user/.local/share/applications/</code> is a linux user account specific folder. (Not a system wide folder.)</p>
<p>In theory, once <code>/home/user/.local/share/applications/janondisttorbrowser.desktop</code> exists it will be used and <code>/usr/share/applications/janondisttorbrowser.desktop</code> will be ignored by the start menu.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="../3221.html">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../32219ba9.html?page=3">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
