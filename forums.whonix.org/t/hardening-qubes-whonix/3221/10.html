<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Hardening Qubes-Whonix - #10 - Qubes-Whonix - Whonix Forum</title>
    <meta name="description" content="(Continuing the discussion from Split Browser for Qubes.) 

In fact, I think it is worth noting somewhere that hardcore Qubes-Whonix  recommendations could arguably include: 


all apparmor profiles installed in the WS a&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../3221.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Hardening Qubes-Whonix&#39;" href="../3221.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/hardening-qubes-whonix/3221/10" />
<meta name="twitter:url" content="https://forums.whonix.org/t/hardening-qubes-whonix/3221/10" />
<meta property="og:title" content="Hardening Qubes-Whonix" />
<meta name="twitter:title" content="Hardening Qubes-Whonix" />
<meta property="og:description" content="OK - will add those points soon.  We could probably add entr0py’s recommendation to:   Store all login credentials and passwords in an offline vault VM (in a password manager?), and only using Qube’s secure cut and paste into Tor Browser.  Also:   Select ‘Clearclick’ and ABE (Applications Boundary Enforcer) protections in NoScript which are not enforced under default TB settings (due to some known bugs on certain websites); Never type directly into Tor Browser to avoid typing profiling i.e. use ..." />
<meta name="twitter:description" content="OK - will add those points soon.  We could probably add entr0py’s recommendation to:   Store all login credentials and passwords in an offline vault VM (in a password manager?), and only using Qube’s secure cut and paste into Tor Browser.  Also:   Select ‘Clearclick’ and ABE (Applications Boundary Enforcer) protections in NoScript which are not enforced under default TB settings (due to some known bugs on certain websites); Never type directly into Tor Browser to avoid typing profiling i.e. use ..." />
<meta property="article:published_time" content="2016-12-02T15:35:30+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="next" href="../32214658.html?page=2">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../3221.html">Hardening Qubes-Whonix</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/qubes-whonix/12.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #63a0ff'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Qubes-Whonix</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-02T15:35:30Z' class='post-time'>
                December 2, 2016,  3:35pm
              </time>
              <meta itemprop='dateModified' content='2016-12-02T15:35:30Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>OK - will add those points soon.</p>
<p>We could probably add entr0py’s recommendation to:</p>
<ul>
<li>Store all login credentials and passwords in an offline vault VM (in a password manager?), and only using Qube’s secure cut and paste into Tor Browser.</li>
</ul>
<p>Also:</p>
<ul>
<li>Select ‘Clearclick’ and ABE (Applications Boundary Enforcer) protections in NoScript which are not enforced under default TB settings (due to some known bugs on certain websites);</li>
<li>Never type directly into Tor Browser to avoid typing profiling i.e. use a text editor in an offline VM and cut and paste into Tor Browser; and</li>
<li>Run Tor Browser in the highest security slider position and only sparingly allow Javascript for trusted sites**</li>
</ul>
<p>I think the last two points are already mentioned somewhere in the documentation.</p>
<p>** Analysis of the SVG exploit just patched in Firefox shows this would have provided protection against exploitation.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-02T16:38:47Z' class='post-time'>
                December 2, 2016,  4:38pm
              </time>
              <meta itemprop='dateModified' content='2016-12-02T16:38:47Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Good ideas! Yes, please add!</p>
<aside class="quote" data-post="4" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Store all login credentials and passwords in an offline vault VM (in a password manager?), and only using Qube’s secure cut and paste into Tor Browser.</p>
</blockquote>
</aside>
<p>Yes. And also copy something else into the clipboard after pasting so the password is purged from the clipboard so it cannot be accidentally pasted elsewhere.</p>
<aside class="quote" data-post="4" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Select ‘Clearclick’ and ABE (Applications Boundary Enforcer) protections in NoScript which are not enforced under default TB settings (due to some known bugs on certain websites);</p>
</blockquote>
</aside>
<p>Should not TBB do that on high security setting? Was this discussed by Tor Project? Add a bug report against TBB?</p>
<aside class="quote" data-post="4" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Run Tor Browser in the highest security slider position and only sparingly allow Javascript for trusted sites**</p>
</blockquote>
</aside>
<p>Needs to be added.</p>
<aside class="quote" data-post="4" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>I think the last two points are already mentioned somewhere in the documentation.</p>
</blockquote>
</aside>
<aside class="quote" data-post="4" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Never type directly into Tor Browser to avoid typing profiling i.e. use a text editor in an offline VM and cut and paste into Tor Browser; and</p>
</blockquote>
</aside>
<p>Keyboard input is mentioned here:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://www.whonix.org/wiki/Surfing_Posting_Blogging" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/400;"><img src="../../../../external.html?link=https://www.whonix.org/w/images/5/57/Blog-1616979640.jpg" class="thumbnail"></div>

<h3><a href="../../../../external.html?link=https://www.whonix.org/wiki/Surfing_Posting_Blogging" target="_blank" rel="nofollow noopener">Surfing Posting Blogging</a></h3>

<p>Surf, Blog and Post anonymously on the Internet. Essential knowledge to avoid detection.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>Not sure if the importance of that information is properly highlighted. I am wondering if the Whonix wiki information structure can be improved. There is some overlap for the following pages.</p>
<ul>
<li><a href="../../../../external.html?link=https://www.whonix.org/wiki/Computer_Security_Education">https://www.whonix.org/wiki/Computer_Security_Education</a></li>
<li><a href="../../../../external.html?link=https://www.whonix.org/wiki/Security_Guide">https://www.whonix.org/wiki/Security_Guide</a></li>
<li><a href="../../../../external.html?link=https://www.whonix.org/wiki/Warning">https://www.whonix.org/wiki/Warning</a></li>
<li><a href="../../../../external.html?link=https://www.whonix.org/wiki/DoNot">https://www.whonix.org/wiki/DoNot</a></li>
<li><a href="../../../../external.html?link=https://www.whonix.org/wiki/Surfing_Posting_Blogging">https://www.whonix.org/wiki/Surfing_Posting_Blogging</a></li>
</ul>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-04T01:04:36Z' class='post-time'>
                December 4, 2016,  1:04am
              </time>
              <meta itemprop='dateModified' content='2016-12-04T01:04:36Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>You might also like to install newer Tor versions. As per Whonix 13, Whonix by default uses <a href="../../../../external.html?link=http://deb.torproject.org/">deb.torproject.org</a> jessie, stable version. The following <a href="../../../../external.html?link=http://deb.torproject.org/">deb.torproject.org</a> Tor suites providing newer Tor versions could also be interesting for you:</p>
<ul>
<li>jessie-proposed-updates</li>
<li>experimental</li>
<li>nightly</li>
</ul>
<p>If at least one person would use any of these (<code>jessie-proposed-updates</code> seems reasonable, <code>experimental</code> seems more risky and <code>nightly</code> really only for testers), that would also help Whonix development a lot - because then you’d run into issues before anyone else, allowing us to contact Tor Project about possible changes that mess up the whole Whonix concept before these changes make it into Tor stable releases and creating a huge mess.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-04T15:41:49Z' class='post-time'>
                December 4, 2016,  3:41pm
              </time>
              <meta itemprop='dateModified' content='2016-12-04T15:41:49Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi,</p>
<p>Re: jessie-proposed-updates -&gt; doing this already, and 2.8.10 is working nicely.</p>
<p>Re: NoScript and ABE -&gt; It is not required, as Tor Browser now blocks all access to 127.0.0.1 by default. So scrap that recommendation.</p>
<p>See <a href="../../../../external.html?link=https://trac.torproject.org/projects/tor/ticket/11493">https://trac.torproject.org/projects/tor/ticket/11493</a></p>
<p>Re: NoScript and ClearClick (Click jacking) protections, it is not enabled by default because certain false positives occur, typically on webpages relating to CAPTCHAs, some banking websites, some embedded PDFs etc.</p>
<p>An open ticket exists, with the feature having been temporarily disabled. I think we can recommend users set it to on, with a suitable warning about false positives.</p>
<p>See here: <a href="../../../../external.html?link=https://trac.torproject.org/projects/tor/ticket/14985">https://trac.torproject.org/projects/tor/ticket/14985</a></p>
<p>For interested readers, Clickjacking refers to:</p>
<p><a href="../../../../external.html?link=https://noscript.net/faq#qa8_1" class="onebox" target="_blank">https://noscript.net/faq#qa8_1</a></p>
<blockquote>
<p>“Clickjacking” we designate a class of attacks (also known as “UI Redressing”) which consist in hiding or disguising an user interface element from a site you trust (e.g. the “Send” button of your webmail site or a pre-configured “Donate” Paypal button) in a way which leads you to click it without knowledge of what you’re exactly doing. In the impressive proof of concept by RSnake and Jeremiah, you clicked anywhere in their apparently innocuous page, believing you were doing nothing dangerous, but in reality you were activating your microphone and/or your webcam for Flash access, allowing the remote attacker to spy on you instantaneously.</p>
</blockquote>
<blockquote>
<p>More in general, an attacker can frame a portion of a certain web page you trust inside a different page under his control, decontextualizing it or making it transparent: this way he can easily trick you into interacting with it, and you end to perform a financial transaction or allow him special permissions, without remotely suspecting that something evil is going on.</p>
</blockquote>
<blockquote>
<p>If JavaScript is allowed on the malicious site, this becomes much easier because the invisible target page can be automatically positioned exactly under your mouse pointer, so anywhere you clicks the evildoer wins. However this attack can work even without JavaScript being allowed: the attacker just needs to trick you into clicking on a seemingly innocuous link or button.</p>
</blockquote>
<blockquote>
<p>Every web browser is affected, because this attack doesn’t rely on any vulnerability or bug which might be fixed overnight: instead, it exploits very basic and standard web features which are implemented everywhere and are unlikely to be removed any time soon.</p>
</blockquote>
<p>These recommendations (and those you vetted further above) could be added to a “Safe Tor Browser Settings and Use” section in the security guide. The guides could probably be all re-worked, but getting around to the Quick-Start guide is probably a higher priority.</p>
<p>Of interest, have you noticed the hardened Tor Browser privacy slider on first run states “You have unusual customized settings” and does not let you change the low-medium-high setting, unless you first select the button to “reset to default”?</p>
<p>I wonder if this is changing any standard Whonix changes and could possibly be a security/privacy risk if users revert to ‘standard’ TBB settings in the first instance… it’s worth investigating the differences via the ‘user set’ preferences in about:config changes with TBB hardened (not accepting this change) &amp; TBB hardened (accepting this change).</p>
<p>Most importantly, the changes avoiding stacked tor do not seem to be affected (I checked - the relevant Whonix string is there for both).</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/entr0py'><span itemprop='name'>entr0py</span></a>
            
              split this topic 
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-08T18:46:15Z' class='post-time'>
                December 8, 2016,  6:46pm
              </time>
              <meta itemprop='dateModified' content='2016-12-08T18:46:15Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>13 posts were split to a new topic: <a href="../../onionizing-qubes-whonix-repositories/3265.html">Onionizing Qubes-Whonix Repositories</a></p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../onionizing-qubes-whonix-repositories/3265/2.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../onionizing-qubes-whonix-repositories/3265/2.html'>
                      <span itemprop='name'>Onionizing Qubes-Whonix Repositories</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-06T14:42:58Z' class='post-time'>
                December 6, 2016,  2:42pm
              </time>
              <meta itemprop='dateModified' content='2016-12-06T14:42:58Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Talking about .onions we could probably also add:</p>
<ul>
<li>Change the default settings for the Tor Browser search bar to reflect the preference for “DuckDuckGoOnion Search”</li>
</ul>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-06T15:32:08Z' class='post-time'>
                December 6, 2016,  3:32pm
              </time>
              <meta itemprop='dateModified' content='2016-12-06T15:32:08Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="9" data-topic="3221" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Talking about .onions we could probably also add:</p>
<p>Change the default settings for the Tor Browser search bar to reflect the preference for “DuckDuckGoOnion Search”</p>
</blockquote>
</aside>
<p>It’s an interesting idea, but we need to figure out first why that is not the upstream TBB default. And open a ticket against TBB if not already existing.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-08T04:51:53Z' class='post-time'>
                December 8, 2016,  4:51am
              </time>
              <meta itemprop='dateModified' content='2016-12-08T04:51:53Z'>
          <span itemprop='position'>#21</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Re: DuckDuckGoOnion -&gt; I recall reading somewhere they didn’t set it by default due to concerns over the entire Tor Browser population overloading it. But no technical reason that I can remember.</p>
<p>Other possible additions:</p>
<ul>
<li>Using AEM (Anti-Evil Maid) by default where users have a TPM (trusted platform module) ***</li>
<li>Setting passwords for Whonix  templates by default (?) ****</li>
<li>Installing later (‘unstable’) kernel versions in dom0 where possible *****</li>
</ul>
<p>*** Is this stable enough for users? See <a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/2155">https://github.com/QubesOS/qubes-issues/issues/2155</a></p>
<p>The rationale for this is that BIOS changes can be detected, and this is also possible by remote attackers according to Qubes threads. See also <a href="../../../../external.html?link=https://www.qubes-os.org/doc/anti-evil-maid/">https://www.qubes-os.org/doc/anti-evil-maid/</a> and <a href="../../../../external.html?link=https://theinvisiblethings.blogspot.de/2011/09/anti-evil-maid.html">https://theinvisiblethings.blogspot.de/2011/09/anti-evil-maid.html</a></p>
<p>**** Marek seems to be of the opinion that VM exploit = game over, but I’m not sure whether Whonix shares this opinion i.e. script-kiddies may be frustrated by this change for example.</p>
<p>***** There is a real possibility of making your entire system unbootable or unusable (been there). However, as the kernel hardening project is mainlining various GrSec elements over time, there is significant protections available between the stable (4.4.X) and unstable (4.8.X) versions. See Kees Cook blog for further information on what has happened since 4.5 -&gt; <a href="../../../../external.html?link=https://outflux.net/blog/">https://outflux.net/blog/</a></p>
<p>Also, Dirty Cow is patched in later kernel versions, but standard users are still affected using the 4.4.X series.</p>
<p>For example benefits of later kernels see below.</p>
<p><strong>In 4.8 series:</strong></p>
<blockquote>
<p>SLUB freelist ASLR</p>
</blockquote>
<blockquote>
<p>x86_64 KASLR text base offset physical/virtual decoupling</p>
</blockquote>
<blockquote>
<p>x86_64 KASLR memory base offset</p>
</blockquote>
<blockquote>
<p>x86_64 KASLR with hibernation</p>
</blockquote>
<blockquote>
<p>gcc plugin infrastructure</p>
</blockquote>
<blockquote>
<p>hardened usercopy</p>
</blockquote>
<blockquote>
<p>seccomp reordered after ptrace</p>
</blockquote>
<p><strong>In 4.7:</strong></p>
<blockquote>
<p>KASLR text base offset for MIPS</p>
</blockquote>
<blockquote>
<p>SLAB freelist ASLR</p>
</blockquote>
<blockquote>
<p>eBPF JIT constant blinding</p>
</blockquote>
<blockquote>
<p>fix brk ASLR weakness on arm64 compat</p>
</blockquote>
<blockquote>
<p>LoadPin LSM</p>
</blockquote>
<p><strong>In 4.6:</strong></p>
<blockquote>
<p>seccomp support for parisc</p>
</blockquote>
<blockquote>
<p>x86 32-bit mmap ASLR vs unlimited stack fixed</p>
</blockquote>
<blockquote>
<p>x86 execute-only memory</p>
</blockquote>
<blockquote>
<p>CONFIG_DEBUG_RODATA enabled by default on arm and arm64, and mandatory on x86</p>
</blockquote>
<blockquote>
<p>arm64 KASLR text base offset</p>
</blockquote>
<blockquote>
<p>zero-poison after free</p>
</blockquote>
<blockquote>
<p>read-only after init</p>
</blockquote>
<p><strong>In 4.5:</strong></p>
<blockquote>
<p>CONFIG_IO_STRICT_DEVMEM</p>
</blockquote>
<blockquote>
<p>ptrace fsuid checking</p>
</blockquote>
<blockquote>
<p>ASLR entropy sysctl</p>
</blockquote>
<blockquote>
<p>strict sysctl writes</p>
</blockquote>
<blockquote>
<p>seccomp UM support</p>
</blockquote>
<blockquote>
<p>seccomp NNP vs TSYNC fix</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-10T08:32:20Z' class='post-time'>
                December 10, 2016,  8:32am
              </time>
              <meta itemprop='dateModified' content='2016-12-10T08:32:20Z'>
          <span itemprop='position'>#22</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The qvm-backup key derivation/management (backup encryption) is reported to be insecure. See here:</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/971" target="_blank" rel="nofollow noopener">github.com/QubesOS/qubes-issues</a>
  </header>
  <article class="onebox-body">
    <a href="../../../../external.html?link=https://github.com/andrewdavidwong" rel="nofollow noopener">
<img src="../../../../external.html?link=https://avatars1.githubusercontent.com/u/10417133?v=2&amp;s=96" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/971" target="_blank" rel="nofollow noopener">Issue: Improve qvm-backup key derivation/management</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="../../../../external.html?link=https://github.com/andrewdavidwong" target="_blank" rel="nofollow noopener">andrewdavidwong</a>
	on <a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/971" target="_blank" rel="nofollow noopener">2015-04-26</a>
	</div>
	<div class="user">
	closed by <a href="../../../../external.html?link=https://github.com/marmarek" target="_blank" rel="nofollow noopener">marmarek</a>
	on <a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/971" target="_blank" rel="nofollow noopener">2017-05-12</a>
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">See:
https://groups.google.com/d/msg/qubes-devel/CZ7WRwLXcnk/u_rZPoVxL5IJ</pre>

<div class="labels">
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">C: core</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">P: major</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">crypto</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">enhancement</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">help wanted</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">release-notes</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">security</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>The technical reason is:</p>
<p><a href="../../../../external.html?link=https://bqp.io/qubes-backup-encryption-added-to-crackstation.html" class="onebox" target="_blank">https://bqp.io/qubes-backup-encryption-added-to-crackstation.html</a></p>
<blockquote>
<p>I’ve added Qubes OS Version 3’s backup encryption to my online password cracking service, CrackStation. It was possible to do this because Qubes’ backup encryption does not correctly salt the backup encryption password.</p>
</blockquote>
<blockquote>
<p>To crack a Qubes OS backup password, follow the first steps of these instructions to extract the contents of the backup. Copy and paste the contents of backup-header.hmac into the form on CrackStation’s homepage. If the password is in CrackStation’s dictionary, and the Qubes user used the default backup settings, it will find the password in its lookup table, and return it to you.</p>
</blockquote>
<blockquote>
<p>…</p>
</blockquote>
<blockquote>
<p><strong>Technical Details</strong></p>
</blockquote>
<blockquote>
<p>The contents of backup-header.hmac is the output of the command openssl dgst -sha512 -hmac ‘’ backup-header. This computes the HMAC-SHA512 of the contents of the backup-header file using the password as the HMAC key. By default, the contents of backup-header is version=3\nhmac-algorithm=SHA512\ncrypto-algorithm=aes-256-cbc\nencrypted=True\ncompressed=False\n. There’s no salt involved in the computation of this HMAC, so if the user has left the Qubes backup settings as their defaults, the HMAC of this file will have been computed in exactly the same way as the HMACs in CrackStation’s hash database. That’s why a simple binary search lookup of the hash in the database can quickly reverse the hash into its corresponding password.</p>
</blockquote>
<p>Thus, until this issue is sorted in Qubes 4.0, Qubes-Whonix users should probably use the following work-around for hardening purposes:</p>
<ul>
<li>Store Qubes-encrypted backups on a separate back-up disk that is already encrypted with LUKS</li>
</ul>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/adw'><span itemprop='name'>adw</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-11T05:11:48Z' class='post-time'>
                December 11, 2016,  5:11am
              </time>
              <meta itemprop='dateModified' content='2016-12-11T05:11:48Z'>
          <span itemprop='position'>#23</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="22" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>The qvm-backup key derivation/management (backup encryption) is reported to be insecure.</p>
</blockquote>
</aside>
<p>“Insecure” is not quite accurate. The problem (as partially described by the quotation) is that we rely on OpenSSL’s encryption function, which uses a weak key derivation scheme (basically just a single round of <code>md5</code>). The backup system is secure as long as you use a <strong>high-entropy passphrase</strong>. Since you should be doing so anyway, this issue isn’t something that should necessary stop you from using <code>qvm-backup</code>. (I’m the one who originally reported this issue, and I’ve continued to use it without interruption.)</p>
<aside class="quote" data-post="22" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Thus, until this issue is sorted in Qubes 4.0, Qubes-Whonix users should probably use the following work-around for hardening purposes:</p>
<ul>
<li>Store Qubes-encrypted backups on a separate back-up disk that is already encrypted with LUKS</li>
</ul>
</blockquote>
</aside>
<p>Yes, this is a good idea and won’t hurt. (I was doing this even before finding out about the weak key derivation scheme issue.) The only problem is that it doesn’t really work for offsite-backups.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-11T08:11:19Z' class='post-time'>
                December 11, 2016,  8:11am
              </time>
              <meta itemprop='dateModified' content='2016-12-11T08:11:19Z'>
          <span itemprop='position'>#24</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Noted.</p>
<p>The recommendation could instead read:</p>
<ul>
<li>Qubes users must have a sufficiently long (high-entropy) passphrase to store encrypted back-ups due to OpenSSL’s weak key derivation scheme, which relies on a single round of md5. Failing this, another solution is to store encrypted backups on a separate back-up disk that is already encrypted with LUKS.</li>
</ul>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-21T04:34:31Z' class='post-time'>
                December 21, 2016,  4:34am
              </time>
              <meta itemprop='dateModified' content='2016-12-21T13:31:22Z'>
          <span itemprop='position'>#25</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/entr0py">@entr0py</a></p>
<p>Do you mind cutting and pasting your sources.list (.onions) which works, so that I can edit the wiki somewhere to reflect the correct sources for those wishing to harden their Qubes-Whonix installation?</p>
<p>I’m a little confused which ones we are pointing to and whether it is just tor:// or tor + http:// - what else is new <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Reflecting on what we have covered so far, a future wiki entry might look something like that below (with links to relevant wiki entries/stubs). It is better to have it in one place, so users have a quick reference and don’t have to search everywhere for this information:</p>
<blockquote>
<p>Qubes-Whonix users can achieve significant hardening of their system by completing a number of additional steps after installation of the base system.</p>
</blockquote>
<blockquote>
<p>Successful completion of these steps below is dependent upon the user’s skill level and available hardware. Applicable steps are marked with ‘easy’, ‘medium’ or ‘difficult’ tags to reflect this:</p>
</blockquote>
<blockquote>
<ul>
<li>Default the Debian mirrors in sources.list to available .onions (easy);</li>
<li>Install all available apparmor profiles in the Whonix-Workstation and Whonix-Gateway TemplateVMs (easy);</li>
<li>Enable seccomp in the Whonix-Gateway TemplateVM torrc file (easy);</li>
<li>Use the hardened (alpha) Tor Browser series to resist fingerprinting and have additional memory protections (easy);</li>
<li>Use the (alpha) Tor process sandbox to restrict exploitation opportunities (difficult - not yet implemented in Whonix; requires sandbox compilation - <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a>, this requires a wiki stub somewhere);</li>
<li>Implement MAC spoofing for ethernet and/or wi-fi via Qubes user documentation (medium);</li>
<li>Use all instances of the Whonix-Workstation in a Whonix-Workstation DisposableVM - preferably uncustomized to resist fingerprinting (medium);</li>
<li>Implement GRSEC templates for Fedora, Debian and Whonix templates in the Qubes system (difficult; only Debian currently available - <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a>, we need a GrSec stub somewhere in the wiki for future copying of all steps);</li>
<li>Tweak the Tor Browser to provide ClearClick protections, run the security slider in the highest position, restrict Javascript uniformly, and default to .onion searches via DuckDuckGo (easy);</li>
<li>Store all login credentials and passwords in an offline vault VM (preferably in a password manager), and cut and and paste into the Tor Browser when required (easy);</li>
<li>Never type directly into the Tor Browser to resist typing profiling (easy);</li>
<li>Install newer Tor versions via Whonix config settings i.e. jessie-proposed-updates (easy);</li>
<li>Install latest versions of the Linux kernel available to benefit from mainlined kernel hardening (easy);</li>
<li>Use AEM (anti-evil-maid) in Qubes, in combination with a Trusted Platform Module (medium);</li>
<li>Store encrypted Qubes backups with a sufficiently long (high-entropy) passphrase due to OpenSSL’s weak key derivation scheme, which relies on a single round of md5 or store encrypted backups on a separate back-up disk that is already encrypted with LUKS (easy);</li>
<li>Install Qubes-Whonix with a sys-usb template to provide protection from malicious compromise of dom0. This requires available USB controllers and, in a desktop configuration, available PS/2 ports and adapters for the keyboard and mouse (medium).</li>
</ul>
</blockquote>
<p>What have I missed? <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/entr0py'><span itemprop='name'>entr0py</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-21T06:17:36Z' class='post-time'>
                December 21, 2016,  6:17am
              </time>
              <meta itemprop='dateModified' content='2016-12-21T17:36:46Z'>
          <span itemprop='position'>#26</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="25" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Do you mind cutting and pasting your sources.list (.onions) which works, so that I can edit the wiki somewhere to reflect the correct sources for those wishing to harden their Qubes-Whonix installation?</p>
</blockquote>
</aside>
<p>These are non-Qubes-Whonix specific so would be good if others could see them too.</p>
<pre><code class="lang-auto">#### Debian onion mirrors

# deb http://ftp.debian.org/debian jessie main contrib non-free
deb http://vwakviie2ienjx6t.onion/debian jessie main contrib non-free

# deb http://security.debian.org jessie/updates main contrib non-free
deb http://sgvtcaew4bxjd7ln.onion jessie/updates main contrib non-free

# (optional - Backports)
# deb http://ftp.debian.org/debian jessie-backports main contrib non-free
deb http://vwakviie2ienjx6t.onion/debian jessie-backports main contrib non-free

#### Whonix onion mirrors

# deb http://deb.whonix.org jessie main
deb http://deb.kkkkkkkkkk63ava6.onion jessie main

#### Tor Project mirrors

# (optional - for direct Tor package)
# deb http://deb.torproject.org/torproject.org jessie main
deb http://sdscoq7snqtznauu.onion/torproject.org jessie main

#### Qubes - still waiting

deb [arch=amd64] http://deb.qubes-os.org/r3.1/vm jessie main
</code></pre>
<aside class="quote" data-post="25" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>I’m a little confused which ones we are pointing to and whether it is just tor:// or tor + http://</p>
</blockquote>
</aside>
<p>Just http. Because apt-get is uwt-wrapped and gets sent straight to the Gateway. No <code>apt-transport-tor</code>.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-21T15:19:23Z' class='post-time'>
                December 21, 2016,  3:19pm
              </time>
              <meta itemprop='dateModified' content='2016-12-21T15:19:23Z'>
          <span itemprop='position'>#27</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="25" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Use the (alpha) Tor process sandbox to restrict exploitation opportunities (difficult - not yet implemented in Whonix; requires sandbox compilation - <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a>, this requires a wiki stub somewhere);</p>
</blockquote>
</aside>
<p>Just now created:<br>
<a href="../../../../external.html?link=https://www.whonix.org/wiki/Tor_Browser#Tor_Browser_Sandboxed">https://www.whonix.org/wiki/Tor_Browser#Tor_Browser_Sandboxed</a></p>
<aside class="quote" data-post="25" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Implement GRSEC templates for Fedora, Debian and Whonix templates in the Qubes system (difficult; only Debian currently available - <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a>, we need a GrSec stub somewhere in the wiki for future copying of all steps);</p>
</blockquote>
</aside>
<p>That belongs to <a href="../../../../external.html?link=https://www.whonix.org/wiki/Grsecurity">https://www.whonix.org/wiki/Grsecurity</a>. Do these instructions work in KVM? If so, the existing page becomes chapter <code>KVM</code>. //cc <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/hulahoop">@HulaHoop</a></p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-21T16:03:01Z' class='post-time'>
                December 21, 2016,  4:03pm
              </time>
              <meta itemprop='dateModified' content='2016-12-25T10:50:13Z'>
          <span itemprop='position'>#28</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Suggested entry below (Security Guide section) for the benefit of both Qubes and Non-Qubes-Whonix users. Tested and now working on my system for both templates.</p>
<blockquote>
<p><strong>Onionizing Whonix and Debian Repositories</strong></p>
</blockquote>
<blockquote>
<p>When Whonix, Debian and Qubes packages are installed or updated, default settings point to repositories with a http:// URI.[1][2] However, experimental .onion support is already available for both Whonix and Debian packages, with Qubes .onion mirrors planned for the near-term.[3][4]</p>
</blockquote>
<blockquote>
<p>In order to install or update with the utmost caution, users may consider manually editing their sources.list to point to the Whonix and Debian .onion mirrors. There are several security and privacy benefits of this approach:[5]</p>
</blockquote>
<blockquote>
<ul>
<li>The user cannot be uniquely targeted for malicious updates (attackers are forced to attack everyone requesting the update);</li>
<li>The package repository, or observers watching it, can’t track what programs you’ve installed;</li>
<li>The ISP cannot easily learn what packages you fetch; and</li>
<li>End-to-end authentification and encryption provides protection against man-in-the-middle attacks e.g. version downgrade attacks.</li>
</ul>
</blockquote>
<blockquote>
<p>To use the .onion mirrors, it is necessary to change the whonix.list and debian.list files in the /etc/apt/sources.list.d directory in both the Whonix-Workstation and Whonix-Gateway TemplateVMs.[6]</p>
</blockquote>
<blockquote>
<p><strong>(1)</strong> In the TemplateVM, open the Debian sources file in an editor with root rights.</p>
</blockquote>
<blockquote>
<p>If you are using a graphical Whonix or Qubes-Whonix, run:</p>
</blockquote>
<blockquote>
<blockquote>
<p>kdesudo kwrite /etc/apt/sources.list.d/debian.list</p>
</blockquote>
</blockquote>
<blockquote>
<p>If you are using a terminal-only Whonix, run:</p>
</blockquote>
<blockquote>
<blockquote>
<p>sudo nano /etc/apt/sources.list.d/debian.list</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>(2)</strong> Cut and paste the following .onion mirrors and comment out (#) the corresponding http repositories noted in bold:</p>
</blockquote>
<blockquote>
<blockquote>
<p><strong><span class="hashtag">#deb</span> <a href="../../../../external.html?link=http://ftp.debian.org/debian">http://ftp.debian.org/debian</a> jessie main contrib non-free</strong><br>
deb <a href="../../../../external.html?link=http://vwakviie2ienjx6t.onion/debian">http://vwakviie2ienjx6t.onion/debian</a> jessie main contrib non-free</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p><strong># deb <a href="../../../../external.html?link=http://security.debian.org/">http://security.debian.org</a> jessie/updates main contrib non-free</strong><br>
deb <a href="../../../../external.html?link=http://sgvtcaew4bxjd7ln.onion/">http://sgvtcaew4bxjd7ln.onion</a> jessie/updates main contrib non-free</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>(Optional - Backports)</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p><strong><span class="hashtag">#deb</span> <a href="../../../../external.html?link=http://ftp.debian.org/debian">http://ftp.debian.org/debian</a> jessie-backports main contrib non-free</strong><br>
deb <a href="../../../../external.html?link=http://vwakviie2ienjx6t.onion/debian">http://vwakviie2ienjx6t.onion/debian</a> jessie-backports main contrib non-free</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>(3)</strong> Save the new debian.list file</p>
</blockquote>
<blockquote>
<p><strong>(4)</strong> Point to the Whonix APT Repository .onion mirror:</p>
</blockquote>
<blockquote>
<blockquote>
<p>sudo whonix_repository --baseuri <a href="../../../../external.html?link=http://deb.kkkkkkkkkk63ava6.onion/">http://deb.kkkkkkkkkk63ava6.onion</a> --enable --repository stable</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>Note:</strong> Users have four preferences available for Whonix packages: stable, stable-proposed-updates, testers and developers. Change the entry above to reflect this preference.[7]</p>
</blockquote>
<blockquote>
<p><strong>(5)</strong> Check the .onions are correct and functional in your Whonix system:</p>
</blockquote>
<blockquote>
<blockquote>
<p>sudo apt-get update &amp;&amp; sudo apt-get dist-upgrade</p>
</blockquote>
</blockquote>
<blockquote>
<p>Remember to repeat steps 1-5 for both the Whonix-Workstation and Whonix-Gateway TemplateVMs.[8]</p>
</blockquote>
<blockquote>
<p><strong>(6)</strong> OPTIONAL testers/paranoid users step - create an onionized torproject.list:</p>
</blockquote>
<blockquote>
<p>If you are using a graphical Whonix or Qubes-Whonix, run:</p>
</blockquote>
<blockquote>
<blockquote>
<p>kdesudo kwrite /etc/apt/sources.list.d/torproject.list</p>
</blockquote>
</blockquote>
<blockquote>
<p>If you are using a terminal-only Whonix, run:</p>
</blockquote>
<blockquote>
<blockquote>
<p>sudo nano /etc/apt/sources.list.d/torproject.list</p>
</blockquote>
</blockquote>
<blockquote>
<p>Cut and paste the following text and comment out (#) the corresponding http repository noted in bold::</p>
</blockquote>
<blockquote>
<blockquote>
<p><strong><span class="hashtag">#deb</span> <a href="../../../../external.html?link=http://deb.torproject.org/torproject.org">http://deb.torproject.org/torproject.org</a> jessie main</strong><br>
deb <a href="../../../../external.html?link=http://sdscoq7snqtznauu.onion/torproject.org">http://sdscoq7snqtznauu.onion/torproject.org</a> jessie main</p>
</blockquote>
</blockquote>
<blockquote>
<p>Save and exit.</p>
</blockquote>
<blockquote>
<p>Footnotes:</p>
</blockquote>
<blockquote>
<p>[1] <a href="../../../../external.html?link=https://www.whonix.org/wiki/Whonix-APT-Repository#Repository_Location_URI">https://www.whonix.org/wiki/Whonix-APT-Repository#Repository_Location_URI</a><br>
[2] Whonix 14 will prefer .onion repositories by default, even when adding third-party resources<br>
[3] <a href="../../onionizing-qubes-whonix-repositories/3265.html">Onionizing Qubes-Whonix Repositories</a><br>
[4] <a href="../../../../external.html?link=https://www.whonix.org/wiki/Install_Software#How_to_install_or_update_with_most_caution.3F">https://www.whonix.org/wiki/Install_Software#How_to_install_or_update_with_most_caution.3F</a><br>
[5] <a href="../../../../external.html?link=https://blog.torproject.org/blog/tor-heart-apt-transport-tor-and-debian-onions">https://blog.torproject.org/blog/tor-heart-apt-transport-tor-and-debian-onions</a><br>
[6] tor:// or tor:// + http:// entries are not required in Whonix because apt is uwt-wrapped.<br>
[7] <a href="../../../../external.html?link=https://www.whonix.org/wiki/Whonix-APT-Repository#Whonix_APT_Repository_Overview">https://www.whonix.org/wiki/Whonix-APT-Repository#Whonix_APT_Repository_Overview</a><br>
[8] Qubes users can repeat these steps in their Debian-8 TemplateVM to onionize installations and updates.</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-21T16:43:00Z' class='post-time'>
                December 21, 2016,  4:43pm
              </time>
              <meta itemprop='dateModified' content='2016-12-22T00:45:49Z'>
          <span itemprop='position'>#29</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>torjunkie:</p>
<blockquote>
<p>Tested on my system. Working, except for a 404 error on the Whonix server:</p>
<blockquote>
<p>Failed to fetch <a href="../../../../external.html?link=http://kkkkkkkkkk63ava6.onion/dists/jessie/main/binary-amd64/Packages">http://kkkkkkkkkk63ava6.onion/dists/jessie/main/binary-amd64/Packages</a> 404 Not Found<br>
I think we can also add these .onions entries to a new user.list, instead of manually changing the debian.list and whonix.list so i.e so they are not later written over by packages updates?</p>
</blockquote>
</blockquote>
<p>The canonical way is:</p>
<pre><code>sudo whonix_repository --baseuri http://deb.kkkkkkkkkk63ava6.onion --enable --repository stable
</code></pre>
<p>Won’t ever be automatically overwritten.</p>
<p>[With a small exception, if the onion ever changes (upcoming strong<br>
hidden services keys) we’ll <code>sed</code> replace the old to the new onion<br>
trough <code>whonix-legacy</code> package.]</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/entr0py'><span itemprop='name'>entr0py</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-21T17:35:16Z' class='post-time'>
                December 21, 2016,  5:35pm
              </time>
              <meta itemprop='dateModified' content='2016-12-21T17:35:16Z'>
          <span itemprop='position'>#30</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="28" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Tested on my system. Working, except for a 404 error on the Whonix server:</p>
<blockquote>
<p>Failed to fetch <a href="../../../../external.html?link=http://kkkkkkkkkk63ava6.onion/dists/jessie/main/binary-amd64/Packages">http://kkkkkkkkkk63ava6.onion/dists/jessie/main/binary-amd64/Packages</a> 404 Not Found</p>
</blockquote>
</blockquote>
</aside>
<p>Wow, really sloppy. Sorry.</p>
<p><code>deb http://deb.kkkkkkkkkk63ava6.onion jessie main</code> vs<br>
<code>deb http://kkkkkkkkkk63ava6.onion jessie main</code></p>
<aside class="quote" data-post="28" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>I think we can also add these .onions entries to a new user.list, instead of manually changing the debian.list and whonix.list so i.e so they are not later written over by packages updates?</p>
</blockquote>
</aside>
<p>Whonix 14 ticket: <a href="../../../../external.html?link=https://phabricator.whonix.org/T399">https://phabricator.whonix.org/T399</a></p>
<hr>
<aside class="quote" data-post="28" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/entr0py">@entr0py</a> please check this is okay.</p>
</blockquote>
</aside>
<p>Looks good to me. Thanks!</p>
<p>[I need a wiki for the wiki. I know there are templates for <span class="hashtag">#1</span> and <span class="hashtag">#2</span> that generalize instructions for qubes-whonix &amp; non-qubes-whonix. I don’t know where to find them though.]</p>
<blockquote>
<p><strong>(1)</strong> In the TemplateVM, open a terminal with Konsole.</p>
</blockquote>
<blockquote>
<p><strong>(2)</strong> Edit the Debian sources file:</p>
</blockquote>
<aside class="quote" data-post="28" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>[6] '<span class="bbcode-s">Credit to entr0py for this information.</span></p>
</blockquote>
</aside>
<p>[6] <a href="../../debian-starts-onionizing/2797/11.html">Debian starts Onionizing</a></p>
<p>Community effort. Better to link to discussions I think - unless attributing to a well-known expert. [Plus I don’t want any blame.] <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-22T00:45:30Z' class='post-time'>
                December 22, 2016, 12:45am
              </time>
              <meta itemprop='dateModified' content='2016-12-22T00:45:30Z'>
          <span itemprop='position'>#31</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="30" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/e/8dc957/40.png" class="avatar"> entr0py:</div>
<blockquote>
<p>[I need a wiki for the wiki. I know there are templates for <span class="hashtag">#1</span> and <span class="hashtag">#2</span> that generalize instructions for qubes-whonix &amp; non-qubes-whonix. I don’t know where to find them though.]</p>
</blockquote>
</aside>
<p>Here is a list of all templates (since we have not categorized them):<br>
<a href="../../../../external.html?link=https://www.whonix.org/wiki/Special:UncategorizedTemplates" class="onebox" target="_blank">https://www.whonix.org/wiki/Special:UncategorizedTemplates</a></p>
<p>(You can find such special pages through <a href="../../../../external.html?link=https://www.whonix.org/wiki/Special:SpecialPages.)">https://www.whonix.org/wiki/Special:SpecialPages.)</a></p>
<p>If you like to create any new templates, please just tell me the template page names and I create them.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-22T00:56:48Z' class='post-time'>
                December 22, 2016, 12:56am
              </time>
              <meta itemprop='dateModified' content='2016-12-22T00:56:48Z'>
          <span itemprop='position'>#32</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="25" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Qubes-Whonix users can achieve significant hardening of their system by completing a number of additional steps after installation of the base system.</p>
</blockquote>
</aside>
<p>(Many are general, non-Qubes specific.)</p>
<aside class="quote" data-post="25" data-topic="3221">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Successful completion of these steps below is dependent upon the user’s skill level and available hardware. Applicable steps are marked with ‘easy’, ‘medium’ or ‘difficult’ tags to reflect this:</p>
</blockquote>
</aside>
<p>I like the ordering in various difficulties.</p>
<p><a href="../../../../external.html?link=https://www.whonix.org/wiki/Security_Guide">https://www.whonix.org/wiki/Security_Guide</a> is supposed to contain only items being ‘easy’ and perhaps ‘medium’.</p>
<p><a href="../../../../external.html?link=https://www.whonix.org/wiki/Advanced_Security_Guide">https://www.whonix.org/wiki/Advanced_Security_Guide</a> is supposed to contain only ‘difficult’ items.</p>
<p>Perhaps Security_Guide needs a face lift? Perhaps remove all non-actionable items? I.t. remove all items that are just knowledge. Move that elsewhere, to where? And then have only ‘easy’ and ‘medium’ difficult actionable items on that page? [Plus links to other actionable items that have a separate page such as grsecurity.]</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3221.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-12-22T03:51:27Z' class='post-time'>
                December 22, 2016,  3:51am
              </time>
              <meta itemprop='dateModified' content='2016-12-22T03:56:33Z'>
          <span itemprop='position'>#33</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks!</p>
<p>Works with entr0py’s amended .onion mirror link, as does the canonical method for enabling the Whonix repository. <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/entr0py">@entr0py</a> does the Tor project .onion mirror belong in the Debian sources file?</p>
<p>See edits above. If this is okay, I will insert it in the security guide somewhere.</p>
<p>Patrick - I agree re: security docs. If entr0py and Ego have the quick-start guide in hand, then I hope to take this on as a mini-project. It is one of the most important sections of the wiki.</p>
<p>My other main interests are getting the Tor sandboxing stuff working (when you have the time) and helping to test and document this, and seeing that GRSEC documentation and testing works in Qubes-Whonix. Most of this will hopefully just be cut and pasting from coldhacka’s blog with the appropriate attribution.</p>
        </div>

        <meta itemprop='headline' content='Hardening Qubes-Whonix'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../32214658.html?page=2">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
