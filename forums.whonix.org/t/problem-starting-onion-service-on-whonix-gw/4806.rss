<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Problem Starting Onion Service on Whonix-gw</title>
    <link>http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806</link>
    <description>Qubes 4.0rc4
i have a StandaloneVM that is a clone of whonix-gw
Tor version 0.3.2.9
Linux host 4.14.13-3.pvops.qubes.x86_64

I follow the instructions here:
https://www.whonix.org/wiki/Hidden_Services#Hidden_Webserver

but  running

&gt; sudo cat /var/lib/tor/hidden_service/hostname

returns &quot;No such file or directory&quot;

I&#39;ve set up hidden services on Whonix before and i believe this was very straight forward. This is my first time attempting it in Qubes. Any suggestions appreciated.</description>
    <language>en</language>
    <lastBuildDate>Sun, 11 Feb 2018 11:06:11 +0000</lastBuildDate>
    <category>Qubes-Whonix</category>
    <atom:link href="http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Problem Starting Onion Service on Whonix-gw</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>Hi <code>mimp</code></p>
<blockquote></blockquote>
<pre><code>sudo iptables -I INPUT 5 -p tcp --dport 80 -m conntrack --ctstate NEW -j ACCEPT
</code></pre>
<p>But it isn’t clear to me if that is in the ws or the gw.</p>
<p>This is done in Whonix-Workstation (if you look just prior to <em>step 1: Install Server Software</em>)</p>
<blockquote>
<p>if someone can explain why that command is necessary that would be helpful.</p>
</blockquote>
<p>If you need an exception for a specific application you installed.</p>
          <p><a href="http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806/6</link>
        <pubDate>Sun, 11 Feb 2018 11:06:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4806-6</guid>
        <source url="http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806.rss">Problem Starting Onion Service on Whonix-gw</source>
      </item>
      <item>
        <title>Problem Starting Onion Service on Whonix-gw</title>
        <dc:creator><![CDATA[mimp]]></dc:creator>
        <description><![CDATA[
            <p>0brand,</p>
<p>Thanks so much for trying that for me. You are correct. I had “/var/log/tor” instead of “/var/lib/tor” so it kept reading correctly in my head. I changed it and now I"m getting a v3 address in /var/lib/tor/hidden_service/hostname</p>
<p>Solved!</p>
<p>Now I’ve just got to figure out the fire wall. For qubes the wiki says to do:</p>
<blockquote>
<p>sudo iptables -I INPUT 5 -p tcp --dport 80 -m conntrack --ctstate NEW -j ACCEPT</p>
</blockquote>
<p>But it isn’t clear to me if that is in the ws or the gw. I’m somewhat familiar with iptables, but if someone can explain why that command is necessary that would be helpful.</p>
<p>Thanks.</p>
          <p><a href="http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806/5</link>
        <pubDate>Fri, 09 Feb 2018 23:43:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4806-5</guid>
        <source url="http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806.rss">Problem Starting Onion Service on Whonix-gw</source>
      </item>
      <item>
        <title>Problem Starting Onion Service on Whonix-gw</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>Hi mimp</p>
<p>I configured a StandalonVM (whonix-gw) for v3 hidden service but was unable to reproduce your results. Could you have miss-typed <code>/var/lib/tor/hidden_service/</code> in your torrc?  Could you please post your torrc but make sure to redact any sensitive info.</p>
          <p><a href="http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806/4</link>
        <pubDate>Fri, 09 Feb 2018 22:59:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4806-4</guid>
        <source url="http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806.rss">Problem Starting Onion Service on Whonix-gw</source>
      </item>
      <item>
        <title>Problem Starting Onion Service on Whonix-gw</title>
        <dc:creator><![CDATA[mimp]]></dc:creator>
        <description><![CDATA[
            <p>I am trying to do this in a StandaloneVM that is a clone of whonix-gw and connected to sys-firewall. The output of these commands in the StandaloneVM appear to be the same as sys-whonix:</p>
<p>sys-whonix</p>
<blockquote>
<p>tor@default.service - Anonymizing overlay network for TCP<br>
Loaded: loaded (/lib/systemd/system/tor@default.service; static)<br>
Drop-In: /lib/systemd/system/tor@default.service.d<br>
└─30_qubes.conf, 40_qubes.conf<br>
Active: active (running) since Sun 2018-02-04 22:25:36 UTC; 4 days ago<br>
Process: 747 ExecReload=/bin/kill -HUP ${MAINPID} (code=exited, status=0/SUCCESS)<br>
Process: 879 ExecStartPre=/usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0 --verify-config (code=exited, status=0/SUCCESS)<br>
Process: 855 ExecStartPre=/usr/bin/install -Z -m 02755 -o debian-tor -g debian-tor -d /var/run/tor (code=exited, status=0/SUCCESS)<br>
Main PID: 910 (tor)<br>
CGroup: /system.slice/system-tor.slice/tor@default.service<br>
└─910 /usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0</p>
<p>Feb 09 16:11:47 host Tor[910]: You configured a non-loopback address ‘10.137.0.8:9182’ for SocksPort. This allows everybody… wanted.<br>
Feb 09 16:11:47 host Tor[910]: You configured a non-loopback address ‘10.137.0.8:9183’ for SocksPort. This allows everybody… wanted.<br>
Feb 09 16:11:47 host Tor[910]: You configured a non-loopback address ‘10.137.0.8:9184’ for SocksPort. This allows everybody… wanted.<br>
Feb 09 16:11:47 host Tor[910]: You configured a non-loopback address ‘10.137.0.8:9185’ for SocksPort. This allows everybody… wanted.<br>
Feb 09 16:11:47 host Tor[910]: You configured a non-loopback address ‘10.137.0.8:9186’ for SocksPort. This allows everybody… wanted.<br>
Feb 09 16:11:47 host Tor[910]: You configured a non-loopback address ‘10.137.0.8:9187’ for SocksPort. This allows everybody… wanted.<br>
Feb 09 16:11:47 host Tor[910]: You configured a non-loopback address ‘10.137.0.8:9188’ for SocksPort. This allows everybody… wanted.<br>
Feb 09 16:11:47 host Tor[910]: You configured a non-loopback address ‘10.137.0.8:9189’ for SocksPort. This allows everybody… wanted.<br>
Feb 09 16:11:47 host Tor[910]: You configured a non-loopback address ‘10.137.0.8:5300’ for DNSPort. This allows everybody o… wanted.<br>
Feb 09 16:11:47 host Tor[910]: You configured a non-loopback address ‘10.137.0.8:9040’ for TransPort. This allows everybody… wanted.<br>
Hint: Some lines were ellipsized, use -l to show in full.<br>
user@host:~$ sudo -u debian-tor tor --verify-config<br>
Feb 09 16:12:15.456 [notice] Tor 0.3.2.9 (git-64a719dd25a21acb) running on Linux with Libevent 2.0.21-stable, OpenSSL 1.0.1t, Zlib 1.2.8, Liblzma 5.1.0alpha, and Libzstd N/A.<br>
Feb 09 16:12:15.456 [notice] Tor can’t help you if you use it wrong! Learn how to be safe at <a href="https://www.torproject.org/download/download#warning" rel="nofollow noopener">https://www.torproject.org/download/download#warning</a><br>
Feb 09 16:12:15.456 [notice] Read configuration file “/etc/tor/torrc”.<br>
Configuration was valid</p>
</blockquote>
<p>StandaloneVM setup to run onion service v3:</p>
<blockquote>
<p>user@host:~$ sudo service tor@default status<br>
● tor@default.service - Anonymizing overlay network for TCP<br>
Loaded: loaded (/lib/systemd/system/tor@default.service; static)<br>
Drop-In: /lib/systemd/system/tor@default.service.d<br>
└─30_qubes.conf, 40_qubes.conf<br>
Active: active (running) since Fri 2018-02-09 16:14:41 UTC; 2min 45s ago<br>
Process: 2765 ExecReload=/bin/kill -HUP ${MAINPID} (code=exited, status=0/SUCCESS)<br>
Process: 857 ExecStartPre=/usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0 --verify-config (code=exited, status=0/SUCCESS)<br>
Process: 836 ExecStartPre=/usr/bin/install -Z -m 02755 -o debian-tor -g debian-tor -d /var/run/tor (code=exited, status=0/SUCCESS)<br>
Main PID: 960 (tor)<br>
CGroup: /system.slice/system-tor.slice/tor@default.service<br>
└─960 /usr/bin/tor --defaults-torrc /usr/share/tor/tor-…</p>
<p>Feb 09 16:14:51 host Tor[960]: You configured a non-loopback addr…<br>
Feb 09 16:14:51 host Tor[960]: You configured a non-loopback addr…<br>
Feb 09 16:14:51 host Tor[960]: You configured a non-loopback addr…<br>
Feb 09 16:14:51 host Tor[960]: You configured a non-loopback addr…<br>
Feb 09 16:14:51 host Tor[960]: You configured a non-loopback addr…<br>
Feb 09 16:14:51 host Tor[960]: You configured a non-loopback addr…<br>
Feb 09 16:14:51 host Tor[960]: You configured a non-loopback addr…<br>
Feb 09 16:14:51 host Tor[960]: New control connection opened from…<br>
Feb 09 16:14:52 host Tor[960]: New control connection opened from…<br>
Feb 09 16:14:52 host Tor[960]: New control connection opened from…<br>
Hint: Some lines were ellipsized, use -l to show in full.<br>
user@host:~$ sudo -u debian-tor tor --verify-config<br>
Feb 09 16:17:30.175 [notice] Tor 0.3.2.9 (git-64a719dd25a21acb) running on Linux with Libevent 2.0.21-stable, OpenSSL 1.0.1t, Zlib 1.2.8, Liblzma 5.1.0alpha, and Libzstd N/A.<br>
Feb 09 16:17:30.175 [notice] Tor can’t help you if you use it wrong! Learn how to be safe at <a href="https://www.torproject.org/download/download#warning" rel="nofollow noopener">https://www.torproject.org/download/download#warning</a><br>
Feb 09 16:17:30.175 [notice] Read configuration file “/etc/tor/torrc”.<br>
Configuration was valid</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806/3</link>
        <pubDate>Fri, 09 Feb 2018 16:26:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4806-3</guid>
        <source url="http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806.rss">Problem Starting Onion Service on Whonix-gw</source>
      </item>
      <item>
        <title>Problem Starting Onion Service on Whonix-gw</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>Hi <code>mimp</code></p>
<p>Can you post the output of these 3 commands in sys-whonix standalone konsole.</p>
<p><code>sudo service tor@default reload</code><br>
<code>sudo service tor@default status</code><br>
<code>sudo -u debian-tor tor --verify-config</code></p>
          <p><a href="http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806/2</link>
        <pubDate>Fri, 09 Feb 2018 11:14:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4806-2</guid>
        <source url="http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806.rss">Problem Starting Onion Service on Whonix-gw</source>
      </item>
      <item>
        <title>Problem Starting Onion Service on Whonix-gw</title>
        <dc:creator><![CDATA[mimp]]></dc:creator>
        <description><![CDATA[
            <p>Qubes 4.0rc4<br>
i have a StandaloneVM that is a clone of whonix-gw<br>
Tor version 0.3.2.9<br>
Linux host 4.14.13-3.pvops.qubes.x86_64</p>
<p>I follow the instructions here:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="" height="">
      <a href="https://www.whonix.org/wiki/Hidden_Services#Hidden_Webserver" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/480;"><img src="//forums.whonix.org/uploads/default/original/2X/6/66386429fa93df91059ecd416b28d098d0a75db8.jpg" class="thumbnail"></div>

<h3><a href="https://www.whonix.org/wiki/Hidden_Services#Hidden_Webserver" target="_blank" rel="nofollow noopener">Onion Services</a></h3>

<p>Anonymously host any server with Whonix and Tor onion services</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<p>but  running</p>
<blockquote>
<p>sudo cat /var/lib/tor/hidden_service/hostname</p>
</blockquote>
<p>returns “No such file or directory”</p>
<p>I’ve set up hidden services on Whonix before and i believe this was very straight forward. This is my first time attempting it in Qubes. Any suggestions appreciated.</p>
          <p><a href="http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806/1</link>
        <pubDate>Wed, 07 Feb 2018 04:36:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4806-1</guid>
        <source url="http://forums.whonix.org/t/problem-starting-onion-service-on-whonix-gw/4806.rss">Problem Starting Onion Service on Whonix-gw</source>
      </item>
  </channel>
</rss>
