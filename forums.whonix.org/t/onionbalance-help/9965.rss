<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>OnionBalance help</title>
    <link>http://forums.whonix.org/t/onionbalance-help/9965</link>
    <description>I am trying to setup onionbalance. I have a small vps (none whonix the ob frontend) and two dedicated servers each running KVM with whonix

Hidden service version 3 on both dedicated servers

I configured my vps (not whonix) to use as the front server and created my main onionbalance key, then i moved onto my whonix dedicated servers i needed to upgrade tor to the latest version which i did via the whonix wiki everything went great and my gateway now displays tor 0.4.3.6 running on Linux with Libevent 2.1.8-stable, OpenSSL 1.1.1d, Zlib 1.2.11, Liblzma 5.2.4, and Libzstd 1.3.8. this information displays after i run the tor - v command.


Using the onionbalance guide located here h**ps://onionbalance.readthedocs.io/en/latest/v3/tutorial-v3.html#step-3-configuring-the-backend-instances

I modified my torrc file.

HiddenServiceDir /var/lib/tor/hidden_service/
HiddenServicePort 80 10.152.152.11:80
HiddenServiceVersion 3
HiddenServiceOnionBalanceInstance 1

Then i reloaded tor and it fails to reload, the error displayed is:

 sudo systemctl --no-pager status tor@default
● tor@default.service - Anonymizing overlay network for TCP
   Loaded: loaded (/lib/systemd/system/tor@default.service; enabled-runtime; vendor preset: enabled)
  Drop-In: /lib/systemd/system/tor@default.service.d
           └─30_clean-torrc-d-on-reload.conf, 40_obfs4proxy-workaround.conf, 50_controlsocket-workaround.conf
   Active: reloading (reload) (Result: exit-code) since Sat 2020-07-18 19:01:59 UTC; 13s left
  Process: 757 ExecStartPre=/usr/bin/install -Z -m 02755 -o debian-tor -g debian-tor -d /run/tor (code=exited, status=0/SUCCESS)
  Process: 760 ExecStartPre=/usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0 --verify-config (code=exited, status=0/SUCCESS)
  Process: 833 ExecStart=/usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0 (code=exited, status=1/FAILURE)
  Process: 843 ExecStartPost=/bin/kill -HUP ${MAINPID} (code=exited, status=0/SUCCESS)
  Process: 2285 ExecReload=/bin/sh -c /usr/lib/anon-gw-anonymizer-config/torrc-d-cleaner &amp;&amp; /bin/kill -HUP ${MAINPID} (code=exited, status=0/SUCCESS)
 Main PID: 833 (code=exited, status=1/FAILURE)
    Tasks: 0 (limit: 1447)
   Memory: 17.7M
   CGroup: /system.slice/system-tor.slice/tor@default.service

Jul 18 19:01:59 host tor[833]: Jul 18 19:01:59.001 [notice] Opened HTTP tu…:9227
Jul 18 19:01:59 host tor[833]: Jul 18 19:01:59.001 [notice] Opening HTTP t…:9228
Jul 18 19:01:59 host tor[833]: Jul 18 19:01:59.001 [notice] Opened HTTP tu…:9228
Jul 18 19:01:59 host tor[833]: Jul 18 19:01:59.001 [notice] Opening HTTP t…:9229
Jul 18 19:01:59 host tor[833]: Jul 18 19:01:59.001 [notice] Opened HTTP tu…:9229
Jul 18 19:01:59 host systemd[1]: Started Anonymizing overlay network for TCP.
Jul 18 19:01:30 host systemd[1]: Reloading Anonymizing overlay network for TCP.
Jul 18 19:01:30 host sh[2285]: /usr/lib/anon-gw-anonymizer-config/torrc-d-…cess.
Jul 18 19:01:30 host systemd[1]: tor@default.service: Can&#39;t open PID file …ctory
Jul 18 19:01:30 host systemd[1]: tor@default.service: Main process exited,…ILURE
Hint: Some lines were ellipsized, use -l to show in full.
+ true 0
+ true &#39;Feel free to close this window.&#39;
+ sleep 86400

The version of tor i upgraded to supports onionbalance. Does anyone know why this error is happening and what can i do to resolve it?</description>
    <language>en</language>
    <lastBuildDate>Mon, 02 May 2022 13:15:46 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/onionbalance-help/9965.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>OnionBalance help</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="PrettyGoodPrivacy" data-post="11" data-topic="9965">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/p/e5b9ba/40.png" class="avatar"> PrettyGoodPrivacy:</div>
<blockquote>
<p>By the way could you find out or clarify if this is the case for OnionBalance without Whonix?</p>
</blockquote>
</aside>
<ul>
<li>What I can do: take upstream generic documentation and port it to Debian based Whonix.</li>
<li>What I cannot do: provide support for general OnionBalance questions which aren’t related to Debian/Whonix.</li>
</ul>
<p>I recommend redirecting such questions to upstream as per:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Unspecific">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Unspecific" target="_blank" rel="noopener" title="11:34AM - 26 January 2022">Whonix – 26 Jan 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:250/500;"><img src="https://www.whonix.org/w/images/7/74/Booster132.png" class="thumbnail" width="250" height="500"></div>

<h3><a href="https://www.whonix.org/wiki/Unspecific" target="_blank" rel="noopener">Information Booster might be Available!</a></h3>

  <p>Utilizing other resources to help solve questions/issues unspecific to Whonix ™.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="PrettyGoodPrivacy" data-post="11" data-topic="9965">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/p/e5b9ba/40.png" class="avatar"> PrettyGoodPrivacy:</div>
<blockquote>
<p>In this section Whonix-Workstation is not mentioned. Am I right that on the frontent Whonix instance a Whonix-Workstation is not needed and can be left out?</p>
</blockquote>
</aside>
<p>Indeed. Frontend Whonix doesn’t need Whonix-Workstation. Will add a note now to point that out.</p>
          <p><a href="http://forums.whonix.org/t/onionbalance-help/9965/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/onionbalance-help/9965/12</link>
        <pubDate>Mon, 02 May 2022 13:15:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9965-12</guid>
        <source url="http://forums.whonix.org/t/onionbalance-help/9965.rss">OnionBalance help</source>
      </item>
      <item>
        <title>OnionBalance help</title>
        <dc:creator><![CDATA[PrettyGoodPrivacy]]></dc:creator>
        <description><![CDATA[
            <p>Thank you very much. I appreciate your input and the instructions.</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="9" data-topic="9965">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<aside class="quote no-group" data-username="PrettyGoodPrivacy" data-post="8" data-topic="9965">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/p/e5b9ba/40.png" class="avatar"> PrettyGoodPrivacy:</div>
<blockquote>
<p>The onionbalance transition to the backend servers (each a complete Whonix instance) remains in the Tor network from my understanding as onionbalance frontend server hands over the introduction point of a backend server as answer to the clients request over Tor. Can anyone confirm this?</p>
</blockquote>
</aside>
<p>Hm. Maybe.<br>
Maybe I got this wrong</p>
</blockquote>
</aside>
<p>By the way could you find out or clarify if this is the case for OnionBalance without Whonix?</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="10" data-topic="9965">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Please see, try, test, leave feedback, edit if needed:<br>
<a href="https://www.whonix.org/wiki/Onion_Services#OnionBalance" class="inline-onebox" rel="noopener nofollow ugc">Onion Services - Whonix</a></p>
</blockquote>
</aside>
<p>I have just read it. In this section Whonix-Workstation is not mentioned. Am I right that on the frontent Whonix instance a Whonix-Workstation is not needed and can be left out?</p>
          <p><a href="http://forums.whonix.org/t/onionbalance-help/9965/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/onionbalance-help/9965/11</link>
        <pubDate>Sun, 01 May 2022 19:33:04 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9965-11</guid>
        <source url="http://forums.whonix.org/t/onionbalance-help/9965.rss">OnionBalance help</source>
      </item>
      <item>
        <title>OnionBalance help</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>On a second thought it is probably possible to combine OnionBalance with Whonix. I’ve managed to wrap my head around the upstream OnionBalance documentation.</p>
<p>Please see, try, test, leave feedback, edit if needed:<br>
<a href="https://www.whonix.org/wiki/Onion_Services#OnionBalance">https://www.whonix.org/wiki/Onion_Services#OnionBalance</a></p>
<p>It is still <a href="https://www.whonix.org/wiki/Untested">untested</a> at time of writing. Should that change, the notice will be removed from the wiki and a new post will be made here.</p>
          <p><a href="http://forums.whonix.org/t/onionbalance-help/9965/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/onionbalance-help/9965/10</link>
        <pubDate>Sun, 01 May 2022 17:23:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9965-10</guid>
        <source url="http://forums.whonix.org/t/onionbalance-help/9965.rss">OnionBalance help</source>
      </item>
      <item>
        <title>OnionBalance help</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="PrettyGoodPrivacy" data-post="8" data-topic="9965">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/p/e5b9ba/40.png" class="avatar"> PrettyGoodPrivacy:</div>
<blockquote>
<p>What would be the risks to set up onionbalance as a frontend server on a hardened dedicated server (set up anonymously) independent of Whonix?</p>
</blockquote>
</aside>
<p>Then you don’t have the security features provides by Whonix.</p>
<p><a href="https://www.whonix.org/#security">https://www.whonix.org/#security</a></p>
<aside class="quote no-group" data-username="PrettyGoodPrivacy" data-post="8" data-topic="9965">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/p/e5b9ba/40.png" class="avatar"> PrettyGoodPrivacy:</div>
<blockquote>
<p>However, as the frontend onionbalance server is not torified by default, isn’t it correct that this is only an issue when updating the server/initiating outgoing connections?</p>
</blockquote>
</aside>
<p>No. Same as above.</p>
<aside class="quote no-group" data-username="PrettyGoodPrivacy" data-post="8" data-topic="9965">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/p/e5b9ba/40.png" class="avatar"> PrettyGoodPrivacy:</div>
<blockquote>
<p>The onionbalance transition to the backend servers (each a complete Whonix instance) remains in the Tor network from my understanding as onionbalance frontend server hands over the introduction point of a backend server as answer to the clients request over Tor. Can anyone confirm this?</p>
</blockquote>
</aside>
<p>Hm. Maybe.<br>
Maybe I got this wrong.</p>
<aside class="quote no-group" data-username="PrettyGoodPrivacy" data-post="8" data-topic="9965">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/p/e5b9ba/40.png" class="avatar"> PrettyGoodPrivacy:</div>
<blockquote>
<p>And another view: What are the risks of running a whonix instance as a dedicated frontend server (onionbalance necessarily on the gateway, the workstation is idle) and the dedicated backend servers are also full whonix instances?</p>
</blockquote>
</aside>
<p>Yeah. That might work.</p>
<aside class="quote no-group" data-username="PrettyGoodPrivacy" data-post="8" data-topic="9965">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/p/e5b9ba/40.png" class="avatar"> PrettyGoodPrivacy:</div>
<blockquote>
<p>To be honest I did not fully understood the argument of traffic, might someone please explain it? What is the real problem if all servers are located in the same data center?</p>
</blockquote>
</aside>
<p>Because the volume of Tor traffic generated by a single server / location / customer stands out by far, therefore making the onion service’s server location easier to detect.</p>
          <p><a href="http://forums.whonix.org/t/onionbalance-help/9965/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/onionbalance-help/9965/9</link>
        <pubDate>Sun, 01 May 2022 15:27:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9965-9</guid>
        <source url="http://forums.whonix.org/t/onionbalance-help/9965.rss">OnionBalance help</source>
      </item>
      <item>
        <title>OnionBalance help</title>
        <dc:creator><![CDATA[PrettyGoodPrivacy]]></dc:creator>
        <description><![CDATA[
            <p>Hello everyone,</p>
<p>This is a very interesting topic.</p>
<p>What would be the risks to set up onionbalance as a frontend server on a hardened dedicated server (set up anonymously) independent of Whonix?</p>
<p>The onionbalance transition to the backend servers (each a complete Whonix instance) remains in the Tor network from my understanding as onionbalance frontend server hands over the introduction point of a backend server as answer to the clients request over Tor. Can anyone confirm this?</p>
<p>However, as the frontend onionbalance server is not torified by default, isn’t it correct that this is only an issue when updating the server/initiating outgoing connections?</p>
<p>And another view: What are the risks of running a whonix instance as a dedicated frontend server (onionbalance necessarily on the gateway, the workstation is idle) and the dedicated backend servers are also full whonix instances?</p>
<p>To be honest I did not fully understood the argument of traffic, might someone please explain it? What is the real problem if all servers are located in the same data center? Of course, you could also distribute them geographically.</p>
<p>Reference: <a href="https://forums.whonix.org/t/whonix-onion-service-load-balancing-guide/12606" class="inline-onebox">Whonix Onion Service Load Balancing Guide</a></p>
<p>Thank you.</p>
          <p><a href="http://forums.whonix.org/t/onionbalance-help/9965/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/onionbalance-help/9965/8</link>
        <pubDate>Sun, 01 May 2022 01:14:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9965-8</guid>
        <source url="http://forums.whonix.org/t/onionbalance-help/9965.rss">OnionBalance help</source>
      </item>
      <item>
        <title>OnionBalance help</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Wondering how onionbalance could be combined with Whonix.</p>
<p>Quote</p>
<p><a href="https://onionbalance.readthedocs.io/en/latest/v3/tutorial-v3.html" class="onebox" target="_blank" rel="noopener">https://onionbalance.readthedocs.io/en/latest/v3/tutorial-v3.html</a></p>
<blockquote>
<p>Onionbalance implements round-robin like load balancing on top of Tor onion services. A typical Onionbalance deployment will incorporate one frontend servers and multiple backend instances.</p>
</blockquote>
<p>I’d if this gets supported, the incrementally. First iterations could be:</p>
<ul>
<li>multiple Tor onion instances</li>
<li>1 backend server</li>
</ul>
<p>For non-anonymous use cases (for example: <code>whonix.org</code> alternative onion) it isn’t required to run Whonix. Therefore running multiple Tor instances inside the same Whonix-Gateway with onionbalance, while easier, seems a bit pointless. That Whonix-Gateway would generate unusually much Tor traffic. Hence, less anonymous. The only situation where this could make sense would be on an anonymously purchased VPS where anonymity is not that important.</p>
<p>Related:<br>
<a href="https://lists.torproject.org/pipermail/tor-dev/2020-June/014347.html" class="onebox" target="_blank" rel="noopener">https://lists.torproject.org/pipermail/tor-dev/2020-June/014347.html</a></p>
<p>Otherwise for retaining good anonymity it would be required to run multiple Whonix-Gateway in physically different locations. This is to avoid that one Whonix-Gateway instance would be producing too much Tor traffic.</p>
<p>That however breaks how Whonix is operating for now:<br>
One machine (Whonix-Workstation) connected to another machine (Whonix-Gateway) over an isolated, internal, (virtual) LAN connection. Unencrpyted. Related:</p>
<aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">

      <a href="https://www.whonix.org/wiki/Dev/Technical_Introduction#With_more_technical_terms" target="_blank" rel="noopener" title="11:30PM - 29 September 2021">Whonix – 29 Sep 21</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" class="thumbnail" width="690" height="362"></div>

<h3><a href="https://www.whonix.org/wiki/Dev/Technical_Introduction#With_more_technical_terms" target="_blank" rel="noopener">Technical Introduction</a></h3>

  <p>Introduction into Whonix ™ Technical Design.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p><a href="https://www.whonix.org/wiki/Connections_between_Whonix-Gateway_and_Whonix-Workstation" class="onebox" target="_blank" rel="noopener">https://www.whonix.org/wiki/Connections_between_Whonix-Gateway_and_Whonix-Workstation</a></p>
<p>A prerequisite for onionbalance with Whonix is most likely the (optional) implementation of encrypted and authenticated connections between Whonix-Gateway and Whonix-Workstation. Otherwise onionbalance instances on physically separate machines couldn’t securely connect to the backend Whonix-Workstation (web or any) server.<br>
(Unless - perhaps using onions with TLS which would reduce this to TLS level connection security and adding a dependency on TLS CAs.)</p>
<p>Example…</p>
<p>Whonix-Gateway onionbalance Instance Nr. 3 → Internet, clearnet, unencrypted → Whonix-Workstation backend (web or any) server</p>
<p>Probably not what we want. We probably want at least:</p>
<p>Whonix-Gateway onionbalance Instance Nr. 3 → Internet, clearnet, encrypted → Whonix-Workstation backend (web or any) server</p>
<p>Or should this even be torified?</p>
<p>Whonix-Gateway onionbalance Instance Nr. 3 → Internet, torified, encrypted → Whonix-Workstation backend (web or any) server</p>
<p>It’s not a bowl of cherries. Meaning, of course everyone would like to see the perfect implementation. If all traits (torified, encrypted, fast enough) could be implemented then these should be implemented. But in practice for this setup it might be either torified or fast enough. Both at the same time might be impossible.</p>
<hr>
<p>Maybe I am missing something about onionbalance.</p>
<p>Outside of Whonix… Unrelated to Whonix… How does onionbalance solve this?</p>
<p>VPS onoinbalance Instance Nr. 2 → Internet → backend server</p>
<p>How would this be encrypted/authenticated? This is left to the system administrator?</p>
<p>Also as per onionbalance default not torified?</p>
          <p><a href="http://forums.whonix.org/t/onionbalance-help/9965/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/onionbalance-help/9965/7</link>
        <pubDate>Tue, 15 Jun 2021 10:28:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9965-7</guid>
        <source url="http://forums.whonix.org/t/onionbalance-help/9965.rss">OnionBalance help</source>
      </item>
      <item>
        <title>OnionBalance help</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Log output doesn’t shown actual issue. It’s truncated. Without seeing any error message, can’t be debugged.</p>
<p>See these:</p>
<ul>
<li><a href="https://www.whonix.org/wiki/Tor#Configuration_Check"> Configuration Check</a></li>
<li><a href="https://www.whonix.org/wiki/Tor#Log_Analysis"> Log Analysis</a></li>
</ul>
          <p><a href="http://forums.whonix.org/t/onionbalance-help/9965/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/onionbalance-help/9965/3</link>
        <pubDate>Mon, 20 Jul 2020 16:48:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9965-3</guid>
        <source url="http://forums.whonix.org/t/onionbalance-help/9965.rss">OnionBalance help</source>
      </item>
      <item>
        <title>OnionBalance help</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>If you followed all steps from onionbalance manuals but you are running into Tor bugs then it is likely a problem there. You will have better a chance at fixing this by reporting it upstream.</p>
          <p><a href="http://forums.whonix.org/t/onionbalance-help/9965/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/onionbalance-help/9965/2</link>
        <pubDate>Mon, 20 Jul 2020 13:38:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9965-2</guid>
        <source url="http://forums.whonix.org/t/onionbalance-help/9965.rss">OnionBalance help</source>
      </item>
      <item>
        <title>OnionBalance help</title>
        <dc:creator><![CDATA[OnionQuestions]]></dc:creator>
        <description><![CDATA[
            <p>I am trying to setup onionbalance. I have a small vps (none whonix the ob frontend) and two dedicated servers each running KVM with whonix</p>
<p>Hidden service version 3 on both dedicated servers</p>
<p>I configured my vps (not whonix) to use as the front server and created my main onionbalance key, then i moved onto my whonix dedicated servers i needed to upgrade tor to the latest version which i did via the whonix wiki everything went great and my gateway now displays tor 0.4.3.6 running on Linux with Libevent 2.1.8-stable, OpenSSL 1.1.1d, Zlib 1.2.11, Liblzma 5.2.4, and Libzstd 1.3.8. this information displays after i run the tor - v command.</p>
<p>Using the onionbalance guide located here h**ps://onionbalance.readthedocs.io/en/latest/v3/tutorial-v3.html#step-3-configuring-the-backend-instances</p>
<p>I modified my torrc file.</p>
<p>HiddenServiceDir /var/lib/tor/hidden_service/<br>
HiddenServicePort 80 10.152.152.11:80<br>
HiddenServiceVersion 3<br>
HiddenServiceOnionBalanceInstance 1</p>
<p>Then i reloaded tor and it fails to reload, the error displayed is:</p>
<p>sudo systemctl --no-pager status tor@default<br>
● tor@default.service - Anonymizing overlay network for TCP<br>
Loaded: loaded (/lib/systemd/system/tor@default.service; enabled-runtime; vendor preset: enabled)<br>
Drop-In: /lib/systemd/system/tor@default.service.d<br>
└─30_clean-torrc-d-on-reload.conf, 40_obfs4proxy-workaround.conf, 50_controlsocket-workaround.conf<br>
Active: reloading (reload) (Result: exit-code) since Sat 2020-07-18 19:01:59 UTC; 13s left<br>
Process: 757 ExecStartPre=/usr/bin/install -Z -m 02755 -o debian-tor -g debian-tor -d /run/tor (code=exited, status=0/SUCCESS)<br>
Process: 760 ExecStartPre=/usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0 --verify-config (code=exited, status=0/SUCCESS)<br>
Process: 833 ExecStart=/usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0 (code=exited, status=1/FAILURE)<br>
Process: 843 ExecStartPost=/bin/kill -HUP ${MAINPID} (code=exited, status=0/SUCCESS)<br>
Process: 2285 ExecReload=/bin/sh -c /usr/lib/anon-gw-anonymizer-config/torrc-d-cleaner &amp;&amp; /bin/kill -HUP ${MAINPID} (code=exited, status=0/SUCCESS)<br>
Main PID: 833 (code=exited, status=1/FAILURE)<br>
Tasks: 0 (limit: 1447)<br>
Memory: 17.7M<br>
CGroup: /system.slice/system-tor.slice/tor@default.service</p>
<p>Jul 18 19:01:59 host tor[833]: Jul 18 19:01:59.001 [notice] Opened HTTP tu…:9227<br>
Jul 18 19:01:59 host tor[833]: Jul 18 19:01:59.001 [notice] Opening HTTP t…:9228<br>
Jul 18 19:01:59 host tor[833]: Jul 18 19:01:59.001 [notice] Opened HTTP tu…:9228<br>
Jul 18 19:01:59 host tor[833]: Jul 18 19:01:59.001 [notice] Opening HTTP t…:9229<br>
Jul 18 19:01:59 host tor[833]: Jul 18 19:01:59.001 [notice] Opened HTTP tu…:9229<br>
Jul 18 19:01:59 host systemd[1]: Started Anonymizing overlay network for TCP.<br>
Jul 18 19:01:30 host systemd[1]: Reloading Anonymizing overlay network for TCP.<br>
Jul 18 19:01:30 host sh[2285]: /usr/lib/anon-gw-anonymizer-config/torrc-d-…cess.<br>
Jul 18 19:01:30 host systemd[1]: tor@default.service: Can’t open PID file …ctory<br>
Jul 18 19:01:30 host systemd[1]: tor@default.service: Main process exited,…ILURE<br>
Hint: Some lines were ellipsized, use -l to show in full.</p>
<ul>
<li>true 0</li>
<li>true ‘Feel free to close this window.’</li>
<li>sleep 86400</li>
</ul>
<p>The version of tor i upgraded to supports onionbalance. Does anyone know why this error is happening and what can i do to resolve it?</p>
          <p><a href="http://forums.whonix.org/t/onionbalance-help/9965/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/onionbalance-help/9965/1</link>
        <pubDate>Sat, 18 Jul 2020 19:04:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9965-1</guid>
        <source url="http://forums.whonix.org/t/onionbalance-help/9965.rss">OnionBalance help</source>
      </item>
      <item>
        <title>OnionBalance help</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Please see the docs below for more accurate info. I think you are running 3 instances of your website all sharing the single onion but onion balance balances the load between all three equally.</p>
<p>Likely on three different machines or else there isn’t a point to this setup. The idea is to make resources  available for  your onion to use by backing it up with many machines.</p>
<p><a href="https://blog.torproject.org/cooking-onions-finding-onionbalance" class="onebox" target="_blank">https://blog.torproject.org/cooking-onions-finding-onionbalance</a><br>
<a href="https://onionbalance.readthedocs.io/en/latest/v3/tutorial-v3.html" class="onebox" target="_blank">https://onionbalance.readthedocs.io/en/latest/v3/tutorial-v3.html</a></p>
          <p><a href="http://forums.whonix.org/t/onionbalance-help/9965/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/onionbalance-help/9965/6</link>
        <pubDate>Fri, 19 Jun 2020 12:47:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9965-6</guid>
        <source url="http://forums.whonix.org/t/onionbalance-help/9965.rss">OnionBalance help</source>
      </item>
      <item>
        <title>OnionBalance help</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Unspecific to KVM.</p>
<p>All documentation we have on the <a href="https://www.whonix.org/wiki/Onion_Services" class="inline-onebox">Onion Services - Whonix</a> for now is:</p>
<blockquote>
<p><a href="https://onionbalance.readthedocs.org">OnionBalance</a> <a href="https://web.archive.org/web/https://onionbalance.readthedocs.org">[archive]</a> can help to prevent de-anonymization of an onion service by protecting it from becoming unavailable through denial of service attacks (DDOS). OnionBalance is mentioned in the <a href="https://github.com/mikeperry-tor/vanguards/blob/master/README_SECURITY.md">security readme</a> <a href="https://web.archive.org/web/https://github.com/mikeperry-tor/vanguards/blob/master/README_SECURITY.md">[archive]</a> by vanguards author and Tor developer Mike Perry where he discusses attacks against onion services and defenses. <a href="https://onionbalance.readthedocs.io/en/latest/v3/tutorial-v3.html">OnionBalance</a> <a href="https://web.archive.org/web/https://onionbalance.readthedocs.io/en/latest/v3/tutorial-v3.html">[archive]</a> is now available for onion v3 services <a href="https://www.whonix.org/wiki/Onion_Services#cite_note-18">[18]</a>, see: <a href="https://blog.torproject.org/cooking-onions-reclaiming-onionbalance">Cooking with Onions: Reclaiming the Onionbalance</a> <a href="https://web.archive.org/web/https://blog.torproject.org/cooking-onions-reclaiming-onionbalance">[archive]</a>.</p>
</blockquote>
<blockquote>
<p>Vanguards protect against guard discovery and related traffic analysis attacks and is installed by default in Whonix ™. <a href="https://www.whonix.org/wiki/Onion_Services#cite_note-19">[19]</a> See <a href="https://www.whonix.org/wiki/Vanguards">Vanguards</a> for further information.</p>
</blockquote>
<blockquote>
<p>High Traffic Onion Service Scalability Performance</p>
<p>Although mostly focused on non-anonymous onion services, the tor-dev mailing list discussion <a href="https://lists.torproject.org/pipermail/tor-dev/2020-June/014347.html">onionbalance useful on same server / for high-spec non-location hidden servers?</a> <a href="https://web.archive.org/web/https://lists.torproject.org/pipermail/tor-dev/2020-June/014347.html">[archive]</a> contains interesting information on scalability and performance of high traffic onion services. The <a href="https://lists.torproject.org/pipermail/tor-dev/">tor-dev mailing list</a> <a href="https://web.archive.org/web/https://lists.torproject.org/pipermail/tor-dev/">[archive]</a> (<a href="https://lists.torproject.org/cgi-bin/mailman/listinfo/tor-dev">sign-up</a> <a href="https://web.archive.org/web/https://lists.torproject.org/cgi-bin/mailman/listinfo/tor-dev">[archive]</a>) is considered a useful resource for technical information since they are receptive to genuine inquiries.</p>
</blockquote>
<p><a href="https://forums.whonix.org/t/onion-forum-site-redirects-to-clearnet/197/15">Not even using onionbalance for whonix.org yet.</a></p>
<p>Mostly <a href="https://www.whonix.org/wiki/Unsupported">undocumented</a>.</p>
<p>Should that change, the wiki page <a href="https://www.whonix.org/wiki/Onion_Services" class="inline-onebox">Onion Services - Whonix</a> will be updated.</p>
<aside class="quote no-group" data-username="whonixhelper" data-post="4" data-topic="9965">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/w/bc8723/40.png" class="avatar"> whonixhelper:</div>
<blockquote>
<p>I have 3 servers each one has whonix installed</p>
</blockquote>
</aside>
<p>Interesting!</p>
<aside class="quote no-group" data-username="whonixhelper" data-post="4" data-topic="9965">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/w/bc8723/40.png" class="avatar"> whonixhelper:</div>
<blockquote>
<p>do I need to install onion balance on one of the gateways?</p>
</blockquote>
</aside>
<p>I would guess so.</p>
<aside class="quote no-group" data-username="whonixhelper" data-post="4" data-topic="9965">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/w/bc8723/40.png" class="avatar"> whonixhelper:</div>
<blockquote>
<p>Do I install my forum software on one of the severs my OB gateway points too?</p>
</blockquote>
</aside>
<p>Forum / server software ought to run inside Whonix-Workstation.</p>
<p>It’s difficult enough to load balance anything. More difficult for dynamic content such as forums. It’s highly web application specific - unrelated to Whonix. How do you even load balance discourse or phpBB on clearnet… Without knowing this even in theory, I wouldn’t attempt to introduce another layer of complexity, namely Tor onion services.</p>
<p>I guess a realistic path forward might be 1 centralized web server for the webapps(s) (forum) and then onionbalance only to work around the onion connection layer bottleneck.</p>
          <p><a href="http://forums.whonix.org/t/onionbalance-help/9965/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/onionbalance-help/9965/5</link>
        <pubDate>Fri, 19 Jun 2020 09:29:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9965-5</guid>
        <source url="http://forums.whonix.org/t/onionbalance-help/9965.rss">OnionBalance help</source>
      </item>
      <item>
        <title>OnionBalance help</title>
        <dc:creator><![CDATA[whonixhelper]]></dc:creator>
        <description><![CDATA[
            <p>Hi looking to setup onion balance for my v3 hidden service. I have 3 servers each one has whonix installed, do I need to install onion balance on one of the gateways?</p>
<p>Do I install my forum software on one of the severs my OB gateway points too? Do I have to install anything on the second server or does it remain a static server only?</p>
<p>and have it point to the two other servers?</p>
          <p><a href="http://forums.whonix.org/t/onionbalance-help/9965/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/onionbalance-help/9965/4</link>
        <pubDate>Fri, 19 Jun 2020 00:23:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9965-4</guid>
        <source url="http://forums.whonix.org/t/onionbalance-help/9965.rss">OnionBalance help</source>
      </item>
  </channel>
</rss>
