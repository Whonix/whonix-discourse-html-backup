<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Unable to connect the Gateway to Tor network</title>
    <link>http://forums.whonix.org/t/unable-to-connect-the-gateway-to-tor-network/13519</link>
    <description>Hello Team

This is my first post and I&#39;m a Whonix newbie, so please apologize me in advance for the lack of skills. 

I have an issue similar to the one described here: https://forums.whonix.org/t/workstation-network-internet-connection-issue/6950

But in my case I&#39;m dealing with KVM VMs. 

During the installation/configuration steps everything worked as expected, but when I try to run the check I get:



```

Create a file /etc/systemcheck.d/50_user.conf and add:
systemcheck_skip_functions+=&quot; check_journal &quot;
[INFO] [systemcheck] check network interfaces Result: Ok.
[INFO] [systemcheck] Qubes Settings Test Result: Skipped, because Qubes not detected.
[INFO] [systemcheck] Check Kernel Messages Test Result: Found nothing remarkable, ok.
[INFO] [systemcheck] Whonix firewall systemd unit check Result: Ok.
[INFO] [systemcheck] Check Package Manager Running Result: None running, ok.
[INFO] [systemcheck] Tor Check Result: Not running on Whonix-Gateway, ok.
[INFO] [systemcheck] Tor Config Check Result: Tor config ok.
[INFO] [systemcheck] Tor Pid Check Result: Not running on Whonix-Gateway, ok.
[ERROR] [systemcheck] Tor SocksPort Reachability Test Result: Unreachable! Unexpected error! (curl exit code: 56 | curl status message: [56] - [Failure in receiving network data.])
[INFO] [systemcheck] Tor Connection Result:
- Connecting for 0 seconds.
- Tor Circuit: not established.
```
My Host only accesses internet when the openvpn tun0 device is up because of the following firewall rules 


```
Status: active

To                         Action      From
--                         ------      ----
192.168.1.0/24             ALLOW       Anywhere

192.168.1.0/24             ALLOW OUT   Anywhere
VPNIPADDRESS1/udp     ALLOW OUT   Anywhere
Anywhere                   ALLOW OUT   Anywhere on tun0
VPNIPADDRESS2/udp    ALLOW OUT   Anywhere
```
Anyway I&#39;ve tried to disable the VPN and the firewall and the problem persists

this is the ip -a output:

```
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether xxxxxxxx brd ff:ff:ff:ff:ff:ff permaddr xxxxxxxxxxx
    inet 192.168.1.200/24 brd 192.168.1.255 scope global eth0
       valid_lft forever preferred_lft forever
3: wlan0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000
    link/ether xxxxxxxxxxxxxx:bd brd ff:ff:ff:ff:ff:ff
4: virbr1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether xxxxxxxx brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.2/24 brd 10.0.2.255 scope global virbr1
       valid_lft forever preferred_lft forever
5: virbr0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default qlen 1000
    link/ether xxxxxx brd ff:ff:ff:ff:ff:ff
    inet 192.168.122.1/24 brd 192.168.122.255 scope global virbr0
       valid_lft forever preferred_lft forever
6: virbr2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether xxxxxxxxxxxxx brd ff:ff:ff:ff:ff:ff
7: tun0: &lt;POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UNKNOWN group default qlen 500
    link/none 
    inet 10.8.8.17/24 scope global tun0
       valid_lft forever preferred_lft forever
8: vnet0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master virbr2 state UNKNOWN group default qlen 1000
    link/ether xxxxxxxxxxxx brd ff:ff:ff:ff:ff:ff
9: vnet1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master virbr1 state UNKNOWN group default qlen 1000
    link/ether xxxxxxxxxxxxxx brd ff:ff:ff:ff:ff:ff
10: vnet2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master virbr2 state UNKNOWN group default qlen 1000
    link/ether xxxxxxxxxxxxx brd ff:ff:ff:ff:ff:ff
```
Thanks in advance for your help

Regards</description>
    <language>en</language>
    <lastBuildDate>Mon, 04 Apr 2022 17:40:49 +0000</lastBuildDate>
    <category>KVM</category>
    <atom:link href="http://forums.whonix.org/t/unable-to-connect-the-gateway-to-tor-network/13519.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Unable to connect the Gateway to Tor network</title>
        <dc:creator><![CDATA[Asdrubale]]></dc:creator>
        <description><![CDATA[
            <p>Dear Patrick</p>
<p>Thanks for your help. The issue was caused by the time gap</p>
<p>It’s working now</p>
<p>Regards<br>
A</p>
          <p><a href="http://forums.whonix.org/t/unable-to-connect-the-gateway-to-tor-network/13519/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/unable-to-connect-the-gateway-to-tor-network/13519/3</link>
        <pubDate>Mon, 04 Apr 2022 17:40:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13519-3</guid>
        <source url="http://forums.whonix.org/t/unable-to-connect-the-gateway-to-tor-network/13519.rss">Unable to connect the Gateway to Tor network</source>
      </item>
      <item>
        <title>Unable to connect the Gateway to Tor network</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Troubleshooting">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Troubleshooting" target="_blank" rel="noopener" title="03:18PM - 03 March 2022">Whonix – 3 Mar 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/425;"><img src="https://www.whonix.org/w/images/8/81/Troubleshooting-114197640.jpg" class="thumbnail" width="640" height="425"></div>

<h3><a href="https://www.whonix.org/wiki/Troubleshooting" target="_blank" rel="noopener">Troubleshooting</a></h3>

  <p>Troubleshooting Installation and Network Issues with Whonix ™</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/unable-to-connect-the-gateway-to-tor-network/13519/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/unable-to-connect-the-gateway-to-tor-network/13519/2</link>
        <pubDate>Mon, 04 Apr 2022 10:53:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13519-2</guid>
        <source url="http://forums.whonix.org/t/unable-to-connect-the-gateway-to-tor-network/13519.rss">Unable to connect the Gateway to Tor network</source>
      </item>
      <item>
        <title>Unable to connect the Gateway to Tor network</title>
        <dc:creator><![CDATA[Asdrubale]]></dc:creator>
        <description><![CDATA[
            <p>Hello Team</p>
<p>This is my first post and I’m a Whonix newbie, so please apologize me in advance for the lack of skills.</p>
<p>I have an issue similar to the one described here: <a href="https://forums.whonix.org/t/workstation-network-internet-connection-issue/6950" class="inline-onebox">Workstation network/internet connection issue</a></p>
<p>But in my case I’m dealing with KVM VMs.</p>
<p>During the installation/configuration steps everything worked as expected, but when I try to run the check I get:</p>
<pre><code class="lang-auto">
Create a file /etc/systemcheck.d/50_user.conf and add:
systemcheck_skip_functions+=" check_journal "
[INFO] [systemcheck] check network interfaces Result: Ok.
[INFO] [systemcheck] Qubes Settings Test Result: Skipped, because Qubes not detected.
[INFO] [systemcheck] Check Kernel Messages Test Result: Found nothing remarkable, ok.
[INFO] [systemcheck] Whonix firewall systemd unit check Result: Ok.
[INFO] [systemcheck] Check Package Manager Running Result: None running, ok.
[INFO] [systemcheck] Tor Check Result: Not running on Whonix-Gateway, ok.
[INFO] [systemcheck] Tor Config Check Result: Tor config ok.
[INFO] [systemcheck] Tor Pid Check Result: Not running on Whonix-Gateway, ok.
[ERROR] [systemcheck] Tor SocksPort Reachability Test Result: Unreachable! Unexpected error! (curl exit code: 56 | curl status message: [56] - [Failure in receiving network data.])
[INFO] [systemcheck] Tor Connection Result:
- Connecting for 0 seconds.
- Tor Circuit: not established.
</code></pre>
<p>My Host only accesses internet when the openvpn tun0 device is up because of the following firewall rules</p>
<pre><code class="lang-auto">Status: active

To                         Action      From
--                         ------      ----
192.168.1.0/24             ALLOW       Anywhere

192.168.1.0/24             ALLOW OUT   Anywhere
VPNIPADDRESS1/udp     ALLOW OUT   Anywhere
Anywhere                   ALLOW OUT   Anywhere on tun0
VPNIPADDRESS2/udp    ALLOW OUT   Anywhere
</code></pre>
<p>Anyway I’ve tried to disable the VPN and the firewall and the problem persists</p>
<p>this is the ip -a output:</p>
<pre><code class="lang-auto">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether xxxxxxxx brd ff:ff:ff:ff:ff:ff permaddr xxxxxxxxxxx
    inet 192.168.1.200/24 brd 192.168.1.255 scope global eth0
       valid_lft forever preferred_lft forever
3: wlan0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000
    link/ether xxxxxxxxxxxxxx:bd brd ff:ff:ff:ff:ff:ff
4: virbr1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether xxxxxxxx brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.2/24 brd 10.0.2.255 scope global virbr1
       valid_lft forever preferred_lft forever
5: virbr0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default qlen 1000
    link/ether xxxxxx brd ff:ff:ff:ff:ff:ff
    inet 192.168.122.1/24 brd 192.168.122.255 scope global virbr0
       valid_lft forever preferred_lft forever
6: virbr2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether xxxxxxxxxxxxx brd ff:ff:ff:ff:ff:ff
7: tun0: &lt;POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UNKNOWN group default qlen 500
    link/none 
    inet 10.8.8.17/24 scope global tun0
       valid_lft forever preferred_lft forever
8: vnet0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master virbr2 state UNKNOWN group default qlen 1000
    link/ether xxxxxxxxxxxx brd ff:ff:ff:ff:ff:ff
9: vnet1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master virbr1 state UNKNOWN group default qlen 1000
    link/ether xxxxxxxxxxxxxx brd ff:ff:ff:ff:ff:ff
10: vnet2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master virbr2 state UNKNOWN group default qlen 1000
    link/ether xxxxxxxxxxxxx brd ff:ff:ff:ff:ff:ff
</code></pre>
<p>Thanks in advance for your help</p>
<p>Regards</p>
          <p><a href="http://forums.whonix.org/t/unable-to-connect-the-gateway-to-tor-network/13519/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/unable-to-connect-the-gateway-to-tor-network/13519/1</link>
        <pubDate>Sun, 03 Apr 2022 16:58:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13519-1</guid>
        <source url="http://forums.whonix.org/t/unable-to-connect-the-gateway-to-tor-network/13519.rss">Unable to connect the Gateway to Tor network</source>
      </item>
  </channel>
</rss>
