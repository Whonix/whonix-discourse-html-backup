<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Gitlab self-host on V3 onion</title>
    <link>http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967</link>
    <description>I&#39;m using Qubes 4.0.

I&#39;ve successfully setup hidden services on it a number of times.

If I try Gitlab&#39;s install script in a Whonix VM I don&#39;t get any response in the browser when I to access the site via the ****.onion or via 127.0.0.1 within the host. I do not see any errors in the install process. But I had to force it to think it was in Debian to get it to install.

If I run Gitlab&#39;s install script in Debian 10 VM it works and I can access gitlab in Firefox via 127.0.0.1. But I cannot access via ****.onion

My question is whether I can setup a Debian 10 VM to serve a website/ssh via a whonix gateway VM using a ****.onion address?

The steps that I can&#39;t execute in the Debian VM would be to create:
/rw/config/whonix_firewall.d/50_user.conf with the EXTERNAL_OPEN_PORTS setting

and then execute whonix_firewall

My other option is to try install Gitlab from scratch in a Whonix VM, but that looks like A LOT of steps and not sure it will work.

So wondering if there&#39;s an easier option to get the Debian VM to serve the website over whonix gateway?

Thanks for any advice.</description>
    <language>en</language>
    <lastBuildDate>Tue, 21 Jul 2020 14:14:50 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Gitlab self-host on V3 onion</title>
        <dc:creator><![CDATA[mimp]]></dc:creator>
        <description><![CDATA[
            <p>Interesting, thanks. I’ll post results if I play with more.</p>
          <p><a href="http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967/6</link>
        <pubDate>Tue, 21 Jul 2020 14:14:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9967-6</guid>
        <source url="http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967.rss">Gitlab self-host on V3 onion</source>
      </item>
      <item>
        <title>Gitlab self-host on V3 onion</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Glad that’s sorted.</p>
<aside class="quote no-group" data-username="mimp" data-post="3" data-topic="9967">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/47e85d/40.png" class="avatar"> mimp:</div>
<blockquote>
<p>Are you saying that the Debian template should work to serve a website via sys-whonix without any additional setup?</p>
</blockquote>
</aside>
<p>I haven’t tested that but I don’t see why not as long as internal IPs are correctly configured (custom-workstation network configuration and Whonix-Gateway Tor configuration). You can see this as “A VM running nginx which is connected to another VM thorugh internal LAN to another VM running Tor”.</p>
          <p><a href="http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967/5</link>
        <pubDate>Tue, 21 Jul 2020 10:06:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9967-5</guid>
        <source url="http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967.rss">Gitlab self-host on V3 onion</source>
      </item>
      <item>
        <title>Gitlab self-host on V3 onion</title>
        <dc:creator><![CDATA[mimp]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="2" data-topic="9967">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>The host? If server software is running inside Whonix-Workstation it is expected that it won’t be accessible from the host operating system.</p>
</blockquote>
</aside>
<p>sorry, meant the whonix-workstation hosting gitlab, not the host OS. With my pre-installed nginx setup I was not getting anything at 127.0.0.1 within whonix-workstation on firefox. But as I said, a fresh whonix template fixed it.</p>
          <p><a href="http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967/4</link>
        <pubDate>Tue, 21 Jul 2020 01:40:21 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9967-4</guid>
        <source url="http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967.rss">Gitlab self-host on V3 onion</source>
      </item>
      <item>
        <title>Gitlab self-host on V3 onion</title>
        <dc:creator><![CDATA[mimp]]></dc:creator>
        <description><![CDATA[
            <p>Hey Patrick,<br>
Thanks for always being so responsive with offers of support.</p>
<p>After your suggestion of looking into nginx I realized things looked different in Whonix than Debian, but that was my fault because I had set up nginx in the template I was using for Whonix. So I started with a fresh Whonix template and Gitlab is now responding via Tor Browser.</p>
<p>One followup question out of curiosity. Are you saying that the Debian template should work to serve a website via sys-whonix without any additional setup? Because mine did not want to connect over Tor.</p>
<p>Thanks again for the suggestions.</p>
          <p><a href="http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967/3</link>
        <pubDate>Tue, 21 Jul 2020 01:18:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9967-3</guid>
        <source url="http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967.rss">Gitlab self-host on V3 onion</source>
      </item>
      <item>
        <title>Gitlab self-host on V3 onion</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="mimp" data-post="1" data-topic="9967">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/47e85d/40.png" class="avatar"> mimp:</div>
<blockquote>
<p>If I try Gitlab’s install script in a Whonix VM I don’t get any response in the browser when I to access the site via the ****.onion or via 127.0.0.1</p>
</blockquote>
</aside>
<p>Accessing localhost using Tor Browser:<br>
<a href="https://www.whonix.org/wiki/Tor_Browser#Local_Connections">https://www.whonix.org/wiki/Tor_Browser#Local_Connections</a></p>
<p>Try “normal / easy” first <a href="https://www.whonix.org/wiki/Onion_Services">https://www.whonix.org/wiki/Onion_Services</a></p>
<p>Since gitlab (I didn’t look into it much) seems to use nging<br>
<a href="https://docs.gitlab.com/ee/install/installation.html#9-nginx" class="onebox" target="_blank">https://docs.gitlab.com/ee/install/installation.html#9-nginx</a><br>
you need to know basics of that web server anyhow. Once nginx is functional, I don’t see why gitlab would not work. Seems like a “normal webapp” that also works with nginx.</p>
<p>You probably have to look at /etc/nginx/sites-available/gitlab and somewhat understand to check if it is alright. Basic (not meaning easy) nginx configuration tasks.</p>
<aside class="quote no-group" data-username="mimp" data-post="1" data-topic="9967">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/47e85d/40.png" class="avatar"> mimp:</div>
<blockquote>
<p>or via 127.0.0.1 within the host</p>
</blockquote>
</aside>
<p>The host? If server software is running inside Whonix-Workstation it is expected that it won’t be accessible from the host operating system.</p>
<aside class="quote no-group" data-username="mimp" data-post="1" data-topic="9967">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/m/47e85d/40.png" class="avatar"> mimp:</div>
<blockquote>
<p>The steps that I can’t execute in the Debian VM would be to create:<br>
/rw/config/whonix_firewall.d/50_user.conf with the EXTERNAL_OPEN_PORTS setting</p>
<p>and then execute whonix_firewall</p>
</blockquote>
</aside>
<p>Not needed since Debian doesn’t have Whonix firewall.</p>
          <p><a href="http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967/2</link>
        <pubDate>Mon, 20 Jul 2020 16:24:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9967-2</guid>
        <source url="http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967.rss">Gitlab self-host on V3 onion</source>
      </item>
      <item>
        <title>Gitlab self-host on V3 onion</title>
        <dc:creator><![CDATA[mimp]]></dc:creator>
        <description><![CDATA[
            <p>I’m using Qubes 4.0.</p>
<p>I’ve successfully setup hidden services on it a number of times.</p>
<p>If I try Gitlab’s install script in a Whonix VM I don’t get any response in the browser when I to access the site via the ****.onion or via 127.0.0.1 within the host. I do not see any errors in the install process. But I had to force it to think it was in Debian to get it to install.</p>
<p>If I run Gitlab’s install script in Debian 10 VM it works and I can access gitlab in Firefox via 127.0.0.1. But I cannot access via ****.onion</p>
<p>My question is whether I can setup a Debian 10 VM to serve a website/ssh via a whonix gateway VM using a ****.onion address?</p>
<p>The steps that I can’t execute in the Debian VM would be to create:<br>
/rw/config/whonix_firewall.d/50_user.conf with the EXTERNAL_OPEN_PORTS setting</p>
<p>and then execute whonix_firewall</p>
<p>My other option is to try install Gitlab from scratch in a Whonix VM, but that looks like A LOT of steps and not sure it will work.</p>
<p>So wondering if there’s an easier option to get the Debian VM to serve the website over whonix gateway?</p>
<p>Thanks for any advice.</p>
          <p><a href="http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967/1</link>
        <pubDate>Sun, 19 Jul 2020 15:44:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-9967-1</guid>
        <source url="http://forums.whonix.org/t/gitlab-self-host-on-v3-onion/9967.rss">Gitlab self-host on V3 onion</source>
      </item>
  </channel>
</rss>
