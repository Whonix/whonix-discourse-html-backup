<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Network filtering on the host</title>
    <link>http://forums.whonix.org/t/network-filtering-on-the-host/4693</link>
    <description>New year resolution: using KVM instead of VirtualBox!

So far all good, but I was wondering how to achieve an even higher level of security.

For instance if I have KVM running on a debian machine, is it possible to disallow all traffic except for KVM virtual networks (virbr0 and virbr1 with Whonix) with iptables?</description>
    <language>en</language>
    <lastBuildDate>Sat, 13 Jan 2018 17:11:06 +0000</lastBuildDate>
    <category>KVM</category>
    <atom:link href="http://forums.whonix.org/t/network-filtering-on-the-host/4693.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Network filtering on the host</title>
        <dc:creator><![CDATA[Algernon]]></dc:creator>
        <description><![CDATA[
            <p>If you don’t want any internet access on the host at all and other virtual machines still require access to the clearnet you could maybe come up with your own router VM + bridged networking. Your approach should also work generally though for the exact rules a debian forum or maybe some IRC is suited better. You could also take a look at firejail, apparmor, grsecurity’s RBAC each of which allows to some extend to limit the network access of applications.</p>
          <p><a href="http://forums.whonix.org/t/network-filtering-on-the-host/4693/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/network-filtering-on-the-host/4693/6</link>
        <pubDate>Sat, 13 Jan 2018 17:11:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4693-6</guid>
        <source url="http://forums.whonix.org/t/network-filtering-on-the-host/4693.rss">Network filtering on the host</source>
      </item>
      <item>
        <title>Network filtering on the host</title>
        <dc:creator><![CDATA[onion_knight]]></dc:creator>
        <description><![CDATA[
            <p>Thanks for your answers.</p>
<p>I am very beginner with KVM but I figured that thanks to its advanced network configuration capabilities it would be possible to allow only traffic to and from the virbr* interfaces on a debian host system. Maybe it’s much more complicated that it seems.</p>
<p>I intend to run Whonix and other VM’s too. I don’t want to filter out Tor traffic, I let Whonix manage that. I would just some iptables rules that would only allow internet access through the KVM virtual network interfaces. Obviously the real internet interface would have to access the internet, but it would then only be allowed to tunnel its traffic through KVM virtual network interfaces. This way I don’t expose my host to the internet and I reduce the surface attack as well as leaking issues (such as forgetting that I am not on Whonix and opening a link with a regular Firefox browser, etc.).</p>
<p>Basically this is what Qubes achieves with its sys-net/sys-firewall approach but I was wondering if a lighter version could be achieved on a simple debian system with some hardened iptables rules.</p>
<p>I did some tries with iptables but my knowledge is too low to hope achieving something on my own. Couldn’t find anything on the net either.</p>
<p>EDIT: thanks Algernon, I’ll read your link. My setting would need to allow other KVM VM to connect though, not only Whonix VMs.</p>
          <p><a href="http://forums.whonix.org/t/network-filtering-on-the-host/4693/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/network-filtering-on-the-host/4693/5</link>
        <pubDate>Mon, 08 Jan 2018 20:55:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4693-5</guid>
        <source url="http://forums.whonix.org/t/network-filtering-on-the-host/4693.rss">Network filtering on the host</source>
      </item>
      <item>
        <title>Network filtering on the host</title>
        <dc:creator><![CDATA[Algernon]]></dc:creator>
        <description><![CDATA[
            <p>How do you intend to use the host OS for the KVM VMs? If you use it only for Whonix guests and not for anything else which requires networking you might want to think about using bridged networking for the Whonix gateway and set the host firewall to drop everything. You maybe also want to read  the discussion linked here on bridged vs nat: <a href="https://www.whonix.org/wiki/Security_Guide#Warning:_Bridged_Networking" rel="nofollow noopener">https://www.whonix.org/wiki/Security_Guide#Warning:_Bridged_Networking</a></p>
          <p><a href="http://forums.whonix.org/t/network-filtering-on-the-host/4693/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/network-filtering-on-the-host/4693/4</link>
        <pubDate>Mon, 08 Jan 2018 17:28:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4693-4</guid>
        <source url="http://forums.whonix.org/t/network-filtering-on-the-host/4693.rss">Network filtering on the host</source>
      </item>
      <item>
        <title>Network filtering on the host</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>EDIT:</p>
<p>Ideally this application <a href="https://www.opensnitch.io/">https://www.opensnitch.io/</a> would be packaged for Debian to help accomplish this. Too bad another sec distro wrote something similar but never cared to make it available for other distros.</p>
          <p><a href="http://forums.whonix.org/t/network-filtering-on-the-host/4693/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/network-filtering-on-the-host/4693/3</link>
        <pubDate>Mon, 08 Jan 2018 14:59:10 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4693-3</guid>
        <source url="http://forums.whonix.org/t/network-filtering-on-the-host/4693.rss">Network filtering on the host</source>
      </item>
      <item>
        <title>Network filtering on the host</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="1" data-topic="4693">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>For instance if I have KVM running on a debian machine, is it possible to disallow all traffic except for KVM virtual networks (virbr0 and virbr1 with Whonix) with iptables?</p>
</blockquote>
</aside>
<p>There is a project that would have done just this called Corridor. It blocks any outbound connections not going to the Tor network. Unfortunately the guy behind it made it for Qubes rather than regular distros. Attempts to make it work on Debian led to nowhere.</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://github.githubassets.com/favicon.ico" class="site-icon" width="32" height="32">
      <a href="https://github.com/rustybird/corridor" target="_blank" rel="nofollow noopener">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="//forums.whonix.org/uploads/default/original/2X/4/447a248347bf2e003df3dd1750403068575ee019.png" class="thumbnail onebox-avatar" width="1" height="1">

<h3><a href="https://github.com/rustybird/corridor" target="_blank" rel="nofollow noopener">rustybird/corridor</a></h3>

<p>Tor traffic whitelisting gateway. Contribute to rustybird/corridor development by creating an account on GitHub.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p><a href="https://github.com/rustybird/corridor/issues/28" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/rustybird/corridor/issues/28</a></p>
          <p><a href="http://forums.whonix.org/t/network-filtering-on-the-host/4693/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/network-filtering-on-the-host/4693/2</link>
        <pubDate>Mon, 08 Jan 2018 14:40:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4693-2</guid>
        <source url="http://forums.whonix.org/t/network-filtering-on-the-host/4693.rss">Network filtering on the host</source>
      </item>
      <item>
        <title>Network filtering on the host</title>
        <dc:creator><![CDATA[onion_knight]]></dc:creator>
        <description><![CDATA[
            <p>New year resolution: using KVM instead of VirtualBox!</p>
<p>So far all good, but I was wondering how to achieve an even higher level of security.</p>
<p>For instance if I have KVM running on a debian machine, is it possible to disallow all traffic except for KVM virtual networks (virbr0 and virbr1 with Whonix) with iptables?</p>
          <p><a href="http://forums.whonix.org/t/network-filtering-on-the-host/4693/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/network-filtering-on-the-host/4693/1</link>
        <pubDate>Mon, 08 Jan 2018 00:46:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4693-1</guid>
        <source url="http://forums.whonix.org/t/network-filtering-on-the-host/4693.rss">Network filtering on the host</source>
      </item>
  </channel>
</rss>
