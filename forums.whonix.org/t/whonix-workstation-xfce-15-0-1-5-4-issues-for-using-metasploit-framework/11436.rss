<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Whonix Workstation XFCE-15.0.1.5.4 - Issues for using Metasploit Framework</title>
    <link>http://forums.whonix.org/t/whonix-workstation-xfce-15-0-1-5-4-issues-for-using-metasploit-framework/11436</link>
    <description>Hello,
I&#39;m testing Metasploit Framework on Whonix Workstation to simulate attacks in a lab environment corresponding to a Virtual Machine in a private network (environment made by using simply VirtualBox).

In this lab environment I set one &quot;victim&quot; machine (Metasploitable 2) and two machines as attackers, one Debian 10.9 and the other one Whonix Workstation XFCE (connected to the Whonix Gateway).

The purpose of my test is simulating a complex scenario where different machines can communicate in a private network, where Debian and Whonix machines are also connected to Internet. The complex scenario is represented by an attack from these two machines to the Metasploitable machine where one attacker is using Whonix for anonymization.

After setting everything, I run the Metasploitable machine (let&#39;s guess Private IP 192.168.58.99), and then, from the two attacker machines I execute the same command (that is a simple port scan). So:

    msfconsole
    use auxiliary/scanner/portscan/syn
    setg RHOSTS 192.168.58.99
    run

On Debian 10.9 machine, it works well. The output is like:
![image|433x119](upload://25oRC8PDwLiilaWVLOdo4hgZPOE.png) 

On Whonix Workstation, I get error messages as following:
![image|690x200](upload://zikC7KcEB4oWDDGhbdRwT1J0Ff7.png) 

where we see the Google public DNS (8.8.8.8), so I guess that, despite I&#39;m contacting a machine in the private network, these requests go to resolve DNS on Internet.

I think that this error could be due to Whonix contacts a Tor DNS server for DNS resolution. To solve should I change the content of `/etc/resolv.conf` in Whonix Workstation and/or Whonix Gateway or other items? How can I solve this issue in the &quot;safest&quot; way by lowering the impact on the anonymity?

I tried to change the content of `/etc/resolv.conf` of Whonix Workstation XFCE with &quot;nameserver 8.8.8.8&quot;, rebooted the machine but when I launch that command on metasploit, I get the same error.

About my doubts on anonymity if I allow the Workstation to contact 8.8.8.8, reading this post https://forums.whonix.org/t/another-dns-thatn-10-152-152-10/1508/2 I think that the only information that I give to an external entity is:
1- They can understand that I&#39;m not using a Tor DNS server for DNS resolution;
2- They can log the IP address of the Tor exit node.
I don&#39;t know if could be other aspects.</description>
    <language>en</language>
    <lastBuildDate>Wed, 14 Apr 2021 09:48:25 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/whonix-workstation-xfce-15-0-1-5-4-issues-for-using-metasploit-framework/11436.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Whonix Workstation XFCE-15.0.1.5.4 - Issues for using Metasploit Framework</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Anonymous pentesting is banned topic here.</p>
<aside class="quote quote-modified" data-post="1" data-topic="554">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/allow-discussion-anonymous-pentesting-in-whonix-forums/554">Allow discussion anonymous pentesting in Whonix forums?</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/organization/9"><span class="badge-category-bg" style="background-color: #c3c3d1;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Building up the organization and success of the Whonix project. (contribute)">Organization</span></a>
  </div>
  <blockquote>
    Update 
In short: banned 





Like many tools, Tor / Whonix itself is a dual use tool. Due to Tor usage statistics (<a href="http://planete.inrialpes.fr/papers/TorTraffic-NSS10.pdf">http://planete.inrialpes.fr/papers/TorTraffic-NSS10.pdf</a>) and low rates of abuse, I believe that on average, Tor does more good than harm. 
Are there any statistics on pentesting tools, on their good/harm ratio? 
I am not sure the combination of anonymity and pentesting is a useful one. Which legitimate use cases come to your mind? 
At the moment I believe making anonymous pentesti…
  </blockquote>
</aside>

<aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Policy_of_Whonix_Website_and_Whonix_Chat" target="_blank" rel="noopener" title="11:05AM - 03 April 2021">Whonix – 3 Apr 21</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:110/58;"><img src="https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" class="thumbnail" width="110" height="58"></div>

<h3><a href="https://www.whonix.org/wiki/Policy_of_Whonix_Website_and_Whonix_Chat" target="_blank" rel="noopener">Policy of Whonix Website and Whonix Chat</a></h3>

<p>Whonix ™ Platform Goals, Whonix ™ Website and Chat Goals, Whonix ™ Website and Chat Non-Purposes, Usage Rules, Unwanted Topics, Banned Subjects</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Therefore I won’t go into how to anonymously run metasploit over Tor.</p>
<p>Scanning one’s own Whonix-Workstation from (virtual) internal LAN would be welcome.</p>
<ol>
<li>replace Whonix-Gateway VM (re-install or use a live DVD) with Debian (or anything, but Debian might be easier)</li>
<li>set up network interface eth1 (see package whonix-gw-network-conf for inspiration)</li>
<li>disable Whonix-Workstation firewall (or maybe not depending on what you’re testing)</li>
<li>make sure you can ping Whonix-Workstation (so networking between the two VMs is even possible)</li>
<li>run metasploit in previous VM that was Whonix-Gateway against Whonix-Workstation</li>
</ol>
<p>Scanning one’s own Whonix-Gateway from (virtual) internal LAN would be welcome.</p>
<ol>
<li>understanding a bit of <a href="https://www.whonix.org/wiki/Other_Operating_Systems">https://www.whonix.org/wiki/Other_Operating_Systems</a> would be useful</li>
<li>set up a Custom-Whonix-Workstation (easiest probably Debian) as per <a href="https://www.whonix.org/wiki/Other_Operating_Systems">https://www.whonix.org/wiki/Other_Operating_Systems</a>
</li>
<li>make sure networking is functional</li>
<li>disable Whonix-Gateway firewall (or maybe not depending on what you’re testing)</li>
<li>run metasploit in previous Whonix-Custom-Workstation against Whonix-Gateway</li>
</ol>
<p>Untested.</p>
          <p><a href="http://forums.whonix.org/t/whonix-workstation-xfce-15-0-1-5-4-issues-for-using-metasploit-framework/11436/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-workstation-xfce-15-0-1-5-4-issues-for-using-metasploit-framework/11436/2</link>
        <pubDate>Wed, 14 Apr 2021 09:48:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-11436-2</guid>
        <source url="http://forums.whonix.org/t/whonix-workstation-xfce-15-0-1-5-4-issues-for-using-metasploit-framework/11436.rss">Whonix Workstation XFCE-15.0.1.5.4 - Issues for using Metasploit Framework</source>
      </item>
      <item>
        <title>Whonix Workstation XFCE-15.0.1.5.4 - Issues for using Metasploit Framework</title>
        <dc:creator><![CDATA[Bl4ckJ4ck]]></dc:creator>
        <description><![CDATA[
            <p>Hello,<br>
I’m testing Metasploit Framework on Whonix Workstation to simulate attacks in a lab environment corresponding to a Virtual Machine in a private network (environment made by using simply VirtualBox).</p>
<p>In this lab environment I set one “victim” machine (Metasploitable 2) and two machines as attackers, one Debian 10.9 and the other one Whonix Workstation XFCE (connected to the Whonix Gateway).</p>
<p>The purpose of my test is simulating a complex scenario where different machines can communicate in a private network, where Debian and Whonix machines are also connected to Internet. The complex scenario is represented by an attack from these two machines to the Metasploitable machine where one attacker is using Whonix for anonymization.</p>
<p>After setting everything, I run the Metasploitable machine (let’s guess Private IP 192.168.58.99), and then, from the two attacker machines I execute the same command (that is a simple port scan). So:</p>
<pre><code>msfconsole
use auxiliary/scanner/portscan/syn
setg RHOSTS 192.168.58.99
run
</code></pre>
<p>On Debian 10.9 machine, it works well. The output is like:<br>
<img src="//forums.whonix.org/uploads/default/original/2X/0/0ea0a51a20a495ec281d5bdbc7c57899e4772408.png" alt="image" data-base62-sha1="25oRC8PDwLiilaWVLOdo4hgZPOE" width="433" height="119"></p>
<p>On Whonix Workstation, I get error messages as following:<br>
</p><div class="lightbox-wrapper"><a class="lightbox" href="//forums.whonix.org/uploads/default/original/2X/f/f75e999e3f70a49593ea3e1650fca38dfd22c6bd.png" data-download-href="//forums.whonix.org/uploads/default/f75e999e3f70a49593ea3e1650fca38dfd22c6bd" title="image"><img src="//forums.whonix.org/uploads/default/original/2X/f/f75e999e3f70a49593ea3e1650fca38dfd22c6bd.png" alt="image" data-base62-sha1="zikC7KcEB4oWDDGhbdRwT1J0Ff7" width="690" height="200" data-small-upload="//forums.whonix.org/uploads/default/optimized/2X/f/f75e999e3f70a49593ea3e1650fca38dfd22c6bd_2_10x10.png"></a></div><p></p>
<p>where we see the Google public DNS (8.8.8.8), so I guess that, despite I’m contacting a machine in the private network, these requests go to resolve DNS on Internet.</p>
<p>I think that this error could be due to Whonix contacts a Tor DNS server for DNS resolution. To solve should I change the content of <code>/etc/resolv.conf</code> in Whonix Workstation and/or Whonix Gateway or other items? How can I solve this issue in the “safest” way by lowering the impact on the anonymity?</p>
<p>I tried to change the content of <code>/etc/resolv.conf</code> of Whonix Workstation XFCE with “nameserver 8.8.8.8”, rebooted the machine but when I launch that command on metasploit, I get the same error.</p>
<p>About my doubts on anonymity if I allow the Workstation to contact 8.8.8.8, reading this post <a href="https://forums.whonix.org/t/another-dns-thatn-10-152-152-10/1508/2" class="inline-onebox">Another dns thatn 10.152.152.10</a> I think that the only information that I give to an external entity is:<br>
1- They can understand that I’m not using a Tor DNS server for DNS resolution;<br>
2- They can log the IP address of the Tor exit node.<br>
I don’t know if could be other aspects.</p>
          <p><a href="http://forums.whonix.org/t/whonix-workstation-xfce-15-0-1-5-4-issues-for-using-metasploit-framework/11436/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-workstation-xfce-15-0-1-5-4-issues-for-using-metasploit-framework/11436/1</link>
        <pubDate>Wed, 14 Apr 2021 02:40:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-11436-1</guid>
        <source url="http://forums.whonix.org/t/whonix-workstation-xfce-15-0-1-5-4-issues-for-using-metasploit-framework/11436.rss">Whonix Workstation XFCE-15.0.1.5.4 - Issues for using Metasploit Framework</source>
      </item>
  </channel>
</rss>
