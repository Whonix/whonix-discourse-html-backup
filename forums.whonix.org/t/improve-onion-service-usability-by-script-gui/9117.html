<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Improve Onion Service Usability by Script / GUI - Development - Whonix Forum</title>
    <meta name="description" content="I don‚Äôt approve of the attitude of the forum thread starter but this again highlights usability issues.  While usability for onion services has room for improvement, on the other thand this applies to other aspects of Whonix too. Understanding what Whonix is and Installation of Whonix is still something most people fail at. Whonix-Host will help with usability since Whonix becomes a ‚Äústandard conformant‚Äù Linux distribution available as iso. It also helps with security since then host security im...">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="9117.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Improve Onion Service Usability by Script / GUI&#39;" href="9117.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/improve-onion-service-usability-by-script-gui/9117" />
<meta name="twitter:url" content="https://forums.whonix.org/t/improve-onion-service-usability-by-script-gui/9117" />
<meta property="og:title" content="Improve Onion Service Usability by Script / GUI" />
<meta name="twitter:title" content="Improve Onion Service Usability by Script / GUI" />
<meta property="og:description" content="I don‚Äôt approve of the attitude of the forum thread starter but this again highlights usability issues.  While usability for onion services has room for improvement, on the other thand this applies to other aspects of Whonix too. Understanding what Whonix is and Installation of Whonix is still something most people fail at. Whonix-Host will help with usability since Whonix becomes a ‚Äústandard conformant‚Äù Linux distribution available as iso. It also helps with security since then host security im..." />
<meta name="twitter:description" content="I don‚Äôt approve of the attitude of the forum thread starter but this again highlights usability issues.  While usability for onion services has room for improvement, on the other thand this applies to other aspects of Whonix too. Understanding what Whonix is and Installation of Whonix is still something most people fail at. Whonix-Host will help with usability since Whonix becomes a ‚Äústandard conformant‚Äù Linux distribution available as iso. It also helps with security since then host security im..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="18 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="42 ‚ù§" />
<meta property="article:published_time" content="2020-03-13T07:42:05+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="next" href="91174658.html?page=2">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="9117.html">Improve Onion Service Usability by Script / GUI</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-13T07:42:05Z' class='post-time'>
                March 13, 2020,  7:42am
              </time>
              <meta itemprop='dateModified' content='2020-03-13T07:42:05Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I don‚Äôt approve of the attitude of the forum thread starter but this again highlights usability issues.</p>
<p>While usability for onion services has room for improvement, on the other thand this applies to other aspects of Whonix too. Understanding what Whonix is and Installation of Whonix is still something most people fail at. Whonix-Host will help with usability since Whonix becomes a ‚Äústandard conformant‚Äù Linux distribution available as iso. It also helps with security since then host security improvements are easy to deploy as probably few follow all host hardening instructions.</p>
<aside class="quote no-group" data-username="onion_knight" data-post="50" data-topic="9042">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Having an automatic system to create onion and web services integrated into Whonix, or at least a simpler way of doing it, could be a great idea.</p>
</blockquote>
</aside>
<p>I was thinking about this.</p>
<p>There are some issues with scripts for improved usability. These add a level of mysticism as people start to think the functionality is dependent on the functionality of the scripts. Things the script does not ever then starts to seem impossible. Technical background that was previously simple gets mystified. People stop looking at the actual generated configuration files.</p>
<p>For example for <a href="../onion-services-authentication/975.html" class="inline-onebox">Onion Services Authentication</a> which is probably too difficult to manually set up, I created some scripts:</p>
<ul>
<li><a href="../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/bin/anon-auth-autogen">anon-auth-autogen</a></li>
<li><a href="../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/bin/anon-server-to-client-install">anon-server-to-client-install</a></li>
<li><a href="../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-auth-autogen.8.ronn">man anon-auth-autogen</a></li>
<li><a href="../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-server-to-client-install.8.ronn">man anon-server-to-client-install</a></li>
</ul>
<p>But in case that breaks in future or doesn‚Äôt work in some case, can someone look at the actual config files or even send bug fixes for these scripts?</p>
<p>Also the bug of duplicate parsing of torrc in this thread wasn‚Äôt caught by anyone which was caused by anon-connection-wizard modifying Tor config files.</p>
<p>An onion services usability script‚Ä¶ Where does it start and where does it end? Should it support just 1 thing. Onion web server? Server on non-standard ports? Onion services authentication? I am wondering what‚Äôs the best way to implement this? Related to <a href="../focus-on-low-effort-maintainability/9067.html" class="inline-onebox">Focus on low-effort maintainability</a>.</p>
<ul>
<li>Implement declarative? I.e. Tor config file snippets which get copied [or symlinked if that is possible]) once the script runs? That is easier code, easier to review/understand but more limited as only a few use cases could be simplified that way before too many config snippets get hard to manage / too much.
<ul>
<li>
<code>sudo apt install anon-gw-onion-server-web</code> - that package shipping the required config snippets? That would allow for an easy/clean implementation but there can‚Äôt be thousands of packages supporting all use cases.</li>
<li>If going that way, there then could be a companion package <code>sudo apt install anon-ws-onion-server-web</code>.</li>
</ul>
</li>
<li>Implement functional? I.e. similar to anon-auth-autogen? Then any non-standard things (non-standard ports, something other than default webserver port) requires the script to be run with a parameter. And this script will become more complex/lengthy since it has to handle these variables.
<ul>
<li>Similar to <code>sudo virtport=80 hsport=80 hsname=hidden_service client=1 anon-auth-autogen</code>.</li>
<li>Users would then more or less mindlessly copy/paste such commands from the wiki. But would that effort be useful? If it‚Äôs a copy/paste job anyhow, could instead could also just provide one-liners in the wiki. See <a href="../to-use-or-to-not-use-one-liners-this-is-the-question/4824.html" class="inline-onebox">to use or to not use One-Liners - this is the question</a>. And then the effort for the script could be saved.</li>
</ul>
</li>
</ul>
<p>As for onion services usability GUI‚Ä¶ Well, I regard a GUI a frontend. Before frontend development makes sense, there needs be a backend, the script. If the script isn‚Äôt easy to use, then it‚Äôs also not easy to write a mostly bug free GUI. By separating backend and frontend also debugging gets easier and hopefully things are also easier to understand.</p>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../configuring-onion-service/9042/51.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../configuring-onion-service/9042/51.html'>
                      <span itemprop='name'>Configuring Onion Service</span>
                    </a>
                    <meta itemprop='position' content='8'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/anontor'><span itemprop='name'>anontor</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-13T22:10:48Z' class='post-time'>
                March 13, 2020, 10:10pm
              </time>
              <meta itemprop='dateModified' content='2020-03-13T22:10:48Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I would suggest something basic. Reason being is that different users have different requirements. Creating and hardening a functional onion service takes a lot of time and careful planning. Time that may be taken away from Whonix‚Äôs other priorities. Add to that the almost endless permutations of configurations, and soon the task becomes formidable.</p>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nyxnor'><span itemprop='name'>nyxnor</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-02-10T20:07:12Z' class='post-time'>
                February 10, 2022,  8:07pm
              </time>
              <meta itemprop='dateModified' content='2022-02-11T17:53:07Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I have some usability scripts on <a href="../../../external.html?link=https://github.com/nyxnor/onionjuggler" rel="noopener nofollow ugc">onionjuggler</a> - <a href="../../../external.html?link=https://github.com/nyxnor/onionjuggler/blob/main/docs/onionjuggler-cli.1.md" rel="noopener nofollow ugc">Manual</a></p>
<p>I have not made any release, so it should be considered <strong>beta</strong>, there is a warning on the readme about it, so use it on a testing machine.</p>
<p>It is platform agnostic and it has a prepared <a href="../../../external.html?link=https://github.com/nyxnor/onionjuggler/blob/main/etc/onionjuggler/debian.conf" rel="noopener nofollow ugc">/etc/onionjuggler/debian.conf</a></p>
<p>It does not have a GUI which would be nice, but it has a TUI (dialog, whiptail).</p>
<p>Features:</p>
<ul>
<li>it modifies a temporary copy of the torrc, which can be set on onionjuggler.conf to an alternative file for Whonix users. Then, it verifies if the modified copy will let tor start, if it doesn‚Äôt, it dismiss the copy (remove it) and error out with informative message. This avoids breaking tor. If the config is ok, then the copy is placed on the original file and tor is reloaded.</li>
<li>the values are checked if they are valid, such as the service name not having special characters, port being an integer and target not being already in use.</li>
<li>onion authentication client and server side (you can generate a key pair or use the private or public part to be inserted in the respective config).</li>
<li>webserver - it works with nginx and apache2 and work is being made to work with openbsd-httpd. It requires on nginx and apache2 to have the <code>sites-enabled</code> folder, documented <a href="../../../external.html?link=https://github.com/nyxnor/onionjuggler/blob/main/docs/compatibility.md#configuring-web-server" rel="noopener nofollow ugc">on compatibility.md</a>, but that is already default for debian nginx. The webserver configuration is minimal, as it is not possible to cover all user cases.</li>
<li>not only related to onion services, but vanguards installation script. The debian package is too old, from 2019, and I prefer to be running from git.</li>
</ul>
<p>I can add a debian folder to make it a debian package if needed, but for now, the installation method is with the configure.sh script.</p>
<p>To create a service named terminator, it is as easy as possible:</p>
<pre><code class="lang-auto">onionjuggler-cli on -s xmpp -S tcp
</code></pre>
<p>But can be as advanced as specifying all the parameters:</p>
<pre><code class="lang-auto">onionjuggler-cli on --service xmpp --socket tcp --version 3 --port "5222 5269 5280 5281"
</code></pre>
<p>If you use <code>5222,127.0.0.1:5222</code>, the virtport is the first part and the target is the second, but it is unecessary to specify if mapped to the same port from virtport. The script will insert the target anyway because later it will be checked if the target is already in use by another hs.</p>
<p>Add clients to your onion service:</p>
<pre><code class="lang-auto">onionjuggler-cli auth-server --on --service ssh --client bob,jane
#onionjuggler-cli auth-server -n -s ssh -c bob,jane
</code></pre>
<p>Add credentials as the client:</p>
<pre><code class="lang-auto">onionjuggler-cli auth-client --on --onion &lt;ONION&gt;] [--client-priv-key &lt;CLIENT_PRIV_KEY&gt;]
</code></pre>
<p>This command can be improved by copying a file .auth_private as it is done by anon-auth-autogen, so it can be shorter.</p>
<p>Add webserver configuration for your onion:</p>
<pre><code class="lang-auto">onionjuggler-cli web --on --service some_service --folder website_folder
</code></pre>
<p>List onion services, the configuration lines and all the clients names:</p>
<pre><code class="lang-auto">## list all services
onionjuggler-cli list -s @all
## list only specified services
onionjuggler-cli list -s ssh,xmpp
## list but without generating qr code of the hostname
onionjuggler-cli list -s ssh,xmpp --quiet
</code></pre>
<p>More options can be seen on the manual or running with <code>-h</code>.</p>
<p>The idea why I made this repo was to be an OnionShare but for data written to disk, so it is a completely different use case.</p>
<p>Questions someone might have:</p>
<p>Why is the script so big?<br>
It does a lot of checking before even attempting to make any changes, and after the changes are done to temporary file, it is checked if it valid, and a lot of checks.</p>
<p>Requirements?<br>
Few: tor grep sed tar openssl basez git python3-stem qrencode whiptail nginx</p>
<p>Tar is only necessary for backups<br>
Basez and Openssl for onion client auth<br>
python3-stem for Vanguards<br>
QRencode is used to show the hostname in qr format<br>
nginx for the webservice but it can be apache2 or I can maybe not make it mandatory</p>
<p>About abstracting from the user to edit configuration files:</p>
<ul>
<li>the modification is printed to the screen and the file that was changed is also printed, so they can check later if they think it is not right</li>
<li>modifying manually is error prone
<ul>
<li>no downtime by rejecting invalid configuration before applying them to be used. what good does it make if you don‚Äôt know how to edit configuration files correctly, better to do it automatically than manually</li>
<li>complete uniformity. Standards are important.</li>
<li>graphical interface to help newbies. If they are too afraid, they can use the TUI, or later if someone helps me with GTK or whatever works would be cool.</li>
</ul>
</li>
</ul>
<p>About taking too much time to develop:</p>
<ul>
<li>to write yes, but it enhanced over the months</li>
<li>to maintain, only if the checks fails to get an incorrect parameter
<ul>
<li>there is no known bug on debian</li>
<li>on whonix, untested, and probably default to this ip 10.152.152.11 if whonix marker is detected</li>
<li>on openbsd, it is lacking the webserver part and vanguards for rc.d</li>
<li>on other platforms, untested, because of time.</li>
</ul>
</li>
</ul>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nyxnor'><span itemprop='name'>nyxnor</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-02-10T20:11:07Z' class='post-time'>
                February 10, 2022,  8:11pm
              </time>
              <meta itemprop='dateModified' content='2022-02-10T20:11:07Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="anontor" data-post="2" data-topic="9117" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/a/b2d939/40.png" class="avatar"> anontor:</div>
<blockquote>
<p>I would suggest something basic. Reason being is that different users have different requirements. Creating and hardening a functional onion service takes a lot of time and careful planning. Time that may be taken away from Whonix‚Äôs other priorities. Add to that the almost endless permutations of configurations, and soon the task becomes formidable.</p>
</blockquote>
</aside>
<p>Started with 100 lines of code, but as there were no checks, tor would fail if target was repeated, service name contained special characters and many other failures.</p>
<blockquote>
<p>The permutation of configuration</p>
</blockquote>
<p>If an user puts hidden services on different tor configuration files, the script will not get erros before applying the configuration, because it would not detected repeated service names or targets. So it needs a singled torrc to be edited.</p>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nyxnor'><span itemprop='name'>nyxnor</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-02-13T22:30:12Z' class='post-time'>
                February 13, 2022, 10:30pm
              </time>
              <meta itemprop='dateModified' content='2022-02-13T22:30:12Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>It can now be build as a debian package and has a whonix.conf, plus the target ip being detected if being qubes whonix, non-qubes, and optionally enforcing 127.0.0.1 for services of the gateway. Will test on Whonix soon.</p>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nyxnor'><span itemprop='name'>nyxnor</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-02-17T00:56:01Z' class='post-time'>
                February 17, 2022, 12:56am
              </time>
              <meta itemprop='dateModified' content='2022-02-17T00:56:01Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Still not ready because the webserver should be on the workstation, not on the gateway, but progress is being documented on</p><aside class="onebox githubissue" data-onebox-src="../../../external.html?link=https://github.com/nyxnor/onionjuggler/issues/54">
  <header class="source">

      <a href="../../../external.html?link=https://github.com/nyxnor/onionjuggler/issues/54" target="_blank" rel="noopener nofollow ugc">github.com/nyxnor/onionjuggler</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewbox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/nyxnor/onionjuggler/issues/54" target="_blank" rel="noopener nofollow ugc">[FEATURE REQUEST] whonix support</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-02-14" data-time="10:14:59" data-timezone="UTC">10:14AM - 14 Feb 22 UTC</span>
      </div>


      <div class="user">
        <a href="../../../external.html?link=https://github.com/nyxnor" target="_blank" rel="noopener nofollow ugc">
          <img alt="nyxnor" src="../../../external.html?link=https://avatars.githubusercontent.com/u/69700936?v=4" class="onebox-avatar-inline" width="20" height="20">
          nyxnor
        </a>
      </div>
    </div>

    <div class="labels">
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          enhancement
        </span>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">**Is your feature request related to a problem? Please describe.**

It is miss<span class="show-more-container"><a href="#" rel="noopener" class="show-more">‚Ä¶</a></span><span class="excerpt hidden">ing setting the correct configuration file on https://github.com/nyxnor/onionjuggler/blob/4006a3d249868d7bda8befdc1e18e13d799cca58/configure.sh#L239
it just needs to test if its the GW and if it is the WS, than block it and warn to run on GW.

same flow as was done here basically
https://github.com/nyxnor/onionjuggler/blob/4006a3d249868d7bda8befdc1e18e13d799cca58/usr/bin/onionjuggler-cli#L657-L666

**Describe the solution you'd like**



**Describe alternatives you've considered**



**Additional context**

- https://github.com/nyxnor/onionjuggler/commit/b645b85e9e10c404ab1d66d70df17bdad22db337 - define target for whonix-gw running on qubes, non-qubes, for itself</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-02-17T08:55:34Z' class='post-time'>
                February 17, 2022,  8:55am
              </time>
              <meta itemprop='dateModified' content='2022-02-17T08:55:34Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I haven‚Äôt read all yet.</p>
<p>Thank you for working on this!</p>
<aside class="quote no-group" data-username="nyxnor" data-post="6" data-topic="9117">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/nyxnor/40/2874_2.jpg" class="avatar"> nyxnor:</div>
<blockquote>
<p>Still not ready because the webserver should be on the workstation, not on the gateway, but progress is being documented on</p>
</blockquote>
</aside>
<p>Not sure how that would be best implemented. Both has advantages and disadvantages.</p>
<ul>
<li>A) ‚ÄúEphemeral‚Äù Tor onion services (created through Tor control protocol) have the advantage that no commands on the gateway need to be run except extending onion-grater whitelist. Disadvantage is that the workstation has a copy of the onion service private key. Therefore an onion service running in a compromised workstation could be impersonated.</li>
<li>B) Setting up an onion service through Tor config files configuration on the gateway would require two commands. First, setting up the onion service. And second, running corresponding commands to set up the server on the workstation.</li>
</ul>
<p>Ideally a single command somewhere would all set it up. In Qubes-Whonix it might be possible by using qrexec. Running the command in the gateway and then the gateway asking the workstation for permission to set up the web server through qrexec, to be confirmed through a dom0 question popup, perhaps. For Non-Qubes-Whonix I have no idea how to further improve usability for onion service setup.</p>
<p>related:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="../../../external.html?link=https://www.whonix.org/wiki/Onion-grater">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="../../../external.html?link=https://www.whonix.org/wiki/Onion-grater" target="_blank" rel="noopener" title="11:34AM - 26 January 2022">Whonix ‚Äì 26 Jan 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/426;"><img src="../../../external.html?link=https://www.whonix.org/w/images/6/6b/Oniongrater123123.jpg" class="thumbnail" width="640" height="426"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Onion-grater" target="_blank" rel="noopener">onion-grater: a Tor Control Port Filter Proxy</a></h3>

  <p>information about onion-grater</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nyxnor'><span itemprop='name'>nyxnor</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-02-17T11:46:16Z' class='post-time'>
                February 17, 2022, 11:46am
              </time>
              <meta itemprop='dateModified' content='2022-02-17T11:46:16Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>A) Ephemeral</p>
</blockquote>
<p>That is one big disadvantage loosing whonix protection of host separation. Also not trivial not only because it would circumvent whonix protection, but because tor‚Äôs controller doe not show the port service is running on. Example: setup an ephemeral onion service (<code>tor-ctrl-onion -A -l 80</code>) and try to get any information about it, if I send <code>GETINFO onions/detached</code> or <code>tor-ctrl-onion -L</code>, it only show the hostnames. This means that the webserver script cannot consult the controller to find the port it is running on, the hs pk would need to be saved along side its port for this to work, and a format to be defined. Related:</p><aside class="onebox githubissue" data-onebox-src="../../../external.html?link=https://github.com/nyxnor/tor-ctrl/issues/26">
  <header class="source">

      <a href="../../../external.html?link=https://github.com/nyxnor/tor-ctrl/issues/26" target="_blank" rel="noopener nofollow ugc">github.com/nyxnor/tor-ctrl</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewbox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/nyxnor/tor-ctrl/issues/26" target="_blank" rel="noopener nofollow ugc">tor-ctrl-onion: read PKs from directory or file and set the services up</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-02-17" data-time="01:27:22" data-timezone="UTC">01:27AM - 17 Feb 22 UTC</span>
      </div>


      <div class="user">
        <a href="../../../external.html?link=https://github.com/nyxnor" target="_blank" rel="noopener nofollow ugc">
          <img alt="nyxnor" src="../../../external.html?link=https://avatars.githubusercontent.com/u/69700936?v=4" class="onebox-avatar-inline" width="20" height="20">
          nyxnor
        </a>
      </div>
    </div>

    <div class="labels">
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">this would facilitate a lot, you only specify the directory of the file that con<span class="show-more-container"><a href="#" rel="noopener" class="show-more">‚Ä¶</a></span><span class="excerpt hidden">tains the onion services pk and it will be activated, so no need to copy contents to the command line and also facilitates if you want to setup a lot of services on the controller.</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<ul>
<li>maybe a <code>--permanent</code> flag to be used so tor-ctrl-onion saves the PK and the ports and  flags to a file, but every time tor receives and INT signal, the user would need to re add those files to the controller, possibly by a systemd script that send these commands after tor is (re)started.</li>
<li>this is the easy but less secure option, but does this usability justify the compromise? I mean, almost non whonix user is already running with their PKs on the same host unless they have enough knowledge to configure a remote host controller, and making whonix onion services vulnerable to attacks that already happen on other systems is not a gain on my view, even though the <code>permanent</code> option can still be done because it might be useful anyway.</li>
</ul>
<blockquote>
<p>B) config files</p>
</blockquote>
<ul>
<li>qubes-whonix ‚Üí qrexec as mentioned above</li>
<li>non-qubes-whonix ‚Üí <code>--web</code> option would need to circumnvent if check if service exists and the ports would need to be provided via command line, and yes, would be one command on the gateway and one on the workstation. GW <code>onionjuggler-cli --activate -s web -p 80</code>, WS <code>onionjuggler-cli --web -s web -n -p 80 -w /var/www/folder --no-check-service</code>. There is no such option yet, would need to be checked if this is viable.</li>
</ul>
<p>Anyway, the web option is not magic, it is a sample nginx virtualhost configuration file for static webpages, advanced uses will always need to be done manually.</p>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-02-17T13:12:16Z' class='post-time'>
                February 17, 2022,  1:12pm
              </time>
              <meta itemprop='dateModified' content='2022-02-17T13:12:16Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>B) config files</p>
</blockquote>
<p>Seems more appropriate in case of Whonix sacrificing a bit usability for better onion service private key protection.</p>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nyxnor'><span itemprop='name'>nyxnor</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-02-17T17:43:24Z' class='post-time'>
                February 17, 2022,  5:43pm
              </time>
              <meta itemprop='dateModified' content='2022-02-17T19:32:32Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/patrick">@patrick</a> sorry to ping but can the gateway now the workstation qube ip?</p><aside class="onebox githubissue" data-onebox-src="../../../external.html?link=https://github.com/nyxnor/onionjuggler/issues/54#issuecomment-1043225820">
  <header class="source">

      <a href="../../../external.html?link=https://github.com/nyxnor/onionjuggler/issues/54#issuecomment-1043225820" target="_blank" rel="noopener nofollow ugc">github.com/nyxnor/onionjuggler</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewbox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/nyxnor/onionjuggler/issues/54#issuecomment-1043225820" target="_blank" rel="noopener nofollow ugc">[FEATURE REQUEST] whonix support</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-02-14" data-time="10:14:59" data-timezone="UTC">10:14AM - 14 Feb 22 UTC</span>
      </div>


      <div class="user">
        <a href="../../../external.html?link=https://github.com/nyxnor" target="_blank" rel="noopener nofollow ugc">
          <img alt="nyxnor" src="../../../external.html?link=https://avatars.githubusercontent.com/u/69700936?v=4" class="onebox-avatar-inline" width="20" height="20">
          nyxnor
        </a>
      </div>
    </div>

    <div class="labels">
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          enhancement
        </span>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">**Is your feature request related to a problem? Please describe.**

It is miss<span class="show-more-container"><a href="#" rel="noopener" class="show-more">‚Ä¶</a></span><span class="excerpt hidden">ing setting the correct configuration file on https://github.com/nyxnor/onionjuggler/blob/4006a3d249868d7bda8befdc1e18e13d799cca58/configure.sh#L239
it just needs to test if its the GW and if it is the WS, than block it and warn to run on GW.

same flow as was done here basically
https://github.com/nyxnor/onionjuggler/blob/4006a3d249868d7bda8befdc1e18e13d799cca58/usr/bin/onionjuggler-cli#L657-L666

**Describe the solution you'd like**



**Describe alternatives you've considered**



**Additional context**

- https://github.com/nyxnor/onionjuggler/commit/b645b85e9e10c404ab1d66d70df17bdad22db337 - define target for whonix-gw running on qubes, non-qubes, for itself 

- http://forums.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/t/improve-onion-service-usability-by-script-gui/9117/8</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p>
I copied the code from <a href="../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/c0d9e66dd3d5d84bdce9caeab6d4c1c5624dbfe0/usr/bin/anon-auth-autogen#L84" rel="noopener nofollow ugc">https://github.com/Whonix/anon-gw-anonymizer-config/blob/c0d9e66dd3d5d84bdce9caeab6d4c1c5624dbfe0/usr/bin/anon-auth-autogen#L84</a> which I thought was supposed to be ran on the GW according to <a href="../../../external.html?link=http://www.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/Onion_Services#Step_3:_Configure_Onion_Services_Authentication" rel="noopener nofollow ugc">http://www.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/Onion_Services#Step_3:_Configure_Onion_Services_Authentication</a>, but the qube ip read would be from the GW, not from the WS.</p>
<p>Edit: I guess not because of multiple GWs and WSs having to be configured per vm <a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/4117" rel="noopener nofollow ugc">https://github.com/QubesOS/qubes-issues/issues/4117</a>  and <a href="../../../external.html?link=https://www.whonix.org/wiki/Multiple_Whonix-Workstation#qubes" class="inline-onebox" rel="noopener nofollow ugc">Multiple Whonix-Workstation ‚Ñ¢</a></p>
<p>do it is not possible to get the WS qube IP from the qubesdb-read command, I couldn‚Äôt find a way. What remains is using a variable on whonix.conf to set the WS IP, but this also has to be done manually or the user would need to specify the target every time.</p>
<p>Specifying a different domain is only available on dom0</p>
<pre><code class="lang-auto">qubesdb-read -d anon-whonix /qubes-ip
</code></pre>
<p>but this does not guarantee that the user is using the anon-whonix as the WS.</p>
<p>Well, seems target for qube-whonix is manual job as in <a href="../../../external.html?link=http://www.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/Onion_Services#Step_2:_Edit_Tor_Configuration:" rel="noopener nofollow ugc">http://www.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/Onion_Services#Step_2:_Edit_Tor_Configuration:</a><br>
on WS run:</p>
<pre><code class="lang-auto">qubesdb-read /qubes-ip
</code></pre>
<p>on GW run:</p>
<pre><code class="lang-auto">onionjuggler-cli --activate -s web -p 80,{ws_qube_ip}:80
</code></pre>
<p>on WS run (target_port=80):</p>
<pre><code class="lang-auto">onionjuggler-cli --web -s web -p 80 -n --no-check-service -w /var/www/folder
</code></pre>
<p>Now possible to set the WS qube IP address on <code>/etc/onionjuggler/conf.d/*.conf</code>:</p>
<pre><code class="lang-auto">tor_hiddenserviceport_target_addr=WS-QUBE-IP-ADDR
</code></pre>
<p>But the command line target if specified will overwrite this option.<br>
so after setting the above configuration option, it is possible to create services for the WS on the GW with:</p>
<pre><code class="lang-auto">onionjuggler-cli --activate -s web -p 80
</code></pre>
<p>and if running qubes whonix and the option <code>tor_hiddenserviceport_target_addr</code> is still <code>127.0.0.1</code> and the service is not for the gateway, it will fail with an informative error message to set the WS qube ip address on the configuration or obviously possible to specify on the command line.</p>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-02-18T13:50:39Z' class='post-time'>
                February 18, 2022,  1:50pm
              </time>
              <meta itemprop='dateModified' content='2022-02-18T13:50:39Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-username="nyxnor" data-post="10" data-topic="9117">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/nyxnor/40/2874_2.jpg" class="avatar"> nyxnor:</div>
<blockquote>
<p><a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/patrick">@patrick</a> sorry to ping but can the gateway now the workstation qube ip?</p>
<p><a href="../../../external.html?link=https://github.com/nyxnor/onionjuggler/issues/54#issuecomment-1043225820">https://github.com/nyxnor/onionjuggler/issues/54#issuecomment-1043225820</a></p>
</blockquote>
</aside>
<p>I don‚Äôt know if there‚Äôs a reliable/sane way for that.</p>
<aside class="quote no-group" data-username="nyxnor" data-post="10" data-topic="9117">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/nyxnor/40/2874_2.jpg" class="avatar"> nyxnor:</div>
<blockquote>
<p>I copied the code from <a href="../../../external.html?link=https://github.com/Whonix/anon-gw-anonymizer-config/blob/c0d9e66dd3d5d84bdce9caeab6d4c1c5624dbfe0/usr/bin/anon-auth-autogen#L84">https://github.com/Whonix/anon-gw-anonymizer-config/blob/c0d9e66dd3d5d84bdce9caeab6d4c1c5624dbfe0/usr/bin/anon-auth-autogen#L84</a></p>
</blockquote>
</aside>
<p>Only that part of most of <code>anon-auth-autogen</code>? Btw most of <code>anon-auth-autogen</code> would be good if upstreamed, different name, and not part of <code>anon-gw-anonymizer-config</code>.</p>
<aside class="quote no-group" data-username="nyxnor" data-post="10" data-topic="9117">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/nyxnor/40/2874_2.jpg" class="avatar"> nyxnor:</div>
<blockquote>
<p>Edit: I guess not because of multiple GWs and WSs having to be configured per vm <a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/4117">https://github.com/QubesOS/qubes-issues/issues/4117</a> and <a href="../../../external.html?link=https://www.whonix.org/wiki/Multiple_Whonix-Workstation#qubes">Multiple Whonix-Workstation ‚Ñ¢</a></p>
</blockquote>
</aside>
<p>Indeed.</p>
<p>Also I guess if we had <a href="../../../external.html?link=https://phabricator.whonix.org/T947" class="inline-onebox">‚öì T947 Qubes-Whonix eth1 static networking</a> that might help.</p>
<aside class="quote no-group" data-username="nyxnor" data-post="10" data-topic="9117">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/nyxnor/40/2874_2.jpg" class="avatar"> nyxnor:</div>
<blockquote>
<p>do it is not possible to get the WS qube IP from the qubesdb-read command, I couldn‚Äôt find a way.</p>
</blockquote>
</aside>
<p>I doubt that exists.</p>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nyxnor'><span itemprop='name'>nyxnor</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-02-18T15:40:20Z' class='post-time'>
                February 18, 2022,  3:40pm
              </time>
              <meta itemprop='dateModified' content='2022-02-18T15:40:20Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="11" data-topic="9117">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Only that part of most of <code>anon-auth-autogen</code>? Btw most of <code>anon-auth-autogen</code> would be good if upstreamed, different name, and not part of <code>anon-gw-anonymizer-config</code>.</p>
</blockquote>
</aside>
<p>Yes, I only copied that part (but removed, as it was not working as explained above because it reads the GW ip, not the WS), the rest, <code>onionjuggler-cli --auth-server</code> and <code>--auth-client</code> already had, except installing from a file.</p>
<p>So onionjuggler-cli will eventually substitute that script if implemented. So upstreaming onionjuggler-cli later would be better.</p>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nyxnor'><span itemprop='name'>nyxnor</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-08-08T14:09:34Z' class='post-time'>
                August 8, 2022,  2:09pm
              </time>
              <meta itemprop='dateModified' content='2022-08-08T14:59:58Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The setup currently is very easy. Should opening firewall ports be automated to  <code>/usr/local/etc/whonix_firewall.d/45_onionjuggler.conf</code>?</p>
<h3>
<a name="ws-1" class="anchor" href="#ws-1"></a>WS</h3>
<p>Configure web service:</p>
<pre><code class="lang-auto">sudo onionjuggler-cli-web --on -s &lt;MY_SITE&gt; --folder &lt;SITE_FOLDER&gt; -p 80
</code></pre>
<p>Allow port from the firewall:</p>
<pre><code class="lang-auto">sudo mkdir -p /usr/local/etc/whonix_firewall.d
echo "EXTERNAL_OPEN_PORTS+=\" 80 \"" | sudo tee -a /usr/local/etc/whonix_firewall.d/50_user.conf
sudo whonix_firewall
</code></pre>
<h3>
<a name="gw-2" class="anchor" href="#gw-2"></a>GW</h3>
<p>Configure service:</p>
<pre><code class="lang-auto">sudo onionjuggler-cli --activate -s &lt;MY_SITE&gt; -p "80 &lt;WS_QUBE_IP&gt;"
</code></pre>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-08-09T16:37:04Z' class='post-time'>
                August 9, 2022,  4:37pm
              </time>
              <meta itemprop='dateModified' content='2022-08-09T16:37:04Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Yes, sure would be nice. Bonus points for transparently pointing out what systemd changes onionjuggler is applying (where, what kind of changes).</p>
<p>I don‚Äôt think there is any convention in Debian or elsewhere how applications that create configs for users should operate as per configuration file location such as in /etc or /var and naming.</p>
<aside class="quote no-group" data-username="nyxnor" data-post="13" data-topic="9117">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/nyxnor/40/2874_2.jpg" class="avatar"> nyxnor:</div>
<blockquote>
<p>/usr/local/etc/whonix_firewall.d/45_onionjuggler.conf</p>
</blockquote>
</aside>
<p><code>45_onionjuggler.conf</code> looks good.</p>
<p>Not sure about the numbering:<br>
<a href="../config-files-numbering-convention/14422.html" class="inline-onebox">config files numbering convention</a></p>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nyxnor'><span itemprop='name'>nyxnor</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-08-09T16:44:10Z' class='post-time'>
                August 9, 2022,  4:44pm
              </time>
              <meta itemprop='dateModified' content='2022-08-09T16:44:10Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="14" data-topic="9117">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Yes, sure would be nice. Bonus points for transparently pointing out what systemd changes onionjuggler is applying (where, what kind of changes).</p>
</blockquote>
</aside>
<p>For users or developers?</p>
<ul>
<li>If for users, then I‚Äôd print an info about the whonix firewall port that was opened.</li>
<li>if for developers, then it would only be on the docs.</li>
</ul>
<aside class="quote no-group" data-username="Patrick" data-post="14" data-topic="9117">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Not sure about the numbering:</p>
</blockquote>
</aside>
<p>Not sure about the numbering:</p>
<p>Should it use 40 like: <code>/usr/local/etc/torrc.d/40_tor_control_panel.conf</code> does?</p>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nyxnor'><span itemprop='name'>nyxnor</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-08-09T17:43:04Z' class='post-time'>
                August 9, 2022,  5:43pm
              </time>
              <meta itemprop='dateModified' content='2022-08-09T17:43:04Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I want to print the ws ip and the port allowed, how  can I find the WS ip inside the WS for Non-Qubes-Whonix?</p>
<p>for qubes-whonix is qubesdb-read /qubes-ip, but for non-whonix I don‚Äôt know how to find its ip.</p>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-08-09T19:06:41Z' class='post-time'>
                August 9, 2022,  7:06pm
              </time>
              <meta itemprop='dateModified' content='2022-08-09T19:06:41Z'>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="nyxnor" data-post="15" data-topic="9117">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/nyxnor/40/2874_2.jpg" class="avatar"> nyxnor:</div>
<blockquote>
<p>For users or developers?</p>
<ul>
<li>If for users, then I‚Äôd print an info about the whonix firewall port that was opened.</li>
</ul>
</blockquote>
</aside>
<p>For users. Point out the path to the config file too? I think it would be a good idea.</p>
<p>The rationale behind this has been documented just now:</p><aside class="onebox allowlistedgeneric" data-onebox-src="../../../external.html?link=https://www.kicksecure.com/wiki/Dev/Self_Documenting">
  <header class="source">
      <img src="../../../external.html?link=https://www.kicksecure.com/w/images/4/45/Kicksecure-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Dev/Self_Documenting" target="_blank" rel="noopener" title="06:58PM - 09 August 2022">Kicksecure ‚Äì 9 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/388;"><img src="../../../external.html?link=https://www.kicksecure.com/w/images/f/fc/Kicksecure-twitter-post.jpg?version=30a0ad75271a4836786771c345c960b8" class="thumbnail" width="690" height="388"></div>

<h3><a href="../../../external.html?link=https://www.kicksecure.com/wiki/Dev/Self_Documenting" target="_blank" rel="noopener">The Self Documenting Concept</a></h3>

  <p>Ideally complex tools should be self-documenting. In an ideal world, no documentation reading should be required from the user. No wrong impressions should be created.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="nyxnor" data-post="15" data-topic="9117">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/nyxnor/40/2874_2.jpg" class="avatar"> nyxnor:</div>
<blockquote>
<p>Should it use 40 like: <code>/usr/local/etc/torrc.d/40_tor_control_panel.conf</code> does?</p>
</blockquote>
</aside>
<p>Good comparison. Sounds good.</p>
<aside class="quote no-group" data-username="nyxnor" data-post="16" data-topic="9117" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/nyxnor/40/2874_2.jpg" class="avatar"> nyxnor:</div>
<blockquote>
<p>I want to print the ws ip and the port allowed, how can I find the WS ip inside the WS for Non-Qubes-Whonix?</p>
</blockquote>
</aside>
<p>Probably required parsing <code>ifconfig</code> but requires root afaik but I guess that is available in this situation anyhow. There‚Äôs hopefully a number of helpful posts on:</p>
<blockquote>
<p>bash how to find out local IP</p>
</blockquote>
<p>on stackexchange etc. I found some answers but I never liked the parsing of <code>ifconfig</code>. Was hoping there‚Äôs a nicer API or tool for this.</p>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nyxnor'><span itemprop='name'>nyxnor</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-08-09T19:48:18Z' class='post-time'>
                August 9, 2022,  7:48pm
              </time>
              <meta itemprop='dateModified' content='2022-08-09T19:48:18Z'>
          <span itemprop='position'>#18</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="17" data-topic="9117">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>For users. Point out the path to the config file too? I think it would be a good idea.</p>
</blockquote>
</aside>
<p>Ok.<br>
But I‚Äôd rather users not change the config file manually because it may break the script.<br>
Anyway, I can document this.<br>
Also, there is a simple way to see configuration files manages by onionjuggler:</p>
<pre><code class="lang-auto">$ onionjuggler-cli --getconf

openssl_cmd="openssl"
webserver="nginx"
webserver_conf="/etc/nginx/sites-enabled"
website_dir="/var/www"
vanguards_commit="10942de93f6578f8303f60014f34de2fca345545"
tor_daemon="tor@default"
tor_user="debian-tor"
tor_conf_dir="/usr/local/etc/torrc.d"
tor_conf_user_group="root:root"
tor_conf="/usr/local/etc/torrc.d/40_onionjuggler.conf"
tor_data_dir="/var/lib/tor"
tor_data_dir_services="/var/lib/tor/services"
tor_data_dir_auth="/var/lib/tor/authdir"
tor_control_port="9051"
tor_backup_dir="/var/lib/onionjuggler/backup"
</code></pre>
<p>missing the variable for the whonix_firewall conf, but it might be added later because for now it is default to use /usr/local/etc/wonix_firewall.d/40_onionjuggler.conf</p>
<aside class="quote no-group" data-username="Patrick" data-post="17" data-topic="9117">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>on stackexchange etc. I found some answers but I never liked the parsing of <code>ifconfig</code>. Was hoping there‚Äôs a nicer API or tool for this.</p>
</blockquote>
</aside>
<p>I just asked because I thought there was a whonix way.</p>
<pre><code class="lang-auto">ip a | grep "inet .* eth0$" | sed "s/.*inet //;s/\/32.*//"
</code></pre>
<pre><code class="lang-auto">ip r get 1.1.1.1 | grep 1.1.1.1 | sed "s/.*src //;s/ uid .*//"
</code></pre>
<pre><code class="lang-auto">sudo ifconfig | sed -n "/eth0/,/inet/p" | grep inet| sed "s/.*inet //;s/  netmask .*//"
</code></pre>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-08-10T08:49:24Z' class='post-time'>
                August 10, 2022,  8:49am
              </time>
              <meta itemprop='dateModified' content='2022-08-10T08:49:24Z'>
          <span itemprop='position'>#19</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="nyxnor" data-post="18" data-topic="9117">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/nyxnor/40/2874_2.jpg" class="avatar"> nyxnor:</div>
<blockquote>
<p>But I‚Äôd rather users not change the config file manually because it may break the script.</p>
</blockquote>
</aside>
<p>Yes. Most users shouldn‚Äôt do it. Not supposed to be manually changed. Just useful in case there‚Äôs ever a bug then advanced users already get the idea to look into that file and report it.</p>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nyxnor'><span itemprop='name'>nyxnor</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9117.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-08-12T23:40:05Z' class='post-time'>
                August 12, 2022, 11:40pm
              </time>
              <meta itemprop='dateModified' content='2022-08-12T23:40:05Z'>
          <span itemprop='position'>#20</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="19" data-topic="9117">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Yes. Most users shouldn‚Äôt do it. Not supposed to be manually changed. Just useful in case there‚Äôs ever a bug then advanced users already get the idea to look into that file and report it.</p>
</blockquote>
</aside>
<p>This was done where I could catch on recent commits.</p>
<p>Auth scripts now have some activation options</p><aside class="onebox githubissue" data-onebox-src="../../../external.html?link=https://github.com/nyxnor/onionjuggler/issues/48">
  <header class="source">

      <a href="../../../external.html?link=https://github.com/nyxnor/onionjuggler/issues/48" target="_blank" rel="noopener nofollow ugc">github.com/nyxnor/onionjuggler</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewbox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/nyxnor/onionjuggler/issues/48" target="_blank" rel="noopener nofollow ugc">[FEATURE REQUEST] add authorizations files that already exist</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-02-11" data-time="15:10:45" data-timezone="UTC">03:10PM - 11 Feb 22 UTC</span>
      </div>


      <div class="user">
        <a href="../../../external.html?link=https://github.com/nyxnor" target="_blank" rel="noopener nofollow ugc">
          <img alt="nyxnor" src="../../../external.html?link=https://avatars.githubusercontent.com/u/69700936?v=4" class="onebox-avatar-inline" width="20" height="20">
          nyxnor
        </a>
      </div>
    </div>

    <div class="labels">
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          enhancement
        </span>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">**Is your feature request related to a problem? Please describe.**


There is<span class="show-more-container"><a href="#" rel="noopener" class="show-more">‚Ä¶</a></span><span class="excerpt hidden"> the option to gen key pair, use priv key for client or use pub key for server.
But there is no option to just place existing file directly to folder.

**Describe the solution you'd like**

I want to specify file as an option to be included

**Describe alternatives you've considered**

- https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/bin/anon-server-to-client-install
- https://www.whonix.org/wiki/Onion_Services#Onion_Service_Authentication_Client_Setup


**Additional context**

This can be done on `auth-server` and `auth-client`.</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<ul>
<li>import file (servers/clients)</li>
<li>import config (servers/clients)</li>
<li>import onion+priv key (clients)</li>
<li>import pub key (servers)</li>
<li>generate keys (servers/clients)</li>
</ul>
<p>These options are almost the same, it is just to facilitate for the user, maybe he has the config as a file, or maybe the config is on the clipboard, or maybe the client just sends the server the his pub key or vice verse, or maybe a new key needs to be generated and automatically imported.</p>
<p>Another thing missing but it is a non-blocker for whonix, is removing invalid auth files if tor fails to parse it <a href="../../../external.html?link=https://github.com/nyxnor/onionjuggler/issues/66" rel="noopener nofollow ugc">https://github.com/nyxnor/onionjuggler/issues/66</a></p>
<p>Missing separate debian packages, work is being done.</p>
        </div>

        <meta itemprop='headline' content='Improve Onion Service Usability by Script / GUI'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><b><a rel="next" itemprop="url" href="91174658.html?page=2">next page ‚Üí</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
