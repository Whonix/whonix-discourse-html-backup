<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>whonix ws does not work through VPN</title>
    <link>http://forums.whonix.org/t/whonix-ws-does-not-work-through-vpn/13540</link>
    <description>I&#39;m fairly new to Qubes and Whonix but have used other linux flavours for a long time. 

I&#39;m trying to set up user -&gt; Tor -&gt; VPN -&gt; Internet and in terms of VMs I have anon-whonix-&gt;sys-vpn-&gt;sys-whonix-&gt;sys-firewall-&gt;sys-net.

From inside sys-vpn there are no issues. I can also have a regular debian VM use sys-vpn, again with no issues. My problems arise when I use a whonix-ws VM. 

I would not expect onion sites to work as this is impossible and I have installed librewolf. However even from terminal I am not getting a usable connection.

The problems appear to be DNS related. I can pull back pages for say 1.1.1.1 however nothing with a domain name.

I&#39;ve disabled the uwt wrapper and dug through as much documentation as I can find but from what I can find it suggests that there should be no DNS issue.

I&#39;ve updated resolv.conf to be the DNS of my VPN provider.

nslookup times out suggesting no servers can be reached

I&#39;m a bit stuck. Any suggestions?</description>
    <language>en</language>
    <lastBuildDate>Wed, 13 Apr 2022 17:46:13 +0000</lastBuildDate>
    <category>Qubes-Whonix</category>
    <atom:link href="http://forums.whonix.org/t/whonix-ws-does-not-work-through-vpn/13540.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>whonix ws does not work through VPN</title>
        <dc:creator><![CDATA[Time-Warp]]></dc:creator>
        <description><![CDATA[
            <p>There is a few steps i take with the templates for all of the networking templates i use which includes the template for the VPN.<br>
<strong>systemctl disable systemd-resolved</strong><br>
<strong>systemctl enable NetworkManager</strong><br>
Also i would recommend using this setup.<br>
<a href="https://github.com/Qubes-Community/Contents/blob/master/docs/configuration/vpn.md#set-up-a-proxyvm-as-a-vpn-gateway-using-iptables-and-cli-scripts" rel="noopener nofollow ugc">Set up a ProxyVM as a VPN gateway using iptables and CLI scripts</a></p>
<p>additionaly in /rw/config you can make a file called close.vpn and “chmod +x close.vpn”<br>
#!/bin/bash<br>
sudo pkill -9 openvpn</p>
<p>and after your done go to dom0 system tools keyboard and add an application shortcut with qvm-run sys-vpn “sudo /rw/config/close.vpn” and link it to a keyboard shortcut for when your ready to shutdown your system or close the VPN when your done. This is more Qubes involved and not with whonix. Take your time and check your settings.</p>
          <p><a href="http://forums.whonix.org/t/whonix-ws-does-not-work-through-vpn/13540/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-ws-does-not-work-through-vpn/13540/2</link>
        <pubDate>Wed, 13 Apr 2022 17:46:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13540-2</guid>
        <source url="http://forums.whonix.org/t/whonix-ws-does-not-work-through-vpn/13540.rss">whonix ws does not work through VPN</source>
      </item>
      <item>
        <title>whonix ws does not work through VPN</title>
        <dc:creator><![CDATA[penguin]]></dc:creator>
        <description><![CDATA[
            <p>I’m fairly new to Qubes and Whonix but have used other linux flavours for a long time.</p>
<p>I’m trying to set up user → Tor → VPN → Internet and in terms of VMs I have anon-whonix-&gt;sys-vpn-&gt;sys-whonix-&gt;sys-firewall-&gt;sys-net.</p>
<p>From inside sys-vpn there are no issues. I can also have a regular debian VM use sys-vpn, again with no issues. My problems arise when I use a whonix-ws VM.</p>
<p>I would not expect onion sites to work as this is impossible and I have installed librewolf. However even from terminal I am not getting a usable connection.</p>
<p>The problems appear to be DNS related. I can pull back pages for say 1.1.1.1 however nothing with a domain name.</p>
<p>I’ve disabled the uwt wrapper and dug through as much documentation as I can find but from what I can find it suggests that there should be no DNS issue.</p>
<p>I’ve updated resolv.conf to be the DNS of my VPN provider.</p>
<p>nslookup times out suggesting no servers can be reached</p>
<p>I’m a bit stuck. Any suggestions?</p>
          <p><a href="http://forums.whonix.org/t/whonix-ws-does-not-work-through-vpn/13540/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/whonix-ws-does-not-work-through-vpn/13540/1</link>
        <pubDate>Fri, 08 Apr 2022 14:05:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13540-1</guid>
        <source url="http://forums.whonix.org/t/whonix-ws-does-not-work-through-vpn/13540.rss">whonix ws does not work through VPN</source>
      </item>
  </channel>
</rss>
