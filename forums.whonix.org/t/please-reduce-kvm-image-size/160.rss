<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Please reduce KVM image size</title>
    <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160</link>
    <description>Hi Patrick I am enthusiastic about trying the KVM image, but the problem is that its size is massive and exceeds my system hard disk space. Is there any setting you can tweak to reduce it to a couple of gigs and reupload it again?</description>
    <language>en</language>
    <lastBuildDate>Mon, 17 Mar 2014 18:27:08 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://unix.stackexchange.com/questions/120091/speed-up-operations-on-sparese-files-with-tar-gzip-rsync" data-bbcode="true">Speed up operations on sparese files with tar, gzip, rsync?</a></p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/25">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/25</link>
        <pubDate>Mon, 17 Mar 2014 18:27:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-25</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>I found this:<br>
<a href="https://wiki.archlinux.org/index.php/sparse_file#Copying_the_sparse_file" class="onebox" target="_blank">https://wiki.archlinux.org/index.php/sparse_file#Copying_the_sparse_file</a></p>
<p>In summary, try this:</p>
<pre><code class="lang-auto"></code></pre>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/24">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/24</link>
        <pubDate>Mon, 17 Mar 2014 17:18:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-24</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[fiery]]></dc:creator>
        <description><![CDATA[
            <p>Nevermind , it turns out that running another identical conversion is the way to do it and not a straight copy, The command that you committed works. I think we need to note that a normal copy operation has this effect nonetheless</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/23</link>
        <pubDate>Mon, 17 Mar 2014 14:20:07 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-23</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[fiery]]></dc:creator>
        <description><![CDATA[
            <p>ran a du -h on the copied sparse file and it gives a 101G. Copying a sparse file seems to destroy this property that it has o.O</p>
<p>du and df indicate that the converted files using your commands are indeed small.</p>
<p>So what do you suggest? Should we try a QED which doesn’t need preallocating for performance gains?</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/22</link>
        <pubDate>Mon, 17 Mar 2014 13:27:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-22</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="19" data-topic="160">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/f/3ab097/40.png" class="avatar"> fiery:</div>
<blockquote>
<p>Update: I always copy the disk images in case something goes wrong and they become corrupted for any reason. When I tried to copy them, I got an error message that there is no disk space left even though their actual size is no where near the apparent. What is the reason for this? It seems the filesystem is treating these files only based on their apparent sizes.</p>
</blockquote>
</aside>
<p>No idea. (This doesn’t happen for me.)</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/21</link>
        <pubDate>Mon, 17 Mar 2014 13:19:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-21</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[troubadour]]></dc:creator>
        <description><![CDATA[
            <p>Image size.</p>
<p>You can use “qemu-img convert -S size”, or “qemu-img resize size” after conversion.</p>
<p>After converting a Whonix-Gateway.vmdk image to a raw Whonix-Gateway.img, I had a 100GB image size. Resized it to 4GB.</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/20</link>
        <pubDate>Mon, 17 Mar 2014 13:00:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-20</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[fiery]]></dc:creator>
        <description><![CDATA[
            <p>Update: I always copy the disk images in case something goes wrong and they become corrupted for any reason. When I tried to copy them, I got an error message that there is no disk space left even though their actual size is no where near the apparent. What is the reason for this? It seems the filesystem is treating these files only based on their apparent sizes.</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/19</link>
        <pubDate>Mon, 17 Mar 2014 10:36:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-19</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[fiery]]></dc:creator>
        <description><![CDATA[
            <p>After running your commands exactly on the original image, I get a 2.8G image from du -h and a 101G from running du -h --apparent-size. I think that does the trick!</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/18</link>
        <pubDate>Mon, 17 Mar 2014 00:39:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-18</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>I updated <a href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/2400_convert-img-to-qcow2">https://github.com/Whonix/Whonix/blob/master/build-steps.d/2400_convert-img-to-qcow2</a> already. Nevermind. (Not that important, forget that I said it maybe.)</p>
<p>Can you help out here again please?</p>
<p>Could you run the following command?</p>
<p><code>qemu-img \
   convert \
   -p \
   -O qcow2 \
   -S "50G" \
   -o cluster_size=2M \
   -o preallocation=metadata \
   original.qcow \
   yours.qcow2</code></p>
<p>That should do what the build script will do in next major Whonix version. (Maybe I do that manually for the next Whonix maintenance update version as well.)</p>
<p>And then check if you end up with a sparse file as well? That would be awesome!</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/17</link>
        <pubDate>Sun, 16 Mar 2014 23:33:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-17</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>As well as metadata allocation.</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/16</link>
        <pubDate>Sun, 16 Mar 2014 23:27:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-16</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Great finding. Could you try with</p>
<pre><code class="lang-auto"></code></pre>
<p>as well please? If that works, I would add a</p>
<pre><code class="lang-auto"></code></pre>
<p>to the conversion command. Would be a simple and quick fix. I hope this works.</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/15</link>
        <pubDate>Sun, 16 Mar 2014 23:17:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-15</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[fiery]]></dc:creator>
        <description><![CDATA[
            <p>I ran:</p>
<p>qemu-img convert -p -O qed -S 50G ~/Whonix-Gateway-8.qcow2 ~/Whonix-Gateway-8.QED</p>
<p>And I do get a real sparse file in QED format. Its actual size is 2.3 GB while it can potentially grow to 50. I think for one reason or another the image file needs an explicit sparse parameter to make it so.</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/14</link>
        <pubDate>Sun, 16 Mar 2014 22:55:37 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-14</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[fiery]]></dc:creator>
        <description><![CDATA[
            <p>I’d prefer not to reveal my OS for privacy reasons. I trust you personally of course, but I don’t want that known publically. I managed to find some interesting info on KVM snapshots and image formats:</p>
<p><a href="http://wiki.qemu.org/Features/Snapshots" class="onebox" target="_blank" rel="nofollow noopener">http://wiki.qemu.org/Features/Snapshots</a></p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://s1.wp.com/i/favicon.ico" class="site-icon" width="32" height="32">
      <a href="https://rwmj.wordpress.com/2010/10/19/tip-making-a-disk-image-sparse/" target="_blank" rel="nofollow noopener" title="12:00PM - 19 October 2010">Richard WM Jones – 19 Oct 10</a>
  </header>
  <article class="onebox-body">
    <img src="https://s0.wp.com/i/blank.jpg" class="thumbnail onebox-avatar" width="200" height="200">

<h3><a href="https://rwmj.wordpress.com/2010/10/19/tip-making-a-disk-image-sparse/" target="_blank" rel="nofollow noopener">Tip: Making a disk image sparse</a></h3>

<p>Update: libguestfs ≥ 1.14 includes a new tool called virt-sparsify which can make guests sparse (thin-provisioned). A sparse file is one where file blocks that would contain all zeroes are omitt…</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>The snapshot image will have to be in a format which support backing files, ie QCOW2 and QED, however the original image can be of any supported format. Ie. it is possible to make a QCOW2 snapshot of a RAW image, or a QED snapshot of a QED image.</p>
<p>What I want to try is to find a way to enable sparse files on my host - if possible. Try conversion to QED and see if this improves.</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/13</link>
        <pubDate>Sun, 16 Mar 2014 21:17:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-13</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Here are my results.</p>
<p><code>du -h Whonix-Gateway-8.tar.gz
1.2G    Whonix-Gateway-8.tar.gz
du -h --apparent-size Whonix-Gateway-8.tar.gz
1.2G    Whonix-Gateway-8.tar.gz</code></p>
<p><code>du -h Whonix-Gateway-8.qcow2 
2.5G    Whonix-Gateway-8.qcow2
du -h --apparent-size Whonix-Gateway-8.qcow2 
101G    Whonix-Gateway-8.qcow2
</code></p>
<p>Seems like sparse files to me. At least on my system. Using Debian Wheezy / ext4. Also the “df -h” test indicated this.</p>
<p>I guess the issue isn’t with the image itself, but with the file system, host operating system and/or kernel.</p>
<p>Would you be willing to tell us your host operating system? (You don’t have to if that is private.) (Would be useful for other users having this issue / reference.)</p>
<p>Whatever your host operating system is, you could try with Debian Wheezy and see if the issue is solved there. If we’re already providing sparse images, then there is probably nothing we can do from Whonix side. Except telling you, what host operating systems / kernels support sparse files.</p>
<p>For further debugging of this issue, you could download one of our .ova images. And extract it (or alternatively import it into VirtualBox). The .vmdk image you get to see then should be a sparse image.</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/12</link>
        <pubDate>Sun, 16 Mar 2014 20:30:13 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-12</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[fiery]]></dc:creator>
        <description><![CDATA[
            <p>my filesystem is EXT4. These are the results for the commands I ran on the images, The files seem to not be sparse unfortunately:</p>
<p>[root@localhost Downloads]# du -h Whonix-Gateway-8.tar.gz<br>
1.2G    Whonix-Gateway-8.tar.gz<br>
[root@localhost Downloads]# du -h --apparent-size Whonix-Gateway-8.tar.gz<br>
1.2G    Whonix-Gateway-8.tar.gz<br>
[root@localhost Downloads]# du -h Whonix-Gateway-8.qcow2<br>
101G    Whonix-Gateway-8.qcow2<br>
[root@localhost Downloads]# du -h --apparent-size Whonix-Gateway-8.qcow2<br>
101G    Whonix-Gateway-8.qcow2</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/11</link>
        <pubDate>Sun, 16 Mar 2014 20:02:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-11</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>I have an hypothesis. What I did:</p>
<ol>
<li>run “df -h”</li>
<li>extract Whonix-Gateway-8.tar.gz</li>
<li>run “df -h”</li>
<li>compare output of these two invocations of “df -h”</li>
</ol>
<p>After extracting Whonix-Gateway-8.tar.gz, I only had ~3 GB less free space than before. This matches output of “du -h Whonix-Gateway-8.qcow2”.</p>
<p>Therefore I think Whonix-Gateway-8.qcow2 already is a sparse file. The question is, if your file system supports sparse files? Mind telling, what file system you are using? Anyway, I can tell you, that with ext4 (what I am using), this is a non-issue. Therefore changing to another file system might solve your problem.</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/10</link>
        <pubDate>Sun, 16 Mar 2014 15:37:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-10</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Can you run the following commands please and post the results in here?</p>
<p>[code]du -h Whonix-Gateway-8.tar.gz</p>
<p>du -h --apparent-size Whonix-Gateway-8.tar.gz</p>
<p>du -h Whonix-Gateway-8.qcow2</p>
<p>du -h --apparent-size Whonix-Gateway-8.qcow2[/code]</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/9</link>
        <pubDate>Sun, 16 Mar 2014 15:30:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-9</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Man page of qemu-img about qed doesn’t make me optimistic.</p>
<blockquote>Image format with support for backing files and compact image files (when your filesystem or transport medium does not support holes).
Good performance due to less metadata than the more featureful qcow2 format, especially with cache=writethrough or cache=directsync. Consider using qcow2 which will soon have a similar optimization and is most actively developed.</blockquote>
<p>Looks like it would require performance tests as well. Seems like qed doesn’t support snapshots. And when moving to qed, next thing most likely will happen is someone demanding in the forum to fix the qcow2 issue, so snapshots are working again.</p>
<p>I have another solution in mind…</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/8</link>
        <pubDate>Sun, 16 Mar 2014 15:27:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-8</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[fiery]]></dc:creator>
        <description><![CDATA[
            <p>From the dev wiki.page I saw an idea about using QED as a format for KVM, do you mind trying this? The only good thing about QCOW was that it was the standard qemu format for so long.</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/7</link>
        <pubDate>Sun, 16 Mar 2014 14:41:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-7</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Unfortunately we lost contents of our old forum. If I remember right, without that option the image was so slow, that it was unbearable.</p>
<p>You can always convert these images back and forth.</p>
<p>I think your best bet would be getting enough hdd space and then testing how much performance penalty there is. Or finding out how to combine spare files with metadata allocation.</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/6</link>
        <pubDate>Sat, 15 Mar 2014 22:01:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-6</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[fiery]]></dc:creator>
        <description><![CDATA[
            <p>So it only affects size but not really performance then?</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/5</link>
        <pubDate>Sat, 15 Mar 2014 20:50:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-5</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Cluster size has a negligible effect on the image. (<a href="https://www.whonix.org/wiki/Dev/KVM#Set_cluster_size_512_-_2MB_for_better_performance.3F">https://www.whonix.org/wiki/Dev/KVM#Set_cluster_size_512_-_2MB_for_better_performance.3F</a>)</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/4</link>
        <pubDate>Sat, 15 Mar 2014 14:01:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-4</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[fiery]]></dc:creator>
        <description><![CDATA[
            <p>How bad is the performance without this setting? Maybe if someone less busy than you can take a crack at benchmarks this could be known. Does decreasing the cluster size to a minimum bring it down to a reasonable size? If I had enough disk space I would have experimented with this.</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/3</link>
        <pubDate>Sat, 15 Mar 2014 13:55:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-3</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>We cannot have it both ways. Or can we?</p>
<p><a href="http://www.ilsistemista.net/index.php/virtualization/11-kvm-io-slowness-on-rhel-6.html">http://www.ilsistemista.net/index.php/virtualization/11-kvm-io-slowness-on-rhel-6.html</a> says, without using metadata preallocation, images will be slow.</p>
<p>Since we’re using metadata preallocation, the image seems no longer to be a sparse files (<a href="https://en.wikipedia.org/wiki/Sparse_file">https://en.wikipedia.org/wiki/Sparse_file</a>), hence the waste of disk space.</p>
<p>Can get metadata preallocation and sparse files at the same time?</p>
<p>This is implemented here:<br>
<a href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/2400_convert-img-to-qcow2" class="onebox" target="_blank">https://github.com/Whonix/Whonix/blob/master/build-steps.d/2400_convert-img-to-qcow2</a></p>
<p>The only command that needs to be improved is this one:</p>
<p><code>      qemu-img \
         convert \
            -p \
            -O qcow2 \
            -o cluster_size=2M \
            -o preallocation=metadata \
            "$WHONIX_BINARY/$VMNAME.img" \
            "$WHONIX_BINARY/$VMNAME-$whonix_build_whonix_version_new.qcow2"</code></p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/2</link>
        <pubDate>Sat, 15 Mar 2014 13:32:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-2</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
      <item>
        <title>Please reduce KVM image size</title>
        <dc:creator><![CDATA[fiery]]></dc:creator>
        <description><![CDATA[
            <p>Hi Patrick I am enthusiastic about trying the KVM image, but the problem is that its size is massive and exceeds my system hard disk space. Is there any setting you can tweak to reduce it to a couple of gigs and reupload it again?</p>
          <p><a href="http://forums.whonix.org/t/please-reduce-kvm-image-size/160/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/please-reduce-kvm-image-size/160/1</link>
        <pubDate>Sat, 15 Mar 2014 12:35:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-160-1</guid>
        <source url="http://forums.whonix.org/t/please-reduce-kvm-image-size/160.rss">Please reduce KVM image size</source>
      </item>
  </channel>
</rss>
