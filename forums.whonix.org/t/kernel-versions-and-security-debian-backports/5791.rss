<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Kernel versions and security / Debian backports</title>
    <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791</link>
    <description>I know the question of using the stable vs testing branch on a distro level, is settled for Whonix but I feel there are compelling arguments to raise it for the kernel package specifically as the most critical part for system safety and also because it&#39;s self contained. Also in light of the spectre debacle and what fixes are not backported to older LTS kernels supported in stable are worth a new look.

Here is what Greg Kroah has to say as far as kernel security and the recommended versions one should run.


http://kroah.com/log/blog/2018/08/24/what-stable-kernel-should-i-use/

&gt; The number of security fixes that get backported are not as great as with the latest LTS release, because the traditional model of the devices that use these older LTS kernels is a much more reduced user model. These kernels are not to be used in any type of “general computing” model where you have untrusted users or virtual machines, as the ability to do some of the recent Spectre-type fixes for older releases is greatly reduced, if present at all in some branches.

&gt; So, here’s a short list of different types of devices, and what I would recommend for their kernels:
&gt; 
&gt; Laptop / Desktop: Latest stable release
&gt; Server: Latest stable release or latest LTS release
&gt; Embedded device: Latest LTS release or older LTS release if the security model used is very strong and tight.

***

The kernels in sid/testing/backports are usually not in sync with the ones listed as LTS on kernel.org but I think they provide a good compromise between recency and stability.

https://www.kernel.org/category/releases.html
My recommendation based on what he said is to have Whonix install the latest cloud version in backports to have the latest fixes and a lesser number of security bugs.</description>
    <language>en</language>
    <lastBuildDate>Wed, 19 Feb 2020 05:42:33 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>added here:<br>
<a href="https://www.whonix.org/wiki/Dev/APT_Pinning#backports_by_default">https://www.whonix.org/wiki/Dev/APT_Pinning#backports_by_default</a></p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/28">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/28</link>
        <pubDate>Wed, 19 Feb 2020 05:42:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-28</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>OK. That’s a good citation for the wiki on why we don’t enable backports.</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/27">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/27</link>
        <pubDate>Tue, 18 Feb 2020 20:44:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-27</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Debian bug <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=951315">linux-image-amd64 vs linux-headers-amd64 Debian buster-backports version mismatch bpo.2 vs bpo.3</a> shows that just enabling backports repository might lead to issues. In this example, breaking all kernel modules due to kernel image vs kernel headers version mismatch from backports <a href="http://packages.debian.org">packages.debian.org</a>.</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/26">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/26</link>
        <pubDate>Tue, 18 Feb 2020 17:06:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-26</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Enabling backports is inappropriate for a distribution.<br>
Enabling backports alone does nothing. Still required APT pinning, which again is inappropriate for a distribution.<br>
References:<br>
<a href="https://www.whonix.org/wiki/Dev/APT_Pinning" class="onebox" target="_blank">https://www.whonix.org/wiki/Dev/APT_Pinning</a></p>
<ul>
<li>If not using virtualizer specific kernel versions: Would have to download the package from Debian backports and upload to Whonix stable.</li>
<li>If using virtualizer specific kernel versions: Would require some packaging hack. Perhaps require to recompile the kernel.
<ul>
<li>If recompile on developer machine - perhaps for all architectures.
<ul>
<li>(related: issues to compiling for all architectures as per this very post <a href="https://forums.whonix.org/t/whonix-for-arm64-raspberry-pi-rpi/1788/143" class="inline-onebox">Whonix for arm64 / Raspberry Pi ( RPi )</a>)</li>
</ul>
</li>
<li>Or recompile on user’s machine, which is also unsolved. See this very post <a href="https://forums.whonix.org/t/kernel-recompilation-for-better-hardening/7598/77" class="inline-onebox">kernel recompilation for better hardening</a> starting from <code>However, there is one blocker.</code>
</li>
</ul>
</li>
</ul>
<p>I don’t like the idea of virtualizer specific kernel versions. That’s adding a lot complexity. Hard to develop / test since involving different tests on different virtualizers.</p>
<p>It would also only be effective for a platform that I don’t maintain, KVM.<br>
(Qubes is <a href="https://github.com/QubesOS/qubes-issues/issues/5212#issuecomment-533873012">not yet</a> <a href="https://www.qubes-os.org/doc/managing-vm-kernel/">Qubes VM kernel</a> by default.)</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/25">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/25</link>
        <pubDate>Fri, 29 Nov 2019 00:33:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-25</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Or if we are enabling backports, then simply omit setting this apt config in VBox builds to begin with while designating the stable kernel during the build process?</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/24">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/24</link>
        <pubDate>Thu, 28 Nov 2019 18:02:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-24</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="20" data-topic="5791">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Repository upgrades: not easy. Not possible without having separate apt repositories or some kind of packaging hack ( <code>Conflicts:</code> ?) which doesn’t install the backport kernel in VirtualBox</p>
</blockquote>
</aside>
<p>The lesser evil. A packaging hack is the path of least resistance IMO.</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/23</link>
        <pubDate>Thu, 28 Nov 2019 17:58:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-23</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="21" data-topic="5791">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Also another thing I just thought of: enhanced security configs in security-misc may use features not available in the older stable kernel?</p>
</blockquote>
</aside>
<p>Not sure. Probably just ignored.</p>
<aside class="quote no-group" data-post="21" data-topic="5791">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Is there a way we can test how things go with VBox before deploying this change?</p>
</blockquote>
</aside>
<p>Yes. Try out.<br>
That’s why all changes go through developers -&gt; testers -&gt; stable-proposed-updates -&gt; stable repository.</p>
<p>The problem here is, we cannot predict the future. If backport kernels will break VirtualBox guest additions.</p>
<aside class="quote no-group" data-post="21" data-topic="5791">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>What do users lose without functional guest additions installed?</p>
</blockquote>
</aside>
<p>Major things coming to mind:</p>
<ul>
<li>Fixed screen resolution (too big, too small, scrolling, not using full window space, black border).</li>
<li>No shared folders.</li>
<li>No copy/paste from inside/outside VM.</li>
<li>Trapping of keyboard/mice inside VM until VirtualBox host key is pressed.</li>
<li>Performance?</li>
</ul>
<p>more details here perhaps:<br>
<a href="https://www.virtualbox.org/manual/ch04.html" class="onebox" target="_blank">https://www.virtualbox.org/manual/ch04.html</a></p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/22</link>
        <pubDate>Thu, 28 Nov 2019 17:56:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-22</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Also another thing I just thought of: enhanced security configs in security-misc may use features not available in the older stable kernel?</p>
<ul>
<li>
<p>Is there a way we can test how things go with VBox before deploying this change?</p>
</li>
<li>
<p>What do users lose without functional guest additions installed? Maybe we can warn about installing them if everything else still works.</p>
</li>
</ul>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/21</link>
        <pubDate>Thu, 28 Nov 2019 17:50:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-21</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="19" data-topic="5791" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Can we add backports kernel only for non-VBox build flags?</p>
</blockquote>
</aside>
<ul>
<li>Build flag is doable in theory. But messy due to below…</li>
<li>Repository upgrades: not easy. Not possible without having separate apt repositories or some kind of packaging hack (<code>Conflicts:</code>?) which doesn’t install the backport kernel in VirtualBox.</li>
</ul>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/20</link>
        <pubDate>Thu, 28 Nov 2019 17:46:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-20</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Can we add backports kernel only for non-VBox build flags?</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/19</link>
        <pubDate>Thu, 28 Nov 2019 17:44:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-19</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="17" data-topic="5791">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>I assume the whole point of backporting though is to guarantee this type of bad breakage doesn’t happen?</p>
</blockquote>
</aside>
<p>Not sure. If I had to bet, I’d bet that breaking VirtualBox guest additions is a test case and blocker for kernel upgrades.</p>
<p>But even if the answer was “yes”, VirtualBox itself is currently not in backports, which is a mess. Therefore no such stability “guarantee”.<br>
Only <code>sid</code>.<br>
<a href="https://packages.debian.org/sid/virtualbox-guest-x11">https://packages.debian.org/sid/virtualbox-guest-x11</a></p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/18</link>
        <pubDate>Thu, 28 Nov 2019 17:39:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-18</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>I assume the whole point of backporting though is to guarantee this type of bad breakage doesn’t happen? Including stuff from backports gets us some form of upstream support if it doesn’t work</p>
<p><a href="https://packages.debian.org/buster/virtualbox-guest-additions-iso" class="onebox" target="_blank">https://packages.debian.org/buster/virtualbox-guest-additions-iso</a></p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/17</link>
        <pubDate>Thu, 28 Nov 2019 17:34:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-17</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Let’s consider <a href="https://packages.debian.org/buster-backports/linux-image-amd64">https://packages.debian.org/buster-backports/linux-image-amd64</a>.</p>
<p>One worry is that VirtualBox guest additions might break and be unfixeable for a while. While at the same time, downgrade to a kernel compatible with VirtualBox guest additions isn’t possible through in-place upgrades (apt dist-upgrade) for existing users.</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/16</link>
        <pubDate>Thu, 28 Nov 2019 17:19:38 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-16</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Not sure if I’ve already reported this before but when I tried it, it was very minimalistic lacking even modules for shared folders to work.  I  think they are designed to work with KVM configurations so its almost certain VBox and Xen won’t be able to run it.</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/15</link>
        <pubDate>Sat, 17 Aug 2019 18:54:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-15</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>linux-image-cloud-amd64 does not boot in VirtualBox. Also not when removing hardening boot parameters by security-misc package. Also not in recovery mode. Just a black screen.</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/14</link>
        <pubDate>Fri, 16 Aug 2019 14:46:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-14</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Do you think it’s a maintainable solution to also grab lockdown from testing and  upload it in Whonix repos?</p>
<p>I tested installing it and it needs no deps not present in stable.</p>
<p>The default setting locks in any detected loaded modules within 10 seconds of booting which should cover any built-in hardware.</p>
<p><a href="https://packages.debian.org/buster/lockdown" class="onebox" target="_blank">https://packages.debian.org/buster/lockdown</a></p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/10</link>
        <pubDate>Fri, 31 Aug 2018 12:05:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-10</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Everything works as expected with full stable-backports. No errors burped out about VBox Guest Additions (the latest in backports which is automatically fetched).</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/9</link>
        <pubDate>Thu, 30 Aug 2018 23:53:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-9</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="7" data-topic="5791">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Would that be fixed on recompilation of… Oh well, there is no guest additions to recompile so no joy?</p>
</blockquote>
</aside>
<p>Its possible to compile a standalone module against the header for use even after the fact AFAIK.</p>
<aside class="quote no-group" data-post="7" data-topic="5791">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Do guest additions from backports work?</p>
</blockquote>
</aside>
<p>Nope. Those are the ones from backports that are fetched automatically with this kernel is seems.</p>
<aside class="quote no-group" data-post="7" data-topic="5791">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Can we pick modules by an opt-in basis?</p>
</blockquote>
</aside>
<p>According to lockdown’s  README yes you can. It’s not a strong guarantee as not having the code in the first place as someone with root can disable it, but it’s better than nothing.</p>
<p>However it only takes effect after a reboot which would be detectable by a user. So if one restores after a session the window of compromise is non-existent.</p>
<aside class="onebox gitlabblob">
  <header class="source">
      <a href="https://gitlab.com/taggart/lockdown/blob/master/README" target="_blank">gitlab.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://gitlab.com/taggart/lockdown/blob/master/README" target="_blank">taggart/lockdown/blob/master/README</a></h4>
<pre><code class="lang-">lockdown
========
WARNING: read notes below about potential system breakage!

This package is intended to be installed on systems in order to limit
the exposed surface an attacker might be able to use to compromise and
embed themselves in a system. This way a security hole in an unused
feature can't be used for an attacker to gain a foothold.
It doesn't aim for perfection, but instead to raise the bar by making
things more difficult for attackers.

What it does:
* disables loading/removing kernel modules after boot
* disables live kernel patching (kexec)
* disables Berkeley packet filter (BPF)

Configure by editing /etc/default/lockdown to enable/disable features
and adjust settings.

kernel modules
</code></pre>


  This file has been truncated. <a href="https://gitlab.com/taggart/lockdown/blob/master/README" target="_blank">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<blockquote>
<p>Configure by editing /etc/default/lockdown to enable/disable features<br>
and adjust settings.</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/8</link>
        <pubDate>Thu, 30 Aug 2018 23:17:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-8</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Bug reports worth it or out of scope of that package?</p>
<aside class="quote no-group" data-post="6" data-topic="5791">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Shared folders on KVM broken because the module is not compiled into the kernel.</p>
</blockquote>
</aside>
<p>Would that be fixed on recompilation of… Oh well, there is no guest additions to recompile so no joy?</p>
<aside class="quote no-group" data-post="6" data-topic="5791">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>While it automatically fetches the VBox guest additions package there is an error message during the install that indicates the DKMS build is broken “Error!Bad return status for module build on kernel” I attached the log for those interested but it seems to be code problem with that package rather than a build dependency failure. Can’t upload log because forum forbids it.</p>
</blockquote>
</aside>
<p><a href="https://packages.debian.org/stretch-backports/linux-headers-cloud-amd64">https://packages.debian.org/stretch-backports/linux-headers-cloud-amd64</a> certainly required for this.</p>
<p>Do guest additions from backports work?</p>
<aside class="quote no-group" data-post="6" data-topic="5791">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Next up is regular backports which we can lockdown module loading for instead, at some point to reduce attack surface.</p>
</blockquote>
</aside>
<p>Can we pick modules by an opt-in basis?</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/7</link>
        <pubDate>Thu, 30 Aug 2018 23:10:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-7</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Observations for backports cloud image:</p>
<p>Pros:<br>
VM startup much quicker. 90% of boot time avoided.</p>
<p>Cons:</p>
<ul>
<li>Mouse cursor needs to be released from guest hotkey combination.</li>
<li>Shared folders on KVM broken because the module is not compiled into the kernel.</li>
<li>While it automatically fetches the VBox guest additions package there is an error message during the install that indicates the DKMS build is broken “Error!Bad return status for module build on kernel” I attached the log for those interested but it seems to be code problem with that package rather than a build dependency failure. Can’t upload log because forum forbids it.</li>
</ul>
<p>So close but no cigar. Next up is regular backports which we can lockdown module loading for instead, at some point to reduce attack surface.</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/6</link>
        <pubDate>Thu, 30 Aug 2018 23:04:51 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-6</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://packages.debian.org/stretch-backports/linux-image-cloud-amd64">https://packages.debian.org/stretch-backports/linux-image-cloud-amd64</a> - can consider. Could maybe download from stretch-backports and add to Whonix stretch repository. Could you manually test please if it works?</p>
<p>Also need <a href="https://packages.debian.org/stretch-backports/linux-headers-cloud-amd64">https://packages.debian.org/stretch-backports/linux-headers-cloud-amd64</a>.</p>
<p>Does <a href="https://packages.debian.org/stretch-backports/linux-image-cloud-amd64">https://packages.debian.org/stretch-backports/linux-image-cloud-amd64</a> break <a href="https://packages.debian.org/stretch-backports/virtualbox-guest-x11">https://packages.debian.org/stretch-backports/virtualbox-guest-x11</a>? Could you manually test please if it works?</p>
<hr>
<p>(I didn’t mean to suggest for Non-Qubes-Whonix to use the very same kernel package (<code>rpm</code>) as Qubes. While I don’t want to preemptively exclude it, I didn’t consider to research that. I guess <code>alien</code> will never be good enough and could go horribly wrong for a package as important as the linux package. Horribly wrong: missing maintainer scripts, kernel post install scripts, other incompatibilities Fedora vs Debian, breaking boot)</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/5</link>
        <pubDate>Thu, 30 Aug 2018 20:17:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-5</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="3" data-topic="5791">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Debian (preferred)</p>
</blockquote>
</aside>
<p>+1</p>
<p>It seems Qubes is basing off of the same version as in backports (4.17 as of writing).</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://github.githubassets.com/favicon.ico" class="site-icon" width="32" height="32">
      <a href="https://github.com/QubesOS/qubes-linux-kernel" target="_blank" rel="nofollow noopener">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="//forums.whonix.org/uploads/default/original/2X/0/073e3b7d2ed9884239314c472ba3b66ec17c24d4.png" class="thumbnail onebox-avatar" width="320" height="320">

<h3><a href="https://github.com/QubesOS/qubes-linux-kernel" target="_blank" rel="nofollow noopener">QubesOS/qubes-linux-kernel</a></h3>

<p>Qubes component: linux-kernel. Contribute to QubesOS/qubes-linux-kernel development by creating an account on GitHub.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Pros:</p>
<p>*Offloading maintenance works and benefitting from safety measures taken by security conscious devs.</p>
<p>Cons:</p>
<p>*Packaged as rpm. Not possible to use without hacks like running it through alien or explicitly changin the build process to output debs.<br>
*We lose out on reproducible builds when they come online upstream when Buster comes around.<br>
*We run much more code [0] than we need in a virtual environment compared to using [1]. They must do this however for maximum hardware compatibility but this isn’t in our scope for virtualized Whonix builds which are better off using the barebones kernel configs to cut down on attack surface.</p>
<p>[0] <a href="https://github.com/QubesOS/qubes-linux-kernel/blob/master/config-base" rel="nofollow noopener">https://github.com/QubesOS/qubes-linux-kernel/blob/master/config-base</a><br>
[1] <a href="https://packages.debian.org/stretch-backports/linux-image-cloud-amd64" rel="nofollow noopener">https://packages.debian.org/stretch-backports/linux-image-cloud-amd64</a></p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/4</link>
        <pubDate>Thu, 30 Aug 2018 14:16:21 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-4</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Wondering if/how this could be done in Whonix by default. Any</p>
<ul>
<li>Debian (preferred)</li>
<li>(or third party [<a href="http://kernel.org">kernel.org</a>?] deb?)</li>
</ul>
<p>repository we could download kernel and headers from and then upload to Whonix repository?</p>
<p>What about Qubes VM kernel? How good is that one? Could anyone please submit feature request against Qubes?</p>
<p>That would help to make this argument better vetted (as far as stability, practicality, maintainability)!</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/3</link>
        <pubDate>Thu, 30 Aug 2018 11:16:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-3</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>Big difference in kernel versions.</p>
<p>Stretch has 4.9 something, while backports has 4.17.17 at present. Totally agree with all this, and we should make a firm recommendation in the wiki.</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/2</link>
        <pubDate>Thu, 30 Aug 2018 09:31:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-2</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
      <item>
        <title>Kernel versions and security / Debian backports</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>I know the question of using the stable vs testing branch on a distro level, is settled for Whonix but I feel there are compelling arguments to raise it for the kernel package specifically as the most critical part for system safety and also because it’s self contained. Also in light of the spectre debacle and what fixes are not backported to older LTS kernels supported in stable are worth a new look.</p>
<p>Here is what Greg Kroah has to say as far as kernel security and the recommended versions one should run.</p>
<p><a href="http://kroah.com/log/blog/2018/08/24/what-stable-kernel-should-i-use/" class="onebox" target="_blank">http://kroah.com/log/blog/2018/08/24/what-stable-kernel-should-i-use/</a></p>
<blockquote>
<p>The number of security fixes that get backported are not as great as with the latest LTS release, because the traditional model of the devices that use these older LTS kernels is a much more reduced user model. These kernels are not to be used in any type of “general computing” model where you have untrusted users or virtual machines, as the ability to do some of the recent Spectre-type fixes for older releases is greatly reduced, if present at all in some branches.</p>
</blockquote>
<blockquote>
<p>So, here’s a short list of different types of devices, and what I would recommend for their kernels:</p>
<p>Laptop / Desktop: Latest stable release<br>
Server: Latest stable release or latest LTS release<br>
Embedded device: Latest LTS release or older LTS release if the security model used is very strong and tight.</p>
</blockquote>
<hr>
<p>The kernels in sid/testing/backports are usually not in sync with the ones listed as LTS on <a href="http://kernel.org">kernel.org</a> but I think they provide a good compromise between recency and stability.</p>
<p><a href="https://www.kernel.org/category/releases.html" class="onebox" target="_blank">https://www.kernel.org/category/releases.html</a><br>
My recommendation based on what he said is to have Whonix install the latest cloud version in backports to have the latest fixes and a lesser number of security bugs.</p>
          <p><a href="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791/1</link>
        <pubDate>Tue, 28 Aug 2018 23:26:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-5791-1</guid>
        <source url="http://forums.whonix.org/t/kernel-versions-and-security-debian-backports/5791.rss">Kernel versions and security / Debian backports</source>
      </item>
  </channel>
</rss>
