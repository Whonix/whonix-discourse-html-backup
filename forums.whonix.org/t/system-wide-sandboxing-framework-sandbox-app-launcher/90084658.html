<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>System-wide sandboxing framework - sandbox-app-launcher - Development - Whonix Forum</title>
    <meta name="description" content="We’re currently working on a full system apparmor policy to confine all userspace processes but this has 2 issues: 


It doesn’t use more restrictive profiles for user applications. A PDF viewer shouldn’t have the same p&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="90084658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;System-wide sandboxing framework - sandbox-app-launcher&#39;" href="9008.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/system-wide-sandboxing-framework-sandbox-app-launcher/9008?page=2" />
<meta name="twitter:url" content="https://forums.whonix.org/t/system-wide-sandboxing-framework-sandbox-app-launcher/9008?page=2" />
<meta property="og:title" content="System-wide sandboxing framework - sandbox-app-launcher" />
<meta name="twitter:title" content="System-wide sandboxing framework - sandbox-app-launcher" />
<meta property="og:description" content="libreoffice  xpdf  gimp as bonus" />
<meta name="twitter:description" content="libreoffice  xpdf  gimp as bonus" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="84 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="347 ❤" />
<meta property="article:published_time" content="2020-03-14T18:06:51+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="9008.html">
        <link rel="next" href="90089ba9.html?page=3">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="9008.html">System-wide sandboxing framework - sandbox-app-launcher</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/component_security.html' class='discourse-tag' rel="tag">component_security</a>, 
            <a href='../../tag/status_open_issue_todo.html' class='discourse-tag' rel="tag">status_open_issue_todo</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-14T18:06:51Z' class='post-time'>
                March 14, 2020,  6:06pm
              </time>
              <meta itemprop='dateModified' content='2020-03-14T18:06:51Z'>
          <span itemprop='position'>#21</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="madaidan" data-post="11" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Any suggestions for apps to test?</p>
</blockquote>
</aside>
<p>libreoffice<br>
xpdf<br>
gimp as bonus</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>
          <meta itemprop='keywords' content='component_security, status_open_issue_todo'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-19T00:39:39Z' class='post-time'>
                March 19, 2020, 12:39am
              </time>
              <meta itemprop='dateModified' content='2020-03-19T00:39:39Z'>
          <span itemprop='position'>#22</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I can implement a system similar to android permissions into this.</p>
<p>i.e.</p>
<p><code>/etc/sandbox-app-launcher/xpdf.conf</code>:</p>
<pre><code class="lang-auto">allow_net=no
allow_mic=no
allow_webcam=no
</code></pre>
<p>Then we can do something like:</p>
<pre><code class="lang-auto">. "/etc/sandbox-app-launcher/${app_name}.conf"

## Deny network access.
if [ "${allow_net}" = "no" ]; then
  bwrap_args+="--unshare-net"
fi

## Deny microphone access.
...
</code></pre>
<p>What do you think?</p>
<p>The default should be allow all so apps don’t break but users can restrict the permissions more if they want to. Or, we could have a popup upon installation that is something like:</p>
<pre><code class="lang-auto">zenity --list --text "What permissions do you want to grant to this application?" --radiolist --column "Pick" --column "Answer" FALSE "Network access" FALSE "Microphone access" FALSE "Webcam access" FALSE "All"
</code></pre>
<p>but allows selecting more than one.</p>
<p>It would also be nice to detect if the app tries to access something then give a popup asking if you want to give the app that permission but I wouldn’t know how to implement this.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-19T13:44:26Z' class='post-time'>
                March 19, 2020,  1:44pm
              </time>
              <meta itemprop='dateModified' content='2020-03-19T13:44:26Z'>
          <span itemprop='position'>#23</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="madaidan" data-post="22" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>It would also be nice to detect if the app tries to access something then give a popup asking if you want to give the app that permission but I wouldn’t know how to implement this.</p>
</blockquote>
</aside>
<p>This is hard. Re-implementing something similar to what Android does. The user interface needs to be to show elements (security question) which cannot be faked by the application. I.e. if a malicious application would overwhelm the user with questions in order to trick the user into giving an additional permission.</p>
<aside class="quote no-group" data-username="madaidan" data-post="22" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>I can implement a system similar to android permissions into this.</p>
<p>i.e.</p>
<p><code>/etc/sandbox-app-launcher/xpdf.conf</code> :</p>
<pre><code class="lang-auto">allow_net=no
allow_mic=no
allow_webcam=no
</code></pre>
</blockquote>
</aside>
<p>This is good since it breaks down difficult syntax into more human readonable configs.</p>
<aside class="quote no-group quote-modified" data-username="madaidan" data-post="22" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>. “/etc/sandbox-app-launcher/${app_name}.conf”</p>
</blockquote>
</aside>
<p>How would any application use that?<br>
<a href="../stackable-wrappers/7944.html" class="inline-onebox">Stackable Wrappers</a> issue?</p>
<aside class="quote no-group" data-username="madaidan" data-post="22" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Or, we could have a popup upon installation that is something like:</p>
</blockquote>
</aside>
<p>Popup during installation of what? Package? That won’t be good. There are no packages which use a GUI to ask questions. Please also keep headless systems in mind (even if just skipping any questions there). Also asking the user security questions is mostly a bad idea. I guess we’d have to pre-configure this for some applications?</p>
<p>What about new applications? How would sandbox-app-launcher notice that there’s a new package (or even binary/appimage in user home folder) and then ask the user security questions? Not necessarily an issue you need to solve. I guess the user needs to be aware of sandbox-app-launcher and wanting to use it manually?</p>
<p>Also GUI applications shouldn’t be writing files into /etc. None of packages from <a href="../../../external.html?link=http://package.debian.org/">package.debian.org</a> do that.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-19T16:33:23Z' class='post-time'>
                March 19, 2020,  4:33pm
              </time>
              <meta itemprop='dateModified' content='2020-03-19T16:33:23Z'>
          <span itemprop='position'>#24</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="23" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>How would any application use that?<br>
<a href="../stackable-wrappers/7944.html">Stackable Wrappers</a> issue?</p>
</blockquote>
</aside>
<p>I’m not sure what you mean. The sandbox script would source the config file and set the needed arguments. Applications aren’t meant to use it.</p>
<aside class="quote no-group" data-username="Patrick" data-post="23" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Popup during installation of what? Package?</p>
</blockquote>
</aside>
<p>Yes.</p>
<aside class="quote no-group" data-username="Patrick" data-post="23" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>That won’t be good. There are no packages which use a GUI to ask questions. Please also keep headless systems in mind (even if just skipping any questions there). Also asking the user security questions is mostly a bad idea. I guess we’d have to pre-configure this for some applications?</p>
</blockquote>
</aside>
<p>I don’t think it’s that bad. Headless systems aren’t an issue, we can’t just use <code>read</code>. These aren’t going to be complex security questions. I think most ordinary users would know if they want the program to access their microphone or not. It works fine in android. Pre-configuring it isn’t the best as we can’t configure all applications so most will still have all permissions.</p>
<aside class="quote no-group" data-username="Patrick" data-post="23" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>What about new applications? How would sandbox-app-launcher notice that there’s a new package (or even binary/appimage in user home folder) and then ask the user security questions?</p>
</blockquote>
</aside>
<p>I’m not sure how to solve this yet.</p>
<p>See the original post:</p>
<blockquote>
<p>I’m not sure how we’re going to choose which apps to sandbox. Maybe via packages’ <code>Section:</code> ?</p>
</blockquote>
<p>Maybe we can create an apt hook that sets up the sandbox during package installation? We can probably choose all packages that have a certain <code>Section:</code> rule so things like administration utilities won’t be sandboxed.</p>
<p>As for binaries in the user’s home folder, it would be best if we kill those off entirely via TPE or apparmor-profile-everything. Allowing execution of arbitrary code is a major issue. I’ve fixed this in the sandbox via W^X and apparmor but it doesn’t account for outside of the app sandbox.</p>
<aside class="quote no-group" data-username="Patrick" data-post="23" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Not necessarily an issue you need to solve. I guess the user needs to be aware of sandbox-app-launcher and wanting to use it manually?</p>
</blockquote>
</aside>
<p>We do need to solve this. <em>Every</em> app should be sandboxed so we have a strong default security model. It only takes 1 unsandboxed app to access all user data.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-19T17:38:57Z' class='post-time'>
                March 19, 2020,  5:38pm
              </time>
              <meta itemprop='dateModified' content='2020-03-19T17:38:57Z'>
          <span itemprop='position'>#25</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Also, on W^X, it can break some programs (such as browsers for JIT) so we’d need to have a whitelist <a href="../../../external.html?link=https://github.com/madaidan/sandbox-app-launcher/blob/master/usr/share/sandbox-app-launcher/wx_whitelist">https://github.com/madaidan/sandbox-app-launcher/blob/master/usr/share/sandbox-app-launcher/wx_whitelist</a></p>
<p>There shouldn’t be too many programs with writable and executable memory mappings nowadays anyway.</p>
<p>PaX’s MPROTECT implemented this and had a way to whitelist programs from the restrictions so there exists some userspace daemons with whitelists we can look at such as <a href="../../../external.html?link=https://github.com/thestinger/paxd-archive/blob/master/paxd.conf">https://github.com/thestinger/paxd-archive/blob/master/paxd.conf</a></p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-19T17:57:18Z' class='post-time'>
                March 19, 2020,  5:57pm
              </time>
              <meta itemprop='dateModified' content='2020-03-19T17:57:18Z'>
          <span itemprop='position'>#26</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/madaidan/sandbox-app-launcher/commit/a06d905ac63c56af752433092147c188ed19bd42" target="_blank">github.com/madaidan/sandbox-app-launcher</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewbox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/madaidan/sandbox-app-launcher/commit/a06d905ac63c56af752433092147c188ed19bd42" target="_blank">Optionally remove network access</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2020-03-19" data-time="17:54:21" data-timezone="UTC">05:54PM - 19 Mar 20 UTC</span>
      </div>

      <div class="user">
        <a href="../../../external.html?link=https://github.com/madaidan" target="_blank">
          <img alt="madaidan" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 10 additions and 0 deletions">
        <a href="../../../external.html?link=https://github.com/madaidan/sandbox-app-launcher/commit/a06d905ac63c56af752433092147c188ed19bd42" target="_blank">
          <span class="added">+10</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>

  </div>
</div>




  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Suggestions are welcome, especially for more permissions.</p>
<p>I can’t implement the webcam/mic permissions as I wouldn’t know how, but it’d likely involve bind mounting the webcam/mic device nodes.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-20T09:15:26Z' class='post-time'>
                March 20, 2020,  9:15am
              </time>
              <meta itemprop='dateModified' content='2020-03-20T09:15:26Z'>
          <span itemprop='position'>#27</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-username="Patrick" data-post="23" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<p>How would any application use that?<br>
<a href="../stackable-wrappers/7944.html">Stackable Wrappers</a> issue?</p>
</blockquote>
<p>I’m not sure what you mean. The sandbox script would source the config file and set the needed arguments. Applications aren’t meant to use it.</p>
</blockquote>
</aside>
<p>To ask another way: User types <code>xchat</code> in xfce4-terminal emulator or starts xchat through xfce start menu. Why would xchat start sandboxed rather than non-sandboxed?</p>
<aside class="quote no-group" data-username="madaidan" data-post="24" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Pre-configuring it isn’t the best as we can’t configure all applications so most will still have all permissions.</p>
</blockquote>
</aside>
<p>If asking during apt installation, at least those applications that are pre-installed would need to be pre-configured. Otherwise build process would move from non-interactive to interactive.</p>
<aside class="quote no-group" data-username="madaidan" data-post="24" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>I don’t think it’s that bad. Headless systems aren’t an issue, we can’t just use <code>read</code> .</p>
</blockquote>
</aside>
<p>There are many different scenarios.</p>
<ul>
<li>application gets installed during build / inside chroot, in that case any interactiveness is very unwanted</li>
<li>non-interactive / automated upgrades</li>
<li>upgrades in terminal emulator but then apt runs as root or even limited user - how to sanely start a GUI from there? Even if working, likely breaking with wayland. (That’s what msgcollector is doing. Applications can create files which will be watched by msgdispatcher which runs as user “user” which then shows these messages.)</li>
<li>upgrade from a virtual terminal (but then apt stopping in the middle to ask questions where one needs to type is also inconvenient)</li>
</ul>
<p>Debian has debconf for that.</p>
<aside class="onebox wikipedia">
  <header class="source">
      <a href="../../../external.html?link=https://en.wikipedia.org/wiki/Debian_configuration_system" target="_blank">en.wikipedia.org</a>
  </header>
  <article class="onebox-body">
    <img src="../../../external.html?link=http://upload.wikimedia.org/wikipedia/commons/thumb/6/66/Openlogo-debianV2.svg/80px-Openlogo-debianV2.svg.png" class="thumbnail" width="" height="">

<h3><a href="../../../external.html?link=https://en.wikipedia.org/wiki/Debian_configuration_system" target="_blank">Debian configuration system</a></h3>

<p>debconf is a software utility for performing system-wide configuration tasks on Unix-like operating systems. It is developed for the Debian GNU/Linux distribution, and is closely integrated with Debian's package management system, dpkg.
 When packages are being installed, debconf asks the user questions which determine the contents of the system-wide configuration files associated with that package. After package installation, it is possible to go back and change the configuration of a package by...</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>But really best avoided. Packages that ask questions during installation are a major source of user confusion.</p>
<aside class="quote no-group" data-username="madaidan" data-post="24" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>I think most ordinary users would know if they want the program to access their microphone or not. It works fine in android.</p>
</blockquote>
</aside>
<p>Android as a good user interface. It doesn’t ask questions during installation or upgrade of apps or for any pre-installed applications. It asks when the application is started for the first time which seems a lot better.</p>
<p>Various cases:</p>
<ul>
<li>application is started from graphical environment, example xfce start menu or desktop icon</li>
<li>application is started from graphical environment terminal emulator with X available</li>
<li>application is started from virtual terminal</li>
<li>application is started by another application (cron, nginx, sdwdate, etc. start some application in background)</li>
<li>anything else?</li>
</ul>
<p>How to distinguish these cases from a script level? It may be possible to detect / handle all these cases. Just showing that it’s non-trivial.</p>
<p>Is there any similar application that can handle all these cases already so we don’t have to re-invent it in a way that is overlooking use cases?</p>
<p>This stuff is easier for Android since they have only 1 case: manual use by user with GUI.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="5" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-20T15:39:44Z' class='post-time'>
                March 20, 2020,  3:39pm
              </time>
              <meta itemprop='dateModified' content='2020-03-20T15:39:44Z'>
          <span itemprop='position'>#28</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="27" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>To ask another way: User types <code>xchat</code> in xfce4-terminal emulator or starts xchat through xfce start menu. Why would xchat start sandboxed rather than non-sandboxed?</p>
</blockquote>
</aside>
<p>We’d have to use the stackable wrappers.</p>
<aside class="quote no-group" data-username="Patrick" data-post="27" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>application gets installed during build / inside chroot, in that case any interactiveness is very unwanted</p>
</blockquote>
</aside>
<p>Those should be pre-configured.</p>
<aside class="quote no-group" data-username="Patrick" data-post="27" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>non-interactive / automated upgrades</p>
</blockquote>
</aside>
<p>Upgrades wouldn’t trigger this. Only on package installation.</p>
<aside class="quote no-group" data-username="Patrick" data-post="27" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>upgrades in terminal emulator but then apt runs as root or even limited user - how to sanely start a GUI from there?</p>
</blockquote>
</aside>
<p>You mean how can other users connect to the X server?</p>
<p>We can use <code>xhost</code> i.e. <code>xhost +SI:localuser:root</code>.</p>
<aside class="quote no-group" data-username="Patrick" data-post="27" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>upgrade from a virtual terminal</p>
</blockquote>
</aside>
<p>Again, it’d only be triggered by installing the package, not by updates.</p>
<aside class="quote no-group" data-username="Patrick" data-post="27" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>It asks when the application is started for the first time which seems a lot better.</p>
</blockquote>
</aside>
<p>That seems a lot more complex than asking upon installation.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-20T16:36:02Z' class='post-time'>
                March 20, 2020,  4:36pm
              </time>
              <meta itemprop='dateModified' content='2020-03-20T16:36:02Z'>
          <span itemprop='position'>#29</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-username="Patrick" data-post="27" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<p>To ask another way: User types <code>xchat</code> in xfce4-terminal emulator or starts xchat through xfce start menu. Why would xchat start sandboxed rather than non-sandboxed?</p>
</blockquote>
<p>We’d have to use the stackable wrappers.</p>
</blockquote>
</aside>
<p>[1] Stackable wrappers concept only covers applications where their part if known at the time when the stackable wrapper is written. It cannot wrap applications which aren’t defined by path.</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="27" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<p>non-interactive / automated upgrades</p>
</blockquote>
<p>Upgrades wouldn’t trigger this. Only on package installation.</p>
</blockquote>
</aside>
<p>On apt level there is not much distinction between install and upgrade. dist-upgrade can result in installation of new packages when dependencies changed.</p>
<aside class="quote no-group" data-username="madaidan" data-post="28" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>You mean how can other users connect to the X server?</p>
<p>We can use <code>xhost</code> i.e. <code>xhost +SI:localuser:root</code> .</p>
</blockquote>
</aside>
<p>Shouldn’t run applications under root.</p>
<p><a href="../../../external.html?link=https://www.whonix.org/wiki/Root#Graphical_Applications_with_Root_Rights">https://www.whonix.org/wiki/Root#Graphical_Applications_with_Root_Rights</a></p>
<p>One thing is to be logged in as user and then use <code>sudo --set-home</code>, <code>lxsudo</code> or <code>pkexec</code> to get root in a sane way. But running under the root user and then starting a GUI application can lead to permission issues.</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="27" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<p>It asks when the application is started for the first time which seems a lot better.</p>
</blockquote>
<p>That seems a lot more complex than asking upon installation.</p>
</blockquote>
</aside>
<p>Same unsolved issue, same complexity as [1].</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="27" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<p>upgrade from a virtual terminal</p>
</blockquote>
<p>Again, it’d only be triggered by installing the package, not by updates.</p>
</blockquote>
</aside>
<p>dist-upgrade (which includes both upgrade and install) can be run from a virtual terminal - no GUI. Also also without any option for any user input. These cases need to be handled as well. Unless we do something similar style as Android: say GUI support only.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-21T02:07:24Z' class='post-time'>
                March 21, 2020,  2:07am
              </time>
              <meta itemprop='dateModified' content='2020-03-21T02:07:24Z'>
          <span itemprop='position'>#30</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-username="Patrick" data-post="27" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<blockquote>
<p>To ask another way: User types <code>xchat</code> in xfce4-terminal emulator or starts xchat through xfce start menu. Why would xchat start sandboxed rather than non-sandboxed?</p>
</blockquote>
<p>We’d have to use the stackable wrappers.</p>
</blockquote>
<p>[1] Stackable wrappers concept only covers applications where their part if known at the time when the stackable wrapper is written. It cannot wrap applications which aren’t defined by path.</p>
</blockquote>
</aside>
<p>This might require a Linux LSM and/or hook for Linux kernel hook execve. Usermodehelper? Otherwise I wouldn’t know any call to any arbiary binary could be checked provided by a package of some section to then be wrapped so it could be sandboxed. …which would make all of this really complex and also add attack surface if done wrong. This could use input from other clever people. Could you please discuss this with other (Debian based) Linux distributions which could be interested too in such a sandboxing framework for wider input on how to best implement this?</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-21T02:39:40Z' class='post-time'>
                March 21, 2020,  2:39am
              </time>
              <meta itemprop='dateModified' content='2020-03-21T02:39:40Z'>
          <span itemprop='position'>#31</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I really don’t think we need to modify the kernel for this. A smart wrapper and apt hook should be fine.</p>
<p>Usermodehelpers are a way for kernel code to execute userspace programs which isn’t relevant to us.</p>
<p>Adding new hooks into the kernel is a really bad idea.</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="27" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>It cannot wrap applications which aren’t defined by path.</p>
</blockquote>
</aside>
<p>What do you mean by this? Binaries in non-standard directories such as /home or /tmp? We should just kill those off anyway and only allow execution from directories such as /bin.</p>
<p>Or do you mean a user executing <code>/usr/bin/xchat</code> instead of <code>xchat</code>?</p>
<aside class="quote no-group" data-username="Patrick" data-post="30" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Could you please discuss this with other (Debian based) Linux distributions which could be interested too in such a sandboxing framework for wider input on how to best implement this?</p>
</blockquote>
</aside>
<p>Like what?</p>
<p>Parrot OS comes to mind but they’re more about security theater than actual security and the <a href="../../../external.html?link=https://community.parrotsec.org/t/parrotos-hardening/11649">last post about hardening</a> seems to be mostly ignored with nothing actually done.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-21T03:17:49Z' class='post-time'>
                March 21, 2020,  3:17am
              </time>
              <meta itemprop='dateModified' content='2020-03-21T03:17:49Z'>
          <span itemprop='position'>#32</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="madaidan" data-post="31" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Adding new hooks into the kernel is a really bad idea.</p>
</blockquote>
</aside>
<p>Yes, I am not eager at all to invent kernel hooks and ship them at Whonix level.</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="27" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<p>It cannot wrap applications which aren’t defined by path.</p>
</blockquote>
<p>What do you mean by this? Binaries in non-standard directories such as /home or /tmp?</p>
</blockquote>
</aside>
<p>No, I am not considering /home or /tmp here. In other words by comment “It cannot wrap applications which aren’t defined by path.” was about /usr/bin etc.</p>
<p>Using <a href="../../../external.html?link=https://packages.debian.org/buster/hello">hello</a> as an example. It’s at <code>/usr/bin/hello</code>. How would a wrapper <code>/usr/local/bin/hello</code> (or whatever else wrapper mechanism, this one might not be actually good) be placed in <code>/usr/local/bin/hello</code> if it is unknown at package build time that at a later time there will be a binary <code>/usr/local/bin/hello</code>?</p>
<p>Another example. Let’s say a user installed <code>gajim</code>. Now executes <code>gajim</code>. How you’d intercept that in a generic way to run that through the wrapper instead of just plain <code>gajim</code>?</p>
<p><a href="../../../external.html?link=https://github.com/Whonix/uwt/blob/master/usr/bin/curl.anondist">curl.anondist</a> is a wrapper for curl which. A file shipped in uwt package. But there’s only a limited number of wrappers shipped in uwt package. There’s no wrapper for <code>hello</code> because I wouldn’t know what applications will be installed. Some applications can be covered but not any application that could be installed by the user. That’s what I meant by “aren’t defined by path”.</p>
<aside class="quote no-group" data-username="madaidan" data-post="31" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Or do you mean a user executing <code>/usr/bin/xchat</code> instead of <code>xchat</code> ?</p>
</blockquote>
</aside>
<p>Kinda. Not necessarily the user runs <code>/usr/bin/xchat</code> instead of <code>xchat</code>. <code>/usr/share/applications/vlc.desktop</code> (the desktop entry) hardcodes <code>Exec=/usr/bin/vlc</code> […]. Similar for other desktop shortcuts. Then also scripts and programs that run commands hardcode the path /usr/bin etc.</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="30" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<p>Could you please discuss this with other (Debian based) Linux distributions which could be interested too in such a sandboxing framework for wider input on how to best implement this?</p>
</blockquote>
<p>Like what?</p>
</blockquote>
</aside>
<p>Comes to mind, I previously asked <a href="../../../external.html?link=https://en.wikipedia.org/wiki/Solar_Designer">solar</a> where to discuss <a href="../../../external.html?link=https://github.com/Whonix/security-misc">security-misc</a>. Would be OK to discuss on <a href="../../../external.html?link=https://www.openwall.com/lists/oss-security/">oss-security</a> and solar might have some comments.</p>
<p>I hope Whonix isn’t the only security-focused Linux distribution left.</p>
<p>There’s also tons of Debian people interested in Debian security. They might not be in charge, well organized, etc. but they exist. Tails? Clip OS?</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-21T03:40:30Z' class='post-time'>
                March 21, 2020,  3:40am
              </time>
              <meta itemprop='dateModified' content='2020-03-21T03:40:30Z'>
          <span itemprop='position'>#33</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="32" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Using <a href="../../../external.html?link=https://packages.debian.org/buster/hello">hello</a> as an example. It’s at <code>/usr/bin/hello</code> . How would a wrapper <code>/usr/local/bin/hello</code> (or whatever else wrapper mechanism, this one might not be actually good) be placed in <code>/usr/local/bin/hello</code> if it is unknown at package build time that at a later time there will be a binary <code>/usr/local/bin/hello</code> ?</p>
<p>Another example. Let’s say a user installed <code>gajim</code> . Now executes <code>gajim</code> . How you’d intercept that in a generic way to run that through the wrapper instead of just plain <code>gajim</code> ?</p>
<p><a href="../../../external.html?link=https://github.com/Whonix/uwt/blob/master/usr/bin/curl.anondist">curl.anondist</a> is a wrapper for curl which. A file shipped in uwt package. But there’s only a limited number of wrappers shipped in uwt package. There’s no wrapper for <code>hello</code> because I wouldn’t know what applications will be installed. Some applications can be covered but not any application that could be installed by the user. That’s what I meant by “aren’t defined by path”.</p>
</blockquote>
</aside>
<p>So you mean how do we create wrappers for new programs the user installs which we don’t know about?</p>
<p>That’s what I meant by an apt hook. During installation of a new program, it can create a wrapper for the program.</p>
<aside class="quote no-group" data-username="Patrick" data-post="32" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Kinda. Not necessarily the user runs <code>/usr/bin/xchat</code> instead of <code>xchat</code> . <code>/usr/share/applications/vlc.desktop</code> (the desktop entry) hardcodes <code>Exec=/usr/bin/vlc</code> […]. Similar for other desktop shortcuts. Then also scripts and programs that run commands hardcode the path /usr/bin etc.</p>
</blockquote>
</aside>
<p>We can fix those to not hardcode the path.</p>
<aside class="quote no-group" data-username="Patrick" data-post="32" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Tails? Clip OS?</p>
</blockquote>
</aside>
<p>It might be good to suggest all of our recent work to Tails including security-misc, apparmor-profile-everything, hardened-kernel etc. as well as this.</p>
<p>CLIP OS is based on Gentoo, not Debian and <a href="../../../external.html?link=https://docs.clip-os.org/clipos/architecture.html">uses a bunch of containers instead</a> so they won’t be interested in this.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-26T20:07:10Z' class='post-time'>
                March 26, 2020,  8:07pm
              </time>
              <meta itemprop='dateModified' content='2020-03-26T20:07:10Z'>
          <span itemprop='position'>#34</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/1" target="_blank">github.com/Whonix/sandbox-app-launcher</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewbox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/1" target="_blank">Get rid of the need for a config file</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:config</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-03-26" data-time="16:03:30" data-timezone="UTC">04:03PM - 26 Mar 20 UTC</span>
      </div>

      <div class="user">
        <a href="../../../external.html?link=https://github.com/madaidan" target="_blank">
          <img alt="madaidan" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="2 commits changed 2 files with 10 additions and 19 deletions">
        <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/1/files" target="_blank">
          <span class="added">+10</span>
          <span class="removed">-19</span>
        </a>
      </div>
    </div>

  </div>
</div>
  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/2" target="_blank">github.com/Whonix/sandbox-app-launcher</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewbox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/2" target="_blank">Switch to a seccomp whitelist</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:whitelist</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-03-26" data-time="20:06:44" data-timezone="UTC">08:06PM - 26 Mar 20 UTC</span>
      </div>

      <div class="user">
        <a href="../../../external.html?link=https://github.com/madaidan" target="_blank">
          <img alt="madaidan" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 376 additions and 128 deletions">
        <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/2/files" target="_blank">
          <span class="added">+376</span>
          <span class="removed">-128</span>
        </a>
      </div>
    </div>

  </div>
</div>
  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-27T06:40:11Z' class='post-time'>
                March 27, 2020,  6:40am
              </time>
              <meta itemprop='dateModified' content='2020-03-27T06:40:11Z'>
          <span itemprop='position'>#35</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>madaidan via Whonix Forum:</p>
<blockquote>
<p><a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/1">https://github.com/Whonix/sandbox-app-launcher/pull/1</a></p>
<p><a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/2">https://github.com/Whonix/sandbox-app-launcher/pull/2</a></p>
</blockquote>
<p>Merged.</p>
<p>Could you please move from using <code>which</code> to <code>command -v</code>? I can’t find<br>
the reference anymore. Might be from Greg Wooledge. Not sure that was<br>
security relevant or best practices. <code>which</code> is an external utility.<br>
<code>command -v</code> is a built-in.</p>
<p>Btw I am documenting such things now:</p>
<p><a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/coding_style" class="onebox" target="_blank">https://www.whonix.org/wiki/Dev/coding_style</a></p>
<p>(Similar to Linux one but a lot simpler.)</p>
<p>Could you please run <code>shellcheck usr/share/sandbox-app-launcher/sandbox</code>? There might be quite a few<br>
false positives.</p>
<p>For example <code>app_path="$(which ${app_name})"</code> I am quite sure variable<br>
app_name should be quoted.</p>
<p>As for <code>sudo -H -u "${app_user}" bash -c "</code> it is true that any quotes<br>
within the already open quote will actually unquote it.</p>
<p>Could you please also copy the other usual files? (Such as from<br>
helper-scripts or most Whonix packages.)</p>
<ul>
<li>COPYING</li>
<li>CONTRIBUTING.md</li>
<li>GPLv3</li>
<li>Makefile</li>
<li>README.md</li>
</ul>
<p>Also a /debian folder template would be good. Can also copy from<br>
helper-scripts and then filename / string replace all mentions of<br>
helper-scripts with sandbox-app-launcher. I’ll then complete the actual<br>
packaging.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-27T08:08:22Z' class='post-time'>
                March 27, 2020,  8:08am
              </time>
              <meta itemprop='dateModified' content='2020-03-27T08:08:22Z'>
          <span itemprop='position'>#36</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><code>usr/share/sandbox-app-launcher/sandbox</code> currently has broken white space handling. It breaks if <code>lib_dir</code> or <code>main_app_dir</code> has a space in its folder or file name.</p>
<p>Proper white space within quotes handling in bash is non-intuitive, non-trivial to figure out but I guess once there’s a working example it should be doable.</p>
<p>See:<br>
<a href="../../../external.html?link=https://yakking.branchable.com/posts/whitespace-safety/" class="onebox" target="_blank">https://yakking.branchable.com/posts/whitespace-safety/</a></p>
<p>Created simplified example here:<br>
<a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/bash">https://www.whonix.org/wiki/Dev/bash</a></p>
<p>Full line then which hopefully won’t fail on white spaces:</p>
<pre><code>sudo -H -u "${app_user}" bash -c '"${cmd[@]}"'</code></pre>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-27T17:59:24Z' class='post-time'>
                March 27, 2020,  5:59pm
              </time>
              <meta itemprop='dateModified' content='2020-03-27T17:59:24Z'>
          <span itemprop='position'>#37</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="35" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Could you please move from using <code>which</code> to <code>command -v</code> ?</p>
</blockquote>
</aside>
<p>Doesn’t seem to be the same.</p>
<pre><code>command -v ls
</code></pre>
<blockquote>
<p>alias ls=‘ls --color=auto’</p>
</blockquote>
<p><a href="../../../external.html?link=https://mywiki.wooledge.org/BashFAQ/081" class="onebox" target="_blank">https://mywiki.wooledge.org/BashFAQ/081</a></p>
<p><code>type -P</code> would probably be better.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-27T18:25:45Z' class='post-time'>
                March 27, 2020,  6:25pm
              </time>
              <meta itemprop='dateModified' content='2020-03-27T18:25:45Z'>
          <span itemprop='position'>#38</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="madaidan" data-post="37" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p><a href="../../../external.html?link=https://mywiki.wooledge.org/BashFAQ/081">https://mywiki.wooledge.org/BashFAQ/081</a></p>
<p><code>type -P</code> would probably be better.</p>
</blockquote>
</aside>
<p>Good find. Yes, better.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-27T18:27:27Z' class='post-time'>
                March 27, 2020,  6:27pm
              </time>
              <meta itemprop='dateModified' content='2020-03-27T18:27:27Z'>
          <span itemprop='position'>#39</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/3" target="_blank">github.com/Whonix/sandbox-app-launcher</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewbox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/3" target="_blank">Minor improvements</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:improvements</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-03-27" data-time="18:27:14" data-timezone="UTC">06:27PM - 27 Mar 20 UTC</span>
      </div>

      <div class="user">
        <a href="../../../external.html?link=https://github.com/madaidan" target="_blank">
          <img alt="madaidan" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="3 commits changed 13 files with 916 additions and 19 deletions">
        <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/3/files" target="_blank">
          <span class="added">+916</span>
          <span class="removed">-19</span>
        </a>
      </div>
    </div>

  </div>
</div>
  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-28T17:44:20Z' class='post-time'>
                March 28, 2020,  5:44pm
              </time>
              <meta itemprop='dateModified' content='2020-03-28T17:44:20Z'>
          <span itemprop='position'>#40</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Is it possible to get the name of the package being installed from an apt/dpkg hook? Then to automatically setup the sandbox, we can setup something like:</p>
<pre><code>DPkg::Post-Invoke {"echo -e '#!/bin/bash\n/usr/share/sandbox-app-launcher/sandbox $(basename $0)' &gt; /usr/local/bin/${pkgname}; chmod +x /usr/local/bin/${pkgname};};</code></pre>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="9008.html">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="90089ba9.html?page=3">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
