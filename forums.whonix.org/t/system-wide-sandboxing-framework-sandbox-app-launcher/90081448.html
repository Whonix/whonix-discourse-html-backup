<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>System-wide sandboxing framework - sandbox-app-launcher - Development - Whonix Forum</title>
    <meta name="description" content="We’re currently working on a full system apparmor policy to confine all userspace processes but this has 2 issues: 


It doesn’t use more restrictive profiles for user applications. A PDF viewer shouldn’t have the same p&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="90081448.html?page=10" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;System-wide sandboxing framework - sandbox-app-launcher&#39;" href="9008.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/system-wide-sandboxing-framework-sandbox-app-launcher/9008?page=10" />
<meta name="twitter:url" content="https://forums.whonix.org/t/system-wide-sandboxing-framework-sandbox-app-launcher/9008?page=10" />
<meta property="og:title" content="System-wide sandboxing framework - sandbox-app-launcher" />
<meta name="twitter:title" content="System-wide sandboxing framework - sandbox-app-launcher" />
<meta property="og:description" content="Right. Ideally minimal changes and same security.   What do you mean? Replace with a different browser? Sounds big. Different forum thread would be useful.   That seems very possible…  At first boot of Whonix, tb-updater copies Tor Browser from /var/cache/tb-binary to user home folder. I.e. it is already “cached”. No download required - it was downloaded to /var/cache/tb-binary during build process. It’s not (anymore) directly stored to user home folder during build process since it’s better to..." />
<meta name="twitter:description" content="Right. Ideally minimal changes and same security.   What do you mean? Replace with a different browser? Sounds big. Different forum thread would be useful.   That seems very possible…  At first boot of Whonix, tb-updater copies Tor Browser from /var/cache/tb-binary to user home folder. I.e. it is already “cached”. No download required - it was downloaded to /var/cache/tb-binary during build process. It’s not (anymore) directly stored to user home folder during build process since it’s better to..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="84 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="347 ❤" />
<meta property="article:published_time" content="2020-10-05T10:45:25+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="90080b08.html?page=9">
        <link rel="next" href="90081c8b.html?page=11">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="9008.html">System-wide sandboxing framework - sandbox-app-launcher</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/component_security.html' class='discourse-tag' rel="tag">component_security</a>, 
            <a href='../../tag/status_open_issue_todo.html' class='discourse-tag' rel="tag">status_open_issue_todo</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-05T10:45:25Z' class='post-time'>
                October 5, 2020, 10:45am
              </time>
              <meta itemprop='dateModified' content='2020-10-05T10:45:25Z'>
          <span itemprop='position'>#181</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="madaidan" data-post="178" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Instead of butchering the security model</p>
</blockquote>
</aside>
<p>Right. Ideally minimal changes and same security.</p>
<aside class="quote no-group" data-username="madaidan" data-post="178" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>we should consider replacing the Tor Browser again</p>
</blockquote>
</aside>
<p>What do you mean? Replace with a different browser? Sounds big. Different forum thread would be useful.</p>
<aside class="quote no-group" data-username="madaidan" data-post="178" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>make sandbox-app-launcher/tb-starter reinstall the Tor Browser in the <code>sandbox-torbrowser</code> user’s home directory.</p>
</blockquote>
</aside>
<p>That seems very possible…</p>
<p>At first boot of Whonix, tb-updater copies Tor Browser from /var/cache/tb-binary to user home folder. I.e. it is already “cached”. No download required - it was downloaded to /var/cache/tb-binary during build process. It’s not (anymore) directly stored to user home folder during build process since it’s better to leave home folder creator to the system at first boot for various reasons. On Non-Qubes-Whonix normally <code>/var/cache/tb-binary</code> gets outdated (but that would be easy to change) but in Qubes-Whonix it will be updated on tb-updater upgrades. Details here:<br>
<code>https://www.whonix.org/wiki/Tor_Browser/Advanced_Users#Platform-specific_Issues:_Qubes-Whonix_.E2.84.A2</code></p>
<p>To simplify what I said above.</p>
<p>By running <code>tb-starter</code> / <code>torbrowser</code> (<code>/usr/bin/torbrowser</code> by Whonix developers) it copies - if no such folder already exists yet - from <code>/var/cache/tb-binary</code> to user home folder. And the destination folder is already configureable by environment variables. We might already be in a good position to implement what you suggested. <code>tb-starter</code> probably has already sufficient features to help with whatever is needed.</p>
<p>Would it be sane for sandbox-app-launcher to change environment variable <code>$HOME</code>?</p>
<pre><code>export HOME=/tmp/test
echo ~
</code></pre>
<blockquote>
<p>/tmp/test</p>
</blockquote>
<p>If that works, don’t even need to set tb-starter environment variables. Just set HOME environment variable and run <code>torbrowser</code>? That would copy Tor Browser to correct folder and start it. Briefly tested with <code>export HOME=/tmp/test</code> just now.</p>
<p>In summary: if <code>HOME</code> is correct, just run <code>torbrowser</code>? Would that help to copy Tor Browser into sandbox-app-launcher home folder and execute it from there?</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>
          <meta itemprop='keywords' content='component_security, status_open_issue_todo'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-05T19:59:09Z' class='post-time'>
                October 5, 2020,  7:59pm
              </time>
              <meta itemprop='dateModified' content='2020-10-05T19:59:09Z'>
          <span itemprop='position'>#182</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="181" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>What do you mean? Replace with a different browser?</p>
</blockquote>
</aside>
<p>No, I mean moving the Tor Browser files so they’re placed in a standard directory like <code>/usr/bin</code> or something rather than <code>/home</code>.</p>
<aside class="quote no-group" data-username="Patrick" data-post="181" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Just set HOME environment variable and run <code>torbrowser</code> ? That would copy Tor Browser to correct folder and start it.</p>
</blockquote>
</aside>
<p>Running <code>torbrowser</code> within the sandbox will break it since it’s too restrictive. Is there a way to make <code>torbrowser</code> only install the files normally before starting the sandbox and then start the Tor Browser within the sandbox? I.e. separate the installation and execution.</p>
<p>E.g.</p>
<pre><code class="lang-auto">export HOME=/home/sandbox-app-launcher-appdata/sandbox-torbrowser
torbrowser install-only

sudo -H -u "${app_user}" bash -c "
bwrap \
...
</code></pre>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-06T17:40:40Z' class='post-time'>
                October 6, 2020,  5:40pm
              </time>
              <meta itemprop='dateModified' content='2020-10-06T17:40:40Z'>
          <span itemprop='position'>#183</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="madaidan" data-post="182" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>No, I mean moving the Tor Browser files so they’re placed in a standard directory like <code>/usr/bin</code> or something rather than <code>/home</code> .</p>
</blockquote>
</aside>
<p>That would probably be difficult, and fragile (with Tor Browser internal updater breaking). If going this route, please create a new forum thread, because that seems rather complex.</p>
<aside class="quote no-group" data-username="madaidan" data-post="182" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Is there a way to make <code>torbrowser</code> only install the files normally before starting the sandbox and then start the Tor Browser within the sandbox?</p>
</blockquote>
</aside>
<p>Copy only is now implemented in git master.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/tb-starter/commit/ce589c2b9c8e5c4acc2834045290b29ac136cce7" target="_blank">github.com/Whonix/tb-starter</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/Whonix/tb-starter/commit/ce589c2b9c8e5c4acc2834045290b29ac136cce7" target="_blank">add environment variable `tb_no_start=true` support</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2020-10-06" data-time="17:27:16" data-timezone="UTC">05:27PM - 06 Oct 20 UTC</span>
      </div>

      <div class="user">
        <a href="../../../external.html?link=https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 6 additions and 0 deletions">
        <a href="../../../external.html?link=https://github.com/Whonix/tb-starter/commit/ce589c2b9c8e5c4acc2834045290b29ac136cce7" target="_blank">
          <span class="added">+6</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>

  </div>
</div>


  <div class="github-row">
    <pre class="github-content" style="white-space: normal;">to avoid starting Tor Browser
https://forums.whonix.org/t/system-wide-sandboxing-framework/9008/182</pre>
  </div>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<pre><code>HOME=/home/sandbox-app-launcher-appdata/sandbox-torbrowser tb_no_start=true torbrowser
</code></pre>
<p>Just make sure that folder exists and is writable. Perhaps a test? It would be similar to <code>/home/user</code>.</p>
<p>I.e. <code>HOME=/home/non-existing tb_no_start=true torbrowser</code> would not copy but     <code>HOME=/home/existing-user tb_no_start=true torbrowser</code> would work.</p>
<p>As an added bonus if the cached folder <code>/var/cache/tb-binary</code> is not populated for whatever reason it will ask if one wants to download using Tor Browser downloader by Whonix developers.</p>
<p>Please try. Package not available yet but in 1 day or so. Patch should be easy to apply manually though.</p>
<p>Inside the sandbox you can then run <code>torbrowser</code> (<code>/usr/bin/torbrowser</code>) manually since already copied? Otherwise could also use its own startup script but to keep the differences as small as possible the former (<code>/usr/bin/torbrowser</code>) would be preferable. Also <code>/usr/bin/torbrowser</code> has more sanity testing, usability.</p>
<p>(Will require some fine tuning to be compatible with Qubes DispVMs but I can work on that later. Also later on I will see to make sure that <code>/var/cache/tb-binary</code> stays up to date in Non-Qubes-Whonix too. Nothing that would block your development at this point.)</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-06T17:45:33Z' class='post-time'>
                October 6, 2020,  5:45pm
              </time>
              <meta itemprop='dateModified' content='2020-10-06T17:45:33Z'>
          <span itemprop='position'>#184</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-username="Patrick" data-post="183" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p><a href="../../../external.html?link=https://github.com/Whonix/tb-starter/commit/ce589c2b9c8e5c4acc2834045290b29ac136cce7">add environment variable <code>tb_no_start=true</code> support</a></p>
</blockquote>
</aside>
<p>Now in Whonix developers repository.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-06T20:18:08Z' class='post-time'>
                October 6, 2020,  8:18pm
              </time>
              <meta itemprop='dateModified' content='2020-10-06T20:18:08Z'>
          <span itemprop='position'>#185</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/42" target="_blank" rel="nofollow noopener">github.com/Whonix/sandbox-app-launcher</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/42" target="_blank" rel="nofollow noopener">Don't try to remove users if they don't exist</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:postrm</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-10-06" data-time="20:17:49" data-timezone="UTC">08:17PM - 06 Oct 20 UTC</span>
      </div>

      <div class="user">
        <a href="../../../external.html?link=https://github.com/madaidan" target="_blank" rel="nofollow noopener">
          <img alt="madaidan" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 6 additions and 4 deletions">
        <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/42/files" target="_blank" rel="nofollow noopener">
          <span class="added">+6</span>
          <span class="removed">-4</span>
        </a>
      </div>
    </div>

  </div>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-06T21:01:22Z' class='post-time'>
                October 6, 2020,  9:01pm
              </time>
              <meta itemprop='dateModified' content='2020-10-06T21:01:22Z'>
          <span itemprop='position'>#186</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I have working Tor Browser support in this tree although with 2 main issues and I’m not sure exactly how to approach fixing these.</p>
<p><a href="../../../external.html?link=https://github.com/madaidan/sandbox-app-launcher/tree/torbrowser" rel="nofollow noopener">https://github.com/madaidan/sandbox-app-launcher/tree/torbrowser</a></p>
<p>1) The <code>torbrowser</code> command fails after installing the Tor Browser as it tries to execute:</p>
<pre><code>sudo --non-interactive tb_home_folder="$tb_home_folder" tb_user_home="$tb_user_home" /usr/lib/tb-starter/remount-exec
</code></pre>
<p>which results in a password required error. However, everything works fine when executing <code>sandbox-app-launcher torbrowser</code> again since it only relies on <code>torbrowser</code> for installation, not execution (I don’t see the need for executing <code>torbrowser</code> within the sandbox, it’ll likely cause more issues).</p>
<p>2) The <code>TOR_SKIP_LAUNCH=1</code> and other variables are not set which causes errors about the Tor daemon upon launch. I’d imagine stream isolation is also going to be an issue.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-07T13:09:36Z' class='post-time'>
                October 7, 2020,  1:09pm
              </time>
              <meta itemprop='dateModified' content='2020-10-07T13:09:36Z'>
          <span itemprop='position'>#187</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-username="madaidan" data-post="186" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<ol>
<li>
</li></ol>
</blockquote>
</aside>
<p>I can, and will iron out any issues as far as that is possible. Will look into adding variable to disable remount-exec function now. Please keep letting me know what is causing issues and I will look into fixes. Seems pretty simple on my side of adjusting <code>/usr/bin/torbrowser</code> for this use case, doable quickly.</p>
<p><code>/usr/bin/torbrowser</code> is not critical but would be useful if that works. Has some usability features:</p>
<ul>
<li>open link conformation</li>
<li>notify non-zero (error) exit codes and advice visiting <a href="../../../external.html?link=https://www.whonix.org/wiki/Tor_Browser#Tor_Browser_Launch_Errors">https://www.whonix.org/wiki/Tor_Browser#Tor_Browser_Launch_Errors</a>
</li>
<li>i2browser support</li>
<li>SecBrowser support</li>
<li>starter binary detection</li>
<li>refuse running as root</li>
<li>Waiting for tb-updater-first-boot.service is useful in Qubes to make sure permission fix is done for Qubes DispVMs.</li>
<li>Check directory is not set to <code>noexec</code> and show error popup if that is the case.</li>
<li>Avoid running in Qubes DVM Template.</li>
<li>Avoid running in Qubes TemplateVM.</li>
<li>running pre scripts through configuration folder</li>
<li>injecting command line options through configuration folder</li>
<li>folder permission check (often messed up after user data restore)</li>
<li>remount-exec (related to <a href="../re-mount-home-and-other-with-noexec-and-nosuid-among-other-useful-mount-options-for-better-security/7707.html" class="inline-onebox">(re-)mount home [and other?] with noexec (and nosuid [among other useful mount options]) for better security?</a> - can be looked into once that progressed)</li>
</ul>
<aside class="quote no-group" data-username="madaidan" data-post="186" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<ol start="2">
<li>The <code>TOR_SKIP_LAUNCH=1</code> and other variables are not set which causes errors about the Tor daemon upon launch. I’d imagine stream isolation is also going to be an issue.</li>
</ol>
</blockquote>
</aside>
<p>Sane for sandbox to inherit environment variables? Probably not…</p>
<p>Then we need to somewhat, “emulate a full boot” inside the sandbox. At least setting relevant environment variables.</p>
<p>Related package: <code>anon-ws-disable-stacked-tor</code></p>
<p>Related files:</p>
<ul>
<li><code>/usr/lib/anon-ws-disable-stacked-tor/torbrowser.sh</code></li>
<li><code>/etc/X11/Xsession.d/20torbrowser</code></li>
<li>(<code>/etc/profile.d/20_torbrowser.sh</code>)</li>
</ul>
<p>Therefore <code>sh</code> (<code>.</code>) (or <code>bash</code> <code>source</code>) (load environment variables) from file <code>/etc/X11/Xsession.d/20torbrowser</code>? I.e.:</p>
<pre><code>source /etc/X11/Xsession.d/20torbrowser
</code></pre>
<hr>
<p>Somewhat unrelated, general question… Or <code>source</code> all of <code>/etc/X11/Xsession.d/</code>, <code>source</code> <code>/etc/environment</code>? (Check if file exists.)</p>
<p>What about hardened malloc ld preload inside sandbox?<br>
(<a href="../hardened-malloc-hardened-memory-allocator/7474.html" class="inline-onebox">Hardened Malloc - Hardened Memory Allocator</a>)</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-07T13:30:31Z' class='post-time'>
                October 7, 2020,  1:30pm
              </time>
              <meta itemprop='dateModified' content='2020-10-07T13:30:31Z'>
          <span itemprop='position'>#188</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Yay, tb-starter has now the same skip function feature that tb-updater has. This gives flexibility to skip any function during development (or even final implementation) through setting environment variables.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/tb-starter/commit/20c2165fb83f0d095492329b1329b704e7d031ec" target="_blank">github.com/Whonix/tb-starter</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/Whonix/tb-starter/commit/20c2165fb83f0d095492329b1329b704e7d031ec" target="_blank">allow skipping arbitrary functions thorough use of `tb_skip_functions` environment variable</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2020-10-07" data-time="13:27:53" data-timezone="UTC">01:27PM - 07 Oct 20 UTC</span>
      </div>

      <div class="user">
        <a href="../../../external.html?link=https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 31 additions and 25 deletions">
        <a href="../../../external.html?link=https://github.com/Whonix/tb-starter/commit/20c2165fb83f0d095492329b1329b704e7d031ec" target="_blank">
          <span class="added">+31</span>
          <span class="removed">-25</span>
        </a>
      </div>
    </div>

  </div>
</div>


  <div class="github-row">
    <pre class="github-content" style="white-space: normal;">abolish `tb_no_start`
https://forums.whonix.org/t/system-wide-sandboxing-framework/9008/187</pre>
  </div>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Example:</p>
<pre><code>tb_skip_functions+=" remount_exec tb_start_tor_browser " torbrowser
</code></pre>
<p>Package ready soon.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-07T13:33:07Z' class='post-time'>
                October 7, 2020,  1:33pm
              </time>
              <meta itemprop='dateModified' content='2020-10-07T13:33:07Z'>
          <span itemprop='position'>#189</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Now available in developers repository.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-07T13:39:46Z' class='post-time'>
                October 7, 2020,  1:39pm
              </time>
              <meta itemprop='dateModified' content='2020-10-07T13:39:46Z'>
          <span itemprop='position'>#190</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="187" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Therefore <code>sh</code> ( <code>.</code> ) (or <code>bash</code> <code>source</code> ) (load environment variables) from file <code>/etc/X11/Xsession.d/20torbrowser</code> ? I.e.:</p>
<pre><code class="lang-auto">source /etc/X11/Xsession.d/20torbrowser
</code></pre>
</blockquote>
</aside>
<p>This fixes the issue although the proxy settings are now borked and it can’t connect to the internet. Should we add a user.js file?</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-07T13:50:21Z' class='post-time'>
                October 7, 2020,  1:50pm
              </time>
              <meta itemprop='dateModified' content='2020-10-07T13:50:21Z'>
          <span itemprop='position'>#191</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><code>user.js</code> based solutions are usually breaking after a while due to Tor Browser changes.</p>
<p>Therefore the approach in Whonix is to not do any Tor Browser modifications in the “inside” and only prepare the “outside” so Tor Browser does not have to “know” about anything.</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/anon-ws-disable-stacked-tor" target="_blank" title="10:05AM - 17 September 2020">Whonix – 17 Sep 20</a>
  </header>
  <article class="onebox-body">
    <img src="../../../external.html?link=https://www.whonix.org/w/resources/assets/wiki.png" class="thumbnail onebox-avatar" width="60" height="60">

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/anon-ws-disable-stacked-tor" target="_blank">Dev/anon-ws-disable-stacked-tor - Whonix</a></h3>

<p>Preventing Tor over Tor for Tor Browser, TorChat and others.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>(<a href="../../../external.html?link=https://www.whonix.org/wiki/Tor_Browser#Whonix_.E2.84.A2_Tor_Browser_Differences">Whonix ™ Tor Browser Differences</a>)</p>
<p>Can we make the <code>anon-ws-disable-stacked-tor</code> approach work inside the sandbox? I.e…</p>
<p>As set in <code>/usr/lib/anon-ws-disable-stacked-tor/torbrowser.sh</code>.</p>
<pre><code>## Environment variable to configure Tor Browser to use a pre existing unix
## domain socket file instead of creating its own one to avoid Tor over Tor and
## to keep it being able to connect.
## systemd-socket-proxyd is being used for creation of unix domain socket file
## /run/anon-ws-disable-stacked-tor/127.0.0.1_9150.sock and forwarding it to
## to Whonix-Gateway port 9150.
## https://phabricator.whonix.org/T192
## https://trac.torproject.org/projects/tor/ticket/20111#comment:5
export TOR_SOCKS_IPC_PATH="/run/anon-ws-disable-stacked-tor/127.0.0.1_9150.sock"
export TOR_CONTROL_IPC_PATH="/run/anon-ws-disable-stacked-tor/127.0.0.1_9151.sock"
</code></pre>
<p>I.e. is it sane and possible for the sandbox to allow access to files:</p>
<ul>
<li><code>/run/anon-ws-disable-stacked-tor/127.0.0.1_9150.sock</code></li>
<li><code>/run/anon-ws-disable-stacked-tor/127.0.0.1_9151.sock</code></li>
</ul>
<p>? I speculate if that was allowed, connectivity would be fixed.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-07T14:07:41Z' class='post-time'>
                October 7, 2020,  2:07pm
              </time>
              <meta itemprop='dateModified' content='2020-10-07T14:07:41Z'>
          <span itemprop='position'>#192</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>That was indeed the issue, thanks.</p>
<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/43" target="_blank" rel="nofollow noopener">github.com/Whonix/sandbox-app-launcher</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/43" target="_blank" rel="nofollow noopener">Add Tor Browser support</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:torbrowser</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-10-07" data-time="14:04:07" data-timezone="UTC">02:04PM - 07 Oct 20 UTC</span>
      </div>

      <div class="user">
        <a href="../../../external.html?link=https://github.com/madaidan" target="_blank" rel="nofollow noopener">
          <img alt="madaidan" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="6 commits changed 2 files with 33 additions and 4 deletions">
        <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/43/files" target="_blank" rel="nofollow noopener">
          <span class="added">+33</span>
          <span class="removed">-4</span>
        </a>
      </div>
    </div>

  </div>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>The only remaining issue is that it doesn’t execute <code>torbrowser</code> but rather the <code>start-tor-browser</code> script. Executing <code>torbrowser</code> inside the sandbox doesn’t work. I will investigate it further but this should be ok for now.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-07T14:33:06Z' class='post-time'>
                October 7, 2020,  2:33pm
              </time>
              <meta itemprop='dateModified' content='2020-10-07T14:33:06Z'>
          <span itemprop='position'>#193</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Merged. And added few minor commits on top.<br>
Great progress lately! <img src="../../images/emoji/twitter/slight_smilec164.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-08T07:38:05Z' class='post-time'>
                October 8, 2020,  7:38am
              </time>
              <meta itemprop='dateModified' content='2020-10-08T07:38:05Z'>
          <span itemprop='position'>#194</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <pre><code>sandbox-app-launcher torbrowser
</code></pre>
<p>systemd journal:</p>
<pre><code>Oct 08 07:32:52 host audit[2981]: AVC apparmor="DENIED" operation="signal" profile="sandbox-app-launcher-wx" pid=2981 comm="Gecko_IOThread" requested_mask="send" denied_mask="send" signal=exists peer="sandbox-app-launcher-wx"
Oct 08 07:32:52 host audit[2981]: AVC apparmor="DENIED" operation="signal" profile="sandbox-app-launcher-wx" pid=2981 comm="Gecko_IOThread" requested_mask="receive" denied_mask="receive" signal=exists peer="sandbox-app-launcher-wx"
Oct 08 07:32:52 host kernel: audit: type=1400 audit(1602142372.828:1469): apparmor="DENIED" operation="signal" profile="sandbox-app-launcher-wx" pid=2981 comm="Gecko_IOThread" requested_mask="send" denied_mask="send" signal=exists peer="sandbox-app-launcher-wx"
Oct 08 07:32:52 host kernel: audit: type=1400 audit(1602142372.828:1470): apparmor="DENIED" operation="signal" profile="sandbox-app-launcher-wx" pid=2981 comm="Gecko_IOThread" requested_mask="receive" denied_mask="receive" signal=exists peer="sandbox-app-launcher-wx"
Oct 08 07:32:53 host audit[2981]: AVC apparmor="DENIED" operation="signal" profile="sandbox-app-launcher-wx" pid=2981 comm="Gecko_IOThread" requested_mask="send" denied_mask="send" signal=exists peer="sandbox-app-launcher-wx"
</code></pre>
<p>Otherwise working, which is great!</p>
<p>Other minor stuff…</p>
<p>Could you please silent this?</p>
<blockquote>
<p>DBUS_SESSION_BUS_ADDRESS=unix:abstract=/tmp/dbus-…<br>
DBUS_SESSION_BUS_PID=8<br>
DBUS_SESSION_BUS_WINDOWID=…</p>
</blockquote>
<p>And this?</p>
<blockquote>
<p>INFO: Installing Tor Browser in sandbox…</p>
</blockquote>
<p>I will also silent tb-starter copying Tor Browser with <code>--verbose</code>. (It is bad practice for wrappers to introduce extraneous console output since that could break other wrappers (custom, written by users) which parse these program’s output.)</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-08T07:59:23Z' class='post-time'>
                October 8, 2020,  7:59am
              </time>
              <meta itemprop='dateModified' content='2020-10-08T07:59:23Z'>
          <span itemprop='position'>#195</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>This should only be done for Tor Browser:</p>
<blockquote>
<p>–ro-bind-try /run/anon-ws-disable-stacked-tor/127.0.0.1_9150.sock /run/anon-ws-disable-stacked-tor/127.0.0.1_9150.sock <br>
–ro-bind-try /run/anon-ws-disable-stacked-tor/127.0.0.1_9151.sock /run/anon-ws-disable-stacked-tor/127.0.0.1_9151.sock \</p>
</blockquote>
<p>Otherwise all applications even those with networking disabled in sandbox would gain access to networking?</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-08T12:19:19Z' class='post-time'>
                October 8, 2020, 12:19pm
              </time>
              <meta itemprop='dateModified' content='2020-10-08T12:19:19Z'>
          <span itemprop='position'>#196</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/44" target="_blank" rel="nofollow noopener">github.com/Whonix/sandbox-app-launcher</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/44" target="_blank" rel="nofollow noopener">Fixes</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:fixes</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-10-08" data-time="12:18:09" data-timezone="UTC">12:18PM - 08 Oct 20 UTC</span>
      </div>

      <div class="user">
        <a href="../../../external.html?link=https://github.com/madaidan" target="_blank" rel="nofollow noopener">
          <img alt="madaidan" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="2 commits changed 3 files with 16 additions and 12 deletions">
        <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/44/files" target="_blank" rel="nofollow noopener">
          <span class="added">+16</span>
          <span class="removed">-12</span>
        </a>
      </div>
    </div>

  </div>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="Patrick" data-post="195" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Otherwise all applications even those with networking disabled in sandbox would gain access to networking?</p>
</blockquote>
</aside>
<p>No, the network namespace should still handle that anyway but it’s a good idea to remove them from other apps.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-08T15:24:19Z' class='post-time'>
                October 8, 2020,  3:24pm
              </time>
              <meta itemprop='dateModified' content='2020-10-08T15:24:19Z'>
          <span itemprop='position'>#197</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Merged.</p>
<p>Minor: Could you please split the <code>bwrap_args+=</code> into two different <code>bwrap_args+=</code>? That would look a bit nicer than a very long line.</p>
<aside class="quote no-group" data-username="madaidan" data-post="196" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>No, the network namespace should still handle that anyway but it’s a good idea to remove them from other apps.</p>
</blockquote>
</aside>
<p>Network namespace excludes unix domain socket files?</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-08T15:35:36Z' class='post-time'>
                October 8, 2020,  3:35pm
              </time>
              <meta itemprop='dateModified' content='2020-10-08T15:35:36Z'>
          <span itemprop='position'>#198</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="197" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Minor: Could you please split the <code>bwrap_args+=</code> into two different <code>bwrap_args+=</code> ? That would look a bit nicer than a very long line.</p>
</blockquote>
</aside>
<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/45" target="_blank" rel="nofollow noopener">github.com/Whonix/sandbox-app-launcher</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/45" target="_blank" rel="nofollow noopener">Split bwrap_args into 2</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:bwrap_args</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-10-08" data-time="15:30:53" data-timezone="UTC">03:30PM - 08 Oct 20 UTC</span>
      </div>

      <div class="user">
        <a href="../../../external.html?link=https://github.com/madaidan" target="_blank" rel="nofollow noopener">
          <img alt="madaidan" src="../../../external.html?link=https://avatars0.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 2 additions and 1 deletions">
        <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/45/files" target="_blank" rel="nofollow noopener">
          <span class="added">+2</span>
          <span class="removed">-1</span>
        </a>
      </div>
    </div>

  </div>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Btw there is still <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/42" rel="nofollow noopener">https://github.com/Whonix/sandbox-app-launcher/pull/42</a></p>
<p>This fixes an issue when uninstalling sandbox-app-launcher if no users were created.</p>
<aside class="quote no-group" data-username="Patrick" data-post="197" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Network namespace excludes unix domain socket files?</p>
</blockquote>
</aside>
<p>It isolates all networking-related stuff.</p>
<p><a href="../../../external.html?link=https://www.man7.org/linux/man-pages/man7/network_namespaces.7.html" class="onebox" target="_blank" rel="nofollow noopener">https://www.man7.org/linux/man-pages/man7/network_namespaces.7.html</a></p>
<p>You can use the network from within the namespace but only if you set it up prior. We use empty net namespaces for <code>allow_net=no</code> so no networking should be possible at all without a kernel exploit.</p>
<p>We could also expand <code>allow_net</code> to blacklist network-related syscalls in addition to the network namespace but this seems redundant.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-08T15:41:32Z' class='post-time'>
                October 8, 2020,  3:41pm
              </time>
              <meta itemprop='dateModified' content='2020-10-08T15:41:32Z'>
          <span itemprop='position'>#199</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="madaidan" data-post="198" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Btw there is still <a href="../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/42">https://github.com/Whonix/sandbox-app-launcher/pull/42</a></p>
</blockquote>
</aside>
<p>Lost track of that one. Thanks for reminding me. Now merged.<br>
One that one, I’ve added <code>-q</code> to <code>grep</code>, i.e. now <code>grep -q</code>.<br>
And changed <code>userdel "${user}"</code> to <code>userdel "${user}" || true</code>. <code>userdel</code> might fail? Not sure. But if it ever does, it is probably not worth “breaking APT” for that?</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-12T14:40:49Z' class='post-time'>
                October 12, 2020,  2:40pm
              </time>
              <meta itemprop='dateModified' content='2020-10-12T14:40:49Z'>
          <span itemprop='position'>#200</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Wiki page (or readme) could use some information: how dbus, audio and X11 (did I miss something else important?) is currently handled, potentially future enhancements.</p>
<p>Also how does <a href="../../../external.html?link=https://trac.torproject.org/projects/tor/wiki/doc/TorBrowser/Sandbox/Linux">https://trac.torproject.org/projects/tor/wiki/doc/TorBrowser/Sandbox/Linux</a> compare to sandbox-app-launcher?</p>
<p>Quote <a href="../../../external.html?link=https://trac.torproject.org/projects/tor/wiki/doc/TorBrowser/Sandbox/Linux">https://trac.torproject.org/projects/tor/wiki/doc/TorBrowser/Sandbox/Linux</a></p>
<blockquote>
<p>WARNING: There are several unresolved issues that affect security and<br>
fingerprinting. Do not assume that this is perfect, merely “an improvement over nothing”.</p>
</blockquote>
<p>Does this apply to sandbox-app-launcher too?</p>
<p>Also on <a href="../../../external.html?link=https://trac.torproject.org/projects/tor/wiki/doc/TorBrowser/Sandbox/Linux">https://trac.torproject.org/projects/tor/wiki/doc/TorBrowser/Sandbox/Linux</a></p>
<ul>
<li>We have an easier time since we don’t use Tor, pluggable transports in he workstation.</li>
<li>Tor Browser Downloader by Whonix developers is nicely separated, complicated the setup with intermingling that directly inside the browser / sandbox.</li>
<li>We don’t support read-only mode (yet?) but I don’t really understand above link to what extend it was using read-only mode. You?
<ul>
<li>Did <a href="../../../external.html?link=https://trac.torproject.org/projects/tor/wiki/doc/TorBrowser/Sandbox/Linux">TorBrowser/Sandbox/Linux</a> have a concept of which folders inside the browser folder are for binaries and which for profile data?</li>
<li>And then somehow only profile data was read-only?</li>
<li>Or all was read-only?</li>
<li>Or whole Tor Browser folder (application and profile) was reset at each browser restart?</li>
</ul>
</li>
</ul>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="90080b08.html?page=9">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="90081c8b.html?page=11">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
