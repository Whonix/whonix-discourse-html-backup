<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>System-wide sandboxing framework - sandbox-app-launcher - #314 by Patrick - Development - Whonix Forum</title>
    <meta name="description" content="We’re currently working on a full system apparmor policy to confine all userspace processes but this has 2 issues: 


It doesn’t use more restrictive profiles for user applications. A PDF viewer shouldn’t have the same p&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../900842a7.html?page=16" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;System-wide sandboxing framework - sandbox-app-launcher&#39;" href="../9008.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/system-wide-sandboxing-framework-sandbox-app-launcher/9008/314" />
<meta name="twitter:url" content="https://forums.whonix.org/t/system-wide-sandboxing-framework-sandbox-app-launcher/9008/314" />
<meta property="og:title" content="System-wide sandboxing framework - sandbox-app-launcher" />
<meta name="twitter:title" content="System-wide sandboxing framework - sandbox-app-launcher" />
<meta property="og:description" content="Should file   /etc/sandbox-app-launcher/url_to_unixtime.conf   ## Copyright (C) 2020 - 2020 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt; ## See the file COPYING for copying conditions.  allow_net=yes allow_webcam=no allow_mic=no shared_storage=read-only allow_dynamic_native_code_exec=yes  be added to package sdwdate or sandbox-app-launcher?   Also a setting   shared_storage=no   would be good?" />
<meta name="twitter:description" content="Should file   /etc/sandbox-app-launcher/url_to_unixtime.conf   ## Copyright (C) 2020 - 2020 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt; ## See the file COPYING for copying conditions.  allow_net=yes allow_webcam=no allow_mic=no shared_storage=read-only allow_dynamic_native_code_exec=yes  be added to package sdwdate or sandbox-app-launcher?   Also a setting   shared_storage=no   would be good?" />
<meta property="article:published_time" content="2021-01-12T07:42:45+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="../90085760.html?page=15">
        <link rel="next" href="../90085c43.html?page=17">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../9008.html">System-wide sandboxing framework - sandbox-app-launcher</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../../tag/component_security.html' class='discourse-tag' rel="tag">component_security</a>, 
            <a href='../../../tag/status_open_issue_todo.html' class='discourse-tag' rel="tag">status_open_issue_todo</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-12T00:19:26Z' class='post-time'>
                January 12, 2021, 12:19am
              </time>
              <meta itemprop='dateModified' content='2021-01-12T00:19:26Z'>
          <span itemprop='position'>#309</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="305" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Would it be possible to combine sandbox-app-launcher with <a href="../../constrained-system-resources-program-starter-wrapper/10914.html">constrained system resources program starter wrapper </a>? Either by one script calling the other. Which one would run which? Or by adding similar code to sandbox-app-launcher?</p>
</blockquote>
</aside>
<p>We should probably add similar code to sandbox-app-launcher.</p>
<aside class="quote no-group" data-username="Patrick" data-post="305" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>It however does not yet have any defenses against denial of service (DOS) by exhausting system resources. Either as part of an actual DOS attack (compromised application doing DOS). Or as an attempt to prevent a buggy application from slowing down or even freezing the system.</p>
</blockquote>
</aside>
<p>We do use AppArmor to enforce a maximum of 200 processes as a basic protection but we should definitely invest in more.</p>
<p><a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/blob/master/etc/apparmor.d/abstractions/sandbox-app-launcher#L43" rel="noopener nofollow ugc">https://github.com/Whonix/sandbox-app-launcher/blob/master/etc/apparmor.d/abstractions/sandbox-app-launcher#L43</a></p>
<p>More on rlimit rules: <a href="../../../../external.html?link=https://manpages.debian.org/buster/apparmor/apparmor.d.5.en.html#rlimit_rules" rel="noopener nofollow ugc">https://manpages.debian.org/buster/apparmor/apparmor.d.5.en.html#rlimit_rules</a></p>
<aside class="quote no-group" data-username="HulaHoop" data-post="306" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Are the defaults sane?</p>
</blockquote>
</aside>
<p>No, the dreaded <code>:(){ :|:&amp; };:</code> can still be used to trivially wreck a system.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>
          <meta itemprop='keywords' content='component_security, status_open_issue_todo'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-12T07:04:25Z' class='post-time'>
                January 12, 2021,  7:04am
              </time>
              <meta itemprop='dateModified' content='2021-01-12T07:04:25Z'>
          <span itemprop='position'>#310</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <pre><code class="lang-auto">sudo sandbox-app-launcher setup url_to_unixtime
</code></pre>
<pre><code class="lang-auto">sandbox-app-launcher run url_to_unixtime
</code></pre>
<blockquote>
<p>ERROR: The sandbox for this program has not been set up yet. Please execute:</p>
</blockquote>
<pre><code class="lang-auto">sudo sandbox-app-launcher setup url_to_unixtime
</code></pre>
<pre><code class="lang-auto">bash -x sandbox-app-launcher run url_to_unixtime
</code></pre>
<pre><code class="lang-auto">...
+ '[' -d /home/sandbox-app-launcher-appdata/url_to_unixtime ']'
+ echo 'ERROR: The sandbox for this program has not been set up yet. Please execute:

sudo sandbox-app-launcher setup url_to_unixtime'
ERROR: The sandbox for this program has not been set up yet. Please execute:
</code></pre>
<pre><code class="lang-auto">sudo sandbox-app-launcher setup url_to_unixtime
</code></pre>
<pre><code class="lang-auto">ls /home/sandbox-app-launcher-appdata/url_to_unixtime
</code></pre>
<blockquote>
<p>ls: cannot access ‘/home/sandbox-app-launcher-appdata/url_to_unixtime’: Permission denied</p>
</blockquote>
<p>That test…</p>
<blockquote>
<p>if [ -d “${app_homedir}” ]; then</p>
</blockquote>
<p>Cannot work because user <code>user</code> has no permission to check that. How can we solve that?</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-12T07:32:14Z' class='post-time'>
                January 12, 2021,  7:32am
              </time>
              <meta itemprop='dateModified' content='2021-01-12T07:32:14Z'>
          <span itemprop='position'>#311</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Found a solution. And fixed some other things too.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/commit/ffd45c6efdb26b971a143b8845728ff3da060d82" target="_blank" rel="noopener">github.com/Whonix/sandbox-app-launcher</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/commit/ffd45c6efdb26b971a143b8845728ff3da060d82" target="_blank" rel="noopener">fix permissions if messed up by something</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2021-01-12" data-time="07:29:13" data-timezone="UTC">07:29AM - 12 Jan 21 UTC</span>
      </div>

      <div class="user">
        <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="noopener">
          <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 12 additions and 4 deletions">
        <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/commit/ffd45c6efdb26b971a143b8845728ff3da060d82" target="_blank" rel="noopener">
          <span class="added">+12</span>
          <span class="removed">-4</span>
        </a>
      </div>
    </div>

  </div>
</div>


  <div class="github-row">
    <pre class="github-content" style="white-space: normal;">(such as Qubes home folder implementation or after restoration of backup)
use sudo long instead of short parameters
fix setup already done check:
https://forums.whonix.org/t/system-wide-sandboxing-framework-sandbox-app-launcher/9008/310...</pre>
  </div>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<hr>
<p>new issue:</p>
<blockquote>
<p>sudo --set-home --user=sal-url_to_unixtime bash -c ’<br>
bwrap   --ro-bind /bin /bin   --ro-bind /usr/bin /usr/bin   --ro-bind /lib /lib   --ro-bind-try /lib32 /lib32   --ro-bind-try /lib64 /lib64   --ro-bind /usr/lib /usr/lib   --ro-bind-try /usr/local/lib /usr/local/lib   --ro-bind /usr/share /usr/share   --ro-bind-try /usr/local/share /usr/local/share   --ro-bind /usr/include /usr/include   --ro-bind /etc /etc   --ro-bind-data 10 /etc/passwd   --ro-bind-data 11 /etc/group   --ro-bind /usr/share/sandbox-app-launcher/machine-id /etc/machine-id   --ro-bind /var/lib /var/lib   --tmpfs /var/lib/dbus   --ro-bind /usr/share/sandbox-app-launcher/machine-id /var/lib/dbus/machine-id   --ro-bind /sys/devices /sys/devices   --ro-bind /sys/class /sys/class   --ro-bind /sys/bus /sys/bus   --ro-bind /sys/fs/cgroup /sys/fs/cgroup   --bind /home/sandbox-app-launcher-appdata/url_to_unixtime /home/sandbox-app-launcher-appdata/url_to_unixtime   --proc /proc   --tmpfs /tmp   --ro-bind-try /tmp/.X11-unix /tmp/.X11-unix   --tmpfs /var/tmp   --tmpfs /var/cache   --ro-bind /var/cache/sandbox-app-launcher-autogenerated/wrappers/url_to_unixtime /var/cache/sandbox-app-launcher-autogenerated/wrappers/url_to_unixtime   --ro-bind /usr/bin/url_to_unixtime /usr/bin/url_to_unixtime   --tmpfs /run   --symlink /run /var/run   --dev /dev   --chdir /home/sandbox-app-launcher-appdata/url_to_unixtime   --setenv HOME /home/sandbox-app-launcher-appdata/url_to_unixtime   --setenv USER sal-url_to_unixtime   --setenv LOGNAME sal-url_to_unixtime   --setenv XAUTHORITY /home/sandbox-app-launcher-appdata/url_to_unixtime/.Xauthority   --setenv SHELL /sbin/nologin   --setenv started_by_sandbox_app_launcher true   --unsetenv SUDO_USER   --unsetenv SUDO_UID   --unsetenv SUDO_GID   --unsetenv SUDO_COMMAND   --unsetenv OLDPWD   --unsetenv MAIL   --unshare-pid   --unshare-cgroup   --unshare-uts   --hostname host   --new-session   --cap-drop all   --seccomp 12   10&lt; &lt;(getent passwd root sal-url_to_unixtime nobody)   11&lt; &lt;(getent group root sal-url_to_unixtime nobody)   12&lt; /var/cache/sandbox-app-launcher-autogenerated/seccomp-filter.bpf      /var/cache/sandbox-app-launcher-autogenerated/wrappers/url_to_unixtime ’<br>
bwrap: Can’t create file at /etc/machine-id: Read-only file system</p>
</blockquote>
<p>File <code>/etc/machine-id</code> does not exist on my test system for some reason. I guess during setup we need to create an empty one if none exists?</p>
<p>Or better change</p>
<pre><code>--ro-bind ${main_app_dir}/machine-id /etc/machine-id
</code></pre>
<p>to</p>
<pre><code>--ro-bind-try ${main_app_dir}/machine-id /etc/machine-id
</code></pre>
<p>?</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-12T07:33:46Z' class='post-time'>
                January 12, 2021,  7:33am
              </time>
              <meta itemprop='dateModified' content='2021-01-12T07:33:46Z'>
          <span itemprop='position'>#312</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="311" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Or better change</p>
<pre><code class="lang-auto">--ro-bind ${main_app_dir}/machine-id /etc/machine-id
</code></pre>
<p>to</p>
<pre><code class="lang-auto">--ro-bind-try ${main_app_dir}/machine-id /etc/machine-id
</code></pre>
<p>?</p>
</blockquote>
</aside>
<p>That does not work. Same error.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-12T07:35:31Z' class='post-time'>
                January 12, 2021,  7:35am
              </time>
              <meta itemprop='dateModified' content='2021-01-12T07:35:31Z'>
          <span itemprop='position'>#313</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/commit/76e9f0e1d9de010736b1168ec8420e697249fee8" target="_blank" rel="noopener">github.com/Whonix/sandbox-app-launcher</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/commit/76e9f0e1d9de010736b1168ec8420e697249fee8" target="_blank" rel="noopener">create /etc/machine-id if not existing</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2021-01-12" data-time="07:34:06" data-timezone="UTC">07:34AM - 12 Jan 21 UTC</span>
      </div>

      <div class="user">
        <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="noopener">
          <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 5 additions and 0 deletions">
        <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/commit/76e9f0e1d9de010736b1168ec8420e697249fee8" target="_blank" rel="noopener">
          <span class="added">+5</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>

  </div>
</div>


  <div class="github-row">
    <pre class="github-content" style="white-space: normal;">https://forums.whonix.org/t/system-wide-sandboxing-framework-sandbox-app-launcher/9008/311</pre>
  </div>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-12T07:42:45Z' class='post-time'>
                January 12, 2021,  7:42am
              </time>
              <meta itemprop='dateModified' content='2021-01-12T07:42:45Z'>
          <span itemprop='position'>#314</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Should file</p>
<blockquote>
<p>/etc/sandbox-app-launcher/url_to_unixtime.conf</p>
</blockquote>
<pre><code>## Copyright (C) 2020 - 2020 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

allow_net=yes
allow_webcam=no
allow_mic=no
shared_storage=read-only
allow_dynamic_native_code_exec=yes
</code></pre>
<p>be added to package sdwdate or sandbox-app-launcher?</p>
<hr>
<p>Also a setting</p>
<blockquote>
<p>shared_storage=no</p>
</blockquote>
<p>would be good?</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../sdwdate-and-sdwdate-gui-development-thread/1137/375.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../sdwdate-and-sdwdate-gui-development-thread/1137/375.html'>
                      <span itemprop='name'>sdwdate and sdwdate-gui development thread</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-12T08:24:25Z' class='post-time'>
                January 12, 2021,  8:24am
              </time>
              <meta itemprop='dateModified' content='2021-01-12T08:24:25Z'>
          <span itemprop='position'>#315</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Cannot manage to run /usr/bin/url_to_unixtime. (Currently in sdwdate git master and developers repository only.)</p>
<pre><code>sudo bash -x sandbox-app-launcher run url_to_unixtime
</code></pre>
<blockquote>
<ul>
<li>/usr/bin/url_to_unixtime<br>
/var/cache/sandbox-app-launcher-autogenerated/wrappers-wx/url_to_unixtime: /usr/bin/url_to_unixtime: /usr/bin/python3: bad interpreter: Operation not permitted</li>
</ul>
</blockquote>
<pre><code>AVC apparmor="DENIED" operation="ptrace" profile="sandbox-app-launcher-wx" pid=29770 comm="systemd-detect-" requested_mask="read" denied_mask="read" peer="unconfined"
AVC apparmor="DENIED" operation="open" profile="sandbox-app-launcher-wx" name="/proc/cmdline" pid=29770 comm="systemd-detect-" requested_mask="r" denied_mask="r" fsuid=1001 ouid=0
AVC apparmor="DENIED" operation="exec" info="no new privs" error=-1 profile="sandbox-app-launcher-wx" name="/usr/bin/url_to_unixtime" pid=29777 comm="url_to_unixtime" requested_mask="x" denied_mask="x" fsuid=1001 ouid=0 target="/usr/bin/url_to_unixtime"
</code></pre>
<p>Do you think you could make url_to_unixtime work please?</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../sdwdate-and-sdwdate-gui-development-thread/1137/375.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../sdwdate-and-sdwdate-gui-development-thread/1137/375.html'>
                      <span itemprop='name'>sdwdate and sdwdate-gui development thread</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-17T02:01:17Z' class='post-time'>
                January 17, 2021,  2:01am
              </time>
              <meta itemprop='dateModified' content='2021-01-17T02:01:17Z'>
          <span itemprop='position'>#316</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="311" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>File <code>/etc/machine-id</code> does not exist on my test system for some reason. I guess during setup we need to create an empty one if none exists?</p>
</blockquote>
</aside>
<p>That’s not the issue. We don’t depend on a preexisting <code>/etc/machine-id</code>. We use <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/blob/master/usr/share/sandbox-app-launcher/machine-id" rel="noopener nofollow ugc">https://github.com/Whonix/sandbox-app-launcher/blob/master/usr/share/sandbox-app-launcher/machine-id</a> and overwrite <code>/etc/machine-id</code> within the namespace.</p>
<p>Your issue is:</p>
<blockquote>
<p>bwrap: Can’t create file at /etc/machine-id: Read-only file system</p>
</blockquote>
<p>I.e. <code>/etc</code> is mounted read-only so we can’t add our own machine-id.</p>
<aside class="quote no-group" data-username="Patrick" data-post="314" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>be added to package sdwdate or sandbox-app-launcher?</p>
</blockquote>
</aside>
<p>sdwdate.</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="314" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Also a setting</p>
<blockquote>
<p>shared_storage=no</p>
</blockquote>
<p>would be good?</p>
</blockquote>
</aside>
<p>Yes. Also see if <code>allow_dynamic_native_code_exec=no</code> works. If so, add that too.</p>
<aside class="quote no-group" data-username="Patrick" data-post="315" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Do you think you could make url_to_unixtime work please?</p>
</blockquote>
</aside>
<p>I’m confused as to what you’re trying to do. Is this the same issue as <a href="../../sdwdate-and-sdwdate-gui-development-thread/1137/376.html" class="inline-onebox">sdwdate and sdwdate-gui development thread</a>? Are you trying to use systemd sandboxing and sandbox-app-launcher together? Or a custom url_to_unixtime AppArmor profile (not the default sandbox-app-launcher profile) with the rest of sandbox-app-launcher?</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-17T03:40:21Z' class='post-time'>
                January 17, 2021,  3:40am
              </time>
              <meta itemprop='dateModified' content='2021-01-17T03:40:21Z'>
          <span itemprop='position'>#317</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I will try to simplify my questions. Try to ignore most context (sdwdate, apparmor issues)…</p>
<p>Does it generally or it some cases make sense to use sandbox-app-launcher for any applications started by systemd units? Or are for systemd units apparmor + systemd hardening more appropriate? Or is systemd-app-launcher better to be only used for user facing applications, specifically GUI applications? (Command line applications often don’t need many of the stuff in <code>/etc/X11/Xsession.d</code>, no need for dbus etc.)</p>
<p>Could you please try to make <a href="../../../../external.html?link=https://github.com/Whonix/sdwdate/blob/master/usr/bin/url_to_unixtime"><code>/usr/bin/url_to_unixtime</code></a> under sandbox-app-launcher? I cannot make it work under any sandbox-app-launcher configuration.</p>
<aside class="quote no-group" data-username="madaidan" data-post="316" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Is this the same issue as <a href="../../sdwdate-and-sdwdate-gui-development-thread/1137/376.html">sdwdate and sdwdate-gui development thread</a>?</p>
</blockquote>
</aside>
<p>No. Totally different.<br>
To resolve issues of <a href="../../sdwdate-and-sdwdate-gui-development-thread/1137/37.html" class="inline-onebox">sdwdate and sdwdate-gui development thread</a> I was wondering: could sandbox-app-launcher be used instead.</p>
<aside class="quote no-group" data-username="madaidan" data-post="316" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Are you trying to use systemd sandboxing and sandbox-app-launcher together?</p>
</blockquote>
</aside>
<p>Yes I was wondering if that makes any sense.</p>
<aside class="quote no-group" data-username="madaidan" data-post="316" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Or a custom url_to_unixtime AppArmor profile (not the default sandbox-app-launcher profile) with the rest of sandbox-app-launcher?</p>
</blockquote>
</aside>
<p>I didn’t think about that yet. Would be good to document how sandbox-app-launcher interacts with system apparmor profiles. I.e…</p>
<p>When running an application under sandbox-app-launcher, is an apparmor profile in /etc/apparmor.d still in effect or ignored? For example suppose we could run <code>evince</code> (did not test yet) under <code>sandbox-app-launcher</code>.  Does <code>/etc/apparmor.d/usr.bin.evince</code> still matter or is it ignored?</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-30T01:40:27Z' class='post-time'>
                January 30, 2021,  1:40am
              </time>
              <meta itemprop='dateModified' content='2021-01-30T01:40:27Z'>
          <span itemprop='position'>#318</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="317" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Does it generally or it some cases make sense to use sandbox-app-launcher for any applications started by systemd units? Or are for systemd units apparmor + systemd hardening more appropriate?</p>
</blockquote>
</aside>
<p>AppArmor + systemd hardening would make more sense since it’s native and allows for more fine-grained restrictions.</p>
<aside class="quote no-group" data-username="Patrick" data-post="317" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Yes I was wondering if that makes any sense.</p>
</blockquote>
</aside>
<p>No, it wouldn’t work and would be redundant even if it did.</p>
<aside class="quote no-group" data-username="Patrick" data-post="317" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>When running an application under sandbox-app-launcher, is an apparmor profile in /etc/apparmor.d still in effect or ignored? For example suppose we could run <code>evince</code> (did not test yet) under <code>sandbox-app-launcher</code>. Does <code>/etc/apparmor.d/usr.bin.evince</code> still matter or is it ignored?</p>
</blockquote>
</aside>
<p>It’s ignored and I don’t think we should support other AppArmor profiles. Those other profiles won’t have access to e.g. the sandboxed user’s home directory and thus, would break the application. They may also not be very secure.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-03-12T18:31:12Z' class='post-time'>
                March 12, 2021,  6:31pm
              </time>
              <meta itemprop='dateModified' content='2021-03-12T18:31:12Z'>
          <span itemprop='position'>#319</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubissue">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/madaidan/sandbox-app-launcher/issues/9" target="_blank" rel="noopener nofollow ugc">github.com/madaidan/sandbox-app-launcher</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../../external.html?link=https://github.com/madaidan/sandbox-app-launcher/issues/9" target="_blank" rel="noopener nofollow ugc">Portability</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2021-01-25" data-time="16:47:52" data-timezone="UTC">04:47PM - 25 Jan 21 UTC</span>
      </div>


      <div class="user">
        <a href="../../../../external.html?link=https://github.com/anon-lestat" target="_blank" rel="noopener nofollow ugc">
          <img alt="anon-lestat" src="../../../../external.html?link=https://avatars.githubusercontent.com/u/77899829?v=4" class="onebox-avatar-inline" width="20" height="20">
          anon-lestat
        </a>
      </div>
    </div>
  </div>
</div>

<div class="github-row">
  <p class="github-content">sandbox-app-launcher uses adduser which is debian-specific. Its important to change that for portability.</p>
</div>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-03-13T06:50:16Z' class='post-time'>
                March 13, 2021,  6:50am
              </time>
              <meta itemprop='dateModified' content='2021-03-13T06:50:16Z'>
          <span itemprop='position'>#320</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks. Missed that one. Answered just now.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-03-13T17:02:57Z' class='post-time'>
                March 13, 2021,  5:02pm
              </time>
              <meta itemprop='dateModified' content='2021-03-13T17:02:57Z'>
          <span itemprop='position'>#321</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Saw this “new” feature being upstreamed. Don’t know how useful it can be for the sandbox:</p>
<p><a href="../../../../external.html?link=https://www.phoronix.com/scan.php?page=news_item&amp;px=2021-Unprivileged-Chroot" class="onebox" target="_blank" rel="noopener">https://www.phoronix.com/scan.php?page=news_item&amp;px=2021-Unprivileged-Chroot</a></p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-03-17T22:18:02Z' class='post-time'>
                March 17, 2021, 10:18pm
              </time>
              <meta itemprop='dateModified' content='2021-03-17T22:18:02Z'>
          <span itemprop='position'>#322</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Mount namespaces / AppArmor provide greater flexibility for us.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-03-17T23:59:24Z' class='post-time'>
                March 17, 2021, 11:59pm
              </time>
              <meta itemprop='dateModified' content='2021-03-17T23:59:24Z'>
          <span itemprop='position'>#323</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/commit/ffd45c6efdb26b971a143b8845728ff3da060d82" target="_blank" rel="noopener nofollow ugc">github.com/Whonix/sandbox-app-launcher</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/commit/ffd45c6efdb26b971a143b8845728ff3da060d82" target="_blank" rel="noopener nofollow ugc">fix permissions if messed up by something</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2021-01-12" data-time="07:29:13" data-timezone="UTC">07:29AM - 12 Jan 21 UTC</span>
      </div>

      <div class="user">
        <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="noopener nofollow ugc">
          <img alt="adrelanos" src="../../../../external.html?link=https://avatars.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 12 additions and 4 deletions">
        <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/commit/ffd45c6efdb26b971a143b8845728ff3da060d82" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+12</span>
          <span class="removed">-4</span>
        </a>
      </div>
    </div>

  </div>
</div>


  <div class="github-row">
    <pre class="github-content" style="white-space: normal;">(such as Qubes home folder implementation or after restoration of backup)
use sudo long instead of short parameters
fix setup already done check:
https://forums.whonix.org/t/system-wide-sandboxing-framework-sandbox-app-launcher/9008/310...</pre>
  </div>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Wouldn’t this be better suited in <code>run_program()</code>? Those <code>chmod</code> calls will only execute during setup; it won’t help if something messes up the permissions after setup.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-03-18T00:32:06Z' class='post-time'>
                March 18, 2021, 12:32am
              </time>
              <meta itemprop='dateModified' content='2021-03-18T00:32:06Z'>
          <span itemprop='position'>#324</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/52" target="_blank" rel="noopener nofollow ugc">github.com/Whonix/sandbox-app-launcher</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/52" target="_blank" rel="noopener nofollow ugc">Add option to remove app data</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:uninstall</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2021-03-18" data-time="00:30:53" data-timezone="UTC">12:30AM - 18 Mar 21 UTC</span>
      </div>

      <div class="user">
        <a href="../../../../external.html?link=https://github.com/madaidan" target="_blank" rel="noopener nofollow ugc">
          <img alt="madaidan" src="../../../../external.html?link=https://avatars.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 30 additions and 1 deletions">
        <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/52/files" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+30</span>
          <span class="removed">-1</span>
        </a>
      </div>
    </div>

  </div>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/53" target="_blank" rel="noopener nofollow ugc">github.com/Whonix/sandbox-app-launcher</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/53" target="_blank" rel="noopener nofollow ugc">Fix postrm script</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:postrm</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2021-03-18" data-time="00:32:09" data-timezone="UTC">12:32AM - 18 Mar 21 UTC</span>
      </div>

      <div class="user">
        <a href="../../../../external.html?link=https://github.com/madaidan" target="_blank" rel="noopener nofollow ugc">
          <img alt="madaidan" src="../../../../external.html?link=https://avatars.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 2 additions and 2 deletions">
        <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/53/files" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+2</span>
          <span class="removed">-2</span>
        </a>
      </div>
    </div>

  </div>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-03-18T09:57:55Z' class='post-time'>
                March 18, 2021,  9:57am
              </time>
              <meta itemprop='dateModified' content='2021-03-18T09:57:55Z'>
          <span itemprop='position'>#325</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="madaidan" data-post="323" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Wouldn’t this be better suited in <code>run_program()</code>? Those <code>chmod</code> calls will only execute during setup; it won’t help if something messes up the permissions after setup.</p>
</blockquote>
</aside>
<aside class="quote no-group" data-username="madaidan" data-post="323" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Those <code>chmod</code> calls will only execute during setup; it won’t help if something messes up the permissions after setup.</p>
</blockquote>
</aside>
<p>Indeed. User would have to re-run setup, which is bad usability. Would be better if we could fix that automagically for the user.</p>
<aside class="quote no-group" data-username="madaidan" data-post="323" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Wouldn’t this be better suited in <code>run_program()</code>?</p>
</blockquote>
</aside>
<p>In theory, yes. But during <code>run_program()</code> sandbox-app-launcher is run as user, not root. Therefore I don’t see how that’s possible. If a have a solution, please implement or let me know.</p>
<p>I have one idea that would be doable, though.</p>
<p>At the moment the tests during <code>setup()</code> look like this:</p>
<pre><code>  if ! [ "$(stat -c %a "${shared_dir}")" = "1777" ]; then
    chmod 1777 "${dir}"
  fi
</code></pre>
<p>I.e.</p>
<ol>
<li>Test if already done.</li>
<li>Do whatever needed not already done.</li>
</ol>
<p>What could be done when running as user, without root, during <code>run_program()</code> is instead:</p>
<ol>
<li>Test if already done.</li>
<li>If root, do it if not yet done. | If user, notify user and error exit.</li>
</ol>
<pre><code class="lang-auto">run_if_root() {
  if [ "$sal_is_run_with_root" = "true" ]; then
    "$@"
  else
    echo "ERROR: The setup for this program is incomplete. To fix, please execute:

sudo sandbox-app-launcher setup ${app_name}

(Debugging information: $@)" &gt;&amp;2
    exit 1
  fi
}

if [ "$(id -u)" = "0" ]; then
  sal_is_run_with_root=true
fi

if ! [ "$(stat -c %a "${shared_dir}")" = "1777" ]; then
  run_if_root chmod 1777 "${dir}"
fi
</code></pre>
<p>What do you think?</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-03-18T10:16:33Z' class='post-time'>
                March 18, 2021, 10:16am
              </time>
              <meta itemprop='dateModified' content='2021-03-18T10:16:33Z'>
          <span itemprop='position'>#326</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Merged.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-03-18T23:00:05Z' class='post-time'>
                March 18, 2021, 11:00pm
              </time>
              <meta itemprop='dateModified' content='2021-03-18T23:00:05Z'>
          <span itemprop='position'>#327</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="325" data-topic="9008">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>What do you think?</p>
</blockquote>
</aside>
<p>That would be a good idea.</p>
        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../9008.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-03-18T23:26:25Z' class='post-time'>
                March 18, 2021, 11:26pm
              </time>
              <meta itemprop='dateModified' content='2021-03-18T23:26:25Z'>
          <span itemprop='position'>#328</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubpullrequest">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/54" target="_blank" rel="noopener nofollow ugc">github.com/Whonix/sandbox-app-launcher</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/54" target="_blank" rel="noopener nofollow ugc">Use useradd on non-Debian systems</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>madaidan:useradd</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2021-03-18" data-time="23:26:59" data-timezone="UTC">11:26PM - 18 Mar 21 UTC</span>
      </div>

      <div class="user">
        <a href="../../../../external.html?link=https://github.com/madaidan" target="_blank" rel="noopener nofollow ugc">
          <img alt="madaidan" src="../../../../external.html?link=https://avatars.githubusercontent.com/u/50278627?v=4" class="onebox-avatar-inline" width="20" height="20">
          madaidan
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 9 additions and 1 deletions">
        <a href="../../../../external.html?link=https://github.com/Whonix/sandbox-app-launcher/pull/54/files" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+9</span>
          <span class="removed">-1</span>
        </a>
      </div>
    </div>

  </div>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='System-wide sandboxing framework - sandbox-app-launcher'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="../90085760.html?page=15">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../90085c43.html?page=17">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
