<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor - Development - Whonix Forum</title>
    <meta name="description" content="I started on rewriting CPFP in python, based on the Tails script at https://git-tails.immerda.ch/tails/plain/config/chroot_local-includes/usr/local/sbin/tor-controlport-filter. 

Still at an early stage, but it looks pro&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="5339ba9.html?page=3" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor&#39;" href="533.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/control-port-filter-proxy-python-cpfpy-anon-ws-disable-stacked-tor/533?page=3" />
<meta name="twitter:url" content="https://forums.whonix.org/t/control-port-filter-proxy-python-cpfpy-anon-ws-disable-stacked-tor/533?page=3" />
<meta property="og:title" content="Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor" />
<meta name="twitter:title" content="Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor" />
<meta property="og:description" content="When using multiple workstations and/or multiple clients that use cpfpy and/or in advanced configurations. Not that advanced though. Some custom automated controller, that does stuff + Tor Browser New Identity." />
<meta name="twitter:description" content="When using multiple workstations and/or multiple clients that use cpfpy and/or in advanced configurations. Not that advanced though. Some custom automated controller, that does stuff + Tor Browser New Identity." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="26 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ‚ù§" />
<meta property="article:published_time" content="2014-10-04T20:32:17+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="5334658.html?page=2">
        <link rel="next" href="533fdb0.html?page=4">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="533.html">Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-04T20:32:17Z' class='post-time'>
                October 4, 2014,  8:32pm
              </time>
              <meta itemprop='dateModified' content='2014-10-04T20:32:17Z'>
          <span itemprop='position'>#41</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>When using multiple workstations and/or multiple clients that use cpfpy and/or in advanced configurations. Not that advanced though. Some custom automated controller, that does stuff + Tor Browser New Identity.</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-04T20:35:48Z' class='post-time'>
                October 4, 2014,  8:35pm
              </time>
              <meta itemprop='dateModified' content='2014-10-04T20:35:48Z'>
          <span itemprop='position'>#42</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>It‚Äôs also required in simpler situations. Because we already have multiple clients using it. whonixcheck uses it (runs in background, and first it checks is Tor bootstrap status). sdwdate-plugin-anon-shared-con-check uses Tor bootstrap status. tb-updater uses Tor bootstrap status. Tor Browser uses New Identity. It‚Äôs not that likely, that these happen simultaneously, but it‚Äôs also not impossible. It could result in a race condition, Heisenbug.</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-04T20:37:16Z' class='post-time'>
                October 4, 2014,  8:37pm
              </time>
              <meta itemprop='dateModified' content='2014-10-04T20:37:16Z'>
          <span itemprop='position'>#43</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Config parsing looks good so far. There is a small issue. Stuff might get duplicated.</p>
<pre><code class="lang-auto"></code></pre>
<p>But I guess there is some easy python sort --unique function?</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-04T20:39:56Z' class='post-time'>
                October 4, 2014,  8:39pm
              </time>
              <meta itemprop='dateModified' content='2014-10-04T20:39:56Z'>
          <span itemprop='position'>#44</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Pushed some minor comment fixes.</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-04T21:00:29Z' class='post-time'>
                October 4, 2014,  9:00pm
              </time>
              <meta itemprop='dateModified' content='2014-10-04T21:00:29Z'>
          <span itemprop='position'>#45</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=‚ÄúPatrick, post:43, topic:533‚Äù]Config parsing looks good so far. There is a small issue. Stuff might get duplicated.</p>
<pre><code class="lang-auto"></code></pre>
<p>But I guess there is some easy python sort --unique function?[/quote]</p>
<p>It should not do that. Could you post your cpfpy.d content giving this output?</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-04T21:01:33Z' class='post-time'>
                October 4, 2014,  9:01pm
              </time>
              <meta itemprop='dateModified' content='2014-10-04T21:01:33Z'>
          <span itemprop='position'>#46</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Pushed a small change to make IP and PORT configurable. Please check my commits carefully.</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-04T21:07:44Z' class='post-time'>
                October 4, 2014,  9:07pm
              </time>
              <meta itemprop='dateModified' content='2014-10-04T21:07:44Z'>
          <span itemprop='position'>#47</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=‚Äútroubadour, post:45, topic:533‚Äù][quote author=Patrick link=topic=560.msg4641#msg4641 date=1412455036]<br>
Config parsing looks good so far. There is a small issue. Stuff might get duplicated.</p>
<pre><code class="lang-auto"></code></pre>
<p>But I guess there is some easy python sort --unique function?<br>
[/quote]</p>
<p>It should not do that. Could you post your cpfpy.d content giving this output?[/quote]</p>
<p>I am using default config. (Because during development, I often just do ‚Äúsudo make install‚Äù.)</p>
<p>Also for debuging I added ‚Äúprint WHITELIST‚Äù below ‚Äú<span class="hashtag">#print</span> MAX_LINESIZE‚Äù so it looks like this.</p>
<pre><code class="lang-auto">#print MAX_LINESIZE
print WHITELIST</code></pre>
<p>/etc/cpfpy.d/50_user contains.</p>
<pre><code class="lang-auto"></code></pre>
<p>/etc/cpfpy.d/51_user also contains.</p>
<pre><code class="lang-auto"></code></pre>
<p>Result:<br>
[‚ÄòSIGNAL NEWNYM‚Äô, ‚ÄòGETINFO net/listeners/socks‚Äô, ‚ÄòGETINFO status/bootstrap-phase‚Äô, ‚ÄòGETINFO status/circuit-established‚Äô, ‚ÄòGETINFO dormant‚Äô, ‚ÄòGETINFO network-status‚Äô, ‚ÄòGETINFO dormant‚Äô, ‚ÄòGETINFO network-status‚Äô]</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-04T21:31:49Z' class='post-time'>
                October 4, 2014,  9:31pm
              </time>
              <meta itemprop='dateModified' content='2014-10-04T21:31:49Z'>
          <span itemprop='position'>#48</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>Pushed a small change to make IP and PORT configurable. Please check my commits carefully.</blockquote>
<p>Checked and tested in real situation. OK.</p>
<blockquote>/etc/cpfpy.d/50_user contains.
<pre><code class="lang-auto"></code></pre>
<p>/etc/cpfpy.d/51_user also contains.</p>
<pre><code class="lang-auto"></code></pre>
<p>Result:<br>
[‚ÄòSIGNAL NEWNYM‚Äô, ‚ÄòGETINFO net/listeners/socks‚Äô, ‚ÄòGETINFO status/bootstrap-phase‚Äô, ‚ÄòGETINFO status/circuit-established‚Äô, ‚ÄòGETINFO dormant‚Äô, ‚ÄòGETINFO network-status‚Äô, ‚ÄòGETINFO dormant‚Äô, ‚ÄòGETINFO network-status‚Äô]</p>
</blockquote>
<p>The list is not sorted, but what is the point of having two identical configuration files?</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-04T21:50:10Z' class='post-time'>
                October 4, 2014,  9:50pm
              </time>
              <meta itemprop='dateModified' content='2014-10-04T21:50:10Z'>
          <span itemprop='position'>#49</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="48" data-topic="533">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/d9b06d/40.png" class="avatar"> troubadour:</div>
<blockquote>
<p>The list is not sorted, but what is the point of having two identical configuration files?</p>
</blockquote>
</aside>
<p>Packages such as whonix-gw-torsion and whonix-gw-onionshare might want to add same/similar additions to cpfp. The similarities should not be duplicated in WHITELIST.</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-04T21:54:51Z' class='post-time'>
                October 4, 2014,  9:54pm
              </time>
              <meta itemprop='dateModified' content='2014-10-04T21:54:51Z'>
          <span itemprop='position'>#50</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Pushed ‚Äúremove duplicates in WHITELIST‚Äù. <a href="../../../external.html?link=https://github.com/troubadoour/control-port-filter-python/commit/9956b8f1a4772130320c6733bf1c499bfe55dd13" rel="nofollow noopener">https://github.com/troubadoour/control-port-filter-python/commit/9956b8f1a4772130320c6733bf1c499bfe55dd13</a></p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-04T21:57:25Z' class='post-time'>
                October 4, 2014,  9:57pm
              </time>
              <meta itemprop='dateModified' content='2014-10-04T21:57:25Z'>
          <span itemprop='position'>#51</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>There are many ways in Python. :).</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-04T23:00:27Z' class='post-time'>
                October 4, 2014, 11:00pm
              </time>
              <meta itemprop='dateModified' content='2014-10-04T23:00:27Z'>
          <span itemprop='position'>#52</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Three more changes by me. Please feel free to refactor the hell out of them if you don‚Äôt like the variable names or way of implementation.</p>
<p>Do you mind me making some simple changes as I am doing at the moment? I want to offload some feature requests from my side from you and I am also learning more python as I do.</p>
<p>Would we benefit from using python-stem for authentication? I guess probably not. I‚Äôll ask Damian Johnson (python-stem maintainer).</p>
<p>And perhaps please explain if anything, stylistic or security wise or else‚Ä¶ At the moment it‚Äôs this.</p>
<pre><code class="lang-auto">[...]
                if line.startswith('CONTROL_PORT_FILTER_PORT'):
[...]
                    PORT = int(value.strip())
[...]
    server.bind((IP, PORT))
[...]</code></pre>
<p>What about changing that to.</p>
<pre><code class="lang-auto">[...]
                if line.startswith('CONTROL_PORT_FILTER_PORT'):
[...]
                    CONTROL_PORT_FILTER_PORT = int(value.strip())
[...]
    server.bind((IP, CONTROL_PORT_FILTER_PORT))
[...]</code></pre>
<p>To make the code a little simpler?</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-05T00:00:55Z' class='post-time'>
                October 5, 2014, 12:00am
              </time>
              <meta itemprop='dateModified' content='2014-10-05T00:00:55Z'>
          <span itemprop='position'>#53</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>Three more changes by me. Please feel free to refactor the hell out of them if you don't like the variable names or way of implementation.</blockquote>
<p>Just one thing. Why that ?</p>
<pre><code class="lang-auto">        first_word = request.split(' ', 1)[0]

        # Authentication request from Tor Browser.
        if first_word == "AUTHENTICATE":</code></pre>
<p>The original from Tails was</p>
<pre><code class="lang-auto">        if request.startswith("AUTHENTICATE"):</code></pre>
<p>which performs the same action. I changed to ‚Äú==‚ÄòAUTHENTICATE password‚Äô‚Äù because it is the exact string sent by TBB before a request. We could revert to the original.</p>
<blockquote>Do you mind me making some simple changes as I am doing at the moment? I want to offload some feature requests from my side from you and I am also learning more python as I do.</blockquote>
<p>That is what collaborative development is all about, I think. Don‚Äôt worry about putting some load on me.</p>
<blockquote>Would we benefit from using python-stem for authentication? I guess probably not. I'll ask Damian Johnson (python-stem maintainer).</blockquote>
<p>I don‚Äôt know, but in my opinion, there is something illogical in the way we send the requests to controlport. We use stem in the client (whonixcheck, sdwdate‚Ä¶), a python socket on the server side of cpfp, and another python socket to put the request to controlport. It would make sense to do it the other way around, that is, stem in cpfp (client side). I do not know if it‚Äôs feasible (there is an issue passing the request string to stem), but it would have some advantages, for error handling, firstly.</p>
<blockquote>And perhaps please explain if anything, stylistic or security wise or else... At the moment it's this.
<pre><code class="lang-auto">[...]
                if line.startswith('CONTROL_PORT_FILTER_PORT'):
[...]
                    PORT = int(value.strip())
[...]
    server.bind((IP, PORT))
[...]</code></pre>
<p>What about changing that to.</p>
<pre><code class="lang-auto">[...]
                if line.startswith('CONTROL_PORT_FILTER_PORT'):
[...]
                    CONTROL_PORT_FILTER_PORT = int(value.strip())
[...]
    server.bind((IP, CONTROL_PORT_FILTER_PORT))
[...]</code></pre>
<p>To make the code a little simpler?</p>
</blockquote>
<p>Yes. Why not</p>
<pre><code class="lang-auto">     server.bind((CONTROL_PORT_FILTER_IP, CONTROL_PORT_FILTER_PORT))</code></pre>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-05T00:18:08Z' class='post-time'>
                October 5, 2014, 12:18am
              </time>
              <meta itemprop='dateModified' content='2014-10-05T00:18:08Z'>
          <span itemprop='position'>#54</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="53" data-topic="533">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/d9b06d/40.png" class="avatar"> troubadour:</div>
<blockquote>
<p>[quote]Three more changes by me. Please feel free to refactor the hell out of them if you don‚Äôt like the variable names or way of implementation.</p>
</blockquote>
</aside>
<p>Just one thing. Why that ?</p>
<pre><code class="lang-auto">        first_word = request.split(' ', 1)[0]

        # Authentication request from Tor Browser.
        if first_word == "AUTHENTICATE":</code></pre>
<p>The original from Tails was</p>
<pre><code class="lang-auto">        if request.startswith("AUTHENTICATE"):</code></pre>
<p>which performs the same action. I changed to ‚Äú==‚ÄòAUTHENTICATE password‚Äô‚Äù because it is the exact string sent by TBB before a request. We could revert to the original.[/quote]<br>
Revert to original sounds good. (request.startswith(‚ÄúAUTHENTICATE‚Äù)<img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> The reason is, the ‚ÄúAUTHENTICATE password‚Äù thing is a Whonix-only thing. Other clients might use other passwords. And teaching them to use literal ‚Äúpassword‚Äù seems odd. Accepting any password seems more appropriate here. By accepting any password, it can be used by others. Possible Whonix-Custom-Workstation with other passwords. More likely inclusion into Debian.</p>
<p>[Or maybe someone some day wants to publish a real password authentication feature pull request, for whatever that would be worth.]</p>
<blockquote>[quote]Do you mind me making some simple changes as I am doing at the moment? I want to offload some feature requests from my side from you and I am also learning more python as I do.[/quote]
<p>That is what collaborative development is all about, I think. Don‚Äôt worry about putting some load on me.</p>
</blockquote><br>
<img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:">
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-05T02:03:52Z' class='post-time'>
                October 5, 2014,  2:03am
              </time>
              <meta itemprop='dateModified' content='2014-10-05T02:03:52Z'>
          <span itemprop='position'>#55</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Sounds like we should go for stem.</p>
<blockquote>I see. Yup, Stem could simplify the authentication. All you're aiming
to do is pass along raw whitelisted controller commands so this is
pretty simple...
<p>% cat scrap.py<br>
from stem.control import Controller</p>
<p>with Controller.from_port() as controller:<br>
controller.authenticate()<br>
print controller.msg(‚ÄòGETINFO version‚Äô)</p>
<p>% python scrap.py<br>
version=0.2.6.0-alpha-dev (git-b408125288ad6943)<br>
OK</p>
<p>Cheers! -Damian</p>
<p>On Sat, Oct 4, 2014 at 5:33 PM, Patrick Schleizer <a href="mailto:adrelanos@riseup.net">adrelanos@riseup.net</a> wrote:</p>
<blockquote>
<p>Yes, the readme isn‚Äôt up to date yet.</p>
<p>For more info, please see‚Ä¶</p>
<h2>Package description:</h2>
<p><a href="../../../external.html?link=https://github.com/adrelanos/control-port-filter-python/blob/master/debian/control">https://github.com/adrelanos/control-port-filter-python/blob/master/debian/control</a></p>
<p>Longer description:</p>
<ul>
<li><a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/CPFP">https://www.whonix.org/wiki/Dev/CPFP</a></li>
</ul>
<h2>Python server code:</h2>
<p><a href="../../../external.html?link=https://github.com/adrelanos/control-port-filter-python/blob/master/usr/lib/cpfp.py">https://github.com/adrelanos/control-port-filter-python/blob/master/usr/lib/cpfp.py</a></p>
<p>Damian Johnson:</p>
<blockquote>
<p>Hi Patrick. From the name I would guess so but first I‚Äôd need to know<br>
more about what you‚Äôre desiring for it to do. The readme on the second<br>
link oddly didn‚Äôt describe what it does so much as a variety of<br>
packaging and development details.</p>
<p>And yup, I don‚Äôt mind if you forward answers I give to the whonix forum.</p>
<p>On Sat, Oct 4, 2014 at 4:03 PM, Patrick Schleizer <a href="mailto:adrelanos@riseup.net">adrelanos@riseup.net</a> wrote:</p>
<blockquote>
<p>Dear Damian,</p>
<p>we‚Äôre working on control-port-filter-python [1] [2].</p>
<p>I was wondering, if we could benefit from using python-stem (for<br>
authentication or what else)?</p>
<p>And would you mind if I posted your answer in the forums?</p>
<p>Cheers,<br>
Patrick</p>
<p>[1] <a href="../../../external.html?link=https://www.whonix.org/forum/index.php/topic,560.0.html">https://www.whonix.org/forum/index.php/topic,560.0.html</a><br>
[2] <a href="../../../external.html?link=https://github.com/troubadoour/control-port-filter-python">https://github.com/troubadoour/control-port-filter-python</a></p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-06T23:26:07Z' class='post-time'>
                October 6, 2014, 11:26pm
              </time>
              <meta itemprop='dateModified' content='2014-10-06T23:26:07Z'>
          <span itemprop='position'>#56</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I have started with stem in cpfp. Nearly there except for whonixcheck in Gateway, the problem being that it is writing directly into tor controlport, I believe. Is there a particular reason for that, or could we use 10.152.152.10 ? It‚Äôs too long to explain why in details now, but it would make my life easier.</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-06T23:34:29Z' class='post-time'>
                October 6, 2014, 11:34pm
              </time>
              <meta itemprop='dateModified' content='2014-10-06T23:34:29Z'>
          <span itemprop='position'>#57</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>whonixcheck on Whonix-Gateway indeed does not use CPFP and directly uses Tor‚Äôs control port. So does arm / Vidalia. This is on purpose. It should not cause any issues.</p>
<p>No idea what you mean by ‚Äúcould we use 10.152.152.10‚Äù.</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-06T23:43:04Z' class='post-time'>
                October 6, 2014, 11:43pm
              </time>
              <meta itemprop='dateModified' content='2014-10-06T23:43:04Z'>
          <span itemprop='position'>#58</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>No idea what you mean by "could we use 10.152.152.10".</blockquote>
<p>I mean using CPFP instead of Tor control port directcly.</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-06T23:47:52Z' class='post-time'>
                October 6, 2014, 11:47pm
              </time>
              <meta itemprop='dateModified' content='2014-10-06T23:47:52Z'>
          <span itemprop='position'>#59</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Not sure I am following.</p>
<p>I would prefer if whonixcheck on Whonix-Gateway could continue using Tor‚Äôs control port directly. Interesting for those who do not wish to use CPFP.</p>
<p>Also I don‚Äôt see the advantage. CPFP shouldn‚Äôt break direct access to Tor‚Äôs control port.</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="533.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-10-07T16:21:39Z' class='post-time'>
                October 7, 2014,  4:21pm
              </time>
              <meta itemprop='dateModified' content='2014-10-07T16:21:39Z'>
          <span itemprop='position'>#60</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Created a new branch <a href="../../../external.html?link=https://github.com/troubadoour/control-port-filter-python/tree/CPFP-stem" rel="nofollow noopener">https://github.com/troubadoour/control-port-filter-python/tree/CPFP-stem</a>.</p>
<p>The major changes:</p>
<ul>
<li>
<p>tor_bootstrap_check.py and tor_circuit_established_check.py are rewritten. They use a socket to talk to CPFP and Tor control port. It is necessary because stem being in CPFP, the Workstation was using stem over stem.</p>
</li>
<li>
<p>CPFP is handling stem exceptions. All exceptions are returned to the client, so may be some of them could be parsed in whonixcheck.</p>
</li>
</ul>
<blockquote>Also I don't see the advantage. CPFP shouldn't break direct access to Tor's control port.</blockquote>
<p>If all requests were channeled through CPFP, the same, more robust exception handling would be used.</p>
        </div>

        <meta itemprop='headline' content='Control Port Filter Proxy Python (cpfpy) / anon-ws-disable-stacked-tor'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="5334658.html?page=2">‚Üê previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="533fdb0.html?page=4">next page ‚Üí</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
