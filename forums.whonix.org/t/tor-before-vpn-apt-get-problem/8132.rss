<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Tor Before VPN - apt-get problem</title>
    <link>http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132</link>
    <description>I&#39;ve followed the instructions in Connecting_to_Tor_before_a_VPN (system doesn&#39;t let me include links)

Now I can ping, I can browse (including deb.whonix DOT org and deb.debian DOT org with quick response times), curl and wget work well too, but when I run 

&gt;sudo apt-get update

it gets stuck for long minutes, finally fails with 

&gt;Read error - read (104: Connection reset by peer) Reading the greet back from SOCKS proxy socks5h://127.0.0.1:9050 failed [IP: 127.0.0.1 9050]

Running whonixcheck, I get:

&gt;[WARNING] [whonixcheck] Debian Package Update Check Result: Could not check for software updates! (apt-get code: 100)

Running sudo apt-get-update-plus dist-upgrade, I get:

&gt;Reading package lists...
E: Could not get lock /var/lib/apt/lists/lock - open (11: Resource temporarily unavailable)
E: Unable to lock directory /var/lib/apt/lists/

Sometimes I get the above error for sudo apt-get update too.

I tried several times, including restarting the machine. Doesn&#39;t look like any particular circuit because the problem is always only with apt-get. Can&#39;t be the VPN speed since I can even load and watch full youtube videos,, no issues except for apt-get update.

I&#39;m on 15.0.0.4.9

-- I now realize the lock issue was temporary, anyway running sudo apt-get-update-plus dist-upgrade -y now gets stuck for ages and then gives the same error as sudo apt-get update:

&gt;  Read error - read (104: Connection reset by peer) Reading the greet back from SOCKS proxy socks5h://127.0.0.1:9050 failed [IP: 127.0.0.1 9050]</description>
    <language>en</language>
    <lastBuildDate>Tue, 17 Sep 2019 14:21:00 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Tor Before VPN - apt-get problem</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Added to documentation just now.</p>
<p><a href="https://www.whonix.org/wiki/Tunnels/Connecting_to_Tor_before_a_VPN#Prevent_Bypassing_of_the_Tunnel-Link" rel="nofollow noopener">https://www.whonix.org/wiki/Tunnels/Connecting_to_Tor_before_a_VPN#Prevent_Bypassing_of_the_Tunnel-Link</a></p>
          <p><a href="http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132/6</link>
        <pubDate>Tue, 17 Sep 2019 14:21:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8132-6</guid>
        <source url="http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132.rss">Tor Before VPN - apt-get problem</source>
      </item>
      <item>
        <title>Tor Before VPN - apt-get problem</title>
        <dc:creator><![CDATA[pucor]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="3" data-topic="8132" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>Which virtualizer?</p>
</blockquote>
</aside>
<p>VirtualBox</p>
<aside class="quote no-group" data-post="4" data-topic="8132" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>Apt sources list? Cannot use onions or tor+</p>
</blockquote>
</aside>
<p>The default lists.</p>
<p>Yes, this was the problem. I now removed all the “tor+” and it works smoothly.</p>
<p>Thanks a lot!</p>
          <p><a href="http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132/5</link>
        <pubDate>Tue, 17 Sep 2019 07:01:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8132-5</guid>
        <source url="http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132.rss">Tor Before VPN - apt-get problem</source>
      </item>
      <item>
        <title>Tor Before VPN - apt-get problem</title>
        <dc:creator><![CDATA[Patrick_mobile]]></dc:creator>
        <description><![CDATA[
            <p>Apt sources list? Cannot use onions or tor+</p>
          <p><a href="http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132/4</link>
        <pubDate>Tue, 17 Sep 2019 05:04:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8132-4</guid>
        <source url="http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132.rss">Tor Before VPN - apt-get problem</source>
      </item>
      <item>
        <title>Tor Before VPN - apt-get problem</title>
        <dc:creator><![CDATA[Patrick_mobile]]></dc:creator>
        <description><![CDATA[
            <p>Which virtualizer?</p>
          <p><a href="http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132/3</link>
        <pubDate>Tue, 17 Sep 2019 05:02:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8132-3</guid>
        <source url="http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132.rss">Tor Before VPN - apt-get problem</source>
      </item>
      <item>
        <title>Tor Before VPN - apt-get problem</title>
        <dc:creator><![CDATA[pucor]]></dc:creator>
        <description><![CDATA[
            <p>Any ideas how to pinpoint the problem? Anyone managed to get this setup running and working with apt-get on 15.0.0.4.9 ?</p>
<p>I also tried</p>
<blockquote>
<p>sudo apt-get.anondist-orig update</p>
</blockquote>
<p>and got same results.</p>
<p>I also got DNS properly configured. Running</p>
<blockquote>
<p>nslookup <a href="http://check.torproject.org" rel="nofollow noopener">check.torproject.org</a></p>
</blockquote>
<p>returns</p>
<blockquote>
<p>Server:		10.6.0.1<br>
Address:	10.6.0.1#53<br>
Non-authoritative answer:<br>
Name:	<a href="http://check.torproject.org" rel="nofollow noopener">check.torproject.org</a><br>
Address: 138.201.14.212</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132/2</link>
        <pubDate>Tue, 17 Sep 2019 03:40:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8132-2</guid>
        <source url="http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132.rss">Tor Before VPN - apt-get problem</source>
      </item>
      <item>
        <title>Tor Before VPN - apt-get problem</title>
        <dc:creator><![CDATA[pucor]]></dc:creator>
        <description><![CDATA[
            <p>I’ve followed the instructions in Connecting_to_Tor_before_a_VPN (system doesn’t let me include links)</p>
<p>Now I can ping, I can browse (including deb.whonix DOT org and deb.debian DOT org with quick response times), curl and wget work well too, but when I run</p>
<blockquote>
<p>sudo apt-get update</p>
</blockquote>
<p>it gets stuck for long minutes, finally fails with</p>
<blockquote>
<p>Read error - read (104: Connection reset by peer) Reading the greet back from SOCKS proxy socks5h://127.0.0.1:9050 failed [IP: 127.0.0.1 9050]</p>
</blockquote>
<p>Running whonixcheck, I get:</p>
<blockquote>
<p>[WARNING] [whonixcheck] Debian Package Update Check Result: Could not check for software updates! (apt-get code: 100)</p>
</blockquote>
<p>Running sudo apt-get-update-plus dist-upgrade, I get:</p>
<blockquote>
<p>Reading package lists…<br>
E: Could not get lock /var/lib/apt/lists/lock - open (11: Resource temporarily unavailable)<br>
E: Unable to lock directory /var/lib/apt/lists/</p>
</blockquote>
<p>Sometimes I get the above error for sudo apt-get update too.</p>
<p>I tried several times, including restarting the machine. Doesn’t look like any particular circuit because the problem is always only with apt-get. Can’t be the VPN speed since I can even load and watch full youtube videos, no issues except for apt-get update.</p>
<p>I’m on 15.0.0.4.9</p>
<p>– I now realize the lock issue was temporary, anyway running sudo apt-get-update-plus dist-upgrade -y now gets stuck for ages and then gives the same error as sudo apt-get update:</p>
<blockquote>
<p>Read error - read (104: Connection reset by peer) Reading the greet back from SOCKS proxy socks5h://127.0.0.1:9050 failed [IP: 127.0.0.1 9050]</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132/1</link>
        <pubDate>Mon, 16 Sep 2019 15:30:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8132-1</guid>
        <source url="http://forums.whonix.org/t/tor-before-vpn-apt-get-problem/8132.rss">Tor Before VPN - apt-get problem</source>
      </item>
  </channel>
</rss>
