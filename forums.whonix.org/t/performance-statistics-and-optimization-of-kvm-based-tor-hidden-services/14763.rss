<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Performance Statistics and Optimization of KVM-based Tor Hidden Services</title>
    <link>http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763</link>
    <description># Introduction
I would like to know how Tor hidden services can be optimized to handle high traffic.  I know that vertical scaling is possible with Onionshare by adding more backend instances. 

# Current Stats of High Traffic Tor Onion Services
How much traffic can a hidden Tor server based on KVM handle? What throughput can be achieved? How many client connections can be handled? What will most likely be the bottleneck?

# KVM Optimization
What can be done to optimize a single KVM-based Tor hidden server setup? I&#39;m pretty sure this can all be configured in the KVM XML config files.

Is there something like a GitHub repository with optimized KVM configuration settings? I&#39;m thinking about adding more virtual cores to the gateway or workstation, adding more RAM and all the other things that would help to get better performance. Are there other things I can configure to increase performance? Are there anonymity drawbacks?

# Virtualization Optimization
Because I&#39;m pretty sure the Tor implementation is the bottleneck, I&#39;d like to know if it&#39;s possible to run multiple Tor instances across multiple Whonix gateway instances pointing to the same (or different) Workstation with the web application running (on the same physical server). This could enable more efficient utilization of hardware, especially since many servers today are designed for 1 Gbit/s connections.

# Whonix Workstation Database Connection Optimization
How can I configure a bypass of the Whonix Gateway Tor proxy so that only certain connections from Whonix workstations are not anonymized by Tor? I want to have my Whonix Workstation application protected by the Whonix Gateway, but have the database backend connections bypass the gateway to improve performance.

# More Optimization
Are there other Whonix KVM optimizations to improve performance or make efficient use of server hardware? Finally, my questions can be summarized like this: At which points can I optimize before I can only scale vertically with Onionshare?</description>
    <language>en</language>
    <lastBuildDate>Wed, 12 Oct 2022 15:35:42 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Performance Statistics and Optimization of KVM-based Tor Hidden Services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="eltonrata" data-post="7" data-topic="14763">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/e/c0e974/40.png" class="avatar"> eltonrata:</div>
<blockquote>
<p>Is there a Whonix like project that is capable of doing this?</p>
</blockquote>
</aside>
<p>I doubt it. I am not aware of any.</p>
          <p><a href="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/8</link>
        <pubDate>Wed, 12 Oct 2022 15:35:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14763-8</guid>
        <source url="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763.rss">Performance Statistics and Optimization of KVM-based Tor Hidden Services</source>
      </item>
      <item>
        <title>Performance Statistics and Optimization of KVM-based Tor Hidden Services</title>
        <dc:creator><![CDATA[eltonrata]]></dc:creator>
        <description><![CDATA[
            <p>Thanks for the information. Is there a Whonix like project that is capable of doing this? I am looking for the perfect hosting environment for Onion Services in the cloud.</p>
          <p><a href="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/7</link>
        <pubDate>Wed, 12 Oct 2022 00:08:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14763-7</guid>
        <source url="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763.rss">Performance Statistics and Optimization of KVM-based Tor Hidden Services</source>
      </item>
      <item>
        <title>Performance Statistics and Optimization of KVM-based Tor Hidden Services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>More on the bypass idea here:</p>
<aside class="quote quote-modified" data-post="2" data-topic="14808">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar">
    <a href="https://forums.whonix.org/t/using-whonix-gateway-to-route-a-lan-connection-not-through-tor/14808/2">Using Whonix gateway to route a LAN connection not through TOR</a> <a class="badge-wrapper  bullet" href="http://forums.whonix.org/c/support/5"><span class="badge-category-bg" style="background-color: #8C6238;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="User support for the Whonix operating system. (devs)">Support</span></a>
  </div>
  <blockquote>
    Whonix-Workstation to local LAN? 
No. There’s no easy bypass. Why? See: 
<a href="https://www.whonix.org/wiki/Dev/Technical_Introduction#multiple_security_layers">https://www.whonix.org/wiki/Dev/Technical_Introduction#multiple_security_layers</a> 

Won’t work. That’s for connections from Whonix-Gateway. Not for connections from Whonix-Workstation.
  </blockquote>
</aside>

          <p><a href="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/6</link>
        <pubDate>Sat, 17 Sep 2022 21:06:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14763-6</guid>
        <source url="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763.rss">Performance Statistics and Optimization of KVM-based Tor Hidden Services</source>
      </item>
      <item>
        <title>Performance Statistics and Optimization of KVM-based Tor Hidden Services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="eltonrata" data-post="4" data-topic="14763">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/e/c0e974/40.png" class="avatar"> eltonrata:</div>
<blockquote>
<p>What Onion service stats (throughput on a Tor hidden service) have you seen?</p>
</blockquote>
</aside>
<p>I didn’t look into that.</p>
<aside class="quote no-group" data-username="eltonrata" data-post="4" data-topic="14763">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/e/c0e974/40.png" class="avatar"> eltonrata:</div>
<blockquote>
<p>Isn’t there a Whonix firewall bypass config file or something? I literally want to whitelist an IP that doesn’t go through Tor.</p>
</blockquote>
</aside>
<p>No. There’s no easy bypass. Why? See:</p>
<p><a href="https://www.whonix.org/wiki/Dev/Technical_Introduction#multiple_security_layers">https://www.whonix.org/wiki/Dev/Technical_Introduction#multiple_security_layers</a></p>
          <p><a href="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/5</link>
        <pubDate>Thu, 08 Sep 2022 11:44:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14763-5</guid>
        <source url="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763.rss">Performance Statistics and Optimization of KVM-based Tor Hidden Services</source>
      </item>
      <item>
        <title>Performance Statistics and Optimization of KVM-based Tor Hidden Services</title>
        <dc:creator><![CDATA[eltonrata]]></dc:creator>
        <description><![CDATA[
            <p>Yes, OnionBalance (not OnionShare, too many onions…).</p>
<p>I agree, KVM has almost no bottlenecks. What Onion service stats (throughput on a Tor hidden service) have you seen?</p>
<p>Isn’t there a Whonix firewall bypass config file or something? I literally want to whitelist an IP that doesn’t go through Tor.</p>
          <p><a href="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/4</link>
        <pubDate>Wed, 07 Sep 2022 23:38:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14763-4</guid>
        <source url="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763.rss">Performance Statistics and Optimization of KVM-based Tor Hidden Services</source>
      </item>
      <item>
        <title>Performance Statistics and Optimization of KVM-based Tor Hidden Services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="eltonrata" data-post="1" data-topic="14763">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/e/c0e974/40.png" class="avatar"> eltonrata:</div>
<blockquote>
<p>Onionshare</p>
</blockquote>
</aside>
<p><a href="https://www.whonix.org/wiki/Onion_Services#OnionBalance">OnionBalance</a>?</p>
<aside class="quote no-group" data-username="eltonrata" data-post="1" data-topic="14763">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/e/c0e974/40.png" class="avatar"> eltonrata:</div>
<blockquote>
<p>How much traffic can a hidden Tor server based on KVM handle?</p>
</blockquote>
</aside>
<p>Not sure KVM would be the bottleneck. The primary bottleneck to worry about might be Tor.<br>
You could rephrase this question about clearnet to find out the limitations of KVM generally.</p>
<aside class="quote no-group" data-username="eltonrata" data-post="1" data-topic="14763">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/e/c0e974/40.png" class="avatar"> eltonrata:</div>
<blockquote>
<p>Are there other things I can configure to increase performance?</p>
</blockquote>
</aside>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.kicksecure.com/wiki/Tuning">
  <header class="source">
      <img src="https://www.kicksecure.com/w/images/4/45/Kicksecure-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.kicksecure.com/wiki/Tuning" target="_blank" rel="noopener" title="07:41PM - 13 August 2022">Kicksecure – 13 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/360;"><img src="https://www.kicksecure.com/w/images/4/47/Gear-192875640.jpg?version=5a060b61d884a24aea8fb8695f8ff4cd" class="thumbnail" width="640" height="360"></div>

<h3><a href="https://www.kicksecure.com/wiki/Tuning" target="_blank" rel="noopener">Kicksecure ™ Tuning</a></h3>

  <p>Making Kicksecure ™ Faster. Tuning Kicksecure ™.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>(Whonix is based on Kicksecure.)</p>
<aside class="quote no-group" data-username="eltonrata" data-post="1" data-topic="14763">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/e/c0e974/40.png" class="avatar"> eltonrata:</div>
<blockquote>
<p>How can I configure a bypass of the Whonix Gateway Tor proxy so that only certain connections from Whonix workstations are not anonymized by Tor? I want to have my Whonix Workstation application protected by the Whonix Gateway, but have the database backend connections bypass the gateway to improve performance.</p>
</blockquote>
</aside>
<p>Possible for sure but there’s no concept for that. Perhaps adding another internal-only network interface. Non-trivial for sure. Undocumented.</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Undocumented">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Undocumented" target="_blank" rel="noopener" title="07:44PM - 13 August 2022">Whonix – 13 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/426;"><img src="https://www.whonix.org/w/images/0/0a/Unsupported.jpg?version=6be87603b34867135bd7a5991ff18c1f" class="thumbnail" width="640" height="426"></div>

<h3><a href="https://www.whonix.org/wiki/Undocumented" target="_blank" rel="noopener">Undocumented, Untested or Unsupported Features</a></h3>

  <p>This feature is either undocumented, untested, or unsupported. Options: Become a Contributor / Apply Free Support Principle / Purchase Premium Support.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<hr>
<p>I doubt the answer for many of these questions will be available in this forum.<br>
(But then I am also not sure they’d be available elsewhere.)</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Unspecific">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Unspecific" target="_blank" rel="noopener" title="07:49PM - 25 July 2022">Whonix – 25 Jul 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:250/500;"><img src="https://www.whonix.org/w/images/7/74/Booster132.png" class="thumbnail" width="250" height="500"></div>

<h3><a href="https://www.whonix.org/wiki/Unspecific" target="_blank" rel="noopener">Information Booster might be Available!</a></h3>

  <p>Utilizing other resources to help solve questions/issues unspecific to Whonix ™.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/3</link>
        <pubDate>Mon, 05 Sep 2022 08:46:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14763-3</guid>
        <source url="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763.rss">Performance Statistics and Optimization of KVM-based Tor Hidden Services</source>
      </item>
      <item>
        <title>Performance Statistics and Optimization of KVM-based Tor Hidden Services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="eltonrata" data-post="1" data-topic="14763">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/e/c0e974/40.png" class="avatar"> eltonrata:</div>
<blockquote>
<p>Is there something like a GitHub repository with optimized KVM configuration settings?</p>
</blockquote>
</aside>
<p>I doubt that. If there is, then nobody informed this forum.</p>
<hr>
<p>Note: I don’t maintain Whonix KVM.</p>
<p>related:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Onion_Services">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Onion_Services" target="_blank" rel="noopener" title="07:44PM - 13 August 2022">Whonix – 13 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/480;"><img src="https://www.whonix.org/w/images/1/12/Fly-agaric808110640.jpg?version=624a3fa595deffe3a877326add81e939" class="thumbnail" width="640" height="480"></div>

<h3><a href="https://www.whonix.org/wiki/Onion_Services" target="_blank" rel="noopener">Onion Services</a></h3>

  <p>Anonymously host any server with Whonix ™ and Tor onion services</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/2</link>
        <pubDate>Mon, 05 Sep 2022 08:31:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14763-2</guid>
        <source url="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763.rss">Performance Statistics and Optimization of KVM-based Tor Hidden Services</source>
      </item>
      <item>
        <title>Performance Statistics and Optimization of KVM-based Tor Hidden Services</title>
        <dc:creator><![CDATA[eltonrata]]></dc:creator>
        <description><![CDATA[
            <h1>
<a name="introduction-1" class="anchor" href="http://forums.whonix.org#introduction-1"></a>Introduction</h1>
<p>I would like to know how Tor hidden services can be optimized to handle high traffic.  I know that vertical scaling is possible with Onionshare by adding more backend instances.</p>
<h1>
<a name="current-stats-of-high-traffic-tor-onion-services-2" class="anchor" href="http://forums.whonix.org#current-stats-of-high-traffic-tor-onion-services-2"></a>Current Stats of High Traffic Tor Onion Services</h1>
<p>How much traffic can a hidden Tor server based on KVM handle? What throughput can be achieved? How many client connections can be handled? What will most likely be the bottleneck?</p>
<h1>
<a name="kvm-optimization-3" class="anchor" href="http://forums.whonix.org#kvm-optimization-3"></a>KVM Optimization</h1>
<p>What can be done to optimize a single KVM-based Tor hidden server setup? I’m pretty sure this can all be configured in the KVM XML config files.</p>
<p>Is there something like a GitHub repository with optimized KVM configuration settings? I’m thinking about adding more virtual cores to the gateway or workstation, adding more RAM and all the other things that would help to get better performance. Are there other things I can configure to increase performance? Are there anonymity drawbacks?</p>
<h1>
<a name="virtualization-optimization-4" class="anchor" href="http://forums.whonix.org#virtualization-optimization-4"></a>Virtualization Optimization</h1>
<p>Because I’m pretty sure the Tor implementation is the bottleneck, I’d like to know if it’s possible to run multiple Tor instances across multiple Whonix gateway instances pointing to the same (or different) Workstation with the web application running (on the same physical server). This could enable more efficient utilization of hardware, especially since many servers today are designed for 1 Gbit/s connections.</p>
<h1>
<a name="whonix-workstation-database-connection-optimization-5" class="anchor" href="http://forums.whonix.org#whonix-workstation-database-connection-optimization-5"></a>Whonix Workstation Database Connection Optimization</h1>
<p>How can I configure a bypass of the Whonix Gateway Tor proxy so that only certain connections from Whonix workstations are not anonymized by Tor? I want to have my Whonix Workstation application protected by the Whonix Gateway, but have the database backend connections bypass the gateway to improve performance.</p>
<h1>
<a name="more-optimization-6" class="anchor" href="http://forums.whonix.org#more-optimization-6"></a>More Optimization</h1>
<p>Are there other Whonix KVM optimizations to improve performance or make efficient use of server hardware? Finally, my questions can be summarized like this: At which points can I optimize before I can only scale vertically with Onionshare?</p>
          <p><a href="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763/1</link>
        <pubDate>Mon, 05 Sep 2022 01:25:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14763-1</guid>
        <source url="http://forums.whonix.org/t/performance-statistics-and-optimization-of-kvm-based-tor-hidden-services/14763.rss">Performance Statistics and Optimization of KVM-based Tor Hidden Services</source>
      </item>
  </channel>
</rss>
