<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External) - KVM - Whonix Forum</title>
    <meta name="description" content="Hello. Can I connect another virtual machine to the same NAT subnet of the Whonix Gateway (Whonix External)? 
I have a proxy client on the host that Whonix Gateway connects to through socks5, and then it is already trans&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="9052.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)&#39;" href="9052.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/connecting-another-virtual-machine-to-the-same-nat-subnet-of-the-whonix-gateway-whonix-external/9052" />
<meta name="twitter:url" content="https://forums.whonix.org/t/connecting-another-virtual-machine-to-the-same-nat-subnet-of-the-whonix-gateway-whonix-external/9052" />
<meta property="og:title" content="Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)" />
<meta name="twitter:title" content="Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)" />
<meta property="og:description" content="Hello. Can I connect another virtual machine to the same NAT subnet of the Whonix Gateway (Whonix External)?  I have a proxy client on the host that Whonix Gateway connects to through socks5, and then it is already transferred to my server using a different protocol. For security reasons, I decided to isolate the proxy client in the virtual machine. Initially, I planned to add an additional router for Whonix Gateway, blocking unnecessary traffic from Gateway and making it work through a proxy, b..." />
<meta name="twitter:description" content="Hello. Can I connect another virtual machine to the same NAT subnet of the Whonix Gateway (Whonix External)?  I have a proxy client on the host that Whonix Gateway connects to through socks5, and then it is already transferred to my server using a different protocol. For security reasons, I decided to isolate the proxy client in the virtual machine. Initially, I planned to add an additional router for Whonix Gateway, blocking unnecessary traffic from Gateway and making it work through a proxy, b..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="12 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="7 ❤" />
<meta property="article:published_time" content="2020-03-03T16:19:54+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="next" href="90524658.html?page=2">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="9052.html">Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/kvm/11.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #9EB83B'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>KVM</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/kelman'><span itemprop='name'>kelman</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-03T16:19:54Z' class='post-time'>
                March 3, 2020,  4:19pm
              </time>
              <meta itemprop='dateModified' content='2020-03-03T16:38:22Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hello. Can I connect another virtual machine to the same <strong>NAT</strong> subnet of the Whonix Gateway (<strong>Whonix External</strong>)?</p>
<p>I have a proxy client on the host that Whonix Gateway connects to through socks5, and then it is already transferred to my server using a different protocol. For security reasons, I decided to isolate the proxy client in the virtual machine. Initially, I planned to add an additional router for Whonix Gateway, blocking unnecessary traffic from Gateway and making it work through a proxy, but I ran into many problems with this implementation. For some reason, the connection was constantly interrupted, possibly due to the length of the tunnel or routing. In addition, due to the long wait for a connection to the TOR network, I decided to use other ideas.</p>
<p>My decision.</p>
<ol>
<li>Added virtual machine on the same subnet as Whonix Gateway</li>
<li>Assigned a static IP address (<strong>10.0.2.16</strong>) to the proxy virtual machine and opened incoming traffic only through <strong>TCP PORT 1080</strong>, and outgoing traffic only to the proxy server.</li>
<li>Added network filter (<strong>Libvirt NWFILTER</strong>) for VM Whonix Gateway</li>
</ol>
<p><code>&lt;filterref filter='whonix-gateway'/&gt;</code></p>
<p>With such rules.</p>
<pre><code>&lt;filter name='whonix-gateway' chain='root'&gt;
&lt;uuid&gt;6ef53069-ba34-94a0-d33d-17751b9b8cb1&lt;/uuid&gt;
&lt;! - enable connection with Proxy VM -&gt;
&lt;rule action='accept' direction='out'&gt;
&lt;tcp dstipaddr='10.0.2.16 'dstportstart='1080'/&gt;
&lt;/Rule&gt;

&lt;! - drop all other traffic -&gt;
&lt;rule action='drop' direction='inout'&gt;
&lt;all/&gt;
&lt;/Rule&gt;

&lt;/Filter&gt;
</code></pre>
<p>Now I have two virtual machines on the external Whonix subnet.<br>
Whonix Gateway does not have access to the Internet, except for connecting socks5 to ProxyVM through IP <strong>10.0.2.16</strong> and port <strong>1080</strong>.</p>
<p>If hack a Whonix Workstation, it will not know about Proxy Vm. If the Whonix Gateway is hacked, it learns about the proxy VM, but does not recognize my external IP address, but only the existence of the proxy VM. Yes, I understand that there are many ways to attack, but my question is more about implementing the use of Proxy VM.</p>
<p><strong>Question</strong>:<br>
Is this design safe? Can I connect a Proxy VM to the same subnet as the Whonix Gateway?</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-03T20:39:03Z' class='post-time'>
                March 3, 2020,  8:39pm
              </time>
              <meta itemprop='dateModified' content='2020-03-03T20:39:03Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="kelman" data-post="1" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>If hack a Whonix Workstation, it will not know about Proxy Vm. If the Whonix Gateway is hacked, it learns about the proxy VM, but does not recognize my external IP address, but only the existence of the proxy VM. Yes, I understand that there are many ways to attack, but my question is more about implementing the use of Proxy VM.</p>
</blockquote>
</aside>
<p>While filters are a clever way of implementing this they may not be foolproof for leaks, I recommend turning the whonix external network into another internal type network by editing the settings to resemble whonix internal (don’t worry about IP static assignment ti shouldn’t matter). Then you can place the proxy vm in front of it into this chain with eth1 facing whonix GW and eth0 outside on network "default " for instance.</p>
<p>This may be harder to implement but it should be the safest option. Whonix is modifiable in principle to support any proxy in place of Tor however it will depend on how much time <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a> can spare if you’d be interested in paying for support.</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/kelman'><span itemprop='name'>kelman</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T10:46:03Z' class='post-time'>
                March 4, 2020, 10:46am
              </time>
              <meta itemprop='dateModified' content='2020-03-04T10:46:03Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks for your recommendations.<br>
By “<strong>default</strong>” the network did you mean the standard NAT that libvirt creates during installation? If I understood your recommendations correctly, I tried to reproduce your words.</p>
<p>My actions:</p>
<ol>
<li>
<p>An additional internal interface based on Whonix-internal was created. Added it to the Whonix Gateway network as eth0, and for ProxyVM - as eth1.</p>
</li>
<li>
<p>Added a “default” NAT network, and the configured the eth1 interface in ProxyVM. It is directed to the internal network - enp2s0 (eth1).</p>
<p>auto lo<br>
iface lo inet loopback</p>
<p>allow-hotplug enp1s0<br>
iface enp1s0 inet dhcp</p>
<p>allow-hotplug enp2s0<br>
iface enp2s0 inet static<br>
address <strong>10.0.2.2</strong><br>
netmask 255.255.255.0</p>
</li>
<li>
<p>All incoming are closed - only incoming connections from <strong>10.0.2.15</strong> (Whonix Gateway) to port <strong>1080</strong> are allowed. All outgoing are allowed.</p>
<p>sudo ufw prohibits incoming by default<br>
sudo ufw by default allows outgoing<br>
sudo ufw allow from <strong>10.0.2.15</strong> to any port <strong>1080</strong></p>
</li>
<li>
<p>I configured the proxy client to listen on - ip <strong>10.0.2.2</strong> port <strong>1080</strong>.</p>
</li>
<li>
<p>In the settings of the Tor control panel, the connection through the <strong>sock5</strong> IP gateway and the internal interface ProxyVM <strong>10.0.2.2</strong>, port <strong>1080</strong> are indicated</p>
</li>
</ol>
<p>Everything works. If I try to connect to the Tor network without a proxy server, there will be no network. Since I do not need connections outside the proxy, it is reasonable not to configure routing on ProxyVM. Is it necessary to configure something additionally or is everything normal in this configuration?</p>
<p>I am worried about one thing that I added, following your advice, in the network “<strong>default</strong>” NAT for eth0 ProxyVM. Since on this network I have many other virtual machines. If this does not affect security, then I do not understand the point of creating a separate external Whonix network, why not add it to standard NAT and get, for example, an address through <strong>dhcp</strong>?</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/kelman'><span itemprop='name'>kelman</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T10:55:40Z' class='post-time'>
                March 4, 2020, 10:55am
              </time>
              <meta itemprop='dateModified' content='2020-03-04T10:55:40Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>Whonix is modifiable in principle to support any proxy in place of Tor.<br>
<a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/hulahoop">@HulaHoop</a></p>
</blockquote>
<p>Sorry, but I don’t quite understand what you mean.</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T11:13:15Z' class='post-time'>
                March 4, 2020, 11:13am
              </time>
              <meta itemprop='dateModified' content='2020-03-04T11:13:15Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Chaining_Anonymizing_Gateways" target="_blank" title="09:02AM - 12 June 2019">whonix.org – 12 Jun 19</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:110/73;"><img src="../../../external.html?link=https://www.whonix.org/w/images/7/77/Chaininganon23234.jpg" class="thumbnail" width="110" height="73"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Chaining_Anonymizing_Gateways" target="_blank">Chaining Anonymizing Gateways - Whonix</a></h3>

<p>Chaining Anonymizing Gateways</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<hr>
<p>A local proxy that does analysis or filtering such as privoxy or a proxy that connects to remote computers and increases tunnel length?</p>
<aside class="quote no-group" data-username="kelman" data-post="1" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>For some reason, the connection was constantly interrupted, possibly due to the length of the tunnel or routing.</p>
</blockquote>
</aside>
<aside class="quote no-group" data-username="kelman" data-post="1" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>In addition, due to the long wait for a connection to the TOR network</p>
</blockquote>
</aside>
<p>You want to replace Tor with another proxy software?</p>
<aside class="quote no-group" data-username="kelman" data-post="1" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>For some reason, the connection was constantly interrupted, possibly due to the length of the tunnel or routing. In addition, due to the long wait for a connection to the TOR network, I decided to use other ideas.</p>
</blockquote>
</aside>
<p>Well, if you want to use a proxy similar to Tor which connects to remote servers such as <a href="../../../external.html?link=https://www.whonix.org/wiki/JonDonym">JonDonym</a> then I don’t see how your other ideas would relief connection interrupting or slow connection issues?</p>
<aside class="quote no-group" data-username="kelman" data-post="1" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>Can I connect another virtual machine to the same <strong>NAT</strong> subnet of the Whonix Gateway ( <strong>Whonix External</strong> )?</p>
</blockquote>
</aside>
<p>In theory it may be possible (depends on proxy software) but undocumented / unsupported.</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Unsupported" target="_blank" title="09:29AM - 01 December 2017">whonix.org – 1 Dec 17</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:110/73;"><img src="../../../external.html?link=https://www.whonix.org/w/images/0/0a/Unsupported.jpg" class="thumbnail" width="110" height="73"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Unsupported" target="_blank">Unsupported - Whonix</a></h3>

<p>What do you mean by unsupported?</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="HulaHoop" data-post="2" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>it will depend on how much time <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a> can spare if you’d be interested in paying for support.</p>
</blockquote>
</aside>
<p>Indeed. At this time it’s unlikely that I would work on something like a Proxy-Gateway VM that can be chained with Whonix-Gateway unless paid.</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support" target="_blank" title="11:23AM - 22 April 2019">whonix.org – 22 Apr 19</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:110/76;"><img src="../../../external.html?link=https://www.whonix.org/w/images/b/b8/Professional12313.jpg" class="thumbnail" width="110" height="76"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support" target="_blank">Professional Technical Support - Whonix</a></h3>

<p>Professional support and consultation for anonymity, privacy, security, data security, Whonix ™ &amp; system administration services.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<hr>
<aside class="quote no-group quote-modified" data-username="kelman" data-post="4" data-topic="9052" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<blockquote>
<p>Whonix is modifiable in principle to support any proxy in place of Tor.<br>
<a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/hulahoop">@HulaHoop</a></p>
</blockquote>
<p>Sorry, but I don’t quite understand what you mean.</p>
</blockquote>
</aside>
<p>In principle, in theory this is possible:</p>
<ul>
<li>
<code>Whonix-Workstation ™</code> → <code>Whonix-Gateway ™</code> → <code>Proxy-Gateway</code>
</li>
<li>
<code>User</code> → <code>Tor</code> → <code>Proxy</code> → <code>Internet</code>
</li>
</ul>
<p>Also this is possible:</p>
<ul>
<li>
<code>Whonix-Workstation ™</code> → <code>Proxy-Gateway</code>
</li>
<li>
<code>User</code>→ <code>Proxy</code> → <code>Internet</code>
</li>
</ul>
<p>My notes on that subject might be outdated:<br>
<a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Inspiration#Proxy">https://www.whonix.org/wiki/Dev/Inspiration#Proxy</a></p>
<aside class="quote no-group" data-username="kelman" data-post="3" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>why not add it to standard NAT and get, for example, an address through <strong>dhcp</strong> ?</p>
</blockquote>
</aside>
<p>Because of attack surface and potential leaks.</p>
<p><a href="../../../external.html?link=https://www.whonix.org/wiki/Other_Operating_Systems#With_DHCP">https://www.whonix.org/wiki/Other_Operating_Systems#With_DHCP</a> a similar topic but related:</p>
<blockquote>
<p><a href="../../../external.html?link=https://phabricator.whonix.org/T239">Whonix ™ maintainers have not researched yet, if there is any feature in DHCP servers that would be problematic in the use case of anonymity distributions that use a two machine isolation approach. (Help welcome!)</a> <a href="../../../external.html?link=https://web.archive.org/web/https://phabricator.whonix.org/T239">[archive]</a> Maybe there is such a feature, maybe not. If it exists, maybe it could be easily disabled, maybe not. What is the attack surface here: once an attacker has compromised Whonix-Workstation ™, an attempt to exploit the DHCP server on Whonix-Gateway ™ could be tried. Worse, maybe DHCP has a feature such as “please tell me the IP address of your upstream router”, and that would be your real external IP address and DHCP would answer. To find out if this is actually the case, one would have to read the whole <a href="../../../external.html?link=https://www.ietf.org/rfc/rfc2131.txt">DHCP protocol</a> <a href="../../../external.html?link=https://web.archive.org/web/https://www.ietf.org/rfc/rfc2131.txt">[archive]</a>. <a href="../dhcp-server-on-the-gateway/195.html">Forum discussion</a> <a href="../../../external.html?link=https://web.archive.org/web/https://forums.whonix.org/t/dhcp-server-on-the-gateway">[archive]</a>. If you are interested anyway, please click on expand on the right side.</p>
</blockquote>
<p>Better to use static networking without DHCP.</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/kelman'><span itemprop='name'>kelman</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T12:36:45Z' class='post-time'>
                March 4, 2020, 12:36pm
              </time>
              <meta itemprop='dateModified' content='2020-03-04T12:43:58Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>A local proxy that does analysis or filtering such as privoxy or a proxy that connects to remote computers and increases tunnel length?</p>
</blockquote>
<p>No. The delay occurs when an additional VM router is added in front of the Whonix gateway. At least during my testing, this happened. Lost connection and long connection to the Tor network.</p>
<blockquote>
<p>You want to replace Tor with another proxy software?</p>
</blockquote>
<p>I am not trying to replace Tor or influence the Whonix design. My task is to direct traffic first to my local proxy client. After that, my client wraps the traffic in tls and sends it via websocket via Cdn to the proxy server. This helps me get around firewall and dpi with active zondes. I decided to isolate the proxy client in the virtual machine. Therefore, this topic was created.</p>
<blockquote>
<p>In theory it may be possible (depends on proxy software) but undocumented / unsupported.</p>
</blockquote>
<p>I am using a normal connection using the Tor control panel. The connection goes with my local proxy. My local proxy encapsulates TOR traffic in TLS and sends it to the proxy server, the server is already redirecting TOR traffic to the Tor RELAY server.<br>
Therefore, I need to use a proxy client on an isolated machine. In order not to do port forwarding on the host. I decided to host my local proxy on the same network as Whonix. I also set up nwfilter rules to block all traffic from Whonix Gateway, except for connecting to a local proxy. I need to connect only through my local proxy.</p>
<blockquote>
<p>Because of attack surface and potential leaks.<br>
<a href="../../../external.html?link=https://www.whonix.org/wiki/Other_Operating_Systems#With_DHCP" rel="nofollow noopener">https://www.whonix.org/wiki/Other_Operating_Systems#With_DHCP</a> a similar topic but related:<br>
Better to use static networking without DHCP.</p>
</blockquote>
<blockquote>
<p>Then you can place the proxy vm in front of it into this chain with eth1 facing whonix GW and eth0 outside on network "default " for instance.</p>
</blockquote>
<p><a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/hulahoop">@HulaHoop</a>  Why then advises when adding a proxy Vm that you can use the “default” network. As far as I understand, the default network is the standard NAT network, which is formed when installing libvirt qemu-kvm (bridge-utils).</p>
<p>This is what my network looks like.<br>
Whonix Gateway connects to the local socks5 or http / s proxy server (depends on the settings of the receiving proxy, I can configure it on another receiving proxy) ---------&gt; The local proxy receives traffic from the Whonix Gateway and is encapsulated in TLS and sends through websocket or http2 to the proxy server -----------&gt; The nginx server receives traffic and redirects to the local port - the server proxy, and it already sends traffic to the relay (TOr) server.</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/kelman'><span itemprop='name'>kelman</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T13:04:44Z' class='post-time'>
                March 4, 2020,  1:04pm
              </time>
              <meta itemprop='dateModified' content='2020-03-04T13:10:26Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>Can I connect another virtual machine to the same NAT subnet of the Whonix Gateway ( Whonix External )?</p>
<p>In theory it may be possible (depends on proxy software) but undocumented / unsupported.</p>
</blockquote>
<p>What does it mean - depends on proxy software? I can configure the machine myself and redirect traffic through it. My first post describes my actions, and as the second post after @ Hulahop’s answer, I took his advice and also successfully redirected traffic to my local proxy. He only recommended that you should not use an isolated proxy on the same subnet as the Whonix gateway, replacing the external whonix network with the internal one. And connect the Whonix gateway to the ProxyVM gateway. I followed this advice, as <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/hulahoop">@Hulahoop</a> said that the nwfilter filter is unreliable. Using (nwfilter) I isolated standard traffic without connecting to a local proxy.</p>
<p>It seems to me that <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/hulahoop">@HulaHoop</a> better understood my settings =)</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T13:21:45Z' class='post-time'>
                March 4, 2020,  1:21pm
              </time>
              <meta itemprop='dateModified' content='2020-03-04T13:21:45Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="kelman" data-post="7" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>What does it mean - depends on proxy software?</p>
</blockquote>
</aside>
<p>One example from <a href="../../../external.html?link=https://www.whonix.org/wiki/JonDonym">https://www.whonix.org/wiki/JonDonym</a></p>
<blockquote>
<p>Free accounts can connect only to ports 80 and 443 and provide only a https proxy interface, no socks. <a href="../../../external.html?link=https://www.whonix.org/wiki/JonDonym#cite_note-11">[11]</a> Premium accounts to any port and support socks. Full comparison: <a href="../../../external.html?link=https://anonymous-proxy-servers.net/en/premium.html">https://anonymous-proxy-servers.net/en/premium.html</a> <a href="../../../external.html?link=https://web.archive.org/web/https://anonymous-proxy-servers.net/en/premium.html">[archive]</a></p>
</blockquote>
<p>And <a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Inspiration#JonDonym_as_Tor_replacement_.28JonDoBOX.29">https://www.whonix.org/wiki/Dev/Inspiration#JonDonym_as_Tor_replacement_.28JonDoBOX.29</a></p>
<blockquote>
<p>Depending on your threat model (see <a href="../../../external.html?link=https://www.whonix.org/wiki/Design">Design</a>), <a href="../../../external.html?link=https://anonymous-proxy-servers.net/">JonDonym</a> <a href="../../../external.html?link=https://web.archive.org/web/https://anonymous-proxy-servers.net/">[archive]</a> can be potentially used as a replacement for Tor. Prefer the <a href="../../../external.html?link=https://anonymous-proxy-servers.net/wiki/index.php/JonDoDaemon_for_Debian">console version</a> <a href="../../../external.html?link=https://web.archive.org/web/https://anonymous-proxy-servers.net/wiki/index.php/JonDoDaemon_for_Debian">[archive]</a> of ‘JonDo – the IP changer’, otherwise you would have to install a desktop environment, which needs a lot more RAM, CPU and disc space (not possible on most embedded devices).</p>
<p>Free users can [<a href="../../../external.html?link=https://shop.anonymous-proxy-servers.net/bin/payment?lang#en#vorteile%7Conly">only use port 80 (http) and 443 (https)</a> <a href="../../../external.html?link=https://web.archive.org/web/https://shop.anonymous-proxy-servers.net/bin/payment?lang#en#vorteile%7Conly">[archive]</a>]. Socks is <a href="../../../external.html?link=https://anonymous-proxy-servers.net/en/help/about.html">only available for paying premium users</a> <a href="../../../external.html?link=https://web.archive.org/web/https://anonymous-proxy-servers.net/en/help/about.html">[archive]</a>. Therefore free users can only reach services listening on remote port 80 or 443. Normal browsing will work, other stuff, for example IRC on port 6667 will not work. Paying premium users can use all services.</p>
<p>In comparison to Tor, JonDo does not offer a TransPort or DnsPort. For that reason, transocks_ev (<a href="../../../external.html?link=https://anonymous-proxy-servers.net/en/help/transocks.html">download here</a> <a href="../../../external.html?link=https://web.archive.org/web/https://anonymous-proxy-servers.net/en/help/transocks.html">[archive]</a>) is needed. Note, that you can not use the firewall rules provided <a href="../../../external.html?link=https://anonymous-proxy-servers.net/en/help/transocks.html">under transocks_ev</a> <a href="../../../external.html?link=https://web.archive.org/web/https://anonymous-proxy-servers.net/en/help/transocks.html">[archive]</a>. You need to adjust the whonix firewall (/usr/bin/whonix_firewall).</p>
</blockquote>
<p>Quote:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Comparison_Of_Tor_with_CGI_Proxies,_Proxy_Chains,_and_VPN_Services" target="_blank" title="10:07AM - 27 May 2019">whonix.org – 27 May 19</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:110/103;"><img src="../../../external.html?link=https://www.whonix.org/w/images/b/bf/Masks-827730640.jpg" class="thumbnail" width="110" height="103"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Comparison_Of_Tor_with_CGI_Proxies,_Proxy_Chains,_and_VPN_Services" target="_blank">Comparison of Tor with CGI Proxies, Proxy Chains and VPN Services - Whonix</a></h3>

<p>Comparison of different Anonymizer Technologies, Anonymity Networks</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>“proxy types”<br>
http<br>
https<br>
socks4<br>
socks4a<br>
socks5<br>
CGI<br>
I2P<br>
JonDo<br>
Tor</p>
<p>“proxy features”<br>
http<br>
https<br>
TransPort<br>
UDP<br>
Remote DNS<br>
Hides IP<br>
user-to-proxy encryption</p>
<p>Not all “proxy types” have all “proxy features”.</p>
<p>For example transparent proxying with a <code>Proxy-Gateway</code> using a “normal” socks5 proxy in configuration <code>Whonix-Workstation ™</code> → <code>Whonix-Gateway ™</code> → <code>Proxy-Gateway</code> is not possible</p>
<p>Quote <a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Inspiration#Transparent_Proxying_Method">https://www.whonix.org/wiki/Dev/Inspiration#Transparent_Proxying_Method</a></p>
<blockquote>
<p>Transparent Proxying (like Whonix ™ with Tor’s TransPort) is, due to technical limitations, not fully supported by proxies. Proxies do not offer a DnsPort and also do not act as a DNS server. While it is possible to relay TCP and UDP traffic through the proxy on the IP level (using iptables), you would still always require known (you know the IP) DNS server. (i.e. public DNS server such as OpenDNS, Google, httpsdnsd) DNS resolution would look like: Proxy-Workstation → Proxy-Gateway → Proxy → DNS server. It is technically not possible to let the proxy transparently (!) do the DNS resolution (no tools available) - at least not that we know after extended research know of. This is because proxies offer hostname resolution, but not DNS.</p>
<p>Future: This technical limitation may be lifted if redsocks <a href="../../../external.html?link=https://github.com/darkk/redsocks/issues/23">Feature Request: fake DNS resolver</a> <a href="../../../external.html?link=https://web.archive.org/web/https://github.com/darkk/redsocks/issues/23">[archive]</a> gets implemented.</p>
<p>Due to the DNS issue, you can’t completely hide behind the proxy (using it transparently). You always would have to reveal, that you are using a public (or private) extra DNS resolver. Of course, you would also not only have to trust the proxy, but also the extra DNS server, which can see, log and correlate all your DNS queries.</p>
</blockquote>
<p>Though, transparent proxying may not be required.</p>
<p>Tor on Whonix-Gateway might talk directly to a http / https / socks4(a)/5 proxy running on the Proxy-Gateway.</p>
<p>Then use Tor’s proxy settings and point it to that proxy.</p>
<p><a href="../../../external.html?link=https://www.whonix.org/wiki/Tunnels/Connecting_to_a_proxy_before_Tor#Step_2:_Use_proxy_configuration_page">https://www.whonix.org/wiki/Tunnels/Connecting_to_a_proxy_before_Tor#Step_2:_Use_proxy_configuration_page</a></p>
<p>This might - depending on the proxy - not work (out of the box). Some proxies are blocking connections to the Tor network or blocking some ports.</p>
<p>IP forwarding is probably not required and even discouraged.</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/kelman'><span itemprop='name'>kelman</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T13:52:27Z' class='post-time'>
                March 4, 2020,  1:52pm
              </time>
              <meta itemprop='dateModified' content='2020-03-04T13:52:27Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>Though, transparent proxying may not be required.</p>
<p>Tor on Whonix-Gateway might talk directly to a http / https / socks4(a)/5 proxy running on the Proxy-Gateway.</p>
<p>Then use Tor’s proxy settings and point it to that proxy.</p>
<p><a href="../../../external.html?link=https://www.whonix.org/wiki/Tunnels/Connecting_to_a_proxy_before_Tor#Step_2:_Use_proxy_configuration_page" rel="nofollow noopener">https://www.whonix.org/wiki/Tunnels/Connecting_to_a_proxy_before_Tor#Step_2:_Use_proxy_configuration_page</a></p>
<p>This might - depending on the proxy - not work (out of the box). Some proxies are blocking connections to the Tor network or blocking some ports.</p>
<p>IP forwarding is probably not required and even discouraged.</p>
</blockquote>
<p>Ehhh. I know that Whonix can directly interact with Proxy Gateway, in my setup it does this. My first two posts about this and narrate. There are several options for using Proxy Gateway.</p>
<ol>
<li>Launch the proxy gateway on a different NAT network other than Whonix External. In this case, you must forward the ports using the rules on the host. Otherwise, Whonix Gateway will not be able to connect to the Proxy Gateway. I don’t want to forward ports, it creates a lot of problems, and for me it is inconvenient.</li>
<li>Launch the proxy gateway on the same NAT network as the Whonix gateway. Here forwarding, etc. Not required. The first post describes this particular construction. I also blocked all traffic on the Whonix gateway using nwfilter. All traffic must go through the local proxy. This is what happens, but with extra protection, I decided to introduce traffic filtering using nwfilter. I described everything in detail in my posts. If this is not clear, then I will try to rephrase. Perhaps my translation of a technical text is complicated?</li>
<li>Suggestion <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/hulahoop">@Hulahoop</a>. Launch ProxyVM in front of the Whonix gateway. A similar situation is the use of a router as a gateway. I have done it. The second post describes my specific steps in this direction. And also at the end of each of my posts (first and second) there are questions regarding these settings.</li>
<li>Using a local proxy on the host. The easiest option, but not safe. Therefore, I transferred everything to a virtual machine.</li>
</ol>
<p>My task is to understand which of these options is safer. For this, I described all my steps taken in each of these post(1,2). I also repeat that after all the steps described in the first and second post - I left questions regarding my actions.</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T14:03:27Z' class='post-time'>
                March 4, 2020,  2:03pm
              </time>
              <meta itemprop='dateModified' content='2020-03-04T14:03:27Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Ideally Whonix-Gateway’s external network card eth0 would connect to Proxy-Gateway on an internal network. The proxy software would run Proxy-Gateway eth1 and only communicate with Whonix-Gateway. External connections of Proxy-Gateway would happen through Proxy-Gateway eth0. A similar setup as Whonix-Gateway itself.</p>
<p>Whonix-Gateway not use a NAT network.</p>
<p>This should not be used anymore by Whonix-Gateway.</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-External.xml" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-External.xml" target="_blank">Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-External.xml</a></h4>
<pre><code class="lang-xml">&lt;network&gt;
  &lt;name&gt;Whonix-External&lt;/name&gt;
  &lt;forward mode='nat'/&gt;
  &lt;bridge name='virbr1' stp='on' delay='0'/&gt;
  &lt;ip address='10.0.2.2' netmask='255.255.255.0'/&gt;
&lt;/network&gt;
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Something like <a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-External.xml">https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-External.xml</a> should be used by Proxy-Gateway.</p>
<p>Whonix-Gateway rather should use something similar to this:</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-Internal.xml" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-Internal.xml" target="_blank">Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-Internal.xml</a></h4>
<pre><code class="lang-xml">&lt;network&gt;
  &lt;name&gt;Whonix-Internal&lt;/name&gt;
  &lt;bridge name='virbr2' stp='on' delay='0'/&gt;
&lt;/network&gt;
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/kelman'><span itemprop='name'>kelman</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T14:26:59Z' class='post-time'>
                March 4, 2020,  2:26pm
              </time>
              <meta itemprop='dateModified' content='2020-03-04T14:38:04Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="10" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Whonix-Gateway not use a NAT network.</p>
</blockquote>
</aside>
<p>You mean that Whonix Gateway does not use NAT for the internal interface through which Whonix Worsktation connects? If so, then I know that traffic routing is not used for the workstation. But the whonix gateway is in the NAT network, as the XML configuration itself indicates. Its eth0 interface exits through the NAT the host system.</p>
<blockquote>
<pre><code>&lt;name&gt;Whonix-External&lt;/name&gt;
&lt;forward mode='nat'/&gt;
</code></pre>
</blockquote>
<p>Means that my actions are as follows:</p>
<ol>
<li>Enable Whonix-external as eth0 for ProxyVM. Let’s say this is the virbr1 interface.</li>
<li>I am creating a second internal interface based on Whonix-Internal. This will be the Virbr2 interface. And Virbr3 is used to connect Worsktation to the Whonix gateway.</li>
<li>The virbr2 interface is eth1 for ProxyVM and eth0 for Whonix Gateway.</li>
</ol>
<p>What IP address and NetMask should I assign for the virbr2 interface? Which is used as eth1 for ProxyVM and eth0 for Whonix Gatewa</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T14:53:24Z' class='post-time'>
                March 4, 2020,  2:53pm
              </time>
              <meta itemprop='dateModified' content='2020-03-04T14:53:24Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="kelman" data-post="11" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>You mean that Whonix Gateway does not use NAT for the internal interface through which Whonix Worsktation connects?</p>
</blockquote>
</aside>
<p>No. It doesn’t. Uses this:</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-Internal.xml" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-Internal.xml" target="_blank">Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-Internal.xml</a></h4>
<pre><code class="lang-xml">&lt;network&gt;
  &lt;name&gt;Whonix-Internal&lt;/name&gt;
  &lt;bridge name='virbr2' stp='on' delay='0'/&gt;
&lt;/network&gt;
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="kelman" data-post="11" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>But the whonix gateway is in the NAT network, as the XML configuration itself indicates.</p>
</blockquote>
</aside>
<p>Yes.</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-External.xml" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-External.xml" target="_blank">Whonix/whonix-libvirt/blob/master/usr/share/whonix-libvirt/xml/Whonix-External.xml</a></h4>
<pre><code class="lang-xml">&lt;network&gt;
  &lt;name&gt;Whonix-External&lt;/name&gt;
  &lt;forward mode='nat'/&gt;
  &lt;bridge name='virbr1' stp='on' delay='0'/&gt;
  &lt;ip address='10.0.2.2' netmask='255.255.255.0'/&gt;
&lt;/network&gt;
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>But it shouldn’t be in your setup.</p>
<aside class="quote no-group" data-username="kelman" data-post="11" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>Enable Whonix-external as eth0 for ProxyVM.</p>
</blockquote>
</aside>
<p>Not sure I’d call that Whonix-external but basically yes.</p>
<aside class="quote no-group" data-username="kelman" data-post="11" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>I am creating a second internal interface based on Whonix-Internal.</p>
</blockquote>
</aside>
<p>Yes.</p>
<aside class="quote no-group" data-username="kelman" data-post="11" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>This will be the Virbr2 interface. And Virbr3 is used to connect Worsktation to the Whonix gateway.</p>
</blockquote>
</aside>
<p>Not sure about the vibr numbering. Not easy to explain in text. Would need to have to look at a set of config files.</p>
<aside class="quote no-group" data-username="kelman" data-post="11" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>What IP address and NetMask should I assign for the virbr2 interface? Which is used as eth1 for ProxyVM and eth0 for Whonix Gatewa</p>
</blockquote>
</aside>
<p>Not sure. Haven’t thought much about that yet.</p>
<hr>
<p>In theory, but not good idea:</p>
<ul>
<li>Gateway internal IP is 10.152.152.10 / netmask 255.255.192.0</li>
<li>Workstation internal IP is 10.152.152.11 / netmask 255.255.192.0</li>
</ul>
<p>I guess since multiple <a href="../../../external.html?link=https://www.whonix.org/wiki/Multiple_Whonix-Workstations">workstations</a> are counted upwards <code>10.152.152.11</code>, <code>10.152.152.12</code> etc in documentation it might make sense to count gateway after Whonix-Gateway downwards. Maybe <code>10.152.152.09</code>.</p>
<hr>
<p>On the other hand it might make much more sense (less likely to have leaks) to use a different netmask.</p>
<p>Whonix-Gateway as per Whonix default:</p>
<p>eth0<br>
address 10.0.2.15<br>
netmask 255.255.255.0<br>
gateway 10.0.2.2</p>
<p>eth1<br>
address 10.152.152.10<br>
netmask 255.255.192.0</p>
<p>As you can see, eth0 and eth1 are using a different netmask.</p>
<p>Therefore Whonix-Gateway eth0 settings should be changed. Set to use any different address/netmask that works. Probably not using a <code>gateway</code> setting in file <code>/etc/network/interfaces.d/30_non-qubes-whonix</code>. (Whonix-Gateway would be “more similar to a workstation”.)</p>
<hr>
<p>Proxy-Gateway eth0 should use (what Whonix-Gateway is now using for eth0):</p>
<p>eth0<br>
address 10.0.2.15<br>
netmask 255.255.255.0<br>
gateway 10.0.2.2</p>
<p>Proxy-Gateway eth1 could use anything that works (but probably using netmask 255.255.192.0 / 255.255.255.0) to be able to communicate with to Whonix-Gateway eth1.</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/kelman'><span itemprop='name'>kelman</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T15:18:56Z' class='post-time'>
                March 4, 2020,  3:18pm
              </time>
              <meta itemprop='dateModified' content='2020-03-04T15:50:03Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <ol>
<li>These settings now use ProxyVM as eth0.</li>
</ol>
<blockquote>
<pre><code>&lt;network&gt;
  &lt;name&gt;Proxy-External&lt;/name&gt;
  &lt;forward mode='nat'/&gt;
  &lt;bridge name='virbr1' stp='on' delay='0'/&gt;
  &lt;ip address='10.0.2.2' netmask='255.255.255.0'/&gt;
&lt;/network&gt;
</code></pre>
</blockquote>
<ol start="2">
<li>This is for eth1 ProxyVM and eth0 Whonix Gateway</li>
</ol>
<blockquote>
<pre><code>&lt;network&gt;
  &lt;name&gt;Whonix-Internal-Proxy&lt;/name&gt;
  &lt;bridge name='virbr2' stp='on' delay='0'/&gt;
&lt;/network&gt;
</code></pre>
</blockquote>
<ol start="3">
<li>For eth1 Whonix Gateway and eth0 Whonix Workstation.</li>
</ol>
<blockquote>
<pre><code>&lt;network&gt;
  &lt;name&gt;Whonix-Internal&lt;/name&gt;
  &lt;bridge name='virbr3' stp='on' delay='0'/&gt;
&lt;/network&gt;
</code></pre>
</blockquote>
<hr>
<ol>
<li>ProxyVM - edit interfaces</li>
</ol>
<blockquote>
<p>eth0<br>
address 10.0.2.15<br>
netmask 255.255.255.0<br>
gateway 10.0.2.2</p>
<p>eth1<br>
address 10.152.152.8<br>
netmask 255.255.192.0</p>
</blockquote>
<ol start="2">
<li>Whonix Gateway</li>
</ol>
<blockquote>
<p>eth0<br>
address 10.152.152.9<br>
netmask 255.255.192.0<br>
gateway 10.152.152.8</p>
<p>eth1<br>
address 10.152.152.10<br>
netmask 255.255.192.0</p>
</blockquote>
<ol start="3">
<li>Whonix Workstation has default settings.</li>
</ol>
<p>Is this correct overall? Should I also find advice on the correct IP and NetMask or is it possible to leave it that way?</p>
<blockquote>
<p>On the other hand it might make much more sense (less likely to have leaks) to use a different netmask.</p>
</blockquote>
<hr>
<p>I have one more question regarding:</p>
<p><code>&gt; &lt;driver name="qemu"/&gt;</code></p>
<p>I noticed this option only in xml Whonix (Ws / Gt). Could not find information on adding this. Where could I read about this and should I add this argument when creating the ProxyVM network? I did not see it in the original xml configuration, but after creating the network it appears. When creating other non-Whonix-based virtual machines, these settings are missing.</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T16:48:33Z' class='post-time'>
                March 4, 2020,  4:48pm
              </time>
              <meta itemprop='dateModified' content='2020-03-04T16:48:33Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="kelman" data-post="3" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>Thanks for your recommendations.<br>
By “ <strong>default</strong> ” the network did you mean the standard NAT that libvirt creates during installation? If I understood your recommendations correctly, I tried to reproduce your words.</p>
</blockquote>
</aside>
<p>Yes</p>
<p>I was only gone for half a day and this thread has really ballooned <img src="../../images/emoji/twitter/smileyc164.png?v=9" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>Let me elucidate.</p>
<p>WS -&gt; INTERNAL -&gt; GW -&gt; EXTERNAL (Network settings edited to not specify an IP range to make absolutely sure it is isolated) -&gt; PROXYVM -&gt; DEFAULT NAT Network (should be safe to use even without a dhcp client on proxyvm  provided you set a static IP for egress that falls in 192.168.122.0/24)</p>
<p>Reading what you want to accomplish with proxyvm, I have to ask if you tried Tor bridges or the Tunnel Tor thru VPN feature on WHonix GW.</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T16:51:37Z' class='post-time'>
                March 4, 2020,  4:51pm
              </time>
              <meta itemprop='dateModified' content='2020-03-04T16:51:37Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="kelman" data-post="13" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>noticed this option only in xml Whonix (Ws / Gt). Could not find information on adding this. Where could I read about this and should I add this argument when creating the ProxyVM network? I did not see it in the original xml configuration, but after creating the network it appears. When creating other non-Whonix-based virtual machines, these settings are missing.</p>
</blockquote>
</aside>
<p>This goes into VM settings not networks. I wouldn;t play with it though as it is between using virtio or vhost - the later would give better performance but increases risks in case a vulnerability is found because it is a kernel module and not a userspace implementation like virtio</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/kelman'><span itemprop='name'>kelman</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T17:26:55Z' class='post-time'>
                March 4, 2020,  5:26pm
              </time>
              <meta itemprop='dateModified' content='2020-03-04T18:08:22Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>I was only gone for half a day and this thread has really ballooned</p>
</blockquote>
<p>Yes, that’s for sure; wink: Actually, I appreciate your time for your support. Although not immediately, but we kind of found understanding with <a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a>, it was difficult for me to explain what exactly I want to implement. Thank you for such valuable help on your part.</p>
<blockquote>
<p>WS -&gt; INTERNAL -&gt; GW -&gt; EXTERNAL (Network settings edited to not specify an IP range to make absolutely sure it is isolated) -&gt; PROXYVM -&gt; DEFAULT NAT Network (should be safe to use even without a dhcp client on proxyvm provided you set a static IP for egress that falls in 192.168.122.0/24)</p>
</blockquote>
<p>Essentially, I followed this recommendation and always tried to set up a static IP. The key fact is that Whonix developers did not just configure the network in this way. And since the developers set it up way, it means that I also have to go this way. But after you pointed out that I can use NAT by default, I hesitated a bit. In fact, I pointed this out in a second post that I’m not sure of such an implementation using dhcp.</p>
<blockquote>
<p>DEFAULT NAT network (should be safe to use even without the dhcp client on the provided proxyvm, you set a static IP for the output, which drops in 192.168.122.0/24)</p>
</blockquote>
<p>But if you put the WHONIX virtual machine in a separate NAT network, then in this case it will not be on the same network as other virtual machines using NAT by default. Even if a static IP address is assigned to the Whonix gateway, but “default” NAT is still used by other home machines  and if they are hacked. Will this create a vector for an attack by the Whonix gateway, as well as for other virtual machines? A hacked virtual machine will know that it is not alone in this subnet.</p>
<blockquote>
<p>Reading what you want to accomplish with proxyvm, I have to ask if you tried Tor bridges or the Tunnel Tor thru VPN feature on WHonix GW.</p>
</blockquote>
<p>The problem is that DPI blocks Tor. And OBFS after a certain time. Apparently classifies traffic. I used vpn. It is also often blocked. Therefore, the goal does not justify the money spent on its purchase or launch of my server. At the same time, VPN is difficult to configure on a personal server, and then on a computer, so as not to route all traffic - I do not want vpn to encrypt all traffic, but for this you need to dig into the settings. On the whonix gateway, to be honest, I could not get vpn to work. Also noticed that DPI checks my connections before using certain protocols, while simultaneously studying what exactly is behind the server and what services are hanging on the ports. Therefore, I redirect my traffic through the TLS http2 capsule, and it receives traffic to the nginx server and sends it to the local port. Therefore, DPI does not know about the existence of a proxy. I recently switched to websocket via cdn to minimize possible blocking of my server.</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T19:16:00Z' class='post-time'>
                March 4, 2020,  7:16pm
              </time>
              <meta itemprop='dateModified' content='2020-03-04T19:16:00Z'>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="kelman" data-post="16" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>Will this create a vector for an attack by the Whonix gateway, as well as for other virtual machines?</p>
</blockquote>
</aside>
<p>Can you diagram this for me to understand better?</p>
<aside class="quote no-group" data-username="kelman" data-post="16" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>The problem is that DPI blocks Tor. And OBFS after a certain time. Apparently classifies traffic. I used vpn. It is also often blocked.</p>
</blockquote>
</aside>
<p>Interesting. I think you should let the Tor Project know this as they are interested in tracking the progress of the censorship war and take appropriate measures to circumvent.<br>
I presume you tried meek too.</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/kelman'><span itemprop='name'>kelman</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-04T23:01:10Z' class='post-time'>
                March 4, 2020, 11:01pm
              </time>
              <meta itemprop='dateModified' content='2020-03-04T23:06:46Z'>
          <span itemprop='position'>#18</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>Can you diagram this for me to understand better?</p>
</blockquote>
<p>I was just trying to understand why a separate Whonix NAT network is being created. Hence my questions about whether it is safe to add Whonix to “default” NAT. Now I am more inclined to believe that a separate network for whonix is ​​created solely from a technical point of view, and not from a security point of view, right? For example, for one reason, if you add Whonix to “default” NAT, then if the host has many virtual machines and, for example, the IP address used by Whonix Gateway is already in use by another virtual machine. Since the IP address of the new virtual machine will be automatically assigned from the DHCP range, if it matches the IP Whonix Gateway, it will create an IP address conflict? That is actually all.</p>
<blockquote>
<p>Interesting. I think you should let the Tor Project know this as they are interested in tracking the progress of the censorship war and take appropriate measures to circumvent.<br>
I presume you tried meek too.</p>
</blockquote>
<p>I think this is not so critical for my location. The Tor project is unlikely to make any decisions in this situation. Such problems are observed mainly in large Internet providers, in connection with new censorship laws. For example, I did not encounter this problem with some of my friends. At work, for example, I also have access to the Tor network, although only through obfs4 bridges. With the help of the “meek,” I could not gain access. I always thought that the “Meek” server was blocking access from my location.) Even when the network itself was not censored.</p>
<p>The Tor project has its own analytics of connections to Tor, and there are also many posts on the network screaming about Tor locks. There are several famous countries where there is no freedom for Thor. I’m sure Tor developers are working on solutions to bypass locks. I also believe that everything that is publicly accessible and uncontrolled is always censored in totalitarian countries, etc. They first blocked the Tor bridges, and then the obfs3-4 bridges. Somewhere it partially blocks, but where everything is completely. The same thing will happen with a new type of encryption or protocol that will be designed to bypass locks. This will also work for a while. Once they learn to classify it, locks will begin. This is actually an endless war.</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-05T14:44:15Z' class='post-time'>
                March 5, 2020,  2:44pm
              </time>
              <meta itemprop='dateModified' content='2020-03-05T14:44:15Z'>
          <span itemprop='position'>#19</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="kelman" data-post="18" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/k/3ec8ea/40.png" class="avatar"> kelman:</div>
<blockquote>
<p>I was just trying to understand why a separate Whonix NAT network is being created. Hence my questions about whether it is safe to add Whonix to “default” NAT</p>
</blockquote>
</aside>
<p>There’s no separate one it is the <em>default</em> NAT I’m talking about for proxyvm egress.</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/kelman'><span itemprop='name'>kelman</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9052.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-05T18:32:28Z' class='post-time'>
                March 5, 2020,  6:32pm
              </time>
              <meta itemprop='dateModified' content='2020-03-05T18:55:01Z'>
          <span itemprop='position'>#20</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="HulaHoop" data-post="19" data-topic="9052">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>There’s no separate one it is the <em>default</em> NAT I’m talking about for proxyvm egress.</p>
</blockquote>
</aside>
<p>Perhaps we are talking about different things. For me, NAT by default is the network that is automatically created when installing libvirt qemu-kvm bridge-utils.</p>
<p>Has the following characteristics:</p>
<pre><code>&lt;network&gt;
  &lt;name&gt; default &lt;/name&gt;
  &lt;uuid&gt; ............................................ &lt;/ uuid &gt;
  &lt;forward mode = "nat"&gt;
    &lt;nat&gt;
      &lt;port start = "1024" end = "65535" /&gt;
    &lt;/nat&gt;
  &lt;/forward&gt;
  &lt;bridge name = "virbr0" stp = "on" delay = "0" /&gt;
  &lt;mac address = "......................................" /&gt;
  &lt;ip address = "192.168.122.1" netmask = "255.255.255.0"&gt;
    &lt;dhcp&gt;
      &lt;range start = "192.168.122.2" end = "192.168.122.254" /&gt;
    &lt;/dhcp&gt;
  &lt;/ip&gt;
&lt;/network&gt;
</code></pre>
<p>When we install Whonix, we add a separate NAT network. She already has such characteristics.</p>
<pre><code>&lt;network&gt;
  &lt;name&gt; Whonix-External &lt;/name&gt;
  &lt;uuid&gt; ......................................... &lt;/uuid&gt;
  &lt;forward mode = "nat"&gt;
    &lt;nat&gt;
      &lt;port start = "1024" end = "65535" /&gt;
    &lt;/nat&gt;
  &lt;/forward&gt;
  &lt;bridge name = "virbr1" stp = "on" delay = "0" /&gt;
  &lt;mac address = "........................." /&gt;
  &lt;ip address = "10.0.2.2" netmask = "255.255.255.0"&gt;
  &lt;/ip&gt;
&lt;/network&gt;
</code></pre>
<p>Do you mean by default the network that is added during the installation of Whonix? I personally understand that this is the first, not Whonix. Because of this, incomplete understanding arises.</p>
        </div>

        <meta itemprop='headline' content='Connecting another virtual machine to the same NAT subnet of the Whonix gateway (Whonix External)'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><b><a rel="next" itemprop="url" href="90524658.html?page=2">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
