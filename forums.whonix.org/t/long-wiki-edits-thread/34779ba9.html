<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Long Wiki Edits Thread - Website - Whonix Forum</title>
    <meta name="description" content="I think it&amp;#39;s worth having a &amp;#39;Long Wiki Edits&amp;#39; thread, where people can highlight what they&amp;#39;re working on etc.  

I understand this material will always be around, even when short guides and long form guides are finished &amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="34779ba9.html?page=3" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Long Wiki Edits Thread&#39;" href="3477.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/long-wiki-edits-thread/3477?page=3" />
<meta name="twitter:url" content="https://forums.whonix.org/t/long-wiki-edits-thread/3477?page=3" />
<meta property="og:title" content="Long Wiki Edits Thread" />
<meta name="twitter:title" content="Long Wiki Edits Thread" />
<meta property="og:description" content="After much pain and suffering, I have fixed/merged both of these. 🙂  Basically, all the stuff was merged into the ‘Why use Qubes over other Virtualizers’ entry (plus a shit load more bullet points), and I just cut the Rutkowska template back to one paragraph re: summary outcome of her research.  So, it all looks nice and thorough now.   Do you mean just note a step that the user should recreate sys-whonix and anon-whonix AppVMs after applying the new kernelopts with AppArmor initia..." />
<meta name="twitter:description" content="After much pain and suffering, I have fixed/merged both of these. 🙂  Basically, all the stuff was merged into the ‘Why use Qubes over other Virtualizers’ entry (plus a shit load more bullet points), and I just cut the Rutkowska template back to one paragraph re: summary outcome of her research.  So, it all looks nice and thorough now.   Do you mean just note a step that the user should recreate sys-whonix and anon-whonix AppVMs after applying the new kernelopts with AppArmor initia..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="477 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1662 ❤" />
<meta property="article:published_time" content="2017-04-03T16:39:15+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="34774658.html?page=2">
        <link rel="next" href="3477fdb0.html?page=4">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="3477.html">Long Wiki Edits Thread</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/website/6.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #0E76BD'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Website</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-03T16:39:15Z' class='post-time'>
                April 3, 2017,  4:39pm
              </time>
              <meta itemprop='dateModified' content='2017-04-03T16:39:15Z'>
          <span itemprop='position'>#41</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="40" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>After the edit of <a href="../../../external.html?link=https://www.whonix.org/wiki/Template:Software_compartmentalization_vs._physical_separation">https://www.whonix.org/wiki/Template:Software_compartmentalization_vs._physical_separation</a>, now where the template is used ( <a href="../../../external.html?link=https://www.whonix.org/wiki/Qubes/Why_use_Qubes_over_other_Virtualizers">https://www.whonix.org/wiki/Qubes/Why_use_Qubes_over_other_Virtualizers</a> ) looks a bit off?</p>
</blockquote>
</aside>
<p>After much pain and suffering, I have fixed/merged both of these. <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Basically, all the stuff was merged into the ‘Why use Qubes over other Virtualizers’ entry (plus a shit load more bullet points), and I just cut the Rutkowska template back to one paragraph re: summary outcome of her research.</p>
<p>So, it all looks nice and thorough now.</p>
<aside class="quote" data-post="40" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>But when installing Qubes-Whonix by selecting it in Qubes installer and then applying either <a href="../../../external.html?link=https://www.whonix.org/wiki/Template:Qubes_AppArmor">https://www.whonix.org/wiki/Template:Qubes_AppArmor</a> or enabling apparmor from <a href="../../../external.html?link=https://www.qubes-os.org/doc/whonix/customize/">https://www.qubes-os.org/doc/whonix/customize/</a>, users would miss enabling AppArmor in sys-whonix and anon-whonix? Could you fix that please?</p>
</blockquote>
</aside>
<p>Do you mean just note a step that the user should recreate sys-whonix and anon-whonix AppVMs after applying the new kernelopts with AppArmor initialized?</p>
<p>If so, easy enough.</p>
<p>BTW - that is not my recollection when I did it on my system i.e. I thought that it worked okay with pre-existing AppVMs, since the tests resulting in ouput ‘0’ (for existance of AppArmor framework) came up trumps from memory. So, I do actually wonder we have this right…</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-03T19:53:34Z' class='post-time'>
                April 3, 2017,  7:53pm
              </time>
              <meta itemprop='dateModified' content='2017-04-03T19:53:34Z'>
          <span itemprop='position'>#42</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="41" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Do you mean just note a step that the user should recreate sys-whonix and anon-whonix AppVMs after applying the new kernelopts with AppArmor initialized?</p>
</blockquote>
</aside>
<p>There is no reason to recreate. Just set the kernel options.</p>
<p>Just now tested. Changing kernel options for whonix-ws does not modify kernel options of anon-whonix. (Checked with <code>qvm-prefs -l anon-whonix kernelopts</code> and in VM with <code>sudo aa-status</code>.)</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-04T16:46:58Z' class='post-time'>
                April 4, 2017,  4:46pm
              </time>
              <meta itemprop='dateModified' content='2017-04-05T08:35:47Z'>
          <span itemprop='position'>#43</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><strong>Template:Tor_Browser_Remove_Proxy_Setting</strong></p>
<ul>
<li>Removed all the text around Tor Button ‘Open Network’ feature, since it doesn’t exist in its redesign (Edit: correction; I’ve edited that text and put it back - see below)</li>
<li>For the start-tor-browser Method, I assumed you meant that “export TOR_TRANSPROXY=1” is entered as a line of text within the start-tor-browser file (with save and exit), but the text wasn’t clear in the original entry.</li>
</ul>
<p><strong>Template:Qubes_AppArmor</strong></p>
<p>I must admit I’m very confused now. <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Do you mind cutting and pasting from that entry <i>exactly</i> what is wrong and tell me what needs to be deleted/added re: this process.</p>
<p>As I understood it, we:</p>
<ol>
<li>
<p>Did all that stuff in dom0 (as currently exists in the entry) to show AppArmor is part of new kernel parameters for whonix-ws and whonix-gw (TemplateVMs)</p>
</li>
<li>
<p>Magically, <i>newly created</i> TemplatedBasedVMs (AppVMs) based on whonix-ws and whonix-gw (ie anon-whonix and sys-whonix) would inherit the same kernelopts, since according to Qubes:</p>
</li>
</ol>
<p>“Newly created TemplateBasedVMs inherit the kernelopts setting of their TemplateVM.”</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/1091" target="_blank" rel="nofollow noopener">github.com/QubesOS/qubes-issues</a>
  </header>
  <article class="onebox-body">
    <a href="../../../external.html?link=https://github.com/adrelanos" rel="nofollow noopener">
<img src="../../../external.html?link=https://avatars1.githubusercontent.com/u/1985040?v=2&amp;s=96" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/1091" target="_blank" rel="nofollow noopener">Issue: newly created VMs should inherit kernelopts of TemplateVM</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/1091" target="_blank" rel="nofollow noopener">2015-07-29</a>
	</div>
	<div class="user">
	closed by <a href="../../../external.html?link=https://github.com/marmarek" target="_blank" rel="nofollow noopener">marmarek</a>
	on <a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/1091" target="_blank" rel="nofollow noopener">2015-08-04</a>
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">When new VMs are created, those should by default get the same kernel options (kernelopts) as the template VM those are...</pre>

<div class="labels">
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">C: core</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">P: major</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">enhancement</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Thus my reasoning was a) since we already specified whonix-ws (TemplateVM) and whonix-gw (TemplateVM) in the dom0 steps b) sudo aa-status should output “0” for both (freshly created) instances of appVMs.</p>
<p>But you’re saying that doesn’t work?</p>
<p>So, if AppVMs don’t inherit this value when created after dom0 steps, and you’re saying we don’t recreate AppVMs based on modified TemplateVMs, we should then set kernelopts directly to the AppVMs like so (?):</p>
<p>qvm-prefs -s anon-whonix kernelopts “nopat apparmor=1 security=apparmor”</p>
<p>&amp;</p>
<p>qvm-prefs -s sys-whonix kernelopts “nopat apparmor=1 security=apparmor”</p>
<p>Is that right? If not, then I’m completely stumped and I have no idea how to proceed to fix this entry <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-05T04:46:16Z' class='post-time'>
                April 5, 2017,  4:46am
              </time>
              <meta itemprop='dateModified' content='2017-04-05T08:40:43Z'>
          <span itemprop='position'>#44</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Correction: moved all the Tor Button stuff back in (edited) because I realized that Whonix removed that setting, not The Tor Project. <img src="../../images/emoji/twitter/blushae52.png?v=5" title=":blush:" class="emoji" alt=":blush:"> As follows:</p>
<p><strong>Ignore Tor Button’s Open Network Settings</strong></p>
<blockquote>
<p>Whonix has disabled the “Open Network Settings” menu option in Tor Button. See the footnote if you want to know why.</p>
</blockquote>
<p>Footnote -&gt;</p>
<blockquote>
<p>Networking settings can be changed inside Tor, when using the regular Tor Browser Bundle from The Tor Project (without Whonix), via the “Open Network Settings” menu option. It has the same effect as editing Tor’s config file torrc. In Whonix, the environment variable <code>export TOR_NO_DISPLAY_NETWORK_SETTINGS=1</code> has been [<a href="../../../external.html?link=https://github.com/Whonix/anon-ws-disable-stacked-tor/blob/master/usr/lib/anon-ws-disable-stacked-tor/torbrowser.sh">https://github.com/Whonix/anon-ws-disable-stacked-tor/blob/master/usr/lib/anon-ws-disable-stacked-tor/torbrowser.sh</a> set] to disable the “TorButton” -&gt; “Open Network Settings…” menu item. It is not useful and confusing to have in the workstation, because:</p>
<ul>
<li>In Whonix, there is only limited access to Tor’s control port (see [[Dev/CPFP]] for more information); and</li>
<li>For security reasons, Tor must be manually configured in /etc/tor/torrc on the Whonix-Gateway, and not from the Whonix-Workstation (see also [[Features#VPN_.2F_Tunnel_support|VPN/Tunnel support]] for more information).<br>
</li>
</ul>
</blockquote>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-05T12:07:37Z' class='post-time'>
                April 5, 2017, 12:07pm
              </time>
              <meta itemprop='dateModified' content='2017-04-05T12:07:37Z'>
          <span itemprop='position'>#45</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>sys-whonix and anon-whonix might be created by Qubes installer. By that time, the kernelopts do not include AppArmor settings yet. So “these newly created AppVMs” will not have AppArmor kernelopts enabled. Does that make sense?</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-05T18:02:34Z' class='post-time'>
                April 5, 2017,  6:02pm
              </time>
              <meta itemprop='dateModified' content='2017-04-05T18:02:34Z'>
          <span itemprop='position'>#46</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><strong>1)</strong> Yes. I was a bit slow on the uptake there. Thanks for signing all that stuff off.</p>
<p>I was confused because I didn’t remember creating new AppVMs in my instance (when I’ve had AppArmor running for ages), but then I remembered recreating the anon-ws etc later on after I did those steps. ha ha</p>
<p>I’ll fix that up soon.</p>
<p><strong>2)</strong> I updated the <a href="../../../external.html?link=http://kkkkkkkkkk63ava6.onion/wiki/Grsecurity#How-To:_Qubes-Whonix">http://kkkkkkkkkk63ava6.onion/wiki/Grsecurity#How-To:_Qubes-Whonix</a> entry to reflect the latest grsec kernel which is available now -&gt; 4.9.20</p>
<p>Coldhak instructions are still the same as before (I checked).</p>
<p>But this begs the question, how does one update their grsec kernel in Qubes Debian-8 TemplateVM, without going through all those steps again? i.e. check out the latest kernel version, build it and ditch the older version?</p>
<p>Or just easier to create a whole new TemplateVM and do the long process again? I’m under no illusion that it is that easy in Qubes, but I’ve not seen this referenced anywhere that I remember.</p>
<p>Any ideas? We should probably have an entry in there (eventually) and I’m happy to guinea pig it, with a few pointers.</p>
<p>I’d be interested if you’ve had any luck using a Debian-8 grsec kernel AppVM for networking and firewall too.</p>
<p>I’ve not tried it, but the forums suggest that only an additional module or 2 is required (during build?) to have it compatible with networking.</p>
<p><strong>3)</strong> If anyone has tried that MirageOS unikernel FW, that would be interesting too, and one day (6 months later) I might get around to trying it and documenting it here somewhere.</p>
<p>But right now, I think most of 2017 is gonna be taken up with this long wiki, based on the current rate of progress (which is slow).</p>
<p>But, I think it is coming into shape bit by bit.</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-06T06:13:21Z' class='post-time'>
                April 6, 2017,  6:13am
              </time>
              <meta itemprop='dateModified' content='2017-04-06T06:13:21Z'>
          <span itemprop='position'>#47</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I significantly changed/updated the Tox template, which was quite (3 years) out of date. Most “planned” features are now actually implemented, depending on the client in use.</p>
<p><a href="../../../external.html?link=http://kkkkkkkkkk63ava6.onion/wiki/Template:Tox" class="onebox" target="_blank">http://kkkkkkkkkk63ava6.onion/wiki/Template:Tox</a></p>
<p>Also, it is much easier to install now, with no key verification etc steps required I gather, since we are downloading it straight from an <a href="../../../external.html?link=http://opensuse.org/">opensuse.org</a> repository.</p>
<p>I just focused on installing the main qTox graphical client in the steps.</p>
<p>If the user wants uTox (lightweight dependencies) or other supported Linux clients, I left it for them to follow up the client descriptions and install steps via the links in the entry (it’s pretty simple).</p>
<p>But do check that the steps are safe as I have edited it. I suppose we can auto-trust repos straight off the opensuse website…</p>
<p>Cheers</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-06T07:30:20Z' class='post-time'>
                April 6, 2017,  7:30am
              </time>
              <meta itemprop='dateModified' content='2017-04-06T07:30:20Z'>
          <span itemprop='position'>#48</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>grsecurity upgrades… Untested… Does this help?</p>
<blockquote>
<ol>
<li>Clone your Debian-8 TemplateVM [skip]</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>Increase the maximum storage size of the Debian-8 TemplateVM [skip]</li>
</ol>
</blockquote>
<blockquote>
<ol start="3">
<li>Edit your sources.list [skip]</li>
</ol>
</blockquote>
<blockquote>
<ol start="4">
<li>Install dom0 dependencies. [skip]</li>
</ol>
</blockquote>
<blockquote>
<p>In dom0, run:</p>
</blockquote>
<blockquote>
<p>sudo qubes-dom0-update grub2-xen [skip]</p>
</blockquote>
<blockquote>
<ol start="5">
<li>Install Debian dependencies. [skip]</li>
</ol>
</blockquote>
<blockquote>
<p>In the Debian TemplateVM, run:</p>
</blockquote>
<blockquote>
<p>Building the grsec Coldkernel</p>
</blockquote>
<blockquote>
<ol>
<li>Clone and verify the coldkernel build scripts.</li>
</ol>
</blockquote>
<blockquote>
<p>wget “<a href="../../../external.html?link=https://coldhak.ca/coldhak/keys/coldhak.asc">https://coldhak.ca/coldhak/keys/coldhak.asc</a>” -O coldhak.asc [skip unless signing key changed]<br>
gpg --import coldhak.asc [skip unless signing key changed]<br>
git clone <a href="../../../external.html?link=https://github.com/coldhakca/coldkernel">https://github.com/coldhakca/coldkernel</a> [don’t clone]<br>
cd coldkernel<br>
[new command] git fetch<br>
git verify-tag coldkernel-0.9a-4.9.20 [repeat with new version]<br>
git checkout tags/coldkernel-0.9a-4.9.20 [repeat with new version]</p>
</blockquote>
<blockquote>
<p>make qubes-guest [repeat]</p>
</blockquote>
<blockquote>
<p><a href="../../../external.html?link=https://coldhak.ca/assets/img/blog/coldkernel_pt1/build.png">https://coldhak.ca/assets/img/blog/coldkernel_pt1/build.png</a><br>
Installing the grsec Coldkernel</p>
</blockquote>
<blockquote>
<p>Post-build, in the Debian Template VM run:</p>
</blockquote>
<blockquote>
<p>wget <a href="../../../external.html?link=https://grsecurity.net/paxctld/paxctld_1.2.1-1_amd64.%7Bdeb,deb.sig">https://grsecurity.net/paxctld/paxctld_1.2.1-1_amd64.{deb,deb.sig</a>} [repeat if there was an update]<br>
gpg --homedir=.gnupg --verify paxctld_1.2.1-1_amd64.{deb.sig,deb} [repeat if there was an update]<br>
sudo dpkg -i paxctld_1.2.1-1_amd64.deb [repeat if there was an update]<br>
sudo make install-deb [repeat]<br>
sudo cp paxctld.conf /etc/paxctld.conf [repeat]<br>
sudo paxctld -d [repeat?]<br>
sudo systemctl enable paxctld [can be skipped]<br>
sudo mkdir /boot/grub [can be skipped]<br>
sudo update-grub2 [repeat]<br>
sudo shutdown -h now [repeat]</p>
</blockquote>
<blockquote>
<p>Post-install TemplateVM Configuration</p>
</blockquote>
<blockquote>
<ol>
<li>Change the Debian-8 TemplateVM kernel. [skip]</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>Check the Debian-8 TemplateVM is functional. [repeat]</li>
</ol>
</blockquote>
<blockquote>
<ol start="3">
<li>Set default grsec special groups. [skip unless there is some new group]</li>
</ol>
</blockquote>
<blockquote>
<ol start="4">
<li>Install paxtest and check that Grsecurity is running.</li>
</ol>
</blockquote>
<blockquote>
<p>In the Debian TemplateVM, run:</p>
</blockquote>
<blockquote>
<p>sudo apt-get install paxtest [skip]<br>
paxtest blackhat [repeat]</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-06T15:26:28Z' class='post-time'>
                April 6, 2017,  3:26pm
              </time>
              <meta itemprop='dateModified' content='2017-04-06T15:26:28Z'>
          <span itemprop='position'>#49</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks.</p>
<p>Works up until this point:</p>
<pre><code>sudo make install-deb
</code></pre>
<p>Before getting errors like:</p>
<blockquote>
<p>Error! Bad return status for module build on kernel: 4.9.20-coldkernel-grsec-1 (x86_64)<br>
Consult /var/lib/dkms/u2mfn/3.2.3/build/make.log for more information.</p>
</blockquote>
<p>The reason is that the u2mfn version is too out of date in (stable repos) Qubes. Thus, if people want to use a 4.9 kernel, this will first need to upgrade to the testing repos in Qubes (needed version updloaded on 23 March).</p>
<p><a href="../../../external.html?link=https://github.com/coldhakca/coldkernel/issues/55" class="onebox" target="_blank">https://github.com/coldhakca/coldkernel/issues/55</a></p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/2691" target="_blank" rel="nofollow noopener">github.com/QubesOS/qubes-issues</a>
  </header>
  <article class="onebox-body">
    <a href="../../../external.html?link=https://github.com/rtiangha" rel="nofollow noopener">
<img src="../../../external.html?link=https://avatars1.githubusercontent.com/u/8913195?v=2&amp;s=96" class="thumbnail onebox-avatar" width="420" height="420">
</a>

<h4><a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/2691" target="_blank" rel="nofollow noopener">Issue: Update qubes-kernel-vm-support package to include latest u2mfn.c for kernel 4.9 compatability</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="../../../external.html?link=https://github.com/rtiangha" target="_blank" rel="nofollow noopener">rtiangha</a>
	on <a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/2691" target="_blank" rel="nofollow noopener">2017-03-10</a>
	</div>
	<div class="user">
	closed by <a href="../../../external.html?link=https://github.com/marmarek" target="_blank" rel="nofollow noopener">marmarek</a>
	on <a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/2691" target="_blank" rel="nofollow noopener">2017-03-23</a>
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Qubes OS version (e.g., R3.2):
R3.2 (maybe others?)
Affected TemplateVMs (e.g., fedora-23, if applicable):
All current fedora and debian templates.
Expected behavior:
The qubes-kernel-vm-support package should...</pre>

<div class="labels">
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">C: kernel</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">enhancement</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>So, I’ll upgrade to testing and see if it completes correctly and then fix up the grsec entry for 4.9 kernels &amp; how to push an update to an existing grsec template…</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-06T16:51:45Z' class='post-time'>
                April 6, 2017,  4:51pm
              </time>
              <meta itemprop='dateModified' content='2017-04-06T16:59:35Z'>
          <span itemprop='position'>#50</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>OK - I got the 4.9.20 grsec template built and booting (general logs look okay), but then the VM light goes from green to yellow. <img src="../../images/emoji/twitter/unamusedae52.png?v=5" title=":unamused:" class="emoji" alt=":unamused:"></p>
<p>It doesn’t allow me to do post-install tinkering (setting grsec special groups) or open any applications e.g. terminal.</p>
<p>The only error I can see is from Qubes VM Manager:</p>
<blockquote>
<p>ErrorHandler: BadAccess (attempt to access private resource denied)<br>
Major opcode: 130 (MIT-SHM)<br>
Minor opcode: 1 (X_ShmAttach)<br>
ResourceID: 0x219<br>
Failed serial number: 49<br>
Current serial number: 50</p>
</blockquote>
<p>So, I probably stuffed something up, but this is major progress <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Really, we need at this point in the guide -&gt; <a href="../../../external.html?link=http://kkkkkkkkkk63ava6.onion/wiki/Grsecurity#Debian_TemplateVM">http://kkkkkkkkkk63ava6.onion/wiki/Grsecurity#Debian_TemplateVM</a> a step 6 saying:</p>
<blockquote>
<p><strong>Additional Debian Dependencies</strong></p>
</blockquote>
<blockquote>
<p>Note: If attempting to build a Linux 4.9 kernel, you require qubes-kernel-vm-support 3.2.4+deb8u1 from the Qubes Debian Testing repository.</p>
</blockquote>
<blockquote>
<p>First, temporarily enable the Debian-TemplateVM testing repository following the steps here: <a href="../../../external.html?link=https://www.qubes-os.org/doc/software-update-vm/">https://www.qubes-os.org/doc/software-update-vm/</a></p>
</blockquote>
<blockquote>
<p>Then update your package lists:</p>
</blockquote>
<blockquote>
<pre><code>sudo apt-get update
</code></pre>
</blockquote>
<blockquote>
<p>And install the latest kernel support:</p>
</blockquote>
<blockquote>
<pre><code>sudo apt-get install qubes-kernel-vm-support
</code></pre>
</blockquote>
<blockquote>
<p>Afterwards, set your default repository back to the stable Qubes version.</p>
</blockquote>
<p>We should probably also note that if people get this error message when running sudo update grub-2, it can be safely ignored -&gt;</p>
<blockquote>
<p>When running sudo update-grub2, you can safely ignore this error message:</p>
</blockquote>
<blockquote>
<pre><code>grub2-probe: error: cannot find a GRUB drive for /dev/mapper/dmroot. Check your device.map
</code></pre>
</blockquote>
<blockquote>
<p>See: <a href="../../../external.html?link=https://github.com/QubesOS/qubes-doc/blob/master/configuration/managing-vm-kernel.md">https://github.com/QubesOS/qubes-doc/blob/master/configuration/managing-vm-kernel.md</a></p>
</blockquote>
<p>But, I don’t know if I can be bothered with the 4.9 kernel stuffing around right now… it’s probably just easier to note that 4.8 versions work with the instructions and wait for the 4.9 series to stabilize before building (unless you have any ideas on the above error).</p>
<p>I’m sure someone over on the Qubes forums could probably answer this problem, but I’m not registering on filthy Google forums to find out. Life’s too short.</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-06T18:44:48Z' class='post-time'>
                April 6, 2017,  6:44pm
              </time>
              <meta itemprop='dateModified' content='2017-04-06T18:44:48Z'>
          <span itemprop='position'>#51</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>re: tox. What is the source of that link <code>http://download.opensuse.org/repositories/home:/antonbatenev:/tox/Debian_8.0</code>? Looks a bit weird. A home folder? Who owns the account? Really the developer of tox? Could you add a reference please?</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-06T21:47:57Z' class='post-time'>
                April 6, 2017,  9:47pm
              </time>
              <meta itemprop='dateModified' content='2017-04-06T21:47:57Z'>
          <span itemprop='position'>#52</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>All your contributions are appreciated! I wasn’t aware so many issues were still left. It’s awesome to see it being perfectionated.</p>
<p>You might like to get a backup since you also put a lot time into this.</p>
<ul>
<li><a href="../../../external.html?link=https://github.com/WhonixBOT/whonix-wiki-backup">https://github.com/WhonixBOT/whonix-wiki-backup</a></li>
<li><a href="../../../external.html?link=https://github.com/WhonixBOT/WhonixWikiBackups">https://github.com/WhonixBOT/WhonixWikiBackups</a></li>
</ul>
<p>Could you please have a look at <a href="../../../external.html?link=https://www.whonix.org/wiki/WhonixBackupScript">https://www.whonix.org/wiki/WhonixBackupScript</a> and see if it works for you so we have a few people actually doing backups “of Whonix”? Does initial backup work and if keeping it up to date as well?</p>
<hr>
<blockquote>
<p><a href="../../../external.html?link=https://www.whonix.org/wiki/Template:Tunnel_Support">https://www.whonix.org/wiki/Template:Tunnel_Support</a><br>
[[Tunnels/Introduction|Using Tunnels with Whonix]]</p>
</blockquote>
<p>vs  new</p>
<blockquote>
<p>[[Tunnels/Introduction|Using Tunnels in Whonix]]</p>
</blockquote>
<p>It’s not just “in”. Since tunnels can be configured elsewhere, such as on the host in Non-Qubes-Whonix or in other VMs in Qubes-Whonix. Do you know a better adverb than <code>in</code> if <code>with</code>is wrong?</p>
<hr>
<blockquote>
<p><a href="../../../external.html?link=https://www.whonix.org/wiki/Grsecurity">https://www.whonix.org/wiki/Grsecurity</a></p>
</blockquote>
<p>Do we have any proof for this fingerprint <code>1073 B61B 69CB 0444 33B6 4F7B 0B1F 9321 DE32 FEBB</code>? New fingerprint?</p>
<hr>
<p>Improved <a href="../../../external.html?link=https://www.whonix.org/wiki/Template:Uwt_wrappers_deactivate_all_permanently">https://www.whonix.org/wiki/Template:Uwt_wrappers_deactivate_all_permanently</a> a bit. Please check.</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-07T04:01:26Z' class='post-time'>
                April 7, 2017,  4:01am
              </time>
              <meta itemprop='dateModified' content='2017-04-07T04:01:26Z'>
          <span itemprop='position'>#53</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>No problem!</p>
<p>Re: Template:Tunnel_Support -&gt; OK. Just leave it as “Using Tunnels with Whonix” then, since it otherwise changes the meaning.</p>
<p>Okay, I better list my follow up tasks from this editing spree so I don’t miss anything:</p>
<p>TO DO:</p>
<p><strong>1)</strong> Check Tox repository source (who is it? developer? etc). BTW, that repo comes straight from the Tox website (download section) for “Debian”.</p>
<p><strong>2)</strong> Finish finer edits of Qubes:Apparmor Template</p>
<p><strong>3)</strong> grsecurity, add:</p>
<p>a) Patrick’s grsec kernel update instructions (since I’ve tested and they work)<br>
b) Note dependencies for 4.9 kernel. Note that 4.8 kernel works with current instructions<br>
c) Check proof of coldhak fingerprint (although that one I added and saw on my system matches the one from the coldhak blog)</p>
<p><strong>4)</strong> Check Qubes forums for grsec blocking / failing message, since this probably relates to overly strict settings in Pax etc</p>
<p><strong>5)</strong> Test WhonixBOT wiki-backup works</p>
<p><strong>6)</strong> Check Template:Uwt_wrapper_deactivate_all_permanently edits</p>
<p>BTW are you worried that Whonix wiki [and backup?] could be lost from the servers simultaneously - from an accident or malicious actors?. How big is it i.e. need a very large VM set aside?</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-07T05:42:14Z' class='post-time'>
                April 7, 2017,  5:42am
              </time>
              <meta itemprop='dateModified' content='2017-04-07T05:42:14Z'>
          <span itemprop='position'>#54</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><strong>1)</strong> Tox Template -&gt; Fixed.</p>
<p>Added this footnote:</p>
<blockquote>
<p>This repository is directly referenced on the Tox Download webpage, see: <a href="../../../external.html?link=https://software.opensuse.org/download.html?project=home%3Aantonbatenev%3Atox&amp;package=qtox">https://software.opensuse.org/download.html?project=home%3Aantonbatenev%3Atox&amp;package=qtox</a> Anton Batenev is a Tox developer.</p>
</blockquote>
<p>FYI, here he is on Github, you can see long term work on core Tox libraries etc -&gt; <a href="../../../external.html?link=https://github.com/abbat?tab=overview&amp;from=2016-12-01&amp;to=2016-12-31">https://github.com/abbat?tab=overview&amp;from=2016-12-01&amp;to=2016-12-31</a></p>
<p><strong>2)</strong> Qubes: AppArmor Template -&gt; Fixed.</p>
<p>Added explicit steps re: deleting old AppVMs and creating new ones (used the templates for this) and edited the text to make it all very clear.</p>
<p>Moving on…</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-07T07:30:11Z' class='post-time'>
                April 7, 2017,  7:30am
              </time>
              <meta itemprop='dateModified' content='2017-04-07T08:28:42Z'>
          <span itemprop='position'>#55</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><strong>3)</strong> Grsecurity#How-To:_Qubes-Whonix -&gt; Fixed.</p>
<ul>
<li>Added note about dependencies for 4.9 Kernel</li>
<li>Noted one can ignore grub error messages if they appear at sudo update-grub2 step</li>
<li>Added entry for upgrading kernel builds</li>
<li>Noted the signing key output should be checked against the one found on the coldhak blog (see below for query)</li>
</ul>
<p><strong>Query:</strong> Should we be doing another step using one of the keys at the link below instead for ‘verification’ checks?</p>
<p>[<a href="../../../external.html?link=https://github.com/coldhakca/coldkernel/tree/master/keys">https://github.com/coldhakca/coldkernel/tree/master/keys</a>]</p>
<p>The folder only lists torvalds.asc (for Linux kernels), spender.asc (for grsec patches) &amp; I have no idea who greg.asc is and whether that matches the “coldhak signing key” or not. How do we check at the terminal?</p>
<p>The Tor Project instructions just refer to a website and checking the key matches for TBB, so I just put in the wiki the matching .png (coldhak website) in the interim. Is that safe enough or not?</p>
<p><strong>4)</strong> Re: Sending Qubes-user forum a message about the 4.9 grsec kernel failure -&gt;</p>
<p>I was going to send an email to the Qubes-Users forums about the 4.9  kernel not working with grsec (that error far above), but I see SIGAINT has closed down. So, my old throw-away email can’t be used to send this query to:</p>
<p><a href="mailto:qubes-users@googlegroups.com">qubes-users@googlegroups.com</a></p>
<p>I’ve found another provider for throw-away email, but they don’t allow posting for 24-28 hours when you register by Tor. So, we can wait a day or 2 to post, of if you’re keen, you might drop this into Qubes-User forums so we might get some advice earlier and I can fix up the wiki grsecurity entry if necessary(?). Anyway, this is what can be posted either way:</p>
<blockquote>
<p>Greetings,</p>
</blockquote>
<blockquote>
<p>I am currently using Qubes 3.2 and have had success to date with running the 4.8 grsec kernel series (coldkernel) with Debian-8 AppVMs following the steps / advice outlined on the coldhak blog and github account.</p>
</blockquote>
<blockquote>
<p>I have recently tried to apply the 4.9.20 upgraded kernel to the Debian-8 TemplateVM and hit some problems.</p>
</blockquote>
<blockquote>
<p>I have followed the advice to install the latest qubes-kernel-vm-support package from the Qubes testing repository (for the Debian-8 TemplateVM) and avoided the error messages around “Bad return status for module build.” [<a href="../../../external.html?link=https://github.com/coldhakca/coldkernel/issues/55">https://github.com/coldhakca/coldkernel/issues/55</a>] [<a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/2691">https://github.com/QubesOS/qubes-issues/issues/2691</a>]</p>
</blockquote>
<blockquote>
<p>The upgraded kernel successfully builds and the TemplateVM boots. However, the TemplateVM state light soon shifts from green to yellow. The qrexec.log and console.log look okay (no obvious error messages), but the guid.log shows a new cryptic error message I’ve never seen before:</p>
</blockquote>
<blockquote>
<p>ErrorHandler: BadAccess (attempt to access private resource denied)<br>
Major opcode: 130 (MIT-SHM)<br>
Minor opcode: 1 (X_ShmAttach)<br>
ResourceID: 0x219<br>
Failed serial number: 49<br>
Current serial number: 50</p>
</blockquote>
<blockquote>
<p>Any attempts to run applications fail e.g. terminal. So, grsec groups can’t be set, paxtest can’t be run, and obviously it’s not functional, so there is no point creating a new AppVM based on it.</p>
</blockquote>
<blockquote>
<p>Can anyone who has the 4.9 grsec kernel up and running provide any advice on how to resolve this problem?</p>
</blockquote>
<blockquote>
<p>Regards</p>
</blockquote>
<p><strong>6)</strong> Template:Uwt_wrapper_deactivate_all_permanently -&gt; Fixed</p>
<p>I think you meant that these steps will deactive all wrappers AND remove stream isolation (it wasn’t clear to me). If that’s not the case, I’ll re-edit it. But this is what I came up (just changed the first paragraph):</p>
<blockquote>
<p>The following instructions permanently deactivate all uwt wrappers and remove stream isolation for [[Stream_Isolation#By_uwt_wrapper|uwt wrapped applications]] system-wide. Consequently, all uwt wrapped applications revert to the default system networking configuration.</p>
</blockquote>
<p>Moving on to the last point (5) re: Whonix Bot testing…</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-07T09:28:26Z' class='post-time'>
                April 7, 2017,  9:28am
              </time>
              <meta itemprop='dateModified' content='2017-04-07T09:28:26Z'>
          <span itemprop='position'>#56</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>re Qubes AppArmor:</p>
<blockquote>
<p>AppVMs based on Whonix templates - anon-whonix and sys-whonix</p>
</blockquote>
<p>-&gt; Please fix to whonix-gw / whonix-ws.</p>
<blockquote>
<p>You need to delete the old AppVMs and recreate anon-whonix and sys-whonix for the changes to take effect.</p>
</blockquote>
<p>There is no need to delete them. Just set the kernel settings.</p>
<p>Imagine there is a text file where Qubes stores these settings in dom0. One text file per VM. When a new TemplateBasedVM is created, it inherits defaults from the TemplateVM. Changing TemplateVM kernel settings will only change the settings file for the TemplateVM and not touch TemplateBasedVMs. When Qubes dom0 starts a VM, it looks into the text file on which kernel settings to pass during boot.</p>
<p>(It’s actually not a text, but xml file in /var/lib/qubes, I think.)</p>
<hr>
<p>re tox:</p>
<p>Could you please add gpg fingerprint verification instructions?</p>
<p>Adding the repository key is not optional. Without it there would be an apt-get gpg verification warning that really should not be ignored.</p>
<p>Could you please use gpg --with-fingerprint as used on for example <a href="../../../external.html?link=https://www.whonix.org/wiki/YaCy">https://www.whonix.org/wiki/YaCy</a>?</p>
<hr>
<p>re todo: Feel free to do that here or to open tickets at <a href="../../../external.html?link=http://phabricator.whonix.org/">phabricator.whonix.org</a>. Whatever works best for you.</p>
<hr>
<aside class="quote" data-post="53" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>BTW are you worried that Whonix wiki [and backup?] could be lost from the servers simultaneously - from an accident or malicious actors</p>
</blockquote>
</aside>
<p>It’s probably paranoid but the more people have backups the less likely it can be purged from history.</p>
<aside class="quote" data-post="53" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>How big is it i.e. need a very large VM set aside?</p>
</blockquote>
</aside>
<p>2 GB should suffice for now.</p>
<hr>
<aside class="quote" data-post="55" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Query: Should we be doing another step using one of the keys at the link below instead for ‘verification’ checks?</p>
<p>[<a href="../../../external.html?link=https://github.com/coldhakca/coldkernel/tree/master/keys">https://github.com/coldhakca/coldkernel/tree/master/keys</a>]</p>
</blockquote>
</aside>
<p>We root trust in coldkernel to not ship us malicious keys there. That’s sufficient.</p>
<p>Verification of the keys in that folder is less user documentation, but more the task of a source code auditor, who would verify that among the rest of coldkernel source code. Just verifying these keys by other people and not auditing the rest of the source code would not buy anything.</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-07T09:33:18Z' class='post-time'>
                April 7, 2017,  9:33am
              </time>
              <meta itemprop='dateModified' content='2017-04-07T09:33:18Z'>
          <span itemprop='position'>#57</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>grsecurity message posted to qubes-users. Hopefully I picked a good subject.</p>
<p><a href="../../../external.html?link=https://groups.google.com/forum/#!topic/qubes-users/2X8wi5XebJc">https://groups.google.com/forum/#!topic/qubes-users/2X8wi5XebJc</a></p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-07T13:38:06Z' class='post-time'>
                April 7, 2017,  1:38pm
              </time>
              <meta itemprop='dateModified' content='2017-04-07T13:38:06Z'>
          <span itemprop='position'>#58</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>LOL @ Qubes Template. <img src="../../images/emoji/twitter/grinae52.png?v=5" title=":grin:" class="emoji" alt=":grin:"></p>
<ol>
<li>I feel like I’m back in Calculus class with this Qubes template!</li>
</ol>
<p>I’m gonna test this again with fresh templates with default kernelopts, just for my interest first. Then edit for the last time, and if that isn’t right, I might have to defer that editing to the expert (you)</p>
<ol start="2">
<li>Re: ‘stable’ version of qTox, I’ll check if there are keys about and instructions (I think there may not be, unless for nightly versions). If that’s the case, should we be referring people to nightly versions of qtox?</li>
</ol>
<p>Thanks for posting that message to Qubes forums. If it doesn’t get a reply, I might try a clean templateVM to install the 4.9.20 grsec kernel in, instead of the testing ‘upgrade’ template I used. I could have stuffed up something, or missed a step possibly to explain why I don’t have permissions to open anything. Very likely with the large number of commands entered at the terminal.</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-07T15:30:32Z' class='post-time'>
                April 7, 2017,  3:30pm
              </time>
              <meta itemprop='dateModified' content='2017-04-07T15:30:32Z'>
          <span itemprop='position'>#59</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>This is my detective work with qTox.</p>
<p>Anton Batenev is the main man for signing off Linux OBS repositories (whatever OBS is), see here (“abbat” is his callsign on github):</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://assets-cdn.github.com/favicon.ico" class="site-icon" width="32" height="32">
      <a href="../../../external.html?link=https://github.com/qTox/qTox" target="_blank" rel="nofollow noopener">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="../../../external.html?link=https://avatars2.githubusercontent.com/u/9519241?s=400&amp;v=4" class="thumbnail onebox-avatar" width="256" height="256">

<h3><a href="../../../external.html?link=https://github.com/qTox/qTox" target="_blank" rel="nofollow noopener">qTox/qTox</a></h3>

<p>qTox - The most feature-rich Tox client; P2P instant messaging, audio and video calls.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<blockquote>
<p>Linux OBS repositories, managed by abbat:</p>
</blockquote>
<blockquote>
<p>3EB5 027B 3CD8 D7CA AC30  EB6B F2AA 0B1E 5EF8 303B</p>
</blockquote>
<p>This key is also confirmed by this github issue (where the key had expired):</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/qTox/qTox/issues/3874" target="_blank" rel="nofollow noopener">github.com/qTox/qTox</a>
  </header>
  <article class="onebox-body">
    <a href="../../../external.html?link=https://github.com/Deathsbreed" rel="nofollow noopener">
<img src="../../../external.html?link=https://avatars1.githubusercontent.com/u/6626993?v=2&amp;s=96" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="../../../external.html?link=https://github.com/qTox/qTox/issues/3874" target="_blank" rel="nofollow noopener">Issue: Debian Repo release key invalid</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="../../../external.html?link=https://github.com/Deathsbreed" target="_blank" rel="nofollow noopener">Deathsbreed</a>
	on <a href="../../../external.html?link=https://github.com/qTox/qTox/issues/3874" target="_blank" rel="nofollow noopener">2016-11-12</a>
	</div>
	<div class="user">
	closed by <a href="../../../external.html?link=https://github.com/Deathsbreed" target="_blank" rel="nofollow noopener">Deathsbreed</a>
	on <a href="../../../external.html?link=https://github.com/qTox/qTox/issues/3874" target="_blank" rel="nofollow noopener">2016-11-13</a>
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Basic Description
I get an invalid key warning when adding the qTox repo to my sources.list.d/qtox.list.
OS: Debian GNU/Linux Stretch (Testing)
qTox version: N/A
Commit...</pre>

<div class="labels">
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">I-packaging</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">OS-linux</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<blockquote>
<p>My fault, key really expired. You have to update key:</p>
</blockquote>
<blockquote>
<p>$ wget -O - <a href="../../../external.html?link=http://download.opensuse.org/repositories/home:antonbatenev:tox/Debian_Stretch/Release.key">http://download.opensuse.org/repositories/home:antonbatenev:tox/Debian_Stretch/Release.key</a><br>
| sudo apt-key add -</p>
</blockquote>
<blockquote>
<p>or</p>
</blockquote>
<blockquote>
<p>$ sudo apt-key adv --keyserver <a href="../../../external.html?link=http://keyserver.ubuntu.com/">keyserver.ubuntu.com</a> --recv-keys 0xF2AA0B1E5EF8303B</p>
</blockquote>
<p>Nowhere can I find reference to and standalone packages/binaries and .asc signature files, so we can run a gpg --verify step.</p>
<p>So sure we can:</p>
<ul>
<li>Download Anton Batenev’s key which is used for signing the Linux qtox builds</li>
</ul>
<blockquote>
<p>gpg --keyserver <a href="../../../external.html?link=http://keyserver.ubuntu.com/">keyserver.ubuntu.com</a> --recv-keys “3EB5 027B 3CD8 D7CA AC30  EB6B F2AA 0B1E 5EF8 303B”</p>
</blockquote>
<ul>
<li>Check the fingerprint</li>
</ul>
<blockquote>
<p>gpg --fingerprint “3EB5 027B 3CD8 D7CA AC30  EB6B F2AA 0B1E 5EF8 303B”</p>
</blockquote>
<p>With the output showing:</p>
<blockquote>
<p>pub   2048R/5EF8303B 2014-09-04 [expires: 2019-01-20]<br>
Key fingerprint = 3EB5 027B 3CD8 D7CA AC30  EB6B F2AA 0B1E 5EF8 303B<br>
uid                  home:antonbatenev OBS Project <a>home:antonbatenev@build.opensuse.org</a></p>
</blockquote>
<p>But I’m not sure how this helps us.</p>
<p><strong>Note:</strong> In the current wiki entry, I have taken the download and adding key steps straight off the Tox website. Nightlies for Linux no longer appear available. Ironically Windows has standalone files and sigs, but not Linux.</p>
<p>So, I think we’re just expected to trust Anton’s folder on the opensuse website since he is trusted with all the Linux packaged files. Of course, if somebody interferes with the download over https, I guess we’re screwed.</p>
<p>In other words, perhaps I should just note/change the entry to reflect that the user should trust the repository key step, since it’s the best that can be done in the situation (?).</p>
<p><strong>Test install of qTox</strong></p>
<p>I tested installing qTox, and one has to add the repository key to apt FIRST, or you get a PUB KEY not found error, when running apt-get update.</p>
<p>Oh yeh, all the commands have to be run in root (su) too. My mistake.</p>
<p>I tested in an AppVM and qTox is all starting properly etc. I haven’t used it for comms though, just seeing it booted up okay.</p>
<p><strong>Suggested template edit</strong></p>
<p>I think the correct order for it to work now is (for correct install):</p>
<blockquote>
<p>su</p>
</blockquote>
<blockquote>
<p>wget -nv <a href="../../../external.html?link=http://download.opensuse.org/repositories/home:antonbatenev:tox/Debian_8.0/Release.key">http://download.opensuse.org/repositories/home:antonbatenev:tox/Debian_8.0/Release.key</a> -O Release.key</p>
</blockquote>
<blockquote>
<p>apt-key add - &lt; Release.key</p>
</blockquote>
<blockquote>
<p>echo ‘deb <a href="../../../external.html?link=http://download.opensuse.org/repositories/home:/antonbatenev:/tox/Debian_8.0/">http://download.opensuse.org/repositories/home:/antonbatenev:/tox/Debian_8.0/</a> /’ &gt; /etc/apt/sources.list.d/qtox.list</p>
</blockquote>
<blockquote>
<p>apt-get update</p>
</blockquote>
<blockquote>
<p>apt-get install qtox</p>
</blockquote>
<blockquote>
<p>exit</p>
</blockquote>
<p>If you’re happy with that, I’ll change it accordingly.</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2017-04-07T15:59:08Z' class='post-time'>
                April 7, 2017,  3:59pm
              </time>
              <meta itemprop='dateModified' content='2017-04-07T18:38:49Z'>
          <span itemprop='position'>#60</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I should have done my homework first. That crash in the grsec Debian template appears to be related to known Qubes issues e.g.</p>
<p>Possibly:</p>
<p>[<a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/2617">https://github.com/QubesOS/qubes-issues/issues/2617</a>]</p>
<blockquote>
<p>This seems to be a bug in our code. Newer Xsevers have a separate thread for input processing. So when we access the window object to get the memory pages with the image data we have a race condition with the main thread if the client changes the Pixmap.</p>
</blockquote>
<blockquote>
<p>QubesOS/qubes-gui-agent-linux@5ea68d2 should fix this.</p>
</blockquote>
<p>And most definitely this:</p>
<p>[<a href="../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/2455">https://github.com/QubesOS/qubes-issues/issues/2455</a>]</p>
<blockquote>
<p>Qubes-GUID crashed in one AppVM as soon as I started monodevelop the first time. Cannot reproduce this problem either. Error in guid log was:</p>
<p>ErrorHandler: BadAccess (attempt to access private resource denied)<br>
Major opcode: 130 (MIT-SHM)<br>
Minor opcode: 1 (X_ShmAttach)<br>
ResourceID:   0x2000054<br>
Failed serial number:  3670<br>
Current serial number: 3671</p>
</blockquote>
<p>So, our advice to daring people using the latest 3 day old grsec kernels from Coldhak should be:</p>
<ul>
<li>Apply the Qubes testing repository for the Debian TemplateVM for cutting edge release kernels</li>
</ul>
<p>Or similar. This would have solved the module crashing issue during build, plus (probably) this Qubes-GUI error in the first place.</p>
<p>So, I’ll try that and get back to you on the success of the 4.9.20 coldkernel… god it’s a never ending story  <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
<p><strong>Edit:</strong> And 2 hours later from a clean templateVM grsec rebuild with full Qubes testing repo, I now get the:</p>
<ul>
<li>“Cannot execute qrexec-daemon!” (Qubes) error; and also the</li>
<li>“Loading initial ramdisk …<br>
alloc magic is broken at 0x18e21260: 18c481a0” (Coldhak) error in combination.</li>
</ul>
<p>You already noted the latter one here 9 months ago:</p>
<p><a href="../../../external.html?link=https://github.com/coldhakca/coldkernel/issues/35" class="onebox" target="_blank">https://github.com/coldhakca/coldkernel/issues/35</a></p>
<p>Needless to say, between Qubes coding errors somewhere in the graphical system and the very, very alpha state of the latest grsec template, users should not waste their time until a 0.9b version comes out, and Qubes testing updates make it to the stable repos.</p>
<p>That is, stick to the 4.8 grsec series, which I’ve used for months with no problem whatsoever, including combined with Firejail.</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="34774658.html?page=2">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="3477fdb0.html?page=4">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
