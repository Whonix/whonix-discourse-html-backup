<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Long Wiki Edits Thread - #561 by 0brand - Website - Whonix Forum</title>
    <meta name="description" content="I think it&amp;#39;s worth having a &amp;#39;Long Wiki Edits&amp;#39; thread, where people can highlight what they&amp;#39;re working on etc.  

I understand this material will always be around, even when short guides and long form guides are finished &amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../3477e459.html?page=28" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Long Wiki Edits Thread&#39;" href="../3477.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/long-wiki-edits-thread/3477/561" />
<meta name="twitter:url" content="https://forums.whonix.org/t/long-wiki-edits-thread/3477/561" />
<meta property="og:title" content="Long Wiki Edits Thread" />
<meta name="twitter:title" content="Long Wiki Edits Thread" />
<meta property="og:description" content="Chapter “Copy Tor State File to Fresh sys-whonix VM” added to wiki/Tor.  https://whonix.org/wiki/w/index.php?title=Tor&amp;oldid=33071&amp;diff=cur  Not sure if I like chapter title. I saw this terminology used under the “Rotation of Entry Guards”  chpater and I tried to copy the language.   On occasion, users may be tempted to create a new Whonix-Gateway (Qubes-Whonix: sys-whonix) because:   One of the fallback primary entry guards. A configured bridge. Possibly combine tunnels with Tor. Creating a fre..." />
<meta name="twitter:description" content="Chapter “Copy Tor State File to Fresh sys-whonix VM” added to wiki/Tor.  https://whonix.org/wiki/w/index.php?title=Tor&amp;oldid=33071&amp;diff=cur  Not sure if I like chapter title. I saw this terminology used under the “Rotation of Entry Guards”  chpater and I tried to copy the language.   On occasion, users may be tempted to create a new Whonix-Gateway (Qubes-Whonix: sys-whonix) because:   One of the fallback primary entry guards. A configured bridge. Possibly combine tunnels with Tor. Creating a fre..." />
<meta property="article:published_time" content="2018-04-05T02:08:49+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="../34772459.html?page=27">
        <link rel="next" href="../3477219f.html?page=29">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../3477.html">Long Wiki Edits Thread</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/website/6.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #0E76BD'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Website</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/iry'><span itemprop='name'>iry</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-03T16:04:54Z' class='post-time'>
                April 3, 2018,  4:04pm
              </time>
              <meta itemprop='dateModified' content='2018-04-03T16:04:54Z'>
          <span itemprop='position'>#556</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="555" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Anything else you want to highlight feature-wise?</p>
</blockquote>
</aside>
<p>Thank you for your awesome work! It looks great to me!</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/0brand'><span itemprop='name'>0brand</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-03T20:30:31Z' class='post-time'>
                April 3, 2018,  8:30pm
              </time>
              <meta itemprop='dateModified' content='2018-04-03T20:30:31Z'>
          <span itemprop='position'>#557</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><code>torjunkie</code></p>
<p>Whonix 14 blog release is impeccable. Great work!</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/0brand'><span itemprop='name'>0brand</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-04T02:15:06Z' class='post-time'>
                April 4, 2018,  2:15am
              </time>
              <meta itemprop='dateModified' content='2018-04-04T21:27:38Z'>
          <span itemprop='position'>#558</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="91" data-topic="4988">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"><a href="../../qubes-whonix-14-0-0-6-9-templatevms-for-r3-2-and-r4-testers-wanted/4988/91">Qubes-Whonix 14.0.0.6.9 TemplateVMs for R3.2 and R4--Testers Wanted!</a>
</div>
<blockquote>
<p>Realized that for greater tester safety, we really should have a step where they explicitly copy &amp; paste the Tor state file from Whonix 13 into the Whonix 14 VM</p>
</blockquote>
</aside>
<p>What do you think about adding this step by step guide to  <a href="../../../../external.html?link=https://whonix.org/wiki/Tor">wiki/Tor</a>? Then have a step in the Whonix 14 testers blog that has users copy and paste Tor State File from sys-whonix-13 to sys-whonix-14.  ( and also has a link to these instructions?)</p>
<p><strong>Copying Tor State to secondary sys-whonix</strong></p>
<p><code>torjunkie</code>: the language in this guide is not complete. Just wanted to get your opinion before I went any further. Aslo these instructions assume sys-whonix is based on Whonix-14 and sys-whonix-13 (obvious)</p>
<ol>
<li>
<p>In <code>sys-whonix</code> stop Tor.</p>
<blockquote>
<p><code>sudo systemctl stop tor@default</code></p>
</blockquote>
</li>
<li>
<p>In <code>sys-whonix</code> remove Tor State File. <em>Note:</em> Its likely that this command will complain that the process is busy. This can be ignored.</p>
<blockquote>
<p><code>sudo rm -r /var/lib/tor</code></p>
</blockquote>
</li>
<li>
<p>In <code>sys-whonix</code>, ensure <code>/var/lib/tor</code> is empty. This command should produce no output.</p>
<blockquote>
<p><code>sudo ls /var/lib/tor</code></p>
</blockquote>
</li>
<li>
<p>In <code>sys-whonix-13</code>, stop tor.</p>
<blockquote>
<p><code>sudo systemctl stop tor@default</code></p>
</blockquote>
</li>
<li>
<p>In <code>sys-whonix-13</code>, copy the Tor State File to <code>sys-whonix</code>. Users must upgrade to a root prompt (root@host:# ) for the command to exit successfully.</p>
<p><em>Note:</em> If users encounter this error it can be ignored. <em>qfile-agent: Fatal error: stat “VM” (error type: No such file or directory)</em> . Hit “<em>OK</em>” when prompted</p>
<blockquote>
<p><code>sudo su</code></p>
</blockquote>
<blockquote>
<p><code>qvm-copy /var/lib/tor sys-whonix</code></p>
</blockquote>
</li>
<li>
<p>In <code>sys-whonix</code>, list the <em>QubesIncoming</em> directory to ensure Tor State File was copied over successfully.</p>
<blockquote>
<p><code>ls ~/QubesIncoming/sys-whonix-13/tor</code></p>
</blockquote>
<p>The output should include these files:</p>
<p><code>cached-certs cached-microdescs lock</code><br>
<code>cached-microdesc-consensus cached-microdescs.new state</code></p>
</li>
<li>
<p>In <code>sys-whonix</code>, move Tor State File to <code>/var/lib/tor</code> .</p>
<blockquote>
<p><code>sudo mv ~/QubesIncoming/sys-whonix-13/tor/* /var/lib/tor</code></p>
</blockquote>
</li>
<li>
<p>In <code>sys-whonix</code>, ensure all files listed in step 6 are now in <code>/var/lib/tor</code> and have the proper ownership. For Tor to function, files in this directory should be owned by <code>debian-tor</code> . If files do not have proper ownership, proceed to step 9. Otherwise skip to step 10.</p>
<blockquote>
<p><code>sudo ls -l /var/lib/tor</code></p>
</blockquote>
<p><em>Note:</em> The first 2 lines of the output should look similar to this. Notice the proper file ownership ‘<code>debian-tor debian-tor</code>’.</p>
<p><code>-rw------- 1 debian-tor debian-tor 20442 Feb 22 21:22 cached-certs</code><br>
<code>-rw------- 1 debian-tor debian-tor 1985454 Apr 4 00:04 cached-microdesc-consensus</code></p>
</li>
<li>
<p>In <code>sys-whonix</code>, change ownership of the Tor State File to <code>debian-tor</code>.</p>
<blockquote>
<p><code>sudo chown debian-tor: -R /var/lib/tor</code></p>
</blockquote>
</li>
<li>
<p>In <code>sys-whonix</code>, verify Tor State file is owned by <code>debian-tor</code>.</p>
<blockquote>
<p><code>sudo ls -l /var/lib/tor</code></p>
</blockquote>
</li>
<li>
<p>In <code>sys-whonix</code>, start Tor.</p>
<blockquote>
<p><code>sudo systemctl start tor@default</code></p>
</blockquote>
</li>
<li>
<p>In <code>sys-whonix</code>, verify Tor is functioning properly.</p>
<blockquote>
<p><code>whonixcheck -v</code></p>
</blockquote>
</li>
</ol>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../qubes-whonix-14-0-0-6-9-templatevms-for-r3-2-and-r4-testers-wanted/4988.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../qubes-whonix-14-0-0-6-9-templatevms-for-r3-2-and-r4-testers-wanted/4988.html'>
                      <span itemprop='name'>Qubes-Whonix 14.0.0.6.9 TemplateVMs for R3.2 and R4--Testers Wanted!</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-04T08:25:45Z' class='post-time'>
                April 4, 2018,  8:25am
              </time>
              <meta itemprop='dateModified' content='2018-04-04T08:25:45Z'>
          <span itemprop='position'>#559</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Excellent work 0brand and great idea to add to the wiki!</p>
<p>Then your blog post only needs to refer to the wiki link. i.e. something like -&gt;</p>
<blockquote>
<p>Step X: Copy the Whonix 13 Tor state to the secondary sys-whonix</p>
<p>Users are recommended to copy their Whonix 13 Tor state to the secondary (Whonix 14) sys-whonix to maintain the same Tor entry guard and defend against tracking attempts by advanced adversaries.</p>
<p>Follow the instructions at the following link:</p>
<p><a href="../../../../external.html?link=http://whonix.org/wiki/XXXXXX">whonix.org/wiki/XXXXXX</a></p>
</blockquote>
<p>Note:</p>
<ul>
<li>Steps 1 &amp; 2 have same commands.</li>
<li>The rest of it looks logical to me, but I haven’t tested it.</li>
</ul>
<p>Does it work okay for you?</p>
<p>These instructions can live under the Advanced Topics section of the Tor chapter with an appropriate title.</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/0brand'><span itemprop='name'>0brand</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-04T10:22:27Z' class='post-time'>
                April 4, 2018, 10:22am
              </time>
              <meta itemprop='dateModified' content='2018-04-04T20:26:25Z'>
          <span itemprop='position'>#560</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="559" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Steps 1 &amp; 2 have same commands.<br>
The rest of it looks logical to me, but I haven’t tested it.</p>
</blockquote>
</aside>
<p>I moved a few things around to group <code>sys-whonix</code> commands together after this guide was copied to this thread. Didn’t realize step 2 was a repeat of step 1. Fixed!</p>
<p>Thanks for pointing that out!</p>
<aside class="quote" data-post="559" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Does it work okay for you?</p>
</blockquote>
</aside>
<p>Yes, tested:</p>
<p>sys-whonix-13 -&gt; sys-whonix-13<br>
sys-whonix-14 -&gt; sys-whonix-14<br>
sys-whonix-13 -&gt; sys-whonix-14 and visa versa</p>
<p>The first round of testing I kept getting errors and Tor wouldn’t start. After about an hour and a half I realized my mistake. I went back and ran <code>sudo chown debian-tor: -R /var/lib/tor</code> in all sys-whonix VMs and Tor functioned properly. <img src="../../../images/emoji/twitter/smileae52.png?v=5" title=":smile:" class="emoji" alt=":smile:"></p>
<p>I should have this guide completed later today and the testers blog updated.</p>
<p><s>Or should I wait until this wiki entry is approved by Patrick before adding this step to testers blog?</s></p>
<p>I will add (<em>Step X: Copy the Whonix 13 Tor state to the secondary sys-whonix</em>) to the blog post with a note stating instructions will be added shortly to the wiki?</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/0brand'><span itemprop='name'>0brand</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-05T02:08:49Z' class='post-time'>
                April 5, 2018,  2:08am
              </time>
              <meta itemprop='dateModified' content='2018-04-05T09:47:48Z'>
          <span itemprop='position'>#561</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Chapter “Copy Tor State File to Fresh sys-whonix VM” added to wiki/Tor.</p>
<p><a href="../../../../external.html?link=https://whonix.org/wiki/w/index.php?title=Tor&amp;oldid=33071&amp;diff=cur">https://whonix.org/wiki/w/index.php?title=Tor&amp;oldid=33071&amp;diff=cur</a></p>
<p>Not sure if I like chapter title. I saw this terminology used under the “Rotation of Entry Guards”  chpater and I tried to copy the language.</p>
<blockquote>
<p>On occasion, users may be tempted to create a new Whonix-Gateway (Qubes-Whonix: sys-whonix) because:</p>
<ul>
<li>One of the fallback primary entry guards.</li>
<li>A configured bridge.</li>
<li>Possibly combine tunnels with Tor.</li>
<li>Creating a fresh Whonix-Gateway (sys-whonix), and copying across the Tor state file.</li>
</ul>
</blockquote>
<p>Also, In the instructions, what would be the correct terminology to use - Tor state, Tor state file(s), Tor state folder? It seem different terminology should be used depending on the context of the instructions.</p>
<p>If any changes are necessary please let me know.</p>
<p>Almost forgot, <a href="../../qubes-whonix-14-0-0-6-9-templatevms-for-r3-2-and-r4-testers-wanted/4988.html">Qubes-Whonix 14 Testers blog </a> instructions have been update.</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-05T04:32:00Z' class='post-time'>
                April 5, 2018,  4:32am
              </time>
              <meta itemprop='dateModified' content='2018-04-05T04:32:00Z'>
          <span itemprop='position'>#562</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Very good!</p>
<p>torjunkie:</p>
<blockquote>
<blockquote>
<p>sandbox: Failed to find Adwaita gtk-2.0 theme.</p>
</blockquote>
<p>Since this theme is probably installed in standard Tor Browser (the running Sandboxed Tor Browser instance does look a little different), perhaps we should recommend users install it, as it may otherwise pose a fingerprinting vector(?).</p>
</blockquote>
<p>Guess:<br>
Good to have it installed (from Debian package sources), if avaialble.</p>
<p>Should:<br>
Not matter.</p>
<p>Real answer:<br>
Only Tor Browser developers are capable to answer that.</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-05T11:51:10Z' class='post-time'>
                April 5, 2018, 11:51am
              </time>
              <meta itemprop='dateModified' content='2018-04-05T11:51:10Z'>
          <span itemprop='position'>#563</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Excellent work 0brand - I think I can happily retire now <img src="../../../images/emoji/twitter/smileae52.png?v=5" title=":smile:" class="emoji" alt=":smile:"></p>
<p>I edited your stuff, plus the rest of the Tor chapter, which had various entries (not yours) that was irritating me for language/expression.</p>
<aside class="quote" data-post="561" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/0/ec9cab/40.png" class="avatar"> 0brand:</div>
<blockquote>
<p>Also, In the instructions, what would be the correct terminology to use - Tor state, Tor state file(s), Tor state folder? It seem different terminology should be used depending on the context of the instructions.</p>
</blockquote>
</aside>
<p>I was thinking the exact same thing. I’m not sure. I gather “Tor state” is the generic expression, but I left it mostly as is.</p>
<aside class="quote" data-post="561" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/0/ec9cab/40.png" class="avatar"> 0brand:</div>
<blockquote>
<p>Almost forgot, Qubes-Whonix 14 Testers blog  instructions have been update.</p>
</blockquote>
</aside>
<p>Thanks again, that is very useful to have extra steps in there.</p>
<aside class="quote" data-post="562" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Guess:</p>
<p>Good to have it installed (from Debian package sources), if avaialble.</p>
</blockquote>
</aside>
<p>OK - will add a step there when I get a chance.</p>
<p>Reminder to self: also fix AppArmor parameter for Qubes-Whonix.</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/0brand'><span itemprop='name'>0brand</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-05T14:18:47Z' class='post-time'>
                April 5, 2018,  2:18pm
              </time>
              <meta itemprop='dateModified' content='2018-04-05T14:18:47Z'>
          <span itemprop='position'>#564</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="563" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>I edited your stuff, plus the rest of the Tor chapter, which had various entries (not yours) that was irritating me for language/expression.</p>
</blockquote>
</aside>
<p>The Tor chapter looks awesome! Thanks for the help!</p>
<aside class="quote" data-post="563" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Reminder to self: also fix AppArmor parameter for Qubes-Whonix.</p>
</blockquote>
</aside>
<p>Reminder to myself: fix Apparmor parameters before torjunkie gets to it. <img src="../../../images/emoji/twitter/smileae52.png?v=5" title=":smile:" class="emoji" alt=":smile:"></p>
<p>Sorry about that. I was a little side tracked with the Tor wiki chapter.</p>
<p>That will be completed and ready for your review later on today.</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/0brand'><span itemprop='name'>0brand</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-05T23:40:19Z' class='post-time'>
                April 5, 2018, 11:40pm
              </time>
              <meta itemprop='dateModified' content='2018-04-05T23:54:13Z'>
          <span itemprop='position'>#565</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="564" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/0/ec9cab/40.png" class="avatar"> 0brand:</div>
<blockquote>
<p>Reminder to myself: fix Apparmor parameters before torjunkie gets to it. <img src="../../../images/emoji/twitter/smileae52.png?v=5" title=":smile:" class="emoji" alt=":smile:"></p>
</blockquote>
</aside>
<p>Done!</p>
<p><a href="../../../../external.html?link=https://whonix.org/w/index.php?title=Template:Qubes_AppArmor&amp;oldid=33430&amp;diff=cur">https://whonix.org/w/index.php?title=Template:Qubes_AppArmor&amp;oldid=33430&amp;diff=cur</a></p>
<p>Changed Apparmor <code>qvm-prefs</code> option from ‘<code>-l</code>’ to ‘<code>-g</code>’ . I didn’t see the need to change the ‘<code>-s</code>’ option for R4 since it is ignored.</p>
<p>Language changes were necessary in the introduction IMO. It was very hard to understand. Plus minor language changes in the instructions.</p>
<p>I’m sure the template could use further changes/polishing. Let me know if I can help!</p>
<p><strong>Off topic:</strong></p>
<p>Just saw this post by Patrick. Should the new chapter in wiki/Tor that was just created use this command to stop Tor? This command works in Whonix 13 ( just tested it ). Maybe wait for his guidance when he reviews the new chapter?</p>
<aside class="quote" data-post="18" data-topic="2456">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"><a href="../../whonixcheck-whonix-14-ideas/2456/18">whonixcheck Whonix 14 ideas</a>
</div>
<blockquote>
<p>Btw… The following also stops tor@default.service.</p>
<p>sudo systemctl stop tor.service</p>
<p>Maybe we shouldn’t tell users to engage with sudo systemctl restart tor@default.service directly but use sudo systemctl restart tor.service instead. (And perhaps the .service can be dropped for simplicity.)</p>
</blockquote>
</aside>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-06T06:04:55Z' class='post-time'>
                April 6, 2018,  6:04am
              </time>
              <meta itemprop='dateModified' content='2018-04-06T06:04:55Z'>
          <span itemprop='position'>#566</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><code>Use /lib/systemd/system/tor@service.d instead</code><br>
<a href="../../../../external.html?link=https://phabricator.whonix.org/T785" class="onebox" target="_blank">https://phabricator.whonix.org/T785</a></p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/0brand'><span itemprop='name'>0brand</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-06T10:19:01Z' class='post-time'>
                April 6, 2018, 10:19am
              </time>
              <meta itemprop='dateModified' content='2018-04-06T10:19:01Z'>
          <span itemprop='position'>#567</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Noticed <code>sys-whonix-A</code> and <code>sys-whonix-B</code> in “Copy the Tor State File to Another sys-whonix Instance” steps 5-12 need to be swaped. No need to look who made the mistake. It was me of course <img src="../../../images/emoji/twitter/blushae52.png?v=5" title=":blush:" class="emoji" alt=":blush:"></p>
<p>I will fix later on today along with using <code>/lib/systemd/system/tor@service.d</code> , as per Patrick.</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-06T12:00:00Z' class='post-time'>
                April 6, 2018, 12:00pm
              </time>
              <meta itemprop='dateModified' content='2018-04-06T12:00:00Z'>
          <span itemprop='position'>#568</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>0brand:</p>
<blockquote>
<p>Noticed <code>sys-whonix-A</code> and <code>sys-whonix-B</code> in “Copy the Tor State File to Another sys-whonix Instance” steps 5-12 need to be swaped. No need to look who made the mistake. It was me of course <img src="../../../images/emoji/twitter/blushae52.png?v=5" title=":blush:" class="emoji" alt=":blush:"></p>
<p>I will fix later on today along with using <code>/lib/systemd/system/tor@service.d</code> , as per Patrick.</p>
</blockquote>
<p>It’s a research ticket. It’s not yet clear we want that. Needs testing /<br>
figuring out. If it works, then all ok.</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-06T12:05:14Z' class='post-time'>
                April 6, 2018, 12:05pm
              </time>
              <meta itemprop='dateModified' content='2018-04-06T17:25:22Z'>
          <span itemprop='position'>#569</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><strong>OnionShare in Qubes-Whonix 14</strong></p>
<p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a> - please point out the faults in this method below if it is unsafe or not canonical.</p>
<p><strong>Building OnionShare from Source</strong></p>
<p>Whonix recommends against APT pinning because it has previously broken functionality. For example, on one occasion templates thought they were not connected to Whonix Gateway; see <a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/APT_Pinning">https://www.whonix.org/wiki/Dev/APT_Pinning</a>.</p>
<p>Therefore, this procedure builds OnionShare from source code based on Micah Lee’s instructions; see <a href="../../../../external.html?link=https://github.com/micahflee/onionshare/blob/master/BUILD.md#gnulinux">https://github.com/micahflee/onionshare/blob/master/BUILD.md#gnulinux</a></p>
<p>To install OnionShare in Whonix 14:</p>
<p><strong>1.</strong> Create an <code>anon-onionshare</code> AppVM based on the <code>whonix-ws</code> (14) template.</p>
<p><strong>2.</strong> Open a terminal and navigate to the persistent home directory; this avoids polluting the TemplateVM upon which it is based.</p>
<blockquote>
<p>cd /home/user</p>
</blockquote>
<p><strong>3.</strong> Install git which is not available by default in the AppVM.</p>
<blockquote>
<p>sudo apt-get install git</p>
</blockquote>
<p><strong>4.</strong> Clone the OnionShare directory.</p>
<blockquote>
<p>git clone <a href="../../../../external.html?link=https://github.com/micahflee/onionshare.git">https://github.com/micahflee/onionshare.git</a></p>
</blockquote>
<p><strong>5.</strong> Change into the OnionShare directory.</p>
<blockquote>
<p>cd onionshare</p>
</blockquote>
<p><strong>6.</strong> Retrieve Micah Lee’s PGP key using the long key ID.</p>
<p><em>Note:</em> This key ID is taken from <a href="../../../../external.html?link=http://www.micahflee.com/">www.micahflee.com</a></p>
<blockquote>
<p>gpg --keyserver <a href="../../../../external.html?link=http://pool.sks-keyservers.net/">pool.sks-keyservers.net</a> --recv-keys 0x927F419D7EC82C2F149C1BD1403C2657CD994F73</p>
</blockquote>
<p><strong>7.</strong> Examine the available git tags, and verify the latest version and its commit (v1.3 at the time of writing). Good signature messages should appear for each verify command below.</p>
<blockquote>
<p>git tag</p>
<p>git verify-tag v1.3</p>
<p>git verify-commit v1.3^{commit}</p>
</blockquote>
<p><strong>8.</strong> Install OnionShare dependencies.</p>
<p><em>Warning:</em> Do not proceed unless signatures were good for the two git verification steps.</p>
<p>The user must install the following dependencies.</p>
<blockquote>
<p>sudo apt install -y build-essential fakeroot python3-all python3-stdeb dh-python python3-flask python3-stem python3-pyqt5 python-nautilus python3-pytest obfs4proxy</p>
</blockquote>
<p><strong>9.</strong> Extend the onion-grater whitelist on <code>sys-whonix</code> (14).</p>
<p>Steps 9-10 are sourced from <a href="../../../../external.html?link=http://kkkkkkkkkk63ava6.onion/wiki/File_Sharing#onionshare">http://kkkkkkkkkk63ava6.onion/wiki/File_Sharing#onionshare</a></p>
<p>In <code>sys-whonix</code> (14), open Konsole and create the following directory.</p>
<blockquote>
<p>sudo mkdir -p /usr/local/etc/onion-grater-merger.d/</p>
</blockquote>
<p>Symlink the onion-grater profile to the onion-grater settings folder.</p>
<blockquote>
<p>sudo ln -s /usr/share/onion-grater-merger/examples/40_onionshare.yml /usr/local/etc/onion-grater-merger.d/</p>
</blockquote>
<p>Restart onion-grater.</p>
<blockquote>
<p>sudo service onion-grater restart</p>
</blockquote>
<p><strong>10.</strong> Modify the <code>anon-onionshare</code> user firewall settings and reload them.</p>
<p>In Konsole, first make sure the folder <em>/rw/config/whonix_firewall.d</em> exists.</p>
<blockquote>
<p>sudo mkdir -p /rw/config/whonix_firewall.d</p>
</blockquote>
<p>Create the necessary <code>user.conf</code> file.</p>
<blockquote>
<p>sudo nano /etc/whonix_firewall.d/50_user.conf</p>
</blockquote>
<p>Add ports that are required by OnionShare.</p>
<blockquote>
<p>EXTERNAL_OPEN_PORTS+=" $(seq 17600 17659) "</p>
</blockquote>
<p>Save and exit.</p>
<p><strong>11.</strong> Start the OnionShare GUI in <code>anon-onionshare</code>.</p>
<blockquote>
<p>./dev_scripts/onionshare-gui</p>
</blockquote>
<p><strong>12.</strong> Select the settings button/icon (cog symbol) in the OnionShare GUI.</p>
<p>Under “How should OnionShare connect to Tor?” select “Connect using socket file”, and set the socket file to <em>/var/run/tor/control</em>.</p>
<p>Under “Tor authentication options” select “No authentication, or cookie authentication”.</p>
<p><strong>13.</strong> Test the OnionShare settings.</p>
<p>Click the “Test Settings” button. If all steps were completed correctly, Tor will successfully connect.</p>
<p>The GUI should say it supports both ephemeral onion services and stealth onion services.</p>
<p>Check “Create stealth onion services” to make OnionShare operations more secure.</p>
<p><strong>Actual Test</strong></p>
<p>After doing all these steps above, it worked! <img src="../../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"> <img src="../../../images/emoji/twitter/tadaae52.png?v=5" title=":tada:" class="emoji" alt=":tada:"></p>
<p>I was able to share a dummy file with one sentence of text in it, that was made available at a random onion address.</p>
<p>The same instructions can be used for non-Qubes-Whonix, except  each instance of <code>sys-whonix</code> and <code>anon-onionshare</code> is substituted with Whonix-Gateway and Whonix-Workstation instead.</p>
<p><strong>Conclusion</strong></p>
<p>OnionShare, a piece of cake in Whonix <img src="../../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
<p><strong>AppArmor Consideration</strong></p>
<p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/troubadour">@Troubadour</a> - what about the possibility of implementing this OnionShare AppArmor profile in Whonix?</p>
<p><a href="../../../../external.html?link=https://github.com/micahflee/onionshare/commit/6cceac3b3eca9ce2cc13cde4d16f7291b565c720">https://github.com/micahflee/onionshare/commit/6cceac3b3eca9ce2cc13cde4d16f7291b565c720</a></p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/0brand'><span itemprop='name'>0brand</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-07T00:59:24Z' class='post-time'>
                April 7, 2018, 12:59am
              </time>
              <meta itemprop='dateModified' content='2018-04-07T00:59:24Z'>
          <span itemprop='position'>#570</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Tor wiki chapter “<em>Copy the Tor State File to Another sys-whonix Instance</em>”</p>
<p>Mistakes fixed</p>
<p><a href="../../../../external.html?link=https://whonix.org/w/index.php?title=Tor&amp;oldid=33454&amp;diff=cur">https://whonix.org/w/index.php?title=Tor&amp;oldid=33454&amp;diff=cur</a></p>
<hr>
<p>TODO</p>
<ol>
<li>
<p>Anything that take priority as per Patrick, torjunkie</p>
</li>
<li>
<p>Whonix 14 Call for testers blog post.  Update as needed</p>
</li>
<li>
<p><a href="../../../../external.html?link=https://www.whonix.org/wiki/Security_in_Real_World">https://www.whonix.org/wiki/Security_in_Real_World</a></p>
</li>
</ol>
<ul>
<li>think of a more catchy page name:</li>
<li>also more catchy og:description</li>
</ul>
<ol start="4">
<li><a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/TimeSync#Clock_Correlation_Attack">https://www.whonix.org/wiki/Dev/TimeSync#Clock_Correlation_Attack</a></li>
</ol>
<ul>
<li>
<p>Come up with a new name for the attack as per: <a href="494.html">Long Wiki Edits Thread</a></p>
<p>This all I have so far. <img src="../../../images/emoji/twitter/grimacingae52.png?v=5" title=":grimacing:" class="emoji" alt=":grimacing:">  Could use some ideas.</p>
<ul>
<li>domU clock skew correlation through domX compromise</li>
<li>clock skew correlation through sister domain compromise</li>
</ul>
</li>
</ul>
<ol start="5">
<li>
<p><a href="../../../../external.html?link=https://whonix.org/wiki/System_Hardening_Checklist#Onionizing_Repositories">https://whonix.org/wiki/System_Hardening_Checklist#Onionizing_Repositories</a></p>
<ul>
<li>add instructions to change repos back to using <a href="../../../../external.html?link=http://uri/">http://URI</a> (clearnet) servers.</li>
<li>good to have if <em>.onions</em> go down again. Also for users with slow connections and can’t update system etc.</li>
</ul>
</li>
<li>
<p>Fix broken link user  reported in <a href="../../multiple-tor-browsers-safe-setup-in-whonix/5024/3.html">Multiple Tor Browsers safe setup in Whonix</a></p>
</li>
<li>
<p>Add Qubes specific install instructions for “Using Tor Browser without Tor” chapter</p>
</li>
</ol>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-07T06:57:00Z' class='post-time'>
                April 7, 2018,  6:57am
              </time>
              <meta itemprop='dateModified' content='2018-04-07T06:57:00Z'>
          <span itemprop='position'>#571</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>torjunkie:</p>
<blockquote>
<p><strong>OnionShare in Whonix 14</strong></p>
<p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a> - please point out the faults in this method below if it is unsafe or not canonical.</p>
<p><strong>Building OnionShare from Source</strong></p>
<p>Whonix recommends against APT pinning because it has previously broken functionality.</p>
</blockquote>
<p>No. I wouldn’t go so far. Pinning is fine. Just needs to be done right.<br>
Not using generic codenames (stable, testing). Using specific codenames<br>
(jessie, stretch, buster).</p>
<blockquote>
<p>For example, on one occasion, templates thought they were not connected to Whonix Gateway; see <a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/APT_Pinning">https://www.whonix.org/wiki/Dev/APT_Pinning</a>.</p>
</blockquote>
<p>Unrelated to apt pinning.</p>
<blockquote>
<p>Therefore, this test builds OnionShare from source code based on Micah Lee’s instructions; see <a href="../../../../external.html?link=https://github.com/micahflee/onionshare/blob/master/BUILD.md#gnulinux">https://github.com/micahflee/onionshare/blob/master/BUILD.md#gnulinux</a></p>
<p>To install OnionShare in Whonix 14:</p>
<p><strong>1.</strong> Create an <code>anon-onionshare</code> AppVM based on the <code>whonix-ws</code> (14) template.</p>
</blockquote>
<p>Ok, it’s user choice (optional) but good practice.</p>
<blockquote>
<p><strong>2.</strong> Open a terminal and switch to the persistent directory; this avoids polluting the TemplateVM upon which it is based.</p>
<blockquote>
<p>cd /home/user</p>
</blockquote>
<p><strong>3.</strong> Install git which is not available by default in the AppVM.</p>
<blockquote>
<p>sudo apt-get install git</p>
</blockquote>
<p><strong>4.</strong> Clone the OnionShare directory.</p>
<blockquote>
<p>git clone <a href="../../../../external.html?link=https://github.com/micahflee/onionshare.git">https://github.com/micahflee/onionshare.git</a></p>
</blockquote>
<p><strong>5.</strong> Change into the OnionShare directory.</p>
<blockquote>
<p>cd onionshare</p>
</blockquote>
<p><strong>6.</strong> Receive Micah Lee’s PGP key using the long-ID key version.</p>
<p><em>Note:</em> This key ID is taken from <a href="../../../../external.html?link=http://www.micahflee.com/">www.micahflee.com</a></p>
<blockquote>
<p>gpg --keyserver <a href="../../../../external.html?link=http://pool.sks-keyservers.net/">pool.sks-keyservers.net</a> --recv-keys 0x927F419D7EC82C2F149C1BD1403C2657CD994F73</p>
</blockquote>
<p><strong>7.</strong> Examine the git tags available, and verify the latest version and it’s commit (v1.3 at the time of writing). Good signature messages should appear for the second and third steps.</p>
<blockquote>
<p>git tag</p>
<p>git verify-tag v1.3</p>
<p>git verify-commit v1.3^{commit}</p>
</blockquote>
<p><strong>8.</strong> Install OnionShare dependencies.</p>
<p><em>Warning:</em> Do not proceed unless signatures were good for the two git verification steps.</p>
<p>The user must install the following dependencies, except Tor, which is already installed by Whonix.</p>
<blockquote>
<p>sudo apt install -y build-essential fakeroot python3-all python3-stdeb dh-python python3-flask python3-stem python3-pyqt5 python-nautilus python3-pytest obfs4proxy</p>
</blockquote>
<p><strong>9.</strong> Extend the onion-grater whitelist on <code>whonix-gw</code> (14).</p>
<p>Follow the directions from <a href="../../../../external.html?link=http://kkkkkkkkkk63ava6.onion/wiki/File_Sharing#onionshare">http://kkkkkkkkkk63ava6.onion/wiki/File_Sharing#onionshare</a></p>
</blockquote>
<p>Ok.</p>
<blockquote>
<p>That is, first create a new directory via Konsole in whonix-gw.</p>
</blockquote>
<p>Can be done in sys-whonix. (Covered by bind-dirs.) (Maybe onion-grater<br>
add wiki template needs improvement?)</p>
<p>Doing in whonix-gw TemplateVM is okay too but then it applies for all<br>
Whonix-Gateway ProxyVMs based on sys-whonix. Probably not needed.</p>
<blockquote>
<blockquote>
<p>sudo mkdir -p /usr/local/etc/onion-grater-merger.d/</p>
</blockquote>
<p>Symlink the onion-grater profile to the onion-grater settings folder.</p>
<blockquote>
<p>sudo ln -s /usr/share/onion-grater-merger/examples/40_onionshare.yml /usr/local/etc/onion-grater-merger.d/</p>
</blockquote>
</blockquote>
<p>Please use the existing wiki template,</p>
<blockquote>
<p>Restart onion-grater.</p>
<blockquote>
<p>sudo service onion-grater restart</p>
</blockquote>
<p><strong>10.</strong> Modify the Whonix-Workstation User Firewall Settings and reload them.</p>
<p>In Konsole in <code>whonix-ws</code> (copying instructions from the link above), first make sure the folder <em>/rw/config/whonix_firewall.d</em> exists.</p>
<blockquote>
<p>sudo mkdir -p /rw/config/whonix_firewall.d</p>
</blockquote>
<p>Create the necessary user conf file.</p>
<blockquote>
<p>sudo nano /etc/whonix_firewall.d/50_user.conf</p>
</blockquote>
<p>Add ports that are required by OnionShare.</p>
<blockquote>
<p>EXTERNAL_OPEN_PORTS+=" $(seq 17600 17659) "</p>
</blockquote>
<p>Save and exit.</p>
<p><strong>11.</strong> Start the OnionShare GUI in <code>whonix-ws</code>.</p>
<blockquote>
<p>./dev_scripts/onionshare-gui</p>
</blockquote>
<p><strong>12.</strong> Select the settings button/icon (cog symbol) in the OnionShare GUI.</p>
<p>Under “How should OnionShare connect to Tor?” choose “Connect using socket file”, and set the socket file to <em>/var/run/tor/control</em>.</p>
<p>Under “Tor authentication options” choose “No authentication, or cookie authentication”.</p>
<p><strong>13.</strong> Test the OnionShare settings.</p>
<p>Click the “Test Settings” button. If all has gone well, you should see a successful connection to Tor.</p>
<p>The GUI should say it supports both ephemeral onion services and stealth onion services.</p>
<p>Check “Create stealth onion services” if you want to make OnionShare more secure.</p>
<p><strong>Actual Test</strong></p>
<p>Well I did all these steps above, and it worked! <img src="../../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"> <img src="../../../images/emoji/twitter/tadaae52.png?v=5" title=":tada:" class="emoji" alt=":tada:"></p>
</blockquote>
<p>Good.</p>
<blockquote>
<p>I was able to share a dummy file with one sentence of text in it, that went to a random onion address.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong></p>
<p>I skipped this step below, because OnionShare works anyway. It is unclear why it isn’t needed in Whonix i.e. allowing OnionShare to connect to the system Tor socket file explicitly, but perhaps the GUI step is sufficient:</p>
</blockquote>
<p>Package anon-ws-disable-stacked-tor makes it appear as if Tor is running<br>
in Whonix-Workstation, “Tor emulation”. Even though Tor is not running<br>
there. And forwards to Whonix-Gateway. ( Need of update:<br>
<a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/anon-ws-disable-stacked-tor">https://www.whonix.org/wiki/Dev/anon-ws-disable-stacked-tor</a> )</p>
<blockquote>
<p><a href="../../../../external.html?link=https://github.com/micahflee/onionshare/wiki/Connecting-to-Tor">https://github.com/micahflee/onionshare/wiki/Connecting-to-Tor</a></p>
<blockquote>
<p>sudo usermod -a -G debian-tor username</p>
</blockquote>
</blockquote>
<p>Should be also done already by anon-ws-disable-stacked-tor.</p>
<blockquote>
<p>But, who gives a shit if it works.</p>
<p><strong>Conclusion</strong></p>
<p>OnionShare, a piece of cake in Whonix <img src="../../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
<p><strong>AppArmor Consideration</strong></p>
<p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/troubadour">@Troubadour</a> - what about the possibility of implementing this OnionShare AppArmor profile in Whonix?</p>
<p><a href="../../../../external.html?link=https://github.com/micahflee/onionshare/commit/6cceac3b3eca9ce2cc13cde4d16f7291b565c720">https://github.com/micahflee/onionshare/commit/6cceac3b3eca9ce2cc13cde4d16f7291b565c720</a></p>
</blockquote>
<p>Doesn’t onionshare ship a profile by its own already?</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-07T08:17:29Z' class='post-time'>
                April 7, 2018,  8:17am
              </time>
              <meta itemprop='dateModified' content='2018-04-07T08:17:29Z'>
          <span itemprop='position'>#572</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Some nitpicks…</p>
<p>Maybe change to sys-whonix-old / sys-whonix-new. Better than a and b. Always clearer.</p>
<p>sys-whonix-new: after stopping Tor, also delete Tor state folder.</p>
<p>Why: imagine sys-whonix-new has a Tor state file that sys-whonix-old did not have. In that case it would not be a clean migration of the same. It would have an extraneous file.</p>
<p>Is <code>sudo su</code> required? Would <code>sudo</code> work?</p>
<p><code>sudo ls -l /var/lib/tor</code> - not useful to run before fixing permissions using <code>chown</code>. After using <code>chown</code> usually we shouldn’t need to check. I think we can trust <code>chown</code> if no errors were shown. <code>sudo ls -l /var/lib/tor</code> is only useful for debugging. (Perhaps keep as footnote.)</p>
<p><code>whonixcheck -v</code>: the <code>-v</code> shouldn’t be encouraged for most users. It’s non-verbose by default to keep the generated confusion from any whonixcheck output low. Please mention <code>[[whonixcheck]]</code> (where <code>-v</code> could be documented.).</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-07T08:18:30Z' class='post-time'>
                April 7, 2018,  8:18am
              </time>
              <meta itemprop='dateModified' content='2018-04-07T08:18:30Z'>
          <span itemprop='position'>#573</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Clarification: stopping Tor is required in both VMs old and new. Deleting Tor state files is required in new VM.</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-07T16:26:37Z' class='post-time'>
                April 7, 2018,  4:26pm
              </time>
              <meta itemprop='dateModified' content='2018-04-07T16:26:37Z'>
          <span itemprop='position'>#574</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>OnionShare wiki entry -&gt; Done.</p>
<p>Is this page linked on the main documentation page somewhere?</p>
<p>Anyway, will create the draft of the Whonix 14 blog post tomorrow, now that this is finally done. It will be ready for publishing EXCEPT for the date field right at the top which has April XX at the moment.</p>
<p>Then, I’m moving onto tempest’s encrypted email stuff for the blank wiki page I created already. Should be relatively easy cut and paste job (?).</p>
<aside class="quote" data-post="570" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/0/ec9cab/40.png" class="avatar"> 0brand:</div>
<blockquote>
<p>Anything that take priority as per Patrick, torjunkie</p>
</blockquote>
</aside>
<p>Buddy, you do anything you like - your contributions are very much valued. <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Editing is a bug, once you get it, it’s hard to shake…</p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/0brand'><span itemprop='name'>0brand</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3477.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-08T02:34:53Z' class='post-time'>
                April 8, 2018,  2:34am
              </time>
              <meta itemprop='dateModified' content='2018-04-09T00:33:01Z'>
          <span itemprop='position'>#575</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="572" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Maybe change to sys-whonix-old / sys-whonix-new</p>
</blockquote>
</aside>
<p>Done!</p>
<aside class="quote" data-post="572" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Is sudo su required? Would sudo work?</p>
</blockquote>
</aside>
<p>It only needs <code>sudo</code>. When first tested it required <code>sudo su</code>. I could have made an error.</p>
<aside class="quote" data-post="572" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Please mention [[whonixcheck]] (where -v could be documented.).</p>
</blockquote>
</aside>
<aside class="quote" data-post="572" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>sudo ls -l /var/lib/tor is only useful for debugging. (Perhaps keep as footnote.)</p>
</blockquote>
</aside>
<p>Done!</p>
<aside class="quote" data-post="572" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>sys-whonix-new: after stopping Tor, also delete Tor state folder.</p>
</blockquote>
</aside>
<p>Done!</p>
<p>After stopping Tor, <code>/var/lib/tor</code> had to be unmounted before it could be removed. When moving new Tor folder back into <code>/var/lib</code>, the new folder did not need to be mounted for Tor to start. Should it be mounted anyways?</p>
<p><strong>New steps</strong> (note: some of the comments in the actual wiki are excluded for simplicity)</p>
<p><strong>1.</strong> In <code>sys-whonix-new</code>, stop Tor</p>
<blockquote>
<p><code>sudo systemctl stop tor@default</code></p>
</blockquote>
<p><strong>2.</strong> In <code>sys-whonix-new</code>, remove the Tor state folder. First  the /var/lib/tor directory must be unmounted</p>
<blockquote>
<p><code>sudo umount /var/lib/tor</code></p>
</blockquote>
<blockquote>
<p><code>sudo rm -r /var/lib/tor</code></p>
</blockquote>
<p><strong>3.</strong> In <code>sys-whonix-old,</code> stop Tor</p>
<blockquote>
<p><code>sudo systemctl stop tor@default</code></p>
</blockquote>
<p><strong>4.</strong> In <code>sys-whonix-old</code>, copy the Tor state file across to <code>sys-whonix-new</code></p>
<blockquote>
<p><code>sudo qvm-copy /var/lib/tor sys-whonix-new</code></p>
</blockquote>
<p><strong>5.</strong> In <code>sys-whonix-new</code>, list the QubesIncoming directory to ensure the Tor state file was copied over successfully.</p>
<blockquote>
<p><code>ls ~/QubesIncoming/sys-whonix-old/tor</code></p>
</blockquote>
<p><strong>6.</strong> In <code>sys-whonix-new</code>, move the newly copied Tor state file to /var/lib/tor</p>
<blockquote>
<p><code>sudo mv ~/QubesIncoming/sys-whonix-old/tor /var/lib</code></p>
</blockquote>
<p><strong>7.</strong> In <code>sys-whonix-new</code>, change ownership of all files in the Tor state folder to debian-tor</p>
<blockquote>
<p><code>sudo chown -R debian-tor:debian-tor /var/lib/tor</code></p>
</blockquote>
<p><strong>8.</strong> In <code>sys-whonix-new</code>, start Tor</p>
<blockquote>
<p><code>sudo systemctl start tor@default</code></p>
</blockquote>
<p><strong>9.</strong> In <code>sys-whonix-new</code>, run whonixcheck to verify Tor is functioning properly</p>
<blockquote>
<p><code>whonixcheck</code></p>
</blockquote>
<p><a href="../../../../external.html?link=https://whonix.org/w/index.php?title=Tor&amp;oldid=33463&amp;diff=cur">https://whonix.org/w/index.php?title=Tor&amp;oldid=33463&amp;diff=cur</a></p>
<hr>
<aside class="quote" data-post="574" data-topic="3477">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>Editing is a bug, once you get it, it’s hard to shake…</p>
</blockquote>
</aside>
<p>Knew I was in trouble when I started carrying around a pocket notebook to jot down ideas for content throughout the day. <img src="../../../images/emoji/twitter/grinae52.png?v=5" title=":grin:" class="emoji" alt=":grin:"></p>
        </div>

        <meta itemprop='headline' content='Long Wiki Edits Thread'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="../34772459.html?page=27">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../3477219f.html?page=29">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
