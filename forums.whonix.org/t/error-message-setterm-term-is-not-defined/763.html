<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Error Message: setterm: $TERM is not defined - Qubes-Whonix - Whonix Forum</title>
    <meta name="description" content="For the new Whonix experimental templates from the Qubes repo: 

In Dom0, when running &amp;quot;qvm-&amp;quot; commands [1] specifically upon Whonix VMs, such as &amp;quot;qvm-start&amp;quot;, &amp;quot;qvm-run&amp;quot;, etc, it outputs 2 lines of the following error, lik&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="763.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Error Message: setterm: $TERM is not defined&#39;" href="763.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/error-message-setterm-term-is-not-defined/763" />
<meta name="twitter:url" content="https://forums.whonix.org/t/error-message-setterm-term-is-not-defined/763" />
<meta property="og:title" content="Error Message: setterm: $TERM is not defined" />
<meta name="twitter:title" content="Error Message: setterm: $TERM is not defined" />
<meta property="og:description" content="For the new Whonix experimental templates from the Qubes repo:  In Dom0, when running “qvm-” commands [1] specifically upon Whonix VMs, such as “qvm-start”, “qvm-run”, etc, it outputs 2 lines of the following error, like this…  setterm: $TERM is not defined. setterm: $TERM is not defined. For example, if I run the following in the Dom0 terminal:  qvm-run --pass-io whonix-workstation &#39;date&#39; it outputs:  setterm: $TERM is not defined. setterm: $TERM is not defined. Sat Dec 25 12:00:00 UTC 2014 Thi..." />
<meta name="twitter:description" content="For the new Whonix experimental templates from the Qubes repo:  In Dom0, when running “qvm-” commands [1] specifically upon Whonix VMs, such as “qvm-start”, “qvm-run”, etc, it outputs 2 lines of the following error, like this…  setterm: $TERM is not defined. setterm: $TERM is not defined. For example, if I run the following in the Dom0 terminal:  qvm-run --pass-io whonix-workstation &#39;date&#39; it outputs:  setterm: $TERM is not defined. setterm: $TERM is not defined. Sat Dec 25 12:00:00 UTC 2014 Thi..." />
<meta property="article:published_time" content="2014-12-27T08:32:44+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="next" href="7634658.html?page=2">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="763.html">Error Message: setterm: $TERM is not defined</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/qubes-whonix/12.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #63a0ff'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Qubes-Whonix</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-27T08:32:44Z' class='post-time'>
                December 27, 2014,  8:32am
              </time>
              <meta itemprop='dateModified' content='2014-12-27T08:32:44Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>For the new Whonix experimental templates from the Qubes repo:</p>
<p>In Dom0, when running “qvm-” commands [1] specifically upon Whonix VMs, such as “qvm-start”, “qvm-run”, etc, it outputs 2 lines of the following error, like this…</p>
<blockquote>setterm: $TERM is not defined.
setterm: $TERM is not defined.</blockquote>
<p>For example, if I run the following in the Dom0 terminal:</p>
<pre><code class="lang-auto">qvm-run --pass-io whonix-workstation 'date'</code></pre>
<p>it outputs:</p>
<blockquote>setterm: $TERM is not defined.
setterm: $TERM is not defined.
Sat Dec 25 12:00:00 UTC 2014</blockquote>
<p>This error does not happen with other Fedora-based (non-Whonix) VMs in Qubes.</p>
<p>This error does not happen within the Whonix VM terminals themselves, just Dom0, when running “qvm-” commands upon the Whonix VMs.</p>
<p>I’m writing a toolkit for Qubes + Whonix and this error gets in the way of cleanly parsing and processing the output of commands issued to the Whonix VMs.</p>
<p>Checked $TERM variable inside the Whonix VM terminals, I echo $TERM:</p>
<pre><code class="lang-auto">echo $TERM</code></pre>
<p>it outputs:</p>
<blockquote>xterm</blockquote>
<p>[1] <a href="../../../external.html?link=https://qubes-os.org/wiki/DomZeroTools" rel="nofollow noopener">https://qubes-os.org/wiki/DomZeroTools</a></p>
<p>Cross posted this to the qubes-users mailing list: <a href="../../../external.html?link=https://groups.google.com/d/topic/qubes-users/ToWHLRXBy5c" rel="nofollow noopener">https://groups.google.com/d/topic/qubes-users/ToWHLRXBy5c</a></p>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-27T23:57:21Z' class='post-time'>
                December 27, 2014, 11:57pm
              </time>
              <meta itemprop='dateModified' content='2014-12-27T23:57:21Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/nrgaway">@nrgaway</a> successfully narrowed down the culprit of this error.</p>
<p>It seems to be part of a Whonix power savings disable script…</p>
<pre><code class="lang-auto">/etc/profile.d/20_power_savings_disable_in_vms.sh</code></pre>
<blockquote>Remove the file below and it will work for you :)
/etc/profile.d/20_power_savings_disable_in_vms.sh
<p>It’s a Whonix script so maybe ask Patrick for a work-around or maybe it is not needed.  Let me know so I can fix it in a future release.</p>
</blockquote>
<p><a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a></p>
<p>Would like to know what the significance of this power savings script is and what kind of bad effects, if any, might be expected from disabling it for users.</p>
<p>And if we can conditionally, for Qubes users only, disable the part that unsets the $TERM variable in the next Whonix release.</p>
<p>Thanks! <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-28T05:19:29Z' class='post-time'>
                December 28, 2014,  5:19am
              </time>
              <meta itemprop='dateModified' content='2014-12-28T05:19:29Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>package:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">
      <a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms" target="_blank">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="../../../external.html?link=https://avatars3.githubusercontent.com/u/4500165?s=400&amp;v=4" class="thumbnail onebox-avatar" width="400" height="400">

<h3><a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms" target="_blank">Whonix/power-savings-disable-in-vms</a></h3>

<p>DEPRECATED - replaced by https://github.com/Whonix/vm-config-dist - Whonix/power-savings-disable-in-vms</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>purpose of package:<br>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms/blob/master/debian/control#L18" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms/blob/master/debian/control#L18" target="_blank">Whonix/power-savings-disable-in-vms/blob/master/debian/control#L18</a></h4>
<pre class="onebox"><code class="lang-"><ol class="start lines" start="8" style="counter-reset: li-counter 7 ;">
<li>Build-Depends: debhelper (&gt;= 12), genmkfile</li>
<li>Homepage: https://github.com/Whonix/power-savings-disable-in-vms</li>
<li>Vcs-Browser: https://github.com/Whonix/power-savings-disable-in-vms</li>
<li>Vcs-Git: https://github.com/Whonix/power-savings-disable-in-vms.git</li>
<li>Standards-Version: 4.3.0</li>
<li>
</li><li>Package: power-savings-disable-in-vms</li>
<li>Architecture: all</li>
<li>Depends: virt-what, sudo, ${misc:Depends}</li>
<li>Description: Disables screen locker and power savings when run inside a virtual machine</li>
<li class="selected"> It is not useful to open a screensaver or to power down the desktop for</li>
<li> operating systems that are run inside VMs. There is no real display that could</li>
<li> be saved and no real power that could be saved. From usability perspective it</li>
<li> also is counter intuitive when looking at the VM window and only seeing a</li>
<li> black screen. Therefore it makes sense to disable power savings in VMs.</li>
<li> .</li>
<li> Disables screen locker when running in VMs because that is not useful either.</li>
<li> .</li>
<li> When not run inside VMs, this package does nothing.</li>
</ol></code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>It’s not unsetting the $TERM variable.</p>
<p>“Code effective” parts:</p>
<ul>
<li><a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms/blob/master/etc/X11/Xsession.d/20power_savings_disable_in_vms">https://github.com/Whonix/power-savings-disable-in-vms/blob/master/etc/X11/Xsession.d/20power_savings_disable_in_vms</a></li>
<li><a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms/blob/master/etc/profile.d/20_power_savings_disable_in_vms.sh">https://github.com/Whonix/power-savings-disable-in-vms/blob/master/etc/profile.d/20_power_savings_disable_in_vms.sh</a></li>
</ul>
<p>(“Non-code effective” parts, the other files, are packaging, package description, licensing, …)</p>
<p>So the only adverse effect could be the usability issue of blanking the display (“power off”) after a while of inactivity using the VM (not the host - blanking the host display can be a usual, sane thing, that’s a separate discussion). But perhaps Qubes disables powersavings for VMs already some other way anyhow.</p>
<p>Feel free to disable it conditionally in next Whonix release. By checking some environment variable or file (slightly cleaner, I think) that only exists within Qubes. Please send a pull request or I’ll do it next year. (Pretty easy, small, fast change.) You got some file already, that only exists within Qubes that can be used for checking we’re running inside Qubes?</p>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-28T06:28:47Z' class='post-time'>
                December 28, 2014,  6:28am
              </time>
              <meta itemprop='dateModified' content='2014-12-28T06:28:47Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="3" data-topic="763">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Feel free to disable it conditionally in next Whonix release. By checking some environment variable or file (slightly cleaner, I think) that only exists within Qubes. Please send a pull request or I’ll do it next year. (Pretty easy, small, fast change.) You got some file already, that only exists within Qubes that can be used for checking we’re running inside Qubes?</p>
</blockquote>
</aside>
<p>Great.</p>
<p>Ideally, we could somehow both retain the no screen blanking for vms feature and also resolve this $TERM not defined issue.</p>
<p><a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/nrgaway">@nrgaway</a></p>
<p>You still know the anatomy of your Whonix Qubes implementation much better than I.</p>
<p>We may need to use this same method for making other Qubes specific changes to Whonix in the future.</p>
<p>Going forward, what specific hook would you recommend being most dependable for detecting the presence of our Qubes platform?</p>
<p>No significant rush. Thanks!</p>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-28T09:52:24Z' class='post-time'>
                December 28, 2014,  9:52am
              </time>
              <meta itemprop='dateModified' content='2014-12-28T09:52:24Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Maybe it’s just a symptom. Not the cause.</p>
<p>On a wheezy system using KDE, Konsole.</p>
<pre><code class="lang-auto">echo $TERM
xterm</code></pre>
<p>On a wheezy system, using console tty0.</p>
<pre><code class="lang-auto">echo $TERM
linux</code></pre>
<p>I guess the $TERM variable is not set when using Qubes? That would be a Qubes specific bug worth fixing.</p>
<p>Dumbing it down further, getting the whole power-savings-disable-in-vms package out of the equation…</p>
<p>What happens if you run the following in a Qubes plain Debian template? Try in KDE, Konsole as well as in a real login console such as tty0.</p>
<pre><code class="lang-auto">xset s off
xset -dpms
setterm -blank 0
setterm -powerdown 0</code></pre>
<p>I guess you’re getting the $TERM not defined error?</p>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-28T15:04:03Z' class='post-time'>
                December 28, 2014,  3:04pm
              </time>
              <meta itemprop='dateModified' content='2014-12-28T15:04:03Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“WhonixQubes, post:4, topic:763”][quote author=Patrick link=topic=839.msg6172#msg6172 date=1419743969]<br>
Feel free to disable it conditionally in next Whonix release. By checking some environment variable or file (slightly cleaner, I think) that only exists within Qubes. Please send a pull request or I’ll do it next year. (Pretty easy, small, fast change.) You got some file already, that only exists within Qubes that can be used for checking we’re running inside Qubes?<br>
[/quote]</p>
<p>Great.</p>
<p>Ideally, we could somehow both retain the no screen blanking for vms feature and also resolve this $TERM not defined issue.</p>
<p><a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/nrgaway">@nrgaway</a></p>
<p>You still know the anatomy of your Whonix Qubes implementation much better than I.</p>
<p>We may need to use this same method for making other Qubes specific changes to Whonix in the future.</p>
<p>Going forward, what specific hook would you recommend being most dependable for detecting the presence of our Qubes platform?</p>
<p>No significant rush. Thanks![/quote]</p>
<p>If ‘/var/run/qubes’ exists, you are using a Qubes VM of some sort (template, proxy, etc).  So that would be good to use to determine if running on Qubes.</p>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-28T15:14:41Z' class='post-time'>
                December 28, 2014,  3:14pm
              </time>
              <meta itemprop='dateModified' content='2014-12-28T15:14:41Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>No $TERM errors within the Whonix VMs themselves.</p>
<p>The $TERM variable seems to be set inside the Whonix VMs.</p>
<p>Dom0 has no problem with other (non-Whonix) VMs in Qubes.</p>
<p>Dom0 has no problem with Whonix VMs <em>after deleting</em> the “power-savings-disable-in-vms” package.</p>
<p>However, the Whonix “power-savings-disable-in-vms” package seems to “disrupt” Qubes Dom0 from knowing the $TERM variable of Whonix VMs.</p>
<p>Only get the $TERM error when working with Whonix VMs from Dom0 (qvm-run --pass-io, etc), when the “power-savings-disable-in-vms” package is enabled.</p>
<p>Qubes Test Results:</p>
<p>[hr]</p>
<p>In Whonix AppVM KDE Konsole:</p>
<pre><code class="lang-auto">echo $TERM
xterm</code></pre>
<p>[hr]</p>
<p>In Dom0 KDE Konsole to Whonix AppVM:</p>
<pre><code class="lang-auto">qvm-run --pass-io whonix-workstation "echo $TERM"
setterm: $TERM is not defined.
setterm: $TERM is not defined.
xterm-256color</code></pre>
<p>[hr]</p>
<p>In Whonix HVM TTY:</p>
<pre><code class="lang-auto">echo $TERM
linux</code></pre>
<p>[hr]</p>
<p>In Whonix HVM TTY:</p>
<pre><code class="lang-auto">echo $TERM
linux

xset s off
xset:  unable to open display ""

xset -dpms
xset:  unable to open display ""

setterm -blank 0

setterm -powerdown 0

echo $TERM
linux</code></pre>
<p>[hr]</p>
<p>In Debian 8 AppVM GNOME Terminal:</p>
<pre><code class="lang-auto">echo $TERM
xterm</code></pre>
<p>[hr]</p>
<p>In Debian 8 AppVM GNOME Terminal:</p>
<pre><code class="lang-auto">echo $TERM
xterm

xset s off

xset -dpms

setterm -blank 0
setterm: terminal xterm does not support --blank

setterm -powerdown 0
 [14;0]

echo $TERM
xterm</code></pre>
<p>[hr]</p>
<p>In Dom0 KDE Konsole to Debian 8 GNOME Terminal:</p>
<pre><code class="lang-auto">echo $TERM
xterm-256color</code></pre>
<p>[hr]</p>
<p>In Debian 7 HVM GNOME Terminal:</p>
<pre><code class="lang-auto">echo $TERM
xterm</code></pre>
<p>[hr]</p>
<p>In Debian 7 HVM GNOME Terminal:</p>
<pre><code class="lang-auto">echo $TERM
xterm

xset s off

xset -dpms

setterm -blank 0

setterm -powerdown 0
 [14;0]

echo $TERM
xterm</code></pre>
<p>[hr]</p>
<p>In Debian 7 HVM TTY:</p>
<pre><code class="lang-auto">echo $TERM
linux

xset s off
-bash: xset: command not found

xset -dpms
-bash: xset: command not found

setterm -blank 0

setterm -powerdown 0

echo $TERM
linux</code></pre>
<p>[hr]</p>
<p>Let me know if you need any further tests or clarifications on these ones.</p>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-28T15:20:12Z' class='post-time'>
                December 28, 2014,  3:20pm
              </time>
              <meta itemprop='dateModified' content='2014-12-28T15:20:12Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="6" data-topic="763">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/f17d59/40.png" class="avatar"> nrgaway:</div>
<blockquote>
<p>If ‘/var/run/qubes’ exists, you are using a Qubes VM of some sort (template, proxy, etc).  So that would be good to use to determine if running on Qubes.</p>
</blockquote>
</aside>
<p>Great. Thanks!</p>
<p>Will plan on checking for this directory specifically for Whonix Qubes conditionals:</p>
<pre><code class="lang-auto">/var/run/qubes</code></pre>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/nrgaway'><span itemprop='name'>nrgaway</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-28T15:28:41Z' class='post-time'>
                December 28, 2014,  3:28pm
              </time>
              <meta itemprop='dateModified' content='2014-12-28T15:28:41Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“Patrick, post:5, topic:763”]Maybe it’s just a symptom. Not the cause.</p>
<p>On a wheezy system using KDE, Konsole.</p>
<pre><code class="lang-auto">echo $TERM
xterm</code></pre>
<p>On a wheezy system, using console tty0.</p>
<pre><code class="lang-auto">echo $TERM
linux</code></pre>
<p>I guess the $TERM variable is not set when using Qubes? That would be a Qubes specific bug worth fixing.</p>
<p>Dumbing it down further, getting the whole power-savings-disable-in-vms package out of the equation…</p>
<p>What happens if you run the following in a Qubes plain Debian template? Try in KDE, Konsole as well as in a real login console such as tty0.</p>
<pre><code class="lang-auto">xset s off
xset -dpms
setterm -blank 0
setterm -powerdown 0</code></pre>
<p>I guess you’re getting the $TERM not defined error?[/quote]</p>
<p>$TERM is set on Qubes.  In a terminal shell using Whonix Gateway AppVM:</p>
<pre><code class="lang-auto">echo $TERM
xterm</code></pre>
<p>As for running the following:</p>
<pre><code class="lang-auto">xset s off
xset -dpms
setterm -blank 0
setterm -powerdown 0</code></pre>
<p>The last statement (setterm -powerdown 0) spits out a few bytes of garbage text, some type of escape sequence (<em>[9;0]</em>[14;0]).<br>
Qubes uses its own video (and input) drivers and does not rely on X-Windows due to security concerns (Any user can obtain access to any users x-window sessions keystrokes and such <a href="../../../external.html?link=http://theinvisiblethings.blogspot.ca/2011/04/linux-security-circus-on-gui-isolation.html" data-bbcode="true" rel="nofollow noopener">http://theinvisiblethings.blogspot.ca/2011/04/linux-security-circus-on-gui-isolation.html</a>)</p>
<p>Anyway, I suggest redirect any errors when when using the setterm command as follows:script to look like this:</p>
<pre><code class="lang-auto">setterm -blank 0 2&gt;/dev/null
true "$0: exit code: $?"
setterm -powerdown 2&gt;/dev/null
true "$0: exit code: $?"</code></pre>
<p>The above code block works in Qubes and I imagine it would work as expected in other Vms as well.  Maybe you can test that out?</p>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-29T06:24:13Z' class='post-time'>
                December 29, 2014,  6:24am
              </time>
              <meta itemprop='dateModified' content='2014-12-29T06:24:13Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“nrgaway, post:9, topic:763”]Anyway, I suggest redirect any errors when when using the setterm command as follows:script to look like this:</p>
<p><code>
setterm -blank 0 2&gt;/dev/null
true "$0: exit code: $?"
setterm -powerdown 2&gt;/dev/null
true "$0: exit code: $?"
</code>[/quote]</p>
<p>Confirmed as working in Qubes.</p>
<p>It simply suppresses the STDERR of these commands.</p>
<p>Should work universally.</p>
<p>But if wanting to implement specific to Qubes, here would be some simple conditional code:</p>
<p>Version <span class="hashtag">#1:</span> Give Whonix Standard code 1st position; and Whonix Qubes code 2nd position:</p>
<pre><code class="lang-auto">if [ ! -d "/var/run/qubes" ]; then
   setterm -blank 0
   true "$0: exit code: $?"
   setterm -powerdown 0
   true "$0: exit code: $?"
else
   setterm -blank 0 2&gt;/dev/null
   true "$0: exit code: $?"
   setterm -powerdown 0 2&gt;/dev/null
   true "$0: exit code: $?"
fi</code></pre>
<p>Version <span class="hashtag">#2:</span> Give Whonix Qubes code 1st position; and Whonix Standard code 2nd position:</p>
<pre><code class="lang-auto">if [ -d "/var/run/qubes" ]; then
   setterm -blank 0 2&gt;/dev/null
   true "$0: exit code: $?"
   setterm -powerdown 0 2&gt;/dev/null
   true "$0: exit code: $?"
else
   setterm -blank 0
   true "$0: exit code: $?"
   setterm -powerdown 0
   true "$0: exit code: $?"
fi</code></pre>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-29T10:03:13Z' class='post-time'>
                December 29, 2014, 10:03am
              </time>
              <meta itemprop='dateModified' content='2014-12-29T10:03:13Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Redirecting stderr to /dev/null is fine. Not sure if that should be conditional only done on Qubes, but not for others. I guess the former is better.</p>
<p>I don’t think /var/run/anything is a good conditional for this due to the nature how /var/run is created. There is some qubes specific folder in /usr/ already anyhow as far I remember.</p>
<p>The code without “!” is slightly faster to grasp, for me, because it avoid a negation.</p>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-29T10:23:17Z' class='post-time'>
                December 29, 2014, 10:23am
              </time>
              <meta itemprop='dateModified' content='2014-12-29T10:23:17Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“Patrick, post:11, topic:763”]Redirecting stderr to /dev/null is fine. Not sure if that should be conditional only done on Qubes, but not for others. I guess the former is better.</p>
<p>I don’t think /var/run/anything is a good conditional for this due to the nature how /var/run is created. There is some qubes specific folder in /usr/ already anyhow as far I remember.</p>
<p>The code without “!” is slightly faster to grasp, for me, because it avoid a negation.[/quote]</p>
<p>If wanting to universally apply “2&gt;/dev/null” to all platforms, then that’s good.</p>
<pre><code class="lang-auto">setterm -blank 0 2&gt;/dev/null
true "$0: exit code: $?"
setterm -powerdown 0 2&gt;/dev/null
true "$0: exit code: $?"</code></pre>
<p>[hr]</p>
<p>If wanting to apply “2&gt;/dev/null” to Qubes only…</p>
<p>Maybe instead it would work to substitute in the following directory as the Qubes platform conditional check?</p>
<pre><code class="lang-auto">/usr/lib/qubes</code></pre>
<pre><code class="lang-auto">if [ -d "/usr/lib/qubes" ]; then
   setterm -blank 0 2&gt;/dev/null
   true "$0: exit code: $?"
   setterm -powerdown 0 2&gt;/dev/null
   true "$0: exit code: $?"
else
   setterm -blank 0
   true "$0: exit code: $?"
   setterm -powerdown 0
   true "$0: exit code: $?"
fi</code></pre>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-12-29T10:46:33Z' class='post-time'>
                December 29, 2014, 10:46am
              </time>
              <meta itemprop='dateModified' content='2014-12-29T10:46:33Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Looks good.</p>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-01T15:58:25Z' class='post-time'>
                January 1, 2015,  3:58pm
              </time>
              <meta itemprop='dateModified' content='2015-01-01T15:58:25Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Added this:<br>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms/commit/94dbabd43c54305822d7f045a7eb456db9d683d5" target="_blank">github.com/Whonix/power-savings-disable-in-vms</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms/commit/94dbabd43c54305822d7f045a7eb456db9d683d5" target="_blank">qubes specific fix</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2015-01-01" data-time="15:56:08" data-timezone="UTC">03:56PM - 01 Jan 15 UTC</span>
      </div>

      <div class="user">
        <a href="../../../external.html?link=https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 2 files with 17 additions and 4 deletions">
        <a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms/commit/94dbabd43c54305822d7f045a7eb456db9d683d5" target="_blank">
          <span class="added">+17</span>
          <span class="removed">-4</span>
        </a>
      </div>
    </div>

  </div>
</div>




  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>Are you sure there will be a /usr/lib/qubes folder?</p>
<p>The whonix-qubes package does not contain one. See <a href="../../../external.html?link=https://github.com/nrgaway/whonix-qubes/tree/master/usr/lib">https://github.com/nrgaway/whonix-qubes/tree/master/usr/lib</a>.</p>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-01T22:37:04Z' class='post-time'>
                January 1, 2015, 10:37pm
              </time>
              <meta itemprop='dateModified' content='2015-01-01T22:37:04Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[quote=“Patrick, post:14, topic:763”]Added this:<br>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms/commit/94dbabd43c54305822d7f045a7eb456db9d683d5" target="_blank" rel="nofollow noopener">github.com/Whonix/power-savings-disable-in-vms</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms/commit/94dbabd43c54305822d7f045a7eb456db9d683d5" target="_blank" rel="nofollow noopener">qubes specific fix</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2015-01-01" data-time="15:56:08" data-timezone="UTC">03:56PM - 01 Jan 15 UTC</span>
      </div>

      <div class="user">
        <a href="../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
          <img alt="adrelanos" src="../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 2 files with 17 additions and 4 deletions">
        <a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms/commit/94dbabd43c54305822d7f045a7eb456db9d683d5" target="_blank" rel="nofollow noopener">
          <span class="added">+17</span>
          <span class="removed">-4</span>
        </a>
      </div>
    </div>

  </div>
</div>




  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>Are you sure there will be a /usr/lib/qubes folder?</p>
<p>The whonix-qubes package does not contain one. See <a href="../../../external.html?link=https://github.com/nrgaway/whonix-qubes/tree/master/usr/lib.%5B/quote" rel="nofollow noopener">https://github.com/nrgaway/whonix-qubes/tree/master/usr/lib.[/quote</a>]</p>
<p>The “/usr/lib/qubes” directory is a part of Qubes, so it is expected to NOT be in the “whonix-qubes” package made by nrgaway.</p>
<p>I just confirmed that “/usr/lib/qubes” it is present in the Qubes Fedora and Whonix templates, as well as all ProxyVMs and AppVMs that are created from these templates, including Whonix-Gateway ProxyVMs and Whonix-Workstation AppVMs.</p>
<p>It does seem to be always present from what I can tell by looking in various Qubes VMs.</p>
<p>It contains several Qubes system files:</p>
<pre><code class="lang-auto">ls /usr/lib/qubes

close-window
dispvm-prerun.sh
init
iptables-updates-proxy
network-manager-prepare-conf-dir
prepare-suspend
qfile-agent
qfile-unpacker
qopen-in-vm
qrexec-agent
qrexec_client_vm
qrexec-client-vm
qrun-in-vm
qubes-fix-nm-conf.sh
qubes-rpc-multiplexer
qubes-setup-dnat-to-ns
qubes-trigger-sync-appmenus.sh
qvm-copy-to-vm.gnome
qvm-copy-to-vm.kde
qvm-move-to-vm.gnome
qvm-move-to-vm.kde
setup-ip
show-hide-nm-applet.sh
sync-ntp-clock
tar2qfile
vm-file-editor
vusb-ctl.py
wrap-in-html-if-url.sh</code></pre>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-02T16:33:58Z' class='post-time'>
                January 2, 2015,  4:33pm
              </time>
              <meta itemprop='dateModified' content='2015-01-02T16:33:58Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Sounds good. So <a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms/commit/94dbabd43c54305822d7f045a7eb456db9d683d5">https://github.com/Whonix/power-savings-disable-in-vms/commit/94dbabd43c54305822d7f045a7eb456db9d683d5</a> should do.</p>
<p>Can you test please?</p>
<p>You just need this updated file:<br>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms/blob/master/etc/profile.d/20_power_savings_disable_in_vms.sh" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms/blob/master/etc/profile.d/20_power_savings_disable_in_vms.sh" target="_blank" rel="nofollow noopener">Whonix/power-savings-disable-in-vms/blob/master/etc/profile.d/20_power_savings_disable_in_vms.sh</a></h4>
<pre><code class="lang-sh">#!/bin/bash

## Copyright (C) 2012 - 2018 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## See the file COPYING for copying conditions.

output_cmd="true"
#output_cmd="echo"

script_name="power-savings-disable-in-vms"

true "$script_name: Using 'return' in combination with 'exit' so this script can be both, being 'source'd as well as executed."

if ! shopt -q login_shell ; then
   $output_cmd "$script_name: Not running in a login shell, not doing anything."
   return
   exit 0
fi

if ! test -x /usr/sbin/virt-what &gt;/dev/null ; then
   $output_cmd "$script_name: /usr/sbin/virt-what not executable found. Stop."
</code></pre>

  This file has been truncated. <a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms/blob/master/etc/profile.d/20_power_savings_disable_in_vms.sh" target="_blank" rel="nofollow noopener">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>Get it either way. Copy/paste manually or install the upgraded package.</p>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-03T00:55:52Z' class='post-time'>
                January 3, 2015, 12:55am
              </time>
              <meta itemprop='dateModified' content='2015-01-03T00:55:52Z'>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Just tested and confirmed as working in Qubes.</p>
<p>Working as in it now successfully allows commands to execute without error: “setterm: $TERM is not defined.”</p>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-03T11:01:41Z' class='post-time'>
                January 3, 2015, 11:01am
              </time>
              <meta itemprop='dateModified' content='2015-01-03T11:01:41Z'>
          <span itemprop='position'>#18</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>You were getting this “setterm: $TERM is not defined.” for executing each and every command?</p>
<p><a href="../../../external.html?link=https://github.com/Whonix/power-savings-disable-in-vms/blob/master/etc/profile.d/20_power_savings_disable_in_vms.sh">https://github.com/Whonix/power-savings-disable-in-vms/blob/master/etc/profile.d/20_power_savings_disable_in_vms.sh</a> should only be executed after login to a <a href="../../../external.html?link=https://en.wikipedia.org/wiki/Virtual_console" data-bbcode="true">virtual console</a>.</p>
<p>If it happens for each and every command in a terminal emulator (ex: Konsole) (?), then it would mean that script is executed every time you type a command. That would be a Qubes specific bug, that would cause a lot unnecessary system load that should be fixed.</p>
<p>To make sure, consider adding some debug output to /etc/profile.d/20_power_savings_disable_in_vms.sh such as</p>
<pre><code class="lang-auto"></code></pre>
<p>after</p>
<pre><code class="lang-auto"></code></pre>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/WhonixQubes'><span itemprop='name'>WhonixQubes</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-03T17:49:45Z' class='post-time'>
                January 3, 2015,  5:49pm
              </time>
              <meta itemprop='dateModified' content='2015-01-03T17:49:45Z'>
          <span itemprop='position'>#19</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="18" data-topic="763">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>You were getting this “setterm: $TERM is not defined.” for executing each and every command?</p>
</blockquote>
</aside>
<p>Not in the Whonix VMs themselves.<br>
Yes in Qubes Dom0 Terminal using qvm-* commands.</p>
<p><a href="../../../external.html?link=https://qubes-os.org/wiki/DomZeroTools" class="onebox" target="_blank" rel="nofollow noopener">https://qubes-os.org/wiki/DomZeroTools</a></p>
<p>[quote=“Patrick, post:18, topic:763”]To make sure, consider adding some debug output to /etc/profile.d/20_power_savings_disable_in_vms.sh such as</p>
<pre><code class="lang-auto"></code></pre>
<p>after</p>
<pre><code class="lang-auto"></code></pre>
<p>This echos the following in Qubes Dom0 Terminal along with the additional output of the qvm-* commands:</p>
<blockquote>-su: debug</blockquote>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="763.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-01-03T18:35:36Z' class='post-time'>
                January 3, 2015,  6:35pm
              </time>
              <meta itemprop='dateModified' content='2015-01-03T18:35:36Z'>
          <span itemprop='position'>#20</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Looks like a Qubes bug to me. Or just a strange way to implement this.</p>
        </div>

        <meta itemprop='headline' content='Error Message: setterm: $TERM is not defined'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><b><a rel="next" itemprop="url" href="7634658.html?page=2">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
