<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
    <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258</link>
    <description>Sometimes my Whonix templates think they are not being connected to a Whonix gateway when they are. Some Whonix templates (both gateway and workstation) will connect to the update VM just fine, but others will complain.

On the complaining template I am not able to use apt-get at all, but `whonixcheck` gives no errors up until checking for updates. Changing the NetVM to another Whonix gateway sometime fixes it, simply restarting sometimes fixes it, sometimes nothing seems to fix it.

---

System info:

+ Qubes 3.1 updated from `qubes-dom0-current-testing`

+ whonix-gateway-packages-dependencies 2.9-1

+ Whonix Build Version: 12.0.0.3.2 testers

---

Here is the error given:

&gt;Whonix-Gateway NetVM required for updates!

&gt;Please ensure that this TemplateVM has a Whonix-Gateway as its NetVM.

&gt;No updates are possible without an active (running) Whonix-Gateway VM. 

---

Ran on Whonix-Gateway template:

`user@host:~$ sudo apt-get update
Ign http://security.debian.org jessie/updates InRelease
Ign http://ftp.us.debian.org jessie InRelease
Ign http://deb.qubes-os.org jessie InRelease
Ign http://mirror.whonix.de testers InRelease
Err http://security.debian.org jessie/updates Release.gpg
  Cannot initiate the connection to 10.137.255.254:8082 (10.137.255.254). - connect (111: Connection refused)
Ign http://deb.torproject.org jessie InRelease     
Err http://deb.qubes-os.org jessie Release.gpg     
  Cannot initiate the connection to 10.137.255.254:8082 (10.137.255.254). - connect (111: Connection refused)
Err http://mirror.whonix.de testers Release.gpg
  Cannot initiate the connection to 10.137.255.254:8082 (10.137.255.254). - connect (111: Connection refused)
Err http://ftp.us.debian.org jessie Release.gpg
  Cannot initiate the connection to 10.137.255.254:8082 (10.137.255.254). - connect (111: Connection refused)
Err http://deb.torproject.org jessie Release.gpg
  Cannot initiate the connection to 10.137.255.254:8082 (10.137.255.254). - connect (111: Connection refused)`

---

Ran on NetVM for Whonix-Gateway template, which is a Whonix-Gateway:

[code]user@host:~$ sudo ifconfig
eth0      Link encap:Ethernet  HWaddr 00:16:3e:5e:6c:20  
          inet addr:10.137.3.34  Bcast:10.255.255.255  Mask:255.255.255.255
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:27838 errors:0 dropped:0 overruns:0 frame:0
          TX packets:14421 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:34461845 (32.8 MiB)  TX bytes:1973510 (1.8 MiB)

eth1      Link encap:Ethernet  HWaddr 5e:b5:c0:4f:ad:d6  
          inet addr:10.137.12.1  Bcast:10.255.255.255  Mask:255.255.255.255
          UP BROADCAST RUNNING NOARP  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:13226 errors:0 dropped:0 overruns:0 frame:0
          TX packets:13226 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:31350942 (29.8 MiB)  TX bytes:31350942 (29.8 MiB)

vif20.0   Link encap:Ethernet  HWaddr fe:ff:ff:ff:ff:ff  
          inet addr:10.137.12.1  Bcast:0.0.0.0  Mask:255.255.255.255
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1972 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1962 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:32 
          RX bytes:88501 (86.4 KiB)  TX bytes:128300 (125.2 KiB)[/code]

Please let me know anything else needed for debugging. I&#39;m getting this error almost ever time I do updates on at least one template.</description>
    <language>en</language>
    <lastBuildDate>Sun, 13 Aug 2017 22:34:20 +0000</lastBuildDate>
    <category>Qubes-Whonix</category>
    <atom:link href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="35" data-topic="2258">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/h/b2d939/40.png" class="avatar"> helenweller:</div>
<blockquote>
<p>Am still unable to update whonix</p>
</blockquote>
</aside>
<p>Have you tired this:</p>
<aside class="quote" data-post="4" data-topic="2258">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Try this.</p>
<p>Workaround:</p>
<p>sudo touch /var/run/qubes-service/whonix-secure-proxy</p>
</blockquote>
</aside>
<p>It worked for me although I didn’t follow the apt-pinning instructions for electrum. The only error I had was ‘‘whonix-gateway netvm required for updates’’ so it will only help with updating your whonix templates.</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/36">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/36</link>
        <pubDate>Sun, 13 Aug 2017 21:55:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-36</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[helenweller]]></dc:creator>
        <description><![CDATA[
            <p>Hello,</p>
<p>Am still unable to update whonix (couldn’t find how to check which version I run) on Qubes 3.2.</p>
<p>I followed the apt-pinning instruction to run electrum.<br>
Any help would be appreciated !</p>
<p>Getting same message as above while trying to check workstation:<br>
Whonix-Gateway NetVM required for updates!<br>
Please ensure that this TemplateVM has a Whonix-Gateway as its NetVM.<br>
No updates are possible without an active (running) Whonix-Gateway VM.</p>
<p>Running whonixcheck in terminal on workstation:<br>
user@host:~$ whonixcheck<br>
[INFO] [whonixcheck] whonix-ws | Whonix-Workstation | TemplateVM | Sun Aug 13 12:02:05 UTC 2017<br>
[INFO] [whonixcheck] Connected to Tor.<br>
[ERROR] [whonixcheck] Systemd Clock Check Result:<br>
Unexpected results by timedatectl.<br>
timedatectl_output_pretty:<br>
Local time: Sun 2017-08-13 12:02:11 UTC<br>
Universal time: Sun 2017-08-13 12:02:11 UTC<br>
RTC time: n/a<br>
Time zone: Etc/UTC (UTC, +0000)<br>
Network time on: yes<br>
NTP synchronized: no<br>
RTC in local TZ: no<br>
It is generally recommended to keep the default as per Whonix Design. [1]<br>
If you did not change timezone related settings, please report this Whonix bug.<br>
If you know what you are doing and changed this on purpose, feel free to<br>
disable this check. [2]</p>
<p>[1] <a href="https://www.whonix.org/wiki/Dev/Design-Shared#timezone" rel="nofollow noopener">https://www.whonix.org/wiki/Dev/Design-Shared#timezone</a><br>
[2] Create a file /etc/whonix.d/50_whonixcheck_user and add:<br>
whonixcheck_skip_functions+=" check_systemd_clock "</p>
<p>user@host:~$ sudo service qubes-whonix-torified-updates-proxy-check status<br>
● qubes-whonix-torified-updates-proxy-check.service - Qubes Whonix Torified Updates Proxy Check<br>
Loaded: loaded (/lib/systemd/system/qubes-whonix-torified-updates-proxy-check.service; enabled; vendor preset: enabled)<br>
Active: active (exited) since Sun 2017-08-13 11:56:02 UTC; 23min ago<br>
Process: 1101 ExecStart=/usr/lib/qubes-whonix/init/torified-updates-proxy-check (code=exited, status=0/SUCCESS)<br>
Main PID: 1101 (code=exited, status=0/SUCCESS)<br>
CGroup: /system.slice/qubes-whonix-torified-updates-proxy-check.service</p>
<p>Aug 13 11:56:02 host torified-updates-proxy-check[1101]: + source /usr/lib/qubes-whonix/utility_functions.sh<br>
Aug 13 11:56:02 host torified-updates-proxy-check[1101]: ++ PROXY_SERVER=http://10.137.255.254:8082/<br>
Aug 13 11:56:02 host torified-updates-proxy-check[1101]: ++ PROXY_META=’'<br>
Aug 13 11:56:02 host torified-updates-proxy-check[1101]: ++ UWT_DEV_PASSTHROUGH=1<br>
Aug 13 11:56:02 host torified-updates-proxy-check[1101]: ++ curl --silent --connect-timeout 10 <a href="http://10.137.255.254:8082/" rel="nofollow noopener">http://10.137.255.254:8082/</a><br>
Aug 13 11:56:02 host torified-updates-proxy-check[1101]: + curl_output=<br>
Aug 13 11:56:02 host torified-updates-proxy-check[1101]: + true<br>
Aug 13 11:56:02 host torified-updates-proxy-check[1101]: + grep -q ''<br>
Aug 13 11:56:02 host torified-updates-proxy-check[1101]: + echo ''<br>
Aug 13 11:56:02 host systemd[1]: Started Qubes Whonix Torified Updates Proxy Check.</p>
<p>user@host:~$ ls -la /var/run/qubes-service/whonix-secure-proxy<br>
-rw-rw-r-- 1 root root 0 Aug 13 12:14 /var/run/qubes-service/whonix-secure-proxy</p>
<p>user@host:~$ sudo rm /var/run/qubes-service/whonix-secure-proxy</p>
<p>user@host:~$ sudo bash -x /usr/lib/qubes-whonix/init/torified-updates-proxy-check</p>
<ul>
<li>set -x<br>
++ qubesdb-read /qubes-vm-type</li>
<li>qubes_vm_type=TemplateVM</li>
<li>‘[’ ‘!’ TemplateVM = TemplateVM ‘]’</li>
<li>‘[’ -e /var/run/qubes-service/whonix-secure-proxy ‘]’</li>
<li>source /usr/lib/qubes-whonix/utility_functions.sh<br>
++ PROXY_SERVER=http://10.137.255.254:8082/<br>
++ PROXY_META=’’<br>
++ UWT_DEV_PASSTHROUGH=1<br>
++ curl --silent --connect-timeout 10 <a href="http://10.137.255.254:8082/" rel="nofollow noopener">http://10.137.255.254:8082/</a>
</li>
<li>curl_output=’&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</li>
</ul>



403 Filtered




<h1>Filtered</h1>
<p>The request you made has been filtered</p>
<hr>
<p><em>Generated by <a href="https://banu.com/tinyproxy/" rel="nofollow noopener">tinyproxy</a> version 1.8.3.</em></p>

'
+ echo '&lt;?xml version="1.0" encoding="UTF-8" ?&gt;



403 Filtered




<h1>Filtered</h1>
<p>The request you made has been filtered</p>
<hr>
<p><em>Generated by <a href="https://banu.com/tinyproxy/" rel="nofollow noopener">tinyproxy</a> version 1.8.3.</em></p>

'
+ grep -q ''
+ touch /var/run/qubes-service/whonix-secure-proxy
<p>thank you very much for any insight about how to fix this.</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/35">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/35</link>
        <pubDate>Sun, 13 Aug 2017 12:32:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-35</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[helenweller]]></dc:creator>
        <description><![CDATA[
            <p>Hi there,</p>
<p>I’ve got both symptoms as well (Error “Unexpected results by timedatectl” (when running whonixcheck) and  Error “Whonix-Gateway NetVM required for updates!” on template startup)</p>
<p>Looks like you guys found the reason but I couldn’t find any solution.<br>
Should I reinstall whonix templates ?</p>
<p>thank you</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/34">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/34</link>
        <pubDate>Sat, 29 Jul 2017 15:56:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-34</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>HulaHoop:</p>
<blockquote>
<p>[quote=“Patrick, post:31, topic:2258”] Unrelated. Backports not<br>
needed in stretch. (Tested by me.) [/quote]</p>
<p>OK so should I deprecate the current instruction set and recommend<br>
sudo apt-get install electrum?</p>
</blockquote>
<p>No, because Whonix is still based on jessie, not stretch. (Whonix 14<br>
release not done.)</p>
<blockquote>
<p>[quote=“Patrick, post:31, topic:2258”] This is about Whonix 14 /<br>
jessie based. The argument is, that<br>
/etc/apt/preferences.d/debian-pinning.pref either/and/or Pin:<br>
release a=stable/Pin: release a=testing is causing Whonix 13 stable<br>
upgrades of Debian packages to break Whonix. Installs a newer kernel<br>
which then breaks it. [/quote]</p>
<p>Pretty serious indeed. I think I threw out a lot of apt pinning<br>
install instructions over time but thats the most important one<br>
left.</p>
</blockquote>
<p>Any reason to keep /etc/apt/preferences.d/debian-pinning.pref?</p>
<p>If we need to keep it, we’d need to use specific codenames (such as<br>
jessie) and not generic ones (such as stable, since they can change<br>
meaning and break things).</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/33">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/33</link>
        <pubDate>Thu, 27 Jul 2017 06:03:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-33</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="31" data-topic="2258">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Unrelated. Backports not needed in stretch. (Tested by me.)</p>
</blockquote>
</aside>
<p>OK so should I deprecate the current instruction set and recommend sudo apt-get install electrum?</p>
<aside class="quote" data-post="31" data-topic="2258">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>This is about Whonix 14 / jessie based. The argument is, that<br>
/etc/apt/preferences.d/debian-pinning.pref either/and/or Pin: release<br>
a=stable/Pin: release a=testing is causing Whonix 13 stable<br>
upgrades of Debian packages to break Whonix. Installs a newer kernel<br>
which then breaks it.</p>
</blockquote>
</aside>
<p>Pretty serious indeed. I think I threw out a lot of apt pinning install instructions over time but thats the most important one left.</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/32">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/32</link>
        <pubDate>Thu, 27 Jul 2017 01:47:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-32</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>HulaHoop:</p>
<blockquote>
<ol>
<li>I haven’t tested the Electrum version out on Stretch yet to know<br>
if backports are still needed now or will be soon.</li>
</ol>
</blockquote>
<p>Unrelated. Backports not needed in stretch. (Tested by me.)</p>
<p>This is about Whonix 14 / jessie based. The argument is, that<br>
/etc/apt/preferences.d/debian-pinning.pref either/and/or <code>Pin: release a=stable</code> / <code>Pin: release a=testing</code> is causing Whonix 13 stable<br>
upgrades of Debian packages to break Whonix. Installs a newer kernel<br>
which then breaks it.</p>
<p><a href="https://forums.whonix.org/t/critical-x-wont-start-after-yesterdays-debian-upgrade">https://forums.whonix.org/t/critical-x-wont-start-after-yesterdays-debian-upgrade</a></p>
<p>cc’d you, because you originally added debian-pinning.pref.</p>
<blockquote>
<ol start="2">
<li>
</li>
</ol>
<blockquote>
<p>Then congrats you, you system is broken and you can be compromised.<br>
Many packets in system now installed from backports repo. Because<br>
now Debian 8 jessie named “oldstable”, and not “stable” as<br>
described in guide.</p>
</blockquote>
<p>Source? Its the first time I hear that apt can be compromised just by<br>
using pinning. Unless you mean its an old package that no longer<br>
receives sec updates - that would make more sense.</p>
</blockquote>
<p>Compromised might be the wrong word here. Not in a sense that a third<br>
party can access/control your Whonix VM. But serious nonetheless.<br>
Rendering Whonix unbootable.</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/31">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/31</link>
        <pubDate>Sun, 23 Jul 2017 14:45:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-31</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <ol>
<li>
<p>I haven’t tested the Electrum version out on Stretch yet to know if backports are still needed now or will be soon.</p>
</li>
<li>
</li>
</ol>
<blockquote>
<p>Then congrats you, you system is broken and you can be compromised. Many packets in system now installed from backports repo. Because now Debian 8 jessie named “oldstable”, and not “stable” as described in guide.</p>
</blockquote>
<p>Source? Its the first time I hear that apt can be compromised just by using pinning. Unless you mean its an old package that no longer receives sec updates - that would make more sense.</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/30">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/30</link>
        <pubDate>Sat, 22 Jul 2017 19:01:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-30</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Do we even need <code>/etc/apt/preferences.d/debian-pinning.pref</code>? Isn’t this working fine without it?</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/29">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/29</link>
        <pubDate>Fri, 21 Jul 2017 23:17:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-29</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="25" data-topic="2258" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/s/a587f6/40.png" class="avatar"> safasfasv:</div>
<blockquote>
<p>If you using electrum and apt pinning as described in <a href="https://www.whonix.org/wiki/Money#Electrum">https://www.whonix.org/wiki/Money#Electrum</a>. Then congrats you, you system is broken and you can be compromised. Many packets in system now installed from backports repo. Because now Debian 8 jessie named “oldstable”, and not “stable” as described in guide.</p>
</blockquote>
</aside>
<p>//cc <a class="mention" href="http://forums.whonix.org/u/hulahoop">@HulaHoop</a></p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/28">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/28</link>
        <pubDate>Fri, 21 Jul 2017 23:04:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-28</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[safasfasv]]></dc:creator>
        <description><![CDATA[
            <p>When system updated from “backports”, you have two indicators of this:</p>
<ol>
<li>Error “Unexpected results by timedatectl” (when running whonixcheck)</li>
<li>Error “Whonix-Gateway NetVM required for updates!” on template startup</li>
</ol>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/27">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/27</link>
        <pubDate>Fri, 21 Jul 2017 13:36:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-27</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[safasfasv]]></dc:creator>
        <description><![CDATA[
            <p>If anybody can, please check <a href="https://www.whonix.org/wiki/Money#Electrum" rel="nofollow noopener">https://www.whonix.org/wiki/Money#Electrum</a> apt-pinning recommendations and fix it.</p>
<p>And also in suggested pinning config, i don’t find any pinning settings for whonix and qubes repo, that might be reason for any unpredicted behaviors on updates.</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/26">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/26</link>
        <pubDate>Fri, 21 Jul 2017 13:31:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-26</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[safasfasv]]></dc:creator>
        <description><![CDATA[
            <p>If you using electrum and apt pinning as described in <a href="https://www.whonix.org/wiki/Money#Electrum" rel="nofollow noopener">https://www.whonix.org/wiki/Money#Electrum</a>. Then congrats you, you system is broken and you can be compromised. Many packets in system now installed from backports repo. Because now Debian 8 jessie named “oldstable”, and not “stable” as described in guide.</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/25">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/25</link>
        <pubDate>Fri, 21 Jul 2017 13:26:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-25</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>Started having the same problem with whonix–ws template using  Whonix 13.</p>
<aside class="quote" data-post="4" data-topic="2258">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Try this.</p>
<p>Workaround:</p>
<p>sudo touch /var/run/qubes-service/whonix-secure-proxy</p>
</blockquote>
</aside>
<p>This allows me to updates my template.  Thanks!!</p>
<p>Here is the output of some of the commands you wanted if someone was still having issues…</p>
<pre><code> user@host:~$ sudo service qubes-whonix-torified-updates-proxy-check status
● qubes-whonix-torified-updates-proxy-check.service - Qubes Whonix Torified Updates Proxy Check
  Loaded: loaded (/lib/systemd/system/qubes-whonix-torified-updates-proxy-check.service; enabled; vendor preset: enabled)
  Active: active (exited) since Fri 2017-06-23 16:30:45 UTC; 7min ago
  Process: 1198 ExecStart=/usr/lib/qubes-whonix/init/torified-updates-proxy-check (code=exited, status=0/SUCCESS)
 Main PID: 1198 (code=exited, status=0/SUCCESS)
 CGroup: /system.slice/qubes-whonix-torified-updates-proxy-check.service

Jun 23 16:30:45 host torified-updates-proxy-check[1198]: + source /usr/lib/qubes-whonix/utility_functions.sh
Jun 23 16:30:45 host torified-updates-proxy-check[1198]: ++ PROXY_SERVER=http://10.137.255.254:8082/
Jun 23 16:30:45 host torified-updates-proxy-check[1198]: ++ PROXY_META='&lt;meta name="application-name"      content="tor proxy"/&gt;'
Jun 23 16:30:45 host torified-updates-proxy-check[1198]: ++ UWT_DEV_PASSTHROUGH=1
Jun 23 16:30:45 host torified-updates-proxy-check[1198]: ++ curl --silent --connect-timeout 10     http://10.137.255.254:8082/
Jun 23 16:30:45 host torified-updates-proxy-check[1198]: + curl_output=
Jun 23 16:30:45 host torified-updates-proxy-check[1198]: + true
Jun 23 16:30:45 host torified-updates-proxy-check[1198]: + grep -q '&lt;meta name="application-name" content="tor proxy"/&gt;'
Jun 23 16:30:45 host torified-updates-proxy-check[1198]: + echo ''
Jun 23 16:30:45 host systemd[1]: Started Qubes Whonix Torified Updates Proxy Check.

user@host:~$ sudo rm /var/run/qubes-service/whonix-secure-proxy
rm: cannot remove ‘/var/run/qubes-service/whonix-secure-proxy’: No such file or directory

user@host:~$ sudo bash -x /usr/lib/qubes-whonix/init/torified-updates-proxy-check
+ set -x
++ qubesdb-read /qubes-vm-type
+ qubes_vm_type=TemplateVM
+ '[' '!' TemplateVM = TemplateVM ']'
+ '[' -e /var/run/qubes-service/whonix-secure-proxy ']'
+ source /usr/lib/qubes-whonix/utility_functions.sh
++ PROXY_SERVER=http://10.137.255.254:8082/
++ PROXY_META='&lt;meta name="application-name" content="tor proxy"/&gt;'
++ UWT_DEV_PASSTHROUGH=1
++ curl --silent --connect-timeout 10 http://10.137.255.254:8082/
+ curl_output='&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"&gt;

&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"&gt;

&lt;head&gt;
&lt;title&gt;403 Filtered&lt;/title&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /&gt;
&lt;meta name="application-name" content="tor proxy"/&gt;
&lt;/head&gt;

&lt;body&gt;

&lt;h1&gt;Filtered&lt;/h1&gt;

&lt;p&gt;The request you made has been filtered&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Generated by &lt;a href="https://banu.com/tinyproxy/"&gt;tinyproxy&lt;/a&gt; version 1.8.3.&lt;/em&gt;&lt;/p&gt;

&lt;/body&gt;

&lt;/html&gt;'
+ echo '&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"&gt;

&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"&gt;

&lt;head&gt;
&lt;title&gt;403 Filtered&lt;/title&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /&gt;
&lt;meta name="application-name" content="tor proxy"/&gt;
&lt;/head&gt;

&lt;body&gt;

&lt;h1&gt;Filtered&lt;/h1&gt;

&lt;p&gt;The request you made has been filtered&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Generated by &lt;a href="https://banu.com/tinyproxy/"&gt;tinyproxy&lt;/a&gt; version 1.8.3.&lt;/em&gt;&lt;/p&gt;

&lt;/body&gt;

&lt;/html&gt;'
+ grep -q '&lt;meta name="application-name" content="tor proxy"/&gt;'
+ touch /var/run/qubes-service/whonix-secure-proxy

user@host:~$ whonixcheck
[INFO] [whonixcheck] whonix-ws-clone | Whonix-Workstation | TemplateVM | Fri Jun 23 16:50:34 UTC 2017
[INFO] [whonixcheck] Connected to Tor.
[ERROR] [whonixcheck] Systemd Clock Check Result: 
Unexpected results by timedatectl.
timedatectl_output_pretty:
      Local time: Fri 2017-06-23 16:50:35 UTC
 Universal time: Fri 2017-06-23 16:50:35 UTC
      RTC time: n/a
     Time zone: Etc/UTC (UTC, +0000)
 Network time on: yes
NTP synchronized: no
 RTC in local TZ: no
It is generally recommended to keep the default as per Whonix Design. [1]</code></pre>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/24">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/24</link>
        <pubDate>Fri, 23 Jun 2017 17:04:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-24</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Due to <a href="https://phabricator.whonix.org/T533">iptables block network access until sdwdate succeeded</a> in Whonix 14, we’ll be using a much longer timeout (120 seconds) and attempts.</p>
<ul>
<li><a href="https://github.com/Whonix/qubes-whonix/blob/master/lib/systemd/system/qubes-whonix-torified-updates-proxy-check.service">https://github.com/Whonix/qubes-whonix/blob/master/lib/systemd/system/qubes-whonix-torified-updates-proxy-check.service</a></li>
<li><a href="https://github.com/Whonix/qubes-whonix/blob/master/usr/lib/qubes-whonix/init/torified-updates-proxy-check">https://github.com/Whonix/qubes-whonix/blob/master/usr/lib/qubes-whonix/init/torified-updates-proxy-check</a></li>
</ul>
<p>So any rare race conditions that may be left would be fixed as a byproduct of this.</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/23</link>
        <pubDate>Sat, 31 Dec 2016 14:43:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-23</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[qubenix]]></dc:creator>
        <description><![CDATA[
            <p>Problem seems to be fixed for me as well for about 4 months now.</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/22</link>
        <pubDate>Sat, 31 Dec 2016 06:37:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-22</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[entr0py]]></dc:creator>
        <description><![CDATA[
            <p>This happens rarely in 2 situations for me:</p>
<ol>
<li>starting template too soon after starting gateway (as adw said)</li>
<li>starting multiple templates at the same time</li>
</ol>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/21</link>
        <pubDate>Fri, 30 Dec 2016 16:39:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-21</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[adw]]></dc:creator>
        <description><![CDATA[
            <p>I haven’t had this problem in a long time, but I always make sure to start <code>sys-whonix</code> separately and wait for the “Connected to Tor” message before starting a template.</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/20</link>
        <pubDate>Fri, 30 Dec 2016 04:10:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-20</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[xloem]]></dc:creator>
        <description><![CDATA[
            <p>Yes … Qubes R3.2 .  Not sure how to check whonix release number.</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/19</link>
        <pubDate>Thu, 29 Dec 2016 21:44:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-19</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Using Qubes R3.2 / Whonix 13?</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/18</link>
        <pubDate>Thu, 29 Dec 2016 13:01:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-18</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[xloem]]></dc:creator>
        <description><![CDATA[
            <p>I am off-and-on having this issue, and keep this thread around to remember how to resolve it.</p>
<p>However <code>sudo /usr/lib/qubes-whonix/init/enable-firewall</code> does not fix my issue.  <code>sudo touch /var/run/qubes-service/whonix-secure-proxy</code> does, however.</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/17</link>
        <pubDate>Thu, 29 Dec 2016 10:54:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-17</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Related:<br>
</p><aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/Whonix/qubes-whonix/pull/2" target="_blank" rel="nofollow noopener">github.com/Whonix/qubes-whonix</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/rustybird" target="_blank" rel="nofollow noopener">
    <img alt="rustybird" src="https://avatars1.githubusercontent.com/u/6682340?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/qubes-whonix/pull/2" target="_blank" rel="nofollow noopener">qubes-updates-cache: Signal torified proxy to client</a>
</h4>

<div class="date">
  by <a href="https://github.com/rustybird" target="_blank" rel="nofollow noopener">rustybird</a>
  on <a href="https://github.com/Whonix/qubes-whonix/pull/2" target="_blank" rel="nofollow noopener">11:00AM - 19 Jun 16</a>
</div>

<div class="github-commit-stats">
  <strong>2 commits</strong>
  changed <strong>5 files</strong>
  with <strong>51 additions</strong>
  and <strong>14 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/16</link>
        <pubDate>Thu, 23 Jun 2016 19:01:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-16</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[qubenix]]></dc:creator>
        <description><![CDATA[
            <p>Gateway template (Whonix13/Qubes3.1).</p>
<p>Worth mentioning: I upgraded <code>whonixcheck</code> via <code>apt-get</code> to version <code>3:4.6.3-1</code> a few hours ago.</p>
<p>[code]user@host:~$ whonixcheck<br>
[INFO] [whonixcheck] w13-gw | Whonix-Gateway | TemplateVM | Mon Jun 13 09:15:12 UTC 2016<br>
[INFO] [whonixcheck] Connected to Tor.<br>
[INFO] [whonixcheck] SocksPort Test: Testing Tor’s SocksPort…<br>
[INFO] [whonixcheck] SocksPort Test Result: Connected to Tor. IP: 65.19.167.132<br>
[INFO] [whonixcheck] Whonix News Download: Checking for Whonix news and updates…<br>
[INFO] [whonixcheck] Whonix News Result:<br>
√ Up to date: whonix-gateway-packages-dependencies 3.4-1<br>
[INFO] [whonixcheck] Debian Package Update Check: Checking for software updates via apt-get… ( Documentation: <a href="https://www.whonix.org/wiki/Update" rel="nofollow noopener">https://www.whonix.org/wiki/Update</a> )<br>
[WARNING] [whonixcheck] Debian Package Update Check Result: Could not check for software updates! (apt-get code: 100)<br>
Please manually check inside this TemplateVM (‘w13-gw’).</p>
<ol>
<li>Open a terminal. (dom0 -&gt; Start Menu -&gt; Template: w13-gw -&gt; Terminal)</li>
<li>Update. sudo apt-get update &amp;&amp; sudo apt-get dist-upgrade<br>
[INFO] [whonixcheck] Whonix APT Repository: Enabled.<br>
When the Whonix team releases TESTERS updates,<br>
they will be AUTOMATICALLY installed (when you run apt-get dist-upgrade)<br>
along with updated packages from the Debian team. Please<br>
read <a href="https://www.whonix.org/wiki/Trust" rel="nofollow noopener">https://www.whonix.org/wiki/Trust</a> to understand the risk.<br>
If you want to change this, use:<br>
sudo whonix_repository[/code]</li>
</ol>
<p>Output of <code>bash -x whonixcheck</code>: <a href="https://gist.githubusercontent.com/anonymous/df289788c9392b9e3285d663040b0cf1/raw/847a7c98e366e5cfd14ca03800492c3baf4c0d54/gistfile1.txt" rel="nofollow noopener">https://gist.githubusercontent.com/anonymous/df289788c9392b9e3285d663040b0cf1/raw/847a7c98e366e5cfd14ca03800492c3baf4c0d54/gistfile1.txt</a></p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/15</link>
        <pubDate>Mon, 13 Jun 2016 09:27:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-15</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Can you try in such situations if whonixcheck outputs any warnings or<br>
errors please?</p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/14</link>
        <pubDate>Mon, 13 Jun 2016 02:31:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-14</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[qubenix]]></dc:creator>
        <description><![CDATA[
            <p>From gateway template:</p>
<p><code>user@host:~$ sudo journalctl -u qubes-whonix-torified-updates-proxy-check | cat
-- Logs begin at Mon 2016-06-13 01:16:38 UTC, end at Mon 2016-06-13 01:17:47 UTC. --
Jun 13 01:16:27 host systemd[1]: Starting Qubes Whonix Torified Updates Proxy Check...
Jun 13 01:16:27 host torified-updates-proxy-check[525]: ++ qubesdb-read /qubes-vm-type
Jun 13 01:16:27 host torified-updates-proxy-check[525]: + qubes_vm_type=TemplateVM
Jun 13 01:16:27 host torified-updates-proxy-check[525]: + '[' '!' TemplateVM = TemplateVM ']'
Jun 13 01:16:27 host torified-updates-proxy-check[525]: + '[' -e /var/run/qubes-service/whonix-secure-proxy ']'
Jun 13 01:16:27 host torified-updates-proxy-check[525]: + source /usr/lib/qubes-whonix/utility_functions.sh
Jun 13 01:16:27 host torified-updates-proxy-check[525]: ++ PROXY_SERVER=http://10.137.255.254:8082/
Jun 13 01:16:27 host torified-updates-proxy-check[525]: ++ PROXY_META='&lt;meta name="application-name" content="tor proxy"/&gt;'
Jun 13 01:16:27 host torified-updates-proxy-check[525]: ++ UWT_DEV_PASSTHROUGH=1
Jun 13 01:16:27 host torified-updates-proxy-check[525]: ++ curl --silent --connect-timeout 10 http://10.137.255.254:8082/
Jun 13 01:16:28 host torified-updates-proxy-check[525]: + curl_output=
Jun 13 01:16:28 host torified-updates-proxy-check[525]: + true
Jun 13 01:16:28 host torified-updates-proxy-check[525]: + echo ''
Jun 13 01:16:28 host torified-updates-proxy-check[525]: + grep -q '&lt;meta name="application-name" content="tor proxy"/&gt;'
Jun 13 01:16:28 host systemd[1]: Started Qubes Whonix Torified Updates Proxy Check.</code></p>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/13</link>
        <pubDate>Mon, 13 Jun 2016 01:25:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-13</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
      <item>
        <title>Templates incorrectly think they&#39;re not connected to a Whonix gateway.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>In whonix-gw TemplateVM, please edit /usr/lib/qubes-whonix/init/torified-updates-proxy-check with root rights.</p>
<pre><code>kdesudo kwrite /usr/lib/qubes-whonix/init/torified-updates-proxy-check
</code></pre>
<p>Below</p>
<pre><code>#!/bin/bash -e
</code></pre>
<p>Add.</p>
<pre><code>set -x
</code></pre>
<p>Save.</p>
<p>Reboot.</p>
<p>Then when this happens next time, please run.</p>
<pre><code>sudo journalctl -u qubes-whonix-torified-updates-proxy-check | cat</code></pre>
          <p><a href="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258/12</link>
        <pubDate>Sun, 12 Jun 2016 15:03:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2258-12</guid>
        <source url="http://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway/2258.rss">Templates incorrectly think they&#39;re not connected to a Whonix gateway.</source>
      </item>
  </channel>
</rss>
