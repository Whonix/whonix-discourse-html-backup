<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Kernel Hardening - #459 by Patrick - Development - Whonix Forum</title>
    <meta name="description" content="Whonix should implement more kernel hardening. All of these settings add no or a very minimal performance decrease. 
Setting “kernel.kptr_restrict=1” makes kernel symbols in /proc/kallsyms only accessible to root which c&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../7296e4a7.html?page=21" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Kernel Hardening&#39;" href="../7296.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/kernel-hardening/7296/459" />
<meta name="twitter:url" content="https://forums.whonix.org/t/kernel-hardening/7296/459" />
<meta property="og:title" content="Kernel Hardening" />
<meta name="twitter:title" content="Kernel Hardening" />
<meta property="og:description" content="I wanted to port this to dracut (replacing initramfs-tools with dracut) but it seems it’s not needed. Seems like dracut has early sysctl settings by default.  https://mirrors.edge.kernel.org/pub/linux/utils/boot/dracut/dracut.html#_description_6" />
<meta name="twitter:description" content="I wanted to port this to dracut (replacing initramfs-tools with dracut) but it seems it’s not needed. Seems like dracut has early sysctl settings by default.  https://mirrors.edge.kernel.org/pub/linux/utils/boot/dracut/dracut.html#_description_6" />
<meta property="article:published_time" content="2021-09-01T16:23:41+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="../7296f62c.html?page=20">
        <link rel="next" href="../72963c09.html?page=22">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../7296.html">Kernel Hardening</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-17T01:42:51Z' class='post-time'>
                January 17, 2021,  1:42am
              </time>
              <meta itemprop='dateModified' content='2021-01-17T01:42:51Z'>
          <span itemprop='position'>#454</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="453" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>What do we do with <code>debian/control</code>?</p>
</blockquote>
</aside>
<p>I think it should just contain a basic description and a link to the Github repository for more detailed information.</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-03-04T22:36:11Z' class='post-time'>
                March 4, 2021, 10:36pm
              </time>
              <meta itemprop='dateModified' content='2021-03-04T22:36:11Z'>
          <span itemprop='position'>#455</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/madaidan">@madaidan</a> GCC 12 just added a security compile time option to auto initialize auto variables. Don’t know if this is a problem in the kernel code these days anymore. Also have no idea how this can affect areas of the code related to rngs. Might be useful for other binaries we compile however.</p>
<p><a href="../../../../external.html?link=https://www.phoronix.com/scan.php?page=news_item&amp;px=GCC-12-Auto-Var-Init" class="onebox" target="_blank" rel="noopener">https://www.phoronix.com/scan.php?page=news_item&amp;px=GCC-12-Auto-Var-Init</a></p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-03-12T18:21:54Z' class='post-time'>
                March 12, 2021,  6:21pm
              </time>
              <meta itemprop='dateModified' content='2021-03-12T18:21:54Z'>
          <span itemprop='position'>#456</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="HulaHoop" data-post="455" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>GCC 12 just added a security compile time option to auto initialize auto variables.</p>
</blockquote>
</aside>
<p>The STRUCTLEAK GCC plugin already automatically initializes variables although this will likely be stronger and less hacky.</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-27T14:46:02Z' class='post-time'>
                June 27, 2021,  2:46pm
              </time>
              <meta itemprop='dateModified' content='2021-06-27T14:46:02Z'>
          <span itemprop='position'>#457</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Now that Debian and other distributions like Arch Linux are starting to relax their user namespace restrictions (but still keeping the sysctl for users to manually configure), we should preserve them in security-misc by setting <code>kernel.unprivileged_userns_clone=0</code>. User namespaces are still a huge risk and a minimal setuid binary where we can tightly control the attack surface exposed is superior by far. Unfortunately, upstream doesn’t seem to care.</p>
<p>However, we will need to make bubblewrap setuid ourselves since the package is not setting it anymore (at least in Debian). Should we just add <code> chmod u+s "$(which bwrap)"</code> in the postinst script and add some details in the readme?</p>
<p>There is also an issue when running Chromium in sandbox-app-launcher since no_new_privs will disable the setuid fallback. Ideally, we could probably add a way to whitelist which binaries are permitted to use unprivileged user namespaces (maybe contribute to linux-hardened). Firefox is also affected, but instead, its sandbox silently fails without crashing and lies to the user about the status of the sandbox because Firefox is terrible.</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-08-15T09:37:59Z' class='post-time'>
                August 15, 2021,  9:37am
              </time>
              <meta itemprop='dateModified' content='2021-08-15T09:37:59Z'>
          <span itemprop='position'>#458</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote" data-post="6" data-topic="12056">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/t/f9ae1b/40.png" class="avatar">
    <a href="../../debian-bullseye-port/12056/6.html">Debian bullseye port</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Also interesting: 
Linux user namespaces - <a href="../../../../external.html?link=https://www.debian.org/releases/bullseye/amd64/release-notes/ch-information.en.html#linux-user-namespaces" class="inline-onebox">Chapter 5. Issues to be aware of for bullseye</a> 
Linux unprivileged bpf -  <a href="../../../../external.html?link=https://www.debian.org/releases/bullseye/amd64/release-notes/ch-information.en.html#linux-unprivileged-bpf" class="inline-onebox">Chapter 5. Issues to be aware of for bullseye</a>
  </blockquote>
</aside>

        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-09-01T16:23:41Z' class='post-time'>
                September 1, 2021,  4:23pm
              </time>
              <meta itemprop='dateModified' content='2021-09-01T16:23:41Z'>
          <span itemprop='position'>#459</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-username="madaidan" data-post="409" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p><a href="../../../../external.html?link=https://github.com/Whonix/security-misc/blob/master/etc/initramfs-tools/scripts/init-bottom/sysctl-initramfs" class="inline-onebox">security-misc/sysctl-initramfs at master · Whonix/security-misc · GitHub</a></p>
</blockquote>
</aside>
<p>I wanted to port this to dracut (<a href="../../replacing-initramfs-tools-with-dracut/4487.html" class="inline-onebox">replacing initramfs-tools with dracut</a>) but it seems it’s not needed. Seems like dracut has early sysctl settings by default.</p>
<p><a href="../../../../external.html?link=https://mirrors.edge.kernel.org/pub/linux/utils/boot/dracut/dracut.html#_description_6" class="onebox" target="_blank" rel="noopener">https://mirrors.edge.kernel.org/pub/linux/utils/boot/dracut/dracut.html#_description_6</a></p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../replacing-initramfs-tools-with-dracut/4487/15.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../replacing-initramfs-tools-with-dracut/4487/15.html'>
                      <span itemprop='name'>replacing initramfs-tools with dracut</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-10-15T17:45:50Z' class='post-time'>
                October 15, 2021,  5:45pm
              </time>
              <meta itemprop='dateModified' content='2021-10-15T17:45:50Z'>
          <span itemprop='position'>#460</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubpullrequest">
  <header class="source">

      <a href="../../../../external.html?link=https://github.com/Whonix/security-misc/pull/103" target="_blank" rel="noopener">github.com/Whonix/security-misc</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewbox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../../external.html?link=https://github.com/Whonix/security-misc/pull/103" target="_blank" rel="noopener">hide-hardware-info: re-enable restrictions on sysfs when using SELinux</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>0xC0ncord:bugfix/selinuxfs_restrictions</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2021-10-09" data-time="02:20:06" data-timezone="UTC">02:20AM - 09 Oct 21 UTC</span>
      </div>

      <div class="user">
        <a href="../../../../external.html?link=https://github.com/0xC0ncord" target="_blank" rel="noopener">
          <img alt="0xC0ncord" src="../../../../external.html?link=https://avatars.githubusercontent.com/u/8011001?v=4" class="onebox-avatar-inline" width="20" height="20">
          0xC0ncord
        </a>
      </div>

      <div class="lines" title="2 commits changed 1 files with 16 additions and 6 deletions">
        <a href="../../../../external.html?link=https://github.com/Whonix/security-misc/pull/103/files" target="_blank" rel="noopener">
          <span class="added">+16</span>
          <span class="removed">-6</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">An oversight on my part simply re-enabled permissions to sysfs when SELinux was <span class="show-more-container"><a href="../../../../external.html?link=https://github.com/Whonix/security-misc/pull/103" target="_blank" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">in effect. This PR fixes this by explicitly setting permissions on the contents of `/sys/*` and `/sys/fs*` instead of just `/sys` if SELinux is in use.

Additionally, fix the indentation so it's consistent with the rest of the script's style.</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Dark_Coder'><span itemprop='name'>Dark_Coder</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-10-26T17:05:23Z' class='post-time'>
                October 26, 2021,  5:05pm
              </time>
              <meta itemprop='dateModified' content='2022-02-15T13:04:55Z'>
          <span itemprop='position'>#461</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a href="../../../../external.html?link=https://www.kernel.org/doc/html/latest/admin-guide/LSM/Yama.html" class="onebox" target="_blank" rel="noopener nofollow ugc">https://www.kernel.org/doc/html/latest/admin-guide/LSM/Yama.html</a></p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-02-10T18:42:11Z' class='post-time'>
                February 10, 2022,  6:42pm
              </time>
              <meta itemprop='dateModified' content='2022-02-10T18:42:11Z'>
          <span itemprop='position'>#462</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote quote-modified" data-post="2" data-topic="13324">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar">
    <a href="../../remove-system-map-cannot-work-lib-modules-is-mounted-read-only/13324/2.html">remove-system.map cannot work - `/lib/modules` is mounted read-only</a> <a class="badge-wrapper  bullet" href="../../../c/qubes-whonix/12.html"><span class="badge-category-bg" style="background-color: #63a0ff;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Everything specific to Qubes-Whonix. (devs)">Qubes-Whonix</span></a>
  </div>
  <blockquote>
    Thank you for the bug report! 
A solution for read-only support will be implemented soon. Most likely by skipping any attempt to delete these files. 
system.map deletion came originally up here: 


It makes most sense when using a self-compiled custom kernel but we’re not there yet. Otherwise in theory would only break malware that depends on reading that file without a hardcoded implementation.
  </blockquote>
</aside>

        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/qua3k'><span itemprop='name'>qua3k</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-02-15T03:04:18Z' class='post-time'>
                February 15, 2022,  3:04am
              </time>
              <meta itemprop='dateModified' content='2022-02-15T03:04:18Z'>
          <span itemprop='position'>#463</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Some new things grsecurity/PaX has been doing in kernel hardening since they went private:</p>
<ul>
<li>GRKERNSEC_SUID_NO_UNPRIV_EXEC — prevent SUID root applications from mmaping/execing files world-writable or not owned by root.</li>
<li>AUTOSLAB — conversion of k*alloc allocations into their own caches</li>
<li>PAX_PRIVATE_KSTACKS — I have no idea</li>
</ul>
<p>It’s worth noting that GRKERNSEC_SUID_NO_UNPRIV_EXEC prevented exploitation of <a href="../../../../external.html?link=https://twitter.com/grsecurity/status/1486042352355524624" rel="noopener nofollow ugc">CVE-2021-4034</a>, but it really isn’t as important as something like AUTOSLAB.</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/torjunkie'><span itemprop='name'>torjunkie</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-04-09T23:46:09Z' class='post-time'>
                April 9, 2022, 11:46pm
              </time>
              <meta itemprop='dateModified' content='2022-04-09T23:46:09Z'>
          <span itemprop='position'>#464</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Arguably as well as improvements in kernel settings that can be applied to Whonix now, any devs with skills like madaidan (come back man!) could be contributing to the KSPP project led by Kees Cook. That way security improvements will apply to all Linux users going forward:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="../../../../external.html?link=https://github.com/KSPP/linux/issues">
  <header class="source">
      <img src="../../../../external.html?link=https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">

      <a href="../../../../external.html?link=https://github.com/KSPP/linux/issues" target="_blank" rel="noopener">GitHub</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/345;"><img src="../../../../external.html?link=https://opengraph.githubassets.com/f2702afeca759c1a52c7368c71a5febec480950992b470b912485799fa3af001/KSPP/linux" class="thumbnail" width="690" height="345"></div>

<h3><a href="../../../../external.html?link=https://github.com/KSPP/linux/issues" target="_blank" rel="noopener">Issues · KSPP/linux</a></h3>

  <p>Linux kernel source tree (Kernel Self Protection Project) - Issues · KSPP/linux</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>If you read through some of these issues, it brings to mind that it appears to be a big security advantage to shift to higher kernels once they become stable, because many improvements are only available in later releases.</p>
<p>For Whonix I gather that would mean shifting to later stable kernel releases sooner rather than later i.e. instead of staying on kernels like 5.10 for years at a time. For Qubes, that would mean upgrading the dom0 kernel to later stable versions whenever possible.</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/raja'><span itemprop='name'>raja</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-07-10T18:53:49Z' class='post-time'>
                July 10, 2022,  6:53pm
              </time>
              <meta itemprop='dateModified' content='2022-07-10T18:53:49Z'>
          <span itemprop='position'>#465</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>While we <a href="../../../../external.html?link=https://github.com/Kicksecure/security-misc/blob/master/etc/default/grub.d/40_distrust_cpu.cfg" rel="noopener nofollow ugc">distrust the CPU</a> for initial entropy, should we also consider distrusting the bootloader?</p>
<p>Thoroughly auditing the initial grub boot seed generation process is non-trivial. Even if we assume the current versions are solid, future versions could potentially become compromised.</p>
<p>See the kernel parameter random.trust_bootloader<br>
<a href="../../../../external.html?link=https://www.kernel.org/doc/html/latest/admin-guide/kernel-parameters.html?highlight=trust_bootloader" class="onebox" target="_blank" rel="noopener nofollow ugc">https://www.kernel.org/doc/html/latest/admin-guide/kernel-parameters.html?highlight=trust_bootloader</a></p>
<p>Also the discussion:<br>
<a href="../../../../external.html?link=https://lkml.org/lkml/2022/6/5/271" class="onebox" target="_blank" rel="noopener nofollow ugc">https://lkml.org/lkml/2022/6/5/271</a></p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-07-11T06:50:28Z' class='post-time'>
                July 11, 2022,  6:50am
              </time>
              <meta itemprop='dateModified' content='2022-07-11T06:50:28Z'>
          <span itemprop='position'>#466</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="raja" data-post="465" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9de0a6/40.png" class="avatar"> raja:</div>
<blockquote>
<p>, should we also consider distrusting the bootloader?</p>
</blockquote>
</aside>
<p>Yes.</p>
<p>Minor stylistic question: Actually a bit weird there is a separate config file <a href="../../../../external.html?link=https://github.com/Kicksecure/security-misc/blob/master/etc/default/grub.d/40_distrust_cpu.cfg">https://github.com/Kicksecure/security-misc/blob/master/etc/default/grub.d/40_distrust_cpu.cfg</a> just for that? Or actually good that it’s split to make review easier and perhaps allow advanced users to more easy override such settings? Where should the distrust bootloader config file be placed? An additional file? Could be. I guess it does not matter much.</p>
<p>Could you please send a pull request?</p>
<aside class="quote no-group" data-username="raja" data-post="465" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9de0a6/40.png" class="avatar"> raja:</div>
<blockquote>
<p>initial grub boot seed generation process</p>
</blockquote>
</aside>
<p>I haven’t found such a feature in grub. Would be interesting but just a sideline.</p>
<p>According to <a href="../../../../external.html?link=https://systemd.io/RANDOM_SEEDS/" class="inline-onebox">Random Seeds</a> it seems that is for now only related to EFI booting.</p>
<p>But also unspecific to grub. Kicksecure / Whonix shouldn’t be dependent on any specific bootloader such as grub for security if it’s so easy to avoid by setting a kernel boot parameter.</p>
<aside class="quote no-group quote-modified" data-username="raja" data-post="465" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9de0a6/40.png" class="avatar"> raja:</div>
<blockquote>
<p>Also the discussion:<br>
<a href="../../../../external.html?link=https://lkml.org/lkml/2022/6/5/271" class="inline-onebox">LKML: "Jason A. Donenfeld": [PATCH] random: credit cpu and bootloader seeds by default</a></p>
</blockquote>
</aside>
<p>Sideline: It has some interesting quotes that I will cite and soon add to <a href="../../../../external.html?link=https://www.kicksecure.com/wiki/Dev/Entropy" class="inline-onebox">Entropy, Randomness, /dev/random vs /dev/urandom, Entropy Sources, Entropy Gathering Daemons, RDRAND</a>.</p>
<hr>
<p>Related but different:<br>
(It’s kernel command line as source of randomness. Not bootloader directly.)</p>
<aside class="quote quote-modified" data-post="1" data-topic="8945">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar">
    <a href="../../use-kernel-command-line-as-a-source-of-randomness/8945.html">use kernel command line as a source of randomness</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of components looking for maintainer)">Development</span></a>
  </div>
  <blockquote>
    <a href="../../../../external.html?link=https://www.openwall.com/lists/kernel-hardening/2017/08/16/15">https://www.openwall.com/lists/kernel-hardening/2017/08/16/15</a>
<a href="../../../../external.html?link=https://tails.boum.org/blueprint/randomness_seeding/#index3h2">https://tails.boum.org/blueprint/randomness_seeding/#index3h2</a>
<a href="../../../../external.html?link=https://redmine.tails.boum.org/code/issues/11897">https://redmine.tails.boum.org/code/issues/11897</a>
<a href="../../../../external.html?link=https://lore.kernel.org/patchwork/cover/822010/">https://lore.kernel.org/patchwork/cover/822010/</a>
<a href="../../../../external.html?link=https://lore.kernel.org/patchwork/patch/822011/">https://lore.kernel.org/patchwork/patch/822011/</a>
<a href="../../../../external.html?link=https://lore.kernel.org/patchwork/patch/822012/">https://lore.kernel.org/patchwork/patch/822012/</a>

By looking at the kernel source code diff it seems this doesn’t need a kernel parameter (such as hypothetically entropy=[blob of random data]. 
We could ship an /etc/default/grub.d …
  </blockquote>
</aside>

<hr>
<p>Related probably interesting reads, maybe further inspiration for hardening:</p>
<p><a href="../../../../external.html?link=https://systemd.io/RANDOM_SEEDS/" class="onebox" target="_blank" rel="noopener">https://systemd.io/RANDOM_SEEDS/</a></p>
<aside class="onebox allowlistedgeneric" data-onebox-src="../../../../external.html?link=https://www.kicksecure.com/wiki/Dev/Entropy">
  <header class="source">
      <img src="../../../../external.html?link=https://www.kicksecure.com/w/images/4/45/Kicksecure-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="../../../../external.html?link=https://www.kicksecure.com/wiki/Dev/Entropy" target="_blank" rel="noopener" title="11:22AM - 24 June 2022">Kicksecure – 24 Jun 22</a>
  </header>

  <article class="onebox-body">
    <img src="../../../../external.html?link=https://www.kicksecure.com/w/images/1/13/Random_entropy.png" class="thumbnail onebox-avatar" width="500" height="500">

<h3><a href="../../../../external.html?link=https://www.kicksecure.com/wiki/Dev/Entropy" target="_blank" rel="noopener">Entropy, Randomness, /dev/random vs /dev/urandom, Entropy Sources, Entropy...</a></h3>

  <p>Technical Design Documentation about Entropy</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/raja'><span itemprop='name'>raja</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-07-12T14:18:45Z' class='post-time'>
                July 12, 2022,  2:18pm
              </time>
              <meta itemprop='dateModified' content='2022-07-12T16:02:57Z'>
          <span itemprop='position'>#467</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="466" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Where should the distrust bootloader config file be placed?</p>
</blockquote>
</aside>
<p>I am also not to sure where exactly the distrust bootloader should go.</p>
<aside class="quote no-group" data-username="Patrick" data-post="466" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I haven’t found such a feature in grub.</p>
</blockquote>
</aside>
<p>My wording here was extremely poor, what I meant to say was basically how grub or any bootloader acquires random seeds.</p>
<p>There are also two other boot parameters that come to mind. More DMA blocking using</p>
<p>iommu.passthrough=0</p>
<p>iommu.strict=1</p>
<p>See IOMMU_DEFAULT_DMA_STRICT in:</p><aside class="onebox githubblob" data-onebox-src="../../../../external.html?link=https://github.com/torvalds/linux/blob/master/drivers/iommu/Kconfig#L97">
  <header class="source">

      <a href="../../../../external.html?link=https://github.com/torvalds/linux/blob/master/drivers/iommu/Kconfig#L97" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="../../../../external.html?link=https://github.com/torvalds/linux/blob/master/drivers/iommu/Kconfig#L97" target="_blank" rel="noopener nofollow ugc">torvalds/linux/blob/master/drivers/iommu/Kconfig#L97</a></h4>



    <pre class="onebox">      <code class="lang-">
        <ol class="start lines" start="87" style="counter-reset: li-counter 86 ;">
            <li>	help</li>
            <li>	  Choose the type of IOMMU domain used to manage DMA API usage by</li>
            <li>	  device drivers. The options here typically represent different</li>
            <li>	  levels of tradeoff between robustness/security and performance,</li>
            <li>	  depending on the IOMMU driver. Not all IOMMUs support all options.</li>
            <li>	  This choice can be overridden at boot via the command line, and for</li>
            <li>	  some devices also at runtime via sysfs.</li>
            <li>
            </li>
<li>	  If unsure, keep the default.</li>
            <li>
            </li>
<li class="selected">config IOMMU_DEFAULT_DMA_STRICT</li>
            <li>	bool "Translated - Strict"</li>
            <li>	help</li>
            <li>	  Trusted devices use translation to restrict their access to only</li>
            <li>	  DMA-mapped pages, with strict TLB invalidation on unmap. Equivalent</li>
            <li>	  to passing "iommu.passthrough=0 iommu.strict=1" on the command line.</li>
            <li>
            </li>
<li>	  Untrusted devices always use this mode, with an additional layer of</li>
            <li>	  bounce-buffering such that they cannot gain access to any unrelated</li>
            <li>	  data within a mapped page.</li>
            <li>
        </li>
</ol>
      </code>
    </pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>and kernel command line options in:<br>
<a href="../../../../external.html?link=https://kernsec.org/wiki/index.php/Kernel_Self_Protection_Project/Recommended_Settings" class="onebox" target="_blank" rel="noopener nofollow ugc">https://kernsec.org/wiki/index.php/Kernel_Self_Protection_Project/Recommended_Settings</a></p>
<p>Using these two will likely cause issues with GPU passthrough.</p>
<p>Also see page 11 of:</p><aside class="onebox pdf" data-onebox-src="../../../../external.html?link=https://lenovopress.lenovo.com/lp1467.pdf">
  <header class="source">

      <a href="../../../../external.html?link=https://lenovopress.lenovo.com/lp1467.pdf" target="_blank" rel="noopener nofollow ugc">lenovopress.lenovo.com</a>
  </header>

  <article class="onebox-body">
    <a href="../../../../external.html?link=https://lenovopress.lenovo.com/lp1467.pdf" target="_blank" rel="noopener nofollow ugc"><span class="pdf-onebox-logo"></span></a>

<h3><a href="../../../../external.html?link=https://lenovopress.lenovo.com/lp1467.pdf" target="_blank" rel="noopener nofollow ugc">lp1467.pdf</a></h3>

  <p class="filesize">527.10 KB</p>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="torjunkie" data-post="464" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>shifting to later stable kernel releases sooner</p>
</blockquote>
</aside>
<p>Additionally building on this, when moving to more recent kernels v5.14+ I see the impact of two boot parameters.</p>
<p>Perhaps we should include and comment out</p>
<p>randomize_kstack_offset=on</p>
<p>See :<br>
<a href="../../../../external.html?link=https://lkml.org/lkml/2019/3/18/246" class="onebox" target="_blank" rel="noopener nofollow ugc">https://lkml.org/lkml/2019/3/18/246</a></p>
<p>Also look to making a note that</p>
<p>slub_debug=FZ</p>
<p>should perhaps be disabled due to:</p><aside class="onebox githubcommit" data-onebox-src="../../../../external.html?link=https://github.com/torvalds/linux/commit/792702911f581f7793962fbeb99d5c3a1b28f4c3">
  <header class="source">

      <a href="../../../../external.html?link=https://github.com/torvalds/linux/commit/792702911f581f7793962fbeb99d5c3a1b28f4c3" target="_blank" rel="noopener nofollow ugc">github.com/torvalds/linux</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewbox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../../external.html?link=https://github.com/torvalds/linux/commit/792702911f581f7793962fbeb99d5c3a1b28f4c3" target="_blank" rel="noopener nofollow ugc">slub: force on no_hash_pointers when slub_debug is enabled</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2021-06-29" data-time="02:34:52" data-timezone="UTC">02:34AM - 29 Jun 21 UTC</span>
      </div>

      <div class="user">
        <a href="../../../../external.html?link=https://github.com/bebarino" target="_blank" rel="noopener nofollow ugc">
          <img alt="bebarino" src="../../../../external.html?link=https://avatars.githubusercontent.com/u/38832?v=4" class="onebox-avatar-inline" width="20" height="20">
          bebarino
        </a>
      </div>

      <div class="lines" title="changed 3 files with 22 additions and 2 deletions">
        <a href="../../../../external.html?link=https://github.com/torvalds/linux/commit/792702911f581f7793962fbeb99d5c3a1b28f4c3" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+22</span>
          <span class="removed">-2</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">Obscuring the pointers that slub shows when debugging makes for some
confusing s<span class="show-more-container"><a href="../../../../external.html?link=https://github.com/torvalds/linux/commit/792702911f581f7793962fbeb99d5c3a1b28f4c3" target="_blank" rel="noopener nofollow ugc" class="show-more">…</a></span><span class="excerpt hidden">lub debug messages:

 Padding overwritten. 0x0000000079f0674a-0x000000000d4dce17

Those addresses are hashed for kernel security reasons.  If we're trying
to be secure with slub_debug on the commandline we have some big problems
given that we dump whole chunks of kernel memory to the kernel logs.
Let's force on the no_hash_pointers commandline flag when slub_debug is on
the commandline.  This makes slub debug messages more meaningful and if by
chance a kernel address is in some slub debug object dump we will have a
better chance of figuring out what went wrong.

Note that we don't use %px in the slub code because we want to reduce the
number of places that %px is used in the kernel.  This also nicely prints
a big fat warning at kernel boot if slub_debug is on the commandline so
that we know that this kernel shouldn't be used on production systems.

[akpm@linux-foundation.org: fix build with CONFIG_SLUB_DEBUG=n]

Link: https://lkml.kernel.org/r/20210601182202.3011020-5-swboyd@chromium.org
Signed-off-by: Stephen Boyd &lt;swboyd@chromium.org&gt;
Acked-by: Vlastimil Babka &lt;vbabka@suse.cz&gt;
Acked-by: Petr Mladek &lt;pmladek@suse.com&gt;
Cc: Joe Perches &lt;joe@perches.com&gt;
Cc: Christoph Lameter &lt;cl@linux.com&gt;
Cc: Pekka Enberg &lt;penberg@kernel.org&gt;
Cc: David Rientjes &lt;rientjes@google.com&gt;
Cc: Joonsoo Kim &lt;iamjoonsoo.kim@lge.com&gt;
Cc: Muchun Song &lt;songmuchun@bytedance.com&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;
Signed-off-by: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p><a href="../../../../external.html?link=https://madaidans-insecurities.github.io/guides/linux-hardening.html#boot-parameters" class="onebox" target="_blank" rel="noopener nofollow ugc">https://madaidans-insecurities.github.io/guides/linux-hardening.html#boot-parameters</a></p>
<p>Regarding entropy, I am very far from an expert on its unbiased generation, regardless, I was under the impression that since kernel v<a href="../../../../external.html?link=https://github.com/torvalds/linux/commit/50ee7529ec4500c88f8664560770a7a1b65db72b" rel="noopener nofollow ugc">5.4</a> and v<a href="../../../../external.html?link=https://github.com/torvalds/linux/commit/30c08efec8884fb106b8e57094baa51bb4c44e32" rel="noopener nofollow ugc">5.6</a> it is pretty ok by default.</p>
<aside class="quote no-group" data-username="Patrick" data-post="466" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>It’s kernel command line as source of randomness.</p>
</blockquote>
</aside>
<p>Using the command line as source is a very interesting idea and would definitely help. Has any progress been made on its development?</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-07-12T17:37:33Z' class='post-time'>
                July 12, 2022,  5:37pm
              </time>
              <meta itemprop='dateModified' content='2022-07-12T17:37:33Z'>
          <span itemprop='position'>#468</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-username="raja" data-post="467" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9de0a6/40.png" class="avatar"> raja:</div>
<blockquote>
<p>Perhaps we should include and comment out</p>
<p>randomize_kstack_offset=on</p>
<p>See :<br>
<a href="../../../../external.html?link=https://lkml.org/lkml/2019/3/18/246" class="inline-onebox">LKML: Elena Reshetova: [RFC PATCH] x86/entry/64: randomize kernel stack offset upon syscall</a></p>
</blockquote>
</aside>
<p>Yes, please. Also add the links please.</p>
<p>Why commented out?</p>
<aside class="quote no-group" data-username="raja" data-post="467" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9de0a6/40.png" class="avatar"> raja:</div>
<blockquote>
<p>slub_debug=FZ</p>
<p>should perhaps be disabled due to:</p>
</blockquote>
</aside>
<p>Yes, please comment out and add the comment.</p>
<aside class="quote no-group quote-modified" data-username="raja" data-post="467" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9de0a6/40.png" class="avatar"> raja:</div>
<blockquote>
<aside class="quote no-group" data-username="Patrick" data-post="466" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>It’s kernel command line as source of randomness.</p>
</blockquote>
</aside>
<p>Using the command line as source is a very interesting idea and would definitely help. Has any progress been made on its development?</p>
</blockquote>
</aside>
<p>No progress unfortunately. If there is, I try to always keep the related forum threads (or preferably wiki if already there) updated.</p>
<aside class="quote no-group" data-username="raja" data-post="467" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9de0a6/40.png" class="avatar"> raja:</div>
<blockquote>
<p>Regarding entropy, I am very far from an expert on its unbiased generation, regardless, I was under the impression that since kernel v<a href="../../../../external.html?link=https://github.com/torvalds/linux/commit/50ee7529ec4500c88f8664560770a7a1b65db72b">5.4</a> and v<a href="../../../../external.html?link=https://github.com/torvalds/linux/commit/30c08efec8884fb106b8e57094baa51bb4c44e32">5.6</a> it is pretty ok by default.</p>
</blockquote>
</aside>
<p>Yeah. Complex topic.<br>
Related:</p><aside class="quote" data-post="18" data-topic="8543">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar">
    <a href="../../moar-entropy-sources/8543/18.html">Moar Entropy Sources</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of components looking for maintainer)">Development</span></a>
  </div>
  <blockquote>
    <a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/4169#issuecomment-1173063459">https://github.com/QubesOS/qubes-issues/issues/4169#issuecomment-1173063459</a>
<a href="../../../../external.html?link=https://github.com/QubesOS/qubes-issues/issues/4169#issuecomment-1173065546">https://github.com/QubesOS/qubes-issues/issues/4169#issuecomment-1173065546</a>
  </blockquote>
</aside>

        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-07-12T17:39:10Z' class='post-time'>
                July 12, 2022,  5:39pm
              </time>
              <meta itemprop='dateModified' content='2022-07-12T17:39:10Z'>
          <span itemprop='position'>#469</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-username="raja" data-post="467" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9de0a6/40.png" class="avatar"> raja:</div>
<blockquote>
<aside class="quote no-group" data-username="Patrick" data-post="466" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/2848_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Where should the distrust bootloader config file be placed?</p>
</blockquote>
</aside>
<p>I am also not to sure where exactly the distrust bootloader should go.</p>
</blockquote>
</aside>
<p>Please add the the “normal” file.</p>
<aside class="quote no-group" data-username="raja" data-post="467" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9de0a6/40.png" class="avatar"> raja:</div>
<blockquote>
<p>Using these two will likely cause issues with GPU passthrough.</p>
</blockquote>
</aside>
<p>GPU passthrough is quite complicated for users to do, not documented, not popular? Not a good reason to not do this? I.e. these options should be set?</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/raja'><span itemprop='name'>raja</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-07-12T18:57:43Z' class='post-time'>
                July 12, 2022,  6:57pm
              </time>
              <meta itemprop='dateModified' content='2022-07-12T18:57:43Z'>
          <span itemprop='position'>#470</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubpullrequest" data-onebox-src="../../../../external.html?link=https://github.com/Kicksecure/security-misc/pull/111">
  <header class="source">

      <a href="../../../../external.html?link=https://github.com/Kicksecure/security-misc/pull/111" target="_blank" rel="noopener nofollow ugc">github.com/Kicksecure/security-misc</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewbox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../../external.html?link=https://github.com/Kicksecure/security-misc/pull/111" target="_blank" rel="noopener nofollow ugc">Increased kernel hardening at boot</a>
    </h4>

    <div class="branches">
      <code>Kicksecure:master</code> ← <code>raja-grewal:harden</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-07-12" data-time="18:57:06" data-timezone="UTC">06:57PM - 12 Jul 22 UTC</span>
      </div>

      <div class="user">
        <a href="../../../../external.html?link=https://github.com/raja-grewal" target="_blank" rel="noopener nofollow ugc">
          <img alt="raja-grewal" src="../../../../external.html?link=https://avatars.githubusercontent.com/u/79781370?v=4" class="onebox-avatar-inline" width="20" height="20">
          raja-grewal
        </a>
      </div>

      <div class="lines" title="8 commits changed 5 files with 28 additions and 2 deletions">
        <a href="../../../../external.html?link=https://github.com/Kicksecure/security-misc/pull/111/files" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+28</span>
          <span class="removed">-2</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">Please refer to the existing discussion beginning at:
https://forums.whonix.org<span class="show-more-container"><a href="../../../../external.html?link=https://github.com/Kicksecure/security-misc/pull/111" target="_blank" rel="noopener nofollow ugc" class="show-more">…</a></span><span class="excerpt hidden">/t/kernel-hardening/7296/465

In summary:
- Enforce IOMMU TLB invalidation
- Distrust the bootloader as source of entropy
- Enables randomisation of the kernel stack offset on syscall entries
- Disables slub_debug due to kernel deciding to implicitly disable kernel pointer hashing
- Explicitly highlight a few existing sysctl defaults</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-07-12T19:02:28Z' class='post-time'>
                July 12, 2022,  7:02pm
              </time>
              <meta itemprop='dateModified' content='2022-07-12T19:02:28Z'>
          <span itemprop='position'>#471</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Does this work for your on the host operating system?</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/raja'><span itemprop='name'>raja</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-07-12T19:13:30Z' class='post-time'>
                July 12, 2022,  7:13pm
              </time>
              <meta itemprop='dateModified' content='2022-07-12T19:13:30Z'>
          <span itemprop='position'>#472</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Are you having issues?</p>
<p>On Arch with systemd all of these have been working fine for me for  a while.<br>
Linux pc 5.18.10-hardened1-1-hardened <span class="hashtag">#1</span> SMP PREEMPT_DYNAMIC Fri, 08 Jul 2022 20:53:33 +0000 x86_64 GNU/Linux</p>
<p>I will investigate more thoroughly.</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-07-12T20:12:08Z' class='post-time'>
                July 12, 2022,  8:12pm
              </time>
              <meta itemprop='dateModified' content='2022-07-12T20:12:08Z'>
          <span itemprop='position'>#473</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="raja" data-post="472" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/r/9de0a6/40.png" class="avatar"> raja:</div>
<blockquote>
<p>Are you having issues?</p>
</blockquote>
</aside>
<p>Not tested yet.</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="../7296f62c.html?page=20">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../72963c09.html?page=22">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
