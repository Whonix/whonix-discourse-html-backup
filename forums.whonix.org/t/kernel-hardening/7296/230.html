<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Kernel Hardening - #230 by Patrick_mobile - Development - Whonix Forum</title>
    <meta name="description" content="Whonix should implement more kernel hardening. All of these settings add no or a very minimal performance decrease. 
Setting “kernel.kptr_restrict=1” makes kernel symbols in /proc/kallsyms only accessible to root which c&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../72961448.html?page=10" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Kernel Hardening&#39;" href="../7296.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/kernel-hardening/7296/230" />
<meta name="twitter:url" content="https://forums.whonix.org/t/kernel-hardening/7296/230" />
<meta property="og:title" content="Kernel Hardening" />
<meta name="twitter:title" content="Kernel Hardening" />
<meta property="og:description" content="Good point.  Here is a related bug report:  https://bugs.launchpad.net/ubuntu/+source/linux/+bug/759725  Summary:   Ubuntu seems to harden this already.   Kees Cook (kees) wrote on 2011-04-25:  #3  This mode change is “by design”. For local admins that what to relax this restriction, you can use dpkg-statoverride:  sudo dpkg-statoverride --add root root 0644 /boot/vmlinuz-$(uname -r) --update  To have this automatically happen with each new kernel, create /etc/kernel/postinst.d/statoverride:   ...." />
<meta name="twitter:description" content="Good point.  Here is a related bug report:  https://bugs.launchpad.net/ubuntu/+source/linux/+bug/759725  Summary:   Ubuntu seems to harden this already.   Kees Cook (kees) wrote on 2011-04-25:  #3  This mode change is “by design”. For local admins that what to relax this restriction, you can use dpkg-statoverride:  sudo dpkg-statoverride --add root root 0644 /boot/vmlinuz-$(uname -r) --update  To have this automatically happen with each new kernel, create /etc/kernel/postinst.d/statoverride:   ...." />
<meta property="article:published_time" content="2019-11-22T09:21:44+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="../72960b08.html?page=9">
        <link rel="next" href="../72961c8b.html?page=11">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../7296.html">Kernel Hardening</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-10T13:37:40Z' class='post-time'>
                November 10, 2019,  1:37pm
              </time>
              <meta itemprop='dateModified' content='2019-11-10T13:37:40Z'>
          <span itemprop='position'>#224</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>system.map issue.</p>
<blockquote>
<p>sudo make install<br>
make -C /lib/modules/4.19.0-6-amd64/build M=/home/user/sourcesother/lkrg-0.7 modules_install<br>
make[1]: Entering directory ‘/usr/src/linux-headers-4.19.0-6-amd64’<br>
INSTALL /home/user/sourcesother/lkrg-0.7/p_lkrg.ko<br>
DEPMOD  4.19.0-6-amd64<br>
<strong>Warning: modules_install: missing ‘System.map’ file. Skipping depmod.</strong><br>
make[1]: Leaving directory ‘/usr/src/linux-headers-4.19.0-6-amd64’<br>
depmod -a<br>
/home/user/sourcesother/lkrg-0.7/scripts/bootup/lkrg-bootup.sh install<br>
[*] Executing LKRG’s bootup installation script<br>
[+] Systemd detected<br>
Installing lkrg.service file under /run/systemd/system folder<br>
Enabling lkrg.service on bootup<br>
Created symlink /etc/systemd/system/multi-user.target.wants/lkrg.service → /run/systemd/system/lkrg.service.<br>
To start lkrg.service please use: systemctl start lkrg<br>
[+]</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-18T17:21:08Z' class='post-time'>
                November 18, 2019,  5:21pm
              </time>
              <meta itemprop='dateModified' content='2019-11-18T17:21:08Z'>
          <span itemprop='position'>#225</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>We should use the <code>init_on_alloc=1</code> and <code>init_on_free=1</code> boot parameters once they get to the Debian stable kernel.</p>
<p><a href="../../../../external.html?link=https://lore.kernel.org/kernel-hardening/20190626121943.131390-2-glider@google.com/" class="onebox" target="_blank">https://lore.kernel.org/kernel-hardening/20190626121943.131390-2-glider@google.com/</a></p>
<blockquote>
<p>init_on_alloc=1 makes the kernel initialize newly allocated pages and heap objects with zeroes.</p>
<p>init_on_free=1 makes the kernel initialize freed pages and heap objects with zeroes upon their deletion. This helps to ensure sensitive data doesn’t leak via use-after-free accesses.</p>
</blockquote>
<p>I am not sure what the difference between <code>init_on_free=1</code> and <code>page_poison=1</code> is. They seem to do the same.</p>
<p>The link above says</p>
<blockquote>
<p>If either SLUB poisoning or page poisoning is enabled, we disable<br>
init_on_alloc and init_on_free so that initialization doesn’t interfere<br>
with debugging.</p>
</blockquote>
<p>So I’m not sure which to use.</p>
<p>There is a Tails ticket for this <a href="../../../../external.html?link=https://redmine.tails.boum.org/code/issues/17236">https://redmine.tails.boum.org/code/issues/17236</a> and they also use <code>page_poison=1</code> so we should wait and see what they say.</p>
<p>linux-hardened seems to prefer init_on_free over page_poison.</p>
<p><a href="../../../../external.html?link=https://git.archlinux.org/svntogit/packages.git/tree/trunk/config?h=packages/linux-hardened#n9814" class="onebox" target="_blank">https://git.archlinux.org/svntogit/packages.git/tree/trunk/config?h=packages/linux-hardened#n9814</a></p>
<p><a href="../../../../external.html?link=https://git.archlinux.org/svntogit/packages.git/tree/trunk/config?h=packages/linux-hardened#n10248" class="onebox" target="_blank">https://git.archlinux.org/svntogit/packages.git/tree/trunk/config?h=packages/linux-hardened#n10248</a></p>
<p>Also see <a href="../../../../external.html?link=https://outflux.net/blog/archives/2019/11/14/security-things-in-linux-v5-3/">https://outflux.net/blog/archives/2019/11/14/security-things-in-linux-v5-3/</a></p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-19T19:16:45Z' class='post-time'>
                November 19, 2019,  7:16pm
              </time>
              <meta itemprop='dateModified' content='2019-11-19T19:16:45Z'>
          <span itemprop='position'>#226</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://github.githubassets.com/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://github.com/jonoberheide/ksymhunter" target="_blank">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="../../../../external.html?link=https://avatars1.githubusercontent.com/u/506986?s=400&amp;v=4" class="thumbnail" width="" height="">

<h3><a href="../../../../external.html?link=https://github.com/jonoberheide/ksymhunter" target="_blank">jonoberheide/ksymhunter</a></h3>

<p>Routines for hunting down kernel symbols. Contribute to jonoberheide/ksymhunter development by creating an account on GitHub.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>The program doesn’t work for me but it has a neat list of areas to look for kernel symbols.</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/jonoberheide/ksymhunter/blob/master/ksymhunter.c#L65" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="../../../../external.html?link=https://github.com/jonoberheide/ksymhunter/blob/master/ksymhunter.c#L65" target="_blank">jonoberheide/ksymhunter/blob/master/ksymhunter.c#L65</a></h4>
<pre class="onebox"><code class="lang-c"><ol class="start lines" start="55" style="counter-reset: li-counter 54 ;">
<li>
</li>
<li>#define REMOTE_HOST "kernelvulns.org"</li>
<li>#define REMOTE_PORT "80"</li>
<li>
</li>
<li>struct source {</li>
<li>	int args;</li>
<li>	char *fmt;</li>
<li>	unsigned long (*fp) (char *, char *);</li>
<li>};</li>
<li>
</li>
<li class="selected">struct source sources[] = {</li>
<li>	SYSMAP_0("/proc/kallsyms"),</li>
<li>	SYSMAP_0("/proc/ksyms"),</li>
<li>	SYSMAP_1("/boot/System.map-%s"),</li>
<li>	SYSMAP_2("/boot/System.map-genkernel-%s-%s"),</li>
<li>	SYSMAP_1("/System.map-%s"),</li>
<li>	SYSMAP_2("/System.map-genkernel-%s-%s"),</li>
<li>	SYSMAP_1("/usr/src/linux-%s/System.map"),</li>
<li>	SYSMAP_1("/lib/modules/%s/System.map"),</li>
<li>	SYSMAP_0("/boot/System.map"),</li>
<li>	SYSMAP_0("/System.map"),</li>
</ol></code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>I can’t find any kernel symbol leaks in these directories/files but it lists the kernel images and I don’t know how to check those for symbols.</p>
<p>Why are the kernel images readable by all users anyway? Shouldn’t it be restricted to root?</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-19T19:29:51Z' class='post-time'>
                November 19, 2019,  7:29pm
              </time>
              <meta itemprop='dateModified' content='2019-11-19T19:29:51Z'>
          <span itemprop='position'>#227</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Linus Torvalds has also said interesting things about these leaks.</p>
<p><a href="../../../../external.html?link=https://www.openwall.com/lists/kernel-hardening/2017/10/05/5" class="onebox" target="_blank">https://www.openwall.com/lists/kernel-hardening/2017/10/05/5</a></p>
<blockquote>
<p>And yes, as Kees and Daniel mentioned, it’s definitely not just dmesg. In fact, the primary things tend to be /proc and /sys, not dmesg itself.</p>
<p>Another example of this would be commit 31b0b385f69d (“nf_conntrack: avoid kernel pointer value leak in slab name”), where the fact that the slab name had a pointer in it leaked it in the <em>filenames</em> in /sys, because we export slab statistics under /sys/kernel/slab/. And each file was readable only by root, but the file <em>names</em> were readable by everybody.</p>
</blockquote>
<p>The full system apparmor profile gives fine-grained access to /sys and /proc so that would make kernel pointer leaks very unlikely.</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
              split this topic 
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-20T08:37:52Z' class='post-time'>
                November 20, 2019,  8:37am
              </time>
              <meta itemprop='dateModified' content='2019-11-20T08:37:52Z'>
          <span itemprop='position'>#228</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>A post was merged into an existing topic: <a href="../../kernel-recompilation-for-better-hardening/7598/111.html">kernel recompilation for better hardening</a></p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick_mobile'><span itemprop='name'>Patrick_mobile</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T09:21:44Z' class='post-time'>
                November 22, 2019,  9:21am
              </time>
              <meta itemprop='dateModified' content='2019-11-22T09:21:44Z'>
          <span itemprop='position'>#230</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="226" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>Why are the kernel images readable by all users anyway? Shouldn’t it be restricted to root?</p>
</blockquote>
</aside>
<p>Good point.</p>
<p>Here is a related bug report:<br>
<a href="../../../../external.html?link=https://bugs.launchpad.net/ubuntu/+source/linux/+bug/759725" class="onebox" target="_blank" rel="nofollow noopener">https://bugs.launchpad.net/ubuntu/+source/linux/+bug/759725</a></p>
<p>Summary:</p>
<ul>
<li>Ubuntu seems to harden this already.</li>
</ul>
<blockquote>
<p><a href="../../../../external.html?link=https://launchpad.net/~kees" rel="nofollow noopener">Kees Cook (kees)</a> wrote on 2011-04-25: <a href="../../../../external.html?link=https://bugs.launchpad.net/ubuntu/+source/linux/+bug/759725/comments/3" rel="nofollow noopener"> #3</a></p>
<p>This mode change is “by design”. For local admins that what to relax this restriction, you can use dpkg-statoverride:</p>
<p>sudo dpkg-statoverride --add root root 0644 /boot/vmlinuz-$(uname -r) --update</p>
<p>To have this automatically happen with each new kernel, create /etc/kernel/postinst.d/statoverride:</p>
</blockquote>
<p>.</p>
<pre><code class="lang-auto">#!/bin/sh
version="$1"
# passing the kernel version is required
[ -z "${version}" ] &amp;&amp; exit 0
dpkg-statoverride --add root root 0644 /boot/vmlinuz-${version} --update
</code></pre>
<ul>
<li>breaks some KVM use cases</li>
</ul>
<blockquote>
<p>It is fairly common practice to boot kvm or qemu with something like:<br>
kvm -kernel /boot/vmlinuz-$(uname -r)</p>
</blockquote>
<ul>
<li>It might break simpler malware relying on this. It wouldn’t break more sophisticated malware - for that we couldn’t use a public kernel image - kernel would have to be (automatically) re-compiled at user’s machine (<a href="../../kernel-recompilation-for-better-hardening/7598.html" class="inline-onebox">kernel recompilation for better hardening</a>) ([+ have different entry / kernel symbol locations, of course. If we’re unlucky, the user would reproducible compile the very same kernel?].</li>
</ul>
<blockquote>
<p><a href="../../../../external.html?link=https://launchpad.net/~rich-annexia" rel="nofollow noopener">Richard W.M. Jones (rich-annexia)</a> wrote on 2011-04-26: <a href="../../../../external.html?link=https://bugs.launchpad.net/ubuntu/+source/linux/+bug/759725/comments/5" rel="nofollow noopener"> #5</a></p>
<p>What is being protected by this mode change? This kernel is distributed<br>
on hundreds of mirrors – there is no secret in here.</p>
</blockquote>
<blockquote>
<p><a href="../../../../external.html?link=https://launchpad.net/~kees" rel="nofollow noopener">Kees Cook (kees)</a> wrote on 2011-04-26: <a href="../../../../external.html?link=https://bugs.launchpad.net/ubuntu/+source/linux/+bug/759725/comments/6" rel="nofollow noopener"> <strong>Re: [Bug 759725] Re: The kernel is no longer readable by non-root users</strong> </a></p>
</blockquote>
<blockquote>
<p>The mode changes do not protect a system from any dedicated attacker (for<br>
the reason you state), but it does have real-world benefits against<br>
simplistic kernel exploitation (keeping kernel symbols away from non-root<br>
users). It is absolutely a trade-off.</p>
</blockquote>
<blockquote>
<p><a href="../../../../external.html?link=https://launchpad.net/~kees" rel="nofollow noopener">Kees Cook (kees)</a> wrote on 2011-04-26:</p>
</blockquote>
<blockquote>
<p>I am not saying they’re hidden from being looked up externally (just fetching the kernel package’s System.map file is easiest). But because the symbols can be extracted in the way you point out is why the kernel image itself needs to be unreadable. This change is to block the class of attacks carried out by script kiddies and automated systems that expect to be able to look up symbols locally and make exploits totally portable to all kernel versions. It changes the nature of future attacks, at least forcing attackers to take additional steps.</p>
</blockquote>
<ul>
<li>might break guestmount / libguestfs</li>
<li>might affect OpenStack</li>
<li>might break tftpd serving /boot to netboot clients</li>
<li>might break hobbit-plugins (whatever that is)</li>
</ul>
<blockquote>
<p><a href="../../../../external.html?link=https://launchpad.net/~rich-annexia" rel="nofollow noopener">Richard W.M. Jones (rich-annexia)</a> wrote on 2011-04-26: <a href="../../../../external.html?link=https://bugs.launchpad.net/ubuntu/+source/linux/+bug/759725/comments/8" rel="nofollow noopener"> #8</a></p>
<p>By the way, I myself actually wrote code that walks through the kernel memory<br>
finding the location of the symbols. You’re not gaining any extra security by<br>
making this change, but you are making Ubuntu less useful.</p>
<p><a href="../../../../external.html?link=http://git.annexia.org/?p=virt-mem.git;a=blob;f=lib/virt_mem_kallsyms.ml;h=9e6eccb6629a2ea067ee46a7c690aea17e44c0d2;hb=HEAD#l39" rel="nofollow noopener">http://git.annexia.org/?p=virt-mem.git;a=blob;f=lib/virt_mem_kallsyms.ml;h=9e6eccb6629a2ea067ee46a7c690aea17e44c0d2;hb=HEAD#l39</a><br>
<a href="../../../../external.html?link=http://git.annexia.org/?p=virt-mem.git;a=blob;f=lib/virt_mem_ksyms.ml;h=8a38caec5b9fa05904c3b9e8b5fcdb76871f27ae;hb=HEAD#l29" rel="nofollow noopener">http://git.annexia.org/?p=virt-mem.git;a=blob;f=lib/virt_mem_ksyms.ml;h=8a38caec5b9fa05904c3b9e8b5fcdb76871f27ae;hb=HEAD#l29</a></p>
</blockquote>
<ul>
<li>^ -&gt; <strong>User should not have access to <code>/proc/kallsyms</code> too? Doable? Any side effects?</strong> Then we can protect from above enumeration too.</li>
</ul>
<p>I would go as far as saying that <strong>non-root users by default shouldn’t be able to read any file in <code>/boot</code>?</strong> Let’s use dpkg-statoverwrite or something to restrict access so only members of linux group <code>boot</code> can read it?</p>
<ol>
<li>
<p>create linux group <code>boot</code> (or similarly named?) -&gt; <a href="../../port-to-sysusers-d-mechanism/8120.html" class="inline-onebox">Port to sysusers.d mechanism?</a></p>
</li>
<li>
</li>
</ol>
<pre><code>sudo chgrp --recursive boot /boot
</code></pre>
<ol start="3">
<li>
</li>
</ol>
<pre><code>sudo chmod --recursive o-r /boot</code></pre>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T14:29:50Z' class='post-time'>
                November 22, 2019,  2:29pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T14:29:50Z'>
          <span itemprop='position'>#231</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Something here that we don’t have yet? <a href="../../../../external.html?link=https://trent.utfs.org/wiki/Hardening/Linux">https://trent.utfs.org/wiki/Hardening/Linux</a></p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T16:22:58Z' class='post-time'>
                November 22, 2019,  4:22pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T16:22:58Z'>
          <span itemprop='position'>#232</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="230" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<ul>
<li>breaks some KVM use cases</li>
</ul>
</blockquote>
</aside>
<p>Those only seem to be for the host so won’t apply to Whonix VMs.</p>
<aside class="quote no-group" data-post="230" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>^ -&gt; <strong>User should not have access to <code>/proc/kallsyms</code> too? Doable? Any side effects?</strong> Then we can protect from above enumeration too.</p>
</blockquote>
</aside>
<p>Not needed. <code>kernel.kptr_restrict=2</code> already fixes this exact issue. Run <code>cat /proc/kallsyms</code> and you’ll see all addresses have been replaced with <code>0000000000000000</code>.</p>
<p>Making it unreadable won’t have any advantage.</p>
<aside class="quote no-group" data-post="230" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>I would go as far as saying that <strong>non-root users by default shouldn’t be able to read any file in <code>/boot</code> ?</strong></p>
</blockquote>
</aside>
<p>I would agree with that.</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick_mobile'><span itemprop='name'>Patrick_mobile</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T16:28:18Z' class='post-time'>
                November 22, 2019,  4:28pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T16:28:18Z'>
          <span itemprop='position'>#233</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Yes. Could you implement this please?</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T16:28:40Z' class='post-time'>
                November 22, 2019,  4:28pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T16:28:40Z'>
          <span itemprop='position'>#234</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="231" data-topic="7296" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Something here that we don’t have yet? <a href="../../../../external.html?link=https://trent.utfs.org/wiki/Hardening/Linux">https://trent.utfs.org/wiki/Hardening/Linux</a></p>
</blockquote>
</aside>
<p><a href="../../../../external.html?link=https://trent.utfs.org/wiki/Hardening/Linux#Permission_lockdown">https://trent.utfs.org/wiki/Hardening/Linux#Permission_lockdown</a> and <a href="../../../../external.html?link=https://trent.utfs.org/wiki/Hardening/Linux#.2Fproc">https://trent.utfs.org/wiki/Hardening/Linux#.2Fproc</a> (apparmor is probably a far better way to restrict access to /proc anyway as we can remove access for files entirely) look interesting.</p>
<p>I’ve been thinking of hardening file permissions for a while but don’t have many ideas except restricting /boot.</p>
<p>There is also more here <a href="../../../../external.html?link=https://wiki.archlinux.org/index.php/Security#File_access_permissions">https://wiki.archlinux.org/index.php/Security#File_access_permissions</a></p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T16:31:13Z' class='post-time'>
                November 22, 2019,  4:31pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T16:31:13Z'>
          <span itemprop='position'>#235</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="233" data-topic="7296" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>Yes. Could you implement this please?</p>
</blockquote>
</aside>
<p>Where? Maybe <a href="../../../../external.html?link=https://github.com/Whonix/security-misc/blob/master/usr/lib/security-misc/permission-lockdown">https://github.com/Whonix/security-misc/blob/master/usr/lib/security-misc/permission-lockdown</a> or /etc/kernel/postinst.d? permission-lockdown can also be used for other file permission hardening.</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick_mobile'><span itemprop='name'>Patrick_mobile</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T16:40:38Z' class='post-time'>
                November 22, 2019,  4:40pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T16:40:38Z'>
          <span itemprop='position'>#236</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="230" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<ol>
<li>create linux group <code>boot</code> (or similarly named?) -&gt; <a href="../../port-to-sysusers-d-mechanism/8120.html">Port to sysusers.d mechanism?</a>
</li>
</ol>
<pre><code class="lang-auto">sudo chgrp --recursive boot /boot
</code></pre>
<pre><code class="lang-auto">sudo chmod --recursive o-r /boot
</code></pre>
</blockquote>
</aside>
<p>Should be sufficient in the security-misc postinst script. If “others” aren’t allowed to read /boot and if only members of group “boot” and root can read /boot, I doesn’t have to be reapplied again and again. Could be protected by a do_once status file to allow easier customization (undo by sysadmin).</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick_mobile'><span itemprop='name'>Patrick_mobile</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T16:43:38Z' class='post-time'>
                November 22, 2019,  4:43pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T16:43:38Z'>
          <span itemprop='position'>#237</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="235" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>permission-lockdown can also be used for other file permission hardening.</p>
</blockquote>
</aside>
<p>If we must. If not avoidable through more efficient / appropriate solution. That script runs a lot. Could slow down performance. Would require multiple status _done files.</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T16:48:02Z' class='post-time'>
                November 22, 2019,  4:48pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T16:48:02Z'>
          <span itemprop='position'>#238</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="237" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>Could slow down performance.</p>
</blockquote>
</aside>
<p>Changing permissions wouldn’t slow down performance much.</p>
<aside class="quote no-group" data-post="237" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/p/898d66/40.png" class="avatar"> Patrick_mobile:</div>
<blockquote>
<p>Would require multiple status _done files.</p>
</blockquote>
</aside>
<p>We could do this instead:</p>
<pre><code>if ! [ "$(stat -c %a /boot/)" = "700" ]; then
</code></pre>
<p>If you want it to be configurable, we can create a /etc/permission-lockdown.d folder for user configurations.</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T17:21:29Z' class='post-time'>
                November 22, 2019,  5:21pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T17:21:29Z'>
          <span itemprop='position'>#239</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-post="238" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<blockquote>
<p>Would require multiple status _done files.</p>
</blockquote>
<p>We could do this instead:</p>
<pre><code class="lang-auto">if ! [ "$(stat -c %a /boot/)" = "700" ]; then
</code></pre>
</blockquote>
</aside>
<p>The idea of the _done file to do this one once and then don’t bother the sysadmin with it anymore.</p>
<aside class="quote no-group quote-modified" data-post="238" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>if ! [ “$(stat -c %a /boot/)” = “700” ]; then</p>
</blockquote>
</aside>
<p>More error prone. This might work now (untested) but could break as distribution change things. Better to just run the commands to set the right permissions.</p>
<aside class="quote no-group" data-post="238" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>If you want it to be configurable, we can create a /etc/permission-lockdown.d folder for user configurations.</p>
</blockquote>
</aside>
<p>It’s already configurable though <code>sudo pam-auth-update</code> (then disable permission lockdown by security-misc) if someone ever asks about it. Not sure further configurability is required.</p>
<p>I don’t like <a href="../../../../external.html?link=https://github.com/Whonix/security-misc/blob/master/usr/lib/security-misc/permission-lockdown">https://github.com/Whonix/security-misc/blob/master/usr/lib/security-misc/permission-lockdown</a> much. It runs every time “sudo” runs or someone logins. Whenever pam is being invoked. Therefore spams systemd journal. Back then I didn’t have better ideas to implement it so permissions for existing users (those who upgrade) will be locked down.</p>
<p>My thinking maybe was: permission-lockdown cannot run only at postinst - since during build time, no /home/user folder exists. It is created during first login using pam mkhomedir.</p>
<p>Perhaps permission-lockdown could</p>
<ul>
<li>run at postinst to lockdown existing user’s home folders.</li>
<li>And then pam mkhomedir with <code>umask=</code> parameter could create new home folders (at first boot time) with already locked down permissions.</li>
</ul>
<p>(locked down meaning: “others” cannot read. Not “world” readable.)</p>
<p>However, for purposes of locking down /boot, I think that is perfectly doable from security-misc postinst?</p>
<p><a href="../../../../external.html?link=https://github.com/Whonix/security-misc/blob/master/debian/security-misc.postinst">https://github.com/Whonix/security-misc/blob/master/debian/security-misc.postinst</a></p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T17:44:47Z' class='post-time'>
                November 22, 2019,  5:44pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T17:44:47Z'>
          <span itemprop='position'>#240</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="239" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>It’s already configurable though <code>sudo pam-auth-update</code> (then disable permission lockdown by security-misc) if someone ever asks about it. Not sure further configurability is required.</p>
</blockquote>
</aside>
<p>I meant allowing people to choose to disable/enable /home, /boot etc. restrictions (once they’re added) as they wish.</p>
<aside class="quote no-group" data-post="239" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>However, for purposes of locking down /boot, I think that is perfectly doable from security-misc postinst?</p>
</blockquote>
</aside>
<p>I would prefer to have something periodically check and restrict /boot in case the permissions get changed for whatever reason. If a user wants to have the permissions changed, they can disable permission-lockdown (or change specific settings like I said above).</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T17:56:06Z' class='post-time'>
                November 22, 2019,  5:56pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T17:56:06Z'>
          <span itemprop='position'>#241</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="240" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>I meant allowing people to choose to disable/enable /home, /boot etc. restrictions (once they’re added) as they wish.</p>
</blockquote>
</aside>
<p>Since it’s only done once (and by the time they want to change the setting that setting is already turned on), it’s even easier for them to just change the permissions back to what they want. Thanks to the _done file, the sysadmin won’t be bothered with this ever again.</p>
<aside class="quote no-group" data-post="240" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>I would prefer to have something periodically check and restrict /boot in case the permissions get changed for whatever reason.</p>
</blockquote>
</aside>
<p>Why would anything package work on permissions on folder <code>/boot</code> directly? Or what else could change it?</p>
<p>Even if permissions for things inside folder /boot/something change (Debian deciding to change permissions for kernel image or something), that file would stay inaccessible since the root of the folder (i.e. <code>/boot</code>) already has the correct permissions.</p>
<p>If it should be something more periodic…More enforcing…<br>
(Yet configureable. (?))<br>
(And “non-opaque”.)<br>
What about systemd’s <code>/usr/lib/tmpfiles.d</code> mechanism? Also looks quite appropriate?<br>
(No, not just temp files. Yes, some files there configure permissions for persistent folders such as /var/log or /var/cache.)<br>
Would that work?</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T18:10:21Z' class='post-time'>
                November 22, 2019,  6:10pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T18:10:21Z'>
          <span itemprop='position'>#242</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="241" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Since it’s only done once (and by the time they want to change the setting that setting is already turned on), it’s even easier for them to just change the permissions back to what they want.</p>
</blockquote>
</aside>
<p>What if they don’t remember what the permissions were or aren’t technical enough to change them back to what they want?</p>
<p>I think it would be good to save the default permission and reset it if the user chooses too.</p>
<aside class="quote no-group" data-post="241" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Why would anything package work on permissions on folder <code>/boot</code> directly? Or what else could change it?</p>
</blockquote>
</aside>
<p>Just in case. E.g. a user’s mistake or misconfigured script can do that.</p>
<p>You wouldn’t want accidental read-write access to kernel images.</p>
<p>Permissions may be more likely to change for other folders we might restrict in the future.</p>
<aside class="quote no-group" data-post="241" data-topic="7296">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>What about systemd’s <code>/usr/lib/tmpfiles.d</code> mechanism? Also looks quite appropriate?</p>
</blockquote>
</aside>
<p>That looks great actually. Seems like a far better approach.</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T18:13:02Z' class='post-time'>
                November 22, 2019,  6:13pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T18:13:02Z'>
          <span itemprop='position'>#243</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>OpenSUSE actually has a package that changes the file permissions.</p>
<p><a href="../../../../external.html?link=https://en.opensuse.org/openSUSE:Security_Documentation" class="onebox" target="_blank">https://en.opensuse.org/openSUSE:Security_Documentation</a></p>
<blockquote>
<ul>
<li>the easy profile has a focus on ease of use where more program features work out of the box without the user having to intervene. It also means that there is a larger security attack surface. It can be used for typical single user desktop systems when usability is favored over stricter security.</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>the secure profile is more security oriented and disables certain program privileges. This can result in some program features not being available or behaving less conventiently. It can be used for typical server or multi-user host machines.</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>the paranoid profile is a tightly locked down set of settings that isn’t fully usable in production, because a lot of program features will stop working. This should only be used when security is the major requirement and when you are willing to tune the profile into a state where you can perform the task you want to fullfill with the system.</li>
</ul>
</blockquote>
<p>I can’t find the permissions file anywhere online to see what they do. I’ll setup a VM to check.</p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../7296.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-22T18:42:14Z' class='post-time'>
                November 22, 2019,  6:42pm
              </time>
              <meta itemprop='dateModified' content='2019-11-22T18:42:14Z'>
          <span itemprop='position'>#244</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Here is opensuse’s configuration.</p>
<p>permissions.secure: <a href="../../../../external.html?link=https://paste.debian.net/hidden/872cc5ed/">https://paste.debian.net/hidden/872cc5ed/</a></p>
<p>permissions.paranoid: <a href="../../../../external.html?link=https://paste.debian.net/hidden/9cc67712/">https://paste.debian.net/hidden/9cc67712/</a></p>
        </div>

        <meta itemprop='headline' content='Kernel Hardening'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="../72960b08.html?page=9">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../72961c8b.html?page=11">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
