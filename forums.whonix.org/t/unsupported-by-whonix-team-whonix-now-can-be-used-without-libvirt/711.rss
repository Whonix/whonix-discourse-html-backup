<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[unsupported by Whonix team] Whonix now can be used without libvirt</title>
    <link>http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711</link>
    <description>New versions of KVM no longer have memory issues of memory overfill. Libvirt&#39;s no longer needed to run whonix. To get the correct command for running, install aqemu, create 2 VMs and attach both images. Aqemu will generate the appropriate commands for running the OS. The thing is that old qemu commands like accel=kvm make the networking  not working between the VMs, that&#39;s why aqemu is needed. With commands generated by aqemu you can run VMs from commandline and no modifications of firewalls are needed. Example command:
/usr/bin/qemu-system-x86_64 -monitor stdio -enable-kvm -m 320 -drive file=&quot;/home/user/Whonix-Gateway/Whonix-Gateway-9.2.0.0.qcow2&quot;,if=scsi -boot once=c,menu=on -net nic,vlan=0,macaddr=00:e0:2a:a1:e4:d2,model=rtl8139 -net user,vlan=0 -net nic,vlan=1,macaddr=00:e0:4c:c5:1a:d1,model=rtl8139 -net socket,vlan=1,listen=127.0.0.1:12222 -name &quot;gateway&quot;
/usr/bin/qemu-system-x86_64 -monitor stdio -smp 2,cores=1,threads=1,sockets=1 -cpu  host -vga qxl -enable-kvm -m 1435 -full-screen -drive file=&quot;/home/user/Whonix-Workstation/Whonix-Workstation-9.2.0.0.qcow2&quot;,if=virtio -net nic,vlan=1,macaddr=DE:BE:BE:DE:A0:1C,model=rtl8139 -net socket,vlan=1,connect=127.0.0.1:12222 -no-frame -name &quot;workstation&quot;

Edit by Patrick:
changed title</description>
    <language>en</language>
    <lastBuildDate>Thu, 03 Sep 2015 22:47:29 +0000</lastBuildDate>
    <category>KVM</category>
    <atom:link href="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[unsupported by Whonix team] Whonix now can be used without libvirt</title>
        <dc:creator><![CDATA[praedor]]></dc:creator>
        <description><![CDATA[
            <p>[quote=“praedor, post:9, topic:711”]Tried building aqemu but failed.  There must be something missing in the list of required libs.  I get through cmake OK and the build ALMOST completes but it fails late<br>
CMakeFiles/aqemu.dir/build.make:1366: recipe for target ‘CMakeFiles/aqemu.dir/Embedded_Display/vncview.o’ failed<br>
make[2]: *** [CMakeFiles/aqemu.dir/Embedded_Display/vncview.o] Error 1<br>
CMakeFiles/Makefile2:60: recipe for target ‘CMakeFiles/aqemu.dir/all’ failed<br>
make[1]: *** [CMakeFiles/aqemu.dir/all] Error 2<br>
Makefile:117: recipe for target ‘all’ failed<br>
make: *** [all] Error 2</p>
<p>Back to libvirt and having to redo my partition table (SUCKS!)[/quote]</p>
<p>Got it to build, finally.  Had to comment out part of vncview.cpp and then it built and works BUT cannot get Whonix to actually display.  I can (apparently) get it to run but no screen, making it pretty useless.  I’m just going to go back to standard kvm/qemu/libvirt.</p>
          <p><a href="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/10</link>
        <pubDate>Thu, 03 Sep 2015 22:47:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-711-10</guid>
        <source url="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711.rss">[unsupported by Whonix team] Whonix now can be used without libvirt</source>
      </item>
      <item>
        <title>[unsupported by Whonix team] Whonix now can be used without libvirt</title>
        <dc:creator><![CDATA[praedor]]></dc:creator>
        <description><![CDATA[
            <p>Tried building aqemu but failed.  There must be something missing in the list of required libs.  I get through cmake OK and the build ALMOST completes but it fails late<br>
CMakeFiles/aqemu.dir/build.make:1366: recipe for target ‘CMakeFiles/aqemu.dir/Embedded_Display/vncview.o’ failed<br>
make[2]: *** [CMakeFiles/aqemu.dir/Embedded_Display/vncview.o] Error 1<br>
CMakeFiles/Makefile2:60: recipe for target ‘CMakeFiles/aqemu.dir/all’ failed<br>
make[1]: *** [CMakeFiles/aqemu.dir/all] Error 2<br>
Makefile:117: recipe for target ‘all’ failed<br>
make: *** [all] Error 2</p>
<p>Back to libvirt and having to redo my partition table (SUCKS!)</p>
          <p><a href="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/9</link>
        <pubDate>Thu, 03 Sep 2015 19:55:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-711-9</guid>
        <source url="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711.rss">[unsupported by Whonix team] Whonix now can be used without libvirt</source>
      </item>
      <item>
        <title>[unsupported by Whonix team] Whonix now can be used without libvirt</title>
        <dc:creator><![CDATA[xin]]></dc:creator>
        <description><![CDATA[
            <p>Indeed, it may be used with kvm. No memory issues. Works faster than with libvirt and better security.</p>
          <p><a href="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/8</link>
        <pubDate>Mon, 31 Aug 2015 23:59:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-711-8</guid>
        <source url="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711.rss">[unsupported by Whonix team] Whonix now can be used without libvirt</source>
      </item>
      <item>
        <title>[unsupported by Whonix team] Whonix now can be used without libvirt</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Still sticking to my last statement:<br>
<a href="https://www.whonix.org/forum/index.php/topic,773.msg5738.html#msg5738" class="onebox" target="_blank">https://www.whonix.org/forum/index.php/topic,773.msg5738.html#msg5738</a></p>
<p>Having that said, this could be interesting:</p>
<pre><code class="lang-auto"></code></pre>
<pre><code class="lang-auto">
LC_ALL=C PATH=/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/sbin:/sbin:/bin QEMU_AUDIO_DRV=spice /usr/bin/qemu-system-x86_64 -name Whonix-Gateway -machine ubuntu,accel=tcg,usb=off -cpu qemu64,-kvmclock,+kvm_pv_eoi,+kvm_pv_unhalt -m 512 -realtime mlock=off -smp 1,sockets=1,cores=1,threads=1 -uuid d67e18a8-ea3c-4c6d-81eb-99a6324506a6 -no-user-config -nodefaults -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/Whonix-Gateway.monitor,server,nowait -mon chardev=charmonitor,id=monitor,mode=control -rtc base=utc,clock=vm,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet -no-shutdown -global PIIX4_PM.disable_s3=1 -global PIIX4_PM.disable_s4=1 -boot strict=on -device piix3-usb-uhci,id=usb,bus=pci.0,addr=0x1.0x2 -device virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x6 -drive file=/var/lib/libvirt/images/Whonix-Gateway.qcow2,if=none,id=drive-virtio-disk0,format=qcow2 -device virtio-blk-pci,scsi=off,bus=pci.0,addr=0x7,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1 -netdev tap,id=hostnet0 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:6d:37:bc,bus=pci.0,addr=0x3 -netdev tap,id=hostnet1 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=52:54:00:ac:89:1e,bus=pci.0,addr=0x4 -chardev spicevmc,id=charchannel0,name=vdagent -device virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0 -device usb-tablet,id=input0 -spice port=5901,addr=127.0.0.1,disable-ticketing,disable-copy-paste,disable-agent-file-xfer,seamless-migration=on -device qxl-vga,id=video0,ram_size=262144000,vram_size=262144000,bus=pci.0,addr=0x2 -device intel-hda,id=sound0,bus=pci.0,addr=0x5 -device hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -device virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x8 -object rng-random,id=rng0,filename=/dev/random -device virtio-rng-pci,rng=rng0,bus=pci.0,addr=0x9 -msg timestamp=on</code></pre>
<p>Looks like a much saner method to approach this to me.</p>
          <p><a href="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/7</link>
        <pubDate>Sat, 20 Dec 2014 19:34:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-711-7</guid>
        <source url="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711.rss">[unsupported by Whonix team] Whonix now can be used without libvirt</source>
      </item>
      <item>
        <title>[unsupported by Whonix team] Whonix now can be used without libvirt</title>
        <dc:creator><![CDATA[guest00]]></dc:creator>
        <description><![CDATA[
            <p>One important thing is both your images must have permissions for your user! You may give permissions chown root:kvm name-of-image and your user must be in kvm group of course. Also beware if you start your images with libvirt the permissions to images will be returned to root and you will have to change them again.</p>
          <p><a href="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/6</link>
        <pubDate>Wed, 26 Nov 2014 14:14:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-711-6</guid>
        <source url="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711.rss">[unsupported by Whonix team] Whonix now can be used without libvirt</source>
      </item>
      <item>
        <title>[unsupported by Whonix team] Whonix now can be used without libvirt</title>
        <dc:creator><![CDATA[guest00]]></dc:creator>
        <description><![CDATA[
            <p>Denis, you do not have to import or use the supplied xml files when using qemu without libvirt. Moreover you do not have to create any bridges, the connection between vms is provided by --listen and --connect parts of the commands. Also all works fine. I activated also the workstation’s firewall and all continues to work fine. I did not have so far ip leaks.  Speed is much faster than on libvirt or VB and equals to host’s. I think you can also use images from VB version if you convert them to qcow2. I do not use any hugepages or balloon parts of the commands because all works witout from the start. You may use my commands, only change mac addresses and the connect-listen port. Find the linux command to generate correct mac addresses. Of course you can change memory size and cpu options. One disadvantage vs libvirt is that you cannot no longer use USB passthrough because it simply does not work on new qemu versions. So you will have to think how to make exchange between host and guest.<br>
Also to have good graphics on workstation you must use spice. Add the following to the workstation’s command: -spice port=5390,addr=127.0.0.1,password=mypassw,ipv4</p>
<p>And run the third command from terminal: spicec -h 127.0.0.1 -p 5390 -w mypassw<br>
Of course you must install spicec software on your host to use that command. It opens a new window in which workstation runs. And you can make it fullscrenn by pressing shift+F11</p>
          <p><a href="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/5</link>
        <pubDate>Wed, 26 Nov 2014 13:58:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-711-5</guid>
        <source url="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711.rss">[unsupported by Whonix team] Whonix now can be used without libvirt</source>
      </item>
      <item>
        <title>[unsupported by Whonix team] Whonix now can be used without libvirt</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>To officially support this, we’d need a maintainer who supports the kvm without libvirt use case.</p>
<p>Until then, it’s discouraged since a lot is missing. (Leak tests, rng (random) device and probably much more.)</p>
<p>Having said this, and having you aware of this, feel free to discuss it. Eventually someone figures out and become the maintainer.</p>
          <p><a href="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/4</link>
        <pubDate>Tue, 25 Nov 2014 22:21:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-711-4</guid>
        <source url="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711.rss">[unsupported by Whonix team] Whonix now can be used without libvirt</source>
      </item>
      <item>
        <title>[unsupported by Whonix team] Whonix now can be used without libvirt</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>By not using libvirt you lose very important things:</p>
<ol>
<li>
<p>The sVirt security confinement that uses Apparmor automatically for Guest isolation.</p>
</li>
<li>
<p>The safe and recommended settings I have provided in the libvirt xml configurations files.</p>
</li>
</ol>
<p>The OP is probably the same one from this thread: <a href="https://www.whonix.org/forum/index.php/topic,459.0.html">https://www.whonix.org/forum/index.php/topic,459.0.html</a> who insisted on running KVM directly without libvirt and I made it clear this was not supported (by me) nor recommended for the reasons I have given above.</p>
          <p><a href="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/3</link>
        <pubDate>Tue, 25 Nov 2014 22:04:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-711-3</guid>
        <source url="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711.rss">[unsupported by Whonix team] Whonix now can be used without libvirt</source>
      </item>
      <item>
        <title>[unsupported by Whonix team] Whonix now can be used without libvirt</title>
        <dc:creator><![CDATA[Dennis]]></dc:creator>
        <description><![CDATA[
            <p>Is there a help file on this? There’s none in the graphical interface. I also tried “aqemu -help” and “aqemu --help”.</p>
<p>There’s an option to save a vm as a template but I can’t see where to use/import a template. Can it use the xml files in the Whonix download?</p>
<p>The only remaining problem I have with Whonix on KVM is the failure of the hugepages option, but the networking seems to work just fine. Does AQEMU have an explicit option for huegpages? I found none in the (gui) wizard.</p>
          <p><a href="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/2</link>
        <pubDate>Tue, 25 Nov 2014 20:37:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-711-2</guid>
        <source url="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711.rss">[unsupported by Whonix team] Whonix now can be used without libvirt</source>
      </item>
      <item>
        <title>[unsupported by Whonix team] Whonix now can be used without libvirt</title>
        <dc:creator><![CDATA[guest00]]></dc:creator>
        <description><![CDATA[
            <p>New versions of KVM no longer have memory issues of memory overfill. Libvirt’s no longer needed to run whonix. To get the correct command for running, install aqemu, create 2 VMs and attach both images. Aqemu will generate the appropriate commands for running the OS. The thing is that old qemu commands like accel=kvm make the networking  not working between the VMs, that’s why aqemu is needed. With commands generated by aqemu you can run VMs from commandline and no modifications of firewalls are needed. Example command:<br>
/usr/bin/qemu-system-x86_64 -monitor stdio -enable-kvm -m 320 -drive file="/home/user/Whonix-Gateway/Whonix-Gateway-9.2.0.0.qcow2",if=scsi -boot once=c,menu=on -net nic,vlan=0,macaddr=00:e0:2a:a1:e4:d2,model=rtl8139 -net user,vlan=0 -net nic,vlan=1,macaddr=00:e0:4c:c5:1a:d1,model=rtl8139 -net socket,vlan=1,listen=127.0.0.1:12222 -name “gateway”<br>
/usr/bin/qemu-system-x86_64 -monitor stdio -smp 2,cores=1,threads=1,sockets=1 -cpu  host -vga qxl -enable-kvm -m 1435 -full-screen -drive file="/home/user/Whonix-Workstation/Whonix-Workstation-9.2.0.0.qcow2",if=virtio -net nic,vlan=1,macaddr=DE:BE:BE:DE:A0:1C,model=rtl8139 -net socket,vlan=1,connect=127.0.0.1:12222 -no-frame -name “workstation”</p>
<p>Edit by Patrick:<br>
changed title</p>
          <p><a href="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711/1</link>
        <pubDate>Tue, 25 Nov 2014 08:30:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-711-1</guid>
        <source url="http://forums.whonix.org/t/unsupported-by-whonix-team-whonix-now-can-be-used-without-libvirt/711.rss">[unsupported by Whonix team] Whonix now can be used without libvirt</source>
      </item>
  </channel>
</rss>
