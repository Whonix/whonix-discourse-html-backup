<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Thunderbird Update to 91.4.1 breaks Connection to Onion Services</title>
    <link>http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148</link>
    <description>Hi,
after the last update witch upgrades thunderbird from  78.14.0 to thunderbird 91.4.1 thunderbird &quot;failed to connect&quot; to onionservices.
downgrading thunderbird to 78.14.0 with 
`apt install thunderbird=&quot;1:78.14.0-1~deb11u1&quot;`
solved the issue but the old profile is not usable anymore. I verified the Issue on 2 different Qubes installations, tryed 2 different onionservices.
OS: Qubes 4.0
Template: whonix-16-ws

 Console Log where I try to configure a account in an empty profile with a onionservice as server  :

    13:36:07.581 Unexpected event profile-after-change URLQueryStrippingListService.jsm:224
        observe resource://gre/modules/URLQueryStrippingListService.jsm:224
    13:36:10.625 Successfully loaded OpenPGP library librnp.so version 0.15.2+git20210806.dd923a4e.MZLA from /usr/lib/thunderbird/librnp.so RNPLib.jsm:92:15
    13:36:10.863 Found 0 public keys and 0 secret keys (0 protected, 0 unprotected) RNPLib.jsm:288:15
    13:36:10.899 Trying to load /usr/lib/thunderbird/libotr.so OTRLib.jsm:64:11
    13:36:10.900 Trying to load libotr.so from system&#39;s standard library locations OTRLib.jsm:64:11
    13:36:10.900 Trying to load libotr.so.5 from system&#39;s standard library locations OTRLib.jsm:64:11
    13:36:10.903 Successfully loaded OTR library libotr.so.5 from system&#39;s standard library locations OTRLib.jsm:72:13
    13:36:11.715 Unknown Collection &quot;thunderbird/query-stripping&quot; RemoteSettingsClient.jsm:160
        UnknownCollectionError resource://services-settings/RemoteSettingsClient.jsm:160
        sync resource://services-settings/RemoteSettingsClient.jsm:501
        InterpretGeneratorResume self-hosted:1482
        AsyncFunctionNext self-hosted:692
    13:36:17.958 NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIURI.host] LoginAutoComplete.jsm:536
        startSearch resource://gre/modules/LoginAutoComplete.jsm:536
    13:36:18.240 NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIURI.host] LoginAutoComplete.jsm:536
        startSearch resource://gre/modules/LoginAutoComplete.jsm:536
    13:36:18.384 NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIURI.host] LoginAutoComplete.jsm:536
        startSearch resource://gre/modules/LoginAutoComplete.jsm:536
    13:36:18.573 NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIURI.host] LoginAutoComplete.jsm:536
    13:36:18.632 NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIURI.host] LoginAutoComplete.jsm:536
    13:37:26.617 Calendar: loadCalendarComponent was called more than once for a single window calendar-chrome-startup.js:38</description>
    <language>en</language>
    <lastBuildDate>Fri, 21 Jan 2022 15:02:26 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Thunderbird Update to 91.4.1 breaks Connection to Onion Services</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>I guess Thunderbird refusing to interpret it’s own configs is an upstream bug that only they can fix.</p>
          <p><a href="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/8</link>
        <pubDate>Fri, 21 Jan 2022 15:02:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13148-8</guid>
        <source url="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148.rss">Thunderbird Update to 91.4.1 breaks Connection to Onion Services</source>
      </item>
      <item>
        <title>Thunderbird Update to 91.4.1 breaks Connection to Onion Services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>apt / dpkg cannot be run during apt / dpkg. But let’s suppose such a hook was possible.</p>
<p>I don’t see how package re-installation would have helped here. The package ships files some files.</p>
<ul>
<li><code>/etc/thunderbird/pref/30_whonix.js</code></li>
<li><code>/etc/thunderbird/pref/40_thunderbird.js</code></li>
<li><code>/etc/thunderbird/profile/chrome/userChrome.css</code></li>
</ul>
<p>These files do not conflict with the <code>thunderbird</code> packager or any other package. Meaning, nobody else is attempting to overwrite / modify with these files. These config snippets have been properly in place all the time. A package re-install would have had no effect whatsoever.</p>
<p>What did not happen: the <code>thunderbird</code> package overwriting any files dropped by <code>anon-apps-config</code>.</p>
          <p><a href="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/7</link>
        <pubDate>Sun, 09 Jan 2022 08:53:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13148-7</guid>
        <source url="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148.rss">Thunderbird Update to 91.4.1 breaks Connection to Onion Services</source>
      </item>
      <item>
        <title>Thunderbird Update to 91.4.1 breaks Connection to Onion Services</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>The hook would run <code>sudo apt-get install --reinstall</code> for config packages to protect them from themselves. I think that is a more robust way to guarantee custom settings remain in place whether the programs are buggy or not.</p>
<aside class="onebox stackexchange">
  <header class="source">

      <a href="https://askubuntu.com/questions/207475/how-to-reinstall-a-package" target="_blank" rel="noopener">askubuntu.com</a>
  </header>

  <article class="onebox-body">
      <a href="https://askubuntu.com/users/101530/asdf" target="_blank" rel="noopener">
    <img alt="asdf" src="https://www.gravatar.com/avatar/ce2b7564bb672fde50f6757f067de53a?s=256&amp;d=identicon&amp;r=PG" class="thumbnail onebox-avatar" width="60" height="60">
  </a>

<h4>
  <a href="https://askubuntu.com/questions/207475/how-to-reinstall-a-package" target="_blank" rel="noopener">How to reinstall a package</a>
</h4>

<div class="tags">
  <strong>package-management, dpkg</strong>
</div>

<div class="date">
  asked by
  
  <a href="https://askubuntu.com/users/101530/asdf" target="_blank" rel="noopener">
    asdf
  </a>
  on <a href="https://askubuntu.com/questions/207475/how-to-reinstall-a-package" target="_blank" rel="noopener">05:05AM - 28 Oct 12 UTC</a>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/6</link>
        <pubDate>Sat, 08 Jan 2022 19:51:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13148-6</guid>
        <source url="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148.rss">Thunderbird Update to 91.4.1 breaks Connection to Onion Services</source>
      </item>
      <item>
        <title>Thunderbird Update to 91.4.1 breaks Connection to Onion Services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Thunderbird undoing pre-configured settings is pretty bad.</p>
<blockquote>
<p>Is there any way we can make sure this doesn’t happen again? Some apt hook that re-applies the Whonix config every update perhaps?</p>
</blockquote>
<p>I can probably invent a hook (dpkg trigger) but I wouldn’t know what action hook should apply.</p>
<p>Our current implementation uses the proper API already. It drops configuration files into folder <code>/etc/thunderbird</code>.</p>
<p>Now Thunderbird ignoring these on update is the problem. Seems to be Debian bugs:</p>
<ul>
<li><a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1003280">thunderbird: TB 91 won’t read/apply configuration files in /etc/thunderbird/pref/</a></li>
<li><a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=997841">thunderbird: ignores locale settings</a></li>
</ul>
          <p><a href="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/5</link>
        <pubDate>Sat, 08 Jan 2022 10:27:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13148-5</guid>
        <source url="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148.rss">Thunderbird Update to 91.4.1 breaks Connection to Onion Services</source>
      </item>
      <item>
        <title>Thunderbird Update to 91.4.1 breaks Connection to Onion Services</title>
        <dc:creator><![CDATA[nestire]]></dc:creator>
        <description><![CDATA[
            <p>Woa this worked for me ! Thanks for the fast help</p>
          <p><a href="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/4</link>
        <pubDate>Thu, 06 Jan 2022 14:46:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13148-4</guid>
        <source url="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148.rss">Thunderbird Update to 91.4.1 breaks Connection to Onion Services</source>
      </item>
      <item>
        <title>Thunderbird Update to 91.4.1 breaks Connection to Onion Services</title>
        <dc:creator><![CDATA[xVx]]></dc:creator>
        <description><![CDATA[
            <p>Fyi, this Thunderbird update reset a lot of the default Whonix config preferences. Among others, telemetry is re-enabled, so everyone double-check your setup.</p>
<p>As for onion addresses, in addition to Patrick’s advice above, I like to change:<br>
network.dnsCacheEntries–&gt;0<br>
network.dnsCacheExpiration–&gt;0</p>
          <p><a href="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/3</link>
        <pubDate>Thu, 06 Jan 2022 01:02:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13148-3</guid>
        <source url="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148.rss">Thunderbird Update to 91.4.1 breaks Connection to Onion Services</source>
      </item>
      <item>
        <title>Thunderbird Update to 91.4.1 breaks Connection to Onion Services</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Just a short in the dark:</p>
<blockquote>
<p>Thunderbird → Edit → Preferences → scroll down → Config Editor → search for <code>network.dns.blockDotOnion</code> → set to <code>false</code></p>
</blockquote>
<hr>
<p>The extend of which Whonix has done modifications:</p>
<ul>
<li><a href="https://github.com/Whonix/anon-apps-config/tree/master/etc/thunderbird">https://github.com/Whonix/anon-apps-config/tree/master/etc/thunderbird</a></li>
<li><a href="https://github.com/Whonix/anon-apps-config/blob/master/etc/thunderbird/pref/30_whonix.js">https://github.com/Whonix/anon-apps-config/blob/master/etc/thunderbird/pref/30_whonix.js</a></li>
<li><a href="https://github.com/Whonix/anon-apps-config/blob/master/etc/thunderbird/pref/40_thunderbird.js">https://github.com/Whonix/anon-apps-config/blob/master/etc/thunderbird/pref/40_thunderbird.js</a></li>
<li><a href="https://github.com/Whonix/anon-apps-config/blob/master/etc/thunderbird/profile/chrome/userChrome.css">https://github.com/Whonix/anon-apps-config/blob/master/etc/thunderbird/profile/chrome/userChrome.css</a></li>
</ul>
<hr>
<aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="16" height="16">

      <a href="https://www.whonix.org/wiki/Unspecific" target="_blank" rel="noopener" title="01:04AM - 02 December 2021">Whonix – 2 Dec 21</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:85/170;"><img src="https://www.whonix.org/w/images/7/74/Booster132.png" class="thumbnail" width="85" height="170"></div>

<h3><a href="https://www.whonix.org/wiki/Unspecific" target="_blank" rel="noopener">Information Booster might be Available!</a></h3>

  <p>Utilizing other resources to help solve questions/issues unspecific to Whonix ™.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/2</link>
        <pubDate>Wed, 05 Jan 2022 17:49:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13148-2</guid>
        <source url="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148.rss">Thunderbird Update to 91.4.1 breaks Connection to Onion Services</source>
      </item>
      <item>
        <title>Thunderbird Update to 91.4.1 breaks Connection to Onion Services</title>
        <dc:creator><![CDATA[nestire]]></dc:creator>
        <description><![CDATA[
            <p>Hi,<br>
after the last update witch upgrades thunderbird from  78.14.0 to thunderbird 91.4.1 thunderbird “failed to connect” to onionservices.<br>
downgrading thunderbird to 78.14.0 with<br>
<code>apt install thunderbird="1:78.14.0-1~deb11u1"</code><br>
solved the issue but the old profile is not usable anymore. I verified the Issue on 2 different Qubes installations, tryed 2 different onionservices.<br>
OS: Qubes 4.0<br>
Template: whonix-16-ws</p>
<p>Console Log where I try to configure a account in an empty profile with a onionservice as server  :</p>
<pre><code>13:36:07.581 Unexpected event profile-after-change URLQueryStrippingListService.jsm:224
    observe resource://gre/modules/URLQueryStrippingListService.jsm:224
13:36:10.625 Successfully loaded OpenPGP library librnp.so version 0.15.2+git20210806.dd923a4e.MZLA from /usr/lib/thunderbird/librnp.so RNPLib.jsm:92:15
13:36:10.863 Found 0 public keys and 0 secret keys (0 protected, 0 unprotected) RNPLib.jsm:288:15
13:36:10.899 Trying to load /usr/lib/thunderbird/libotr.so OTRLib.jsm:64:11
13:36:10.900 Trying to load libotr.so from system's standard library locations OTRLib.jsm:64:11
13:36:10.900 Trying to load libotr.so.5 from system's standard library locations OTRLib.jsm:64:11
13:36:10.903 Successfully loaded OTR library libotr.so.5 from system's standard library locations OTRLib.jsm:72:13
13:36:11.715 Unknown Collection "thunderbird/query-stripping" RemoteSettingsClient.jsm:160
    UnknownCollectionError resource://services-settings/RemoteSettingsClient.jsm:160
    sync resource://services-settings/RemoteSettingsClient.jsm:501
    InterpretGeneratorResume self-hosted:1482
    AsyncFunctionNext self-hosted:692
13:36:17.958 NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIURI.host] LoginAutoComplete.jsm:536
    startSearch resource://gre/modules/LoginAutoComplete.jsm:536
13:36:18.240 NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIURI.host] LoginAutoComplete.jsm:536
    startSearch resource://gre/modules/LoginAutoComplete.jsm:536
13:36:18.384 NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIURI.host] LoginAutoComplete.jsm:536
    startSearch resource://gre/modules/LoginAutoComplete.jsm:536
13:36:18.573 NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIURI.host] LoginAutoComplete.jsm:536
13:36:18.632 NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIURI.host] LoginAutoComplete.jsm:536
13:37:26.617 Calendar: loadCalendarComponent was called more than once for a single window calendar-chrome-startup.js:38</code></pre>
          <p><a href="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148/1</link>
        <pubDate>Wed, 05 Jan 2022 13:53:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13148-1</guid>
        <source url="http://forums.whonix.org/t/thunderbird-update-to-91-4-1-breaks-connection-to-onion-services/13148.rss">Thunderbird Update to 91.4.1 breaks Connection to Onion Services</source>
      </item>
  </channel>
</rss>
