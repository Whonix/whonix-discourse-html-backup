<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Whonix host operating system - #39 by Patrick - Development - Whonix Forum</title>
    <meta name="description" content="There is already some discussion ongoing in the Whonix-Live mode thread but I guess a dedicated thread is more suitable. 
What would you consider important for an (official) Whonix host OS? 
Which OS should be used? 
Sim&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../39314658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Whonix host operating system&#39;" href="../3931.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/whonix-host-operating-system/3931/39" />
<meta name="twitter:url" content="https://forums.whonix.org/t/whonix-host-operating-system/3931/39" />
<meta property="og:title" content="Whonix host operating system" />
<meta name="twitter:title" content="Whonix host operating system" />
<meta property="og:description" content="Awesome!   Indeed.   Possibly some daemon required running? @HulaHoop  If you share any error messages, perhaps we can suggest what commands to run to sort them out.  Perhaps it is this one  https://www.whonix.org/wiki/KVM#Unable_to_connect_to_libvirt.   Unable to connect to libvirt.   Obviously the advice to users to manually reboot then won’t be great for a build. Perhaps systemctl start libvirtd at the start and systemctl stop libvirtd before existing the chroot would do?   This this is has l..." />
<meta name="twitter:description" content="Awesome!   Indeed.   Possibly some daemon required running? @HulaHoop  If you share any error messages, perhaps we can suggest what commands to run to sort them out.  Perhaps it is this one  https://www.whonix.org/wiki/KVM#Unable_to_connect_to_libvirt.   Unable to connect to libvirt.   Obviously the advice to users to manually reboot then won’t be great for a build. Perhaps systemctl start libvirtd at the start and systemctl stop libvirtd before existing the chroot would do?   This this is has l..." />
<meta property="article:published_time" content="2019-04-29T08:15:49+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="../3931.html">
        <link rel="next" href="../39319ba9.html?page=3">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../3931.html">Whonix host operating system</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../../tag/component_whonix-host.html' class='discourse-tag' rel="tag">component_whonix-host</a>, 
            <a href='../../../tag/status_open_issue_todo.html' class='discourse-tag' rel="tag">status_open_issue_todo</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-04-26T07:51:23Z' class='post-time'>
                April 26, 2019,  7:51am
              </time>
              <meta itemprop='dateModified' content='2019-04-26T07:51:23Z'>
          <span itemprop='position'>#34</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Suggestion for a new name:</p>
<p><strong>"Whonix Desktop"</strong></p>
<p>Because I think it’s important that we keep the already well-known Whonix name + it conveys the idea of a full Desktop (i.e., physical) environment while keeping it simple.</p>
<p>What do you think?</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>
          <meta itemprop='keywords' content='component_whonix-host, status_open_issue_todo'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-04-26T08:52:36Z' class='post-time'>
                April 26, 2019,  8:52am
              </time>
              <meta itemprop='dateModified' content='2019-04-26T08:52:36Z'>
          <span itemprop='position'>#35</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Doesn’t sound very exciting. Similar to Whonix Host. More reasons here:  <a href="19.html" class="inline-onebox">Whonix host operating system</a></p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/AnonymousUser'><span itemprop='name'>AnonymousUser</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-04-27T01:12:59Z' class='post-time'>
                April 27, 2019,  1:12am
              </time>
              <meta itemprop='dateModified' content='2019-04-27T01:12:59Z'>
          <span itemprop='position'>#36</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/hulahoop">@HulaHoop</a>, Re:</p>
<aside class="quote" data-post="24" data-topic="7205">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar">
    <a href="../../xfce-theming-a-few-suggestions/7205/24.html">XFCE theming - a few suggestions</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    We can differentiate with wallpapers and themes. This point is a weak argument for adopting a resource heavy DE.
  </blockquote>
</aside>

<aside class="quote no-group" data-post="25" data-topic="7205">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"><a href="../../xfce-theming-a-few-suggestions/7205/25">XFCE theming - a few suggestions</a>
</div>
<blockquote>
<p>Ah, of course. I vote to do that then.</p>
<p>I now think that XFCE with a modern-looking theme like Arc is good enough to measure up against Tails, given the resource-light advantages of XFCE (which will be even more important in a live system due to being only in RAM). Also would save time in development and troubleshooting across host and guest Whonix systems that we develop.</p>
</blockquote>
</aside>
<p>Continuing that in this thread, we could also differentiate further between the Whonix VM’s XFCE and the host OS XFCE by not having Whisker Menu on host. So between that, a differing background image, and a contrasting enough theme, it’ll both be different enough and the host XFCE will practically look like a skin of modern GNOME.</p>
<hr>
<p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a> For ongoing discussion of developing an amnesic <em>host</em> OS (not the VM OS), is this the ideal thread (and not ‘<a href="../../whonix-live-mode-amnesia-amnesic-non-persistent-anti-forensics/3894.html">Whonix live mode / amnesia / amnesic / non-persistent / anti-forensics</a>’)?</p>
<p>Guest OS amnesia I suppose is a thing (and it’s interesting even though I don’t have a common need for it myself), but as I hope we’re all aware by now, amnesia doesn’t translate to <em>anti-forensics</em> if the host OS has copious data about your VirtualBox inside it, or a swap partition, etc.</p>
<p>So when we’re discussing our effort to make an <em>anti-forensic</em> Whonix, I assume this ‘host’ thread is the one to discuss it in?</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-04-28T20:01:07Z' class='post-time'>
                April 28, 2019,  8:01pm
              </time>
              <meta itemprop='dateModified' content='2019-05-01T15:52:52Z'>
          <span itemprop='position'>#37</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I wanted to report on the progress I did with the bootable live Whonix iso project.</p>
<p><strong>1. Bootable live Debian 10 BIOS/UEFI ISO with Whonix KVM</strong></p>
<p><strong>In short</strong>, it works fine! I have now a 2.8GB iso file which can be burnt on a USB disk and will boot from BIOS or UEFI to a full live debian 10 desktop with KVM-virt-manager.</p>
<p><strong>In details</strong><br>
I first created a standard XFCE4 debian 10 vm with <code>grml-debootstrap</code> with the required kvm/qemu/virt-manager packages + Whonix qcow2 files. I <strong>did not</strong> use the Whonix hardened-debian build, and thus my “Whonix-Host”  has nothing Whonix-specific, but I don’t see any reason why it wouldn’t work with the hardened-debian version.</p>
<p>I did not manage to configure the Whonix VMs in chroot, so I had to boot the host VM and configure them by hand. Very unclean, but I am sure there should be documented information on how to do this in a clean, scripted way. This master host VM is in no way optimized as it is, and its size may even be further reduced as I didn’t take time to careful review the packages I put into it (although it was quite a minimal build).</p>
<p>Important notice: I had to copy the qcow2 files into the master host VM with <code>qemu-img convert -O qcow2</code> command (which shrinks the VMs to their “real” size) instead of <code>cp --sparse=always</code> command , otherwise the live-system would be unable to start them, complaining about “no space left on the device”. Maybe when they are not shrunk, the live-system “thinks” that they are 100GB big and is unable to allocate enough space?</p>
<p>When the master host vm was up and running, I made a bootable BIOS/UEFI ISO file out of it with the bash script that I posted above.</p>
<p>Everything works fine now. I had much less success with the second, installer part of the project.</p>
<p><strong>2. “Whonix-Desktop” installer</strong><br>
This is still very early stage to me. I did everything “by hand” in KVM to just try things out.</p>
<p>I attached a 20GB virtual disk that I divided into two partitions: first a 500M boot partition, and then I encrypted the rest (LVM on LUKS, basically following the<a href="../../../../external.html?link=https://wiki.archlinux.org/index.php/Dm-crypt/Encrypting_an_entire_system#LVM_on_LUKS" rel="nofollow noopener"> Arch wiki instructions</a>).</p>
<p>After that, I mounted the encrypted partition to <code>/mnt</code>, the first partition to <code>/mnt/boot</code> and proceeded to <code>rsync</code> the live’system on the encrypted partition with:</p>
<pre><code>rsync -aAXv --exclude={"/dev/","/proc/","/sys/","/tmp/","/run/","/mnt/","/media/*","/lost+found","/var/log/","/lib/live","/usr/lib/live","/var/tmp"} * /mnt/
</code></pre>
<p>After that, things started to get complicated. Of course, to be bootable, a lot of adjustments need to be made to the new system, such as installing grub, installing the kernel, changing the disks UUID, making sure the kernel will load the required modules to deal with encryption, rebuilding the initframs (<code>update-initramfs -u</code> didn’t work in the live environment).</p>
<p>I did try some adjustments, but haven’t got to the point of having a bootable encrypted disk as of now. Didn’t spend to much time on it either, but again I am sure all of this pretty much documented and should be even able to be scripted somehow.</p>
<p><strong>Sum-up</strong></p>
<p>Part 1: bootable live Whonix Desktop</p>
<ul>
<li>Mostly done, proof of concept works</li>
<li>Need to try with a hardened-whonix build</li>
<li>Need to script all the build in an automatic way</li>
<li>Need to decide what exact package would ship in the Whonix Desktop (probably need some non-free firmware to make it work with most hardware, wifi support, etc.)</li>
</ul>
<p>Part 2: installer</p>
<ul>
<li>As of now, I have no working solution</li>
<li>The “DD” way seems  the fastest - but needs careful tailoring</li>
<li>Ideally, the final installer should be some kind of simplified GUI, maybe test with Calamares?</li>
<li>All in all, shouldn’t be to difficult to achieve with the right level of skills and time, nothing that hasn’t be done before</li>
</ul>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="3" />
           <span class='post-likes'>3 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-04-29T07:49:31Z' class='post-time'>
                April 29, 2019,  7:49am
              </time>
              <meta itemprop='dateModified' content='2019-04-29T07:49:31Z'>
          <span itemprop='position'>#38</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="36" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>Continuing that in this thread, we could also differentiate further between the Whonix VM’s XFCE and the host OS XFCE by not having Whisker Menu on host. So between that, a differing background image, and a contrasting enough theme, it’ll both be different enough and the host XFCE will practically look like a skin of modern GNOME.</p>
</blockquote>
</aside>
<p>A different background image on the host and different theme to differentiate between Whonix host and Whonix VMs is a good idea. Not convinced yet that Whisker Menu has to be gone on the host though.</p>
<aside class="quote no-group" data-post="36" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/ed8c4c/40.png" class="avatar"> AnonymousUser:</div>
<blockquote>
<p>I assume this ‘host’ thread is the one to discuss it in?</p>
</blockquote>
</aside>
<p>Not sure. First the host operating system needs to become reality before implementing amnesia.</p>
<p>A lot discussion on amnesia happened since this very post:<br>
<a href="../../whonix-live-mode-amnesia-amnesic-non-persistent-anti-forensics/3894/121.html" class="inline-onebox">Whonix live mode / amnesia / amnesic / non-persistent / anti-forensics</a></p>
<p>As per above analysis appears to be done for now and development tasks are created.</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-04-29T08:15:49Z' class='post-time'>
                April 29, 2019,  8:15am
              </time>
              <meta itemprop='dateModified' content='2019-04-29T08:15:49Z'>
          <span itemprop='position'>#39</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Awesome!</p>
<aside class="quote no-group" data-post="37" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>but I don’t see any reason why it wouldn’t work with the hardened-debian version.</p>
</blockquote>
</aside>
<p>Indeed.</p>
<aside class="quote no-group" data-post="37" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>I did not manage to configure the Whonix VMs in chroot</p>
</blockquote>
</aside>
<p>Possibly some daemon required running? <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/hulahoop">@HulaHoop</a><br>
If you share any error messages, perhaps we can suggest what commands to run to sort them out.</p>
<p>Perhaps it is this one<br>
<a href="../../../../external.html?link=https://www.whonix.org/wiki/KVM#Unable_to_connect_to_libvirt" rel="nofollow noopener">https://www.whonix.org/wiki/KVM#Unable_to_connect_to_libvirt</a>.</p>
<blockquote>
<p>Unable to connect to libvirt.</p>
</blockquote>
<p>Obviously the advice to users to manually reboot then won’t be great for a build. Perhaps <code>systemctl start libvirtd</code> at the start and <code>systemctl stop libvirtd</code> before existing the chroot would do?</p>
<aside class="quote no-group" data-post="37" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>(probably need some non-free firmware to make it work with most hardware, wifi support, etc.)</p>
</blockquote>
</aside>
<p>This this is has likelihood of controversy, possibility to distract this thread, I created a separate thread to redirect that discussion.</p>
<aside class="quote" data-post="1" data-topic="7251">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="../../whonix-host-nonfree-blobs-firmware-linux-nonfree/7251.html">Whonix host - nonfree blobs - firmware-linux-nonfree</a> <a class="badge-wrapper  bullet" href="../../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Context: <a href="../3931.html">Whonix ™ Host Operating System Development</a>

Purpose of this thread: keeping the discussion of nonfree vs free out of above thread.
Non-Purpose of this: non-free software in Whonix ™ VMs (there is none but if you think there is <a href="../../adding-non-freedom-contrib-non-free-apt-repositories-by-default-is-it-safe/3300.html">another thread</a>)
Related: <a href="../../whonix-and-free-system-distribution-guidelines-gnu-fsdg/5877.html">Whonix ™ and Free System Distribution Guidelines (GNU FSDG)</a>


The position on nonfree firmware and discussion of arguments can be found here:
  </blockquote>
</aside>

<aside class="quote no-group" data-post="37" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Ideally, the final installer should be some kind of simplified GUI, maybe test with Calamares?</p>
</blockquote>
</aside>
<p>Never tested by me but looks very promising! <img src="../../../images/emoji/twitter/slight_smilec164.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-04-29T08:39:42Z' class='post-time'>
                April 29, 2019,  8:39am
              </time>
              <meta itemprop='dateModified' content='2019-04-29T08:51:51Z'>
          <span itemprop='position'>#40</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/patrick">@Patrick</a></p>
<p>Thanks for your feedback.<br>
I will try to rebuild a host with the hardened-debian as a base for the master host.  Building as of now on debian buster with</p>
<pre><code>sudo ./whonix_build --flavor hardened-debian-xfce --target qcow2 --build
</code></pre>
<p>Correct? Anything specific to take into account while building it?</p>
<aside class="quote no-group" data-post="39" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>If you share any error messages, perhaps we can suggest what commands to run to sort them out.</p>
</blockquote>
</aside>
<p>I’ll share the error messages once I reach this stage again with the hardened-debian VM.</p>
<aside class="quote no-group" data-post="39" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>This this is has likelihood of controversy, possibility to distract this thread, I created a separate thread to redirect that discussion.</p>
</blockquote>
</aside>
<p>OK</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-04-29T09:00:16Z' class='post-time'>
                April 29, 2019,  9:00am
              </time>
              <meta itemprop='dateModified' content='2019-04-29T09:00:16Z'>
          <span itemprop='position'>#41</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="40" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Correct?</p>
</blockquote>
</aside>
<p>Right.</p>
<aside class="quote no-group" data-post="40" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Anything specific to take into account while building it?</p>
</blockquote>
</aside>
<p>minor: <a href="../../help-welcome-kvm-development-staying-the-course/166/282.html" class="inline-onebox">[Help Welcome] KVM Development - staying the course</a></p>
<p><code>--redistribute</code> if you like to enable Whonix repository by default. Perhaps <code>--redistribute</code> was not a great name for the parameter?</p>
<p>(background: I plan on making Whonix easier to fork. Ideally <code>Whonix</code> would be come <code>$project_name</code> which can be configured by build parameter so anyone can easily create a <code>ForkNix-Workstation</code> (some new name chosen by forker) rather than <code>Whonix-Workstation</code> with most name strings generic/switched in the Whonix source code. This this is a major refactoring I’ll wait until the dust for Whonix host has settled, there is no rush.)</p>
<p>I did not test <code>hardened-debian-xfce</code> for some time. Build might even still be functional. <code>hardened-debian-xfce</code> still is underdeveloped with some “minor small edgy things” (lacks package <code>usability-misc</code> by default) but should be good enough for development.</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-04-29T09:04:04Z' class='post-time'>
                April 29, 2019,  9:04am
              </time>
              <meta itemprop='dateModified' content='2019-04-29T09:22:42Z'>
          <span itemprop='position'>#42</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="41" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p><code>--redistribute</code> if you like to enable Whonix repository by default. Perhaps <code>--redistribute</code> was not a great name for the parameter?</p>
</blockquote>
</aside>
<p>OK, maybe not that important at this stage.<br>
Build breaks, can I safely ignore it (seems to be related to virsh xml settings, don’t need it as I am building a host VM)?<br>
<a href="../../../../external.html?link=http://forums.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/t/error-while-building-hardened-debian-xfce-15-0-0-1-0-2-no-hardened-debian-xml/7252" class="onebox" target="_blank" rel="nofollow noopener">http://forums.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/t/error-while-building-hardened-debian-xfce-15-0-0-1-0-2-no-hardened-debian-xml/7252</a></p>
<p>EDIT: ignored it, building continues… <img src="../../../images/emoji/twitter/slight_smilec164.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-04-29T12:43:38Z' class='post-time'>
                April 29, 2019, 12:43pm
              </time>
              <meta itemprop='dateModified' content='2019-04-29T13:23:11Z'>
          <span itemprop='position'>#43</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><strong>Update Report: building host with hardened-debian-xfce</strong></p>
<p>Building with</p>
<pre><code class="lang-auto">sudo ./whonix_build --flavor hardened-debian-xfce --target qcow2 --build
</code></pre>
<p>went successful. On first boot, I realized there was not<code>/etc/apt/sources.list</code> file, so I created one with debian buster repos myself. Probably caused by not adding the <code>--redistribute</code> flag during build?</p>
<p>Anyway, after successful build, I did a quick and dirty bash script which mounts the hardened-debian raw and installs the following packages:</p>
<p><code>qemu-kvm libvirt-daemon-system libvirt-clients virt-manager</code></p>
<p>Then, and while still in chroot and a (dirty) scripted way, I configured the Whonix network and VM following official documentation</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://www.whonix.org/wiki/KVM" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/218;"><img src="../../../../external.html?link=https://www.whonix.org/w/images/b/be/234234234236kvm.png" class="thumbnail"></div>

<h3><a href="../../../../external.html?link=https://www.whonix.org/wiki/KVM" target="_blank" rel="nofollow noopener">KVM</a></h3>

<p>Using Whonix ™ with KVM instead of VirtualBox</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<pre><code>chroot $HARDENED_CHROOT/chroot addgroup user libvirt
chroot $HARDENED_CHROOT/chroot addgroup user kvm
cp *.xml $HARDENED_CHROOT/chroot/tmp/
chroot $HARDENED_CHROOT/chroot service libvirtd restart
chroot $HARDENED_CHROOT/chroot virsh -c qemu:///system net-autostart default
chroot $HARDENED_CHROOT/chroot virsh -c qemu:///system net-start default
chroot $HARDENED_CHROOT/chroot virsh -c qemu:///system net-define tmp/Whonix_external_network-15.0.0.0.9.xml
chroot $HARDENED_CHROOT/chroot virsh -c qemu:///system net-define tmp/Whonix_internal_network-15.0.0.0.9.xml
chroot $HARDENED_CHROOT/chroot virsh -c qemu:///system net-autostart external
chroot $HARDENED_CHROOT/chroot virsh -c qemu:///system net-start external
chroot $HARDENED_CHROOT/chroot virsh -c qemu:///system net-autostart internal
chroot $HARDENED_CHROOT/chroot virsh -c qemu:///system net-start internal
chroot $HARDENED_CHROOT/chroot virsh -c qemu:///system define tmp/Whonix-Gateway-XFCE-15.0.0.0.9.xml
chroot $HARDENED_CHROOT/chroot virsh -c qemu:///system define tmp/Whonix-Workstation-XFCE-15.0.0.0.9.xml
</code></pre>
<aside class="quote no-group" data-post="39" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Obviously the advice to users to manually reboot then won’t be great for a build. Perhaps <code>systemctl start libvirtd</code> at the start and <code>systemctl stop libvirtd</code> before existing the chroot would do?</p>
</blockquote>
</aside>
<p>You were right, I was able to configure the network using the .xml files after running <code>service libvirtd restart</code> in chroot (see above).</p>
<p>However, <strong>configuration of VM does not work</strong>:</p>
<pre><code>error: Failed to define domain from tmp/Whonix-Workstation-XFCE-15.0.0.0.9.xml
error: invalid argument: could not find capabilities for domaintype=kvm 
</code></pre>
<p>The thing is, that I am running all the build and above commands <strong>inside a debian buster VM</strong>. Maybe this causes the <code>could not find capabilities for domaintype=kvm</code> error? Is there any known workaround to force the domain definition?</p>
<p><strong>EDIT:</strong> I mounted the .raw VM file directly on my host and it did not work either. Somehow the chroot environment does not “believe” that it has kvm capabilities, although the host pseudo-filesystems are binded to it:</p>
<pre><code>mount --bind /dev chroot/dev
mount --bind /proc chroot/proc
mount --bind /dev/pts chroot/dev/pts
</code></pre>
<p>Currently looking online for a solution, nothing found yet.</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-04-29T18:48:27Z' class='post-time'>
                April 29, 2019,  6:48pm
              </time>
              <meta itemprop='dateModified' content='2019-04-29T18:48:27Z'>
          <span itemprop='position'>#44</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="43" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Probably caused by not adding the <code>--redistribute</code> flag during build?</p>
</blockquote>
</aside>
<p>Most likely.</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-04-29T21:15:10Z' class='post-time'>
                April 29, 2019,  9:15pm
              </time>
              <meta itemprop='dateModified' content='2019-04-29T21:15:10Z'>
          <span itemprop='position'>#45</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>OK, I have searched and searched and I have found no solution to the <code>error: invalid argument: could not find capabilities for domaintype=kvm</code>  error.</p>
<p>So I have resorted to a dirty trick: I changed the ‘kvm’ flag to ‘qemu’ in the Whonix-Gateway.xml file (so the domain can be defined in chroot), and then I just replace ‘qemu’ by ‘kvm’ back directly in the <code>/etc/libvirt/qemu/Whonix-Gateway</code> file of the host vm:</p>
<p><code>chroot $HARDENED_CHROOT/chroot virsh -c qemu:///system define tmp/Whonix-Gateway-XFCE-14.0.1.4.4.xml</code></p>
<pre><code>sed -i "8 s/^.*$/&lt;domain type='kvm'&gt;/" $HARDENED_CHROOT/chroot/etc/libvirt/qemu/Whonix-VMs .xml
</code></pre>
<p>Seems to work: on first boot, the host is able to boot the Whonix-Gateway with KVM hypervisor.</p>
<p>Would such a dirty workaround be acceptable? I see no other solution at the moment.</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-04-29T21:56:50Z' class='post-time'>
                April 29, 2019,  9:56pm
              </time>
              <meta itemprop='dateModified' content='2019-04-29T21:56:50Z'>
          <span itemprop='position'>#46</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="38" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>A different background image on the host and different theme to differentiate between Whonix host and Whonix VMs is a good idea. Not convinced yet that Whisker Menu has to be gone on the host though.</p>
</blockquote>
</aside>
<p>+1 keep whisker on Host.</p>
<aside class="quote no-group" data-post="37" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>I did not manage to configure the Whonix VMs in chroot</p>
</blockquote>
</aside>
<p>My good guess is that KVM needs a little work to mount stuff in chroot because kernel modules are involved.</p>
<p>See if this post on building KVM VMs outside a virtual environment helps. They use debootstrap:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://diogogomes.com/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://diogogomes.com/2012/07/13/debootstrap-kvm-image/" target="_blank" title="05:35PM - 13 July 2012" rel="nofollow noopener">diogogomes.com – 13 Jul 12</a>
  </header>
  <article class="onebox-body">
    <img src="../../../../external.html?link=http://www.gravatar.com/avatar/2c76164b5d6b7a33da0595892d826e85.png?s=120" class="thumbnail" width="" height="">

<h3><a href="../../../../external.html?link=https://diogogomes.com/2012/07/13/debootstrap-kvm-image/" target="_blank" rel="nofollow noopener">Creating a KVM virtual machine using debootstrap</a></h3>

<p>How to create a Debian virtual machine outside a virtualization environment.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">

            <link itemprop="image" href="../../../uploads/default/original/2X/8/8a1a2a73b790ab35df4a98f7b89f4fb14f1c23bf.png">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-01T10:02:10Z' class='post-time'>
                May 1, 2019, 10:02am
              </time>
              <meta itemprop='dateModified' content='2019-05-01T15:03:33Z'>
          <span itemprop='position'>#47</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="46" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>My good guess is that KVM needs a little work to mount stuff in chroot because kernel modules are involved.</p>
<p>See if this post on building KVM VMs outside a virtual environment helps. They use debootstrap:</p>
</blockquote>
</aside>
<p>Well, you are probably right, but at this stage the VM is already built (hardened debian build) but just refuses to define a kvm domain, even after binding the pseudo-filesystems.</p>
<p>Anyway, as my workaround did the trick, I built a new ISO, after adding some non-free firmware packages and network-manager-gnome (necessary to have the network applet in the panel that allows user to connect to a wifi graphically).</p>
<p>ISO size is around 2.4 GB</p>
<p><strong>EDIT:</strong></p>
<aside class="quote no-group" data-post="29" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/a183cd/40.png" class="avatar"> Algernon:</div>
<blockquote>
<p>For mksquashfs there is the “-comp xz” option which offers way better compression than the default one.</p>
</blockquote>
</aside>
<p>Indeed, iso file size is 2.0 GB with <code>-comp xz</code>!</p>
<p><strong>Works fine, wifi and graphic support out of the box. BIOS and UEFI boot as expected, Whonix VMs boot and work normally</strong></p>
<p>The way I understand it, live boot makes it so that all modified files are copied into RAM (overlay). This also applies to the VM images, <strong>which are copied into the RAM before being able to start.</strong></p>
<p>-&gt; which explains why the original 100 GB .qcow2 files were unbootable (“no space left on the device”).<br>
-&gt; consequence: Whonix Desktop as a live system needs a lot of RAM in order to run the Whonix VMs (min 8GB I would say). There may be room for fine-tuning (by default the tmpfs takes 50% of the available RAM, i.e. 8GB = 4GB RAM left, 4GB for the overlay tmpfs), see  <code>overlay-size</code>  option in  <code>man live-boot</code>:</p>
<pre><code>   overlay-size=SIZE
       The  size  of  the  tmpfs mount (used for the upperdir union root mount) in bytes, and
       rounded up to entire pages. This option accepts a suffix % to limit  the  instance  to
       that percentage of your physical RAM or a suffix k, m or g for Ki, Mi, Gi (binary kilo
       (kibi), binary mega (mebi) and binary giga (gibi)). By default, 50% of  available  RAM
       will be used.
</code></pre>
<p>Below a few screenshots taken from the Whonix-Hardened-Debian-Host in live-boot mode, running the Whonix VMs in virt-manager, showing UEFI and WIFI support.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/2X/8/8a1a2a73b790ab35df4a98f7b89f4fb14f1c23bf.png" data-download-href="//forums.whonix.org/uploads/default/8a1a2a73b790ab35df4a98f7b89f4fb14f1c23bf" title="1.png"><img src="../../../uploads/default/optimized/2X/8/8a1a2a73b790ab35df4a98f7b89f4fb14f1c23bf_2_690x390.png" alt="1" width="690" height="390" srcset="//forums.whonix.org/uploads/default/optimized/2X/8/8a1a2a73b790ab35df4a98f7b89f4fb14f1c23bf_2_690x390.png, //forums.whonix.org/uploads/default/optimized/2X/8/8a1a2a73b790ab35df4a98f7b89f4fb14f1c23bf_2_1035x585.png 1.5x, //forums.whonix.org/uploads/default/optimized/2X/8/8a1a2a73b790ab35df4a98f7b89f4fb14f1c23bf_2_1380x780.png 2x" data-small-upload="../../../uploads/default/optimized/2X/8/8a1a2a73b790ab35df4a98f7b89f4fb14f1c23bf_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">1.png</span><span class="informations">1657×937 536 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div> <div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/2X/4/4f8499692029a451b6dbc9f78057bbb34e2fe968.png" data-download-href="//forums.whonix.org/uploads/default/4f8499692029a451b6dbc9f78057bbb34e2fe968" title="3.png"><img src="../../../uploads/default/optimized/2X/4/4f8499692029a451b6dbc9f78057bbb34e2fe968_2_690x389.png" alt="3" width="690" height="389" srcset="//forums.whonix.org/uploads/default/optimized/2X/4/4f8499692029a451b6dbc9f78057bbb34e2fe968_2_690x389.png, //forums.whonix.org/uploads/default/optimized/2X/4/4f8499692029a451b6dbc9f78057bbb34e2fe968_2_1035x583.png 1.5x, //forums.whonix.org/uploads/default/optimized/2X/4/4f8499692029a451b6dbc9f78057bbb34e2fe968_2_1380x778.png 2x" data-small-upload="../../../uploads/default/optimized/2X/4/4f8499692029a451b6dbc9f78057bbb34e2fe968_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">3.png</span><span class="informations">1661×938 195 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-01T12:04:49Z' class='post-time'>
                May 1, 2019, 12:04pm
              </time>
              <meta itemprop='dateModified' content='2019-05-01T12:04:49Z'>
          <span itemprop='position'>#48</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>With <code>qemu-img convert -O qcow2</code> we have the following results:</p>
<blockquote>
<p>-rw-r–r-- 1 root root 2.1G May  1 12:06 Whonix-Gateway.qcow2<br>
-rw-r–r-- 1 root root 2.6G May  1 12:08 Whonix-Workstation.qcow2</p>
</blockquote>
<p>I did some test in virt-manager, first with 8GB RAM:</p>
<p>Just after the ISO boot, before starting the virtual machines:</p>
<pre><code>user@host:~$ df -h
Filesystem      Size  Used Avail Use% Mounted on
udev            3.9G     0  3.9G   0% /dev
tmpfs           797M   17M  780M   3% /run
/dev/sr0        2.3G  2.3G     0 100% /run/live/medium
/dev/loop0      2.1G  2.1G     0 100% /run/live/rootfs/filesystem.squashfs
tmpfs           3.9G  6.4M  3.9G   1% /run/live/overlay
overlay         3.9G  6.4M  3.9G   1% /
tmpfs           3.9G     0  3.9G   0% /dev/shm
tmpfs           5.0M  4.0K  5.0M   1% /run/lock
tmpfs           3.9G     0  3.9G   0% /sys/fs/cgroup
tmpfs           3.9G   12K  3.9G   1% /tmp
none             10M  4.0K   10M   1% /run/msgcollector
tmpfs           797M  8.0K  797M   1% /run/user/1000

user@host:~$ free -h
              total        used        free      shared  buff/cache   available
Mem:          7.8Gi       375Mi       6.8Gi        32Mi       585Mi       7.2Gi
Swap:            0B          0B          0B
</code></pre>
<p>After booting the VMs with virt-manager (default settings, 512 MB RAM to the Gateway, 2GB RAM to the Worsktation):</p>
<p>I failed to boot both VM due a lack of free space on the overlay tmpfs, so just the Gateway running:</p>
<pre><code>user@host:~$ df -h
Filesystem      Size  Used Avail Use% Mounted on
udev            3.9G     0  3.9G   0% /dev
tmpfs           797M   17M  780M   3% /run
/dev/sr0        2.3G  2.3G     0 100% /run/live/medium
/dev/loop0      2.1G  2.1G     0 100% /run/live/rootfs/filesystem.squashfs
tmpfs           3.9G  2.1G  1.9G  54% /run/live/overlay
overlay         3.9G  2.1G  1.9G  54% /
tmpfs           3.9G     0  3.9G   0% /dev/shm
tmpfs           5.0M  4.0K  5.0M   1% /run/lock
tmpfs           3.9G     0  3.9G   0% /sys/fs/cgroup
tmpfs           3.9G   12K  3.9G   1% /tmp
none             10M  4.0K   10M   1% /run/msgcollector
tmpfs           797M   12K  797M   1% /run/user/1000
</code></pre>
<blockquote>
<p>user@host:~$ free -h<br>
total        used        free      shared  buff/cache   available<br>
Mem:          7.8Gi       1.1Gi       1.6Gi       2.1Gi       5.1Gi       4.3Gi<br>
Swap:            0B          0B          0B</p>
</blockquote>
<p>I did another try with 8GB RAM and with <code>overlay-size=6g</code> appended to the boot command line.</p>
<p>This time, I was able to boot both VMs, but of course I had much     less RAM available:</p>
<pre><code>user@host:~$ df -h
Filesystem      Size  Used Avail Use% Mounted on
udev            3.9G     0  3.9G   0% /dev
tmpfs           797M   18M  780M   3% /run
/dev/sr0        2.3G  2.3G     0 100% /run/live/medium
/dev/loop0      2.1G  2.1G     0 100% /run/live/rootfs/filesystem.squashfs
tmpfs           6.0G  4.7G  1.4G  77% /run/live/overlay
overlay         6.0G  4.7G  1.4G  77% /
tmpfs           3.9G     0  3.9G   0% /dev/shm
tmpfs           5.0M  4.0K  5.0M   1% /run/lock
tmpfs           3.9G     0  3.9G   0% /sys/fs/cgroup
tmpfs           3.9G   12K  3.9G   1% /tmp
none             10M  4.0K   10M   1% /run/msgcollector
tmpfs           797M   12K  797M   1% /run/user/1000

user@host:~$ free -h
              total        used        free      shared  buff/cache   available
Mem:          7.8Gi       2.4Gi       229Mi       4.9Gi       5.2Gi       318Mi
Swap:            0B          0B          0B
</code></pre>
<p>Eventually, it freezes completely when I open a few tabs in the Whonix-Workstation…</p>
<p>In short, would only work well with a few more GB of RAM, maybe 12 to 16 GB…</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-01T16:31:00Z' class='post-time'>
                May 1, 2019,  4:31pm
              </time>
              <meta itemprop='dateModified' content='2019-05-01T16:31:00Z'>
          <span itemprop='position'>#49</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="47" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>The way I understand it, live boot makes it so that all modified files are copied into RAM (overlay). This also applies to the VM images, <strong>which are copied into the RAM before being able to start.</strong></p>
</blockquote>
</aside>
<p>Actually I thought it was changes done to the underlying files that were redirected to RAM rather than putting absolutely everything.</p>
<p>I had the impression from reading the Ubuntu wiki that the kernel non-persistent option was what loaded the entire live USB into RAM and therefore allowed a user to disconnect the stick and continue working while the alternative ways of doing live booting didn’t do that and saved only the diffs in memory.</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-01T16:37:54Z' class='post-time'>
                May 1, 2019,  4:37pm
              </time>
              <meta itemprop='dateModified' content='2019-05-01T16:37:54Z'>
          <span itemprop='position'>#50</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>You are probably right, but the VM files present themselves as single files to the OS and thus I can’t see how they could be modified without copying them entirely into RAM?</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-01T18:36:13Z' class='post-time'>
                May 1, 2019,  6:36pm
              </time>
              <meta itemprop='dateModified' content='2019-05-01T18:36:13Z'>
          <span itemprop='position'>#51</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Two solutions I see here:</p>
<ol>
<li>Using Device Mapper snapshotting which operates on the block/sector level as opposed to the file level of stackable (live) filesystems:</li>
</ol>
<ul>
<li><a href="../../../../external.html?link=http://aufs.sourceforge.net/aufs2/report/sq/sq.pdf" rel="nofollow noopener">http://aufs.sourceforge.net/aufs2/report/sq/sq.pdf</a></li>
</ul>
<ol start="2">
<li>Using compression on live data somehow</li>
</ol>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Algernon'><span itemprop='name'>Algernon</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-02T16:23:36Z' class='post-time'>
                May 2, 2019,  4:23pm
              </time>
              <meta itemprop='dateModified' content='2019-05-02T16:23:36Z'>
          <span itemprop='position'>#52</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="50" data-topic="3931" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>You are probably right, but the VM files present themselves as single files to the OS and thus I can’t see how they could be modified without copying them entirely into RAM?</p>
</blockquote>
</aside>
<p>Since it is a live system you don’t need to modify them.<br>
Overlayfs will copy each file which is opened for writing (like booting the VM images, changing permissions) to RAM.<br>
During building you need to set the VM disk to ro, set the right permissions and then use grub-live in the VMs themselves.<br>
If you do that the system should work with roughly the same amount of RAM as a normal host OS + Whonix VMs.<br>
You can copy the whole filesystem to RAM with the “toram” option and then remove the device you booted from.</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="3" />
           <span class='post-likes'>3 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/AnonymousUser'><span itemprop='name'>AnonymousUser</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-02T22:23:55Z' class='post-time'>
                May 2, 2019, 10:23pm
              </time>
              <meta itemprop='dateModified' content='2019-05-02T22:23:55Z'>
          <span itemprop='position'>#53</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>To add to the conversation we were having about GNOME vs. XFCE in Whonix host OS:</p>
<p>For those who use VeraCrypt to encrypt their Whonix VMs, I’ve heard that native VeraCrypt unlocking support will eventually show up in GNOME itself, due to the work Tails did to add it in their code to GNOME.</p>
<p>That would add a +1 for me (and others who use VC volumes) for GNOME in host. Its volume unlocking (vs. VeraCrypt’s official binary) is also incredibly faster due to using kernel driver vs. VC app which uses user space driver.</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="../3931.html">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="../39319ba9.html?page=3">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
