<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Whonix host operating system - Development - Whonix Forum</title>
    <meta name="description" content="There is already some discussion ongoing in the Whonix-Live mode thread but I guess a dedicated thread is more suitable. 
What would you consider important for an (official) Whonix host OS? 
Which OS should be used? 
Sim&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="3931235c.html?page=7" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Whonix host operating system&#39;" href="3931.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/whonix-host-operating-system/3931?page=7" />
<meta name="twitter:url" content="https://forums.whonix.org/t/whonix-host-operating-system/3931?page=7" />
<meta property="og:title" content="Whonix host operating system" />
<meta name="twitter:title" content="Whonix host operating system" />
<meta property="og:description" content="YES   No idea 🙂" />
<meta name="twitter:description" content="YES   No idea 🙂" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="87 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="211 ❤" />
<meta property="article:published_time" content="2020-03-07T16:26:14+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="3931c575.html?page=6">
        <link rel="next" href="3931fdfa.html?page=8">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="3931.html">Whonix host operating system</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/component_whonix-host.html' class='discourse-tag' rel="tag">component_whonix-host</a>, 
            <a href='../../tag/status_open_issue_todo.html' class='discourse-tag' rel="tag">status_open_issue_todo</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-07T16:26:14Z' class='post-time'>
                March 7, 2020,  4:26pm
              </time>
              <meta itemprop='dateModified' content='2020-03-07T16:26:14Z'>
          <span itemprop='position'>#122</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="121" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>It required kernel parameter <code>boot=live</code> to be set. Is it set?</p>
</blockquote>
</aside>
<p>YES</p>
<aside class="quote no-group" data-username="Patrick" data-post="121" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Which systemd units are required by <code>virt-xml</code> ? Maybe it needs similar <code>After=</code> as <code>whonix-libvirt-install.service</code> ?</p>
</blockquote>
</aside>
<p>No idea <img src="../../images/emoji/twitter/slight_smilec164.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>
          <meta itemprop='keywords' content='component_whonix-host, status_open_issue_todo'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-07T16:27:20Z' class='post-time'>
                March 7, 2020,  4:27pm
              </time>
              <meta itemprop='dateModified' content='2020-03-07T16:27:20Z'>
          <span itemprop='position'>#123</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="onion_knight" data-post="119" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Booting the ISO works, however it ends at the lightdm login page (no auto-login or no live user creation). I guess it’s because you removed <code>live-config</code> package.</p>
<p>Installing <code>live-config</code> and reburning the ISO solved the problem, as expected.</p>
</blockquote>
</aside>
<p>Let’s make that work without live-config for reasons mentioned above. Should be very doable since Whonix VMs use autologin too.</p>
<p>whonix-xfce-desktop-config should be installed already?<br>
whonix-xfce-desktop-config ships <a href="../../../external.html?link=https://github.com/Whonix/whonix-xfce-desktop-config/blob/master/etc/lightdm/lightdm.conf.d/whonix-autologin.conf">whonix-autologin.conf</a>, therefore there should be autologin?</p>
<aside class="quote no-group" data-username="onion_knight" data-post="119" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>no live user creation</p>
</blockquote>
</aside>
<p>User <code>user</code> exists (as created by anon-base-files). Do we still require a separate live user?</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-07T16:31:38Z' class='post-time'>
                March 7, 2020,  4:31pm
              </time>
              <meta itemprop='dateModified' content='2020-03-07T16:31:38Z'>
          <span itemprop='position'>#124</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-username="Patrick" data-post="121" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<p>Which systemd units are required by <code>virt-xml</code> ? Maybe it needs similar <code>After=</code> as <code>whonix-libvirt-install.service</code> ?</p>
</blockquote>
<p>No idea <img src="../../images/emoji/twitter/slight_smilec164.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</blockquote>
</aside>
<p>virt-xml maybe not but before it runs <code>virsh</code> and virsh might require these services. Added:</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/commit/b01deed9ca5588e20a0a14dfd532bddbceafa82d" target="_blank">github.com/Whonix/whonix-libvirt</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewbox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/commit/b01deed9ca5588e20a0a14dfd532bddbceafa82d" target="_blank">start live-mode-to-read-only later</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2020-03-07" data-time="16:28:39" data-timezone="UTC">04:28PM - 07 Mar 20 UTC</span>
      </div>

      <div class="user">
        <a href="../../../external.html?link=https://github.com/adrelanos" target="_blank">
          <img alt="adrelanos" src="../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="onebox-avatar-inline" width="20" height="20">
          adrelanos
        </a>
        
      </div>

      <div class="lines" title="changed 1 files with 8 additions and 0 deletions">
        <a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/commit/b01deed9ca5588e20a0a14dfd532bddbceafa82d" target="_blank">
          <span class="added">+8</span>
          <span class="removed">-0</span>
        </a>
      </div>
    </div>

  </div>
</div>




  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Meanwhile you could tr</p>
<pre><code>sudo systemctl status whonix-libvirt-set-live-to-readonly
</code></pre>
<p>(Unrelated but also important.)</p>
<pre><code>sudo systemctl status whonix-libvirt-install
</code></pre>
<p>and</p>
<pre><code>sudo systemctl restart whonix-libvirt-set-live-to-readonly
</code></pre>
<p>And check journal?</p>
<pre><code>sudo journalctl -u whonix-libvirt-set-live-to-readonly
sudo journalctl -u whonix-libvirt-install
</code></pre>
<p>And also perhaps check whole journal?</p>
<p>sudo journalctl</p>
<p>(Perhaps redirect to file for more convenient viewing.)</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-07T16:34:42Z' class='post-time'>
                March 7, 2020,  4:34pm
              </time>
              <meta itemprop='dateModified' content='2020-03-07T16:34:42Z'>
          <span itemprop='position'>#125</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="123" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Let’s make that work without live-config for reasons mentioned above. Should be very doable since Whonix VMs use autologin too.</p>
</blockquote>
</aside>
<p>I don’t understand for what reasons exactly. I don’t know how make it work without it.</p>
<aside class="quote no-group" data-username="Patrick" data-post="123" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>User <code>user</code> exists (as created by anon-base-files). Do we still require a separate live user?</p>
</blockquote>
</aside>
<p><strong>No, there shouldn’t be a user <code>user</code>!</strong> It had been removed on purpose back then, for various reasons, the most important being that during Calamares install it is being copied over to the newly installed system. Very bad.</p>
<p>And yes you’re right, user user seems to be created again during the Whonix-Host build, but it shouldn’t be that way. It was removed a long time ago.</p>
<p>The good thing about<code> live-config</code> and<code> user-setup</code> is that it takes care of the live-user creation at boot time and its behavior is very easily customizable via simple kernel boot flags</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-07T17:20:31Z' class='post-time'>
                March 7, 2020,  5:20pm
              </time>
              <meta itemprop='dateModified' content='2020-03-07T17:20:31Z'>
          <span itemprop='position'>#126</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="onion_knight" data-post="125" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p><strong>No, there shouldn’t be a user <code>user</code> !</strong> It had been removed on purpose back then</p>
</blockquote>
</aside>
<p>I reverted it in last few days.</p>
<aside class="quote" data-post="93" data-topic="3931">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="3931/93.html">Whonix host operating system</a> <a class="badge-wrapper  bullet" href="../../c/development/8.html"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Hacking on the Whonix software and code. (devs) (list of unmaintained components)">Development</span></a>
  </div>
  <blockquote>
    Could you please check package live-config? Maybe it’s mostly about the scripts in /lib/live/config/. What stuff we need? 
Perhaps we can get rid of live-config or re-implement the few bits that we do need. 
I try to use “standard” anon-base-files for user user and groups creation and dropping live-config. Seems the less complex solution to this issue.
  </blockquote>
</aside>

<p>User <code>user</code> creation, sudo, su, groups got rather complex. Full story:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Strong_Linux_User_Account_Isolation" target="_blank" title="05:24PM - 20 February 2020">whonix.org – 20 Feb 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="../../uploads/default/optimized/2X/9/997bef28d9dd0e3a84553afa8e33f383970adcab_2_690x362.png" class="thumbnail" width="690" height="362" srcset="//forums.whonix.org/uploads/default/optimized/2X/9/997bef28d9dd0e3a84553afa8e33f383970adcab_2_690x362.png, //forums.whonix.org/uploads/default/optimized/2X/9/997bef28d9dd0e3a84553afa8e33f383970adcab_2_1035x543.png 1.5x, //forums.whonix.org/uploads/default/original/2X/9/997bef28d9dd0e3a84553afa8e33f383970adcab.png 2x" data-small-upload="../../uploads/default/optimized/2X/9/997bef28d9dd0e3a84553afa8e33f383970adcab_2_10x10.png"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Strong_Linux_User_Account_Isolation" target="_blank">Strong Linux User Account Isolation</a></h3>

<p>Protect Linux User Accounts against Brute Force Attacks, Root Account Locking, Console Lockdown, sudo password sniffing, X Windows System Password Sniffing, /proc/pid/sched spy on keystrokes, Linux user account cracking, pam-tally2, pam-cracklib,...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>It’s hard to have live-config create the live user and at the same time have security-misc installed. That’s where the build breaking bug “no user is a member of group sudo” bug came from.</p>
<aside class="quote no-group" data-username="onion_knight" data-post="125" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>during Calamares install it is being copied over to the newly installed system.</p>
</blockquote>
</aside>
<p>Can we configure calamares to:</p>
<ol>
<li>skip copying files from live iso home <code>user</code> to installed system</li>
<li>skip calamares user creation (leave that to anon-base-files)</li>
</ol>
<p>?</p>
<p>Otherwise anon-base-files, user <code>user</code> creation, security-misc permission hardening, VMs, live user, VM user gets a hard to resolve labyrinth.</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-07T17:33:25Z' class='post-time'>
                March 7, 2020,  5:33pm
              </time>
              <meta itemprop='dateModified' content='2020-03-07T17:33:25Z'>
          <span itemprop='position'>#127</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="126" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Can we configure calamares to:</p>
<ol>
<li>skip copying files from live iso home <code>user</code> to installed system</li>
<li>skip calamares user creation (leave that to anon-base-files)</li>
</ol>
</blockquote>
</aside>
<ol>
<li>
<p>Calamares being quite customizable I guess we could, but unless we remove its account completely, user user won’t go away after the installation.</p>
</li>
<li>
<p>We could probably also skip calamares user creation, but then what is the purpose of an installer if no user can be created during installation?</p>
</li>
</ol>
<p>Coming back from a long break I had no idea of the changes made that rendered the creation of a user <code>user</code> a prerequisite for <code>security-misc</code>. It seems very complex and unusual to me to have a user <code>user</code> already set up at this stage. Would be much cleaner and easier if we could revert back to the no user installed scenario (which is how all debian-base live distros behave by default as far as I know, regardless of the installer type):</p>
<p>no user <code>user</code> -&gt; live-boot with<code> live-user</code> -&gt; creation of a final user account is done during installation as expected (Calamares)</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-08T02:52:31Z' class='post-time'>
                March 8, 2020,  2:52am
              </time>
              <meta itemprop='dateModified' content='2020-03-08T02:52:31Z'>
          <span itemprop='position'>#128</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="onion_knight" data-post="127" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Calamares being quite customizable I guess we could, but unless we remove its account completely, user user won’t go away after the installation.</p>
</blockquote>
</aside>
<p>I guess calamares allows us to somehow drop a script which then removes any unwanted folders.</p>
<aside class="quote no-group" data-username="onion_knight" data-post="127" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>We could probably also skip calamares user creation, but then what is the purpose of an installer if no user can be created during installation?</p>
</blockquote>
</aside>
<p>Purpose of installer is:</p>
<ul>
<li>transferring iso contents to hdd</li>
<li>partition disk</li>
<li>encrypt disk</li>
<li>install bootloader</li>
<li>sort out BIOS vs EFI boot maybe</li>
<li>sort out Secure Boot maybe</li>
<li>not sure about other stuff such as keyboard configuration, system language selection</li>
<li>more common user experience (similar other Linux distributions installation)</li>
</ul>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-08T03:03:53Z' class='post-time'>
                March 8, 2020,  3:03am
              </time>
              <meta itemprop='dateModified' content='2020-03-08T03:03:53Z'>
          <span itemprop='position'>#129</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="onion_knight" data-post="127" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Coming back from a long break I had no idea of the changes made that rendered the creation of a user <code>user</code> a prerequisite for <code>security-misc</code> . It seems very complex and unusual to me to have a user <code>user</code> already set up at this stage</p>
</blockquote>
</aside>
<p>In security-misc we’re applying a lot security hardening configurations which are usually only mentioned in security guides.</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Permissions" target="_blank" title="05:24PM - 20 February 2020">whonix.org – 20 Feb 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="../../uploads/default/optimized/2X/9/997bef28d9dd0e3a84553afa8e33f383970adcab_2_690x362.png" class="thumbnail" width="690" height="362" srcset="//forums.whonix.org/uploads/default/optimized/2X/9/997bef28d9dd0e3a84553afa8e33f383970adcab_2_690x362.png, //forums.whonix.org/uploads/default/optimized/2X/9/997bef28d9dd0e3a84553afa8e33f383970adcab_2_1035x543.png 1.5x, //forums.whonix.org/uploads/default/original/2X/9/997bef28d9dd0e3a84553afa8e33f383970adcab.png 2x" data-small-upload="../../uploads/default/optimized/2X/9/997bef28d9dd0e3a84553afa8e33f383970adcab_2_10x10.png"></div>

<h3><a href="../../../external.html?link=https://www.whonix.org/wiki/Dev/Permissions" target="_blank">Strong Linux User Account Isolation</a></h3>

<p>Protect Linux User Accounts against Brute Force Attacks, Root Account Locking, Console Lockdown, sudo password sniffing, X Windows System Password Sniffing, /proc/pid/sched spy on keystrokes, Linux user account cracking, pam-tally2, pam-cracklib,...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Leaving that to users, security guides is a broken concept:</p>
<aside class="quote quote-modified" data-post="1" data-topic="8563">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar">
    <a href="../the-problem-with-security-guides-and-how-we-can-fix-it/8563.html">The Problem with Security Guides and How We Can Fix It</a> <a class="badge-wrapper  bullet" href="../../c/news/21.html"><span class="badge-category-bg" style="background-color: #AB9364;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="News posted by Whonix staff. The Whonix Blog. Stay Tuned. (rss)">News</span></a>
  </div>
  <blockquote>
    Security hardening instructions are amazing but these have some issues. 


Vulnerable until applied: After installation, these security tips are not yet applied. During that time window, you’re vulnerable.

Recipient Insecurity:

Now you’re security hardening. Great! But what about your correspondence partners?
The NSA might now no longer wiretaps the phone of German chancellor Angel Merkel. But how does that help if everyone she’s calling is wiretapped?
It’s great that you followed a guide and …
  </blockquote>
</aside>

<blockquote>
<p>It seems very complex and unusual to me to have a user <code>user</code> already set up at this stage</p>
</blockquote>
<p>Indeed. Though, we might be the first distribution to apply such security hardening by default.</p>
<aside class="quote no-group" data-username="onion_knight" data-post="127" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Would be much cleaner and easier if we could revert back to the no user installed scenario (</p>
</blockquote>
</aside>
<p>That would be hard. We’d have to change security-misc implementation somehow. security-misc currently implements these things hopefully as easy and declarative as possible.</p>
<p>We also want that same security hardening when booting in live mode. And re-implementing it with live-config seems harder.</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-08T17:32:48Z' class='post-time'>
                March 8, 2020,  5:32pm
              </time>
              <meta itemprop='dateModified' content='2020-03-08T17:32:48Z'>
          <span itemprop='position'>#130</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>All right, so what do you suggest to do? Keep the user <code>user</code>?</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-08T17:41:41Z' class='post-time'>
                March 8, 2020,  5:41pm
              </time>
              <meta itemprop='dateModified' content='2020-03-08T17:41:41Z'>
          <span itemprop='position'>#131</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I suggest:</p>
<ol>
<li>skip copying files from live iso home <code>user</code> to installed system (of if that is not possible use a script to remove any unwanted files either during calamares or during first boot)</li>
<li>skip calamares user creation question (leave that to anon-base-files)</li>
</ol>
<p>…if that is possible.</p>
<p>Related questions:</p>
<p>How does calamares magic work anyhow? Does is something like debootstrap? Does it do <code>sudo apt install whonix-host-xfce-kvm-nonfreedom</code> inside chroot? (That would actually be the cleanest.) Or does it somehow copy from somewhere to somewhere?</p>
<p>Does calamares require networking?</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-08T17:47:32Z' class='post-time'>
                March 8, 2020,  5:47pm
              </time>
              <meta itemprop='dateModified' content='2020-03-08T17:47:32Z'>
          <span itemprop='position'>#132</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>related diff 15.0.0.8.9-developers-only…15.0.0.9.4-developers-only</p>
<p><a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/compare/2fc6fc5318665db8bfb697d7d6b71495c7c8d229...c3640b4478b857ba36317a51eb08e834e75d7670">https://github.com/Whonix/whonix-libvirt/compare/2fc6fc5318665db8bfb697d7d6b71495c7c8d229...c3640b4478b857ba36317a51eb08e834e75d7670</a></p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-08T18:46:43Z' class='post-time'>
                March 8, 2020,  6:46pm
              </time>
              <meta itemprop='dateModified' content='2020-03-08T18:46:43Z'>
          <span itemprop='position'>#133</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="131" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>skip calamares user creation question (leave that to anon-base-files)</p>
</blockquote>
</aside>
<p>So that would mean no user creation question during the installing process? Like say I would want to create a user <code>John</code> with the installer, I wouldn’t be able to do so?  What user will I have on first boot on the installed version then? How is <code>anon-base-files</code> supposed to take care of that? I don’t get it.</p>
<aside class="quote no-group" data-username="Patrick" data-post="131" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>How does calamares magic work anyhow? Does is something like debootstrap? Does it do <code>sudo apt install whonix-host-xfce-kvm-nonfreedom</code> inside chroot? (That would actually be the cleanest.) Or does it somehow copy from somewhere to somewhere?</p>
</blockquote>
</aside>
<p>To the best of my knowledge it can do both (first copies files over and then can also install/remove packages on demand).<br>
But easiest way is just to copy over the iso content, minus the Calamares stuff. In this regard Whonix-Host iso should be as close to the fial Whonix Host installed version as possible.</p>
<aside class="quote no-group" data-username="Patrick" data-post="131" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Does calamares require networking?</p>
</blockquote>
</aside>
<p>I am not sure, but Whonix-Host needs it anyway otherwise it is rather pointless.</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-09T06:28:52Z' class='post-time'>
                March 9, 2020,  6:28am
              </time>
              <meta itemprop='dateModified' content='2020-03-09T06:28:52Z'>
          <span itemprop='position'>#134</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="onion_knight" data-post="133" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>To the best of my knowledge it can do both (first copies files over and then can also install/remove packages on demand).</p>
</blockquote>
</aside>
<p>[1] Copying over files, pretty likely, yes. The Whonix host (or any VM) raw image doesn’t contain any installable packages before being converted to iso. Only already installed packages. Apt cache (debs) is cleared during the build process to save space. I doubt calamares somehow reconstructs debs from installed packages.</p>
<aside class="quote no-group" data-username="onion_knight" data-post="133" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>In this regard Whonix-Host iso should be as close to the fial Whonix Host installed version as possible.</p>
</blockquote>
</aside>
<p>Makes sense.</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="131" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<p>Does calamares require networking?</p>
</blockquote>
<p>I am not sure, but Whonix-Host needs it anyway otherwise it is rather pointless.</p>
</blockquote>
</aside>
<p>I see requirement for internet by an installer as a disadvantage. User might have to enter wifi credentials twice. It adds more fragility, complexity. Think Tor, VPN, onion repos, connection slowness, data quota, and whatnot.</p>
<p>Debian installer is even worse. Often network cards or wifi adapters requiring nonfree drivers aren’t on the iso. These are only available online. After enabling nonfree repository. And Debian repository is unreachable due to no internet. I’ve seen many users fail at this requirement and use Ubuntu instead.</p>
<p>I guess since calamares copies over iso contents to disk it won’t be needing networking. That’s awesome since lower complexity and saves time.</p>
<aside class="quote no-group" data-username="onion_knight" data-post="133" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>So that would mean no user creation question during the installing process?</p>
</blockquote>
</aside>
<p>Correct.</p>
<aside class="quote no-group" data-username="onion_knight" data-post="133" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Like say I would want to create a user <code>John</code> with the installer, I wouldn’t be able to do so?</p>
</blockquote>
</aside>
<p>Custom user names would be unsupported. Username “user” is “the ideal user name”. It should be shared among all users of anonymity distributions. The rationale of this is explained here:</p>
<p><a href="../../../external.html?link=https://github.com/Whonix/anon-base-files#base-files-for-anonymity-distributions">https://github.com/Whonix/anon-base-files#base-files-for-anonymity-distributions</a></p>
<p>I also see this as an advantage of usability. The less questions installers ask, the easier to use.</p>
<aside class="quote no-group" data-username="onion_knight" data-post="133" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>What user will I have on first boot on the installed version then?</p>
</blockquote>
</aside>
<p>User <code>user</code>.</p>
<aside class="quote no-group" data-username="onion_knight" data-post="133" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>How is <code>anon-base-files</code> supposed to take care of that?</p>
</blockquote>
</aside>
<p>anon-base-files postinst script (<a href="../../../external.html?link=https://github.com/Whonix/anon-base-files/blob/master/debian/anon-base-files.postinst">anon-base-files.postinst</a>) runs all steps required for user creation during installation of anon-base-files such as adduser, addgroup, pam-auth-update, <code>passwd --lock root</code>.</p>
<p>Now that I understand calamares a bit better as per [1], anon-base-files postinst script would only run during the build process when installed. It currently isn’t re-run during calamares installation - because calamares copies files - we didn’t configure it yet to doesn’t install packages.</p>
<p>The refined plan:</p>
<ul>
<li>skip copying files from live iso /home/user folder to installed system
<ul>
<li>if that is not possible use a script to remove any unwanted files either during calamares [preferred] or during first boot</li>
</ul>
</li>
<li>skip calamares user creation question
<ul>
<li>keep user <code>user</code> as it was already created by anon-base-files during raw image creation build process</li>
</ul>
</li>
</ul>
<p>Btw why would it be bad if files created in /home/user during live iso use would leak into the installed system? Because live contents should never leak to the disk? Well, that would make sense.</p>
<p>Can you find which calamares module is responsible for copying over the files? Then we might be able to find out how it can be configured and if /home/user can be excluded.</p>
<hr>
<p>Calamares allows to run scripts indeed as per <a href="../../../external.html?link=https://github.com/calamares/calamares/blob/master/src/modules/shellprocess/shellprocess.conf">https://github.com/calamares/calamares/blob/master/src/modules/shellprocess/shellprocess.conf</a></p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-09T13:37:13Z' class='post-time'>
                March 9, 2020,  1:37pm
              </time>
              <meta itemprop='dateModified' content='2020-03-09T13:37:13Z'>
          <span itemprop='position'>#135</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Patrick" data-post="134" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I see requirement for internet by an installer as a disadvantage. User might have to enter wifi credentials twice. It adds more fragility, complexity. Think Tor, VPN, onion repos, connection slowness, data quota, and whatnot.</p>
<p>Debian installer is even worse. Often network cards or wifi adapters requiring nonfree drivers aren’t on the iso. These are only available online. After enabling nonfree repository. And Debian repository is unreachable due to no internet. I’ve seen many users fail at this requirement and use Ubuntu instead.</p>
<p>I guess since calamares copies over iso contents to disk it won’t be needing networking. That’s awesome since lower complexity and saves time.</p>
</blockquote>
</aside>
<p>I just did a test, and YES Calamares works without networking.<br>
But the way I see it, the Whonix-Host ISO is also supposed to work as a standalone live solution, with virt-manager and Whonix-VM pre-installed. This is why I mean when I say that without networking the whole experience is pretty useless.</p>
<aside class="quote no-group" data-username="Patrick" data-post="134" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>The refined plan:</p>
<ul>
<li>skip copying files from live iso /home/user folder to installed system
<ul>
<li>if that is not possible use a script to remove any unwanted files either during calamares [preferred] or during first boot</li>
</ul>
</li>
<li>skip calamares user creation question
<ul>
<li>keep user <code>user</code> as it was already created by anon-base-files during raw image creation build process</li>
</ul>
</li>
</ul>
</blockquote>
</aside>
<p>I get your idea. No user creation during install, user <code>user</code> is the default expected user on the installed OS.</p>
<p>But then why would you want to skip copying files from live iso /home/user? It could as well stay that way IMHO. User <code>user</code> is expected to have a modern Desktop environment with a couple of folders being there.  I don’t see the problem.</p>
<aside class="quote no-group" data-username="Patrick" data-post="134" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Can you find which calamares module is responsible for copying over the files? Then we might be able to find out how it can be configured and if /home/user can be excluded.</p>
</blockquote>
</aside>
<p>You just need to remove the lines <code>- users</code> in <code>/etc/calamares/settings.conf</code></p>
<p>I just build a Whonix-Host 15.0.0.9.4. All good:<br>
Installs without networking -&gt; OK<br>
Installs without user creation -&gt; OK<br>
Boots into newly installed system with user <code>user</code> -&gt; OK</p>
<p><strong>Things to be done now:</strong><br>
*Modify<code> /etc/calamares/settings.conf</code><br>
*Remove live-config from<code> /etc/calamares/modules/package.conf</code> (no need to remove it, as it is already not in the ISO, breaks the install otherwise)<br>
*Enable user <code>user</code> auto-login</p>
<p><strong>Things yet to be fixed/decided</strong><br>
*The Whonix VMs still do not boot in the live iso (not in read-only mode)<br>
*When booted in persistent mode (=on the installed version), they should be reverted back to read-write mode, otherwise it won’t work.<br>
*Branding…</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-09T13:50:31Z' class='post-time'>
                March 9, 2020,  1:50pm
              </time>
              <meta itemprop='dateModified' content='2020-03-09T13:50:31Z'>
          <span itemprop='position'>#136</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>See pull requests: <a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/pulls" rel="nofollow noopener">https://github.com/Whonix/whonix-libvirt/pulls</a></p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick_mobile'><span itemprop='name'>Patrick_mobile</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-09T14:27:37Z' class='post-time'>
                March 9, 2020,  2:27pm
              </time>
              <meta itemprop='dateModified' content='2020-03-09T14:27:37Z'>
          <span itemprop='position'>#137</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="onion_knight" data-post="135" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>I just did a test, and YES Calamares works without networking.<br>
But the way I see it, the Whonix-Host ISO is also supposed to work as a standalone live solution, with virt-manager and Whonix-VM pre-installed. This is why I mean when I say that without networking the whole experience is pretty useless</p>
</blockquote>
</aside>
<p>Yes. Whonix Host is should have functional network. For sure. But calamares not requiring networking is awesome too.</p>
<aside class="quote no-group" data-username="onion_knight" data-post="135" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>But then why would you want to skip copying files from live iso /home/user?</p>
</blockquote>
</aside>
<p>I thought that’s also your suggestion.<br>
Rationale being, activities done in Live (iso) mode shouldn’t end up on hard drive?</p>
<aside class="quote no-group" data-username="onion_knight" data-post="135" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>User <code>user</code> is expected to have a modern Desktop environment with a couple of folders being there. I don’t see the problem.</p>
</blockquote>
</aside>
<p>Yes. Files from /etc/skel. Not a contradiction to above. /home/user should be similar to Whonix-Workstation after first boot from hard drive.</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-09T17:43:22Z' class='post-time'>
                March 9, 2020,  5:43pm
              </time>
              <meta itemprop='dateModified' content='2020-03-09T17:43:22Z'>
          <span itemprop='position'>#138</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="onion_knight" data-post="136" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>See pull requests: <a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/pulls">https://github.com/Whonix/whonix-libvirt/pulls </a></p>
</blockquote>
</aside>
<p>Very good. Merged. But not tested yet.</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-09T18:26:07Z' class='post-time'>
                March 9, 2020,  6:26pm
              </time>
              <meta itemprop='dateModified' content='2020-03-09T18:26:07Z'>
          <span itemprop='position'>#139</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>These modules in <a href="../../../external.html?link=https://github.com/Whonix/whonix-libvirt/blob/master/etc/calamares/settings.conf">https://github.com/Whonix/whonix-libvirt/blob/master/etc/calamares/settings.conf</a>… Full quote:</p>
<pre><code>- exec:
  - partition
  - mount
  - unpackfs
  - sources-media
  - machineid
  - fstab
  - locale
  - keyboard
  - localecfg
  - networkcfg
  - hwclock
  - services-systemd
  - bootloader-config
  - grubcfg
  - bootloader
  - packages
  - luksbootkeyfile
  - plymouthcfg
  - initramfscfg
  - initramfs
  - sources-media-unmount
  - sources-final
  - umount
</code></pre>
<p>We need to understand these modules at least on a high level.</p>
<blockquote>
<p>sources-media</p>
</blockquote>
<p>/usr/lib/calamares/modules/sources-media/module.desc executes /usr/sbin/sources-media. Was looking at it. Dunno what it is needed for. Something with sources list. Likely not needed because this is already done in Whonix host raw image / package anon-apt-sources-list.</p>
<p>Generally, we need to know what the installer does so it doesn’t do anything we don’t want it to do.</p>
<p>Therefore this module is a candidate for disabling.</p>
<blockquote>
<p>machineid</p>
</blockquote>
<p>We want shared machineid by anon-base-files. We don’t want random machineid. (Discussed in forums / documented in anon-base-files.)</p>
<p><a href="../../../external.html?link=https://github.com/calamares/calamares/blob/master/src/modules/machineid/machineid.conf">https://github.com/calamares/calamares/blob/master/src/modules/machineid/machineid.conf</a></p>
<p>“Whether to create an entropy file” sounds interesting but calamares upstream defaults are <code>entropy: false</code> and <code>entropy-copy: false</code> and package calamares-settings-debian <code>/etc/calamares/modules/machineid.conf</code> isn’t using that either so perhaps better not using module <code>machineid</code> for now.</p>
<blockquote>
<p>locale</p>
</blockquote>
<p>About timezone. We have package <code>timezone-utc</code>. Hence, this module is probably better disabled.</p>
<blockquote>
<p>localecfg</p>
</blockquote>
<p><code>locale</code> should already be correctly set during build process. Hence, this module is probably better disabled.</p>
<blockquote>
<p>networkcfg</p>
</blockquote>
<p>Not sure. Might be better set by <a href="../../../external.html?link=https://github.com/Whonix/kicksecure-network-conf">https://github.com/Whonix/kicksecure-network-conf</a> / <a href="../kicksecure-network-configuration/8985.html" class="inline-onebox">Kicksecure Network Configuration</a></p>
<blockquote>
<p>hwclock</p>
</blockquote>
<p>Dunno yet if needed.</p>
<blockquote>
<p>services-systemd</p>
</blockquote>
<p>not needed as per <a href="../../../external.html?link=https://github.com/calamares/calamares/blob/master/src/modules/services-systemd/services-systemd.conf">https://github.com/calamares/calamares/blob/master/src/modules/services-systemd/services-systemd.conf</a> since does nothing by default and because such things would be configured through Whonix packages.</p>
<p>Generally, I am much more eager to have Whonix packages configure anything. That way it is easier to understand and later on easier to change through upgrades.</p>
<blockquote>
<p>bootloader-config</p>
</blockquote>
<p>A calamares-settings-debian thing, not calamares upstream thing.</p>
<p>/usr/lib/calamares/modules/bootloader-config/module.desc calls /usr/sbin/bootloader-config</p>
<p>Looks useful.</p>
<pre><code>if [ -d /sys/firmware/efi/efivars ]; then
    echo " * Installing grub-efi (uefi)..."
    DEBIAN_FRONTEND=noninteractive chroot $CHROOT apt-get -y install grub-efi-amd64 cryptsetup keyutils
else
    echo " * install grub... (bios)"
    DEBIAN_FRONTEND=noninteractive chroot $CHROOT apt-get -y install grub-pc cryptsetup keyutils
fi
</code></pre>
<p>Though, I wonder if that requires networking. Otherwise we could perhaps cache these packages + dependencies somehow so it would work without internet connection too?</p>
<blockquote>
<p>grubcfg</p>
</blockquote>
<p>Probably required since it modifies /etc/default/grub depending on configuration (using full disk encryption or not).</p>
<blockquote>
<p>bootloader</p>
</blockquote>
<p>Probably required.</p>
<ul>
<li>/etc/calamares/modules/bootloader.conf</li>
<li><a href="../../../external.html?link=https://github.com/calamares/calamares/blob/master/src/modules/bootloader/bootloader.conf">https://github.com/calamares/calamares/blob/master/src/modules/bootloader/bootloader.conf</a></li>
</ul>
<blockquote>
<p>luksbootkeyfile</p>
</blockquote>
<p>Dunno yet.</p>
<blockquote>
<p>plymouthcfg</p>
</blockquote>
<p>We probably don’t want plymouth. Extra complexity. Experienced some bugs in past. Using it on none of my systems. Whnix VMs also don’t have plymouth.</p>
<blockquote>
<p>initramfscfg</p>
</blockquote>
<p>Probably required.</p>
<blockquote>
<p>initramfs</p>
</blockquote>
<p>Probably required.</p>
<blockquote>
<p>sources-media-unmount</p>
</blockquote>
<p>Similar to sources-media.</p>
<blockquote>
<p>sources-final</p>
</blockquote>
<p>Similar to sources-media.</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/onion_knight'><span itemprop='name'>onion_knight</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-09T20:51:53Z' class='post-time'>
                March 9, 2020,  8:51pm
              </time>
              <meta itemprop='dateModified' content='2020-03-09T20:51:53Z'>
          <span itemprop='position'>#140</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I did a try after removing all the modules you suggest to disable. It seems some of them were still ran nonetheless…<br>
I’ll try a more thorough process tomorrow.</p>
<aside class="quote no-group quote-modified" data-username="Patrick" data-post="139" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<p>locale</p>
</blockquote>
<p>About timezone. We have package <code>timezone-utc</code> . Hence, this module is probably better disabled.</p>
<blockquote>
<p>localecfg</p>
</blockquote>
<p><code>locale</code> should already be correctly set during build process. Hence, this module is probably better disabled.</p>
</blockquote>
</aside>
<p>Would that mean no possibility for the user to choose his location and timezone  during install?</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick_mobile'><span itemprop='name'>Patrick_mobile</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="3931.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-10T04:44:29Z' class='post-time'>
                March 10, 2020,  4:44am
              </time>
              <meta itemprop='dateModified' content='2020-03-10T04:44:29Z'>
          <span itemprop='position'>#141</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="onion_knight" data-post="140" data-topic="3931">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/o/f6c823/40.png" class="avatar"> onion_knight:</div>
<blockquote>
<p>Would that mean no possibility for the user to choose his location and timezone during install?</p>
</blockquote>
</aside>
<p>Yes. No possibility.</p>
        </div>

        <meta itemprop='headline' content='Whonix host operating system'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="3931c575.html?page=6">← previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="3931fdfa.html?page=8">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
