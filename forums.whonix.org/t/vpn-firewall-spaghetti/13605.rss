<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>VPN-Firewall spaghetti</title>
    <link>http://forums.whonix.org/t/vpn-firewall-spaghetti/13605</link>
    <description>i have followed all the steps here to learn setup fail closed vpn with vpnbook as example on KVM debian guest
https://www.whonix.org/wiki/VPN-Firewall

with firewall flushed i can connect to vpn 

when firewall is loaded i cant connect to openvpn error ;

**write UDP: Operation not permitted (code=1)** 

this is my openvpn.conf 
client
dev tun0
proto udp
remote 51.68.180.4 53
remote de4.vpnbook.com 53
resolv-retry infinite
nobind
persist-key
persist-tun
auth-user-pass auth
comp-lzo
verb 3
cipher AES-128-CBC
fast-io
pull
route-delay 2
redirect-gateway

#############################
## VPN-Firewall specific settings ##
#############################

client
dev tun0

persist-tun
persist-key

script-security 2
up &quot;/etc/openvpn/update-resolv-conf script_type=up dev=tun0&quot;
down &quot;/etc/openvpn/update-resolv-conf script_type=down dev=tun0&quot;
____________________________________________________________

Resolve.conf  file contains :

nameserver 192.168.xx.xx

**2-  ist is mandatory to adde second user ?** 

**3- is there any alternative to setup fail closed vpn**</description>
    <language>en</language>
    <lastBuildDate>Wed, 04 May 2022 18:58:26 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/vpn-firewall-spaghetti/13605.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>VPN-Firewall spaghetti</title>
        <dc:creator><![CDATA[merke]]></dc:creator>
        <description><![CDATA[
            <p>yes .no leaks<br>
100% killswitch<br>
allows outgoing connections on a non tun0 interface but only a vpn server</p>
          <p><a href="http://forums.whonix.org/t/vpn-firewall-spaghetti/13605/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/vpn-firewall-spaghetti/13605/4</link>
        <pubDate>Wed, 04 May 2022 18:58:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13605-4</guid>
        <source url="http://forums.whonix.org/t/vpn-firewall-spaghetti/13605.rss">VPN-Firewall spaghetti</source>
      </item>
      <item>
        <title>VPN-Firewall spaghetti</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Did you leak test it?</p>
          <p><a href="http://forums.whonix.org/t/vpn-firewall-spaghetti/13605/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/vpn-firewall-spaghetti/13605/3</link>
        <pubDate>Wed, 04 May 2022 08:29:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13605-3</guid>
        <source url="http://forums.whonix.org/t/vpn-firewall-spaghetti/13605.rss">VPN-Firewall spaghetti</source>
      </item>
      <item>
        <title>VPN-Firewall spaghetti</title>
        <dc:creator><![CDATA[merke]]></dc:creator>
        <description><![CDATA[
            <p>is so difficult to solve<br>
Adrenalos firewall is also very outdated since 6 years<br>
Good reasons to not use it .</p>
<p>Its very easier to use a small Iptable batch i found on a forum and it works</p>
          <p><a href="http://forums.whonix.org/t/vpn-firewall-spaghetti/13605/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/vpn-firewall-spaghetti/13605/2</link>
        <pubDate>Tue, 03 May 2022 18:32:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13605-2</guid>
        <source url="http://forums.whonix.org/t/vpn-firewall-spaghetti/13605.rss">VPN-Firewall spaghetti</source>
      </item>
      <item>
        <title>VPN-Firewall spaghetti</title>
        <dc:creator><![CDATA[merke]]></dc:creator>
        <description><![CDATA[
            <p>i have followed all the steps here to learn setup fail closed vpn with vpnbook as example on KVM debian guest</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/VPN-Firewall">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/VPN-Firewall" target="_blank" rel="noopener nofollow ugc" title="11:34AM - 26 January 2022">Whonix – 26 Jan 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/384;"><img src="https://www.whonix.org/w/images/1/1b/Vpnfirewall1234322134.jpg" class="thumbnail" width="640" height="384"></div>

<h3><a href="https://www.whonix.org/wiki/VPN-Firewall" target="_blank" rel="noopener nofollow ugc">VPN-Firewall: Enforce use of a VPN</a></h3>

  <p>Instructions on how to use VPN-Firewall. A Fail Closed Mechanism for VPNs. Prevent leaks when using VPNs. Force all connections through VPNs. Prevents shared VPN/Tor server leak bug.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>with firewall flushed i can connect to vpn</p>
<p>when firewall is loaded i cant connect to openvpn error ;</p>
<p><strong>write UDP: Operation not permitted (code=1)</strong></p>
<p>this is my openvpn.conf<br>
client<br>
dev tun0<br>
proto udp<br>
remote 51.68.180.4 53<br>
remote <a href="http://de4.vpnbook.com" rel="noopener nofollow ugc">de4.vpnbook.com</a> 53<br>
resolv-retry infinite<br>
nobind<br>
persist-key<br>
persist-tun<br>
auth-user-pass auth<br>
comp-lzo<br>
verb 3<br>
cipher AES-128-CBC<br>
fast-io<br>
pull<br>
route-delay 2<br>
redirect-gateway</p>
<p>#############################</p>
<h2>
<a name="vpn-firewall-specific-settings-1" class="anchor" href="http://forums.whonix.org#vpn-firewall-specific-settings-1"></a>VPN-Firewall specific settings</h2>
<p>#############################</p>
<p>client<br>
dev tun0</p>
<p>persist-tun<br>
persist-key</p>
<p>script-security 2<br>
up “/etc/openvpn/update-resolv-conf script_type=up dev=tun0”<br>
down “/etc/openvpn/update-resolv-conf script_type=down dev=tun0”</p>
<hr>
<p>Resolve.conf  file contains :</p>
<p>nameserver 192.168.xx.xx</p>
<p><strong>2-  ist is mandatory to adde second user ?</strong></p>
<p><strong>3- is there any alternative to setup fail closed vpn</strong></p>
          <p><a href="http://forums.whonix.org/t/vpn-firewall-spaghetti/13605/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/vpn-firewall-spaghetti/13605/1</link>
        <pubDate>Thu, 28 Apr 2022 23:33:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13605-1</guid>
        <source url="http://forums.whonix.org/t/vpn-firewall-spaghetti/13605.rss">VPN-Firewall spaghetti</source>
      </item>
  </channel>
</rss>
