<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>OpenVpn issue Linux ip link set failed: external program exited with error status: 2</title>
    <link>http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544</link>
    <description>hi, 

Since I updated whonx 13, the vpn is not working. So I take a new virtual image for the gateway (virtual box)  and I followed the tutorial “https://www.whonix.org/wiki/Tunnels/Connecting_to_a_VPN_before_Tor”

And I receive  an error message in debug mode( as described in the documentation)



----------

sudo -u tunnel openvpn /etc/openvpn/openvpn.conf

----------
user@host:/etc/openvpn$ sudo -u tunnel openvpn /etc/openvpn/openvpn.conf
Sat Jun  4 14:21:28 2016 OpenVPN 2.3.4 i586-pc-linux-gnu [SSL (OpenSSL)] [LZO] [EPOLL] [PKCS11] [MH] [IPv6] built on Nov 19 2015
Sat Jun  4 14:21:28 2016 library versions: OpenSSL 1.0.1k 8 Jan 2015, LZO 2.08
Enter Auth Username: ****
Enter Auth Password: ********
Sat Jun  4 14:21:32 2016 Socket Buffers: R=[87380-&gt;131072] S=[16384-&gt;131072]
Sat Jun  4 14:21:32 2016 Attempting to establish TCP connection with [AF_INET]185.7.33.21:80 [nonblock]
Sat Jun  4 14:21:33 2016 TCP connection established with [AF_INET]185.7.33.21:80
Sat Jun  4 14:21:33 2016 TCPv4_CLIENT link local: [undef]
Sat Jun  4 14:21:33 2016 TCPv4_CLIENT link remote: [AF_INET]185.7.33.21:80
Sat Jun  4 14:21:33 2016 TLS: Initial packet from [AF_INET]185.7.33.21:80, sid=8510eb3c 52b05311
Sat Jun  4 14:21:33 2016 VERIFY OK: depth=2, C=BE, O=GlobalSign nv-sa, OU=Root CA, CN=GlobalSign Root CA
Sat Jun  4 14:21:33 2016 VERIFY OK: depth=1, O=AlphaSSL, CN=AlphaSSL CA - G2
Sat Jun  4 14:21:33 2016 Validating certificate key usage
Sat Jun  4 14:21:33 2016 ++ Certificate has key usage  00a0, expects 00a0
Sat Jun  4 14:21:33 2016 VERIFY KU OK
Sat Jun  4 14:21:33 2016 Validating certificate extended key usage
Sat Jun  4 14:21:33 2016 ++ Certificate has EKU (str) TLS Web Server Authentication, expects TLS Web Server Authentication
Sat Jun  4 14:21:33 2016 VERIFY EKU OK
Sat Jun  4 14:21:33 2016 VERIFY OK: depth=0, OU=Domain Control Validated, CN=*.earthvpn.com
Sat Jun  4 14:21:33 2016 Data Channel Encrypt: Cipher &#39;AES-256-CBC&#39; initialized with 256 bit key
Sat Jun  4 14:21:33 2016 Data Channel Encrypt: Using 160 bit message hash &#39;SHA1&#39; for HMAC authentication
Sat Jun  4 14:21:33 2016 Data Channel Decrypt: Cipher &#39;AES-256-CBC&#39; initialized with 256 bit key
Sat Jun  4 14:21:33 2016 Data Channel Decrypt: Using 160 bit message hash &#39;SHA1&#39; for HMAC authentication
Sat Jun  4 14:21:33 2016 Control Channel: TLSv1, cipher TLSv1/SSLv3 DHE-RSA-AES256-SHA, 2048 bit RSA
Sat Jun  4 14:21:33 2016 [*.earthvpn.com] Peer Connection Initiated with [AF_INET]185.7.33.21:80
Sat Jun  4 14:21:35 2016 SENT CONTROL [*.earthvpn.com]: &#39;PUSH_REQUEST&#39; (status=1)
Sat Jun  4 14:21:37 2016 PUSH: Received control message: &#39;PUSH_REPLY,ping 3,ping-restart 10,ifconfig 192.168.179.29 192.168.179.30,dhcp-option DOMAIN earthvpn.com,dhcp-option DNS 8.8.8.8,dhcp-option DNS 8.8.4.4,route-gateway 192.168.179.30,redirect-gateway def1&#39;
Sat Jun  4 14:21:37 2016 OPTIONS IMPORT: timers and/or timeouts modified
Sat Jun  4 14:21:37 2016 OPTIONS IMPORT: --ifconfig/up options modified
Sat Jun  4 14:21:37 2016 OPTIONS IMPORT: route options modified
Sat Jun  4 14:21:37 2016 OPTIONS IMPORT: route-related options modified
Sat Jun  4 14:21:37 2016 OPTIONS IMPORT: --ip-win32 and/or --dhcp-option options modified
Sat Jun  4 14:21:37 2016 ROUTE_GATEWAY 10.0.2.2/255.255.255.0 IFACE=eth0 HWADDR=08:00:27:b7:49:35
Sat Jun  4 14:21:37 2016 TUN/TAP device tun0 opened
Sat Jun  4 14:21:37 2016 Note: Cannot set tx queue length on tun0: Operation not permitted (errno=1)
Sat Jun  4 14:21:37 2016 do_ifconfig, tt-&gt;ipv6=0, tt-&gt;did_ifconfig_ipv6_setup=0
Sat Jun  4 14:21:37 2016 /sbin/ip link set dev tun0 up mtu 1500
RTNETLINK answers: Operation not permitted
Sat Jun  4 14:21:37 2016 Linux ip link set failed: external program exited with error status: 2
Sat Jun  4 14:21:37 2016 Exiting due to fatal error

----------
   
In troubleshooting, the documentation said “Use ip_unpriv as documented above”.  But I don’t understand, it’s not clear for me. what should I do with this instruction 

    ip_unpriv vs ip-unpriv[edit]
    Note:
    Whonix TUNNEL_FIREWALL uses ip_unpriv (underscore)
    Standalone VPN-FIREWALL uses ip-unpriv (hyphen)

Do you have more instruction or détails?
Thank you for your help.



details openvpn.conf

client
dev tun0
proto tcp
remote 185.7.33.21 80
resolv-retry infinite
nobind
persist-key
persist-tun
ca /etc/openvpn/earthvpn.crt
auth-user-pass
auth-nocache
remote-cert-tls server
reneg-sec 0
verb 3
auth SHA1
cipher AES-256-CBC



----------
50_user.conf


`###########################
`## VPN-Firewall Settings ##
`###########################

`## Make sure Tor always connects through the VPN.
`## Enable: 1
`## Disable: 0
`## DISABELD BY DEFAULT, because it requires a VPN provider.`
VPN_FIREWALL=1

`## For OpenVPN.
`#VPN_INTERFACE=tun0

`## Destinations you don not want routed through the VPN.
`## 10.0.2.2-10.0.2.24: VirtualBox DHCP
`#      LOCAL_NET=&quot;\
`#         127.0.0.0-127.0.0.24 \
`#         192.168.0.0-192.168.0.24 \
`#         192.168.1.0-192.168.1.24 \
`#         10.152.152.0-10.152.152.24 \
`#         10.0.2.2-10.0.2.24 \
`#      &quot;


----------
/etc/sudoers.d/tunnel_unpriv

`## This file is part of Whonix.
`## Copyright (C) 2012 - 2014 Patrick Schleizer &lt;adrelanos@riseup.net&gt;
`## See the file COPYING for copying conditions.

tunnel ALL=(ALL) NOPASSWD: /bin/ip
tunnel ALL=(ALL) NOPASSWD: /usr/sbin/openvpn *
Defaults:tunnel !requiretty
~                                                                                                                                                                  
~                                                                                                                                                                  
~</description>
    <language>en</language>
    <lastBuildDate>Sat, 12 Nov 2016 23:36:10 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>OpenVpn issue Linux ip link set failed: external program exited with error status: 2</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="9" data-topic="2544">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/z/258eb7/40.png" class="avatar"> zoltix:</div>
<blockquote>
<p>config for …</p>
</blockquote>
</aside>
<p>I deleted that config, because you posted your private key. A bad mistake. Nevertheless you should now consider that vpn account compromised, since this is a public forum.</p>
          <p><a href="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/10</link>
        <pubDate>Sat, 12 Nov 2016 23:36:10 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2544-10</guid>
        <source url="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544.rss">OpenVpn issue Linux ip link set failed: external program exited with error status: 2</source>
      </item>
      <item>
        <title>OpenVpn issue Linux ip link set failed: external program exited with error status: 2</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="7" data-topic="2544">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/e/8dc957/40.png" class="avatar"> entr0py:</div>
<blockquote>
<p>No, not that involved. Just letting Whonix users know that tunneling scenarios can be replicated in Qubes by using non-Whonix ProxyVMs and then pointing them to appropriate docs on Qubes side. Advantage of using separate proxyVM: easily tunnel multiple whonix vm’s through one proxy. Advantage of not using proxyVM: less chance of de-anonymization through user error, especially for proxies intended for dedicated use with 1 vm.</p>
</blockquote>
</aside>
<p>Yes, that would be useful.</p>
<aside class="quote" data-post="7" data-topic="2544">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/e/8dc957/40.png" class="avatar"> entr0py:</div>
<blockquote>
<p>I think <a class="mention" href="http://forums.whonix.org/u/zoltix">@Zoltix</a>’s point is that users who are already familiar with openvpn will skip the vpn configuration section not realizing that there are tunnel-specific requirements in the .conf file. Might make more sense to provide Whonix-specific VPN configuration and leave the <a href="http://riseup.net">riseup.net</a> example in a collapsed section. VPN configs are so provider-specific that users really should be directed to their provider for config assistance. As the intro says, “get it working in debian then put it in whonix and make these changes…”</p>
</blockquote>
</aside>
<p>I see. I think the walkthrough currently using a a specific example, riseup, is fine. In my experience, most users have more difficult times with abstract walkthroughs followed by examples to a point where the abstract gets negligible.</p>
<p>As for skipping the VPN configuration chapter, perhaps there just should be an explanation or own chapter with a distinctive name that the VPN configuration chapter should not be totally skipped as it contains required changes.</p>
<p>I’ve improved <a href="https://www.whonix.org/wiki/Template:VPN-Firewall/Troubleshooting#ip_unpriv_vs_ip-unpriv">https://www.whonix.org/wiki/Template:VPN-Firewall/Troubleshooting#ip_unpriv_vs_ip-unpriv</a> for more clarity.</p>
          <p><a href="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/8</link>
        <pubDate>Mon, 06 Jun 2016 12:28:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2544-8</guid>
        <source url="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544.rss">OpenVpn issue Linux ip link set failed: external program exited with error status: 2</source>
      </item>
      <item>
        <title>OpenVpn issue Linux ip link set failed: external program exited with error status: 2</title>
        <dc:creator><![CDATA[entr0py]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="6" data-topic="2544">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Isn’t the current approach where the whole walkthrough is an example already not good?</p>
</blockquote>
</aside>
<p>I think <a class="mention" href="http://forums.whonix.org/u/zoltix">@Zoltix</a>’s point is that users who are already familiar with openvpn will skip the vpn configuration section not realizing that there are tunnel-specific requirements in the .conf file. Might make more sense to provide Whonix-specific VPN configuration and leave the <a href="http://riseup.net">riseup.net</a> example in a collapsed section. VPN configs are so provider-specific that users really should be directed to their provider for config assistance. As the intro says, “get it working in debian then put it in whonix and make these changes…”</p>
<aside class="quote" data-post="6" data-topic="2544">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I don’t understand. Turning anon-whonix AppVM into a ProxyVM? I guess that is a bigger discussion. And non-trivial.</p>
</blockquote>
</aside>
<p>No, not that involved. Just letting Whonix users know that tunneling scenarios can be replicated in Qubes by using non-Whonix ProxyVMs and then pointing them to appropriate docs on Qubes side. Advantage of using separate proxyVM: easily tunnel multiple whonix vm’s through one proxy. Advantage of not using proxyVM: less chance of de-anonymization through user error, especially for proxies intended for dedicated use with 1 vm.</p>
          <p><a href="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/7</link>
        <pubDate>Mon, 06 Jun 2016 04:12:18 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2544-7</guid>
        <source url="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544.rss">OpenVpn issue Linux ip link set failed: external program exited with error status: 2</source>
      </item>
      <item>
        <title>OpenVpn issue Linux ip link set failed: external program exited with error status: 2</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="4" data-topic="2544">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/e/8dc957/40.png" class="avatar"> entr0py:</div>
<blockquote>
<p>Outline:</p>
</blockquote>
</aside>
<aside class="quote" data-post="4" data-topic="2544">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/e/8dc957/40.png" class="avatar"> entr0py:</div>
<blockquote>
<p>Sample Config</p>
</blockquote>
</aside>
<p>Isn’t the current approach where the whole walkthrough is an example already not good?</p>
<aside class="quote" data-post="4" data-topic="2544">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/e/8dc957/40.png" class="avatar"> entr0py:</div>
<blockquote>
<p>Also, the entire tunnel section needs to provide the option of using ProxyVMs for Qubes users.</p>
</blockquote>
</aside>
<p>I don’t understand. Turning anon-whonix AppVM into a ProxyVM? I guess that is a bigger discussion. And non-trivial.</p>
          <p><a href="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/6</link>
        <pubDate>Sun, 05 Jun 2016 22:32:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2544-6</guid>
        <source url="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544.rss">OpenVpn issue Linux ip link set failed: external program exited with error status: 2</source>
      </item>
      <item>
        <title>OpenVpn issue Linux ip link set failed: external program exited with error status: 2</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Zoltix:</p>
<blockquote>
<p>Perhaps, you should add remark about that in documentation that will easier.</p>
</blockquote>
<p>Where? Can you just edit it?</p>
          <p><a href="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/5</link>
        <pubDate>Sun, 05 Jun 2016 21:47:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2544-5</guid>
        <source url="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544.rss">OpenVpn issue Linux ip link set failed: external program exited with error status: 2</source>
      </item>
      <item>
        <title>OpenVpn issue Linux ip link set failed: external program exited with error status: 2</title>
        <dc:creator><![CDATA[entr0py]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="3" data-topic="2544">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/z/258eb7/40.png" class="avatar"> zoltix:</div>
<blockquote>
<p>Perhaps, you should add remark about that in documentation that will easier.</p>
</blockquote>
</aside>
<p>Ok.<br>
Outline:</p>
<ol>
<li>Configure Firewall</li>
<li>Configure User: tunnel</li>
<li>Configure OpenVPN &amp; DNS<br>
(Same as usual plus these changes. Sample config at the end.)</li>
<li>Running OpenVPN<br>
(1. systemd, 2. command-line)</li>
<li>Troubleshooting</li>
<li>Sample Config</li>
<li>Sample Scripts</li>
</ol>
<p>Also, the entire tunnel section needs to provide the option of using ProxyVMs for Qubes users.</p>
          <p><a href="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/4</link>
        <pubDate>Sun, 05 Jun 2016 21:39:07 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2544-4</guid>
        <source url="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544.rss">OpenVpn issue Linux ip link set failed: external program exited with error status: 2</source>
      </item>
      <item>
        <title>OpenVpn issue Linux ip link set failed: external program exited with error status: 2</title>
        <dc:creator><![CDATA[zoltix]]></dc:creator>
        <description><![CDATA[
            <p>I found my issue, I needed to add “iproute /usr/bin/ip_unpriv” without forgetting to modify “dev tun” to “dev tun0” and add the Unprivileged mode "iproute /usr/bin/ip_unpriv " in /etc/openvpn/openvpn.conf.</p>
<p>In fact, I thought that I could just do a copy the config from my vpn provider to /etc/openvpn/openvpn.conf”.  it was my mistake.</p>
<p>Perhaps, you should add remark about that in documentation that will easier.</p>
          <p><a href="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/3</link>
        <pubDate>Sun, 05 Jun 2016 17:50:07 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2544-3</guid>
        <source url="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544.rss">OpenVpn issue Linux ip link set failed: external program exited with error status: 2</source>
      </item>
      <item>
        <title>OpenVpn issue Linux ip link set failed: external program exited with error status: 2</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Search the wiki page for <code>ip_unpriv</code> to see what is missing in your openvpn.conf.</p>
          <p><a href="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/2</link>
        <pubDate>Sat, 04 Jun 2016 20:07:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2544-2</guid>
        <source url="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544.rss">OpenVpn issue Linux ip link set failed: external program exited with error status: 2</source>
      </item>
      <item>
        <title>OpenVpn issue Linux ip link set failed: external program exited with error status: 2</title>
        <dc:creator><![CDATA[zoltix]]></dc:creator>
        <description><![CDATA[
            <p>hi,</p>
<p>Since I updated whonx 13, the vpn is not working. So I take a new virtual image for the gateway (virtual box)  and I followed the tutorial “<a href="https://www.whonix.org/wiki/Tunnels/Connecting_to_a_VPN_before_Tor%E2%80%9D" rel="nofollow noopener">https://www.whonix.org/wiki/Tunnels/Connecting_to_a_VPN_before_Tor”</a></p>
<p>And I receive  an error message in debug mode( as described in the documentation)</p>
<hr>
<p>sudo -u tunnel openvpn /etc/openvpn/openvpn.conf</p>
<hr>
<p>user@host:/etc/openvpn$ sudo -u tunnel openvpn /etc/openvpn/openvpn.conf<br>
Sat Jun  4 14:21:28 2016 OpenVPN 2.3.4 i586-pc-linux-gnu [SSL (OpenSSL)] [LZO] [EPOLL] [PKCS11] [MH] [IPv6] built on Nov 19 2015<br>
Sat Jun  4 14:21:28 2016 library versions: OpenSSL 1.0.1k 8 Jan 2015, LZO 2.08<br>
Enter Auth Username: ****<br>
Enter Auth Password: ********<br>
Sat Jun  4 14:21:32 2016 Socket Buffers: R=[87380-&gt;131072] S=[16384-&gt;131072]<br>
Sat Jun  4 14:21:32 2016 Attempting to establish TCP connection with [AF_INET]185.7.33.21:80 [nonblock]<br>
Sat Jun  4 14:21:33 2016 TCP connection established with [AF_INET]185.7.33.21:80<br>
Sat Jun  4 14:21:33 2016 TCPv4_CLIENT link local: [undef]<br>
Sat Jun  4 14:21:33 2016 TCPv4_CLIENT link remote: [AF_INET]185.7.33.21:80<br>
Sat Jun  4 14:21:33 2016 TLS: Initial packet from [AF_INET]185.7.33.21:80, sid=8510eb3c 52b05311<br>
Sat Jun  4 14:21:33 2016 VERIFY OK: depth=2, C=BE, O=GlobalSign nv-sa, OU=Root CA, CN=GlobalSign Root CA<br>
Sat Jun  4 14:21:33 2016 VERIFY OK: depth=1, O=AlphaSSL, CN=AlphaSSL CA - G2<br>
Sat Jun  4 14:21:33 2016 Validating certificate key usage<br>
Sat Jun  4 14:21:33 2016 ++ Certificate has key usage  00a0, expects 00a0<br>
Sat Jun  4 14:21:33 2016 VERIFY KU OK<br>
Sat Jun  4 14:21:33 2016 Validating certificate extended key usage<br>
Sat Jun  4 14:21:33 2016 ++ Certificate has EKU (str) TLS Web Server Authentication, expects TLS Web Server Authentication<br>
Sat Jun  4 14:21:33 2016 VERIFY EKU OK<br>
Sat Jun  4 14:21:33 2016 VERIFY OK: depth=0, OU=Domain Control Validated, CN=<em>.earthvpn.com<br>
Sat Jun  4 14:21:33 2016 Data Channel Encrypt: Cipher ‘AES-256-CBC’ initialized with 256 bit key<br>
Sat Jun  4 14:21:33 2016 Data Channel Encrypt: Using 160 bit message hash ‘SHA1’ for HMAC authentication<br>
Sat Jun  4 14:21:33 2016 Data Channel Decrypt: Cipher ‘AES-256-CBC’ initialized with 256 bit key<br>
Sat Jun  4 14:21:33 2016 Data Channel Decrypt: Using 160 bit message hash ‘SHA1’ for HMAC authentication<br>
Sat Jun  4 14:21:33 2016 Control Channel: TLSv1, cipher TLSv1/SSLv3 DHE-RSA-AES256-SHA, 2048 bit RSA<br>
Sat Jun  4 14:21:33 2016 [</em>.earthvpn.com] Peer Connection Initiated with [AF_INET]185.7.33.21:80<br>
Sat Jun  4 14:21:35 2016 SENT CONTROL [*.earthvpn.com]: ‘PUSH_REQUEST’ (status=1)<br>
Sat Jun  4 14:21:37 2016 PUSH: Received control message: 'PUSH_REPLY,ping 3,ping-restart 10,ifconfig 192.168.179.29 192.168.179.30,dhcp-option DOMAIN <a href="http://earthvpn.com" rel="nofollow noopener">earthvpn.com</a>,dhcp-option DNS 8.8.8.8,dhcp-option DNS 8.8.4.4,route-gateway 192.168.179.30,redirect-gateway def1’<br>
Sat Jun  4 14:21:37 2016 OPTIONS IMPORT: timers and/or timeouts modified<br>
Sat Jun  4 14:21:37 2016 OPTIONS IMPORT: --ifconfig/up options modified<br>
Sat Jun  4 14:21:37 2016 OPTIONS IMPORT: route options modified<br>
Sat Jun  4 14:21:37 2016 OPTIONS IMPORT: route-related options modified<br>
Sat Jun  4 14:21:37 2016 OPTIONS IMPORT: --ip-win32 and/or --dhcp-option options modified<br>
Sat Jun  4 14:21:37 2016 ROUTE_GATEWAY 10.0.2.2/255.255.255.0 IFACE=eth0 HWADDR=08:00:27:b7:49:35<br>
Sat Jun  4 14:21:37 2016 TUN/TAP device tun0 opened<br>
Sat Jun  4 14:21:37 2016 Note: Cannot set tx queue length on tun0: Operation not permitted (errno=1)<br>
Sat Jun  4 14:21:37 2016 do_ifconfig, tt-&gt;ipv6=0, tt-&gt;did_ifconfig_ipv6_setup=0<br>
Sat Jun  4 14:21:37 2016 /sbin/ip link set dev tun0 up mtu 1500<br>
RTNETLINK answers: Operation not permitted<br>
Sat Jun  4 14:21:37 2016 Linux ip link set failed: external program exited with error status: 2<br>
Sat Jun  4 14:21:37 2016 Exiting due to fatal error</p>
<hr>
<p>In troubleshooting, the documentation said “Use ip_unpriv as documented above”.  But I don’t understand, it’s not clear for me. what should I do with this instruction</p>
<pre><code>ip_unpriv vs ip-unpriv[edit]
Note:
Whonix TUNNEL_FIREWALL uses ip_unpriv (underscore)
Standalone VPN-FIREWALL uses ip-unpriv (hyphen)
</code></pre>
<p>Do you have more instruction or détails?<br>
Thank you for your help.</p>
<p>details openvpn.conf</p>
<p>client<br>
dev tun0<br>
proto tcp<br>
remote 185.7.33.21 80<br>
resolv-retry infinite<br>
nobind<br>
persist-key<br>
persist-tun<br>
ca /etc/openvpn/earthvpn.crt<br>
auth-user-pass<br>
auth-nocache<br>
remote-cert-tls server<br>
reneg-sec 0<br>
verb 3<br>
auth SHA1<br>
cipher AES-256-CBC</p>
<hr>
<p>50_user.conf</p>
<p><code>###########################</code>## VPN-Firewall Settings ##<br>
`###########################</p>
<p><code>## Make sure Tor always connects through the VPN.</code>## Enable: 1<br>
<code>## Disable: 0</code>## DISABELD BY DEFAULT, because it requires a VPN provider.`<br>
VPN_FIREWALL=1</p>
<p><code>## For OpenVPN.</code>#VPN_INTERFACE=tun0</p>
<p><code>## Destinations you don not want routed through the VPN.</code>## 10.0.2.2-10.0.2.24: VirtualBox DHCP<br>
<code># LOCAL_NET="\</code>#         127.0.0.0-127.0.0.24 <br>
<code># 192.168.0.0-192.168.0.24 \</code>#         192.168.1.0-192.168.1.24 <br>
<code># 10.152.152.0-10.152.152.24 \</code>#         10.0.2.2-10.0.2.24 <br>
`#      "</p>
<hr>
<p>/etc/sudoers.d/tunnel_unpriv</p>
<p><code>## This file is part of Whonix.</code>## Copyright © 2012 - 2014 Patrick Schleizer <a href="mailto:adrelanos@riseup.net">adrelanos@riseup.net</a><br>
`## See the file COPYING for copying conditions.</p>
<p>tunnel ALL=(ALL) NOPASSWD: /bin/ip<br>
tunnel ALL=(ALL) NOPASSWD: /usr/sbin/openvpn *<br>
Defaults:tunnel !requiretty<br>
~<br>
~<br>
~</p>
          <p><a href="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544/1</link>
        <pubDate>Sat, 04 Jun 2016 14:26:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2544-1</guid>
        <source url="http://forums.whonix.org/t/openvpn-issue-linux-ip-link-set-failed-external-program-exited-with-error-status-2/2544.rss">OpenVpn issue Linux ip link set failed: external program exited with error status: 2</source>
      </item>
  </channel>
</rss>
