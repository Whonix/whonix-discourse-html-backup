<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Running live host via Grub-live</title>
    <link>http://forums.whonix.org/t/running-live-host-via-grub-live/8912</link>
    <description>In the Whonix wiki there is a topic entitled &#39;Boot your existing, installed Debian Host into Live Mode with GRUB LIVE&#39;. That would be a good state of affairs. You run your Whonix, but no trace of it, not even in the host, would be detectable. Problem is that running my host (Buster) live, prevents running Whonix. Start of Gateway dies with the message that there is no disk space available. When I check via Nautilus I see in effect I have only 4 Gb left. So installing the Gateway.qcow2 file does not succeed (as logged in syslog by module OM). I do have a relatively small system, a 120 Gb sdd and 8 Gb ram. I guess the 4 Gb is the Gb that are left free in ram, right?
If so, what is the point in running the host live, as it is my intention to start Whonix? Or how much ram would I need to do so: live host + Whonix (live or not live, if that even matters...)?</description>
    <language>en</language>
    <lastBuildDate>Sat, 22 May 2021 15:10:13 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/running-live-host-via-grub-live/8912.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Running live host via Grub-live</title>
        <dc:creator><![CDATA[devzero]]></dc:creator>
        <description><![CDATA[
            <p>Aside from Whonix’s particular use case I must add that the idea of a hypervisor in a live USB/SD card is very attractive to security-minded sysadmins: it provides better isolation than containers and, by using <strong>KVM’s shared filesystems</strong> backed by <strong>live-boot persistence media</strong> in chosen dirs, one can achieve something similar to Alpine Linux’s <strong>Data Disk Mode</strong> but having access to the entire Debian ecosystem. Also, if the guest fits in RAM then any OS can take advantage of it. Maybe Kicksecure could get an edge from this…</p>
<p>(Rack-mounted servers usually have internal USB and SD card slots. Due to their lack of redundancy and their short write lifespans, installing bootable hypervisors and using them in RW mode has led to disaster in some minor cloud providers. Persistence should be set up on the RAID array in this particular use-case)</p>
          <p><a href="http://forums.whonix.org/t/running-live-host-via-grub-live/8912/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/running-live-host-via-grub-live/8912/10</link>
        <pubDate>Sat, 22 May 2021 14:29:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8912-10</guid>
        <source url="http://forums.whonix.org/t/running-live-host-via-grub-live/8912.rss">Running live host via Grub-live</source>
      </item>
      <item>
        <title>Running live host via Grub-live</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>There’s more.</p>
<p>And instead of re-inventing this, look at package <code>whonix-libvirt</code>. Look at each individual file. Don’t be daunted. Deduce what it’s doing from the file name and/or contents of the file. Those related  to live mode will say so.</p>
<aside class="onebox githubfolder">
  <header class="source">
      <img src="https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="16" height="16">

      <a href="https://github.com/Whonix/whonix-libvirt" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <img src="https://opengraph.githubassets.com/1169b56c6b14f4d6ffc3214a4c4f1cece3b75219c7e2d23cfe810301e47baace/Whonix/whonix-libvirt" class="thumbnail onebox-full-image" width="60" height="60">

<h3><a href="https://github.com/Whonix/whonix-libvirt" target="_blank" rel="noopener">Whonix/whonix-libvirt</a></h3>


  <p><span class="label1">Whonix Libvirt XML Files for KVM - https://www.whonix.org/wiki/KVM</span></p>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p><code>whonix-libvirt</code> is planned to be part of <a href="https://www.whonix.org/wiki/Whonix-Host" class="inline-onebox">Whonix-Host Operating System Live ISO, Whonix-Host Installer</a> which isn’t done at time of writing. <code>whonix-libvirt</code> would show a warning about not yet finished Whonix-Host which wouldn’t apply.</p>
<p>It might be possible to use <code>whonix-libvirt</code> with <a href="https://www.whonix.org/wiki/Whonix_Packages_for_Debian_Hosts" class="inline-onebox">Whonix ™ Packages for Debian Hosts and Whonix ™ Host Enhancements</a>. But I don’t maintain <a href="https://www.whonix.org/wiki/KVM" class="inline-onebox">Whonix ™ for KVM</a>.</p>
<p>This is a Whonix KVM specific issue.</p>
<p>Consider <a href="https://www.whonix.org/wiki/Host_Live_Mode" class="inline-onebox">Host Live Mode: Boot existing Host Operating System into Live Mode</a> unsupported for <a href="https://www.whonix.org/wiki/KVM" class="inline-onebox">Whonix ™ for KVM</a> until/if supported by Whonix KVM maintainer through documentation or package.</p>
<p>See: <a href="https://www.whonix.org/wiki/Unsupported" class="inline-onebox">Undocumented, Untested or Unsupported Features</a></p>
<p>//cc <a class="mention" href="http://forums.whonix.org/u/hulahoop">@HulaHoop</a></p>
          <p><a href="http://forums.whonix.org/t/running-live-host-via-grub-live/8912/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/running-live-host-via-grub-live/8912/9</link>
        <pubDate>Sat, 22 May 2021 11:53:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8912-9</guid>
        <source url="http://forums.whonix.org/t/running-live-host-via-grub-live/8912.rss">Running live host via Grub-live</source>
      </item>
      <item>
        <title>Running live host via Grub-live</title>
        <dc:creator><![CDATA[devzero]]></dc:creator>
        <description><![CDATA[
            <p>Thanks <a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> !</p>
<p>That’s a brilliant approach: OverlayFS doesn’t have Copy-On-Write issues when it just doesn’t need to write!</p>
<p>The <code>chmod -w</code> didn’t work on its own, though. As mentioned in your references, I had to edit the libvirt XML settings as well.</p>
<p>To all those who come after me, here’s my humble contribution:</p>
<hr>
<h2>
<a name="quick-and-dirty-solution-see-answer-below-1" class="anchor" href="http://forums.whonix.org#quick-and-dirty-solution-see-answer-below-1"></a>Quick and dirty solution (see answer below)</h2>
<p>In <em><strong>normal boot</strong></em> mode run the following:</p>
<pre><code class="lang-auto">sudo virt-xml Whonix-Gateway --edit --disk readonly=on
sudo virt-xml Whonix-Workstation --edit --disk readonly=on

sudo chmod --verbose --recursive ugo-w "/var/lib/libvirt/images/Whonix-Gateway.qcow2"
sudo chmod --verbose --recursive ugo-w "/var/lib/libvirt/images/Whonix-Workstation.qcow2"
</code></pre>
<p>Then, make sure to run both <em><strong>host</strong></em> <strong>and</strong> <em><strong>guests</strong></em> in <em><strong>live boot</strong></em> mode.</p>
          <p><a href="http://forums.whonix.org/t/running-live-host-via-grub-live/8912/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/running-live-host-via-grub-live/8912/8</link>
        <pubDate>Sat, 22 May 2021 10:41:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8912-8</guid>
        <source url="http://forums.whonix.org/t/running-live-host-via-grub-live/8912.rss">Running live host via Grub-live</source>
      </item>
      <item>
        <title>Running live host via Grub-live</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Maybe this would help.</p>
<pre><code> chmod --verbose --recursive ugo-w "/var/lib/libvirt/images/Whonix-Gateway.qcow2"
</code></pre>
<p>And.</p>
<pre><code> chmod --verbose --recursive ugo-w "/var/lib/libvirt/images/Whonix-Workstation.qcow2"
</code></pre>
<p>References:</p>
<ul>
<li><a href="https://phabricator.whonix.org/T914" class="inline-onebox">⚓ T914 Whonix Host Live - enable KVM readonly mode - virt-xml vm-name --edit --disk readonly=on</a></li>
<li><a href="https://forums.whonix.org/t/whonix-host-operating-system/3931/180" class="inline-onebox">Whonix host operating system - #180 by Patrick</a></li>
</ul>
          <p><a href="http://forums.whonix.org/t/running-live-host-via-grub-live/8912/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/running-live-host-via-grub-live/8912/7</link>
        <pubDate>Sat, 22 May 2021 06:47:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8912-7</guid>
        <source url="http://forums.whonix.org/t/running-live-host-via-grub-live/8912.rss">Running live host via Grub-live</source>
      </item>
      <item>
        <title>Running live host via Grub-live</title>
        <dc:creator><![CDATA[devzero]]></dc:creator>
        <description><![CDATA[
            <p>I’ve got the same problem. Also using a Kicksecure host.</p>
<p>I even increased the RAM overlay partition capacity by setting it to overlay-size=36g on a machine with 48GiB and still got the same error.</p>
<p>One of the things I noticed is that, after lanunching the VM, the entire overlay partition usage (<code>df -h</code>) starts growing until it gets completely full.</p>
<p>I believe the actual problem is that the live copy-on-write mechanism doesn’t respect sparse files and ends up filling the entire RAM partition by trying to fit the whole qcow2’s +100GiB in it.</p>
          <p><a href="http://forums.whonix.org/t/running-live-host-via-grub-live/8912/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/running-live-host-via-grub-live/8912/6</link>
        <pubDate>Fri, 21 May 2021 14:57:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8912-6</guid>
        <source url="http://forums.whonix.org/t/running-live-host-via-grub-live/8912.rss">Running live host via Grub-live</source>
      </item>
      <item>
        <title>Running live host via Grub-live</title>
        <dc:creator><![CDATA[onion_knight]]></dc:creator>
        <description><![CDATA[
            <p>Ok.<br>
I can go up to 16GB.</p>
          <p><a href="http://forums.whonix.org/t/running-live-host-via-grub-live/8912/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/running-live-host-via-grub-live/8912/5</link>
        <pubDate>Tue, 17 Mar 2020 12:14:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8912-5</guid>
        <source url="http://forums.whonix.org/t/running-live-host-via-grub-live/8912.rss">Running live host via Grub-live</source>
      </item>
      <item>
        <title>Running live host via Grub-live</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Could you test this please? <a class="mention" href="http://forums.whonix.org/u/onion_knight">@onion_knight</a><br>
After installing <a href="https://forums.whonix.org/t/whonix-host-operating-system/3931/189" class="inline-onebox">Whonix host operating system</a> and <code>grub-live</code> package.</p>
<p>If not a too personal privacy intrusive a question, how much host RAM can you test this with? 4 GB, 8 GB, 16 GB, 32 GB? Does booting into live mode work and are VMs still startable? Multiple VMs?</p>
<p>Is there a difference Whonix-Host ISO Live vs Whonix-Host installed Live?</p>
          <p><a href="http://forums.whonix.org/t/running-live-host-via-grub-live/8912/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/running-live-host-via-grub-live/8912/4</link>
        <pubDate>Tue, 17 Mar 2020 12:10:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8912-4</guid>
        <source url="http://forums.whonix.org/t/running-live-host-via-grub-live/8912.rss">Running live host via Grub-live</source>
      </item>
      <item>
        <title>Running live host via Grub-live</title>
        <dc:creator><![CDATA[rk1]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a>: just for my understanding, if you run a live host and you go with Nautilus to any place and click for properties and you see how much free space is on your disk, what does it say? 32 - (approx)4 = 28 Gb?</p>
          <p><a href="http://forums.whonix.org/t/running-live-host-via-grub-live/8912/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/running-live-host-via-grub-live/8912/3</link>
        <pubDate>Sat, 08 Feb 2020 20:13:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8912-3</guid>
        <source url="http://forums.whonix.org/t/running-live-host-via-grub-live/8912.rss">Running live host via Grub-live</source>
      </item>
      <item>
        <title>Running live host via Grub-live</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>I only tested it with a Debian buster host, a Kicksecure host, Whonix VirtualBox and 32 GB RAM.</p>
<p>Might not be possible to run with 8 GB RAM indeed.</p>
<p>Reference:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Grub-live" target="_blank" title="01:55PM - 21 January 2020">whonix.org – 21 Jan 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:101/67;"><img src="https://www.whonix.org/w/images/a/a6/Grublive123123.jpg" class="thumbnail" width="101" height="67"></div>

<h3><a href="https://www.whonix.org/wiki/Grub-live" target="_blank">Boot your existing, installed Debian Host into Live Mode with GRUB LIVE - Whonix</a></h3>

<p>Add a Live Mode entry to the grub boot menu on your existing Debian host platform. Stop Persistent Malware. Read-only mode. Make all writes go to non-persistent storage (RAM) instead of the hard disk.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/running-live-host-via-grub-live/8912/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/running-live-host-via-grub-live/8912/2</link>
        <pubDate>Sat, 08 Feb 2020 18:17:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8912-2</guid>
        <source url="http://forums.whonix.org/t/running-live-host-via-grub-live/8912.rss">Running live host via Grub-live</source>
      </item>
      <item>
        <title>Running live host via Grub-live</title>
        <dc:creator><![CDATA[rk1]]></dc:creator>
        <description><![CDATA[
            <p>In the Whonix wiki there is a topic entitled ‘Boot your existing, installed Debian Host into Live Mode with GRUB LIVE’. That would be a good state of affairs. You run your Whonix, but no trace of it, not even in the host, would be detectable. Problem is that running my host (Buster) live, prevents running Whonix. Start of Gateway dies with the message that there is no disk space available. When I check via Nautilus I see in effect I have only 4 Gb left. So installing the Gateway.qcow2 file does not succeed (as logged in syslog by module OM). I do have a relatively small system, a 120 Gb sdd and 8 Gb ram. I guess the 4 Gb is the Gb that are left free in ram, right?<br>
If so, what is the point in running the host live, as it is my intention to start Whonix? Or how much ram would I need to do so: live host + Whonix (live or not live, if that even matters…)?</p>
          <p><a href="http://forums.whonix.org/t/running-live-host-via-grub-live/8912/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/running-live-host-via-grub-live/8912/1</link>
        <pubDate>Sat, 08 Feb 2020 15:15:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8912-1</guid>
        <source url="http://forums.whonix.org/t/running-live-host-via-grub-live/8912.rss">Running live host via Grub-live</source>
      </item>
  </channel>
</rss>
