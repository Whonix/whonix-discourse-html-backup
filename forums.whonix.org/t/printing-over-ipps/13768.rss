<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Printing over IPPS</title>
    <link>http://forums.whonix.org/t/printing-over-ipps/13768</link>
    <description>[The Printing page on the wiki says](http://www.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/Printing_and_Scanning#Warnings):

&gt; Pairing Whonix ™ with network printers is strongly discouraged. This is because most (if not all) network printing relies upon insecure, unencrypted protocols. This means the documents being printed will likely be visible to attackers who are able to sniff the local network, or who control the (normally untrusted) Qubes NetVM. This is a limitation of modern printers and printing protocols and not something that can be solved by Qubes or any other OS.

AFAICT this is not accurate anymore.  Modern printers support IPPS (IPP over TLS); I successfully tested both printing and faxing over IPPS with an HP printer that I picked at random from a store near me.  TLS certificate validation seems to be weak by default, but there are settings (which I haven&#39;t tested yet) that claim to enable strict TLS certificate validation for IPPS.  IPPS unfortunately is not advertised or documented by printer vendors (at least HP), so it took a lot of trial-and-error to figure out how to enable it, but AFAICT the instructions I came up with are not vendor-specific, so they should work with any modern printer.

Given this, would Kicksecure/Whonix be interested in the following?

1. Wiki updates that make it clear that IPPS is a thing, and explain how to use it.
2. Package updates that enforce IPPS, i.e. causing CUPS to error if the user tries to print using an unencrypted protocol such as IPP over TCP or JetDirect, and enforce strict TLS certificate validation for IPPS.  Note that strict TLS certificate validation requires the user to generate a TLS cert/keypair and upload them to the printer (preferably over a USB connection so that the upload can&#39;t be wiretapped) before printing/faxing will be accepted over IPPS; this shouldn&#39;t be difficult but it does mean that a nonzero amount of setup is needed.  Also note that faxing over IPPS requires specifying the recipient phone number via the command-line (I can&#39;t find a working GUI for this), so the UX is slightly worse than unencrypted faxing (printing works fine via GUI).

(Looks like the Qubes documentation is also wrong in the same way, but I&#39;m not comfortable submitting documentation changes to Qubes because I&#39;ve only tested this on a non-Qubes system -- testing on Qubes is inconvenient because Qubes doesn&#39;t run on ppc64le, which is my main machine now.)</description>
    <language>en</language>
    <lastBuildDate>Sun, 12 Jun 2022 13:57:48 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/printing-over-ipps/13768.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Printing over IPPS</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="JeremyRand" data-post="1" data-topic="13768">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/j/f475e1/40.png" class="avatar"> JeremyRand:</div>
<blockquote>
<p>Given this, would Kicksecure/Whonix be interested in the following?</p>
</blockquote>
</aside>
<p>Yes, that would be nice. Welcome to add.</p>
<ul>
<li><a href="https://www.whonix.org/wiki/Printing_and_Scanning" class="inline-onebox">Printing and Scanning - Whonix</a></li>
<li><a href="https://www.kicksecure.com/wiki/Printing_and_Scanning" class="inline-onebox">Printing and Scanning - Kicksecure</a></li>
</ul>
<p>Seems to fit better into Kicksecure wiki (general security, privacy of connection content). Whonix could link to it.</p>
          <p><a href="http://forums.whonix.org/t/printing-over-ipps/13768/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/printing-over-ipps/13768/2</link>
        <pubDate>Sun, 12 Jun 2022 13:57:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13768-2</guid>
        <source url="http://forums.whonix.org/t/printing-over-ipps/13768.rss">Printing over IPPS</source>
      </item>
      <item>
        <title>Printing over IPPS</title>
        <dc:creator><![CDATA[JeremyRand]]></dc:creator>
        <description><![CDATA[
            <p><a href="http://www.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/Printing_and_Scanning#Warnings" rel="noopener nofollow ugc">The Printing page on the wiki says</a>:</p>
<blockquote>
<p>Pairing Whonix ™ with network printers is strongly discouraged. This is because most (if not all) network printing relies upon insecure, unencrypted protocols. This means the documents being printed will likely be visible to attackers who are able to sniff the local network, or who control the (normally untrusted) Qubes NetVM. This is a limitation of modern printers and printing protocols and not something that can be solved by Qubes or any other OS.</p>
</blockquote>
<p>AFAICT this is not accurate anymore.  Modern printers support IPPS (IPP over TLS); I successfully tested both printing and faxing over IPPS with an HP printer that I picked at random from a store near me.  TLS certificate validation seems to be weak by default, but there are settings (which I haven’t tested yet) that claim to enable strict TLS certificate validation for IPPS.  IPPS unfortunately is not advertised or documented by printer vendors (at least HP), so it took a lot of trial-and-error to figure out how to enable it, but AFAICT the instructions I came up with are not vendor-specific, so they should work with any modern printer.</p>
<p>Given this, would Kicksecure/Whonix be interested in the following?</p>
<ol>
<li>Wiki updates that make it clear that IPPS is a thing, and explain how to use it.</li>
<li>Package updates that enforce IPPS, i.e. causing CUPS to error if the user tries to print using an unencrypted protocol such as IPP over TCP or JetDirect, and enforce strict TLS certificate validation for IPPS.  Note that strict TLS certificate validation requires the user to generate a TLS cert/keypair and upload them to the printer (preferably over a USB connection so that the upload can’t be wiretapped) before printing/faxing will be accepted over IPPS; this shouldn’t be difficult but it does mean that a nonzero amount of setup is needed.  Also note that faxing over IPPS requires specifying the recipient phone number via the command-line (I can’t find a working GUI for this), so the UX is slightly worse than unencrypted faxing (printing works fine via GUI).</li>
</ol>
<p>(Looks like the Qubes documentation is also wrong in the same way, but I’m not comfortable submitting documentation changes to Qubes because I’ve only tested this on a non-Qubes system – testing on Qubes is inconvenient because Qubes doesn’t run on ppc64le, which is my main machine now.)</p>
          <p><a href="http://forums.whonix.org/t/printing-over-ipps/13768/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/printing-over-ipps/13768/1</link>
        <pubDate>Sun, 12 Jun 2022 05:50:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-13768-1</guid>
        <source url="http://forums.whonix.org/t/printing-over-ipps/13768.rss">Printing over IPPS</source>
      </item>
  </channel>
</rss>
