<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[Q3.2] Concurrent VM Startup can leave Whonix-Gateway with No Connectivity</title>
    <link>http://forums.whonix.org/t/q3-2-concurrent-vm-startup-can-leave-whonix-gateway-with-no-connectivity/4560</link>
    <description>This is a known issue. Fixed in 4.0. https://github.com/QubesOS/qubes-issues/issues/2533. Probably wontfix for 3.2.

If sys-whonix is set as default_netVM and it has an upstream firewall / proxyVM, then both VMs will automatically start concurrently when Qubes boots. This doesn&#39;t allow time for `qubes-firewall-user-script` to detect network change and allow forwarding rules for sys-whonix. sys-whonix will have no connectivity unless another VM connects or disconnects to proxyVM.

Workaround:

1. (not recommended) set default_netVM to another netVM. May result in clearnet leaks due to user error.
2. induce change in proxyVM network by setting sys-whonix netVM to something else and back or by connecting / disconnecting other VMs to proxyVM
3. manually execute `qubes-firewall-user-script` in proxyVM
4. reboot sys-whonix</description>
    <language>en</language>
    <lastBuildDate>Mon, 27 Nov 2017 01:39:19 +0000</lastBuildDate>
    <category>Qubes-Whonix</category>
    <atom:link href="http://forums.whonix.org/t/q3-2-concurrent-vm-startup-can-leave-whonix-gateway-with-no-connectivity/4560.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[Q3.2] Concurrent VM Startup can leave Whonix-Gateway with No Connectivity</title>
        <dc:creator><![CDATA[entr0py]]></dc:creator>
        <description><![CDATA[
            <p>This is a known issue. Fixed in 4.0. <a href="https://github.com/QubesOS/qubes-issues/issues/2533">https://github.com/QubesOS/qubes-issues/issues/2533</a>. Probably wontfix for 3.2.</p>
<p>If sys-whonix is set as default_netVM and it has an upstream firewall / proxyVM, then both VMs will automatically start concurrently when Qubes boots. This doesnâ€™t allow time for <code>qubes-firewall-user-script</code> to detect network change and allow forwarding rules for sys-whonix. sys-whonix will have no connectivity unless another VM connects or disconnects to proxyVM.</p>
<p>Workaround:</p>
<ol>
<li>(not recommended) set default_netVM to another netVM. May result in clearnet leaks due to user error.</li>
<li>induce change in proxyVM network by setting sys-whonix netVM to something else and back or by connecting / disconnecting other VMs to proxyVM</li>
<li>manually execute <code>qubes-firewall-user-script</code> in proxyVM</li>
<li>reboot sys-whonix</li>
</ol>
          <p><a href="http://forums.whonix.org/t/q3-2-concurrent-vm-startup-can-leave-whonix-gateway-with-no-connectivity/4560/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/q3-2-concurrent-vm-startup-can-leave-whonix-gateway-with-no-connectivity/4560/1</link>
        <pubDate>Mon, 27 Nov 2017 01:39:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4560-1</guid>
        <source url="http://forums.whonix.org/t/q3-2-concurrent-vm-startup-can-leave-whonix-gateway-with-no-connectivity/4560.rss">[Q3.2] Concurrent VM Startup can leave Whonix-Gateway with No Connectivity</source>
      </item>
  </channel>
</rss>
