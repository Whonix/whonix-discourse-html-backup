<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Workstation-Firewall setup - #7 by Hiberts - Support - Whonix Forum</title>
    <meta name="description" content="Hi, I tested Whonix Workstation FIrewall but i found nothig it&amp;#39;s changed . I write this in /etc/whonix_firewall.d/50_user : VPN_FIREWALL=1 VPN_SERVERS=&amp;quot;&amp;quot; 

The notation it&amp;#39;s to memory, but I copied the configuration from&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../1540.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Workstation-Firewall setup&#39;" href="../1540.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/workstation-firewall-setup/1540/7" />
<meta name="twitter:url" content="https://forums.whonix.org/t/workstation-firewall-setup/1540/7" />
<meta property="og:title" content="Workstation-Firewall setup" />
<meta name="twitter:title" content="Workstation-Firewall setup" />
<meta property="og:description" content="Maybe I didn’t explain very well .  For updates on the host I have this configuration : VPN-Firewall + VPN account of course .  The problem is that, only if I run Tor on the host, or maybe another proxy system I can do upgrades, other connections doesn’t run when I use your VPN-Firewall . .  If I try to connect on the net with this method ( user -&gt; VPN -&gt; destination ) but the connection doesn’t run .  I tried updates with apt-get, to update with Synaptics, surf with Iceweaseal etc, all this wit..." />
<meta name="twitter:description" content="Maybe I didn’t explain very well .  For updates on the host I have this configuration : VPN-Firewall + VPN account of course .  The problem is that, only if I run Tor on the host, or maybe another proxy system I can do upgrades, other connections doesn’t run when I use your VPN-Firewall . .  If I try to connect on the net with this method ( user -&gt; VPN -&gt; destination ) but the connection doesn’t run .  I tried updates with apt-get, to update with Synaptics, surf with Iceweaseal etc, all this wit..." />
<meta property="article:published_time" content="2016-01-19T11:16:56+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../1540.html">Workstation-Firewall setup</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/support/5.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #8C6238'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Support</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Hiberts'><span itemprop='name'>Hiberts</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1540.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-10-26T11:56:02Z' class='post-time'>
                October 26, 2015, 11:56am
              </time>
              <meta itemprop='dateModified' content='2016-02-09T13:31:58Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi,<br>
I tested Whonix Workstation FIrewall but i found nothig it’s changed .<br>
I write this in /etc/whonix_firewall.d/50_user :<br>
VPN_FIREWALL=1<br>
VPN_SERVERS=""</p>
<p>The notation it’s to memory, but I copied the configuration from the website and the file /etc/whonix_firewall.d/30_default .<br>
Then I reloaded the firewall ( sudo whonix_firewall reload ) but the fail closed mechanism doesn’t run .<br>
I launched the vpn from openvpn, the vpn runs correctly but fail closed mechanism not, the browser was configurated like told from the documentation .<br>
In the documentation i didn’t find a clear explanation, I think it’s incomplete, at least for noob like me <img src="../../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"> .</p>
        </div>

        <meta itemprop='headline' content='Workstation-Firewall setup'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1540.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-10-26T12:33:11Z' class='post-time'>
                October 26, 2015, 12:33pm
              </time>
              <meta itemprop='dateModified' content='2015-10-26T12:33:11Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>How to add the VPN in Whonix-Gateway<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://www.whonix.org/wiki/Using_Tunnels_with_Whonix#How_to_add_the_VPN_in_Whonix-Gateway" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/452;"><img src="../../../../external.html?link=https://www.whonix.org/w/images/8/86/Beyond-1087922640.jpg" class="thumbnail"></div>

<h3><a href="../../../../external.html?link=https://www.whonix.org/wiki/Using_Tunnels_with_Whonix#How_to_add_the_VPN_in_Whonix-Gateway" target="_blank" rel="nofollow noopener">Tunnels/Introduction</a></h3>

<p>Instructions on how to combine tunnels (VPN, SSH, proxy) with Tor. (User -&gt; Tor -&gt; proxy/VPN/SSH -&gt; Internet) (User -&gt; proxy/VPN/SSH -&gt;...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>Explains it all. Change the settings. Reload Whonix firewall. Setup OpenVPN. Make sure Tor is enabled. Done.</p>
<blockquote>fail closed mechanism doesn't run</blockquote>
That's not a very good problem description. See my signature.
Actual Result
Expected Result
...
        </div>

        <meta itemprop='headline' content='Workstation-Firewall setup'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Hiberts'><span itemprop='name'>Hiberts</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1540.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-10-31T16:04:31Z' class='post-time'>
                October 31, 2015,  4:04pm
              </time>
              <meta itemprop='dateModified' content='2015-10-31T16:04:31Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Sorry, you are confused with whonix gateway .<br>
The chain : device—&gt;vpn—&gt;tor it’s perfect with whonix, also for fail closed mechanism .<br>
I meant the chain : tor—&gt;vpn .<br>
You wrote this :<br>
One of the benefits of Whonix is that when a VPN connection breaks down, you still have the protections provided by Tor. In such an event where the VPN connection breaks down, Whonix-Workstation will seamlessly continue to make “direct” connections through Tor. If you are using the VPN only to circumvent the censorship of Tor, you may not care so much. On the other hand, if you believe a VPN improves your security, you should make sure that when the VPN connection breaks down, all connections with the outside world and your computer cease.</p>
<p>If you want to enforce, that the VPN always gets used:</p>
<pre><code>Whonix-Gateway: Already includes a fail closed (firewall settings VPN_FIREWALL setting) mechanism.
Other operating systems: see: https://github.com/adrelanos/VPN-Firewall
</code></pre>
<hr>
<p>So, I saw that in Whonix Workstation just there’s a vpn fail closed mechanism, or at least a part of this, i didn’t control it .<br>
I enabled it but it doesn’t run, i did what I wrote in the first message .</p>
        </div>

        <meta itemprop='headline' content='Workstation-Firewall setup'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1540.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2015-11-02T15:27:03Z' class='post-time'>
                November 2, 2015,  3:27pm
              </time>
              <meta itemprop='dateModified' content='2015-11-02T15:27:03Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Sorry.<br>
Whonix-Workstation’s Firewall does not yet have a VPN-Firewall feature. Ticket:<br>
<a href="../../../../external.html?link=https://phabricator.whonix.org/T142" class="onebox" target="_blank">https://phabricator.whonix.org/T142</a></p>
<p>Whonix-Workstation /etc/whonix_firewall.d/30_default (<a href="../../../../external.html?link=https://github.com/Whonix/whonix-ws-firewall/blob/master/etc/whonix_firewall.d/30_default">https://github.com/Whonix/whonix-ws-firewall/blob/master/etc/whonix_firewall.d/30_default</a>) has no such setting.</p>
<p>You can try <a href="../../../../external.html?link=https://github.com/adrelanos/VPN-Firewall">https://github.com/adrelanos/VPN-Firewall</a>.</p>
        </div>

        <meta itemprop='headline' content='Workstation-Firewall setup'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Hiberts'><span itemprop='name'>Hiberts</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1540.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-01-16T19:33:11Z' class='post-time'>
                January 16, 2016,  7:33pm
              </time>
              <meta itemprop='dateModified' content='2016-01-16T19:33:11Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I tried to use the Workstation Firewall and it runs very well .<br>
I did thus :</p>
<ol>
<li>stop networking with : sudo service networking stop . .</li>
<li>sudo whonix_firewall reload .</li>
<li>sudo service networking start . .</li>
<li>sudo openvpn --config  ( first edit the file with the correct interface )</li>
</ol>
<p>Of course, before I did this :</p>
<ol>
<li>Go to /usr/bin/whonix_firewall and at this point modify like below :</li>
</ol>
<h2>Not in use/defined yet.</h2>
<h2>INT_IF could be the internal network.</h2>
<h2>EXT_IF could be an additional virtual network adapter,</h2>
<h2>such as OnionCat or OpenVPN.</h2>
<h2>External interface</h2>
<p>[ -n “$EXT_IF” ] || EXT_IF=“eth0” # ( here I wrote tun1 )</p>
<h2>Internal interface</h2>
<p>[ -n “$INT_IF” ] || INT_IF=“eth1” # ( here I wrote eth0 )<br>
[ -n “$GATEWAY_IP” ] || GATEWAY_IP=“10.152.152.10”</p>
<p>The tun1 is the interface of my vpn, so the external interface .<br>
The eth0 is foundamental interface, so the internal interface .</p>
<p>Is it correct ?<br>
Of course, like you told, the fail closed mechanism doesn’t run, but it’s doesn’t matter because I have a good vpn and of course it’s an addition layer of security, not foudamental in the major part of things .</p>
<p>I have another question, if I would use the VPN-FIrewall on the host and I need to surf on the clear net unless Tor, how can I do it ? The normal Browser ( Iceweaseal ) doesn’t connect, only Virtualbox can .<br>
I don’t know iptables very well, so I can’t modify your configuratation to prevent damages, how can I do ? Maybe I can test .<br>
In conclusion, to update my host I always need to launch VPN and Tor in the host, so Tor connection wil pass through the VPN . But sometimes I need to surf unless Tor in the host …<br>
How can I do ?</p>
        </div>

        <meta itemprop='headline' content='Workstation-Firewall setup'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1540.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-01-16T20:25:37Z' class='post-time'>
                January 16, 2016,  8:25pm
              </time>
              <meta itemprop='dateModified' content='2016-01-16T20:25:37Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Don’t edit /usr/bin/whonix_firewall directly as changes are lost on<br>
upgrades. For the variables you changed, there is no need to edit the<br>
file directly. Edit the configuration instead. Folder is<br>
<code>/etc/whonix_firewall.d</code>. See also:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://www.whonix.org/wiki/Whonix_Configuration_Files" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/426;"><img src="../../../../external.html?link=https://www.whonix.org/w/images/3/3b/Five-elements-379106640.jpg" class="thumbnail"></div>

<h3><a href="../../../../external.html?link=https://www.whonix.org/wiki/Whonix_Configuration_Files" target="_blank" rel="nofollow noopener">Whonix Configuration Files</a></h3>

<p>Everything you should know about Whonix's Configuration Files.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>I don’t know where you got /usr/bin/whonix_firewall editing directly<br>
from. Just stick to the documentation.</p>
<p>The new link by the way is this one:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="../../../../external.html?link=https://www.whonix.org/wiki/Tunnels/Connecting_to_a_VPN_before_Tor" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <img src="../../../../external.html?link=https://www.whonix.org/w/images/b/bb/City-427640640.jpg" class="thumbnail onebox-avatar" width="500" height="500">

<h3><a href="../../../../external.html?link=https://www.whonix.org/wiki/Tunnels/Connecting_to_a_VPN_before_Tor" target="_blank" rel="nofollow noopener">Tunnels/Connecting to a VPN before Tor</a></h3>

<p>Instructions on how to connect to a VPN before Tor (User -&gt; VPN -&gt; Tor -&gt; Internet)</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<blockquote>
<p>the fail closed mechanism doesn’t run, but it’s doesn’t matter because<br>
I have a good vpn</p>
</blockquote>
<p>That doesn’t follow. Fault of the VPN going down and continuing to<br>
connect in the clear is not only up to the VPN. Also the internet<br>
connection could go down due to natural causes. In another category of<br>
attacks would be to intentionally disrupt the VPN connection as part of<br>
an active ISP level attack.</p>
<blockquote>
<p>and of course it’s an addition layer of security, not foudamental in<br>
the major part of things</p>
</blockquote>
<p>If you don’t do it right, then there is no reason to bother at all.</p>
<blockquote>
<p>I have another question, if I would use the VPN-FIrewall on the host<br>
and I need to surf on the clear net unless Tor, how can I do it ? The<br>
normal Browser ( Iceweaseal ) doesn’t connect, only Virtualbox can .</p>
</blockquote>
<p>When VPN-Firewall and the VPN is running, all host traffic should go<br>
user -&gt; VPN -&gt; destination.</p>
<blockquote>
<p>I don’t know iptables very well, so I can’t modify your<br>
configuratation to prevent damages, how can I do ? Maybe I can test .</p>
</blockquote>
<p>Using VPN-Firewall and going user -&gt; VPN -&gt; destination and then at the<br>
same time making exceptions for user -&gt; destination is certainly<br>
possible if you know iptables, but unsupported. (<br>
<a href="../../../../external.html?link=https://www.whonix.org/wiki/FAQ#What_do_you_mean_by_unsupported.3F">https://www.whonix.org/wiki/FAQ#What_do_you_mean_by_unsupported.3F</a> )</p>
<blockquote>
<p>In conclusion, to update my host I always need to launch VPN and Tor<br>
in the host, so Tor connection wil pass through the VPN . But sometimes<br>
I need to surf unless Tor in the host …<br>
How can I do ?</p>
</blockquote>
<p>You don’t need to start Whonix / Tor for user -&gt; VPN -&gt; destination.</p>
<p>(Technical analogy: From VPN-Firewall / VPN perspective, “they don’t<br>
’know’ anything about Whonix”.)</p>
        </div>

        <meta itemprop='headline' content='Workstation-Firewall setup'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Hiberts'><span itemprop='name'>Hiberts</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1540.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-01-19T11:16:56Z' class='post-time'>
                January 19, 2016, 11:16am
              </time>
              <meta itemprop='dateModified' content='2016-01-19T11:16:56Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Maybe I didn’t explain very well .<br>
For updates on the host I have this configuration : VPN-Firewall + VPN account of course .<br>
The problem is that, only if I run Tor on the host, or maybe another proxy system I can do upgrades, other connections doesn’t run when I use your VPN-Firewall . .<br>
If I try to connect on the net with this method ( user -&gt; VPN -&gt; destination ) but the connection doesn’t run .<br>
I tried updates with apt-get, to update with Synaptics, surf with Iceweaseal etc, all this with your VPN-Firewall and all of these failed, this is the problem .<br>
Maybe unless your Firewall the connection wil run, but i need to use your VPN-FIrewall and I think I can’t try now …</p>
<h2>The second problem is this, I know the .d directory but I don’t know how to write my configuration, respectively :<br>
[ -n “$EXT_IF” ] || EXT_IF=“eth0” # ( here I wrote tun1 )<br>
Internal interface<br>
[ -n “$INT_IF” ] || INT_IF=“eth1” # ( here I wrote eth0 ) .</h2>
<p>So, I understood i should write this configuration on /etc/whonix.firewall.d/50_user but I don’t know the correct nomenclature, maybe is thus :<br>
EXT_IF=“tun1"<br>
INT_IF=“eth0"<br>
VPN_FIREWALL=1 ( I toke this command from VPN-Firewall on gateway and it’s the same of VPN-Firewall on the host )<br>
VPN_SERVERS=”” ( the same above speach )<br>
VPN_INTERFACE=tun1</p>
        </div>

        <meta itemprop='headline' content='Workstation-Firewall setup'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../installing-a-vpn-on-whonix-workstation-tor-vpn/1710/4.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../installing-a-vpn-on-whonix-workstation-tor-vpn/1710/4.html'>
                      <span itemprop='name'>Installing a VPN on Whonix Workstation (Tor -&gt; VPN)</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1540.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-01-19T16:25:16Z' class='post-time'>
                January 19, 2016,  4:25pm
              </time>
              <meta itemprop='dateModified' content='2016-01-19T16:25:16Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>VPN-Firewall (for hosts) has no configuration folder yet. There you<br>
really need to edit the script itself.</p>
<p>EXT_IF=“eth0” most likely. Setting it to tun1 seems totally wrong.</p>
        </div>

        <meta itemprop='headline' content='Workstation-Firewall setup'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Hiberts'><span itemprop='name'>Hiberts</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1540.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-01-26T15:05:12Z' class='post-time'>
                January 26, 2016,  3:05pm
              </time>
              <meta itemprop='dateModified' content='2016-01-26T15:10:42Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>###########################</p>
<h2>VARIABELS</h2>
<p>###########################</p>
<h2>Not in use/defined yet.</h2>
<h2>INT_IF could be the internal network.</h2>
<h2>EXT_IF could be an additional virtual network adapter,</h2>
<h2>such as OnionCat or OpenVPN.</h2>
<h2>External interface</h2>
<p>[ -n “$EXT_IF” ] || EXT_IF=“eth0”</p>
<h2>Internal interface</h2>
<p>[ -n “$INT_IF” ] || INT_IF=“eth1”</p>
<p>if [ -d “/usr/lib/qubes” ]; then</p>
<h2>Would fail if netvm is set to ‘none’.</h2>
<p>[ -n “$GATEWAY_IP” ] || GATEWAY_IP="$(qubesdb-read /qubes-gateway)"<br>
else<br>
[ -n “$GATEWAY_IP” ] || GATEWAY_IP=“10.152.152.10”</p>
<p>I red this and I supposed was correct, even if I don’t have the VPN in the EXT_IF i can insert eth0, because it will be the single interface to communicate with external resources, this is my meaning from what I red and what I though .</p>
<p>I did it like I wrote over and it runs correctly, the problem is that you advised me to write the changements of course on the dedicated file 50_user, but I don’t know the correct code to write for all my requests .</p>
<p>For the host problem I can’t resolve, I tried all but I didn’t understand why virtualbox can communicate with the VPN and other software not, all software a part Virtualbox .</p>
        </div>

        <meta itemprop='headline' content='Workstation-Firewall setup'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Hiberts'><span itemprop='name'>Hiberts</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1540.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-01-31T18:46:20Z' class='post-time'>
                January 31, 2016,  6:46pm
              </time>
              <meta itemprop='dateModified' content='2016-01-31T18:46:20Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Anyone can help me ?</p>
        </div>

        <meta itemprop='headline' content='Workstation-Firewall setup'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
