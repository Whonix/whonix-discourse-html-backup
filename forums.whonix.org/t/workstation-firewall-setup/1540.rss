<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Workstation-Firewall setup</title>
    <link>http://forums.whonix.org/t/workstation-firewall-setup/1540</link>
    <description>Hi,
I tested Whonix Workstation FIrewall but i found nothig it&#39;s changed .
I write this in /etc/whonix_firewall.d/50_user :
VPN_FIREWALL=1
VPN_SERVERS=&quot;&lt;VPN-IP&gt;&quot;

The notation it&#39;s to memory, but I copied the configuration from the website and the file /etc/whonix_firewall.d/30_default .
Then I reloaded the firewall ( sudo whonix_firewall reload ) but the fail closed mechanism doesn&#39;t run .
I launched the vpn from openvpn, the vpn runs correctly but fail closed mechanism not, the browser was configurated like told from the documentation .
In the documentation i didn&#39;t find a clear explanation, I think it&#39;s incomplete, at least for noob like me :D .</description>
    <language>en</language>
    <lastBuildDate>Sun, 31 Jan 2016 18:46:20 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/workstation-firewall-setup/1540.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Workstation-Firewall setup</title>
        <dc:creator><![CDATA[Hiberts]]></dc:creator>
        <description><![CDATA[
            <p>Anyone can help me ?</p>
          <p><a href="http://forums.whonix.org/t/workstation-firewall-setup/1540/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/workstation-firewall-setup/1540/10</link>
        <pubDate>Sun, 31 Jan 2016 18:46:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1540-10</guid>
        <source url="http://forums.whonix.org/t/workstation-firewall-setup/1540.rss">Workstation-Firewall setup</source>
      </item>
      <item>
        <title>Workstation-Firewall setup</title>
        <dc:creator><![CDATA[Hiberts]]></dc:creator>
        <description><![CDATA[
            <p>###########################</p>
<h2>VARIABELS</h2>
<p>###########################</p>
<h2>Not in use/defined yet.</h2>
<h2>INT_IF could be the internal network.</h2>
<h2>EXT_IF could be an additional virtual network adapter,</h2>
<h2>such as OnionCat or OpenVPN.</h2>
<h2>External interface</h2>
<p>[ -n “$EXT_IF” ] || EXT_IF=“eth0”</p>
<h2>Internal interface</h2>
<p>[ -n “$INT_IF” ] || INT_IF=“eth1”</p>
<p>if [ -d “/usr/lib/qubes” ]; then</p>
<h2>Would fail if netvm is set to ‘none’.</h2>
<p>[ -n “$GATEWAY_IP” ] || GATEWAY_IP="$(qubesdb-read /qubes-gateway)"<br>
else<br>
[ -n “$GATEWAY_IP” ] || GATEWAY_IP=“10.152.152.10”</p>
<p>I red this and I supposed was correct, even if I don’t have the VPN in the EXT_IF i can insert eth0, because it will be the single interface to communicate with external resources, this is my meaning from what I red and what I though .</p>
<p>I did it like I wrote over and it runs correctly, the problem is that you advised me to write the changements of course on the dedicated file 50_user, but I don’t know the correct code to write for all my requests .</p>
<p>For the host problem I can’t resolve, I tried all but I didn’t understand why virtualbox can communicate with the VPN and other software not, all software a part Virtualbox .</p>
          <p><a href="http://forums.whonix.org/t/workstation-firewall-setup/1540/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/workstation-firewall-setup/1540/9</link>
        <pubDate>Tue, 26 Jan 2016 15:05:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1540-9</guid>
        <source url="http://forums.whonix.org/t/workstation-firewall-setup/1540.rss">Workstation-Firewall setup</source>
      </item>
      <item>
        <title>Workstation-Firewall setup</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>VPN-Firewall (for hosts) has no configuration folder yet. There you<br>
really need to edit the script itself.</p>
<p>EXT_IF=“eth0” most likely. Setting it to tun1 seems totally wrong.</p>
          <p><a href="http://forums.whonix.org/t/workstation-firewall-setup/1540/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/workstation-firewall-setup/1540/8</link>
        <pubDate>Tue, 19 Jan 2016 16:25:16 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1540-8</guid>
        <source url="http://forums.whonix.org/t/workstation-firewall-setup/1540.rss">Workstation-Firewall setup</source>
      </item>
      <item>
        <title>Workstation-Firewall setup</title>
        <dc:creator><![CDATA[Hiberts]]></dc:creator>
        <description><![CDATA[
            <p>Maybe I didn’t explain very well .<br>
For updates on the host I have this configuration : VPN-Firewall + VPN account of course .<br>
The problem is that, only if I run Tor on the host, or maybe another proxy system I can do upgrades, other connections doesn’t run when I use your VPN-Firewall . .<br>
If I try to connect on the net with this method ( user -&gt; VPN -&gt; destination ) but the connection doesn’t run .<br>
I tried updates with apt-get, to update with Synaptics, surf with Iceweaseal etc, all this with your VPN-Firewall and all of these failed, this is the problem .<br>
Maybe unless your Firewall the connection wil run, but i need to use your VPN-FIrewall and I think I can’t try now …</p>
<h2>The second problem is this, I know the .d directory but I don’t know how to write my configuration, respectively :<br>
[ -n “$EXT_IF” ] || EXT_IF=“eth0” # ( here I wrote tun1 )<br>
Internal interface<br>
[ -n “$INT_IF” ] || INT_IF=“eth1” # ( here I wrote eth0 ) .</h2>
<p>So, I understood i should write this configuration on /etc/whonix.firewall.d/50_user but I don’t know the correct nomenclature, maybe is thus :<br>
EXT_IF=“tun1"<br>
INT_IF=“eth0"<br>
VPN_FIREWALL=1 ( I toke this command from VPN-Firewall on gateway and it’s the same of VPN-Firewall on the host )<br>
VPN_SERVERS=”” ( the same above speach )<br>
VPN_INTERFACE=tun1</p>
          <p><a href="http://forums.whonix.org/t/workstation-firewall-setup/1540/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/workstation-firewall-setup/1540/7</link>
        <pubDate>Tue, 19 Jan 2016 11:16:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1540-7</guid>
        <source url="http://forums.whonix.org/t/workstation-firewall-setup/1540.rss">Workstation-Firewall setup</source>
      </item>
      <item>
        <title>Workstation-Firewall setup</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Don’t edit /usr/bin/whonix_firewall directly as changes are lost on<br>
upgrades. For the variables you changed, there is no need to edit the<br>
file directly. Edit the configuration instead. Folder is<br>
<code>/etc/whonix_firewall.d</code>. See also:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Whonix_Configuration_Files" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/426;"><img src="https://www.whonix.org/w/images/3/3b/Five-elements-379106640.jpg" class="thumbnail"></div>

<h3><a href="https://www.whonix.org/wiki/Whonix_Configuration_Files" target="_blank" rel="nofollow noopener">Whonix Configuration Files</a></h3>

<p>Everything you should know about Whonix's Configuration Files.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>I don’t know where you got /usr/bin/whonix_firewall editing directly<br>
from. Just stick to the documentation.</p>
<p>The new link by the way is this one:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Tunnels/Connecting_to_a_VPN_before_Tor" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <img src="https://www.whonix.org/w/images/b/bb/City-427640640.jpg" class="thumbnail onebox-avatar" width="500" height="500">

<h3><a href="https://www.whonix.org/wiki/Tunnels/Connecting_to_a_VPN_before_Tor" target="_blank" rel="nofollow noopener">Tunnels/Connecting to a VPN before Tor</a></h3>

<p>Instructions on how to connect to a VPN before Tor (User -&gt; VPN -&gt; Tor -&gt; Internet)</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<blockquote>
<p>the fail closed mechanism doesn’t run, but it’s doesn’t matter because<br>
I have a good vpn</p>
</blockquote>
<p>That doesn’t follow. Fault of the VPN going down and continuing to<br>
connect in the clear is not only up to the VPN. Also the internet<br>
connection could go down due to natural causes. In another category of<br>
attacks would be to intentionally disrupt the VPN connection as part of<br>
an active ISP level attack.</p>
<blockquote>
<p>and of course it’s an addition layer of security, not foudamental in<br>
the major part of things</p>
</blockquote>
<p>If you don’t do it right, then there is no reason to bother at all.</p>
<blockquote>
<p>I have another question, if I would use the VPN-FIrewall on the host<br>
and I need to surf on the clear net unless Tor, how can I do it ? The<br>
normal Browser ( Iceweaseal ) doesn’t connect, only Virtualbox can .</p>
</blockquote>
<p>When VPN-Firewall and the VPN is running, all host traffic should go<br>
user -&gt; VPN -&gt; destination.</p>
<blockquote>
<p>I don’t know iptables very well, so I can’t modify your<br>
configuratation to prevent damages, how can I do ? Maybe I can test .</p>
</blockquote>
<p>Using VPN-Firewall and going user -&gt; VPN -&gt; destination and then at the<br>
same time making exceptions for user -&gt; destination is certainly<br>
possible if you know iptables, but unsupported. (<br>
<a href="https://www.whonix.org/wiki/FAQ#What_do_you_mean_by_unsupported.3F">https://www.whonix.org/wiki/FAQ#What_do_you_mean_by_unsupported.3F</a> )</p>
<blockquote>
<p>In conclusion, to update my host I always need to launch VPN and Tor<br>
in the host, so Tor connection wil pass through the VPN . But sometimes<br>
I need to surf unless Tor in the host …<br>
How can I do ?</p>
</blockquote>
<p>You don’t need to start Whonix / Tor for user -&gt; VPN -&gt; destination.</p>
<p>(Technical analogy: From VPN-Firewall / VPN perspective, “they don’t<br>
’know’ anything about Whonix”.)</p>
          <p><a href="http://forums.whonix.org/t/workstation-firewall-setup/1540/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/workstation-firewall-setup/1540/6</link>
        <pubDate>Sat, 16 Jan 2016 20:25:37 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1540-6</guid>
        <source url="http://forums.whonix.org/t/workstation-firewall-setup/1540.rss">Workstation-Firewall setup</source>
      </item>
      <item>
        <title>Workstation-Firewall setup</title>
        <dc:creator><![CDATA[Hiberts]]></dc:creator>
        <description><![CDATA[
            <p>I tried to use the Workstation Firewall and it runs very well .<br>
I did thus :</p>
<ol>
<li>stop networking with : sudo service networking stop . .</li>
<li>sudo whonix_firewall reload .</li>
<li>sudo service networking start . .</li>
<li>sudo openvpn --config  ( first edit the file with the correct interface )</li>
</ol>
<p>Of course, before I did this :</p>
<ol>
<li>Go to /usr/bin/whonix_firewall and at this point modify like below :</li>
</ol>
<h2>Not in use/defined yet.</h2>
<h2>INT_IF could be the internal network.</h2>
<h2>EXT_IF could be an additional virtual network adapter,</h2>
<h2>such as OnionCat or OpenVPN.</h2>
<h2>External interface</h2>
<p>[ -n “$EXT_IF” ] || EXT_IF=“eth0” # ( here I wrote tun1 )</p>
<h2>Internal interface</h2>
<p>[ -n “$INT_IF” ] || INT_IF=“eth1” # ( here I wrote eth0 )<br>
[ -n “$GATEWAY_IP” ] || GATEWAY_IP=“10.152.152.10”</p>
<p>The tun1 is the interface of my vpn, so the external interface .<br>
The eth0 is foundamental interface, so the internal interface .</p>
<p>Is it correct ?<br>
Of course, like you told, the fail closed mechanism doesn’t run, but it’s doesn’t matter because I have a good vpn and of course it’s an addition layer of security, not foudamental in the major part of things .</p>
<p>I have another question, if I would use the VPN-FIrewall on the host and I need to surf on the clear net unless Tor, how can I do it ? The normal Browser ( Iceweaseal ) doesn’t connect, only Virtualbox can .<br>
I don’t know iptables very well, so I can’t modify your configuratation to prevent damages, how can I do ? Maybe I can test .<br>
In conclusion, to update my host I always need to launch VPN and Tor in the host, so Tor connection wil pass through the VPN . But sometimes I need to surf unless Tor in the host …<br>
How can I do ?</p>
          <p><a href="http://forums.whonix.org/t/workstation-firewall-setup/1540/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/workstation-firewall-setup/1540/5</link>
        <pubDate>Sat, 16 Jan 2016 19:33:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1540-5</guid>
        <source url="http://forums.whonix.org/t/workstation-firewall-setup/1540.rss">Workstation-Firewall setup</source>
      </item>
      <item>
        <title>Workstation-Firewall setup</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Sorry.<br>
Whonix-Workstation’s Firewall does not yet have a VPN-Firewall feature. Ticket:<br>
<a href="https://phabricator.whonix.org/T142" class="onebox" target="_blank">https://phabricator.whonix.org/T142</a></p>
<p>Whonix-Workstation /etc/whonix_firewall.d/30_default (<a href="https://github.com/Whonix/whonix-ws-firewall/blob/master/etc/whonix_firewall.d/30_default">https://github.com/Whonix/whonix-ws-firewall/blob/master/etc/whonix_firewall.d/30_default</a>) has no such setting.</p>
<p>You can try <a href="https://github.com/adrelanos/VPN-Firewall">https://github.com/adrelanos/VPN-Firewall</a>.</p>
          <p><a href="http://forums.whonix.org/t/workstation-firewall-setup/1540/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/workstation-firewall-setup/1540/4</link>
        <pubDate>Mon, 02 Nov 2015 15:27:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1540-4</guid>
        <source url="http://forums.whonix.org/t/workstation-firewall-setup/1540.rss">Workstation-Firewall setup</source>
      </item>
      <item>
        <title>Workstation-Firewall setup</title>
        <dc:creator><![CDATA[Hiberts]]></dc:creator>
        <description><![CDATA[
            <p>Sorry, you are confused with whonix gateway .<br>
The chain : device—&gt;vpn—&gt;tor it’s perfect with whonix, also for fail closed mechanism .<br>
I meant the chain : tor—&gt;vpn .<br>
You wrote this :<br>
One of the benefits of Whonix is that when a VPN connection breaks down, you still have the protections provided by Tor. In such an event where the VPN connection breaks down, Whonix-Workstation will seamlessly continue to make “direct” connections through Tor. If you are using the VPN only to circumvent the censorship of Tor, you may not care so much. On the other hand, if you believe a VPN improves your security, you should make sure that when the VPN connection breaks down, all connections with the outside world and your computer cease.</p>
<p>If you want to enforce, that the VPN always gets used:</p>
<pre><code>Whonix-Gateway: Already includes a fail closed (firewall settings VPN_FIREWALL setting) mechanism.
Other operating systems: see: https://github.com/adrelanos/VPN-Firewall
</code></pre>
<hr>
<p>So, I saw that in Whonix Workstation just there’s a vpn fail closed mechanism, or at least a part of this, i didn’t control it .<br>
I enabled it but it doesn’t run, i did what I wrote in the first message .</p>
          <p><a href="http://forums.whonix.org/t/workstation-firewall-setup/1540/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/workstation-firewall-setup/1540/3</link>
        <pubDate>Sat, 31 Oct 2015 16:04:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1540-3</guid>
        <source url="http://forums.whonix.org/t/workstation-firewall-setup/1540.rss">Workstation-Firewall setup</source>
      </item>
      <item>
        <title>Workstation-Firewall setup</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>How to add the VPN in Whonix-Gateway<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Using_Tunnels_with_Whonix#How_to_add_the_VPN_in_Whonix-Gateway" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/452;"><img src="https://www.whonix.org/w/images/8/86/Beyond-1087922640.jpg" class="thumbnail"></div>

<h3><a href="https://www.whonix.org/wiki/Using_Tunnels_with_Whonix#How_to_add_the_VPN_in_Whonix-Gateway" target="_blank" rel="nofollow noopener">Tunnels/Introduction</a></h3>

<p>Instructions on how to combine tunnels (VPN, SSH, proxy) with Tor. (User -&gt; Tor -&gt; proxy/VPN/SSH -&gt; Internet) (User -&gt; proxy/VPN/SSH -&gt;...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<p>Explains it all. Change the settings. Reload Whonix firewall. Setup OpenVPN. Make sure Tor is enabled. Done.</p>
<blockquote>fail closed mechanism doesn't run</blockquote>
That's not a very good problem description. See my signature.
Actual Result
Expected Result
...
          <p><a href="http://forums.whonix.org/t/workstation-firewall-setup/1540/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/workstation-firewall-setup/1540/2</link>
        <pubDate>Mon, 26 Oct 2015 12:33:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1540-2</guid>
        <source url="http://forums.whonix.org/t/workstation-firewall-setup/1540.rss">Workstation-Firewall setup</source>
      </item>
      <item>
        <title>Workstation-Firewall setup</title>
        <dc:creator><![CDATA[Hiberts]]></dc:creator>
        <description><![CDATA[
            <p>Hi,<br>
I tested Whonix Workstation FIrewall but i found nothig it’s changed .<br>
I write this in /etc/whonix_firewall.d/50_user :<br>
VPN_FIREWALL=1<br>
VPN_SERVERS=""</p>
<p>The notation it’s to memory, but I copied the configuration from the website and the file /etc/whonix_firewall.d/30_default .<br>
Then I reloaded the firewall ( sudo whonix_firewall reload ) but the fail closed mechanism doesn’t run .<br>
I launched the vpn from openvpn, the vpn runs correctly but fail closed mechanism not, the browser was configurated like told from the documentation .<br>
In the documentation i didn’t find a clear explanation, I think it’s incomplete, at least for noob like me <img src="//forums.whonix.org/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"> .</p>
          <p><a href="http://forums.whonix.org/t/workstation-firewall-setup/1540/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/workstation-firewall-setup/1540/1</link>
        <pubDate>Mon, 26 Oct 2015 11:56:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-1540-1</guid>
        <source url="http://forums.whonix.org/t/workstation-firewall-setup/1540.rss">Workstation-Firewall setup</source>
      </item>
  </channel>
</rss>
