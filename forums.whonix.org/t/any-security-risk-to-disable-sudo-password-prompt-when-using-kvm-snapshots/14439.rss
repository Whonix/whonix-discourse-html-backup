<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Any security risk to disable sudo password prompt, when using KVM snapshots?</title>
    <link>http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439</link>
    <description>It looks like on Qubes-Whonix, there is no sudo password prompt. But for KVM, the user has to type the password, whenever she `sudo` some commands. I read the Qubes documentation titled &quot;Passwordless root access in Qubes&quot; (I can&#39;t post links), and it looks to me that what&#39;s the same between Qubes-Whonix and KVM Whonix is &quot;all the user data is already accessible from the user account&quot;. But for Qubes-Whonix, &quot;the VM&#39;s root filesystem modifications are lost upon each start of a VM&quot;, and it&#39;s not the case for KVM Whonix.
  
So I guess there are prompts in KVM Whonix, to prevent persistent malware being installed from a compromiesd user account? If however, I create and maintain &quot;safe snapshots&quot;, upon safe events like VM creation, and VM `upgrade-nonroot`, and revert to the latest safe snapshot after each use of the VM?
  
Compared to Qubes-Whonix, there will be even less persistence in this way, with the user&#39;s home directory also not persistent. Does this mean it will then be safe to disable the sudo password prompt with `user ALL=(ALL) NOPASSWD: ALL` in `/etc/sudoers`? Or will it cause problems and run afoul with some of the Kicksecure or Whonix hardening, or some other things?</description>
    <language>en</language>
    <lastBuildDate>Mon, 15 Aug 2022 17:04:12 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Any security risk to disable sudo password prompt, when using KVM snapshots?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>It’s not well enough researched, documented. Therefore I cannot say.</p>
          <p><a href="http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439/6</link>
        <pubDate>Mon, 15 Aug 2022 17:04:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14439-6</guid>
        <source url="http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439.rss">Any security risk to disable sudo password prompt, when using KVM snapshots?</source>
      </item>
      <item>
        <title>Any security risk to disable sudo password prompt, when using KVM snapshots?</title>
        <dc:creator><![CDATA[shray.mike]]></dc:creator>
        <description><![CDATA[
            <p>Thank you for sharing the articles. I see the rationale now. So Whonix is leaving the sudo password prompt on, because there are defense mechanism for this topic, both <a href="https://www.kicksecure.com/wiki/Root#Prevent_Malware_from_Sniffing_the_Root_Password" rel="noopener nofollow ugc">in the present</a>, and in the future (multiple boot modes).  And in those scenarios, the user will need to type the password to install packages and so on. So if Whonix let the users to do those tasks without password now, it’s awkward to train them to type passwords again in the future.</p>
<p>But, if I disregard those defenses, and use the snapshot routine I mentioned at the top, will it be a valid mirror of what Qubes is currently doing, and be as secure as Qubes, at least on this topic?</p>
          <p><a href="http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439/5</link>
        <pubDate>Mon, 15 Aug 2022 04:17:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14439-5</guid>
        <source url="http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439.rss">Any security risk to disable sudo password prompt, when using KVM snapshots?</source>
      </item>
      <item>
        <title>Any security risk to disable sudo password prompt, when using KVM snapshots?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>It’s a complex technical question whether currently most if not all single-user human Linux <strong>desktop</strong> distributions are participating in security theater or if it already provides additional security under certain threat models.</p>
<p>The following wiki pages are about this topic but aren’t too clearly describing all of that yet either. Probably interesting pointers for further research nonetheless.</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.kicksecure.com/wiki/Root">
  <header class="source">
      <img src="https://www.kicksecure.com/w/images/4/45/Kicksecure-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.kicksecure.com/wiki/Root" target="_blank" rel="noopener" title="10:26AM - 11 August 2022">Kicksecure – 11 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:332/500;"><img src="https://www.kicksecure.com/w/images/e/e2/Root123123.jpg" class="thumbnail" width="332" height="500"></div>

<h3><a href="https://www.kicksecure.com/wiki/Root" target="_blank" rel="noopener">Safely Use Root Commands</a></h3>

  <p>Tips on using sudo / root (privileged) commands safely</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.kicksecure.com/wiki/Dev/Strong_Linux_User_Account_Isolation">
  <header class="source">
      <img src="https://www.kicksecure.com/w/images/4/45/Kicksecure-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.kicksecure.com/wiki/Dev/Strong_Linux_User_Account_Isolation" target="_blank" rel="noopener" title="08:53PM - 09 August 2022">Kicksecure – 9 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/430;"><img src="https://www.kicksecure.com/w/images/0/0a/Useraccountisolatiom123123.jpg" class="thumbnail" width="640" height="430"></div>

<h3><a href="https://www.kicksecure.com/wiki/Dev/Strong_Linux_User_Account_Isolation" target="_blank" rel="noopener">Strong Linux User Account Isolation</a></h3>

  <p>Protect Linux User Accounts against Brute Force Attacks, Root Account Locking, Console Lockdown, sudo password sniffing, X Windows System Password Sniffing, /proc/pid/sched spy on keystrokes, Linux user account cracking, pam-tally2, pam-cracklib,...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.kicksecure.com/wiki/Security_Roadmap">
  <header class="source">
      <img src="https://www.kicksecure.com/w/images/4/45/Kicksecure-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.kicksecure.com/wiki/Security_Roadmap" target="_blank" rel="noopener" title="04:12PM - 04 August 2022">Kicksecure – 4 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/360;"><img src="https://www.kicksecure.com/w/images/8/87/Roadmap.jpg" class="thumbnail" width="640" height="360"></div>

<h3><a href="https://www.kicksecure.com/wiki/Security_Roadmap" target="_blank" rel="noopener">Kicksecure ™ Security Roadmap</a></h3>

  <p>Future Kicksecure ™ Security Enhancements</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.kicksecure.com/wiki/Dev/boot_modes">
  <header class="source">
      <img src="https://www.kicksecure.com/w/images/4/45/Kicksecure-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.kicksecure.com/wiki/Dev/boot_modes" target="_blank" rel="noopener" title="01:55PM - 21 May 2022">Kicksecure – 21 May 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/388;"><img src="https://www.kicksecure.com/w/images/f/fc/Kicksecure-twitter-post.jpg?version=30a0ad75271a4836786771c345c960b8" class="thumbnail" width="690" height="388"></div>

<h3><a href="https://www.kicksecure.com/wiki/Dev/boot_modes" target="_blank" rel="noopener">Multiple Boot Modes for Better Security: an Implementation of Untrusted Root</a></h3>

  <p>Persistent User / Live user / Persistent Secureadmin / Persistent Superadmin / Persistent Recovery Mode</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox githubissue" data-onebox-src="https://github.com/QubesOS/qubes-issues/issues/2695">
  <header class="source">

      <a href="https://github.com/QubesOS/qubes-issues/issues/2695" target="_blank" rel="noopener">github.com/QubesOS/qubes-issues</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/QubesOS/qubes-issues/issues/2695" target="_blank" rel="noopener">Automate vm sudo authorization setup</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2017-03-12" data-time="02:28:09" data-timezone="UTC">02:28AM - 12 Mar 17 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/tasket" target="_blank" rel="noopener">
          <img alt="tasket" src="https://avatars.githubusercontent.com/u/14337937?v=4" class="onebox-avatar-inline" width="20" height="20">
          tasket
        </a>
      </div>
    </div>

    <div class="labels">
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          T: enhancement
        </span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          C: core
        </span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          P: major
        </span>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">#### Qubes OS version (e.g., `R3.2`):
R3.2

#### Affected TemplateVMs (e.g., <span class="show-more-container"><a href="http://forums.whonix.org" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">`fedora-23`, if applicable):
All Linux

---
### General notes:

Users wishing to enable dom0 prompts for domU sudo authorization must edit several config files according to doc/vm-sudo...
https://www.qubes-os.org/doc/vm-sudo/

Since this configuration has worked well for many months with only one (fixable) sticking point, I figured the setup could be automated with a script provided by Qubes. This would allow the user to choose the sudo mode without being mired in the technical configuration process.

---

#### Related issues:

#2693</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Also related…</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.kicksecure.com/wiki/Mobile_Operating_System_Comparison">
  <header class="source">
      <img src="https://www.kicksecure.com/w/images/4/45/Kicksecure-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.kicksecure.com/wiki/Mobile_Operating_System_Comparison" target="_blank" rel="noopener" title="09:10PM - 09 August 2022">Kicksecure – 9 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/451;"><img src="https://www.kicksecure.com/w/images/a/a7/Mobile-1231889640.jpg" class="thumbnail" width="640" height="451"></div>

<h3><a href="https://www.kicksecure.com/wiki/Mobile_Operating_System_Comparison" target="_blank" rel="noopener">Mobile Operating System Comparison</a></h3>

  <p>Comparison of Mobile Phones, Operating Systems that focus on either/and/or security, privacy, anonymity, source-available, Freedom Software, de-googled, un-googled.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<blockquote>
<p>In conclusion, when using iPhone/Android devices that still receive security updates, the iPhone/Android approach provides strong protection against malware, meaning those platforms are impacted much less than Windows or Linux desktops. <a href="https://www.kicksecure.com/wiki/Template:Kicksecure_Android#cite_note-exploitedapp-10">[10]</a> Despite the many downsides (<a href="https://www.kicksecure.com/wiki/Mobile_Phone_Security#Mobile_Devices_Backdoors_in_Most_Phones_Tablets_Etc">Mobile Devices Backdoors in Most Phones Tablets Etc</a>, <a href="https://www.kicksecure.com/wiki/Mobile_Phone_Security#Data_Harvesting_by_Most_Phones">Data Harvesting by Most Phones</a>, …), the security model of popular mobile operating systems often affords better protection when attempting to prevent any malicious and unapproved party from establishing a foothold in their ecosystem. In the process, the user’s and the security community’s ability to audit and control what their devices are actually doing is severely diminished. Due to a <a href="https://www.kicksecure.com/wiki/Miscellaneous_Threats_to_User_Freedom#Conflict_of_Interest">Conflict of Interest</a> this comes at the expense of transferring power from the user to the developers, user freedom restrictions, <a href="https://www.kicksecure.com/wiki/Miscellaneous_Threats_to_User_Freedom#Freedom_vs_Tyrant_Security">Tyrant Security</a>, <a href="https://www.kicksecure.com/wiki/Miscellaneous_Threats_to_User_Freedom#War_on_General_Purpose_Computing">War on General Purpose Computing</a>.</p>
</blockquote>
<p>One thing however I can say with certainty. In the future when some of the things mentioned in above links (specifically <a href="https://www.kicksecure.com/wiki/Dev/boot_modes" class="inline-onebox">Multiple Boot Modes for Better Security: an Implementation of Untrusted Root</a>) gets implemented, then passwordless root should be avoided.</p>
<p>Help is welcome is improving these write-ups. Linux desktop distributions generally could certainly improve security, benefit more from user/root separation and that without user freedom restrictions but I don’t think there is great documentation of this issue or awareness.</p>
          <p><a href="http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439/4</link>
        <pubDate>Fri, 12 Aug 2022 12:33:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14439-4</guid>
        <source url="http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439.rss">Any security risk to disable sudo password prompt, when using KVM snapshots?</source>
      </item>
      <item>
        <title>Any security risk to disable sudo password prompt, when using KVM snapshots?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Moved form KVM to Support forums because this equally applies to Whonix for VirtualBox. Not only to Whonix for KVM.</p>
          <p><a href="http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439/3</link>
        <pubDate>Fri, 12 Aug 2022 12:16:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14439-3</guid>
        <source url="http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439.rss">Any security risk to disable sudo password prompt, when using KVM snapshots?</source>
      </item>
      <item>
        <title>Any security risk to disable sudo password prompt, when using KVM snapshots?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="shray.mike" data-post="1" data-topic="14439">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/s/aeb1de/40.png" class="avatar"> shray.mike:</div>
<blockquote>
<p>(I can’t post links)</p>
</blockquote>
</aside>
<p>Now you can.</p>
<p><a href="https://www.kicksecure.com/wiki/Forum_Best_Practices#Posting_Links_for_New_Users">Posting Links for New Users</a></p>
          <p><a href="http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439/2</link>
        <pubDate>Fri, 12 Aug 2022 12:15:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14439-2</guid>
        <source url="http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439.rss">Any security risk to disable sudo password prompt, when using KVM snapshots?</source>
      </item>
      <item>
        <title>Any security risk to disable sudo password prompt, when using KVM snapshots?</title>
        <dc:creator><![CDATA[shray.mike]]></dc:creator>
        <description><![CDATA[
            <p>It looks like on Qubes-Whonix, there is no sudo password prompt. But for KVM, the user has to type the password, whenever she <code>sudo</code> some commands. I read the Qubes documentation titled “Passwordless root access in Qubes” (I can’t post links), and it looks to me that what’s the same between Qubes-Whonix and KVM Whonix is “all the user data is already accessible from the user account”. But for Qubes-Whonix, “the VM’s root filesystem modifications are lost upon each start of a VM”, and it’s not the case for KVM Whonix.</p>
<p>So I guess there are prompts in KVM Whonix, to prevent persistent malware being installed from a compromiesd user account? If however, I create and maintain “safe snapshots”, upon safe events like VM creation, and VM <code>upgrade-nonroot</code>, and revert to the latest safe snapshot after each use of the VM?</p>
<p>Compared to Qubes-Whonix, there will be even less persistence in this way, with the user’s home directory also not persistent. Does this mean it will then be safe to disable the sudo password prompt with <code>user ALL=(ALL) NOPASSWD: ALL</code> in <code>/etc/sudoers</code>? Or will it cause problems and run afoul with some of the Kicksecure or Whonix hardening, or some other things?</p>
          <p><a href="http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439/1</link>
        <pubDate>Wed, 10 Aug 2022 23:54:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-14439-1</guid>
        <source url="http://forums.whonix.org/t/any-security-risk-to-disable-sudo-password-prompt-when-using-kvm-snapshots/14439.rss">Any security risk to disable sudo password prompt, when using KVM snapshots?</source>
      </item>
  </channel>
</rss>
