<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Fresh Debian 10: Whonix works for only first host session in which it is installed</title>
    <link>http://forums.whonix.org/t/fresh-debian-10-whonix-works-for-only-first-host-session-in-which-it-is-installed/10027</link>
    <description>Hello!

- I am using Debian 10 Buster, LVM encrypted single hard disk.
- Had to setup a second user that was Administrator after installation to use sudo.
- Then connected with ProtonVPN Command-Line Tool for Linux - DNS Leak Protection ON, Kill Switch ON blocking LAN in case of VPN drop, Split Tunneling OFF, always using TCP, sudo protonvpn connect
- Whonix 15.0.1.3.9 verified
- I followed the wiki KVM installation tutorial (including reboot after KVM install and users added to groups) all the way to the final step

&gt;     - Graphical User Interface (GUI)
&gt; 
&gt;     - Start Virtual Machine Manager.
&gt;     - Start Menu → Applications → System → Virtual Machine Manager
&gt; 
&gt;     - Start Whonix-Gateway ™.
&gt;     - click on Whonix-Gateway → click open → click the play symbol
&gt; 
&gt;     - Repeat the steps for Whonix-Workstation ™. 

For the first run it works!

Stock unedited Gateway memory - 512 MB
Stock unedited Workstation memory - 2048 MB

On Gateway Anon Connection Wizard bootstraps Tor successfully and connects to Tor network
Then changed root and user passwords on both VMs
Installed Tor Browser on Workstation and it works.

Created snapshot for both VMs: &quot;Fresh Install&quot;

I then followed the steps for standard upgrade on both Gateway and Workstation
- sudo apt-get update
- sudo apt-get dist-upgrade

Then could shutdown both virtual machines and start them back up
On Gateway Tor again connected and sdwdate finishes successfully, Tor Browser is fine also.

Created another snapshot for both VMs: &quot;Updated&quot;

A few days later just before start of August (does monthly Tor guard node change have anything to do with what will happen next?)

I powered on host and connected with VPN
Then started up Gateway only first

Now sdwdate-gui icon in top right does not become solid grey and log says

&gt; sdwdate - INFO - The clock is sane.
&gt; sdwdate - WARNING - Tor is not yet fully bootstrapped. 5 % done.
&gt; 
&gt; Tor reports: WARN BOOTSTRAP PROGRESS=5 TAG=conn SUMMARY=&quot;Connecting to a relay&quot; WARNING=&quot;Connection timed out&quot; REASON=TIMEOUT COUNT=6 RECOMMENDATION=ignore HOSTID=&quot;letters and numbers&quot; HOSTADDR=&quot;ip address with varying ports for each count including 443 and others&quot;

The Anon Connection Wizard is also stuck at 5%.

Believed the updates (or the process of making snapshots?) may have broken anything. So reverted to &quot;Fresh Install&quot; snapshot.

The &quot;Fresh Install&quot; snapshot reports Tor is &quot;ok&quot; and apparently &quot;connected&quot;. But the VM clock is a few days in the past and I couldn&#39;t trust that Tor says it is &quot;ok&quot; due to general inexperience.

Restarted Tor and sdwdate and ... they are stuck at 5% too.

From a bit of reading I understand I should not try (even if it seems the easy way out) completely uninstalling and reinstalling the Whonix xmls and qcow2&#39;s too much because frequent guard node change can destroy anonymity. Therefore I refrain from doing that and instead first turn to this forum.

Have any ideas? (Scratching head) It&#39;s not to do with a theme change I made on the host with Tweaks after I powered it on, right? Or that I thought to disable IPv6 in host&#39;s Settings - Network? Tried re-enabling it.

Tor Browser works fine on Debian host with VPN on.
I also wonder if I should follow troubleshooting&#39;s suggestion to test if other VMs can connect but I am confused. Can KVM load for example a Debian 10 Buster live or persistent .iso? Or maybe I should not need to do the tests because I did reinstall Whonix completely once before and it seemed to resolve everything but I don&#39;t want to try that again.

Or is just using the &quot;already-connected&quot; Fresh Install snapshot ok after all?</description>
    <language>en</language>
    <lastBuildDate>Mon, 03 Aug 2020 11:59:33 +0000</lastBuildDate>
    <category>KVM</category>
    <atom:link href="http://forums.whonix.org/t/fresh-debian-10-whonix-works-for-only-first-host-session-in-which-it-is-installed/10027.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Fresh Debian 10: Whonix works for only first host session in which it is installed</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>I don’t have any other advice to fix this. Reason:<br>
Could be a Tor issue.<br>
Whonix is an integration project - bundling together various components such as virtualizer, Debian and Tor.<br>
Tor is allowed to connect by firewall (never an issues with that), virtualizer is configured for network access. Then if Tor doesn’t connect - I don’t know. Being an integration project doesn’t make me an expert on Tor and/or network obstacles.</p>
<p>What you could try is swapping out the virtual hard drive. Replace it with Debian. Or install Debian there. Then install Tor there. See if that could connect. If not you could contact The Tor Project, the creators of Tor for support.</p>
<aside class="quote no-group" data-username="web-reader" data-post="3" data-topic="10027">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/w/74df32/40.png" class="avatar"> web-reader:</div>
<blockquote>
<p>[warn] Socks version 71 not recognized. (This port is not an HTTP proxy; did you want to use HTTPTunnelPort?)</p>
</blockquote>
</aside>
<p>Non-issue as per <a href="https://www.whonix.org/wiki/Tor#Non-Issues">https://www.whonix.org/wiki/Tor#Non-Issues</a></p>
<aside class="quote no-group" data-username="web-reader" data-post="3" data-topic="10027">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/w/74df32/40.png" class="avatar"> web-reader:</div>
<blockquote>
<p>sdwdate - WARNING - Tor is not yet fully bootstrapped. Tor circuit: not established.</p>
</blockquote>
</aside>
<p>You can mostly ignore sdwdate for now - as long as Tor won’t work, sdwdate can’t work.</p>
          <p><a href="http://forums.whonix.org/t/fresh-debian-10-whonix-works-for-only-first-host-session-in-which-it-is-installed/10027/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/fresh-debian-10-whonix-works-for-only-first-host-session-in-which-it-is-installed/10027/4</link>
        <pubDate>Mon, 03 Aug 2020 11:59:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10027-4</guid>
        <source url="http://forums.whonix.org/t/fresh-debian-10-whonix-works-for-only-first-host-session-in-which-it-is-installed/10027.rss">Fresh Debian 10: Whonix works for only first host session in which it is installed</source>
      </item>
      <item>
        <title>Fresh Debian 10: Whonix works for only first host session in which it is installed</title>
        <dc:creator><![CDATA[web-reader]]></dc:creator>
        <description><![CDATA[
            <p>Hello Patrick-dev, thanks for the quick reply.</p>
<p><strong>Following first advice, restart the VM:</strong> fixed the clock, but once it’s powered back up Tor continues to remain stuck at 5%.</p>
<p>I did a bit more digging around and found some logs in the Tor control panel highlighted in yellow:</p>
<p>Gateway Tor control panel log:</p>
<blockquote>
<p>[warn] Socks version 71 not recognized. (This port is not an HTTP proxy; did you want to use HTTPTunnelPort?)</p>
</blockquote>
<blockquote>
<p>[warn] Problem bootstrapping. Stuck at 5% (conn): Connecting to a relay. (Connection timed out; TIMEOUT; count 10; recommendation warn; host (letters and numbers) at (IP address, port 443)<br>
[warn] 9 connections have failed:<br>
[warn] 9 connections died in state connect()ing with SSL state (No SSL object)</p>
</blockquote>
<p>I think the log’s explicit mention of “stuck at 5%” might be noteworthy?</p>
<p>Ran Workstation, checked sdwdate log to confirm if Tor is usable:</p>
<blockquote>
<p>sdwdate - WARNING - Tor is not yet fully bootstrapped. Tor circuit: not established.</p>
</blockquote>
<p>Likely not …</p>
<p><strong>Heeding second advice, snapshots:</strong> ok, glad to know they can be made powered off, I can try that.</p>
<p>A powered-off snapshot of a working reinstalled Whonix seems like the next step, but I feel like I should listen for a double confirmation from you or other advisor to go ahead with reinstall considering the risk.</p>
<p>If not, I think then will have to find a solution on the Tor bootstrapping stuck at 5%.</p>
<p>Let’s find a way forward …</p>
          <p><a href="http://forums.whonix.org/t/fresh-debian-10-whonix-works-for-only-first-host-session-in-which-it-is-installed/10027/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/fresh-debian-10-whonix-works-for-only-first-host-session-in-which-it-is-installed/10027/3</link>
        <pubDate>Sat, 01 Aug 2020 23:43:37 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10027-3</guid>
        <source url="http://forums.whonix.org/t/fresh-debian-10-whonix-works-for-only-first-host-session-in-which-it-is-installed/10027.rss">Fresh Debian 10: Whonix works for only first host session in which it is installed</source>
      </item>
      <item>
        <title>Fresh Debian 10: Whonix works for only first host session in which it is installed</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="web-reader" data-post="1" data-topic="10027">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/w/74df32/40.png" class="avatar"> web-reader:</div>
<blockquote>
<p>The “Fresh Install” snapshot reports Tor is “ok” and apparently “connected”. But the VM clock is a few days in the past</p>
</blockquote>
</aside>
<p>In that case: power off the VM. Restart the VM. Clock should be fine then.<br>
Snapshotting a VM - especially Whonix-Gateway - that is powered off would be a better idea than snapshotting a VM that is running due to the clock issues.</p>
          <p><a href="http://forums.whonix.org/t/fresh-debian-10-whonix-works-for-only-first-host-session-in-which-it-is-installed/10027/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/fresh-debian-10-whonix-works-for-only-first-host-session-in-which-it-is-installed/10027/2</link>
        <pubDate>Sat, 01 Aug 2020 09:35:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10027-2</guid>
        <source url="http://forums.whonix.org/t/fresh-debian-10-whonix-works-for-only-first-host-session-in-which-it-is-installed/10027.rss">Fresh Debian 10: Whonix works for only first host session in which it is installed</source>
      </item>
      <item>
        <title>Fresh Debian 10: Whonix works for only first host session in which it is installed</title>
        <dc:creator><![CDATA[web-reader]]></dc:creator>
        <description><![CDATA[
            <p>Hello!</p>
<ul>
<li>I am using Debian 10 Buster, LVM encrypted single hard disk.</li>
<li>Had to setup a second user that was Administrator after installation to use sudo.</li>
<li>Then connected with ProtonVPN Command-Line Tool for Linux - DNS Leak Protection ON, Kill Switch ON blocking LAN in case of VPN drop, Split Tunneling OFF, always using TCP, sudo protonvpn connect</li>
<li>Whonix 15.0.1.3.9 verified</li>
<li>I followed the wiki KVM installation tutorial (including reboot after KVM install and users added to groups) all the way to the final step</li>
</ul>
<blockquote>
<pre><code>- Graphical User Interface (GUI)

- Start Virtual Machine Manager.
- Start Menu → Applications → System → Virtual Machine Manager

- Start Whonix-Gateway ™.
- click on Whonix-Gateway → click open → click the play symbol

- Repeat the steps for Whonix-Workstation ™. 
</code></pre>
</blockquote>
<p>For the first run it works!</p>
<p>Stock unedited Gateway memory - 512 MB<br>
Stock unedited Workstation memory - 2048 MB</p>
<p>On Gateway Anon Connection Wizard bootstraps Tor successfully and connects to Tor network<br>
Then changed root and user passwords on both VMs<br>
Installed Tor Browser on Workstation and it works.</p>
<p>Created snapshot for both VMs: “Fresh Install”</p>
<p>I then followed the steps for standard upgrade on both Gateway and Workstation</p>
<ul>
<li>sudo apt-get update</li>
<li>sudo apt-get dist-upgrade</li>
</ul>
<p>Then could shutdown both virtual machines and start them back up<br>
On Gateway Tor again connected and sdwdate finishes successfully, Tor Browser is fine also.</p>
<p>Created another snapshot for both VMs: “Updated”</p>
<p>A few days later just before start of August (does monthly Tor guard node change have anything to do with what will happen next?)</p>
<p>I powered on host and connected with VPN<br>
Then started up Gateway only first</p>
<p>Now sdwdate-gui icon in top right does not become solid grey and log says</p>
<blockquote>
<p>sdwdate - INFO - The clock is sane.<br>
sdwdate - WARNING - Tor is not yet fully bootstrapped. 5 % done.</p>
<p>Tor reports: WARN BOOTSTRAP PROGRESS=5 TAG=conn SUMMARY=“Connecting to a relay” WARNING=“Connection timed out” REASON=TIMEOUT COUNT=6 RECOMMENDATION=ignore HOSTID=“letters and numbers” HOSTADDR=“ip address with varying ports for each count including 443 and others”</p>
</blockquote>
<p>The Anon Connection Wizard is also stuck at 5%.</p>
<p>Believed the updates (or the process of making snapshots?) may have broken anything. So reverted to “Fresh Install” snapshot.</p>
<p>The “Fresh Install” snapshot reports Tor is “ok” and apparently “connected”. But the VM clock is a few days in the past and I couldn’t trust that Tor says it is “ok” due to general inexperience.</p>
<p>Restarted Tor and sdwdate and … they are stuck at 5% too.</p>
<p>From a bit of reading I understand I should not try (even if it seems the easy way out) completely uninstalling and reinstalling the Whonix xmls and qcow2’s too much because frequent guard node change can destroy anonymity. Therefore I refrain from doing that and instead first turn to this forum.</p>
<p>Have any ideas? (Scratching head) It’s not to do with a theme change I made on the host with Tweaks after I powered it on, right? Or that I thought to disable IPv6 in host’s Settings - Network? Tried re-enabling it.</p>
<p>Tor Browser works fine on Debian host with VPN on.<br>
I also wonder if I should follow troubleshooting’s suggestion to test if other VMs can connect but I am confused. Can KVM load for example a Debian 10 Buster live or persistent .iso? Or maybe I should not need to do the tests because I did reinstall Whonix completely once before and it seemed to resolve everything but I don’t want to try that again.</p>
<p>Or is just using the “already-connected” Fresh Install snapshot ok after all?</p>
          <p><a href="http://forums.whonix.org/t/fresh-debian-10-whonix-works-for-only-first-host-session-in-which-it-is-installed/10027/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/fresh-debian-10-whonix-works-for-only-first-host-session-in-which-it-is-installed/10027/1</link>
        <pubDate>Sat, 01 Aug 2020 04:27:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-10027-1</guid>
        <source url="http://forums.whonix.org/t/fresh-debian-10-whonix-works-for-only-first-host-session-in-which-it-is-installed/10027.rss">Fresh Debian 10: Whonix works for only first host session in which it is installed</source>
      </item>
  </channel>
</rss>
