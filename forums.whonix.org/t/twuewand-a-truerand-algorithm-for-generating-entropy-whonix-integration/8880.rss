<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
    <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880</link>
    <description>was mentioned in https://forums.whonix.org/t/linux-random-number-generation-rng-innerworkings-and-early-boot-seeding/8591 by HulaHoop

https://www.finnie.org/software/twuewand/

https://www.finnie.org/2011/09/25/introducing-twuewand/

https://www.finnie.org/2012/08/14/twuewand-2-0-released/

https://github.com/rfinnie/twuewand

[twuewand - a truerand algorithm for generating entropy](https://www.whonix.org/wiki/Dev/Entropy#twuewand_-_a_truerand_algorithm_for_generating_entropy)

Looking into it.

* Has signed git commits.
* python2 but maybe could be ported to python3.
* Debian packaging looks very doable.
* Causes ~15% CPU on my system. Therefore probably no good idea to run it permanently. But there might be no need for that.
* stdout contains progress info. Could be discarded to /dev/null.
* stderr contains entropy. Could be redirected to /dev/random.

`time twuewand --bytes 100` takes ~ 6 seconds.

I could write a wrapper. Read XX random amount of bytes. Redirect that entropy to /dev/random. Run that at early boot.

How many random bytes would be worth reading? It should be based on some number considered useful for the kernel. Too many would needlessly slow down the boot.

Size of `/var/lib/systemd/random-seed` is 512 bytes.

    twuewand --bytes 512 1&gt;/dev/random 2&gt;/dev/null

Takes ~ 25 seconds. Quite a long time during boot.

twuewand could alternatively/either/or be used to re-seed. CPU could be limited using cpulimit or so. Reseeding is much less critical, kinda optional and can be slow so this doesn&#39;t stress the CPU.</description>
    <language>en</language>
    <lastBuildDate>Sat, 09 Oct 2021 20:16:59 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>source: <a href="https://github.com/smuellerDD/jitterentropy-library/issues/16#issuecomment-939093055">https://github.com/smuellerDD/jitterentropy-library/issues/16#issuecomment-939093055</a></p>
<p>me:</p>
<blockquote>
<p>and twuewand comparing time from CPU with time from RTC.</p>
</blockquote>
<p>Stephan Mueller <a href="https://github.com/smuellerDD">@smuellerDD</a> is the author of jitterentropy-rng who also re-worked Linux kernel entropy replied:</p>
<blockquote>
<p>This sounds like a high-res clock being sampled by a low-res clock like ring oscillators do that. I had once played with this idea but discarded it for a reason.</p>
</blockquote>
<p>Seems like twuewand got obsoleted by jitterentropy-rng. Since the author of twuewand was also cc’d in that discussion, until there is other information, discarding twuewand as an option.</p>
<p>Back to the drawing board → <a href="https://forums.whonix.org/t/moar-entropy-sources/8543" class="inline-onebox">Moar Entropy Sources</a></p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/26">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/26</link>
        <pubDate>Sat, 09 Oct 2021 20:16:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-26</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>twuewand fully python3 now, got recent git commits by upstream.</p>
<ul>
<li><a href="https://github.com/smuellerDD/jitterentropy-library/issues/16#issuecomment-936789742">https://github.com/smuellerDD/jitterentropy-library/issues/16#issuecomment-936789742</a></li>
</ul>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/25">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/25</link>
        <pubDate>Wed, 06 Oct 2021 18:34:57 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-25</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p>So I shebanged this, still not sure how to verify it actually works for our purposes.  I pushed it up none the less.<br>
Here is the PR:<br>
</p><aside class="onebox githubpullrequest">
  <header class="source">
      <a href="https://github.com/rfinnie/twuewand/pull/1" target="_blank" rel="nofollow noopener">github.com/rfinnie/twuewand</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/rfinnie/twuewand/pull/1" target="_blank" rel="nofollow noopener">Shebang Python3</a>
    </h4>

    <div class="branches">
      <code>rfinnie:master</code> ← <code>Mycobee:python_three_shebang</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-02-19" data-time="02:27:31" data-timezone="UTC">02:27AM - 19 Feb 20 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/Mycobee" target="_blank" rel="nofollow noopener">
          <img alt="Mycobee" src="https://avatars3.githubusercontent.com/u/41843577?v=4" class="onebox-avatar-inline" width="20" height="20">
          Mycobee
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 1 additions and 1 deletions">
        <a href="https://github.com/rfinnie/twuewand/pull/1/files" target="_blank" rel="nofollow noopener">
          <span class="added">+1</span>
          <span class="removed">-1</span>
        </a>
      </div>
    </div>

  </div>
</div>
  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/24">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/24</link>
        <pubDate>Wed, 19 Feb 2020 02:31:04 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-24</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Quote <a href="https://github.com/smuellerDD/jitterentropy-library/issues/16#issuecomment-582857370">https://github.com/smuellerDD/jitterentropy-library/issues/16#issuecomment-582857370</a></p>
<blockquote>
<p>Am Donnerstag, 6. Februar 2020, 12:11:52 CET schrieb Patrick Schleizer:<br>
Hi Patrick,</p>
<blockquote>
<p>How would I know if any entropy generator produces stochastically independent values?</p>
</blockquote>
<p>Per default, assume that they are not independent. Only with an entropy analysis and a rationale why events should be stochastically independent you may assume that it is so.</p>
<p>Ciao Stephan</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/23</link>
        <pubDate>Thu, 06 Feb 2020 12:31:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-23</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="21" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>How would we know if output by <code>twuewand</code> has “stochastically independent” values?</p>
</blockquote>
</aside>
<p>I guess it would need specific review by knowledgeable eyes, otherwise it swill be a vague discussion.</p>
<aside class="quote no-group" data-username="Patrick" data-post="21" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>This means on the side of caution, don’t use it.</p>
</blockquote>
</aside>
<p>twuerand’s readme has big red warnings about not de-biasing it pretty much says it’s entropy quality will be useless in that case. Better to have less bits generated with something other than von Neumann than no cleaning  done whatsoever.</p>
<aside class="quote no-group" data-username="Patrick" data-post="21" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>He hasn’t opposed this statement of mine:</p>
</blockquote>
</aside>
<p>Yeah I don’t doubt that it won;t make entropy worse, but with the effort put into preparing it for our use we should really make it count instead of having an illusion of safety.</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/22</link>
        <pubDate>Wed, 05 Feb 2020 16:55:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-22</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>We might have to really specifically ask if “is good” would mean “is required” or “is recommended”.</p>
<p>I don’t know the definition of “stochastically independent” applies to <code>twuewand</code>.</p>
<p>How would we know if output by <code>twuewand</code> has “stochastically independent” values?</p>
<blockquote>
<p>Otherwise, a Von-Neumann unbiaser can be a disaster.</p>
</blockquote>
<p>This means on the side of caution, don’t use it.</p>
<blockquote>
<p>Such independence, however, is commonly not given.</p>
</blockquote>
<p>Seems more likely that most entropy inputs aren’t “stochastically independent”. We still don’t know the specific case of <code>twuewand</code>.</p>
<p>He hasn’t opposed this statement of mine:</p>
<blockquote>
<p>/dev/random is still world-writeable by any unprivileged user. Simply writing to /dev/entropy should never worsen entropy quality, so the current understanding goes.</p>
</blockquote>
<p>Which could be interpreted as free ticket to drop debiasing.</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/21</link>
        <pubDate>Wed, 05 Feb 2020 15:55:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-21</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Stephan’s is a general statement not really applying to twuerand per se:</p>
<blockquote>
<p>A Von-Neumann unbiaser is good IFF we have stochastically independent values.<br>
Otherwise, a Von-Neumann unbiaser can be a disaster. Such independence,<br>
however, is commonly not given.</p>
</blockquote>
<p>Therefore we can’t conclude de-biasing  is useless in that case.</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/20</link>
        <pubDate>Wed, 05 Feb 2020 14:52:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-20</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>We better don’t use debiasing as per <a href="https://github.com/smuellerDD/jitterentropy-library/issues/16#issuecomment-581901851">https://github.com/smuellerDD/jitterentropy-library/issues/16#issuecomment-581901851</a>.</p>
<p>(Read <code>de</code> <code>bias</code>. Not <code>Debian</code>. Easily misread and almost wrote Debian myself instead of debias.)</p>
<hr>
<p>Before I knew that, started creating of two files, each 1 MB big in size, containing entropy created by twuewand without debias. Just sharing for the fun of it since I already produced the results.</p>
<p><code>twuewand --no-debias --bytes 1000000</code></p>
<blockquote>
<p>Generated 1000000.0 bytes, output 1000000</p>
<p>real    234m<br>
user    1853m<br>
sys     0m34s</p>
</blockquote>
<hr>
<p>And with twuewand with debias.</p>
<p><code>twuewand --bytes 1000000</code></p>
<blockquote>
<p>Generated 1000000.1 bytes, output 1000000</p>
<p>real    1158m<br>
user    9136m<br>
sys     2m</p>
</blockquote>
<p>Debias takes around 5 times longer. And also takes a very long time to create 1 MB of random data using twuewand anyhow.</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/19</link>
        <pubDate>Tue, 04 Feb 2020 18:05:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-19</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Probably yes. I don’t think there is any reason to keep python2 compatibility. Can by python3 only.</p>
<aside class="quote no-group" data-username="Mycobee" data-post="17" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/mycobee/40/2338_2.png" class="avatar"> Mycobee:</div>
<blockquote>
<p>Thanks for your patience, as this is new territory <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</blockquote>
</aside>
<p>No worries at all. Appreciate your work! <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/18</link>
        <pubDate>Mon, 03 Feb 2020 05:34:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-18</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="14" data-topic="8880" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Maybe it already has (partial) python3 support? Maybe just shebang changes?</p>
</blockquote>
</aside>
<p>You think I should add python3 to the top of just the twuewand files?  The setup does not like it when I try to build with python3 because of dependencies issues.</p>
<p>Thanks for your patience, as this is new territory <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/17</link>
        <pubDate>Mon, 03 Feb 2020 00:29:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-17</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="anontor" data-post="15" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/b2d939/40.png" class="avatar"> anontor:</div>
<blockquote>
<p>could twuewand be used in place of systems that use rdrand?</p>
</blockquote>
</aside>
<p>rdrand is unrelated. <a href="https://www.whonix.org/wiki/Dev/Entropy#RDRAND">distrusting RDRAND</a> is a separate.</p>
<aside class="quote no-group" data-username="anontor" data-post="15" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/a/b2d939/40.png" class="avatar"> anontor:</div>
<blockquote>
<p>Could a CPU be instructed to not only distrust rdrand, which we do already, but also use twuewand in its place for all applications that need it? For example, take a openvpn server that needs good quality random numbers.</p>
</blockquote>
</aside>
<p>There is probably no need to configure per application. The Linux kernel provides APIs, entropy pools. You could learn more about that here: <a href="https://forums.whonix.org/t/good-read-on-the-linux-security-wrt-to-entropy-randomness/2103" class="inline-onebox">good read on the linux security wrt to entropy / randomness</a></p>
<p>By installing and configuring twuewand, the entropy quality might get better. All applications would benefit from that without further action required.</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/16</link>
        <pubDate>Sun, 02 Feb 2020 19:33:24 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-16</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[anontor]]></dc:creator>
        <description><![CDATA[
            <p>Since this is a TRNG as opposed to a PRNG, could twuewand  be used in place of systems that use rdrand? Could a CPU be instructed to not only distrust rdrand, which we do already, but also use twuewand in its place for all applications that need it? For example, take a openvpn server that needs good quality random numbers.</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/15</link>
        <pubDate>Sun, 02 Feb 2020 19:20:54 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-15</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Maybe it already has (partial) python3 support? Maybe just shebang changes?</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/14</link>
        <pubDate>Sun, 02 Feb 2020 19:13:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-14</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Mycobee]]></dc:creator>
        <description><![CDATA[
            <p>currently looking in to porting “twuewand” to python3 per <a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> 's request, hung up out how to run the tests currently</p>
<p>This line was removed from the worker file<br>
<code>Programming Language :: Python :: 2 :: Only</code></p>
<p>and replaced with<br>
<code>Programming Language :: Python</code></p>
<p>Also there was already a python 2 method removed as well in the <code>truerand.py</code></p>
<p>relevant commit <a href="https://github.com/rfinnie/twuewand/commit/363153917eacd7ffc3416ef161117ad7ea141a7c" rel="nofollow noopener">https://github.com/rfinnie/twuewand/commit/363153917eacd7ffc3416ef161117ad7ea141a7c</a></p>
<p>Edit by Patrick:<br>
fix link</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/13</link>
        <pubDate>Sun, 02 Feb 2020 18:54:37 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-13</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>I am not sure twuewand and timer_entropyd are jitter based. “Something with timers” but still need to learn more.</p>
<aside class="quote no-group" data-username="HulaHoop" data-post="11" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>sounds awfully similar to timer jitter concept?</p>
</blockquote>
</aside>
<p>I don’t understand the differences yet. Which ones are different, how, worth combining, which aren’t.</p>
<blockquote>
<p>We are considering twuewand to combat the problem of distros enabling trust of hw cpu rngs which in some cases are broken and output repeating numbers, if malicious outright.</p>
</blockquote>
<p><a href="https://www.whonix.org/wiki/Dev/Entropy#RDRAND">distrusting RDRAND</a> should completely mitigate that.</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/12</link>
        <pubDate>Sun, 02 Feb 2020 18:28:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-12</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>I see. I asked the questions before you posted though:<br>
</p><aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/smuellerDD/jitterentropy-library/issues/16" target="_blank">github.com/smuellerDD/jitterentropy-library</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/smuellerDD/jitterentropy-library/issues/16" target="_blank">Questions on seeeding, value of similar utilities</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-02-02" data-time="18:20:59" data-timezone="UTC">06:20PM - 02 Feb 20 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/HulaHoop0" target="_blank">
          <img alt="HulaHoop0" src="https://avatars2.githubusercontent.com/u/55955185?v=4" class="onebox-avatar-inline" width="20" height="20">
          HulaHoop0
        </a>
      </div>
    </div>
  </div>
</div>

<div class="github-row">
  <p class="github-content">Hi Stephan. I was wondering if adding more entropy gathering daemons (haveged,twuewand and timer_entropyd) that use cpu jitter as their source...</p>
</div>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<aside class="quote no-group" data-username="Patrick" data-post="10" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>clrngd fork is by Van Heusden is truerand based.</p>
</blockquote>
</aside>
<p>sounds awfully similar to timer jitter concept?</p>
<blockquote>
<p>Clock randomness gathering daemon<br>
The Clock randomness gathering daemon gathers system randomness from fluctuations between different physical high-frequency clocks in a system. The randomness is tested with FIPS, and if this is successful, fed into the system entropy pool. It is especially useful for systems without real hardware random number generators.</p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/11</link>
        <pubDate>Sun, 02 Feb 2020 18:22:17 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-11</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="HulaHoop" data-post="8" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>True but we are looking for pool seeding exclusively with twuewand because of how fragile this time window is</p>
</blockquote>
</aside>
<p>I don’t think there’s a fragile time window. We’re <a href="https://www.whonix.org/wiki/Dev/Entropy#RDRAND">distrusting RDRAND</a> already. Kernel will <a href="https://www.whonix.org/wiki/Dev/Entropy#.2Fdev.2Frandom_vs._.2Fdev.2Furandom">block</a> <code>/dev/random</code> until ready and of sufficient quality. Any new entropy gathering daemons could block booting until systemd <code>sysinit.target</code> or something even earlier is done.</p>
<p>If we added extra entropy and credited it, the process will be faster but less secure. I don’t think we should make the process faster at the expense for higher risks. That would be possible but would require this solution to generate traction and peer review.</p>
<p>If we added extra entropy and credited it,</p>
<ul>
<li>in best case: entropy quality increases</li>
<li>in worst case: we waste CPU cycles, increase lines of Whonix source code, waste time and accomplish no entropy quality increase but also no entropy quality degradation.</li>
</ul>
<aside class="quote no-group" data-username="HulaHoop" data-post="9" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Well if we’re not crediting then the main usecase is gone.</p>
</blockquote>
</aside>
<ul>
<li>Main goal: improve entropy quality</li>
<li>Improving boot time (credit entropy): non-goal</li>
<li>Not worsening boot time so that nobody wants to use Whonix anymore: goal</li>
<li>Price to pay: slightly increased boot time / system load</li>
</ul>
<aside class="quote no-group" data-username="HulaHoop" data-post="9" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Let’s stick with better performing alternatives?</p>
</blockquote>
</aside>
<p>Yes, additionally but not as a replacement. If I remember right, somewhere you wrote “our best bet is to make use of as many entropy sources as we can”? I very much agree with that still.</p>
<p>twuewand is truerand based. twuewand could be replaced with a different implementation based on truerand but better performance.</p>
<p>timer_entropyd by Van Heusden though is not truerand based. At least I cannot find any reference trivially to that in the source code.</p>
<p>clrngd fork is by Van Heusden is truerand based.</p>
<p>In conclusion: 1 implementation based on truerand and other entropy sources based on other devices (preferably) or other algorithms.</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/10</link>
        <pubDate>Sun, 02 Feb 2020 18:18:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-10</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="7" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>refers to this as “credit the entropy” vs “not credit the entropy”.</p>
</blockquote>
</aside>
<p>Well if we’re not crediting then the main usecase is gone. Let’s stick with better performing alternatives?</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/9</link>
        <pubDate>Sun, 02 Feb 2020 18:01:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-9</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="7" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I am not sure. Does the kernel do its own debiasing? This is a critical question.</p>
</blockquote>
</aside>
<p>Not for third party sources which is why twuewand/dakarand goes thru so much trouble implementing it.</p>
<aside class="quote no-group" data-username="Patrick" data-post="7" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>[1] Also writing to /dev/random should never make it less secure. This is a kernel feature.</p>
</blockquote>
</aside>
<p>True but we are looking for pool seeding exclusively with twuewand because of how fragile this time window is</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/8</link>
        <pubDate>Sun, 02 Feb 2020 17:57:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-8</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="HulaHoop" data-post="5" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>The slow part is caused by debiasing which is absolutely necessary.</p>
</blockquote>
</aside>
<p>I am not sure. Does the kernel do its own debiasing? This is a critical question.</p>
<p><code>time twuewand --quiet --bytes 1024 --no-debias</code> requires just 11 seconds. That would make it fit (or more likely fit) for doing this by default during boot.</p>
<p>[1] Also writing to /dev/random should never make it less secure. This is a kernel feature.</p>
<p>Unless perhaps if a less secure source of entropy “gets credited”. (see below)</p>
<aside class="quote no-group" data-username="HulaHoop" data-post="5" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v4/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>Seeding the entropy pool != sending bits to /dev/random. The former is done with rndaddentropy:</p>
</blockquote>
</aside>
<p>I am also not sure about that.</p>
<ul>
<li><a href="https://web.archive.org/web/20191031233802/https://systemd.io/RANDOM_SEEDS.html">https://web.archive.org/web/20191031233802/https://systemd.io/RANDOM_SEEDS.html</a></li>
<li><a href="https://www.freedesktop.org/software/systemd/man/systemd-random-seed.service.html">https://www.freedesktop.org/software/systemd/man/systemd-random-seed.service.html</a></li>
<li><code>$SYSTEMD_RANDOM_SEED_CREDIT</code></li>
</ul>
<p>refers to this as “credit the entropy” vs “not credit the entropy”.</p>
<p>Quote <a href="http://man7.org/linux/man-pages/man4/random.4.html">http://man7.org/linux/man-pages/man4/random.4.html</a></p>
<blockquote>
<p>RNDADDENTROPY</p>
<p>Add some additional entropy to the input pool, incrementing<br>
the entropy count.  This differs from writing to /dev/random<br>
or /dev/urandom, which only adds some data but does not incre‐<br>
ment the entropy count.  The following structure is used:</p>
<pre><code>struct rand_pool_info {
   int    entropy_count;
   int    buf_size;
   __u32  buf[0];
};
</code></pre>
<p>Here entropy_count is the value added to (or subtracted from)<br>
the entropy count, and buf is the buffer of size buf_size<br>
which gets added to the entropy pool.</p>
</blockquote>
<p>I think it is safer to improve the actual entropy but not credit it. The rationale here is if whatever is being developed here won’t ever worsen entropy. The only requisite for that is that assumption [1] is actually true. If entropy was credited and the added entropy was flawed, the security could be actually worsened. Therefore I am following the same strategy that systemd is implementing - adding entropy but not crediting it - just to stay safe. Better for entropy but no gain in performance. [2]</p>
<hr>
<p>[2] No faster boot times and no better defense against entropy depletion. While the latter is probably rather theoretic nowadays with jitterentropy_rng and haveged already installed by default.</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/7</link>
        <pubDate>Sun, 02 Feb 2020 17:51:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-7</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Interesting info:</p>
<p>Finnie <a href="https://www.finnie.org/2012/08/14/twuewand-2-0-released/">refers</a> to Dan’s project which originally inspired him. Dan <a href="https://dankaminsky.com/2012/08/15/dakarand">cites</a> Finnie and van Heusden’s timer_entropyd as similar projects in this space.</p>
<p>I would therefore ask van Heusden if his program deals with seed entropy and if it’s output is ok without debiasing if it doesn’t have any. It seems more performant 500bits/s</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/6</link>
        <pubDate>Sun, 02 Feb 2020 17:38:45 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-6</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>The slow part is caused by debiasing which is absolutely necessary. Let’s see which one is the fastest and stick to that. Some techniques may need pycrypto.</p>
<blockquote>
<p>The most comprehensive method will be chosen, depending on what Python modules are available. They include:</p>
<pre><code>Von Neumann simple debiasing.
Output hashing with SHA256.
Kaminsky debiasing, an extension of Von Neumann. This requires pycrypto.
</code></pre>
</blockquote>
<p>Important note:</p>
<blockquote>
<p>You may also send twuewand output to /dev/random or /dev/urandom, but this merely “stirs the pot”, and does not directly add entropy to the pool.</p>
</blockquote>
<p>Seeding the entropy pool != sending bits to /dev/random. The former is done with rndaddentropy:</p>
<p><code>    twuewand $(($(cat /proc/sys/kernel/random/poolsize)/8)) | sudo rndaddentropy</code></p>
<blockquote>
<p><a href="https://pypi.org/project/twuewand/#description">On Linux systems, a small C program is also available called rndaddentropy. This is a wrapper for the RNDADDENTROPY ioctl, and is used for directly adding entropy to the Linux primary pool. Please see its manpage for more details.</a></p>
</blockquote>
<aside class="onebox stackexchange">
  <header class="source">
      <a href="https://stackoverflow.com/questions/17118705/using-rndaddentropy-to-add-entropy-to-dev-random" target="_blank">stackoverflow.com</a>
  </header>
  <article class="onebox-body">
      <a href="https://stackoverflow.com/users/1327774/benjamin-leinweber" target="_blank">
    <img alt="Benjamin Leinweber" src="https://www.gravatar.com/avatar/e48cbff424b5ffa260198af7284103e7?s=128&amp;d=identicon&amp;r=PG" class="thumbnail onebox-avatar" width="128" height="128">
  </a>
<h4>
  <a href="https://stackoverflow.com/questions/17118705/using-rndaddentropy-to-add-entropy-to-dev-random" target="_blank">Using RNDADDENTROPY to add entropy to /dev/random</a>
</h4>

<div class="tags">
  <strong>c, linux, embedded-linux, ioctl</strong>
</div>

<div class="date">
  asked by
  
  <a href="https://stackoverflow.com/users/1327774/benjamin-leinweber" target="_blank">
    Benjamin Leinweber
  </a>
  on <a href="https://stackoverflow.com/questions/17118705/using-rndaddentropy-to-add-entropy-to-dev-random" target="_blank">11:30PM - 14 Jun 13 UTC</a>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/rfinnie/twuewand/blob/master/doc/twuewand.md" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/rfinnie/twuewand/blob/master/doc/twuewand.md" target="_blank">rfinnie/twuewand/blob/master/doc/twuewand.md</a></h4>
<pre><code class="lang-md">% TWUEWAND(1) | twuewand
% Ryan Finnie
# NAME

twuewand - A TrueRand algorithm for generating entropy

# SYNOPSIS

twuewand [*options*] [*bytes*]

# DESCRIPTION

`twuewand` is software that creates hardware-generated random data.
It accomplishes this by exploiting the fact that the CPU clock and the RTC (real-time clock) are physically separate, and that time and work are not linked.

twuewand schedules a SIGALRM for a short time in the future, then begins flipping a bit as fast as possible.
When the alarm is delivered, the bit's state is recorded.
Von Neumann debiasing is (by default) performed on bit pairs, throwing out matching bit pairs, and using the first bit for non-matching bit pairs.
This reduces bias, at the expense of wasted bits.

</code></pre>

  This file has been truncated. <a href="https://github.com/rfinnie/twuewand/blob/master/doc/twuewand.md" target="_blank">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/5</link>
        <pubDate>Sun, 02 Feb 2020 17:13:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-5</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Unfortunately this is a very CPU intensive process.</p>
<hr>
<p>These settings were tested with entropy re-seeding in mind during a long running system.</p>
<p><code>twuewand --bytes 128</code></p>
<ul>
<li>
<code>1.5</code> minutes at <code>50</code>% CPU</li>
<li>
<code>32</code> minutes <code>1</code>% CPU</li>
</ul>
<p><code>twuewand --bytes 64</code></p>
<ul>
<li>
<code>17.5</code> minutes at <code>1</code>% CPU</li>
</ul>
<p>In theory entropy collection would be improved and therefore (without further action required) reflected in systemd’s usual <code>/var/lib/systemd/random-seed</code> <code>systemd-random-seed.service</code> mechanisms.</p>
<p>I think capping it at <code>1</code>% CPU makes sense to avoid running CPU at maximum (fan turns on, producing heat, noise) (and perhaps CPU or other hardware longevity?). This is to avoid wasting too much CPU resources for such a background process. When running multiple VMs, this might add up.</p>
<hr>
<p>These settings were tested with blocking at boot until entropy is gathered in mind.</p>
<p><code>twuewand --bytes 4096</code></p>
<ul>
<li>
<code>3</code> minutes <code>8</code> seconds at maximum CPU</li>
</ul>
<p><code>twuewand --bytes 1024</code></p>
<ul>
<li>
<code>50</code> seconds at maximum CPU</li>
</ul>
<p>System boot time might increase up to ~ <code>50</code> seconds. Maybe a little less due to systemd parallelization but not much (this has to happen before sysinit.target) and maybe a bit faster/slower depending on CPU speed and system load.</p>
<hr>
<p>Can write entropy directly to <code>/dev/random</code>? I.e.</p>
<pre><code>twuewand --quiet --bytes 1
twuewand --quiet --bytes 1 &gt;/dev/random
</code></pre>
<p>Or convert to hex first? I.e.</p>
<pre><code>twuewand --quiet --bytes 1 | xxd -pu
twuewand --quiet --bytes 1 | xxd -pu &gt;/dev/random
</code></pre>
<p>Or convert to bas64 first? I.e.</p>
<pre><code>twuewand --quiet --bytes 1 | base64
twuewand --quiet --bytes 1 | base64 &gt;/dev/random
</code></pre>
<p>Or can we stretch its output using sha512sums or something?</p>
<pre><code>twuewand --quiet --bytes 1 | sha512sum
</code></pre>
<blockquote>
<p><code>7d5467b2a25a07300b523705b6c26c13c4869ebdbe1c1ee038a6501211d8666bea7e238cf8afa5b73532bbd426291159b588b380c09fcb89a5824acb2fe0b385  -</code></p>
</blockquote>
<p>The latter might be useless at best.</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/4</link>
        <pubDate>Sun, 02 Feb 2020 16:25:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-4</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Debian packaging files but outdated since it’s for old perl version not for python version:<br>
<a href="https://github.com/finnix/twuewand-pkg-debian">https://github.com/finnix/twuewand-pkg-debian</a></p>
<p>It is part of</p>
<ul>
<li><a href="https://www.finnix.org">https://www.finnix.org</a></li>
<li><a href="https://launchpad.net/finnix">https://launchpad.net/finnix</a></li>
</ul>
<p><a href="https://distrowatch.com/table.php?distribution=finnix">https://distrowatch.com/table.php?distribution=finnix</a> lists it as “Status: Dormant (<a href="https://distrowatch.com/dwres.php?resource=faq#distrostatus">defined</a>)”.</p>
<p>Quote <a href="https://bugs.launchpad.net/finnix/+bug/1090513">https://bugs.launchpad.net/finnix/+bug/1090513</a></p>
<blockquote>
<p>With enhanced debiasing, twuewand now takes a noticeable amount of time to generate 8 bytes (over 1 second, compared with 0.125 seconds before). This process can be backgrounded, and as long as it’s being backgrounded, we can increase the amount of entropy generated to a better number. 128 bytes would be a good compromise of CPU work and total time (about 15 seconds in the background).</p>
</blockquote>
<ul>
<li>128 bits would be fast but is just 16 bytes.</li>
<li>1024 bits are 128 bytes.</li>
</ul>
<p>128 bytes are 1024 bits.</p>
<p>And also just “a good compromise”. Not maximum security.</p>
<p>Sized between 1024 bytes and 4096 bytes are being discussed.</p>
<ul>
<li>
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1386824"> Bug 1386824 </a> - random-seed size should be 4096 bytes in size</li>
<li><a href="https://github.com/lnykryn/systemd-rhel/pull/84"> random-seed: raise POOL_SIZE_MIN to 1024 (#1386824) #84 </a></li>
</ul>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/3</link>
        <pubDate>Sun, 02 Feb 2020 11:07:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-3</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
      <item>
        <title>twuewand - a truerand algorithm for generating entropy - Whonix integration</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="1" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Size of <code>/var/lib/systemd/random-seed</code> is 512 bytes.</p>
</blockquote>
</aside>
<p>See if 256 is a reasonable time? 128 is the minimum needed.</p>
<p>Linux ECC DRNG needs 128 bits to seed and the entropy pool apparently. in newest Linux designs. See this report by Stephan Muller (jitterentropy fame):</p>
<aside class="onebox pdf">
  <header class="source">
      <a href="https://www.bsi.bund.de/SharedDocs/Downloads/EN/BSI/Publications/Studies/LinuxRNG/LinuxRNG_EN.pdf?__blob=publicationFile&amp;v=19" target="_blank">bsi.bund.de</a>
  </header>
  <article class="onebox-body">
    <a href="https://www.bsi.bund.de/SharedDocs/Downloads/EN/BSI/Publications/Studies/LinuxRNG/LinuxRNG_EN.pdf?__blob=publicationFile&amp;v=19" target="_blank"><span class="pdf-onebox-logo"></span></a>
<h3><a href="https://www.bsi.bund.de/SharedDocs/Downloads/EN/BSI/Publications/Studies/LinuxRNG/LinuxRNG_EN.pdf?__blob=publicationFile&amp;v=19" target="_blank">LinuxRNG_EN.pdf</a></h3>

<p class="filesize">5.90 MB</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<hr>
<aside class="quote no-group" data-username="Patrick" data-post="1" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>python2 but maybe could be ported to python3.</p>
</blockquote>
</aside>
<p>I’m hearing reports of <a href="https://www.linuxcompatible.org/story/update-on-python-2-removal-in-debian-sid-bullseye/">python 2 deprecation</a> underway by stable next. Hopefully this can be worked out before then.</p>
<aside class="quote no-group" data-username="Patrick" data-post="1" data-topic="8880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Causes ~15% CPU on my system. Therefore probably no good idea to run it permanently. But there might be no need for that.</p>
</blockquote>
</aside>
<p>No need. Just for initial seeding would do.</p>
          <p><a href="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880/2</link>
        <pubDate>Sat, 01 Feb 2020 16:06:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8880-2</guid>
        <source url="http://forums.whonix.org/t/twuewand-a-truerand-algorithm-for-generating-entropy-whonix-integration/8880.rss">twuewand - a truerand algorithm for generating entropy - Whonix integration</source>
      </item>
  </channel>
</rss>
