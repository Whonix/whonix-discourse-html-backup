<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>host+vpn+vm1+whonixgateaway</title>
    <link>http://forums.whonix.org/t/host-vpn-vm1-whonixgateaway/8713</link>
    <description>Hi all , in this scenario are two vistual machines 
the first virtual machine is natted with host under vpn. this virtual has internet connection.
the first virtual has 2 adapters: nat(eth0) and &quot;not attached&quot;(eth1) adapter
the second virtual machine has bridge adapter(eth1)
All theese adapters are configured inside virtualbox settings.
sysctl.conf net.ipv4.forward=1

after ifconfig eth1 10.0.3.15 netmask 255.255.255.0 broadcast 10.0.3.255
ip route show
default via 10.0.2.2 dev eth0 proto static metric 100 
10.0.2.0/24 dev eth0 proto kernel scope link src 10.0.2.15 metric 100 
10.0.3.0/24 dev eth1 proto kernel scope link src 10.0.3.15

iptables-restore 
nat
-A PREROUTING --src 0.0.0.0 -j DNAT --to-destination 10.0.3.15
-A POSTROUTING --src 10.0.3.15 -j SNAT --to 0.0.0.0
-A POSTROUTING -j MASQUERADE
filter
-A INPUT -i eth1 -j ACCEPT
-A OUTPUT -o eth1 -j ACCEPT
-A FORWARD -i eth0 -j ACCEPT
-A FORWARD -i eth1 -j ACCEPT

after ip route add default via 10.0.3.1 dev eth1 proto static metric 101
ip route show
default via 10.0.3.1 dev eth1 proto static metric 101
default via 10.0.2.2 dev eth0 proto static metric 100 
10.0.2.0/24 dev eth0 proto kernel scope link src 10.0.2.15 metric 100 
10.0.3.0/24 dev eth1 proto kernel scope link src 10.0.3.15

the first virtual is debian , the second virtual is choosing between debian, windows and others distros.
after all this commands I can&#39;t have internet connection to second virtual machine. 
where is wrong?
please help me 
I am generous</description>
    <language>en</language>
    <lastBuildDate>Fri, 03 Jan 2020 03:54:09 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/host-vpn-vm1-whonixgateaway/8713.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>host+vpn+vm1+whonixgateaway</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Sounds crazy! What exactly are you trying to do? Enabling ip forwarding is asking for leaks</p>
          <p><a href="http://forums.whonix.org/t/host-vpn-vm1-whonixgateaway/8713/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/host-vpn-vm1-whonixgateaway/8713/2</link>
        <pubDate>Fri, 03 Jan 2020 03:54:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8713-2</guid>
        <source url="http://forums.whonix.org/t/host-vpn-vm1-whonixgateaway/8713.rss">host+vpn+vm1+whonixgateaway</source>
      </item>
      <item>
        <title>host+vpn+vm1+whonixgateaway</title>
        <dc:creator><![CDATA[tessy]]></dc:creator>
        <description><![CDATA[
            <p>Hi all , in this scenario are two vistual machines<br>
the first virtual machine is natted with host under vpn. this virtual has internet connection.<br>
the first virtual has 2 adapters: nat(eth0) and “not attached”(eth1) adapter<br>
the second virtual machine has bridge adapter(eth1)<br>
All theese adapters are configured inside virtualbox settings.<br>
sysctl.conf net.ipv4.forward=1</p>
<p>after ifconfig eth1 10.0.3.15 netmask 255.255.255.0 broadcast 10.0.3.255<br>
ip route show<br>
default via 10.0.2.2 dev eth0 proto static metric 100<br>
10.0.2.0/24 dev eth0 proto kernel scope link src 10.0.2.15 metric 100<br>
10.0.3.0/24 dev eth1 proto kernel scope link src 10.0.3.15</p>
<p>iptables-restore<br>
nat<br>
-A PREROUTING --src 0.0.0.0 -j DNAT --to-destination 10.0.3.15<br>
-A POSTROUTING --src 10.0.3.15 -j SNAT --to 0.0.0.0<br>
-A POSTROUTING -j MASQUERADE<br>
filter<br>
-A INPUT -i eth1 -j ACCEPT<br>
-A OUTPUT -o eth1 -j ACCEPT<br>
-A FORWARD -i eth0 -j ACCEPT<br>
-A FORWARD -i eth1 -j ACCEPT</p>
<p>after ip route add default via 10.0.3.1 dev eth1 proto static metric 101<br>
ip route show<br>
default via 10.0.3.1 dev eth1 proto static metric 101<br>
default via 10.0.2.2 dev eth0 proto static metric 100<br>
10.0.2.0/24 dev eth0 proto kernel scope link src 10.0.2.15 metric 100<br>
10.0.3.0/24 dev eth1 proto kernel scope link src 10.0.3.15</p>
<p>the first virtual is debian , the second virtual is choosing between debian, windows and others distros.<br>
after all this commands I can’t have internet connection to second virtual machine.<br>
where is wrong?<br>
please help me<br>
I am generous</p>
          <p><a href="http://forums.whonix.org/t/host-vpn-vm1-whonixgateaway/8713/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/host-vpn-vm1-whonixgateaway/8713/1</link>
        <pubDate>Thu, 02 Jan 2020 23:48:37 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-8713-1</guid>
        <source url="http://forums.whonix.org/t/host-vpn-vm1-whonixgateaway/8713.rss">host+vpn+vm1+whonixgateaway</source>
      </item>
  </channel>
</rss>
