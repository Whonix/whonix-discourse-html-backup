<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Boot Clock Randomization - bootclockrandomization - #13 by Patrick - Development - Whonix Forum</title>
    <meta name="description" content="@marmarek wrote: 

BTW why 0-5 is excluded in bootclockrandomization? I think this leaks some data. For example if attacker have already some selected set of data to correlate (like “all Tor users in area X”), he/she can&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../2200.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Boot Clock Randomization - bootclockrandomization&#39;" href="../2200.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/boot-clock-randomization-bootclockrandomization/2200/13" />
<meta name="twitter:url" content="https://forums.whonix.org/t/boot-clock-randomization-bootclockrandomization/2200/13" />
<meta property="og:title" content="Boot Clock Randomization - bootclockrandomization" />
<meta name="twitter:title" content="Boot Clock Randomization - bootclockrandomization" />
<meta property="og:description" content="Due to issues reported in Whonix-ws-16 fails to update due to timing issue…  How useful is Boot Clock Randomization in Qubes-Whonix Templates?  In other words, what is the chance of the VM time from inside a Qubes-Whonix Template being leaked to a Tor exit relay? (Local Clock Leaks)  Qubes Templates do not have “full” networking. APT is running through Qubes UpdatesProxy.   Some users might be running other networked applications from Qubes Templates. For example Operating System Software and Up..." />
<meta name="twitter:description" content="Due to issues reported in Whonix-ws-16 fails to update due to timing issue…  How useful is Boot Clock Randomization in Qubes-Whonix Templates?  In other words, what is the chance of the VM time from inside a Qubes-Whonix Template being leaked to a Tor exit relay? (Local Clock Leaks)  Qubes Templates do not have “full” networking. APT is running through Qubes UpdatesProxy.   Some users might be running other networked applications from Qubes Templates. For example Operating System Software and Up..." />
<meta property="article:published_time" content="2021-11-20T18:46:23+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../2200.html">Boot Clock Randomization - bootclockrandomization</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../2200.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-03-08T22:05:39Z' class='post-time'>
                March 8, 2016, 10:05pm
              </time>
              <meta itemprop='dateModified' content='2021-11-20T18:36:14Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/marmarek">@marmarek</a> <a href="../../../../external.html?link=https://groups.google.com/d/msg/qubes-devel/aN3IOv6JmKw/_XOwbV-EAgAJ">wrote</a>:</p>
<blockquote>
<p>BTW why 0-5 is excluded in bootclockrandomization? I think this leaks some data. For example if attacker have already some selected set of data to correlate (like “all Tor users in area X”), he/she can easily further narrow the search by eliminating those with time almost in sync (+/-5sec). Given popularity of NTP, which (when works) is pretty good at keeping the time in sync, this allows to easily eliminate all such users, leaving probably only those using Whonix, or maybe even more precise correlation…</p>
</blockquote>
<blockquote>
<p><a href="../../../../external.html?link=https://github.com/Whonix/bootclockrandomization/blob/77d3e620017dd067e1660e7bebf582f042484c47/usr/share/bootclockrandomization/start#L26-L27">https://github.com/Whonix/bootclockrandomization/blob/77d3e620017dd067e1660e7bebf582f042484c47/usr/share/bootclockrandomization/start#L26-L27</a></p>
</blockquote>
        </div>

        <meta itemprop='headline' content='Boot Clock Randomization - bootclockrandomization'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../whonix-ws-16-template-fails-to-update-due-to-timing-issue/12739/21.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../whonix-ws-16-template-fails-to-update-due-to-timing-issue/12739/21.html'>
                      <span itemprop='name'>whonix-ws-16 Template fails to update due to timing issue</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../2200.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-03-10T01:03:53Z' class='post-time'>
                March 10, 2016,  1:03am
              </time>
              <meta itemprop='dateModified' content='2016-03-10T01:03:53Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>boot clock randomization can indeed use some more discussion and scrutiny. Here is what it’s about…</p>
<p>(Trying to speak more generally, less Qubes specific here.)</p>
<p>Assumption: Lots of users are either</p>
<ul>
<li>a) using NTP and have usually correct quite precise clocks</li>
<li>b) using NTP and currently having a slow or fast clock about 1, 2, … etc. seconds</li>
<li>c) some have buggy setups and clocks that are far off</li>
</ul>
<p>There are various <a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/TimeSync#Local_Clock_Leaks">local clock leaks</a>. We try/recommend to prevent all of them, but it’s impossible to be sure we are aware of all of them.</p>
<p>Let’s take a not so uncommon use case. A user wants to visit a website that does not work in Tor Browser or requires some special plugin that is blocked by Tor Browser. In such cases users switch to other browsers such as iceweasel. And iceweasel will leak the local VM clock through javascript [and more].</p>
<p>Before sdwdate finished setting the clock after boot to unlink it from the host [in Qubes terms: from sys-net and other non-Tor VMs] or in case sdwdate fails, there is at least bootclockrandomization to archive that. [The long term is to block all networking but sdwdate until sdwdate is done, but it takes a while until we get there. -&gt; <a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/TimeSync#sdwdate-gui">sdwdate-gui</a>) [and for sdwdate fetches itself it is desireable to at least have bootclockrandomization just in case]</p>
<p><a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/TimeSync">In the wiki the only rationale explanation currently is the following.</a></p>
<blockquote>
<p>Using <a href="../../../../external.html?link=https://github.com/Whonix/bootclockrandomization">Boot Clock Randomization</a>, i.e. after boot, the clock is set randomly between 5 and 180 seconds  into the past or future. This is useful to enforce the design goal, that the host clock and Whonix-Workstation clock should always slightly differ. It’s also useful to obfuscate the clock when sdwdate itself is running, because naturally at this time, sdwdate hasn’t finished.</p>
</blockquote>
<ul>
<li>Unlinking is the keyword.</li>
<li>It’s sane to assume that a non-torified host or other VMs may leak the local clock. (<a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/TimeSync#Local_Clock_Leaks">local clock leaks</a>)</li>
<li>It’s also sane to assume, that a Whonix VM may leak the local clock. (<a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/TimeSync#Local_Clock_Leaks">local clock leaks</a>)</li>
<li>It’s purpose is to prevent correlation / anonymity set reduction by comparing a local clock leak from let’s say for example iceweasel in a non-Tor VM and a local clock leak from let’s say iceweasel from within a Whonix VM.</li>
</ul>
<p>Now, how big is group a), b) and c)? It’s impossible to say. I am not aware of any research of that and we neither have the resources to do that research.</p>
<p>Let’s assume only 10% of users have a clock that is 4 seconds slow. If boot clock randomization added only +1, it seems to me the anonymity set reduction may still work. Or if it randomly picked 0, it would not help at all.</p>
<p>However, it’s right, there is a point. For users using Whonix VMs and doing stuff suffering from some local clock leak, we may indeed add some of the group a) users “with a perfectly synced clock” to an artificial “unnecessarily” fingerprintable attribute that otherwise would not exist. On other other hand, users of group b) and c) would be better off. And since it’s public knowledge, that Whonix uses bootclockrandomization and sdwdate, all Whonix users can blend into the group of Whonix users. Thereby gain anonymity. And by the obfuscation of local clock state is leaked from within the VM, hopefully such clock correlation attacks become unattractive.</p>
<p>While I am at it… What is sdwdate good for then… Mostly useful for users of group b) and c), it sets the clock to a time that is as securely obtained and as correct as it can get. While still being independent from the host and other non-Tor VMs. And keeps it that way during long running sessions. The time set by sdwdate should then be similar enough for all Whonix users to make clock correlation attacks unattractive.</p>
<p>In an ideal world, we would require neither boot clock randomization nor sdwdate. The host would always boot would a perfectly synchronization time to begin with. And everyone would always have a perfectly synchronized time always. And online time syncing would be impossible to manipulate with by man-in-the-middle attacks.</p>
<p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/marmarek">@marmarek</a> wrote:</p>
<blockquote>
<p>For example if attacker have already some selected set of data to<br>
correlate (like “all Tor users in area X”), he/she can easily further<br>
narrow the search by eliminating those with time almost in sync<br>
(+/-5sec).</p>
</blockquote>
<p>Note, that this +/-5sec (emitted from within Whonix VMs) should only be observable at Tor exit relays, destination websites and onion servers. Not at ISP level. (ISP might observe local clock leaks by the host or other non-Tor VMs.)</p>
<p>//cc <a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/hulahoop">@HulaHoop</a></p>
        </div>

        <meta itemprop='headline' content='Boot Clock Randomization - bootclockrandomization'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/marmarek'><span itemprop='name'>marmarek</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../2200.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-03-10T01:54:39Z' class='post-time'>
                March 10, 2016,  1:54am
              </time>
              <meta itemprop='dateModified' content='2016-03-10T01:54:39Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>In an ideal world, we would require neither boot clock randomization nor sdwdate. The host would always boot would a perfectly synchronization time to begin with. And everyone would always have a perfectly synchronized time always. And online time syncing would be impossible to manipulate with by man-in-the-middle attacks.</p>
</blockquote>
<p>Yes.</p>
<blockquote>
<p><a class="mention" href="../../../../external.html?link=https://forums.whonix.org/u/marmarek">@marmarek</a> wrote:</p>
<blockquote>
<p>For example if attacker have already some selected set of data to<br>
correlate (like “all Tor users in area X”), he/she can easily further<br>
narrow the search by eliminating those with time almost in sync<br>
(+/-5sec).</p>
</blockquote>
<p>Note, that this +/-5sec (emitted from within Whonix VMs) should only be observable at Tor exit relays, destination websites and onion servers. Not at ISP level. (ISP might observe local clock leaks by the host or other non-Tor VMs.)</p>
</blockquote>
<p>Exactly the point. This gives negative correlation between data gathered<br>
at local ISP level, with data from target server/exit relays.<br>
Additionally, if you have some other way to link multiple sessions of<br>
the same person, <em>on the target server</em> (like using the same pseudonym),<br>
you’ll gain much in terms of host clock leak, just because this 10s<br>
range exclusion. Because every session (boot clock randomization run)<br>
gives you information about what 10s range is surely not the user host<br>
clock. After a while you’ll exclude pretty much of the whole ±180s<br>
range giving you quite precise approximation of host clock. In extreme<br>
situation, 18 sessions would be enough (each excluding some 10s range).<br>
Then you need to correlate it with ISP level data.</p>
<p>The point is, when you want to unlink Whonix time from host time, you<br>
need to use as little host time as possible. If you just<br>
choose randomly from ±180s, choosing offset of 0s would be<br>
indistinguishable from some other user randomly choosing offset of 30s<br>
and having host time -30s off (or any other value, as long as both are<br>
the same). But if you exclude ±5s range (or if fact any range), you<br>
help with reducing anonymity by excluding those “clearnet hosts” with time<br>
in ±5s range of the Whonix-ws leaked one.</p>
<p>Best Regards,<br>
Marek Marczykowski-Górecki<br>
Invisible Things Lab<br>
A: Because it messes up the order in which people normally read text.<br>
Q: Why is top-posting such a bad thing?</p>
        </div>

        <meta itemprop='headline' content='Boot Clock Randomization - bootclockrandomization'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/marmarek'><span itemprop='name'>marmarek</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../2200.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-03-10T10:50:50Z' class='post-time'>
                March 10, 2016, 10:50am
              </time>
              <meta itemprop='dateModified' content='2016-03-10T10:50:50Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>In other words:<br>
If the attacker knows that the time is strictly randomized (±180s without<br>
exclusions), any clock leak is untrustworthy; if the attacker knows that<br>
time is randomized by ±5-180s, some times can be excluded and in fact we<br>
leak more information that before.</p>
<p>Full randomization: true machine time has 361 equivalently possible values<br>
(approx; this doesn’t count miliseconds randomization, but it’s a passable simplification)<br>
Randomization with exclusion: true machine time has 350 equivalently<br>
possible values.</p>
<p>Assuming two times leaked, say 00:04:15 and 00:05:01,we have:<br>
full randomization: real time is between 00:02:01 and 00:07:15, that is, we<br>
have 314 possible times to choose from<br>
randomization with exclusion: real time is between 00:02:01 and 00:07:15,<br>
with the exclusion of periods 00:04:10-00:04:20 and 00:04:56-00:05:11,<br>
which gives 292 possible times.</p>
<p>In layman’s terms, it’s the difference between “I rolled a die and adjusted<br>
the result by 1,0 or -1, now I have a three” and “I rolled a die and<br>
adjusted the result by 1 or -1 and now I have a three”. Although the second<br>
method does never result in the starting roll, it actually leaks more, not<br>
less information about it.</p>
        </div>

        <meta itemprop='headline' content='Boot Clock Randomization - bootclockrandomization'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../2200.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-03-10T23:30:17Z' class='post-time'>
                March 10, 2016, 11:30pm
              </time>
              <meta itemprop='dateModified' content='2016-03-10T23:30:17Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Patrick I agree.</p>
<p>The choice is between passively leaking to exit relays and beyond that the WS clock is a little off to NTP vs leaking something very close to the host clock. The latter is much worse and protected against by the randomization. This creates an anonymity set (all Whonix users).</p>
<p>This is similar to how all Tor designed applications like TBB have a fingerprint different than everything else but provide the same safe defaults across the board.</p>
        </div>

        <meta itemprop='headline' content='Boot Clock Randomization - bootclockrandomization'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/marmarek'><span itemprop='name'>marmarek</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../2200.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-03-11T00:06:42Z' class='post-time'>
                March 11, 2016, 12:06am
              </time>
              <meta itemprop='dateModified' content='2016-03-11T00:06:42Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>The choice is between passively leaking to exit relays and beyond that the WS clock is a little off to NTP vs leaking something very close to the host clock. The latter is much worse and protected against by the randomization. This creates an anonymity set (all Whonix users).</p>
</blockquote>
<p>The attacker have no idea how close leaked time is to the host time.<br>
Unless you announce it.<br>
Following your reasoning to the extreme, adding always +3min to the host<br>
clock would be the best, because it would always be different than host<br>
clock. But in fact (together with public information about this<br>
implementation) it leaks precise host clock.</p>
<p>Just excluding -5-+5 range, doesn’t leak that precise information, but<br>
leaks more than real random offset (as explained in the previous<br>
message).</p>
<blockquote>
<p>This is similar to how all Tor designed applications like TBB have a fingerprint different than everything else but provide the same safe defaults across the board.</p>
</blockquote>
<p>This would make any sense only if everyone would have precisely the same<br>
host time (in which case time randomization wouldn’t be needed at<br>
all…). Otherwise it isn’t true that every user will look the same - it<br>
will still depend on host clock, which may be different.</p>
<p>Best Regards,<br>
Marek Marczykowski-Górecki<br>
Invisible Things Lab<br>
A: Because it messes up the order in which people normally read text.<br>
Q: Why is top-posting such a bad thing?</p>
        </div>

        <meta itemprop='headline' content='Boot Clock Randomization - bootclockrandomization'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../2200.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-03-11T00:18:33Z' class='post-time'>
                March 11, 2016, 12:18am
              </time>
              <meta itemprop='dateModified' content='2016-03-11T00:18:33Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Your suggestion is to:</p>
<ul>
<li>remove the minimum +/- 5 seconds thing</li>
<li>keep randomizing nanoseconds (we really don’t want a high res local clock leak to aid correlation)</li>
<li>otherwise keep boot clock randomization as is</li>
</ul>
<p>?</p>
        </div>

        <meta itemprop='headline' content='Boot Clock Randomization - bootclockrandomization'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/marmarek'><span itemprop='name'>marmarek</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../2200.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-03-11T00:28:09Z' class='post-time'>
                March 11, 2016, 12:28am
              </time>
              <meta itemprop='dateModified' content='2016-03-11T00:28:09Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>Your suggestion is to:</p>
<ul>
<li>remove the minimum +/- 5 seconds thing</li>
<li>keep randomizing nanoseconds (we really don’t want a high res local clock leak to aid correlation)</li>
<li>otherwise keep boot clock randomization as is</li>
</ul>
</blockquote>
<p>Yes, exactly.</p>
<p>Best Regards,<br>
Marek Marczykowski-Górecki<br>
Invisible Things Lab<br>
A: Because it messes up the order in which people normally read text.<br>
Q: Why is top-posting such a bad thing?</p>
        </div>

        <meta itemprop='headline' content='Boot Clock Randomization - bootclockrandomization'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../2200.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-03-13T00:50:25Z' class='post-time'>
                March 13, 2016, 12:50am
              </time>
              <meta itemprop='dateModified' content='2016-03-13T00:50:25Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Agreed!</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="../../../../external.html?link=https://github.com/Whonix/bootclockrandomization/commit/add0177c2dda409c6f5dcf224d62469ac2d6d83f" target="_blank" rel="nofollow noopener">github.com/Whonix/bootclockrandomization</a>
  </header>
  <article class="onebox-body">
      <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="../../../../external.html?link=https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="../../../../external.html?link=https://github.com/Whonix/bootclockrandomization/commit/add0177c2dda409c6f5dcf224d62469ac2d6d83f" target="_blank" rel="nofollow noopener">no longer exclude +/- 5 seconds range to avoid fingerprinting negative correlation</a>
</h4>

  <pre class="message" style="white-space: pre-wrap;">Thanks to @marmarek for the suggestion!
https://github.com/QubesOS/qubes-issues/issues/1764#issuecomment-195619793</pre>

<div class="date">
  by <a href="../../../../external.html?link=https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="../../../../external.html?link=https://github.com/Whonix/bootclockrandomization/commit/add0177c2dda409c6f5dcf224d62469ac2d6d83f" target="_blank" rel="nofollow noopener">12:50AM - 13 Mar 16</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>2 additions</strong>
  and <strong>2 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Boot Clock Randomization - bootclockrandomization'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../2200.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-03-31T11:24:52Z' class='post-time'>
                March 31, 2020, 11:24am
              </time>
              <meta itemprop='dateModified' content='2020-03-31T11:24:52Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>bootclockrandomization fails inside a systemd-nspawn chroot.</p>
<pre><code>Mar 31 06:51:19 host systemd[1]: Starting Boot Clock Randomization...
Mar 31 06:51:19 host start[102]: + 129 262440680
Mar 31 06:51:19 host start[102]: date: cannot set date: Operation not permitted
Mar 31 06:51:19 host start[102]: ERROR: exit_code: 1 | BASH_COMMAND: date --set "@$NEW_TIME.$NANOSECONDS" &gt; /dev
Mar 31 06:51:19 host systemd[1]: bootclockrandomization.service: Main process exited, code=exited, status=1/FAIL
Mar 31 06:51:19 host systemd[1]: bootclockrandomization.service: Failed with result 'exit-code'.
Mar 31 06:51:19 host systemd[1]: Failed to start Boot Clock Randomization.
</code></pre>
<p>Same holds true for sdwdate.</p>
<p>This is expected because Quote <a href="../../../../external.html?link=https://www.freedesktop.org/software/systemd/man/systemd-nspawn.html">https://www.freedesktop.org/software/systemd/man/systemd-nspawn.html</a></p>
<blockquote>
<p>The host’s network interfaces and the system <em>clock</em> may not be <em>changed</em> from within the <em>container</em>.</p>
</blockquote>
<p>What should bootclockrandomization do in that case? Ignore the error? I guess not a great solution.</p>
<p>Maybe not start in these cases at all using <code>ConditionVirtualization=!systemd-nspawn</code>?</p>
        </div>

        <meta itemprop='headline' content='Boot Clock Randomization - bootclockrandomization'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../2200.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-04-01T16:40:16Z' class='post-time'>
                April 1, 2020,  4:40pm
              </time>
              <meta itemprop='dateModified' content='2020-04-01T16:40:16Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The clock support in namespaces is a special case that was recently added this year:</p>
<p><a href="../../../../external.html?link=https://www.phoronix.com/scan.php?page=news_item&amp;px=Linux-Time-Namespace-Coming" class="onebox" target="_blank">https://www.phoronix.com/scan.php?page=news_item&amp;px=Linux-Time-Namespace-Coming</a></p>
        </div>

        <meta itemprop='headline' content='Boot Clock Randomization - bootclockrandomization'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../2200.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-11-20T18:39:19Z' class='post-time'>
                November 20, 2021,  6:39pm
              </time>
              <meta itemprop='dateModified' content='2021-11-20T18:39:19Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="../../../../external.html?link=https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">

      <a href="../../../../external.html?link=https://www.whonix.org/wiki/Boot_Clock_Randomization" target="_blank" rel="noopener" title="11:25PM - 29 September 2021">Whonix – 29 Sep 21</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:133/45;"><img src="../../../../external.html?link=https://www.whonix.org/w/images/a/ab/Randomizationclock321423.jpg" class="thumbnail" width="133" height="45"></div>

<h3><a href="../../../../external.html?link=https://www.whonix.org/wiki/Boot_Clock_Randomization" target="_blank" rel="noopener">Boot Clock Randomization</a></h3>

  <p>Boot Clock Randomization</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Boot Clock Randomization - bootclockrandomization'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../2200.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-11-20T18:46:23Z' class='post-time'>
                November 20, 2021,  6:46pm
              </time>
              <meta itemprop='dateModified' content='2021-11-20T18:54:35Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Due to issues reported in <a href="../../whonix-ws-16-template-fails-to-update-due-to-timing-issue/12739.html" class="inline-onebox">Whonix-ws-16 fails to update due to timing issue</a>…</p>
<p>How useful is Boot Clock Randomization in Qubes-Whonix Templates?</p>
<p>In other words, what is the chance of the VM time from inside a Qubes-Whonix Template being leaked to a Tor exit relay? (<a href="../../../../external.html?link=https://www.whonix.org/wiki/Dev/TimeSync#Local_Clock_Leaks">Local Clock Leaks</a>)</p>
<p>Qubes Templates do not have “full” networking. APT is running through Qubes UpdatesProxy.</p>
<ul>
<li>Some users might be running other networked applications from Qubes Templates. For example <a href="../../../../external.html?link=https://www.whonix.org/wiki/Operating_System_Software_and_Updates" class="inline-onebox">Operating System Software and Updates - Whonix</a> suggests:</li>
</ul>
<blockquote>
<p>Flatpak Update</p>
<p>This step is only required if the user previously manually installed any software using <a href="../../../../external.html?link=https://www.whonix.org/wiki/Install_Software#flatpak">flatpak</a>. Can be skipped otherwise.</p>
<p>Qubes-Whonix ™ Template:</p>
<pre><code>http_proxy=http://127.0.0.1:8082 flatpak update
</code></pre>
</blockquote>
<ul>
<li>I’ve also seen <code>http_proxy=http://127.0.0.1:8082 gpg --recv-keys [...]</code>.</li>
<li>Tor Browser downloader by Whonix developers (tb-updater).</li>
</ul>
        </div>

        <meta itemprop='headline' content='Boot Clock Randomization - bootclockrandomization'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../whonix-ws-16-template-fails-to-update-due-to-timing-issue/12739/22.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../whonix-ws-16-template-fails-to-update-due-to-timing-issue/12739/22.html'>
                      <span itemprop='name'>whonix-ws-16 Template fails to update due to timing issue</span>
                    </a>
                    <meta itemprop='position' content='5'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/deeplow'><span itemprop='name'>deeplow</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../2200.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-12-24T12:03:31Z' class='post-time'>
                December 24, 2021, 12:03pm
              </time>
              <meta itemprop='dateModified' content='2021-12-24T12:03:31Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The boot clock randomization was leading to some instability in the automated testing</p>
<aside class="onebox githubpullrequest">
  <header class="source">

      <a href="../../../../external.html?link=https://github.com/Whonix/bootclockrandomization/pull/2" target="_blank" rel="noopener nofollow ugc">github.com/Whonix/bootclockrandomization</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Pull Request">
    <svg width="60" height="60" class="github-icon" viewbox="0 0 12 16" aria-hidden="true"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="../../../../external.html?link=https://github.com/Whonix/bootclockrandomization/pull/2" target="_blank" rel="noopener nofollow ugc">Make delay_plus_or_minus overridable via env var</a>
    </h4>

    <div class="branches">
      <code>Whonix:master</code> ← <code>deeplow:delay-as-env-var</code>
    </div>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2021-12-24" data-time="09:38:58" data-timezone="UTC">09:38AM - 24 Dec 21 UTC</span>
      </div>

      <div class="user">
        <a href="../../../../external.html?link=https://github.com/deeplow" target="_blank" rel="noopener nofollow ugc">
          <img alt="deeplow" src="../../../../external.html?link=https://avatars.githubusercontent.com/u/47065258?v=4" class="onebox-avatar-inline" width="20" height="20">
          deeplow
        </a>
      </div>

      <div class="lines" title="1 commits changed 1 files with 1 additions and 1 deletions">
        <a href="../../../../external.html?link=https://github.com/Whonix/bootclockrandomization/pull/2/files" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+1</span>
          <span class="removed">-1</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">## The problem
Whonix tests are now non-deterministically failing in two cases:<span class="show-more-container"><a href="../../../../external.html?link=https://github.com/Whonix/bootclockrandomization/pull/2" target="_blank" rel="noopener nofollow ugc" class="show-more">…</a></span><span class="excerpt hidden">

1.  [failing in splitgpg tests](https://openqa.qubes-os.org/tests/26118#step/TC_10_Thunderbird_whonix-ws-16/1). I've nailed this down to the fact that the backwards time leap is messing up the dovecot imap service we now use with thunderbird 91+ testing.

2. It also seems to be the root cause of [invalid GPG signatures](https://openqa.qubes-os.org/tests/26805#step/TC_10_Thunderbird_whonix-ws-16/3)
    
    ![error_signature](https://user-images.githubusercontent.com/47065258/147340527-30b7cb1e-af75-4dad-9e5c-cd64f9a8ab3d.png)


## Proposed solution
Having this var overridable by an env var so in the test suites we can reduce it to something like 5 seconds

## Testing
I've ran locally 140 tests with the delay set to 5 instead of 180 and this made it pass 140/140 splitgpg tests locally (quite impressive!), whereas before it used to fail quite more often.</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Boot Clock Randomization - bootclockrandomization'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
