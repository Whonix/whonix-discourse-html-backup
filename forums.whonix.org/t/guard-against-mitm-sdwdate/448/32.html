<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Guard against MITM sdwdate - #32 by HulaHoop - Development - Whonix Forum</title>
    <meta name="description" content="Facts: 

-sdwdate is as safe as the trust put into centralized TLS CA authorities.  -This is by no means a sdwdate specific problem but an outcome of a broken CA model that has haunted the internet for years. 

-Viable s&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../4484658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../../c/news/21.html">NEWS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Guard against MITM sdwdate&#39;" href="../448.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/guard-against-mitm-sdwdate/448/32" />
<meta name="twitter:url" content="https://forums.whonix.org/t/guard-against-mitm-sdwdate/448/32" />
<meta property="og:title" content="Guard against MITM sdwdate" />
<meta name="twitter:title" content="Guard against MITM sdwdate" />
<meta property="og:description" content="Edit: corrected page number  We should discourage users from running NTP on the host because at best it leaks the host’s time itself through timestamps (page 3) and at worst its a vehicle for remotely exploiting the client’s code and skewing time which could deny Tor service.  We should probably combine consensus with the more accurate Hidden descriptors and use them instead of CA SSL, on both gateway and workstation. I will backtrack from that position once more:  -when not using kvmclock on th..." />
<meta name="twitter:description" content="Edit: corrected page number  We should discourage users from running NTP on the host because at best it leaks the host’s time itself through timestamps (page 3) and at worst its a vehicle for remotely exploiting the client’s code and skewing time which could deny Tor service.  We should probably combine consensus with the more accurate Hidden descriptors and use them instead of CA SSL, on both gateway and workstation. I will backtrack from that position once more:  -when not using kvmclock on th..." />
<meta property="article:published_time" content="2014-09-09T11:39:36+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="../448.html">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html">
          <img src="../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../448.html">Guard against MITM sdwdate</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../../external.html?link=http://schema.org/ListItem">
            <a href="../../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-07T21:58:46Z' class='post-time'>
                September 7, 2014,  9:58pm
              </time>
              <meta itemprop='dateModified' content='2014-09-07T21:58:46Z'>
          <span itemprop='position'>#20</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>N.B. that its not necessary for people to really change their use habits. If they run stuff on the host they will be ok for the most part, because nothing running on the gateway will give away the timestamps.</p>
<p>Once the gateway connects, then the workstation can use anondate to set a different time in case something on there leaks time to the web, in addition to another program on the host doing that too.</p>
<p>According to Nick OpenSSL 1.0.1f has timestamps disabled.</p>
<p>Situation A: typical user</p>
<p>-Host leaky, gateway not, Workstation leaky = user safe.<br>
Workstation can have time set safely. gateway does not betray time when restarting.</p>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-08T11:08:08Z' class='post-time'>
                September 8, 2014, 11:08am
              </time>
              <meta itemprop='dateModified' content='2014-09-08T11:08:08Z'>
          <span itemprop='position'>#21</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Off-topic: I am interested to move discussions to the next level. Many comments are just questions, that aren’t clear in the original proposal. Or something is missing the the original proposal, that can be fixed. So I was wondering, if one (me) could make some comments, and then you improve the original proposal. If these comments are covered and no dissent, the previous discussion can be deleted.</p>
<p>On-topic:</p>
<p>I haven’t fully through through it yet.</p>
<blockquote>-Fetching consensus data is one over Tor, ideally this can be done multiple times over different exits and the results compared as to stop an exit's ISP from doing the attack described above.</blockquote>
<p>I think there is a false assumption about mitm’s here.</p>
<pre><code class="lang-auto"></code></pre>
<p>If you keep changing Tor exit’s, you make a mitm only less likely for a fraction of that route. Marking the by:<br>
|</p>
<pre><code class="lang-auto"></code></pre>
<p>So.</p>
<pre><code class="lang-auto"></code></pre>
<p>I am not sure you were aware of this at time of writing or if that would change the proposal?</p>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-08T11:28:21Z' class='post-time'>
                September 8, 2014, 11:28am
              </time>
              <meta itemprop='dateModified' content='2014-09-08T11:28:21Z'>
          <span itemprop='position'>#22</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>By the way, don’t trash sdwdate too fast. When we implement a host operating system or Whonix host additions (<a href="../../../../external.html?link=https://github.com/Whonix/Whonix/issues/39">https://github.com/Whonix/Whonix/issues/39</a>), we’re back at the question on how to safely replace unauthenticated NTP. Not sure how much this changes your proposal.</p>
<p>[hr]</p>
<p>Set clock from verified Tor consensus only or also from unverified Tor consensus?</p>
<p>When only using verified Tor consensus, there is only a limited amount of replay attacks a mitm could do. Because only a limited amount of Tor consensus that have ever been signed.</p>
<p>How many different verified Tor consensus documents has a mitm at it’s disposal? It’s renewed every few hours and replaying is possible for months. And each consensus contains different date/time. I am wondering what would happen if a mitm in position of the directory authority’s ISP would make a different replay attack (sending a different version of Tor consensus) for each and every request. If that could be used to single out users somehow.</p>
<p>Using unverified Tor consensus would make this worse. An adversary could come up with an unlimited amount of Tor consensus date/time combinations.</p>
<p>[hr]</p>
<blockquote>- Let's assume that the host's clock falls within the accurate range that allows Tor to connect. And also that (Linux) users are following best protocol; by disabling timestamps on the host and not running anything on there. Because really if they are not doing this they are defeating a large part of the protection a hypervisor is about.</blockquote>
Missing here: users also do run non-torified applications such as browsers with javascript on the host, which leaks the clock.
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-08T12:35:45Z' class='post-time'>
                September 8, 2014, 12:35pm
              </time>
              <meta itemprop='dateModified' content='2014-09-08T12:35:45Z'>
          <span itemprop='position'>#23</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Also this does not take into account “security discussion” from Tails Time synching design:<br>
<a href="../../../../external.html?link=https://tails.boum.org/contribute/design/Time_syncing/#index1h2" class="onebox" target="_blank">https://tails.boum.org/contribute/design/Time_syncing/#index1h2</a></p>
<p>In essence, without sdwdate, both bridge/non-bridge users could be tricked into using an up to ~7 days old Tor consensus.</p>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-08T12:40:30Z' class='post-time'>
                September 8, 2014, 12:40pm
              </time>
              <meta itemprop='dateModified' content='2014-09-08T12:40:30Z'>
          <span itemprop='position'>#24</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>Off-topic: I am interested to move discussions to the next level. Many comments are just questions, that aren't clear in the original proposal. Or something is missing the the original proposal, that can be fixed. So I was wondering, if one (me) could make some comments, and then you improve the original proposal. If these comments are covered and no dissent, the previous discussion can be deleted.</blockquote>
<p>Thank you for being open-minded about this and willing to hear more. The only reason I’ve reopened this discussion is I’m confident that there is something new on this. I will re-post the last conclusion i reached and start speaking from that position:</p>
<blockquote>Actually you know what I think that anondate makes sense only on the workstation. the gateway doesn't need sdwdate/anondate. Sorry for the confusion, I'm sharing my thoughts as they develop. There are two main points being discussed.
<pre><code>anondate (can be safely used as the only trusted source) making it a great backstop in the event there is something on the workstation leaking timestamps and also on the host doing that as well. The security pitfalls of using it in the previous design, are avoided by rethinking how and on which vm its used on.

The gateway isn't leaking anything by using only the host's time to bootstrap off of as recommended. No danger in using the Host's time. If we decide to allow it to read the host's wall clock, then no gateway restart will even be needed because time is always synced and not allowed to drift. anondate or any form of timesyncing would not be needed on the gateway anymore. And the only place where it being used (the workstation) will have a trusted source with fresh data being fetched at all times with none of the fingerprinting or stale data attack implications that sending requests in the clear entailed: like the gateway design problems you pointed out before.&lt;/blockquote&gt;
</code></pre>
<hr>
<blockquote>user &lt;-&gt; Tor network &lt;-&gt; Tor exit &lt;-&gt; ISP of Tor exit &lt;-&gt; ISP of destination server &lt;-&gt; destination server</blockquote>
<blockquote>If you keep changing Tor exit's, you make a mitm only less likely for a fraction of that route. Marking the by:</blockquote>
<p>Alright so in the situation that anondate is depended on for use in just the workstation, the damage the attacker can do by feeding outdated consensus is limited to getting a false time. It would not affect or deny service to the gateway in any form.</p>
<p>As in the current model of the sdwdate, getting a consensus on the consensus data (pardon the pun) curbs the damage an attacker does, because a certain time interval is not used unless, say, some number of requests X out of Y total to a Directory Authority agrees.</p>
<p>Come to think of it, these traffic requests by anondate are actually not distinguishable any more from any Tor client out there.</p>
<p>The fact that the gateway is using accurate host time, means that no problems with connections to the Hidden Service server will happen.</p>
<blockquote>By the way, don't trash sdwdate too fast. When we implement a host operating system or Whonix host additions (https://github.com/Whonix/Whonix/issues/39), we're back at the question on how to safely replace unauthenticated NTP. Not sure how much this changes your proposal.</blockquote>
<p>I’m sorry if I had given you that impression. It is not my intention to trash it and given the amount of effort you’ve taken in designing and maintaining it, I should have made that more clear in my comments. I am examining the current Whonix design in light of recent developments (for example disabled Timestamps) and what they allow us to improve.</p>
<blockquote>Set clock from verified Tor consensus only or also from unverified Tor consensus?
<p>When only using verified Tor consensus, there is only a limited amount of replay attacks a mitm could do. Because only a limited amount of Tor consensus that have ever been signed.</p>
</blockquote>
<p>Verified only, there is no reason to do otherwise.</p>
<blockquote>How many different verified Tor consensus documents has a mitm at it's disposal? It's renewed every few hours and replaying is possible for months. And each consensus contains different date/time. I am wondering what would happen if a mitm in position of the directory authority's ISP would make a different replay attack (sending a different version of Tor consensus) for each and every request. If that could be used to single out users somehow.</blockquote>
<p>We can use a sample size of 5-10, or something similar to the number of requests sdwdate makes at the moment. They may differ but there is a certain widely agreed upon range at any given time. We can calibrate against this range and set it somewhere in the middle of the average of all values fetched. The solution to avoiding bad ISPs is to diversify connection to Directory Authorities through different circuits/exit nodes.</p>
<p>For your Whonix Host implementation, its best to ship it with NTP disabled and no time syncing mechanism. No before you dismiss it, here’s why:</p>
<ul>
<li>
<p>Computer BIOSs keep track of time across reboots by having their own internal clock. That allows all computers to keep track of time across reboots instead of resetting them.</p>
</li>
<li>
<p>A timesyncing mechanism is not really needed. All we care about is that the host time is set roughly accurate enough (manually if needed) to enable Tor to connect.</p>
</li>
<li>
<p>A time syncing mechanism on the host entails a risk of remote attack if its using anything.</p>
</li>
<li>
<p>anondate on the host is not needed and would probably have more cons than pros: allowing a local ISP-level adversary to influence time.</p>
</li>
<li>
<p>Consider this situation: Whonix Host is being used to communicate with the clearnet and a user runs software with some obscure protocol that leaks time on the Host and in the workstation. here’s what happens if we have Whonix vms setup in a (Whonix host no timesync &amp; NTP disabled, gateway uses kvmclock, workstation uses anondate):</p>
</li>
</ul>
<ol>
<li>
<p>The gateway can connect to Tor with no problems. It doesn’t leak anything and so it doesn’t need a timesyncing mechanism.</p>
</li>
<li>
<p>Anondate on the workstation prevents a user from shooting themselves in the foot when running software in the manner discussed above as the Guest’s time is set differently than the host’s</p>
</li>
<li>
<p>From Whonix Host perspective: No denial of service attack on Tor due to an outdated consensus fed, no preplay attacks either. No remote exploit of any timesyncing client whether secure or not.</p>
</li>
</ol>
</blockquote>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-08T12:44:55Z' class='post-time'>
                September 8, 2014, 12:44pm
              </time>
              <meta itemprop='dateModified' content='2014-09-08T12:44:55Z'>
          <span itemprop='position'>#25</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>Also this does not take into account "security discussion" from Tails Time synching design:
https://tails.boum.org/contribute/design/Time_syncing/#index1h2
<p>In essence, without sdwdate, both bridge/non-bridge users could be tricked into using an up to ~7 days old Tor consensus.</p>
</blockquote>
<p>We are not using anondate on the gateway so I would say this attack is not really relevant to Whonix specifically. A malicious bridge is a problem for any Tor user. This changes the discussion from : setting time on the workstation in a secure manner, to: How do we protect against a malicious bridge?</p>
<p>An interesting problem but another one entirely</p>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-08T12:51:12Z' class='post-time'>
                September 8, 2014, 12:51pm
              </time>
              <meta itemprop='dateModified' content='2014-09-08T12:51:12Z'>
          <span itemprop='position'>#26</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>[quote]
<pre><code>Also this does not take into account "security discussion" from Tails Time synching design:
https://tails.boum.org/contribute/design/Time_syncing/#index1h2

In essence, without sdwdate, both bridge/non-bridge users could be tricked into using an up to ~7 days old Tor consensus.[/quote]
</code></pre>
<p>We are not using anondate on the gateway so I would say this attack is not really relevant to Whonix specifically. A malicious bridge is a problem for any Tor user. This changes the discussion from : setting time on the workstation in a secure manner, to: How do we protect against a malicious bridge?</p>
<p>An interesting problem but another one entirely</p>
</blockquote>
<p>Actually this is very interesting problem. if anything, whonix is in a unique position to provide more protection against a malicious bridge than any one level anonymity platform can. Now I would modify the proposal to include anondate on Whonix gateway, not as a way to set time, but as a sanity check for consensus data fetched from a bridge. it would fetch its data over Tor of course.</p>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-08T13:06:54Z' class='post-time'>
                September 8, 2014,  1:06pm
              </time>
              <meta itemprop='dateModified' content='2014-09-08T13:06:54Z'>
          <span itemprop='position'>#27</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>Actually you know what I think that anondate makes sense only on the workstation.</blockquote>
No sdwdate on workstation -&gt; using anondate -&gt; end up with a Whonix specific web fingerprintint (Tor Browser / javascript leaks it).
<blockquote>the gateway doesn't need sdwdate/anondate.
<p>No danger in using the Host’s time. If we decide to allow it to read the host’s wall clock, then no gateway restart will even be needed because time is always synced and not allowed to drift.</p>
</blockquote><br>
No sdwdate on the gateway and using host time -&gt; host time could be forged -&gt; could end up using an up to ~7 days old consensus
<p>[hr]</p>
<p>Please move Whonix host time discussion into a separate thread or things get muddled up here.</p>
<p>[hr]</p>
<p>Either I am confused or somehow still not convinced this is a good idea. Maybe we’ll figure out.</p>
<p>But what about this… It can be done in parallel to this discussion…<br>
Whonix sdwdate and Tails htpdate are not much different in this regard.<br>
Neither are Whonix anondate or Tails tordate.<br>
So could you wipe any reference to Whonix and/or VMs from your proposal? Completely forget about Whonix for a moment? Think like a Tails dev? Then propose this to Tails developers?<br>
Before doing some grave design change as this, it would be useful to read their opinion so or so.<br>
And with a Tails specific proposal for improvement, they may think this through as well, so we’re not overlooking something.</p>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-08T23:11:55Z' class='post-time'>
                September 8, 2014, 11:11pm
              </time>
              <meta itemprop='dateModified' content='2014-09-08T23:11:55Z'>
          <span itemprop='position'>#28</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Sounds good. I’ll do it later when I have the idea on the best approach for this figured out. Its not quite there yet, but keep an eye on this.</p>
<p>After how much the TAILS devs contributed to us as you mention, I would like to give back something to them.</p>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-08T23:43:15Z' class='post-time'>
                September 8, 2014, 11:43pm
              </time>
              <meta itemprop='dateModified' content='2014-09-08T23:43:15Z'>
          <span itemprop='position'>#29</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I was likely wrong about something.</p>
<p>You wrote:</p>
<blockquote>Multiple fetches over different exits are a good idea as a way to guard against malicious exit IPs and to have a consensus on what the consensus should look like.</blockquote>
<p>Tails design:</p>
<blockquote>If not using a bridge: Tails starts without a cached consensus, so its Tor client starts by connecting directly to a directory authority (and not to a directory mirror / entry guard), so feeding you an old consensus requires the attacker either to break SSL, or to control the directory authority your Tor client connects to.</blockquote>
<p>So if Tor when not using a bridge and/or python-stem [as a torified application] uses SSL to download the consensus, replay attacks aren’t possible. And since Tor doesn’t use CA’s, downloading it multiple times seems not justified. What do you think?</p>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-09T01:50:16Z' class='post-time'>
                September 9, 2014,  1:50am
              </time>
              <meta itemprop='dateModified' content='2014-09-09T01:50:16Z'>
          <span itemprop='position'>#30</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>So if Tor when not using a bridge and/or python-stem [as a torified application] uses SSL to download the consensus, replay attacks aren't possible. And since Tor doesn't use CA's, downloading it multiple times seems not justified. What do you think?</blockquote>
<p>Yes that is the logical conclusion.</p>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-09T01:59:19Z' class='post-time'>
                September 9, 2014,  1:59am
              </time>
              <meta itemprop='dateModified' content='2014-09-09T01:59:19Z'>
          <span itemprop='position'>#31</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>We should probably combine consensus with the more accurate Hidden descriptors and use them instead of CA SSL, on both gateway and workstation.</p>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-09T11:39:36Z' class='post-time'>
                September 9, 2014, 11:39am
              </time>
              <meta itemprop='dateModified' content='2014-09-09T11:39:36Z'>
          <span itemprop='position'>#32</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><span class="bbcode-b">Edit:</span> corrected page number</p>
<p>We should discourage users from running NTP on the host because at best it <a href="../../../../external.html?link=http://caia.swin.edu.au/talks/CAIA-TALK-080728A.pdf" data-bbcode="true">leaks the host’s time itself through timestamps</a> (page 3) and at worst its a vehicle for remotely exploiting the client’s code and skewing time which could deny Tor service.</p>
<blockquote>We should probably combine consensus with the more accurate Hidden descriptors and use them instead of CA SSL, on both gateway and workstation.</blockquote>
<p>I will backtrack from that position once more:</p>
<p>-when not using kvmclock on the gateway and the gateway clock incorrect after suspend, the only viable option is to fetch a verified consensus in the clear and set from that because Tor logically wouldn’t be able to connect in this situation.</p>
<p>-By setting sdwate to use only verified consensus we make it safe to fetch the data in the clear meaning that not even replay attacks are possible from the ISP. (SSL and Directory Authority keys make it impossible as you brought up).</p>
<p>-The only problem with this approach is the fingeprintable nature of it, because sdwdate would need to do this on a regular basis if the user suspends their machine.</p>
<hr>
<ul>
<li>Because its better and safer to disable NTP on the host, setting the gateway to use kvmclock instead and avoiding sdwdate on the gateway should improve things in a way.</li>
</ul>
<p>tl;dr</p>
<p>A secure but fingerprinted technique to start Tor because we aren’t using kvmclock vs. using kvmclock and disabling NTP - which isn’t so bad because of the potential cons of keeping it running.</p>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../does-ntp-leak-the-hosts-time/486.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../does-ntp-leak-the-hosts-time/486.html'>
                      <span itemprop='name'>Does NTP leak the host&#39;s time?</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../../ntp-possible-skew-per-day-month-year/487.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../../ntp-possible-skew-per-day-month-year/487.html'>
                      <span itemprop='name'>NTP possible skew per day, month, year</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-09T11:46:26Z' class='post-time'>
                September 9, 2014, 11:46am
              </time>
              <meta itemprop='dateModified' content='2014-09-09T11:46:26Z'>
          <span itemprop='position'>#33</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>This needs research, but it may turn out that Tor clients regularly download consensus data from the Directory authorities.</p>
<p>That would make it an okay approach: set an acceptable time for Tor to connect from verified consensus, then adjust it to me more accurate using HS Descriptors.</p>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-09T11:54:16Z' class='post-time'>
                September 9, 2014, 11:54am
              </time>
              <meta itemprop='dateModified' content='2014-09-09T11:54:16Z'>
          <span itemprop='position'>#34</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote> Does Tor download consensus data regularly after first use?
 yes
 arma: Does using verified consensus mean that replay attacks are not possible?
 your clock has to be somewhat right. in that case yes.
 ok ty</blockquote>
<p>It should be safe to go down the anondate + HS route. It wasn’t an unusual reaction that could be fingerprinted after all.</p>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-09T18:08:20Z' class='post-time'>
                September 9, 2014,  6:08pm
              </time>
              <meta itemprop='dateModified' content='2014-09-09T18:08:20Z'>
          <span itemprop='position'>#35</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Please keep working on this. But it seems there is quite a lot more to do.</p>
<aside class="quote" data-post="34" data-topic="448">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/h/edb3f5/40.png" class="avatar"> HulaHoop:</div>
<blockquote>
<p>It should be safe to go down the anondate + HS route.</p>
</blockquote>
</aside>
<p>We need some more opinions about how (not) bad it would be to use an up to ~18 hours old Tor consensus. And more.</p>
<p>Roadmap:</p>
<ol>
<li>Are you still up to do the older Tails-only specific proposal <a href="../../../../external.html?link=https://www.whonix.org/forum/index.php/topic,470.msg3880.html#msg3880">https://www.whonix.org/forum/index.php/topic,470.msg3880.html#msg3880</a>?</li>
<li>Would it be possible be make this new one (anondate + HS route) a Tails-only specific proposal? Would you be up for this as well?</li>
<li>Can we prepare a post for tor-talk to ask as Whonix-agnostic-as-possible “extract time from Hidden Service Descriptors” question about if <a href="../../../../external.html?link=https://github.com/Whonix/Whonix/issues/318">https://github.com/Whonix/Whonix/issues/318</a> could work as imagined and if it would be sane?</li>
<li>Can we prepare a question for tor-talk to ask as Whonix-agnostic-as-possible how (not) bad it would be to use an up to ~18 hours old Tor consensus.?</li>
</ol>
<blockquote>It wasn't an unusual reaction that could be fingerprinted after all.</blockquote>
It would be useful to understand why Tails' tordate is fingerprintable - because when Tails starts while the clock is too much off, it sets system clock to what tordate thinks, then restarts Tor and re-downloads the consensus.
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-09T20:49:51Z' class='post-time'>
                September 9, 2014,  8:49pm
              </time>
              <meta itemprop='dateModified' content='2014-09-09T20:49:51Z'>
          <span itemprop='position'>#36</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Off-topic:<br>
I would like to make the scope of one thread as narrow as possible to prevent muddling up too many points and forgetting about something. Opened two topics related to NTP.</p>
<ul>
<li><a href="../../../../external.html?link=https://www.whonix.org/forum/index.php/topic,511.0.html">https://www.whonix.org/forum/index.php/topic,511.0.html</a></li>
<li><a href="../../../../external.html?link=https://www.whonix.org/forum/index.php/topic,512.0.html">https://www.whonix.org/forum/index.php/topic,512.0.html</a></li>
</ul>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-10T00:36:23Z' class='post-time'>
                September 10, 2014, 12:36am
              </time>
              <meta itemprop='dateModified' content='2014-09-10T00:36:23Z'>
          <span itemprop='position'>#37</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>1) Are you still up to do the older Tails-only specific proposal https://www.whonix.org/forum/index.php/topic,470.msg3880.html#msg3880?
2) Would it be possible be make this new one (anondate + HS route) a Tails-only specific proposal? Would you be up for this as well?
3) Can we prepare a post for tor-talk to ask as Whonix-agnostic-as-possible "extract time from Hidden Service Descriptors" question about if https://github.com/Whonix/Whonix/issues/318 could work as imagined and if it would be sane?
4) Can we prepare a question for tor-talk to ask as Whonix-agnostic-as-possible how (not) bad it would be to use an up to ~18 hours old Tor consensus.?</blockquote>
<ol>
<li>No I have improved it considerably after that time.</li>
<li>Sure. This is my plan to have something better that we can both benefit from. I am up for writing a proposal here first which you can vet and I post. I am almost done addressing the few quirks you brought up.</li>
<li>Yes its important this is discussed with them too. I will write something/clean up what I wrote there and ask them.</li>
<li>Yes that too.</li>
</ol>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-10T00:58:44Z' class='post-time'>
                September 10, 2014, 12:58am
              </time>
              <meta itemprop='dateModified' content='2014-09-10T00:58:44Z'>
          <span itemprop='position'>#38</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>It would be useful to understand why Tails' tordate is fingerprintable - because when Tails starts while the clock is too much off, it sets system clock to what tordate thinks, then restarts Tor and re-downloads the consensus.</blockquote>
<p>Right this is a signalling pattern that is being fingerprinted.</p>
<p>Tor’s failed connection attempt because time on the guest is virtually frozen at that moment during a suspend because a guest by design cannot know anything about host power events.</p>
<p>The solution:</p>
<p>Have some way, for example Systemd, or something similar if Debian stable doesn’t have it yet, constantly monitor the Tor process’ connection, and if it detects any drops, it would block Tor from reconnection attempts until sdwdate fetches a fresh valid consensus and sets the time appropiately.</p>
<p>The drop in our usecase, will be caused by suspending or shutting down the machine.</p>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../../external.html?link=https://forums.whonix.org/u/HulaHoop'><span itemprop='name'>HulaHoop</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../448.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-09-10T01:19:40Z' class='post-time'>
                September 10, 2014,  1:19am
              </time>
              <meta itemprop='dateModified' content='2014-09-10T01:19:40Z'>
          <span itemprop='position'>#39</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Posted it on git to keep things from being buried here.</p>
        </div>

        <meta itemprop='headline' content='Guard against MITM sdwdate'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="../448.html">← previous page</a></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
