<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Whonix AppArmor Profiles Development Discussion - AppArmor - Whonix Forum</title>
    <meta name="description" content="This thread is a continuation of https://www.whonix.org/forum/index.php/topic,24.0.html, with a more appropriate subject description. The profiles are in https://www.whonix.org/wiki/AppArmor. Anyone ready to use them for&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="108af4d.html?page=5" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Whonix AppArmor Profiles Development Discussion&#39;" href="108.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/whonix-apparmor-profiles-development-discussion/108?page=5" />
<meta name="twitter:url" content="https://forums.whonix.org/t/whonix-apparmor-profiles-development-discussion/108?page=5" />
<meta property="og:title" content="Whonix AppArmor Profiles Development Discussion" />
<meta name="twitter:title" content="Whonix AppArmor Profiles Development Discussion" />
<meta property="og:description" content="No more denied messages.  Only issue I am experiencing is, when I run ‚Äúsudo service sdwdate restart‚Äù with the sdwdate profile enabled, I don‚Äôt see the timesync gui anymore. Maybe I see the gui but the progress meter doesn‚Äôt move. Or the progress meter moves, but it doesn‚Äôt close when it reached 100%. This doesn‚Äôt happen when the sdwdate profile is disabled. Without any denied messages, any idea how to fix it?" />
<meta name="twitter:description" content="No more denied messages.  Only issue I am experiencing is, when I run ‚Äúsudo service sdwdate restart‚Äù with the sdwdate profile enabled, I don‚Äôt see the timesync gui anymore. Maybe I see the gui but the progress meter doesn‚Äôt move. Or the progress meter moves, but it doesn‚Äôt close when it reached 100%. This doesn‚Äôt happen when the sdwdate profile is disabled. Without any denied messages, any idea how to fix it?" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="154 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="50 ‚ù§" />
<meta property="article:published_time" content="2014-03-12T22:39:41+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="108fdb0.html?page=4">
        <link rel="next" href="108c575.html?page=6">

    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="108.html">Whonix AppArmor Profiles Development Discussion</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/apparmor/14.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #12A89D'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>AppArmor</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-12T22:39:41Z' class='post-time'>
                March 12, 2014, 10:39pm
              </time>
              <meta itemprop='dateModified' content='2014-03-12T22:39:41Z'>
          <span itemprop='position'>#81</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>No more denied messages.</p>
<p>Only issue I am experiencing is, when I run ‚Äúsudo service sdwdate restart‚Äù with the sdwdate profile enabled, I don‚Äôt see the timesync gui anymore. Maybe I see the gui but the progress meter doesn‚Äôt move. Or the progress meter moves, but it doesn‚Äôt close when it reached 100%. This doesn‚Äôt happen when the sdwdate profile is disabled. Without any denied messages, any idea how to fix it?</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-13T20:23:49Z' class='post-time'>
                March 13, 2014,  8:23pm
              </time>
              <meta itemprop='dateModified' content='2014-03-13T20:23:49Z'>
          <span itemprop='position'>#82</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Some new denied messages with ‚Äòtimesync --verbose‚Äô. The profile was updated.</p>
<p>I am still trying to find out why the gui is not showing with ‚Äúsudo service sdwdate restart‚Äù when it is enforced. So far, I had not exactly the same symptoms as you have.</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-13T21:09:24Z' class='post-time'>
                March 13, 2014,  9:09pm
              </time>
              <meta itemprop='dateModified' content='2014-03-13T21:09:24Z'>
          <span itemprop='position'>#83</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I installed gnome-keyring, now I am getting this.</p>
<pre><code class="lang-auto"></code></pre>
<p>And this.</p>
<pre><code class="lang-auto"></code></pre>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-13T22:13:42Z' class='post-time'>
                March 13, 2014, 10:13pm
              </time>
              <meta itemprop='dateModified' content='2014-03-13T22:13:42Z'>
          <span itemprop='position'>#84</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Normally, all the pam_xxx.so files are in /lib/i386-linux-gnu/security/. Added ‚Äò/lib/security/* mr,‚Äô in sdwdate, time sync and whonixcheck, for safety.</p>
<p>Edit. With a typo i am correcting now‚Ä¶</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-13T22:17:07Z' class='post-time'>
                March 13, 2014, 10:17pm
              </time>
              <meta itemprop='dateModified' content='2014-03-13T22:17:07Z'>
          <span itemprop='position'>#85</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Correction done.</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-14T08:06:19Z' class='post-time'>
                March 14, 2014,  8:06am
              </time>
              <meta itemprop='dateModified' content='2014-03-14T08:06:19Z'>
          <span itemprop='position'>#86</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>Only issue I am experiencing is, when I run "sudo service sdwdate restart" with the sdwdate profile enabled, I don't see the timesync gui anymore. Maybe I see the gui but the progress meter doesn't move. Or the progress meter moves, but it doesn't close when it reached 100%. This doesn't happen when the sdwdate profile is disabled. Without any denied messages, any idea how to fix it?</blockquote>
<p>It seems that the normal behavior when running ‚Äúsudo service sdwdate restart‚Äù is that it does not show the timsesync progress window. There is no reference to timesync in the sdwdate scripts in /etc/init.d/ or /usr/bin/, and sdwdate on its own does not display anything.</p>
<p>From the test I have done, when you start or reboot the workstation, the gui will show after ‚Äúsudo service sdwdate restart‚Äù  only during the first sleeping period. After that, the gui is no longer displayed, regardless of the apparmor mode (enforce or disable). Just a guess, but it could have something to do with sdwdate running as a daemon and timesync on its own, in parallel. Aren‚Äôt both basically achieving the same thing?</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-14T12:56:55Z' class='post-time'>
                March 14, 2014, 12:56pm
              </time>
              <meta itemprop='dateModified' content='2014-03-14T12:56:55Z'>
          <span itemprop='position'>#87</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>sdwdate also needs read access to /var/lib/sdw_error.</p>
<blockquote>It seems that the normal behavior when running "sudo service sdwdate restart" is that it does not show the timsesync progress window.</blockquote>
<p>You can test on a fresh Whonix-Workstation 8 without any AppArmor profiles, if you run ‚Äúsudo service sdwdate‚Äù restart you always get a progress bar window and the progress bar moves.</p>
<blockquote>There is no reference to timesync in the sdwdate scripts in /etc/init.d/ or /usr/bin/, and sdwdate on its own does not display anything.</blockquote>
<p>/etc/init.d/sdwdate and /usr/bin/sdwdate indeed do not include any GUI specific code. This is on purpose. The GUI code is implemented in /etc/sdwdate.d/31_timesync_plugin.</p>
<p>sdwdate <code>eval</code>uates the contents of $DISPATCH_PRE, which is for example ‚Äú/usr/lib/whonix/timesync_pre --autostart --mode startup‚Äù.</p>
<blockquote>From the test I have done, when you start or reboot the workstation, the gui will show after "sudo service sdwdate restart"  only during the first sleeping period.</blockquote>
This is on purpose. This has to do with --mode startup vs. --mode daemon. When sdwdate starts after reboot or after sdwdate was upgraded by apt-get, $SDW_MODE will be startup. After the first run, next $SDW_MODE will be daemon. This because the user is advised to wait until sdwdate succeeded after the first boot of Whonix for better anonymity. When exactly subsequent runs of sdwdate are executed and how long they take is not so important. It only tries to avoid clock skews and long time likeability. For subsequent runs, sdwdate would only show if sdwdate failed. You can test that on a separate Whonix-Workstation without any AppArmor profiles, when no Whonix-Gateway is available for this Whonix-Workstation, the daemon sdwdate will fail and it's timesync plugin will launch a popup notification.
<p>Another way to test sdwdate error handling is to run ‚Äúsudo touch /var/lib/sdw_error‚Äù, after end of current sleep and in the next loop the the daemon an error will be provoked. In the log you will see.</p>
<pre><code class="lang-auto"></code></pre>
<p>And also a popup will be shown. (This command /usr/lib/whonix/timesync_post_error ‚Äú$error_message‚Äù can also be used standalone for testing purposes.)</p>
<blockquote>Aren't both basically achieving the same thing?</blockquote>
No. In essence, for one there is sdwdate, a standalone daemon which has been extended with a timesync plugin. From sdwdate perspective, the sdwdate plugin is used to inform terminal and X users about important events that would otherwise go unnoticed in syslog.
<p>When timesync is started, it watches sdwdate‚Äôs log and runs ‚Äúsudo service sdwdate restart‚Äù, keeps the user informed about sdwdate‚Äôs progress and status independently from sdwdate. (Manually run timesync would be able to diagnose sdwdate failures and bugs.)</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-14T13:27:56Z' class='post-time'>
                March 14, 2014,  1:27pm
              </time>
              <meta itemprop='dateModified' content='2014-03-14T13:27:56Z'>
          <span itemprop='position'>#88</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I‚Äôve written a sdwdate_simulator.</p>
<p>[code]#!/bin/bash</p>
<p>set -x<br>
set -o pipefail</p>
<p>declare -g SDWDATE_POOL_NEUTRAL<br>
declare -A -g SDWDATE_CURL_DISPATCH_PRE<br>
declare -A -g SDWDATE_CURL_DISPATCH_POST</p>
<p>for i in /etc/sdwdate.d/*; do<br>
if [ -f ‚Äú$i‚Äù ]; then<br>
## If the last character is a ~, ignore that file, because it was created<br>
## by some editor, which creates backup files.<br>
if [ ‚Äú${i: -1}‚Äù = ‚Äú~‚Äù ]; then<br>
continue<br>
fi<br>
## Skipping files such as .dpkg-old and .dpkg-dist.<br>
if ( echo ‚Äú$i‚Äù | grep -q ‚Äú.dpkg-‚Äù ); then<br>
true "skip $i"<br>
continue<br>
fi<br>
source "$i"<br>
fi<br>
done</p>
<p>SDW_MODE=‚Äústartup‚Äù</p>
<p>while true; do</p>
<p>#SDW_MODE=‚Äúdaemon‚Äù</p>
<p>SDWDATE_CURRENT_POOL=‚Äúneutral‚Äù</p>
<h2>Opens progress bar in X, informs</h2>
<p>eval $DISPATCH_PRE</p>
<h2>Checks if Tor has finished bootstrapping yet</h2>
<p><span class="hashtag">#eval</span> $DISPATCH_PREREQUISITE</p>
<p>sleep 5</p>
<h2>Moves progress bar running curl for that pool.</h2>
<p>true "Will run: eval ${SDWDATE_CURL_DISPATCH_PRE[SDWDATE_POOL_NEUTRAL]}"<br>
eval ${SDWDATE_CURL_DISPATCH_PRE[SDWDATE_POOL_NEUTRAL]}</p>
<p>sleep 5</p>
<h2>In case any tool exits an unexpected non-zero exit code while running sdwdate.</h2>
<p><span class="hashtag">#eval</span> $DISPATCH_POST_ERROR</p>
<h2>Moves progress bar running curl after that pool.</h2>
<p>true "Will run: eval ${SDWDATE_CURL_DISPATCH_POST[SDWDATE_POOL_NEUTRAL]}"<br>
eval ${SDWDATE_CURL_DISPATCH_POST[SDWDATE_POOL_NEUTRAL]}</p>
<p>sleep 5</p>
<h2>In case sdwdate succeeded.</h2>
<p>eval $DISPATCH_POST_SUCCESS</p>
<h2>In case sdwdate did not succeed, for example one pool was unreachable.</h2>
<p><span class="hashtag">#eval</span> $DISPATCH_POST_FAILURE</p>
<p>SDW_MODE=‚Äúdaemon‚Äù</p>
<p>sleep 15</p>
<p>done<br>
[/code]</p>
<p>This is what sdwdate basically does while leaving out the actual time synchronization code. You can use this for testing. Either to just look it at it as a reference how it‚Äôs working, or to write a profile for /usr/bin/sdwdate_simulator (just to find out what‚Äôs missing in the actual sdwdate profile), or use this code to temporarily replace the actual /usr/bin/sdwdate to make debugging the AppArmor profile easier.</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-14T13:33:08Z' class='post-time'>
                March 14, 2014,  1:33pm
              </time>
              <meta itemprop='dateModified' content='2014-03-14T13:33:08Z'>
          <span itemprop='position'>#89</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I think it would be best if sdwdate was allowed to exec all /usr/lib/whonix/timesync_‚Ä¶ scripts unconstrained by AppArmor profiles while also preserving the environment variables. I don‚Äôt think these scripts have potential to be exploited. I think what they need is unconstrained execute mode (ux) but I don‚Äôt know enough about AppArmor. This is because the /usr/lib/whonix/timesync_‚Ä¶ scripts need lots of permissions for themselves for notification stuff which may not be allowed by the current sdwdate AppArmor profile.</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-16T23:24:36Z' class='post-time'>
                March 16, 2014, 11:24pm
              </time>
              <meta itemprop='dateModified' content='2014-03-16T23:24:36Z'>
          <span itemprop='position'>#90</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>I think it would be best if sdwdate was allowed to exec all /usr/lib/whonix/timesync_... scripts unconstrained by AppArmor profiles while also preserving the environment variables. I don't think these scripts have potential to be exploited. I think what they need is unconstrained execute mode (ux) but I don't know enough about AppArmor. This is because the /usr/lib/whonix/timesync_... scripts need lots of permissions for themselves for notification stuff which may not be allowed by the current sdwdate AppArmor profile.</blockquote>
<p>I have authorized all /usr/lib/whonix/timesync_‚Ä¶ scripts, including the ones not required by apparmor plus msgcollector and msgprogress, to run unconfined.</p>
<pre><code class="lang-auto">/usr/lib/whonix/timesync_pre rwUx,
/usr/lib/whonix/timesync_post_error rwUx,
/usr/lib/whonix/timesync_prerequisite rwUx,
/usr/lib/whonix/timesync_post_success rwUx,
/usr/lib/whonix/usr/timesync_init_d rwUx,
/usr/lib/whonix/usr/timesync_post_failure rwUx,
/usr/lib/whonix/msgcollector rUx,
/usr/lib/whonix/msgprogress rUx,</code></pre>
<p>To no avail. I had actually started in that direction.</p>
<p>In order to make a fresh start, all the profiles were moved in a tmp directory. Run ‚Äúsudo service apparmor teardown‚Äù for good measure.</p>
<p>Here a digest of my tests.</p>
<p>Reboot the workstation.<br>
- timesync notification OK</p>
<p>Run ‚Äúservice sdwdate restart‚Äù several times.<br>
- timesync GUI, progress bar<br>
- timesync notification OK</p>
<p>Wait after first sleep period. Run ‚Äúsudo service sdwdate restart‚Äù<br>
[<a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/error">@error</a>]<br>
- no timesync GUI<br>
- timesync success notification</p>
<p>Run timesync.<br>
[<span class="mention">@OK</span>]<br>
- timesync GUI, progress bar<br>
- timesync notification OK</p>
<p>Run ‚Äúsudo service sdwdate restart‚Äù several times.[<span class="mention">@OK</span>]</p>
<p>Run sdwdate_simulator once (ctrl-c during the 15s sleep period) [<span class="mention">@OK</span>]</p>
<p>Run ‚Äúsudo service sdwdate restart‚Äù several times.[<span class="mention">@OK</span>]</p>
<p>Let sdwdate_simulator run twice. [<a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/error">@error</a>]</p>
<p>Run ‚Äúsudo service sdwdate restart‚Äù . [<a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/error">@error</a>]</p>
<p>Run timesync. [<span class="mention">@OK</span>].   And so on‚Ä¶</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-17T09:32:14Z' class='post-time'>
                March 17, 2014,  9:32am
              </time>
              <meta itemprop='dateModified' content='2014-03-17T09:32:14Z'>
          <span itemprop='position'>#91</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>I have authorized all /usr/lib/whonix/timesync_... scripts, including the ones not required by apparmor plus msgcollector and msgprogress, to run unconfined.
[code]
/usr/lib/whonix/timesync_pre rwUx,
....[/code]</blockquote>
<p>Tried ‚Äúrwux‚Äù too. Same result.</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-17T12:41:41Z' class='post-time'>
                March 17, 2014, 12:41pm
              </time>
              <meta itemprop='dateModified' content='2014-03-17T12:41:41Z'>
          <span itemprop='position'>#92</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Updated usr.bin.sdwdate. A new message (/usr/lib/whonix/curl_exit_codes denied) and some minor changes and reorganization after the last tests.</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-17T13:10:04Z' class='post-time'>
                March 17, 2014,  1:10pm
              </time>
              <meta itemprop='dateModified' content='2014-03-17T13:10:04Z'>
          <span itemprop='position'>#93</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>By the way no worries about double posts by the way. In fact, when you edit a post, I don‚Äôt get a new e-mail notification. As long as it‚Äôs useful, and all of your postings certainly are, no issue with that. Just wanted to mention it.</p>
<p>I will test the new profile. Works well after a quick test.</p>
<p>[code] Wait after first sleep period. Run ‚Äúsudo service sdwdate restart‚Äù<br>
[<a class="mention" href="../../../external.html?link=https://forums.whonix.org/u/error">@error</a>]</p>
<ul>
<li>no timesync GUI</li>
<li>timesync success notification [/code]<br>
Strange error. I can‚Äôt reproduce this on my Whonix-Workstation without any AppArmor profiles loaded. I thought quite a lot about what could cause this to no avail.</li>
</ul>
<p>I noticed, that once when running ‚Äúsudo service sdwdate restart‚Äù the progress bar was opened, reached 100% but didn‚Äôt automatically close. So the implementation is indeed not 100% bug free.</p>
<p>Can you check please, if you have a file</p>
<pre><code class="lang-auto"></code></pre>
<p>on your workstation? If so, check the contents and post them here if they don‚Äôt contain anything private.</p>
<p>It might be futile, because the msgcollector error log isn‚Äôt terribly useful in Whonix 8.*. I had one error myself but couldn‚Äôt make head or tail of it.</p>
<p>If you like, you can get the</p>
<pre><code class="lang-auto"></code></pre>
<p>with improved error long from <a href="../../../external.html?link=https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/lib/whonix/msgcollector">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/lib/whonix/msgcollector</a>. Then we might get better insights why it is failing for you.</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-17T20:39:31Z' class='post-time'>
                March 17, 2014,  8:39pm
              </time>
              <meta itemprop='dateModified' content='2014-03-17T20:39:31Z'>
          <span itemprop='position'>#94</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The content of /home/user/.whonix/msgdispatcher-error.log</p>
<pre><code class="lang-auto"></code></pre>
<p>I have intalled the new msgcollector from github. Same and only message after reboot and after a couple ot sdwdate restarts.</p>
<p>A new denied message from sdwdate (/proc/tty/drivers). The profile is updated.</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-20T14:14:08Z' class='post-time'>
                March 20, 2014,  2:14pm
              </time>
              <meta itemprop='dateModified' content='2014-03-20T14:14:08Z'>
          <span itemprop='position'>#95</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Got a new denied messages.</p>
<pre><code class="lang-auto">apparmor="DENIED" operation="file_mmap" parent=16382 profile="/usr/bin/whonixcheck" name="/lib/security/pam_gnome_keyring.so" pid=16450 comm="sudo" requested_mask="m" denied_mask="m" fsuid=0 ouid=0</code></pre>
<pre><code class="lang-auto"></code></pre>
<p><code>Mar 20 13:12:16 host kernel: [  197.811151] type=1400 audit(1395321136.076:86): apparmor="DENIED" operation="mkdir" parent=7795 profile="/home/user/tor-browser_en-US/Browser/firefox" name="/home/user/tor-browser_en-US/.gnome2/" pid=7807 comm="firefox" requested_mask="c" denied_mask="c" fsuid=1000 ouid=1000
Mar 20 13:12:16 host kernel: [  197.811205] type=1400 audit(1395321136.076:87): apparmor="DENIED" operation="mkdir" parent=7795 profile="/home/user/tor-browser_en-US/Browser/firefox" name="/home/user/tor-browser_en-US/.gnome2/" pid=7807 comm="firefox" requested_mask="c" denied_mask="c" fsuid=1000 ouid=1000
Mar 20 13:13:02 host kernel: [  243.769019] type=1400 audit(1395321182.036:88): apparmor="DENIED" operation="mkdir" parent=7925 profile="/home/user/tor-browser_en-US/Browser/firefox" name="/home/user/tor-browser_en-US/.gnome2/" pid=7937 comm="firefox" requested_mask="c" denied_mask="c" fsuid=1000 ouid=1000
Mar 20 13:13:02 host kernel: [  243.769075] type=1400 audit(1395321182.036:89): apparmor="DENIED" operation="mkdir" parent=7925 profile="/home/user/tor-browser_en-US/Browser/firefox" name="/home/user/tor-browser_en-US/.gnome2/" pid=7937 comm="firefox" requested_mask="c" denied_mask="c" fsuid=1000 ouid=1000
Mar 20 13:13:21 host kernel: [  263.020016] type=1400 audit(1395321201.284:90): apparmor="DENIED" operation="mkdir" parent=7990 profile="/home/user/tor-browser_en-US/Browser/firefox" name="/home/user/tor-browser_en-US/.gnome2_private/" pid=8002 comm="firefox" requested_mask="c" denied_mask="c" fsuid=1000 ouid=1000
Mar 20 13:13:44 host kernel: [  286.276128] type=1400 audit(1395321224.544:91): apparmor="DENIED" operation="mkdir" parent=8063 profile="/home/user/tor-browser_en-US/Browser/firefox" name="/home/user/tor-browser_en-US/.gnome2/accels/" pid=8075 comm="firefox" requested_mask="c" denied_mask="c" fsuid=1000 ouid=1000</code></p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-20T18:28:47Z' class='post-time'>
                March 20, 2014,  6:28pm
              </time>
              <meta itemprop='dateModified' content='2014-03-20T18:28:47Z'>
          <span itemprop='position'>#96</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <pre><code class="lang-auto"></code></pre>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-20T21:38:10Z' class='post-time'>
                March 20, 2014,  9:38pm
              </time>
              <meta itemprop='dateModified' content='2014-03-20T21:38:10Z'>
          <span itemprop='position'>#97</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The ‚Äòd‚Äô  mask does not exist in the AppArmor documentation. I have met it a couple of times, and I don‚Äôt remember  exactly how I fixed it. For the moment, changed from rix to rwk. Can you test it? I will have to ask the folks at Ubuntu.</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-20T22:30:25Z' class='post-time'>
                March 20, 2014, 10:30pm
              </time>
              <meta itemprop='dateModified' content='2014-03-20T22:30:25Z'>
          <span itemprop='position'>#98</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The progress with Qubes is slow, and for reasons I don‚Äôt want to develop here, I‚Äôm not sure it is the right track to follow for a replacement of VirtualBox.</p>
<p>The work on KVM has resumed, and it will probably be more rewarding. By the way, welcome back HulaHoop. I have followed the thread in the old forum, without being able to participate, but‚Ä¶</p>
<p>Instead of Qubes, have you ever considered booting Xen in Debian and installing the Whonix VMs on top of it? I just had a quick read in the Deian Xen wiki, it sounds nice in one line. There certainly are some issues that I overlook there, but do you think it might be worth digging a little?</p>
<p>For the moment, I carry on with AppArmor. I have done the ‚Äúabstractions/Whonix‚Äù, I am testing the modified profiles and I will put them in the wiki soon. Next in the list would be XChat, and whatever you might think of. A PDF reader and and cupsd maybe, although I have not looked at how to install a wireless or even a USB printer in the workstation. As I‚Äôm using Whonix most of the time now, It would be nice to have.</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-21T16:52:12Z' class='post-time'>
                March 21, 2014,  4:52pm
              </time>
              <meta itemprop='dateModified' content='2014-03-21T16:52:12Z'>
          <span itemprop='position'>#99</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I am testing the profile.</p>
<blockquote>Instead of Qubes, have you ever considered booting Xen in Debian and installing the Whonix VMs on top of it?</blockquote>
Just superficial.
<blockquote>I just had a quick read in the Deian Xen wiki, it sounds nice in one line. There certainly are some issues that I overlook there, but do you think it might be worth digging a little?</blockquote>
I don't know and I am not going to discourage you. I think QubesOS actually is  Xen + usability improvements such as secure file transfer between VMs and GUI. Would be worth getting a list of actual differences.
<blockquote>Next in the list would be XChat, and whatever you might think of. A PDF reader and and cupsd maybe, although I have not looked at how to install a wireless or even a USB printer in the workstation.</blockquote>
Sounds good.
<p>Do you think it would be worth having a profile for curl? Since sdwdate and whonixcheck are using curl, which connects to the internet, I think it would be important to have it confined. Or do the sdwdate / whonixcheck profiles already confine curl?</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/troubadour'><span itemprop='name'>troubadour</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="108.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2014-03-24T22:21:46Z' class='post-time'>
                March 24, 2014, 10:21pm
              </time>
              <meta itemprop='dateModified' content='2014-03-24T22:21:46Z'>
          <span itemprop='position'>#100</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I have added abstractions/whonix in the wiki and modified the TBB, Icedove and Pidgin profiles accordingly. A new entry in whonixchek too, when it‚Äôs run manually.</p>
<p>At first glance, curl (or scurl for instance) is not confined in the profiles. I‚Äôll have a look.</p>
        </div>

        <meta itemprop='headline' content='Whonix AppArmor Profiles Development Discussion'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="108fdb0.html?page=4">‚Üê previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="108c575.html?page=6">next page ‚Üí</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
