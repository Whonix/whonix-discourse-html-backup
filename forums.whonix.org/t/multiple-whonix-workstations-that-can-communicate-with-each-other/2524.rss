<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Multiple Whonix workstations that can communicate with each other.</title>
    <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524</link>
    <description>I wish to have a group of VMs attached to a sys-whonix type proxyVM where each of the group is able to communicate with every other member of the group.

I have managed this in Virtualbox (all the VMs on internal network &#39;Whonix&#39; could communicate) but I have had no joy so far in Qubes. I have edited iptables in both sys-whonix and sys-firewall in vain but I hope the solution lies in this direction.

I imagine there isn&#39;t much demand for this configuration but no harm in asking.</description>
    <language>en</language>
    <lastBuildDate>Fri, 20 Jul 2018 23:49:32 +0000</lastBuildDate>
    <category>Qubes-Whonix</category>
    <atom:link href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-post="29" data-topic="2524">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/s/f6c823/40.png" class="avatar"> shawn:</div>
<blockquote>
<p>Sorry to bump this now</p>
</blockquote>
</aside>
<p><a href="https://www.whonix.org/wiki/Forum_Best_Practices#Bumping_old_Threads_is_Okay">https://www.whonix.org/wiki/Forum_Best_Practices#Bumping_old_Threads_is_Okay</a></p>
<aside class="quote no-group" data-post="29" data-topic="2524">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/s/f6c823/40.png" class="avatar"> shawn:</div>
<blockquote>
<p>I want to use whonix template as netVM. Is this possible?</p>
</blockquote>
</aside>
<p>Well, whonix-gw TemplateVM is the default TemplateVM for sys-whonix which is a TemplateBased ProxyVM.</p>
<p>I did not use whonix-ws TemplateVM as ProxyVM. whonixcheck might complain but you could ignore that. Feel free to experiment with it.</p>
<aside class="quote no-group" data-post="29" data-topic="2524">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/s/f6c823/40.png" class="avatar"> shawn:</div>
<blockquote>
<p>Is is dangerous to have a proxyVM betweeh sys-whonix and the Workstations?</p>
</blockquote>
</aside>
<p>We have that documented.</p>
<p><a href="https://www.whonix.org/wiki/Tunnels/Connecting_to_Tor_before_a_VPN#Separate_VPN-Gateway">https://www.whonix.org/wiki/Tunnels/Connecting_to_Tor_before_a_VPN#Separate_VPN-Gateway</a></p>
<p>Dangerous? -&gt; <a href="https://www.whonix.org/wiki/Tunnels/Introduction">https://www.whonix.org/wiki/Tunnels/Introduction</a> applies.</p>
<aside class="quote no-group" data-post="29" data-topic="2524">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/s/f6c823/40.png" class="avatar"> shawn:</div>
<blockquote>
<p>libx: error:libx.c:2044device_addrm_aocomplete: unable to add device</p>
</blockquote>
</aside>
<p>Qubes specific. -&gt; <a href="https://forums.whonix.org/t/what-to-post-in-this-qubes-whonix-forum-and-what-not">https://forums.whonix.org/t/what-to-post-in-this-qubes-whonix-forum-and-what-not</a></p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/30">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/30</link>
        <pubDate>Fri, 20 Jul 2018 05:00:40 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-30</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Qubes specific question. Should be asked at Qubes support as per:</p>
<a href="https://forums.whonix.org/t/what-to-post-in-this-qubes-whonix-forum-and-what-not">https://forums.whonix.org/t/what-to-post-in-this-qubes-whonix-forum-and-what-not</a>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/28">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/28</link>
        <pubDate>Tue, 29 Aug 2017 11:03:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-28</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[qubenix]]></dc:creator>
        <description><![CDATA[
            <p>Ok, <a href="https://tor.stackexchange.com/questions/13522/how-to-configure-whonix-gateway-for-communication-between-two-local-workstations/13546#13546" rel="nofollow noopener">this</a> <code>qrexec</code> method is great, but how can I use it for something other than <code>ssh</code>? <code>ssh</code> seems luck to have a ProxyCommand option, but most situations are not so lucky.</p>
<p>For instance say <code>bitcoind</code> is listening on <code>127.0.0.1:8332</code> in a dedicated workstation. How can I have <code>curl</code> from another workstation use this <code>qrexec</code> method? The only thing I could come up with so far is using this <code>qrexec</code> + <code>ssh</code> method from and then setting up an <code>ssh</code> listener in <code>/rw/config/rc.local</code>. However this seems hacky.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/27">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/27</link>
        <pubDate>Tue, 29 Aug 2017 03:56:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-27</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Talked to Marek at 33c3. In Qubes-Whonix (as opposed to Non-Qubes-Whonix) using direct IP is impossible to have inter VM communication without enabling IP forwarding. However, enabling IP forwarding is strongly discouraged. Therefore use the qrexec based solution.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/26">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/26</link>
        <pubDate>Wed, 25 Jan 2017 11:22:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-26</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[xloem]]></dc:creator>
        <description><![CDATA[
            <p>I think that’s called Network Address Translation?  The linux kernel can do it.  ARP tables are for mapping MAC addresses to and from IP addresses.</p>
<p>An important question here is whether Whonix-GW separates streams based on virtual interface or based on IP address.  If it’s the former, you’ll need separate internal netvms for each client.</p>
<p>The qrexec solution could be briefly messy if these are different physical boxes.  You’d need to invent your own channel to send the process streams over.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/25">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/25</link>
        <pubDate>Wed, 04 Jan 2017 10:46:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-25</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[entr0py]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/xloem">@xloem</a> Thanks for your interest. Problem is a very low priority pet project: <a href="https://forums.whonix.org/t/physical-isolation-is-back-qubes-whonix-style/3317/2">Physical Isolation is back! Qubes-Whonix style</a>. I haven’t begun investigating yet. A good start would be learning how physical switches preserve source IP’s without masquerading an intermediary IP. Don’t know enough about networking in general - perhaps it’s done with ARP tables? The trivial, messy solution would be to assign a separate proxyVM to each WS.</p>
<p>In the past, I’ve used a configuration that is relevant to your original question and also affected by my issue:</p>
<pre> Whonix-GW                         
  ^^                               
  ||                               
  ||                               
 LAN proxyVM                       
  ^^   ^                           
  ||   +---+--------+---------+    
  ||       |        |         |       
 WS-A     WS-B     WS-C      WS-D                                    
</pre>
<p>Here, <code>A</code> has internet access via Whonix-GW and also LAN access. <code>B,C,D</code> are restricted to LAN-only. Luckily, I only had one client connect to Whonix-GW. [Disclaimer: <code>B,C,D</code> should not be considered non-networked or air-gapped because leaks can happen through a compromised proxyVM or by exploiting <code>WS-A</code> via the LAN to leak through the proxyVM.]</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/24">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/24</link>
        <pubDate>Mon, 02 Jan 2017 02:34:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-24</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[xloem]]></dc:creator>
        <description><![CDATA[
            <p>entr0py, what’s this other problem you speak of?</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/23</link>
        <pubDate>Sun, 01 Jan 2017 07:46:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-23</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[entr0py]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="http://forums.whonix.org/u/xloem">@xloem</a> Thanks for the writeup! I had no idea how to do that. Might help with my problem.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/22</link>
        <pubDate>Sat, 31 Dec 2016 20:06:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-22</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[xloem]]></dc:creator>
        <description><![CDATA[
            <p>Thank you so much for this!  I’ve written up the solution as a 3-step process at <a href="https://tor.stackexchange.com/questions/13522/how-to-configure-whonix-gateway-for-communication-between-two-local-workstations/13546#13546" rel="nofollow noopener">https://tor.stackexchange.com/questions/13522/how-to-configure-whonix-gateway-for-communication-between-two-local-workstations/13546#13546</a> .</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/21</link>
        <pubDate>Sat, 31 Dec 2016 12:20:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-21</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Better use a socket over qrexec instead.</p>
<p>Here is an example doing ssh through qrexec but different from what you want (inter-vm). Perhaps that helps.</p>
<p><a href="https://www.whonix.org/wiki/Dev/Qubes#ssh_into_Qubes_dom0">https://www.whonix.org/wiki/Dev/Qubes#ssh_into_Qubes_dom0</a></p>
<p>There are also qrexec docs on Qubes website.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/20</link>
        <pubDate>Fri, 30 Dec 2016 12:41:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-20</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[xloem]]></dc:creator>
        <description><![CDATA[
            <p>I guess the right way to do this would be to set up a proxy on the gateway for the services / ports I want to use.  For my use-case of SSH, I would connect to the gateway on port say 2122, and some process running on the gateway would copy the packets to the other workstation, changing the port to 22.  This could be done with socat or netcat running as a service.</p>
<p>EDIT: hrm now I need to figure out how to make exceptions for the normal torification of the connections so that I can contact this local proxy</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/19</link>
        <pubDate>Fri, 30 Dec 2016 12:16:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-19</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="17" data-topic="2524">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/e/8dc957/40.png" class="avatar"> entr0py:</div>
<blockquote>
<p>[Are you saying it’s possible to do this without forwarding?]</p>
</blockquote>
</aside>
<p>No.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/18</link>
        <pubDate>Fri, 30 Dec 2016 01:41:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-18</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[entr0py]]></dc:creator>
        <description><![CDATA[
            <p><img src="//forums.whonix.org/images/emoji/twitter/open_mouth.png?v=5" title=":open_mouth:" class="emoji" alt=":open_mouth:"> Well, that complicates things… [Are you saying it’s possible to do this without forwarding?] On principle, I would really rather use a separate proxyVM… But I think the only way to do that is to have multiple interfaces from one proxyVM connecting to Whonix-Gateway… (not ready to tackle that one.)</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/17</link>
        <pubDate>Fri, 30 Dec 2016 00:44:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-17</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Not advisable to enable IP forwarding. Not leak tested. Always avoided this because without it, networking is so much simpler. Praise Tor’s DnsPort and TransPort.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/16</link>
        <pubDate>Thu, 29 Dec 2016 23:22:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-16</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[entr0py]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="11" data-topic="2524">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/x/c4cdca/40.png" class="avatar"> xloem:</div>
<blockquote>
<p>It sounds like sys-whonix does not route packets the way sys-firewall does.</p>
</blockquote>
</aside>
<p>sys-whonix handles packets like any other Linux distribution - using routing tables and iptables. Perhaps you are referring to Tor’s handling of packets instead. Tor receives traffic through the INPUT filter, wraps it up, then sends it out through the OUTPUT filter. So strictly speaking, Tor is not a FORWARDing process.</p>
<aside class="quote" data-post="7" data-topic="2524" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/e/8dc957/40.png" class="avatar"> entr0py:</div>
<blockquote>
<p>I’ll play with this too - little short on time atm.</p>
</blockquote>
</aside>
<p>Forgot about this thread but indeed, I have played around a bit. Since you are a Qubes-Whonix user, I originally wanted to suggest using a proxyVM as a mini-LAN router. While trivial to set up, it has a major flaw. It doesn’t allow <code>IsolateClientAddr</code> to work because all client IPs are <code>MASQUERADE</code>d - so only partial (weak) stream isolation.</p>
<p>To do what you want, you have to modify Whonix-Gateway templateVM (or use a bind dir?) which sometimes runs the risk of leading to future breakage or leaks. If you’re comfortable with that, here are some examples you can add to <code>/usr/bin/whonix_firewall</code>'s IPv4 FORWARD section. Use one of the examples below:</p>
<pre><code class="lang-auto">### Enable 2-way inter-VM traffic. All protocols allowed, including ICMP (ping).
$iptables_cmd -I FORWARD 1 -i vif+ -o vif+ -j ACCEPT
</code></pre>
<pre><code class="lang-auto">### Enable 1-way inter-VM traffic. Limit to specific IPs. TCP only.
$iptables_cmd -I FORWARD 1 -i vif+ -o vif+ -m state --state RELATED,ESTABLISHED -j ACCEPT
$iptables_cmd -I FORWARD 2 -i vif+ -s &lt;source.ip.address&gt; -o vif+ -d &lt;dest.ip.address&gt; -p tcp -j ACCEPT
</code></pre>
<p>Also, enable FORWARD filter: [<strong><a href="https://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/16">not leak tested</a></strong> with Whonix! Do so at your own risk!]</p>
<pre><code class="lang-auto">sudo mv /etc/sysctl.d/ipv4-forward-disable.conf /etc/sysctl.d/ipv4-forward-enable.conf
sudo nano /etc/sysctl.d/ipv4-forward-enable.conf
# Replace '0' with '1'
</code></pre>
<p>Reboot.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/15</link>
        <pubDate>Thu, 29 Dec 2016 19:03:32 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-15</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>qubes-firewall-user-script indeed won’t work. You might have to edit /usr/bin/whonix_firewall (in a persistent way) forward rules.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/14</link>
        <pubDate>Thu, 29 Dec 2016 13:00:48 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-14</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[xloem]]></dc:creator>
        <description><![CDATA[
            <p>Thanks, Patrick.</p>
<p>Like beaky, I have successfully set up inter-vm communication for non-Whonix AppVMs, following <a href="https://www.qubes-os.org/doc/firewall/#enabling-networking-between-two-qubes" rel="nofollow noopener">https://www.qubes-os.org/doc/firewall/#enabling-networking-between-two-qubes</a> .  However, the same set of steps does not work for Whonix VMs.  Pings give no replies.  A packet log on the whonix gateway shows no packets.</p>
<p>If I enable ip forwarding on the gateway, the pings do get replies, but the replies are “Packet filtered”.  I need to understand it more to find the solution.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/13</link>
        <pubDate>Thu, 29 Dec 2016 10:30:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-13</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Xloem:</p>
<blockquote>
<p>EDIT: indeed, /proc/sys/net/ipv4/ip_forward is 0 on sys-whonix and 1 on sys-firewall</p>
</blockquote>
<p>Leave that as is. No need to change.</p>
<p>You need to open ports in the iptables firewall. Figure out how to do<br>
inter-vm communication for non-Whonix AppVMs first. Then you should be<br>
able to replicate that the same way using Qubes-Whonix.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/12</link>
        <pubDate>Wed, 28 Dec 2016 17:20:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-12</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[xloem]]></dc:creator>
        <description><![CDATA[
            <p>I am also trying to do this: <a href="https://tor.stackexchange.com/questions/13522/how-to-configure-whonix-gateway-for-communication-between-two-local-workstations" rel="nofollow noopener">https://tor.stackexchange.com/questions/13522/how-to-configure-whonix-gateway-for-communication-between-two-local-workstations</a><br>
I’m disheartened that it apparently does not work.</p>
<p>It sounds like sys-whonix does not route packets the way sys-firewall does.</p>
<p>EDIT: indeed, /proc/sys/net/ipv4/ip_forward is 0 on sys-whonix and 1 on sys-firewall<br>
EDIT: <code>echo 1 | sudo tee /proc/sys/net/ipv4/ip_forward</code> on sys-whonix should resolve your problem.  I’m still trying to figure out what firewall rule is filtering my pings</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/11</link>
        <pubDate>Wed, 28 Dec 2016 02:09:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-11</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[beaky]]></dc:creator>
        <description><![CDATA[
            <p>ps Thank you Patrick for the script.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/10</link>
        <pubDate>Thu, 09 Jun 2016 19:27:43 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-10</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[beaky]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="8" data-topic="2524" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p><a href="http://www.whonix.org" rel="nofollow noopener">www.whonix.org</a></p>
<p>Dev/Firewall Unload</p>
<p>How to unload / remove each and every iptables rule.</p>
</blockquote>
</aside>
<p>Using this script did disable the firewall properly. The VMs have connectivity but not yet interconnectivity.</p>
<p>Next I shall retrace the steps so far.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/9</link>
        <pubDate>Thu, 09 Jun 2016 19:26:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-9</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Dev/Firewall_Unload" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" class="thumbnail"></div>

<h3><a href="https://www.whonix.org/wiki/Dev/Firewall_Unload" target="_blank" rel="nofollow noopener">Dev/Firewall Unload</a></h3>

<p>How to unload / remove each and every iptables rule.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/8</link>
        <pubDate>Thu, 09 Jun 2016 18:35:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-8</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[entr0py]]></dc:creator>
        <description><![CDATA[
            <p>I’ll play with this too - little short on time atm.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/7</link>
        <pubDate>Thu, 09 Jun 2016 17:58:14 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-7</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[beaky]]></dc:creator>
        <description><![CDATA[
            <p>An update.</p>
<aside class="quote" data-post="5" data-topic="2524">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/b/b9e5f3/40.png" class="avatar"> beaky:</div>
<blockquote>
<p>Next step is to set iptables in sys-whonix to allow everything everywhere and see what happens.</p>
</blockquote>
</aside>
<p>I attempted to disable or bypass sys-whonix iptables by entering the following commands in the sys-whonix terminal:</p>
<p>sudo iptables -F,<br>
sudo iptables -X,<br>
sudo iptables -t nat -F,<br>
sudo iptables -t nat -X,<br>
sudo iptables -t mangle -F,<br>
sudo iptables -t mangle -X,<br>
sudo iptables -P INPUT ACCEPT,<br>
sudo iptables -P FORWARD ACCEPT,<br>
sudo iptables -P OUTPUT ACCEPT.</p>
<p>After entering the first command, the terminal stopped accepting input and the attached VMs lost connectivity.<br>
I entered the remainder of the above commands using ‘Run command in VM’ from Qubes VM Manager but nothing changed except the terminal became responsive.</p>
<p>I shall reboot sys-whonix and the VMs then repeat these actions.</p>
<p>As ever I welcome all suggestions.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/6</link>
        <pubDate>Thu, 09 Jun 2016 17:18:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-6</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
      <item>
        <title>Multiple Whonix workstations that can communicate with each other.</title>
        <dc:creator><![CDATA[beaky]]></dc:creator>
        <description><![CDATA[
            <p>An update.</p>
<p>Using a group of Debian 8 VMs I can achieve communications between the VMs if they are connected directly to sys-firewall and sys-firewall has iptables FORWARD chain rules that explicitly allow this.<br>
This can also be achieved if the VMs are connected to VPNs as long as the client VPN config file is suitably amended and sys-firewall has iptables FORWARD chain rules that explicitly allow this.</p>
<p>Connecting the VMs to sys-whonix however does not allow communication between the VMs even if it has an iptables FORWARD chain rules that explicitly allow this.</p>
<p>I have looked through a verbose listing of the various sys-whonix iptables but have found no dropped packets.</p>
<p>Next step is to set iptables in sys-whonix to allow everything everywhere and see what happens.</p>
<p>Any other suggestions are welcome.</p>
          <p><a href="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524/5</link>
        <pubDate>Wed, 08 Jun 2016 17:36:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2524-5</guid>
        <source url="http://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other/2524.rss">Multiple Whonix workstations that can communicate with each other.</source>
      </item>
  </channel>
</rss>
