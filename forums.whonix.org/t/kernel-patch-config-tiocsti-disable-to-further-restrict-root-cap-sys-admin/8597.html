<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>kernel patch CONFIG_TIOCSTI_DISABLE to further restrict root CAP_SYS_ADMIN - Development - Whonix Forum</title>
    <meta name="description" content="We can restrict this further with our own kernel patch if you want, following the ‚Äúuntrusted root user‚Äù idea. 
https://paste.debian.net/hidden/f083278e/">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/37fe81e592143b0c01c9656c44069b4bfdd3990e_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/2/222b7257d0600f2bc69cf77e6bc273aa0074ed4e_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="8597.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.whonix.org","potentialAction":{"@type":"SearchAction","target":"https://forums.whonix.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Whonix Forum Search">

      <link href="../../stylesheets/desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5.css_%3b%20filename_%3dUTF-8%27%27desktop_eaead85939ea2f99650f56b40c8681f4e1cb68d5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6c.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_f7af26cfd21c1d79bdb82342526b638dccef9d6cd2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_4_56ca71d15f2048e2e474553f0c3928756f57aec5d2c8.css?__ws=forums.whonix.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/">HOME</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/21.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;kernel patch CONFIG_TIOCSTI_DISABLE to further restrict root CAP_SYS_ADMIN&#39;" href="8597.rss" />
    <meta property="og:site_name" content="Whonix Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.whonix.org/uploads/default/original/2X/a/ac61071d4245560068a380cd1c08c97d1da2201d.jpeg" />
<meta property="og:image" content="https://forums.whonix.org/uploads/default/original/2X/5/5ac973ff4302e69269667e09e67d850c0b628c7a.jpeg" />
<meta property="og:url" content="https://forums.whonix.org/t/kernel-patch-config-tiocsti-disable-to-further-restrict-root-cap-sys-admin/8597" />
<meta name="twitter:url" content="https://forums.whonix.org/t/kernel-patch-config-tiocsti-disable-to-further-restrict-root-cap-sys-admin/8597" />
<meta property="og:title" content="kernel patch CONFIG_TIOCSTI_DISABLE to further restrict root CAP_SYS_ADMIN" />
<meta name="twitter:title" content="kernel patch CONFIG_TIOCSTI_DISABLE to further restrict root CAP_SYS_ADMIN" />
<meta property="og:description" content="We can restrict this further with our own kernel patch if you want, following the ‚Äúuntrusted root user‚Äù idea.  https://paste.debian.net/hidden/f083278e/" />
<meta name="twitter:description" content="We can restrict this further with our own kernel patch if you want, following the ‚Äúuntrusted root user‚Äù idea.  https://paste.debian.net/hidden/f083278e/" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="8 ‚ù§" />
<meta property="article:published_time" content="2019-12-04T20:41:39+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html" alt="Whonix Forum" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="8597.html">kernel patch CONFIG_TIOCSTI_DISABLE to further restrict root CAP_SYS_ADMIN</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/8.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/component_security.html' class='discourse-tag' rel="tag">component_security</a>, 
            <a href='../../tag/status_open_issue_todo.html' class='discourse-tag' rel="tag">status_open_issue_todo</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8597.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-04T20:41:39Z' class='post-time'>
                December 4, 2019,  8:41pm
              </time>
              <meta itemprop='dateModified' content='2020-02-20T07:53:18Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="madaidan" data-post="86" data-topic="7658">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"><a href="../restrict-root-access/7658/86.html">Restrict root access</a>
</div>
<blockquote>
<p>Root (processes with at least CAP_SYS_ADMIN) can use TIOCSTI on whatever console though.</p>
</blockquote>
</aside>
<p>We can restrict this further with our own kernel patch if you want, following the ‚Äúuntrusted root user‚Äù idea.</p>
<p><a href="../../../external.html?link=https://paste.debian.net/hidden/f083278e/" class="onebox" target="_blank">https://paste.debian.net/hidden/f083278e/</a></p>
        </div>

        <meta itemprop='headline' content='kernel patch CONFIG_TIOCSTI_DISABLE to further restrict root CAP_SYS_ADMIN'>
          <meta itemprop='keywords' content='component_security, status_open_issue_todo'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='../../../external.html?link=http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../apparmor-for-complete-system-including-init-pid1-systemd-everything-full-system-mac-policy/8339/251.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../apparmor-for-complete-system-including-init-pid1-systemd-everything-full-system-mac-policy/8339/251.html'>
                      <span itemprop='name'>AppArmor for Complete System - Including init, PID1, Systemd, Everything! - Full System MAC policy</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='../../../external.html?link=http://schema.org/ListItem'>
                    <a href="../restrict-root-access/7658/87.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='../restrict-root-access/7658/87.html'>
                      <span itemprop='name'>Restrict root access</span>
                    </a>
                    <meta itemprop='position' content='4'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8597.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-05T05:46:27Z' class='post-time'>
                December 5, 2019,  5:46am
              </time>
              <meta itemprop='dateModified' content='2019-12-05T05:46:27Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I cannot review kernel patches since I don‚Äôt speak C, let alone understand the kernel code good enough. And I shouldn‚Äôt carry such a patch guessing ‚Äúlooks and works good enough‚Äù approach. Reason, such an approach could lead to a similar situation as Debian/OpenSSL Fiasco. See <a href="../../../external.html?link=https://research.swtch.com/openssl">Lessons from the Debian/OpenSSL Fiasco</a>.</p>
<p>Therefore, please discuss kernel patches please with upstream: <a href="../../../external.html?link=http://kernel.org/">kernel.org</a>; Linux Hardened; Debian.</p>
        </div>

        <meta itemprop='headline' content='kernel patch CONFIG_TIOCSTI_DISABLE to further restrict root CAP_SYS_ADMIN'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8597.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-05T18:37:38Z' class='post-time'>
                December 5, 2019,  6:37pm
              </time>
              <meta itemprop='dateModified' content='2019-12-05T18:37:38Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="88" data-topic="7658">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>I cannot review kernel patches since I don‚Äôt speak C, let alone understand the kernel code good enough.</p>
</blockquote>
</aside>
<p>It‚Äôs really simple. It just makes any TIOCSTI call exit with <code>ENODEV</code> (‚ÄúNo such device‚Äù) if CONFIG_TIOCSTI_DISABLE is set.</p>
<aside class="quote no-group" data-post="88" data-topic="7658">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Reason, such an approach could lead to a similar situation as Debian/OpenSSL Fiasco. See <a href="../../../external.html?link=https://research.swtch.com/openssl">Lessons from the Debian/OpenSSL Fiasco</a>.</p>
</blockquote>
</aside>
<p>This won‚Äôt lead to that. TIOCSTI is a known security risk and is rarely used and when it is used, it‚Äôs not for anything important like crypto. OpenBSD has even removed it entirely <a href="../../../external.html?link=https://marc.info/?l=openbsd-cvs&amp;m=149870941319610">https://marc.info/?l=openbsd-cvs&amp;m=149870941319610</a></p>
<aside class="quote no-group" data-post="88" data-topic="7658">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Therefore, please discuss kernel patches please with upstream: <a href="../../../external.html?link=http://kernel.org/">kernel.org</a>; Linux Hardened; Debian.</p>
</blockquote>
</aside>
<p>Upstream will never accept this. They instantly shot down the patch to restrict it to CAP_SYS_ADMIN <a href="../../../external.html?link=https://lkml.org/lkml/2017/5/10/552">https://lkml.org/lkml/2017/5/10/552</a></p>
<p>A patch to remove it entirely is never going to happen.</p>
        </div>

        <meta itemprop='headline' content='kernel patch CONFIG_TIOCSTI_DISABLE to further restrict root CAP_SYS_ADMIN'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8597.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-05T19:14:08Z' class='post-time'>
                December 5, 2019,  7:14pm
              </time>
              <meta itemprop='dateModified' content='2019-12-05T19:14:08Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>What about Linux Hardened? They might be interested to take the patch?</p>
        </div>

        <meta itemprop='headline' content='kernel patch CONFIG_TIOCSTI_DISABLE to further restrict root CAP_SYS_ADMIN'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8597.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-05T19:19:25Z' class='post-time'>
                December 5, 2019,  7:19pm
              </time>
              <meta itemprop='dateModified' content='2019-12-05T19:19:25Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="90" data-topic="7658" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>What about Linux Hardened? They might be interested to take the patch?</p>
</blockquote>
</aside>
<p>They already restrict it to CAP_SYS_ADMIN and probably won‚Äôt want to restrict it further,</p>
        </div>

        <meta itemprop='headline' content='kernel patch CONFIG_TIOCSTI_DISABLE to further restrict root CAP_SYS_ADMIN'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8597.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-05T19:27:46Z' class='post-time'>
                December 5, 2019,  7:27pm
              </time>
              <meta itemprop='dateModified' content='2019-12-05T19:27:46Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Then if/once we re-compile the kernel / use linux hardened, we‚Äôd also ‚Äújust use CAP_SYS_ADMIN‚Äù. Good enough?</p>
<aside class="quote no-group" data-post="91" data-topic="7658">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar_proxy/v4/letter/m/ea5d25/40.png" class="avatar"> madaidan:</div>
<blockquote>
<p>They already restrict it to CAP_SYS_ADMIN and probably won‚Äôt want to restrict it further,</p>
</blockquote>
</aside>
<p>Perhaps just suggest it to them? Let‚Äôs see what they say. Since the patch is already done (looks like ‚Äú90%‚Äù of the work), would be good to go a bit further and suggest it to them. Even if they say no, someone might look at the code and have a useful comment. Even in case of no comment could mean someone had a look and didn‚Äôt have anything negative to say. Then also we could know their reaction and wouldn‚Äôt need to assume it.</p>
<p>Also this seems rushing far ahead. The way I see it:</p>
<ol>
<li>figure out how to  automatically compile the kernel package on user‚Äôs machine during APT upgrades using Debian stock kernel at all</li>
<li>do the same with Linux Hardened (I didn‚Äôt manage yet to use Debian‚Äôs packaging files in combination with Linux Hardened.)</li>
<li>go beyond Linux Hardened, think about becoming even safer than Linux Hardened</li>
</ol>
<p>Looks like we‚Äôre discussing 3) while steps 1) and 2) are far away.</p>
        </div>

        <meta itemprop='headline' content='kernel patch CONFIG_TIOCSTI_DISABLE to further restrict root CAP_SYS_ADMIN'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Whonix - Anonymous Operating System'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/d/d66e6a1341d872ca984eb1f23d30009afef57a4c.html'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.whonix.org/u/madaidan'><span itemprop='name'>madaidan</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8597.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-05T19:35:01Z' class='post-time'>
                December 5, 2019,  7:35pm
              </time>
              <meta itemprop='dateModified' content='2019-12-05T19:35:01Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="92" data-topic="7658">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Then if/once we re-compile the kernel / use linux hardened, we‚Äôd also ‚Äújust use CAP_SYS_ADMIN‚Äù. Good enough?</p>
</blockquote>
</aside>
<p>It would be alright but allows the root user to use TIOCSTI to compromise applications which might not be good within an untrusted root threat model (we‚Äôd also need to restrict ptrace from root and some other things).</p>
<aside class="quote no-group" data-post="92" data-topic="7658">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>do the same with Linux Hardened (I didn‚Äôt manage yet to use Debian‚Äôs packaging files in combination with Linux Hardened.)</p>
</blockquote>
</aside>
<p>The linux-hardened patches have tons of issues with the debian kernel sources. I‚Äôve tried to fix it but it still wouldn‚Äôt work so I gave up (might try again some time though).</p>
<aside class="quote no-group" data-post="92" data-topic="7658">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"> Patrick:</div>
<blockquote>
<p>go beyond Linux Hardened, think about becoming even safer than Linux Hardened</p>
</blockquote>
</aside>
<p>We should stay as close to the main linux-hardened patch set as possible and try to get it to work for us. I‚Äôm already planning on submitting patches like <a href="../../../external.html?link=https://github.com/anthraxx/linux-hardened/pull/19">https://github.com/anthraxx/linux-hardened/pull/19</a></p>
        </div>

        <meta itemprop='headline' content='kernel patch CONFIG_TIOCSTI_DISABLE to further restrict root CAP_SYS_ADMIN'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.whonix.org/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.whonix.org/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
