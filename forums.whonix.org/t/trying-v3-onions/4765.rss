<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Trying v3 Onions</title>
    <link>http://forums.whonix.org/t/trying-v3-onions/4765</link>
    <description>Hey guys

I tried setting up a v3 onion service with my website today and got some interesting errors when I changed the &quot;server_name&quot; in my nginx.conf.

&gt; could not build server_names hash, you should increase server_names_hash_bucket_size: 64

I didn&#39;t see anything on the whonix site about server_name errors or modifying nginx&#39;s bucket size so I thought I&#39;d mention this as it might help others in the future. It would also be great if the whonix devs could comment of how modifying the bucket size might effect the performance or anonymity of a nginx server -- as **I am far from a developer level and probably shouldn&#39;t be editing my nginx conf in ways I don&#39;t totally understand**...

To resolve the hash errors, as per the [nginx documentation](https://nginx.org/en/docs/http/server_names.html), I increased the bucket size to 128:

	http {
	    server_names_hash_bucket_size  128; # double space between the directive and the value is necessary
	    ...
	}

My nginx conf looks like this:

	# main website
	server {
	    listen 10.152.152.XX:80;
	    server_name v2onion.onion v3onion.onion;
	    ...
	}

	# subdomain
	server {
	    listen 10.152.152.XX:80;
	    server_name subdomain.v2onion.onion subdomain.v3onion.onion;
	    ...
	}</description>
    <language>en</language>
    <lastBuildDate>Sun, 28 Jan 2018 18:04:56 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/trying-v3-onions/4765.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Trying v3 Onions</title>
        <dc:creator><![CDATA[tqveqaoe]]></dc:creator>
        <description><![CDATA[
            <p>Hey guys</p>
<p>I tried setting up a v3 onion service with my website today and got some interesting errors when I changed the “server_name” in my nginx.conf.</p>
<blockquote>
<p>could not build server_names hash, you should increase server_names_hash_bucket_size: 64</p>
</blockquote>
<p>I didn’t see anything on the whonix site about server_name errors or modifying nginx’s bucket size so I thought I’d mention this as it might help others in the future. It would also be great if the whonix devs could comment of how modifying the bucket size might effect the performance or anonymity of a nginx server – as <strong>I am far from a developer level and probably shouldn’t be editing my nginx conf in ways I don’t totally understand</strong>…</p>
<p>To resolve the hash errors, as per the <a href="https://nginx.org/en/docs/http/server_names.html" rel="nofollow noopener">nginx documentation</a>, I increased the bucket size to 128:</p>
<pre><code>http {
    server_names_hash_bucket_size  128; # double space between the directive and the value is necessary
    ...
}
</code></pre>
<p>My nginx conf looks like this:</p>
<pre><code># main website
server {
    listen 10.152.152.XX:80;
    server_name v2onion.onion v3onion.onion;
    ...
}

# subdomain
server {
    listen 10.152.152.XX:80;
    server_name subdomain.v2onion.onion subdomain.v3onion.onion;
    ...
}</code></pre>
          <p><a href="http://forums.whonix.org/t/trying-v3-onions/4765/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/trying-v3-onions/4765/1</link>
        <pubDate>Sun, 28 Jan 2018 18:04:56 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4765-1</guid>
        <source url="http://forums.whonix.org/t/trying-v3-onions/4765.rss">Trying v3 Onions</source>
      </item>
  </channel>
</rss>
