<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Fake Control Port</title>
    <link>http://forums.whonix.org/t/fake-control-port/773</link>
    <description>A user perspective (there wasn&#39;t a &quot;cypherpunks&quot; account already??):

I just found myself unpleasantly surprised to find out that anything running in the workstation had any access whatsoever to the Tor control port, even filtered access, and reading up on it led me to this thread.

If there&#39;s a need to placate the Tor browser, I for one would prefer that you build a fake control port that lies about ALL commands and that never forwards ANYTHING to Tor, and I think that should run entirely on the workstation. Of course, that doesn&#39;t mean that you should let the user believe that something like a &quot;new circuit&quot; button is actually working if it&#39;s not, and I&#39;m not sure how to ask you to go about preventing that false impression. Will it do something sane if you send back a failure code?

Any port on the gateway that the workstation can connect to is an exposure. There is no way that having a &quot;new circuit&quot; button inside the workstation is worth the risk of another listening port, and it&#39;s SURE not worth the risk of sending &quot;filtered&quot; commands through to the actual Tor process. If I want a new circuit, I&#39;ll do it in the gateway (I will admit that a nicer control program inside the gateway would be nice). That applies to ALL Tor control and status functions.

I use Whonix because I don&#39;t trust the TBB, and I don&#39;t trust the TBB exactly because of the willingness to open up infinite attack surface in the name of &quot;usability&quot;, and do crazy things like opening up sockets from the browser to the Tor control port. I do not want Mike Perry&#39;s &quot;usability&quot; feature of the week.

The only reason the Tor browser should exist at all is fingerprinting resistance, because you HAVE to do that in the browser. But, because browsers are so ridiculously complex, it&#39;s not trustworthy, and it shouldn&#39;t be allowed to interfere with core isolation properties. If there&#39;s no way to accommodate the Tor browser without giving it ever-increasing attack surface against the main anonymity system, then I suggest you just drop the Tor browser entirely.

Thanks for listening.</description>
    <language>en</language>
    <lastBuildDate>Sun, 18 Jan 2015 23:18:01 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/fake-control-port/773.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Fake Control Port</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <blockquote>ALLOW_HIDDEN_SERVICES</blockquote>
What would it do?
<p>The problem is, the tool running in the workstation (onionshare or so) would try to access a file /var/lib/tor/hidden_service. But no such folder exists on the workstation. Whatever you let cpfp-py do, it cannot help fix this. It would require future trickery. As soon as cpfp-y notices the tool wanting to use that hidden service, it could relay the contents of that /var/lib/tor/hidden_service folder back to a special tool listening on the workstation which then creates that file. But that sounds quite complex and like a lot work to do. So much work, it might be better spend on learning C and implementing the missing features into Tor.</p>
<blockquote>Now, for ultimate usability, it is also possible to design a control port filter GUI to set all parameters (white list, disable fitering...) using .d style configuration. A task could be added in phabricator (long term).</blockquote>
Kinda got somewhat such tickets already:
- https://phabricator.whonix.org/T55
- https://phabricator.whonix.org/T89
          <p><a href="http://forums.whonix.org/t/fake-control-port/773/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/fake-control-port/773/6</link>
        <pubDate>Sun, 18 Jan 2015 23:18:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-773-6</guid>
        <source url="http://forums.whonix.org/t/fake-control-port/773.rss">Fake Control Port</source>
      </item>
      <item>
        <title>Fake Control Port</title>
        <dc:creator><![CDATA[troubadour]]></dc:creator>
        <description><![CDATA[
            <p>It is possible to hardcode the requests required for hidden services and to add a variable ALLOW_HIDDEN_SERVICES in cpfp.py (for what it’s worth until the issue in Tor is fixed).</p>
<p>Now, for ultimate usability, it is also possible to design a control port filter GUI to set all parameters (white list, disable fitering…) using .d style configuration. A task could be added in phabricator (long term).</p>
          <p><a href="http://forums.whonix.org/t/fake-control-port/773/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/fake-control-port/773/5</link>
        <pubDate>Sun, 18 Jan 2015 23:01:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-773-5</guid>
        <source url="http://forums.whonix.org/t/fake-control-port/773.rss">Fake Control Port</source>
      </item>
      <item>
        <title>Fake Control Port</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>cpfp-bash is as well as cpfyp-py will be very easily configureable. You can just drop your snippets to extend existing white list. See also:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Whonix_Configuration_Files#.d_style_configuration_folders" target="_blank" title="07:39AM - 24 March 2020">Whonix – 24 Mar 20</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/426;"><img src="https://www.whonix.org/w/images/3/3b/Five-elements-379106640.jpg" class="thumbnail" width="640" height="426"></div>

<h3><a href="https://www.whonix.org/wiki/Whonix_Configuration_Files#.d_style_configuration_folders" target="_blank">Configuration Files - Whonix</a></h3>

<p>Everything you should know about Configuration Drop-in Folders and Files.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<p>No hacking required.</p>
<p>But if you like to improve the code, please contribute. (Makes more sense to work on cpfyp-py.)</p>
<p>Not sure how this could be any easier? Do you mean was easy as a graphical user interface for it?</p>
<p>The issue with hidden services does not come from filtered vs unfiltered access to Tor’s ControlPort. These are missing features in Tor:</p>
<ul>
<li><a href="https://trac.torproject.org/projects/tor/ticket/8993">https://trac.torproject.org/projects/tor/ticket/8993</a></li>
<li><a href="https://trac.torproject.org/projects/tor/ticket/1949">https://trac.torproject.org/projects/tor/ticket/1949</a></li>
</ul>
<p>More info:</p>
<ul>
<li><a href="https://www.whonix.org/wiki/Next#ricochet">https://www.whonix.org/wiki/Next#ricochet</a></li>
<li><a href="https://github.com/ricochet-im/ricochet/issues/30">https://github.com/ricochet-im/ricochet/issues/30</a></li>
<li><a href="https://www.whonix.org/wiki/Next#onionshare">https://www.whonix.org/wiki/Next#onionshare</a></li>
<li><a href="https://github.com/micahflee/onionshare/issues/27">https://github.com/micahflee/onionshare/issues/27</a></li>
</ul>
          <p><a href="http://forums.whonix.org/t/fake-control-port/773/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/fake-control-port/773/4</link>
        <pubDate>Sun, 18 Jan 2015 18:24:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-773-4</guid>
        <source url="http://forums.whonix.org/t/fake-control-port/773.rss">Fake Control Port</source>
      </item>
      <item>
        <title>Fake Control Port</title>
        <dc:creator><![CDATA[whodam]]></dc:creator>
        <description><![CDATA[
            <p>I completely agree with Patrick. Usability is very important. There is a simple reason why Email encryption failed on a large scale. Because it is at least one click more than without. It’s that simple. IF you need something more strict it is your prerogative to deactivate the proxy. It is very simple and documented.</p>
<p>The filter is very strict - IMHO too strict - I hope the discussion on this issue and the TBB progress will make the white listing more easy for the user as well. For me it would be very helpful If I could simply white-list the HiddenService commands, now I have to hack around it and open the Control Port or write my own proxy.</p>
          <p><a href="http://forums.whonix.org/t/fake-control-port/773/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/fake-control-port/773/3</link>
        <pubDate>Sun, 18 Jan 2015 09:37:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-773-3</guid>
        <source url="http://forums.whonix.org/t/fake-control-port/773.rss">Fake Control Port</source>
      </item>
      <item>
        <title>Fake Control Port</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>“Usability is a security feature.”</p>
<p>For disabling CPFP, we have instructions:<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/w/images/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Advanced_Security_Guide#Disable_Control_Port_Filter_Proxy" target="_blank" title="03:23AM - 18 June 2019">Whonix – 18 Jun 19</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/426;"><img src="https://www.whonix.org/w/images/4/4e/Padlocks337569640.jpg" class="thumbnail" width="640" height="426"></div>

<h3><a href="https://www.whonix.org/wiki/Advanced_Security_Guide#Disable_Control_Port_Filter_Proxy" target="_blank">Advanced Security Guide - Whonix</a></h3>

<p>THIS WIKI PAGE IS DEPRECATED AND OUTDATED. PLEASE REFER TO THE ADVANCED SECURITY GUIDE SECTION - https://www.whonix.org/wiki/Documentation</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>And in future, to ease that, hopefully whonixadvsetup will be implemented:<br>
<a href="https://phabricator.whonix.org/T55" class="onebox" target="_blank">https://phabricator.whonix.org/T55</a></p>
          <p><a href="http://forums.whonix.org/t/fake-control-port/773/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/fake-control-port/773/2</link>
        <pubDate>Fri, 16 Jan 2015 04:11:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-773-2</guid>
        <source url="http://forums.whonix.org/t/fake-control-port/773.rss">Fake Control Port</source>
      </item>
      <item>
        <title>Fake Control Port</title>
        <dc:creator><![CDATA[cypherpunks]]></dc:creator>
        <description><![CDATA[
            <p>A user perspective (there wasn’t a “cypherpunks” account already??):</p>
<p>I just found myself unpleasantly surprised to find out that anything running in the workstation had any access whatsoever to the Tor control port, even filtered access, and reading up on it led me to this thread.</p>
<p>If there’s a need to placate the Tor browser, I for one would prefer that you build a fake control port that lies about ALL commands and that never forwards ANYTHING to Tor, and I think that should run entirely on the workstation. Of course, that doesn’t mean that you should let the user believe that something like a “new circuit” button is actually working if it’s not, and I’m not sure how to ask you to go about preventing that false impression. Will it do something sane if you send back a failure code?</p>
<p>Any port on the gateway that the workstation can connect to is an exposure. There is no way that having a “new circuit” button inside the workstation is worth the risk of another listening port, and it’s SURE not worth the risk of sending “filtered” commands through to the actual Tor process. If I want a new circuit, I’ll do it in the gateway (I will admit that a nicer control program inside the gateway would be nice). That applies to ALL Tor control and status functions.</p>
<p>I use Whonix because I don’t trust the TBB, and I don’t trust the TBB exactly because of the willingness to open up infinite attack surface in the name of “usability”, and do crazy things like opening up sockets from the browser to the Tor control port. I do not want Mike Perry’s “usability” feature of the week.</p>
<p>The only reason the Tor browser should exist at all is fingerprinting resistance, because you HAVE to do that in the browser. But, because browsers are so ridiculously complex, it’s not trustworthy, and it shouldn’t be allowed to interfere with core isolation properties. If there’s no way to accommodate the Tor browser without giving it ever-increasing attack surface against the main anonymity system, then I suggest you just drop the Tor browser entirely.</p>
<p>Thanks for listening.</p>
          <p><a href="http://forums.whonix.org/t/fake-control-port/773/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/fake-control-port/773/1</link>
        <pubDate>Fri, 09 Jan 2015 03:05:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-773-1</guid>
        <source url="http://forums.whonix.org/t/fake-control-port/773.rss">Fake Control Port</source>
      </item>
  </channel>
</rss>
