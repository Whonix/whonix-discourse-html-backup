<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>upgrading from local repository for Whonix 14 wiki page</title>
    <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121</link>
    <description>As for upgrading from local repository... I updated (/created) this page. It&#39;s lightly tested.

https://www.whonix.org/wiki/Dev/Build_Documentation/14_deb

Probably best tested on a workstation first - potentially less troublesome.

//cc @JasonJAyalaP</description>
    <language>en</language>
    <lastBuildDate>Tue, 05 Sep 2017 10:03:00 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>JasonJAyalaP:</p>
<blockquote>
<p>I’m almost certain that jobs=200 is an unreasonable number. All the git-http processes hard freeze the OVAs. I tried to find examples on google but it seems unsearchable. I did find someone doing jobs=4. If there’s no objection, I will change it to that.</p>
</blockquote>
<p>If that’s the lowest number that doesn’t freeze… Yes, change it.</p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/20</link>
        <pubDate>Tue, 05 Sep 2017 10:03:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-20</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[JasonJAyalaP]]></dc:creator>
        <description><![CDATA[
            <p>I’m almost certain that jobs=200 is an unreasonable number. All the git-http processes hard freeze the OVAs. I tried to find examples on google but it seems unsearchable. I did find someone doing jobs=4. If there’s no objection, I will change it to that.</p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/19</link>
        <pubDate>Mon, 04 Sep 2017 22:08:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-19</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>To fix the many</p>
<pre><code>    modified:   packages/.... (modified content)
</code></pre>
<p>messages, I did…</p>
<p>In <a href="https://github.com/Whonix/Whonix/blob/master/help-steps/cleanup-files#L41">https://github.com/Whonix/Whonix/blob/master/help-steps/cleanup-files#L41</a> under <code>git clean -d --force --force -x</code>, I’ve added <code>git reset --hard</code>. Then did run from <code>Whonix/Whonix</code>, <code>./help-steps/cleanup-files</code>.</p>
<hr>
<p>But anyhow. Fresh <code>git clone --jobs=200 --recursive https://github.com/Whonix/Whonix</code> is now fixed as well.</p>
<p>In future, we need to better coordinate changes. Whenever a package was changed, I need to be somehow informed. Like with <a href="https://github.com/Whonix/whonix-gw-firewall/commit/99a0e1eb3ce3bd1728f12f673522d239b0a3d9f6">https://github.com/Whonix/whonix-gw-firewall/commit/99a0e1eb3ce3bd1728f12f673522d239b0a3d9f6</a>. So I can git merge locally as well. And so we don’t forget to update Whonix/Whonix.</p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/18</link>
        <pubDate>Fri, 21 Jul 2017 12:13:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-18</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>During git clone…</p>
<pre><code>Fetched in submodule path 'packages/whonix-gw-firewall', but it did not contain dc7e553f637ebfc4e0735438b830fea22663075b. Direct fetching of that commit failed.
</code></pre>
<p>This was the cause.</p>
<p><a href="https://github.com/Whonix/whonix-gw-firewall/commit/99a0e1eb3ce3bd1728f12f673522d239b0a3d9f6">https://github.com/Whonix/whonix-gw-firewall/commit/99a0e1eb3ce3bd1728f12f673522d239b0a3d9f6</a></p>
<p>You changed that repository, but then didn’t add the updated git commit to <a href="https://github.com/Whonix/Whonix">https://github.com/Whonix/Whonix</a>. Therefore from git’s perspective of <a href="https://github.com/Whonix/Whonix">https://github.com/Whonix/Whonix</a>, whonix-gw-firewall was ahead.</p>
<p>On the other hand from my local (!) <code>Whonix/Whonix</code> perspective, everything was up to date.</p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/17</link>
        <pubDate>Fri, 21 Jul 2017 12:09:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-17</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <pre><code class="lang-auto">cd /tmp
/tmp $ mkdir xx
/tmp $ cd xx
/tmp/xx $ git clone --jobs=200 --recursive https://github.com/Whonix/Whonix

cd Whonix
/tmp/xx/Whonix $ git status
On branch master
Your branch is up-to-date with 'origin/master'.
Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
  (commit or discard the untracked or modified content in submodules)

...
        modified:   packages/whonix-welcome-page (modified content)
...

no changes added to commit (use "git add" and/or "git commit -a")
  
  /tmp/xx/Whonix $ cd packages/whonix-welcome-page/
  /tmp/xx/Whonix/packages/whonix-welcome-page $ git status
On branch master
Your branch is up-to-date with 'origin/master'.
Changes to be committed:
  (use "git reset HEAD &lt;file&gt;..." to unstage)

        deleted:    CONTRIBUTING.md
        deleted:    COPYING
        deleted:    GPLv3
        deleted:    Makefile
        deleted:    README.md
        deleted:    changelog.upstream
        deleted:    debian/changelog
        deleted:    debian/compat
        deleted:    debian/control
        deleted:    debian/copyright
        deleted:    debian/rules
        deleted:    debian/source/format
        deleted:    debian/source/lintian-overrides
        deleted:    debian/watch
        deleted:    etc/X11/Xsession.d/20whonix-welcome-page
        deleted:    etc/profile.d/20_whonix-welcome-page.sh
        deleted:    usr/lib/whonix-welcome-page/env_var.sh
        deleted:    usr/share/homepage/whonix-welcome-page/logo.png
        deleted:    usr/share/homepage/whonix-welcome-page/stylesheet.css
        deleted:    usr/share/homepage/whonix-welcome-page/whonix.html

  /tmp/xx/Whonix/packages/whonix-welcome-page $ git reset --hard
HEAD is now at 1c73d56 bumped changelog version
  /tmp/xx/Whonix/packages/whonix-welcome-page $ git status
On branch master
Your branch is up-to-date with 'origin/master'.
nothing to commit, working tree clean
  /tmp/xx/Whonix/packages/whonix-welcome-page $ 
  /tmp/xx/Whonix/packages/whonix-welcome-page $ cd ..
  /tmp/xx/Whonix/packages $ git status
</code></pre>
<p><code>whonix-welcome-page</code> fixed.</p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/16</link>
        <pubDate>Fri, 21 Jul 2017 12:03:49 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-16</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Full output required. Cannot make head or tail of the description.</p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/15</link>
        <pubDate>Sat, 15 Jul 2017 12:52:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-15</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[JasonJAyalaP]]></dc:creator>
        <description><![CDATA[
            <p>I’m running into an error with $apt_get_update_wrapper_source_path_full “${APTGETOPT[@]}” update</p>
<pre><code>############################################################
ERROR in ./build-steps.d/1100_prepare-build-machine detected!
anon_dist_build_version: 
(whonix_build_error_counter: 1)
(benchmark: 00:00:29)
trap_signal_type_previous: unset
trap_signal_type_last    : ERR
process_backtrace_result:
1: : /sbin/init 
2: : kdeinit5: Running...                                   
3: : /usr/bin/ksmserver 
4: : /usr/bin/plasmashell --shut-up 
5: : /usr/bin/konsole 
6: : /bin/bash 
7: : sudo -E ./build-steps.d/1100_prepare-build-machine --internalrun --build --target root 
8: : /bin/bash ./build-steps.d/1100_prepare-build-machine --internalrun --build --target root 
function_trace_result:
main (line number: 376)
main (line number: 371)
build_machine_setup (line number: 265)
errorhandlergeneral (line number: 335)
errorhandlerprocessshared (line number: 170)
last_failed_bash_command: $apt_get_update_wrapper_source_path_full "${APTGETOPT[@]}" update
last_failed_exit_code: 125
ERROR in ./build-steps.d/1100_prepare-build-machine detected!
############################################################</code></pre>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/14</link>
        <pubDate>Fri, 14 Jul 2017 04:26:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-14</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[JasonJAyalaP]]></dc:creator>
        <description><![CDATA[
            <p>Now it’s sdwdate-gui that’s causing an error. We can I instructions about this error, unless you think there can be an automatic/foolproof way to prevent it.</p>
<p>Everything in multiple (but not all) packages are … weird…</p>
<p>git status shows “up to date with master”, changes to be commited “deleted …” everything, in green. Simply typing “git checkout master” (without reseting) says “already on master” and git status shows “working tree clean” … Weird.</p>
<p>I did “git checkout master” in every packages/ subfolder</p>
<pre><code>find . -maxdepth 1 -type d \( ! -name . \) -exec bash -c "cd '{}' &amp;&amp; pwd" \;
</code></pre>
<p>then re-ran</p>
<pre><code>git submodule update --init --recursive
</code></pre>
<p>That got me to a clean detached head at 14.0.0.4.0-developers</p>
<p>So, the folders that don’t submodule update stay at master… but somehow  complain to Whonix/Whonix ?</p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/13</link>
        <pubDate>Fri, 14 Jul 2017 04:09:46 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-13</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>JasonJAyalaP:</p>
<blockquote>
<blockquote>
<ul>
<li>There might be legal setup that can get rid of all disclaimers,<br>
hence<br>
whonix-setup-wizard could be abandoned.</li>
</ul>
</blockquote>
<p>Are you suggesting a new tool that displays disclaimers separate from<br>
setup/anon-wizard? I agree. New ticket?</p>
</blockquote>
<p>Yes. That’s the plan.</p>
<p>tor-connection-wizard shall be non-Whonix specific, ready to be uploaded<br>
to <a href="http://packages.debian.org">packages.debian.org</a>. (Hopefully picked up by some Debian maintainer.)</p>
<blockquote>
<blockquote>
<ul>
<li>Merge whonixsetup (cli) into anon-connection-wizard?</li>
</ul>
</blockquote>
<p>It makes sense that the cli and gui version have the same codebase.</p>
</blockquote>
<p>Well, the cli version is written in <code>bash</code>. Probably hard to have the<br>
code base shared with Qt for gui and cli at the same time? <span class="mention">@ivy</span></p>
<blockquote>
<p>anon-connection-wizard could detect whether or not x is running (and<br>
if qt is installed?) and load the GUI or CLI</p>
</blockquote>
<p>Perhaps a wrapper, yes. More of a bonus feature.</p>
<blockquote>
<p>What if running in a terminal in kde? Assume gui? I think so. Provide<br>
–cli option? Sure, assuming it’s easy to do/maintain.</p>
</blockquote>
<p>No <code>--cli</code> option.</p>
<p>/usr/bin/tor-connection-wizard bash wrapper -&gt; if running in gui -&gt;<br>
/usr/bin/tor-connection-wizard-gui</p>
<p>/usr/bin/tor-connection-wizard bash wrapper -&gt; if running in cli X -&gt;<br>
/usr/bin/tor-connection-wizard-gui</p>
<p>/usr/bin/tor-connection-wizard bash wrapper -&gt; if running in cli virtual<br>
terminal -&gt; /usr/bin/tor-connection-wizard-cli</p>
<p>Then if someone wants cli from X, they could manually start<br>
tor-connection-wizard-cli.</p>
<blockquote>
<p>You’d have 3 or 4 sections/modules in wizard: - boot (confirm root,<br>
check environment) - GUI (python qt) - CLI - Core</p>
</blockquote>
<blockquote>
<p>I don’t know how of a burden that will be on <a class="mention" href="http://forums.whonix.org/u/iry">@iry</a>. He doesn’t have to<br>
code the CLI part – nasty bash stuff, no? <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</blockquote>
<p>Might be theoretic. Cli/bash part is only a stub anyhow. No no actual<br>
bridges support. Just textual help. And probably will stay that way for<br>
a very long time.</p>
<p>Could you ask please on tor-dev if adding such a wrapper / the cli stub<br>
version would be okay being added to tor-connection-wizard or if that<br>
would a good idea? <a class="mention" href="http://forums.whonix.org/u/iry">@iry</a></p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/12</link>
        <pubDate>Thu, 13 Jul 2017 23:42:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-12</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>JasonJAyalaP:</p>
<blockquote>
<blockquote>
<p>In such situations please remind me to git push.</p>
</blockquote>
<p>genmkfile is doing it now</p>
</blockquote>
<p>Fixed.</p>
<blockquote>
<blockquote>
<p>It just kills the correct checkout of that very package.</p>
</blockquote>
<p>Does it still work to manually clone it?</p>
</blockquote>
<p>Yes, but then you don’t have the changes that I made.</p>
<blockquote>
<p>What other step must be<br>
done? Remember the “attempted” checkout?</p>
</blockquote>
<p>“Remember that something didn’t check out” suffices.</p>
<p>In <a href="http://github.com/Whonix/Whonix">github.com/Whonix/Whonix</a></p>
<pre><code>git submodule update
</code></pre>
<p>Will sort it out.</p>
<p>(Perhaps also fetching latest Whonix/Whonix git master and checking that<br>
out.)</p>
<blockquote>
<blockquote>
<p>jobs</p>
</blockquote>
<p>–jobs fires off more git-remote-https processes. I think this is<br>
network connections and not multiple threads handling the (i dunno,<br>
extraction?).</p>
</blockquote>
<p>Yes, speeds that up it.</p>
<blockquote>
<p>If so, it doesn’t make sense when downloading through<br>
tor (low bandwidth) and one host (github).</p>
</blockquote>
<p>Even over Tor it’s faster than sequential.</p>
<blockquote>
<blockquote>
<p>git clean -ndff git clean -dff</p>
</blockquote>
<p>the first command gives an interactive prompt allowing the users to<br>
select clean or quit. Perhaps "select clean if ‘Would Remove’ should<br>
be the instructions?</p>
</blockquote>
<p>Seems git does that differently now.</p>
<p>The first command was non-interactive, just there to show what would be<br>
removed but not remove it to prevent data loss.</p>
<p>Yes.</p>
<blockquote>
<blockquote>
<p>run git status usually make deb-cleanup</p>
</blockquote>
<p>Now I’m seeing a bunch of</p>
<p><code>up to date with master deleted: ....</code></p>
</blockquote>
<p>It cloned, did put the files into place, but could not checkout the<br>
requested ref. So git now probably thinks all the files there are<br>
extraneous files?</p>
<p>In that submodule… Try…</p>
<pre><code>git checkout master
git reset --hard
</code></pre>
<blockquote>
<p>With everything (apparently) marked as deleted.</p>
</blockquote>
<p>Not sure. If above does not work, please post the full output.</p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/11</link>
        <pubDate>Thu, 13 Jul 2017 23:35:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-11</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[JasonJAyalaP]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<ul>
<li>There might be legal setup that can get rid of all disclaimers, hence<br>
whonix-setup-wizard could be abandoned.</li>
</ul>
</blockquote>
<p>Are you suggesting a new tool that displays disclaimers separate from setup/anon-wizard? I agree. New ticket?</p>
<blockquote>
<ul>
<li>Merge whonixsetup (cli) into anon-connection-wizard?</li>
</ul>
</blockquote>
<p>It makes sense that the cli and gui version have the same codebase. anon-connection-wizard could detect whether or not x is running (and if qt is installed?) and load the GUI or CLI</p>
<p>What if running in a terminal in kde? Assume gui? I think so. Provide --cli option? Sure, assuming it’s easy to do/maintain.</p>
<p>You’d have 3 or 4 sections/modules in wizard:</p>
<ul>
<li>boot (confirm root, check environment)</li>
<li>GUI (python qt)</li>
<li>CLI</li>
<li>Core</li>
</ul>
<p>I don’t know how of a burden that will be on <a class="mention" href="http://forums.whonix.org/u/iry">@iry</a>. He doesn’t have to code the CLI part – nasty bash stuff, no? <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/10</link>
        <pubDate>Thu, 13 Jul 2017 22:48:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-10</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[JasonJAyalaP]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>In such situations please remind me to git push.</p>
</blockquote>
<p>genmkfile is doing it now</p>
<blockquote>
<p>It just kills the correct checkout of that very package.</p>
</blockquote>
<p>Does it still work to manually clone it? What other step must be done? Remember the “attempted” checkout?</p>
<blockquote>
<p>jobs</p>
</blockquote>
<p>–jobs fires off more git-remote-https processes. I think this is network connections and not multiple threads handling the (i dunno, extraction?). If so, it doesn’t make sense when downloading through tor (low bandwidth) and one host (github).</p>
<blockquote>
<p>git clean -ndff<br>
git clean -dff</p>
</blockquote>
<p>the first command gives an interactive prompt allowing the users to select clean or quit. Perhaps "select clean if ‘Would Remove’ should be the instructions?</p>
<blockquote>
<p>run git status<br>
usually make deb-cleanup</p>
</blockquote>
<p>Now I’m seeing a bunch of</p>
<p><code>up to date with master deleted: ....</code></p>
<p>With everything (apparently) marked as deleted.</p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/9</link>
        <pubDate>Thu, 13 Jul 2017 22:38:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-9</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>JasonJAyalaP:</p>
<blockquote>
<p>after checking out 14.0.0.4.0-developers only, I did clean and submodule update. Git status shows that many packages are modified. They all seems to be the same message:</p>
<pre><code>git diff packages/whonixsetup/
diff --git a/packages/whonixsetup b/packages/whonixsetup
--- a/packages/whonixsetup
+++ b/packages/whonixsetup
@@ -1 +1 @@
-Subproject commit 4a6295c7033b8c78555fc5bdf7aa758875d6d07f
+Subproject commit 4a6295c7033b8c78555fc5bdf7aa758875d6d07f-dirty
</code></pre>
</blockquote>
<p>Right, such issues need to be fixed before continuation.</p>
<ol>
<li>
<p>get into that ~/Whonix/packages/whonixsetup folder</p>
</li>
<li>
<p>run <code>git status</code> to see whats up</p>
</li>
<li>
<p>usually <code>make deb-cleanup</code> should remove all temporary files</p>
</li>
<li>
<p>run <code>git status</code> again to see if it is all sorted out</p>
</li>
</ol>
<p>Btw <code>whonixsetup</code> (cli version) != <code>whonix-setup-wizard</code> (legacy<br>
anon-connection-wizard and whonix setup gui version) !=<br>
<code>anon-connection-wizard</code>.</p>
<p>Once/if anon-connection-wizard is good enough for the release of Whonix 14:</p>
<ul>
<li>There might be legal setup that can get rid of all disclaimers, hence<br>
<code>whonix-setup-wizard</code> could be abandoned.</li>
<li>Merge <code>whonixsetup</code> (cli) into <code>anon-connection-wizard</code>?</li>
</ul>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/8</link>
        <pubDate>Thu, 13 Jul 2017 13:16:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-8</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>JasonJAyalaP:</p>
<blockquote>
<p>Something wrong with the icedove package?</p>
<pre><code>Submodule path 'packages/apparmor-profile-anondist': checked out 'f5afeceb81f84b237b18973c54ff90ee5be3b8f7'
Submodule path 'packages/apparmor-profile-gwenview': checked out '5ade3b80856565cd75361b038b6a919ab7f51d49'
error: no such remote ref 6a051dc6512f8fe7daa9b5d62ec1a158ff01920b
Fetched in submodule path 'packages/apparmor-profile-icedove', but it did not contain 6a051dc6512f8fe7daa9b5d62ec1a158ff01920b. Direct fetching of that commit failed.
</code></pre>
</blockquote>
<p>I added changes locally in apparmor-profile-icedove. Forgot to push.</p>
<p>Then added the updated git submodule to <a href="https://github.com/Whonix/Whonix">https://github.com/Whonix/Whonix</a><br>
and pushed. The ref which <a href="https://github.com/Whonix/Whonix">https://github.com/Whonix/Whonix</a> links was not<br>
available in apparmor-profile-icedove.</p>
<p>Now fixed.</p>
<blockquote>
<p>Did that error kill the recursive download or was it reported at the end?</p>
</blockquote>
<p>It just kills the correct checkout of that very package.</p>
<blockquote>
<p>I deleted the folder (in packages/) and cloned it directly fine.</p>
</blockquote>
<p>In such situations please remind me to git push.</p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/7</link>
        <pubDate>Thu, 13 Jul 2017 13:09:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-7</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>JasonJAyalaP:</p>
<blockquote>
<p>Why is the git option --jobs= whonix 14 but not 13?</p>
</blockquote>
<p>Whonix 13 -&gt; Debian jessie based -&gt; git version too old -&gt; not<br>
supporting <code>--jobs</code>.</p>
<blockquote>
<p>Are you sure 200<br>
jobs is a reasonable number?</p>
</blockquote>
<p>Might be unreasonable. Always worked on my build machines which have<br>
plenty of RAM.</p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/6</link>
        <pubDate>Thu, 13 Jul 2017 13:03:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-6</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[JasonJAyalaP]]></dc:creator>
        <description><![CDATA[
            <p>after checking out 14.0.0.4.0-developers only, I did clean and submodule update. Git status shows that many packages are modified. They all seems to be the same message:</p>
<pre><code>git diff packages/whonixsetup/
diff --git a/packages/whonixsetup b/packages/whonixsetup
--- a/packages/whonixsetup
+++ b/packages/whonixsetup
@@ -1 +1 @@
-Subproject commit 4a6295c7033b8c78555fc5bdf7aa758875d6d07f
+Subproject commit 4a6295c7033b8c78555fc5bdf7aa758875d6d07f-dirty</code></pre>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/5</link>
        <pubDate>Thu, 13 Jul 2017 02:20:44 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-5</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[JasonJAyalaP]]></dc:creator>
        <description><![CDATA[
            <p>Something wrong with the icedove package?</p>
<pre><code>Submodule path 'packages/apparmor-profile-anondist': checked out 'f5afeceb81f84b237b18973c54ff90ee5be3b8f7'
Submodule path 'packages/apparmor-profile-gwenview': checked out '5ade3b80856565cd75361b038b6a919ab7f51d49'
error: no such remote ref 6a051dc6512f8fe7daa9b5d62ec1a158ff01920b
Fetched in submodule path 'packages/apparmor-profile-icedove', but it did not contain 6a051dc6512f8fe7daa9b5d62ec1a158ff01920b. Direct fetching of that commit failed.
</code></pre>
<p>Did that error kill the recursive download or was it reported at the end?</p>
<p>I deleted the folder (in packages/) and cloned it directly fine.</p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/4</link>
        <pubDate>Thu, 13 Jul 2017 02:08:10 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-4</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[JasonJAyalaP]]></dc:creator>
        <description><![CDATA[
            <p>Why is the git option --jobs= whonix 14 but not 13?<br>
Are you sure 200 jobs is a reasonable number? (froze my GW). “The number of submodules fetched at the same time.” If this is mostly network, one submodule maxes out my tor (and clearnet/github.com) bandwidth.</p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/3</link>
        <pubDate>Thu, 13 Jul 2017 02:03:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-3</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>What is not documented there yet…</p>
<p>One thing which makes this quite cumbersome is… You can only easily do this procedure once. Well, you can rerrun this as often as you wish, but it won’t have any effect.</p>
<p>It’s because when you made changes to packages and rebuild those packages, they still have the same version number. apt-get still thinks it’s the same package, hence won’t update these. Does that so far make sense?</p>
<p>What I did in past is artificially bump the version number. Which is scripted. Btw before attempting to script such stuff, ask me, it might be already done.</p>
<p>Whatever package was changed…</p>
<pre><code>cd package-name
make deb-uachl-bumpup-major
</code></pre>
<p>To major version bump all packages at once… <code>whonix-developer-meta-files</code> script:</p>
<pre><code>./debug-steps/packaging-helper-script pkg_need_version_bump_do
</code></pre>
<p>Then the above procedure of upgrading from local repository can be repeated.</p>
<p>However, it can be confusing when later testing to upgrade from a remote repository. These will have sane version numbers which ear earlier than the maybe many times artificially for debugging purposes only locally bumped version numbers. So you’d wipe that development VM. Cumbersome?</p>
<p>Perhaps it would be better during debugging to just bump the minor version number?</p>
<hr>
<p>Anyhow. I weaseled myself out of this mess by using Qubes, where this is much more scripted.</p>
<ol>
<li>creating / updating the local repository</li>
<li>trying it out in some TemplateBased VM anon-whonix-dev or sys-whonix-dev using <a href="https://github.com/Whonix/whonix-developer-meta-files/blob/master/debug-steps/qubes-repo-temp">https://github.com/Whonix/whonix-developer-meta-files/blob/master/debug-steps/qubes-repo-temp</a>
</li>
<li>to revert, just shut down the TemplateBased VM and go back to 1)</li>
</ol>
<p>That of course only works for tests that don’t involve booting. But also TemplateVMs whonix-gw-dev- / whonix-ws-dev can be reverted using <code>qvm-revert-template-changes</code> for one change or by using <code>git</code> for <code>/var/lib/qubes/vm-templates/whonix-gw-dev</code>…</p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/2</link>
        <pubDate>Tue, 11 Jul 2017 22:54:19 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-2</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
      <item>
        <title>upgrading from local repository for Whonix 14 wiki page</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>As for upgrading from local repository… I updated (/created) this page. It’s lightly tested.</p>
<p><a href="https://www.whonix.org/wiki/Dev/Build_Documentation/14_deb" class="onebox" target="_blank">https://www.whonix.org/wiki/Dev/Build_Documentation/14_deb</a></p>
<p>Probably best tested on a workstation first - potentially less troublesome.</p>
<p>//cc <a class="mention" href="http://forums.whonix.org/u/jasonjayalap">@JasonJAyalaP</a></p>
          <p><a href="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121/1</link>
        <pubDate>Tue, 11 Jul 2017 22:39:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4121-1</guid>
        <source url="http://forums.whonix.org/t/upgrading-from-local-repository-for-whonix-14-wiki-page/4121.rss">upgrading from local repository for Whonix 14 wiki page</source>
      </item>
  </channel>
</rss>
