<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Managing programs without Tor DNS Support / orjail</title>
    <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840</link>
    <description>Jason suggested to modify
https://www.whonix.org/wiki/Dev/Default_Application_Policy in order to
not be adamant about properly working socks support for stream isolation.

Like not installing electrum by default because of this (
https://phabricator.whonix.org/T215 ) we let the perfect be the ennemy
of the good and let users stand in the rain.

HulaHoop:
&gt; Meanwhile I have a suggestion on how Gajim&#39;s traffic can be forced to use stream isolation. What if it is installed under its own user account and then you  can use bindp to force all traffic for that user over its own isolated stream? Does that make sense? Can it fix things?

bindp use case: ricochet or onionshare open a server port on 127.0.0.1 to be accessible from the hidden service incoming connection. This won&#39;t work in Whonix since the hidden service incoming connection is coming from Whonix-Gateway which is a non-localhost connection. bindp is used to force that application to listen on another interface so it can accept the connection. So bindp has nothing to do with it here since gajim doesn&#39;t open server ports / needs no unsolicited incoming connections.

Once we&#39;re using iptables redirection, no torsocks or anything is required. Perhaps we could have this a generic solution. Applications running under their own linux operating system user name, and then redirected... Wait... Redirect how and where? Could only be redirected to Tor&#39;s DnsPort / Tor&#39;s TransPort, so wouldn&#39;t solve any stream isolation issue. I wouldn&#39;t know any translation from operating system networking default traffic (and iptables) to socks that&#39;s why iptables can help with leak prevention but then connectivity just breaks since iptables is not a socksifier. Would be cool to have some iptables to socks tool. Dunno if that exists.</description>
    <language>en</language>
    <lastBuildDate>Fri, 31 Aug 2018 08:32:03 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/orjail/orjail/issues/46" target="_blank" rel="nofollow noopener">github.com/orjail/orjail</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/adrelanos" rel="nofollow noopener">
<img src="//forums.whonix.org/uploads/default/original/2X/7/770a15f475a1de4a6ba4d68ffb96bd85c7274aa0.jpg" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="https://github.com/orjail/orjail/issues/46" target="_blank" rel="nofollow noopener">Issue: why do we need all those checks (on iptables)? - use ERR trap</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/orjail/orjail/issues/46" target="_blank" rel="nofollow noopener">2018-08-31</a>
	</div>
	<div class="user">
	closed by <a href="https://github.com/lesion" target="_blank" rel="nofollow noopener">lesion</a>
	on <a href="https://github.com/orjail/orjail/issues/46" target="_blank" rel="nofollow noopener">2018-09-04</a>
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Instead of individual error handling per command....
iptables -I FORWARD -i in-"$NAME" -j DROP || \
 die "Failed to disable forwarding on...</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/orjail/orjail/issues/47" target="_blank" rel="nofollow noopener">github.com/orjail/orjail</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/adrelanos" rel="nofollow noopener">
<img src="//forums.whonix.org/uploads/default/original/2X/7/770a15f475a1de4a6ba4d68ffb96bd85c7274aa0.jpg" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="https://github.com/orjail/orjail/issues/47" target="_blank" rel="nofollow noopener">Issue: use linux domain socket files for better leak profness possible?</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/orjail/orjail/issues/47" target="_blank" rel="nofollow noopener">2018-08-31</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Some examples (not suggesting these as is, just for reference).
ControlSocket /var/run/tor/control GroupWritable RelaxDirModeCheck
SocksPort unix:/var/run/tor/socks WorldWritable
CookieAuthFile /var/run/tor/control.authcookie
Dunno if it's possible for Tor...</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/orjail/orjail/issues/48" target="_blank" rel="nofollow noopener">github.com/orjail/orjail</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/adrelanos" rel="nofollow noopener">
<img src="//forums.whonix.org/uploads/default/original/2X/7/770a15f475a1de4a6ba4d68ffb96bd85c7274aa0.jpg" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="https://github.com/orjail/orjail/issues/48" target="_blank" rel="nofollow noopener">Issue: use and reconfigure the host's Tor / circumvention/bridges support / keep existing Tor config</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/orjail/orjail/issues/48" target="_blank" rel="nofollow noopener">2018-08-31</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">#45 made me wonder.
Would it be sane to use the host's Tor?
That would have several advantages:
user could maintain Tor's Seccomp 1...</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/25">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/25</link>
        <pubDate>Fri, 31 Aug 2018 08:32:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-25</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/orjail/orjail/issues/41" target="_blank" rel="nofollow noopener">github.com/orjail/orjail</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/adrelanos" rel="nofollow noopener">
<img src="//forums.whonix.org/uploads/default/original/2X/7/770a15f475a1de4a6ba4d68ffb96bd85c7274aa0.jpg" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="https://github.com/orjail/orjail/issues/41" target="_blank" rel="nofollow noopener">Issue: allow running orjail without sudo by having orjail run sudo internally</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/orjail/orjail/issues/41" target="_blank" rel="nofollow noopener">2018-08-28</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">The flowing is a bit strange.
sudo orjail -y touch a
Will the file be owned by root or user? -&gt; user But...</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/24">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/24</link>
        <pubDate>Tue, 28 Aug 2018 21:08:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-24</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/orjail/orjail/issues/39" target="_blank" rel="nofollow noopener">github.com/orjail/orjail</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/adrelanos" rel="nofollow noopener">
<img src="//forums.whonix.org/uploads/default/original/2X/7/770a15f475a1de4a6ba4d68ffb96bd85c7274aa0.jpg" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="https://github.com/orjail/orjail/issues/39" target="_blank" rel="nofollow noopener">Issue: --yes should be default?</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/orjail/orjail/issues/39" target="_blank" rel="nofollow noopener">2018-08-28</a>
	</div>
	<div class="user">
	closed by <a href="https://github.com/lesion" target="_blank" rel="nofollow noopener">lesion</a>
	on <a href="https://github.com/orjail/orjail/issues/39" target="_blank" rel="nofollow noopener">2018-08-28</a>
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Without -y / --yes orjail interactively asks "Do you want to create it? [y/n]" I don't see if I am using...</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/orjail/orjail/issues/40" target="_blank" rel="nofollow noopener">github.com/orjail/orjail</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/adrelanos" rel="nofollow noopener">
<img src="//forums.whonix.org/uploads/default/original/2X/7/770a15f475a1de4a6ba4d68ffb96bd85c7274aa0.jpg" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="https://github.com/orjail/orjail/issues/40" target="_blank" rel="nofollow noopener">Issue: combine with torsocks good idea?</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/orjail/orjail/issues/40" target="_blank" rel="nofollow noopener">2018-08-28</a>
	</div>
	<div class="user">
	closed by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/orjail/orjail/issues/40" target="_blank" rel="nofollow noopener">2018-08-29</a>
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Would it make sense to add torsocks to the execution anyhow? To make it "even more leak proof"? --torsocks?
It could be...</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/23</link>
        <pubDate>Tue, 28 Aug 2018 20:52:25 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-23</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/orjail/orjail/issues/35" target="_blank" rel="nofollow noopener">github.com/orjail/orjail</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/adrelanos" rel="nofollow noopener">
<img src="//forums.whonix.org/uploads/default/original/2X/7/770a15f475a1de4a6ba4d68ffb96bd85c7274aa0.jpg" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="https://github.com/orjail/orjail/issues/35" target="_blank" rel="nofollow noopener">Issue: main focus of project?</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/orjail/orjail/issues/35" target="_blank" rel="nofollow noopener">2018-08-27</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">I am wondering what is the main focus of your project?
a) Adding torification to applications which don't come with native torification...</pre>

<div class="labels">
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">project</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">question</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/orjail/orjail/issues/36" target="_blank" rel="nofollow noopener">github.com/orjail/orjail</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/adrelanos" rel="nofollow noopener">
<img src="//forums.whonix.org/uploads/default/original/2X/7/770a15f475a1de4a6ba4d68ffb96bd85c7274aa0.jpg" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="https://github.com/orjail/orjail/issues/36" target="_blank" rel="nofollow noopener">Issue: support for ephemeral Tor hidden services / local listener support / onionshare</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/orjail/orjail/issues/36" target="_blank" rel="nofollow noopener">2018-08-27</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">onionshare
https://onionshare.org/
https://github.com/micahflee/onionshare/raw/develop/screenshots/server.png
uses ephemeral Tor onion services
it creates a local listener (mini http server serving the file to be shared)

ephemeral Tor onion services
This...</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/22</link>
        <pubDate>Mon, 27 Aug 2018 06:54:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-22</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/orjail/orjail/issues/34" target="_blank" rel="nofollow noopener">github.com/orjail/orjail</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/adrelanos" rel="nofollow noopener">
<img src="//forums.whonix.org/uploads/default/original/2X/7/770a15f475a1de4a6ba4d68ffb96bd85c7274aa0.jpg" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="https://github.com/orjail/orjail/issues/34" target="_blank" rel="nofollow noopener">Issue: extrarenous output by orjail on abort (CTRL + C / signal sigterm)</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
	on <a href="https://github.com/orjail/orjail/issues/34" target="_blank" rel="nofollow noopener">2018-08-27</a>
	</div>
	<div class="user">
	closed by <a href="https://github.com/lesion" target="_blank" rel="nofollow noopener">lesion</a>
	on <a href="https://github.com/orjail/orjail/issues/34" target="_blank" rel="nofollow noopener">2018-08-28</a>
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">How to reproduce:
Run sudo orjail -y curl https://check.torproject.org, press CTRL + C to abort.
Actual result:
Output by orjail.
^C * Received breakout signal
cat:...</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/21</link>
        <pubDate>Mon, 27 Aug 2018 06:08:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-21</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://github.com/orjail/orjail/issues/29" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/orjail/orjail/issues/29</a></p>
<p><a href="https://github.com/orjail/orjail/issues/30" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/orjail/orjail/issues/30</a></p>
<p><a href="https://github.com/orjail/orjail/issues/31" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/orjail/orjail/issues/31</a></p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/20</link>
        <pubDate>Sun, 19 Aug 2018 15:25:23 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-20</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://github.com/orjail/orjail/pull/27" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/orjail/orjail/pull/27</a></p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/19</link>
        <pubDate>Sun, 19 Aug 2018 15:03:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-19</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://github.com/orjail/orjail/issues/24" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/orjail/orjail/issues/24</a></p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/18</link>
        <pubDate>Tue, 14 Aug 2018 18:54:35 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-18</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://github.com/orjail/orjail/pull/21" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/orjail/orjail/pull/21</a></p>
<p><a href="https://github.com/orjail/orjail/issues/22" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/orjail/orjail/issues/22</a></p>
<p><a href="https://github.com/orjail/orjail/issues/23" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/orjail/orjail/issues/23</a></p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/17</link>
        <pubDate>Wed, 08 Aug 2018 07:53:59 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-17</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Bonus: it integrates with firejail too <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/16</link>
        <pubDate>Wed, 08 Aug 2018 01:39:45 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-16</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://github.com/orjail/orjail/issues/20" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/orjail/orjail/issues/20</a></p>
<p>orjail doesn’t have stream isolation support yet but that should be doable to add.</p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/15</link>
        <pubDate>Tue, 07 Aug 2018 11:57:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-15</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Looks like the following does almost that. Untested. Looks interesting.</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://github.githubassets.com/favicon.ico" class="site-icon" width="32" height="32">
      <a href="https://github.com/orjail/orjail" target="_blank" rel="nofollow noopener">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="//forums.whonix.org/uploads/default/original/2X/8/88a925fed0758bacb3951ba055fa98994704824c.png" class="thumbnail onebox-avatar" width="420" height="420">

<h3><a href="https://github.com/orjail/orjail" target="_blank" rel="nofollow noopener">orjail/orjail</a></h3>

<p>a more secure way to force programs to exclusively use tor network - orjail/orjail</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p><a href="https://orjail.github.io/" class="onebox" target="_blank" rel="nofollow noopener">https://orjail.github.io/</a></p>
<p><a href="https://lists.torproject.org/pipermail/tor-talk/2018-July/044330.html" class="onebox" target="_blank" rel="nofollow noopener">https://lists.torproject.org/pipermail/tor-talk/2018-July/044330.html</a></p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/14</link>
        <pubDate>Tue, 07 Aug 2018 11:31:05 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-14</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Summary way forward:</p>
<p>As uwt/torsocks replacement…</p>
<p>Run application either</p>
<p>a) under its own linux user name (problematic linux access rights) OR<br>
b) under its own linux network namespace (strongly preferred)</p>
<p>then redirect to pre-configured Tor <code>TransPort</code>s or <code>DnsPort</code>s.</p>
<p>(Similar to how we currently pre-configure multiple Tor <code>SocksPort</code>s currently.)</p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/13</link>
        <pubDate>Tue, 22 May 2018 02:07:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-13</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="1" data-topic="4840">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Redirect how and where? Could only be redirected to Tor’s DnsPort / Tor’s TransPort, so wouldn’t solve any stream isolation issue.</p>
</blockquote>
</aside>
<p>Solution: multiple Tor <code>TransPort</code>s and <code>DnsPort</code>s pre-configured.</p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/12</link>
        <pubDate>Tue, 22 May 2018 02:03:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-12</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="4" data-topic="4840">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>linux user account</p>
</blockquote>
</aside>
<p>That might require to modify $HOME variable and allowing the other linux user account name to write to user <code>user</code>'s folder. Probably solvable.</p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/11</link>
        <pubDate>Wed, 28 Feb 2018 17:08:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-11</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>No, I meant <code>AORTA a transparent Tor proxy for Linux programs</code>.</p>
<p><a href="https://hoevenstein.nl/aorta-a-transparent-tor-proxy-for-linux-programs" class="onebox" target="_blank">https://hoevenstein.nl/aorta-a-transparent-tor-proxy-for-linux-programs</a></p>
<p>It uses iptables internally.</p>
<p>In <a href="https://hoevenstein.nl/source-code">https://hoevenstein.nl/source-code</a> search for</p>
<p><code>"-t nat -A aorta -d 127.0.0.0/8 -p udp -m udp ! --dport 53 -j RETURN",</code></p>
<p>etc.</p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/10</link>
        <pubDate>Wed, 14 Feb 2018 10:41:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-10</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>You mean <a href="https://www.mulliner.org/collin/ttdnsd.php">https://www.mulliner.org/collin/ttdnsd.php</a> ? It uses LD_PRELOAD instead of iptables AFAICT. I am not sure it can do application specific routing by itself. solutions that use LD_PRELOAD are said to be easily circumvented by the tunsocks author. I don’t know if he meant accidental or deliberate malicious actions. If we are talking malfeasance then we have bigger problems. Also we wouldn’t ever install a malicious program on purpose so it s a moot point.</p>
<p>IMO tunsocks is our best bet since it does all the program specific namespace redirection leg work. Though it does not support UDP, it is able to encapsulate DNS with TCP and forward it to the socks server you want.</p>
<p>(tunsocks should not be confused with tun2socks - the latter a part of a feature rich suite known as badvpn)</p>
<aside class="quote" data-post="29" data-topic="708">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"><a href="//forums.whonix.org/t/gajim-messenger/708/29">Gajim Messenger</a>
</div>
<blockquote>
<p>I guess such a tool could be written in bash or python. At the moment I</p>
<p>see no reason to go for C.</p>
</blockquote>
</aside>
<p>Depending on the re-write difficulty, I wouldn’t worry much about language safety because it runs in the WS.</p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/9</link>
        <pubDate>Tue, 13 Feb 2018 18:02:37 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-9</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Yes.</p>
<p>Also did you mention another torification tool lately? That had even a bit shorter code. Was written in C and used iptables commands internally if I remember right.</p>
<p>I guess such a tool could be written in bash or python. At the moment I see no reason to go for C.</p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/8</link>
        <pubDate>Mon, 12 Feb 2018 22:04:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-8</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Aside from the author’s opinion and the fact that badvpn is not packed in Debian, he gives a clue on how to use namespaces to redirect inidiviual processes with redsocks.</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/phillipberndt/scripts/blob/master/tunsocks/tunsocks.cc" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/phillipberndt/scripts/blob/master/tunsocks/tunsocks.cc" target="_blank" rel="nofollow noopener">phillipberndt/scripts/blob/master/tunsocks/tunsocks.cc</a></h4>
<pre><code class="lang-cc">// tunsocks -- Tunnel a process through a socks server
// Copyright (c) 2016, Phillip Berndt
//
// This is a new approach: The program sets up a TUN device inside an anonymous
// network namespace and relays all traffic through that device to the proxy.
// The device is set as the namespace's default route. The target process is
// then started within said namespace.
//
// This has some benefits over existing solutions:
//
// tsocks uses LD_PRELOAD to patch the socket() etc. calls. This can be easily
// circumvented.
//
// redsocks does transparent proxying by using iptables' REDIRECT. This is
// feasible for system-wide redirection, but it is hard to isolate a single
// process. The only options to to that were either to use a different UID,
// which is pretty secure, but also restricts what you can to with the
// process in other ways, or to use network namespaces with virtual devices,
// and to set up the rule only for traffic from the endpoint in the global
// namespace. It is a pain to configure this.
</code></pre>

  This file has been truncated. <a href="https://github.com/phillipberndt/scripts/blob/master/tunsocks/tunsocks.cc" target="_blank" rel="nofollow noopener">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<blockquote>
<p>// redsocks does transparent proxying by using iptables’ REDIRECT. This is<br>
// feasible for system-wide redirection, but it is hard to isolate a single<br>
// process. The only options to to that were either to use a different UID,<br>
// which is pretty secure, but also restricts what you can to with the<br>
// process in other ways, or to use network namespaces with virtual devices,<br>
// and to set up the rule only for traffic from the endpoint in the global<br>
// namespace. It is a pain to configure this.</p>
</blockquote>
<p>EDIT:</p>
<p>Found an intro on network namespaces</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="//forums.whonix.org/uploads/default/original/2X/e/e3ab9932ec4122e287ecab561115b35feded05c7.png" class="site-icon" width="32" height="32">
      <a href="https://lwn.net/Articles/580893/" target="_blank" rel="nofollow noopener">lwn.net</a>
  </header>
  <article class="onebox-body">
    

<h3><a href="https://lwn.net/Articles/580893/" target="_blank" rel="nofollow noopener">Namespaces in operation, part 7: Network namespaces [LWN.net]</a></h3>

<p>It's been a while since last we looked at Linux namespaces.  Our
series has been missing a piece that we are finally filling
in: network namespaces.  As the name would imply, network namespaces
partition the use of the network—devices, addresses,...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/7</link>
        <pubDate>Mon, 12 Feb 2018 20:05:26 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-7</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="25" data-topic="708">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"><a href="//forums.whonix.org/t/gajim-messenger/708/25">Gajim Messenger</a>
</div>
<blockquote>
<p>redsocks might work to restrict applications running under a specific user so these get stream isolated with better guarantee. Better than torsocks, but worse less guarantee than a split network architecture (isolating proxy). Anyhow. Worthwhile.</p>
</blockquote>
</aside>
<p>Now we’re talkin <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<aside class="quote" data-post="25" data-topic="708">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"><a href="//forums.whonix.org/t/gajim-messenger/708/25">Gajim Messenger</a>
</div>
<blockquote>
<p>Perhaps the whole thing could be automated with linux network namespaces. I.e. run some command, that creates a (temporary?) linux user account (and/or linux network namespace), forces all connections to redsocks which then forwards to a Tor SocksPort. We could use the same Tor SocksPort and then have configure redsocks to use a different socks user name so Tor will stream isolate it. It’s like inventing a new tool.</p>
</blockquote>
</aside>
<p>Sounds good. I’ll look into it. Many Whonix programs are very specialized for our own purposes anyhow. At least you write once, run everywhere later. It will really give us flexibility to expand our software selection without having to compromise on stream isolation or butt heads against upstream limitations.</p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/6</link>
        <pubDate>Mon, 12 Feb 2018 16:35:55 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-6</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Related to redsocks:</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/QubesOS/qubes-issues/issues/1536#issuecomment-364902122" target="_blank" rel="nofollow noopener">github.com/QubesOS/qubes-issues</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/hdevalence" rel="nofollow noopener">
<img src="//forums.whonix.org/uploads/default/original/2X/0/03e3b477c05c02d4c6d3c862ff85bd7336365243.png" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="https://github.com/QubesOS/qubes-issues/issues/1536#issuecomment-364902122" target="_blank" rel="nofollow noopener">Issue: Transparent SSH SOCKS proxy for Qubes</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/hdevalence" target="_blank" rel="nofollow noopener">hdevalence</a>
	on <a href="https://github.com/QubesOS/qubes-issues/issues/1536#issuecomment-364902122" target="_blank" rel="nofollow noopener">2015-12-22</a>
	</div>
	<div class="user">
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Hi. I'd like to implement a transparent SOCKS proxy for Qubes using SSH.
This way a user can transparently tunnel all traffic...</pre>

<div class="labels">
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">P: major</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">enhancement</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">help wanted</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<hr>
<p>Even mentioned in Whonix wiki:</p>
<p><a href="https://www.whonix.org/w/index.php?search=redsocks&amp;fulltext=Search" class="onebox" target="_blank" rel="nofollow noopener">https://www.whonix.org/w/index.php?search=redsocks&amp;fulltext=Search</a></p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/5</link>
        <pubDate>Mon, 12 Feb 2018 15:32:03 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-5</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>redsocks might work to restrict applications running under a specific user so these get stream isolated with better guarantee. Better than torsocks, but worse less guarantee than a split network architecture (isolating proxy). Anyhow. Worthwhile.</p>
<p>Perhaps the whole thing could be automated with linux network namespaces. I.e. run some command, that creates a (temporary?) linux user account (and/or linux network namespace), forces all connections to redsocks which then forwards to a Tor SocksPort. We could use the same Tor SocksPort and then have configure redsocks to use a different socks user name so Tor will stream isolate it. It’s like inventing a new tool.</p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/4</link>
        <pubDate>Mon, 12 Feb 2018 09:49:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-4</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <p>Other useful tools in case the previous were duds:</p>
<p><a href="https://www.mulliner.org/collin/ttdnsd.php" class="onebox" target="_blank" rel="nofollow noopener">https://www.mulliner.org/collin/ttdnsd.php</a><br>
<a href="https://gitweb.torproject.org/ioerror/ttdnsd.git" class="onebox" target="_blank" rel="nofollow noopener">https://gitweb.torproject.org/ioerror/ttdnsd.git</a></p>
<blockquote>
<p>ttdnsd accepts DNS requests via UDP and forwards the to a resolving nameserver via TCP. The actual requests are really just forwarded so one has complete access to the nameserver ttdnsd is talking to.</p>
<p>ttdnsd only connects to the resolving nameserver after receiving a request via UDP. For each connection ttdnsd randomly selects one of the nameservers it knows about (see OPTIONS below). The connection will be used for forwarding multiple requests in a pipelined fashion and is kept open only until no more requests are received via UDP. This pipelining is required to overcome the initial connection overhead time which is quite long when using TOR.</p>
</blockquote>
<hr>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://github.githubassets.com/favicon.ico" class="site-icon" width="32" height="32">
      <a href="https://github.com/vi/tcpsocks" target="_blank" rel="nofollow noopener">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="//forums.whonix.org/uploads/default/original/2X/3/31170ea59cda4db8a8826f6228fb1677f2a0e213.png" class="thumbnail onebox-avatar" width="400" height="400">

<h3><a href="https://github.com/vi/tcpsocks" target="_blank" rel="nofollow noopener">vi/tcpsocks</a></h3>

<p>Redirect traffic to SOCKS5 server with iptables, epoll based, single threaded. - vi/tcpsocks</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<blockquote>
<p>Simple Linux epoll-based single thread SOCKS5 client. Supports getting destination address with SO_ORIGINAL_DST (for use with -j REDIRECT iptables target) and telling that address to SOCKS server.</p>
<p>Alternative, more complete libevent-based implementation: redsocks</p>
</blockquote>
<p>No licensing info found</p>
<hr>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://github.githubassets.com/favicon.ico" class="site-icon" width="32" height="32">
      <a href="https://github.com/n1nj4sec/pr0cks" target="_blank" rel="nofollow noopener">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="//forums.whonix.org/uploads/default/original/2X/4/4e54c0cdafd91b2d81a36544080d20cfd66e9e2f.png" class="thumbnail onebox-avatar" width="336" height="336">

<h3><a href="https://github.com/n1nj4sec/pr0cks" target="_blank" rel="nofollow noopener">n1nj4sec/pr0cks</a></h3>

<p>python script setting up a transparent proxy to forward all TCP and DNS traffic through a SOCKS / SOCKS5 or HTTP(CONNECT) proxy using iptables -j REDIRECT target - n1nj4sec/pr0cks</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<blockquote>
<p>python script setting up a transparent proxy to forward all TCP and DNS traffic through a SOCKS / SOCKS5 or HTTP(CONNECT) proxy using iptables -j REDIRECT target</p>
</blockquote>
<p>Free license</p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/3</link>
        <pubDate>Sun, 11 Feb 2018 17:25:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-3</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[HulaHoop]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group quote-modified" data-post="22" data-topic="708">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_2.png" class="avatar"><a href="//forums.whonix.org/t/gajim-messenger/708/22">Gajim Messenger</a>
</div>
<blockquote>
<p>Jason suggested to modify</p>
<p><a href="https://www.whonix.org/wiki/Dev/Default_Application_Policy" rel="nofollow noopener">https://www.whonix.org/wiki/Dev/Default_Application_Policy</a> in order to</p>
<p>not be adamant about properly working socks support for stream isolation.</p>
<p>Like not installing electrum by default because of this (</p>
<p><a href="https://phabricator.whonix.org/T215" rel="nofollow noopener">https://phabricator.whonix.org/T215</a> ) we let the perfect be the ennemy</p>
<p>of the good and let users stand in the rain.</p>
</blockquote>
</aside>
<p>Indeed it might be the wisest thing to do if no other choice exists. At least it will make it easier for users to have safely configured apps, especially if they are intent on manually installing them anyway.</p>
<hr>
<p>I did some digging. Its possible with redsocks to redirect DNS over TCP. Here is a detailed outline of the options you have with redsocks:</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/darkk/redsocks/issues/111#issuecomment-362390292" target="_blank" rel="nofollow noopener">github.com/darkk/redsocks</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/CROSP" rel="nofollow noopener">
<img src="//forums.whonix.org/uploads/default/original/2X/1/151c83674f2b743f78932fb31242fb1c5f293454.jpg" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="https://github.com/darkk/redsocks/issues/111#issuecomment-362390292" target="_blank" rel="nofollow noopener">Issue: DNS queries through a SOCKS5 proxy</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/CROSP" target="_blank" rel="nofollow noopener">CROSP</a>
	on <a href="https://github.com/darkk/redsocks/issues/111#issuecomment-362390292" target="_blank" rel="nofollow noopener">2017-08-30</a>
	</div>
	<div class="user">
	closed by <a href="https://github.com/darkk" target="_blank" rel="nofollow noopener">darkk</a>
	on <a href="https://github.com/darkk/redsocks/issues/111#issuecomment-362390292" target="_blank" rel="nofollow noopener">2018-02-01</a>
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Hi, I know that this topic have been discussed several times already, but I still having troubles with setting it up.
I...</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>OP has combined it with iptables though in his case, the software he’s using isn’t working but its a useful example of how it hcan be done:</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/darkk/redsocks/issues/111#issue-253926156" target="_blank" rel="nofollow noopener">github.com/darkk/redsocks</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/CROSP" rel="nofollow noopener">
<img src="//forums.whonix.org/uploads/default/original/2X/1/151c83674f2b743f78932fb31242fb1c5f293454.jpg" class="thumbnail onebox-avatar" width="96" height="96">
</a>

<h4><a href="https://github.com/darkk/redsocks/issues/111#issue-253926156" target="_blank" rel="nofollow noopener">Issue: DNS queries through a SOCKS5 proxy</a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/CROSP" target="_blank" rel="nofollow noopener">CROSP</a>
	on <a href="https://github.com/darkk/redsocks/issues/111#issue-253926156" target="_blank" rel="nofollow noopener">2017-08-30</a>
	</div>
	<div class="user">
	closed by <a href="https://github.com/darkk" target="_blank" rel="nofollow noopener">darkk</a>
	on <a href="https://github.com/darkk/redsocks/issues/111#issue-253926156" target="_blank" rel="nofollow noopener">2018-02-01</a>
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">Hi, I know that this topic have been discussed several times already, but I still having troubles with setting it up.
I...</pre>

<div class="labels">
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Another tool that des something similar is <a href="https://github.com/jtripper/dns-tcp-socks-proxy" rel="nofollow noopener">https://github.com/jtripper/dns-tcp-socks-proxy</a></p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/2</link>
        <pubDate>Sun, 11 Feb 2018 16:37:12 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-2</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
      <item>
        <title>Managing programs without Tor DNS Support / orjail</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Jason suggested to modify<br>
<a href="https://www.whonix.org/wiki/Dev/Default_Application_Policy">https://www.whonix.org/wiki/Dev/Default_Application_Policy</a> in order to<br>
not be adamant about properly working socks support for stream isolation.</p>
<p>Like not installing electrum by default because of this (<br>
<a href="https://phabricator.whonix.org/T215">https://phabricator.whonix.org/T215</a> ) we let the perfect be the ennemy<br>
of the good and let users stand in the rain.</p>
<p>HulaHoop:</p>
<blockquote>
<p>Meanwhile I have a suggestion on how Gajim’s traffic can be forced to use stream isolation. What if it is installed under its own user account and then you  can use bindp to force all traffic for that user over its own isolated stream? Does that make sense? Can it fix things?</p>
</blockquote>
<p>bindp use case: ricochet or onionshare open a server port on 127.0.0.1 to be accessible from the hidden service incoming connection. This won’t work in Whonix since the hidden service incoming connection is coming from Whonix-Gateway which is a non-localhost connection. bindp is used to force that application to listen on another interface so it can accept the connection. So bindp has nothing to do with it here since gajim doesn’t open server ports / needs no unsolicited incoming connections.</p>
<p>Once we’re using iptables redirection, no torsocks or anything is required. Perhaps we could have this a generic solution. Applications running under their own linux operating system user name, and then redirected… Wait… Redirect how and where? Could only be redirected to Tor’s DnsPort / Tor’s TransPort, so wouldn’t solve any stream isolation issue. I wouldn’t know any translation from operating system networking default traffic (and iptables) to socks that’s why iptables can help with leak prevention but then connectivity just breaks since iptables is not a socksifier. Would be cool to have some iptables to socks tool. Dunno if that exists.</p>
          <p><a href="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840/1</link>
        <pubDate>Sun, 11 Feb 2018 12:03:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4840-1</guid>
        <source url="http://forums.whonix.org/t/managing-programs-without-tor-dns-support-orjail/4840.rss">Managing programs without Tor DNS Support / orjail</source>
      </item>
  </channel>
</rss>
