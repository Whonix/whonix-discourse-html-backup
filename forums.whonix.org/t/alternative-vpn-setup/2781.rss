<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Alternative VPN setup</title>
    <link>http://forums.whonix.org/t/alternative-vpn-setup/2781</link>
    <description>I&#39;m setting up Workstation -&gt; TOR -&gt; VPN -&gt; Web

For some reasons this instructions do not work for me - 
https://www.whonix.org/wiki/Tunnels/Connecting_to_Tor_before_a_VPN#Inside_Whonix-Workstation

But I found other way to do it:
In &quot;clean&quot; Workstation  I start 
sudo openvpn --config vpn-config.ovpn
And untill I stop it all my connections go through VPN.

Is it possible to configure fail close mechanism here?

Are there some security problems with this setup comparing using integrated Whonix TUNNEL_FIREWALL feature?</description>
    <language>en</language>
    <lastBuildDate>Mon, 22 Aug 2016 06:08:41 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Alternative VPN setup</title>
        <dc:creator><![CDATA[Usernamer]]></dc:creator>
        <description><![CDATA[
            <p>Thanks, this solved my problem.</p>
          <p><a href="http://forums.whonix.org/t/alternative-vpn-setup/2781/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/alternative-vpn-setup/2781/15</link>
        <pubDate>Mon, 22 Aug 2016 06:08:41 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2781-15</guid>
        <source url="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss">Alternative VPN setup</source>
      </item>
      <item>
        <title>Alternative VPN setup</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="13" data-topic="2781">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/u/a87d85/40.png" class="avatar"> Usernamer:</div>
<blockquote>
<p>sudo systemctl enable openvpn@country</p>
</blockquote>
</aside>
<p>Only <code>openvpn@openvpn</code> comes pre-configured.</p>
<p><a href="https://github.com/Whonix/usability-misc/blob/master/lib/systemd/system/openvpn%40openvpn.service.d/50_unpriv.conf">https://github.com/Whonix/usability-misc/blob/master/lib/systemd/system/openvpn%40openvpn.service.d/50_unpriv.conf</a></p>
          <p><a href="http://forums.whonix.org/t/alternative-vpn-setup/2781/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/alternative-vpn-setup/2781/14</link>
        <pubDate>Thu, 11 Aug 2016 19:27:09 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2781-14</guid>
        <source url="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss">Alternative VPN setup</source>
      </item>
      <item>
        <title>Alternative VPN setup</title>
        <dc:creator><![CDATA[Usernamer]]></dc:creator>
        <description><![CDATA[
            <p>Ah you are correct, it is able to run manually. My provider does not block tor and allows 443. Just not automatically while enabling the systemd service.</p>
<p>Maybe this is because systemd runs it as root? I did specify <code>user tunnel</code> in the openvpn configuration file. I enabled the configuration file with <code>sudo systemctl enable openvpn@country</code> and the configuration file sits at <code>/etc/openvpn/country.conf</code>. Here’s the connection log:</p>
<pre><code>Thu Aug 11 12:33:10 2016 OpenVPN 2.3.4 i586-pc-linux-gnu [SSL (OpenSSL)] [LZO] [EPOLL] [PKCS11] [MH] [IPv6] built on Nov 19 2015
Thu Aug 11 12:33:10 2016 library versions: OpenSSL 1.0.1t  3 May 2016, LZO 2.08
Thu Aug 11 12:33:10 2016 WARNING: file 'pass' is group or others accessible
Thu Aug 11 12:33:10 2016 NOTE: the current --script-security setting may allow this configuration to call user-defined scripts
Thu Aug 11 12:33:10 2016 Control Channel Authentication: tls-auth using INLINE static key file
Thu Aug 11 12:33:10 2016 Outgoing Control Channel Authentication: Using 160 bit message hash 'SHA1' for HMAC authentication
Thu Aug 11 12:33:10 2016 Incoming Control Channel Authentication: Using 160 bit message hash 'SHA1' for HMAC authentication
Thu Aug 11 12:33:10 2016 Socket Buffers: R=[87380-&gt;131072] S=[16384-&gt;131072]
Thu Aug 11 12:33:10 2016 NOTE: UID/GID downgrade will be delayed because of --client, --pull, or --up-delay
Thu Aug 11 12:33:10 2016 Attempting to establish TCP connection with [AF_INET]xx:443 [nonblock]
Thu Aug 11 12:33:20 2016 TCP: connect to [AF_INET]xxx:443 failed, will try again in 5 seconds: Connection timed out
</code></pre>
<p>Also tried to disable the whonix workstation firewall, but didn’t have an effect.</p>
<p>Referencing: <a href="https://forums.whonix.org/t/debian-jessie-vm-configured-with-a-vpn-vs-whonix-workstation-configured-with-a-vpn/2845">Debian jessie vm configured with a VPN vs whonix workstation configured with a VPN</a></p>
          <p><a href="http://forums.whonix.org/t/alternative-vpn-setup/2781/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/alternative-vpn-setup/2781/13</link>
        <pubDate>Thu, 11 Aug 2016 12:48:36 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2781-13</guid>
        <source url="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss">Alternative VPN setup</source>
      </item>
      <item>
        <title>Alternative VPN setup</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="11" data-topic="2781">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/u/a87d85/40.png" class="avatar"> Usernamer:</div>
<blockquote>
<p>Does the firewall somehow block port 443?</p>
</blockquote>
</aside>
<p>No. The <code>tunnel</code> user under which <code>openvpn</code> is running is free to do anything.</p>
<aside class="quote" data-post="9" data-topic="2781">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/u/a87d85/40.png" class="avatar"> Usernamer:</div>
<blockquote>
<p>But basically all the troubleshooting command does is to start openvpn manually right?</p>
</blockquote>
</aside>
<p>Yes.</p>
<aside class="quote" data-post="11" data-topic="2781">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/u/a87d85/40.png" class="avatar"> Usernamer:</div>
<blockquote>
<p>What else do you want me to post?</p>
</blockquote>
</aside>
<p>Full openvpn connection log of 1 attempt. You can redact IP, times and provider name for privacy reasons and since it’s mostly irrelevant. Same for openvpn.conf.</p>
<p>Perhaps your VPN provider is blocking connections from the Tor network? Please ask your VPN provider if that could be the case.</p>
<p>Perhaps your VPN provider does not support TCP?</p>
<p>Can you use OpenVPN using the standard instructions without fail closed mechanism for testing purposes only? Then we could rule out we are chasing a ghost here, namely a configuration or (less likely) Whonix issue.</p>
          <p><a href="http://forums.whonix.org/t/alternative-vpn-setup/2781/12">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/alternative-vpn-setup/2781/12</link>
        <pubDate>Wed, 10 Aug 2016 19:36:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2781-12</guid>
        <source url="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss">Alternative VPN setup</source>
      </item>
      <item>
        <title>Alternative VPN setup</title>
        <dc:creator><![CDATA[Usernamer]]></dc:creator>
        <description><![CDATA[
            <p>I have updated my previous message. One thing I’ve noticed is that the openvpn example in the documentation tries to connect to port 80, and I’m trying to connect to 443. Does the firewall somehow block port 443? What other troubleshooting options do I have? What else do you want me to post? I can post all the changes I’ve made if you would like me to.</p>
          <p><a href="http://forums.whonix.org/t/alternative-vpn-setup/2781/11">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/alternative-vpn-setup/2781/11</link>
        <pubDate>Wed, 10 Aug 2016 18:14:30 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2781-11</guid>
        <source url="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss">Alternative VPN setup</source>
      </item>
      <item>
        <title>Alternative VPN setup</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Error message?</p>
<p>/etc/openvpn file permissions?</p>
<p>Fix them? ( <a href="https://www.whonix.org/wiki/Tunnels/Connecting_to_Tor_before_a_VPN#Configuration_Folder_Permissions">https://www.whonix.org/wiki/Tunnels/Connecting_to_Tor_before_a_VPN#Configuration_Folder_Permissions</a> )</p>
          <p><a href="http://forums.whonix.org/t/alternative-vpn-setup/2781/10">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/alternative-vpn-setup/2781/10</link>
        <pubDate>Wed, 10 Aug 2016 17:59:20 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2781-10</guid>
        <source url="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss">Alternative VPN setup</source>
      </item>
      <item>
        <title>Alternative VPN setup</title>
        <dc:creator><![CDATA[Usernamer]]></dc:creator>
        <description><![CDATA[
            <p>Error opening configuration file when running: sudo -u tunnel openvpn /etc/openvpn/openvpn.conf</p>
<p>/etc/openvpn permissions are 755 and tunnel:tunnel</p>
<p>sudo chmod 755 -R /etc/openvpn<br>
sudo chown tunnel:tunnel -R /etc/openvpn</p>
<p><a href="https://stackoverflow.com/questions/35258895/openvpn-ubuntu-error-opening-configuration-file" class="onebox" target="_blank" rel="nofollow noopener">https://stackoverflow.com/questions/35258895/openvpn-ubuntu-error-opening-configuration-file</a><br>
</p><aside class="onebox stackexchange">
  <header class="source">
      <a href="https://serverfault.com/questions/773206/openvpn-error-opening-configuration-file" target="_blank" rel="nofollow noopener">serverfault.com</a>
  </header>
  <article class="onebox-body">
      <a href="https://serverfault.com/users/342739/%d0%9c%d0%b8%d1%85%d0%b0%d0%b8%d0%bb-%d0%9f%d0%b0%d0%b2%d0%bb%d0%be%d0%b2" target="_blank" rel="nofollow noopener">
    <img alt="Михаил Павлов" src="https://graph.facebook.com/1087476004607060/picture?type=large" class="thumbnail onebox-avatar" width="200" height="200">
  </a>
<h4>
  <a href="https://serverfault.com/questions/773206/openvpn-error-opening-configuration-file" target="_blank" rel="nofollow noopener">Openvpn Error opening configuration file:</a>
</h4>

<div class="tags">
  <strong>configuration, openvpn, centos7</strong>
</div>

<div class="date">
  asked by
  
  <a href="https://serverfault.com/users/342739/%d0%9c%d0%b8%d1%85%d0%b0%d0%b8%d0%bb-%d0%9f%d0%b0%d0%b2%d0%bb%d0%be%d0%b2" target="_blank" rel="nofollow noopener">
    Михаил Павлов
  </a>
  on <a href="https://serverfault.com/questions/773206/openvpn-error-opening-configuration-file" target="_blank" rel="nofollow noopener">08:49AM - 27 Apr 16</a>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<p>Can’t find an answer so far to that error.</p>
<p>But basically all the troubleshooting command does is to start openvpn manually right? In that case bootstrapping openvpn gets stuck at:</p>
<p>Wed Aug 10 16:41:46 2016 TCP: connect to [AF_INET]ip-address:443 failed, will try again in 5 seconds: Connection timed out</p>
          <p><a href="http://forums.whonix.org/t/alternative-vpn-setup/2781/9">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/alternative-vpn-setup/2781/9</link>
        <pubDate>Wed, 10 Aug 2016 17:57:58 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2781-9</guid>
        <source url="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss">Alternative VPN setup</source>
      </item>
      <item>
        <title>Alternative VPN setup</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>What was the result of the debug start?</p>
          <p><a href="http://forums.whonix.org/t/alternative-vpn-setup/2781/8">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/alternative-vpn-setup/2781/8</link>
        <pubDate>Wed, 10 Aug 2016 17:56:21 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2781-8</guid>
        <source url="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss">Alternative VPN setup</source>
      </item>
      <item>
        <title>Alternative VPN setup</title>
        <dc:creator><![CDATA[Usernamer]]></dc:creator>
        <description><![CDATA[
            <p>I have tried all of those</p>
          <p><a href="http://forums.whonix.org/t/alternative-vpn-setup/2781/7">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/alternative-vpn-setup/2781/7</link>
        <pubDate>Wed, 10 Aug 2016 17:55:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2781-7</guid>
        <source url="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss">Alternative VPN setup</source>
      </item>
      <item>
        <title>Alternative VPN setup</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://www.whonix.org/wiki/Tunnels/Connecting_to_Tor_before_a_VPN#Troubleshooting">https://www.whonix.org/wiki/Tunnels/Connecting_to_Tor_before_a_VPN#Troubleshooting</a> ?</p>
          <p><a href="http://forums.whonix.org/t/alternative-vpn-setup/2781/6">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/alternative-vpn-setup/2781/6</link>
        <pubDate>Wed, 10 Aug 2016 17:55:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2781-6</guid>
        <source url="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss">Alternative VPN setup</source>
      </item>
      <item>
        <title>Alternative VPN setup</title>
        <dc:creator><![CDATA[Usernamer]]></dc:creator>
        <description><![CDATA[
            <p>I have the same problem, instructions are also not working for me. Openvpn is unable to connect to an openvpn server on tcp port 443 inside Whonix Workstation. Followed every step in the guide closely. If you want me to I can elaborate the exact configuration changes I’ve made. What troubleshooting options do I have left?</p>
          <p><a href="http://forums.whonix.org/t/alternative-vpn-setup/2781/5">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/alternative-vpn-setup/2781/5</link>
        <pubDate>Wed, 10 Aug 2016 17:54:02 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2781-5</guid>
        <source url="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss">Alternative VPN setup</source>
      </item>
      <item>
        <title>Alternative VPN setup</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="3" data-topic="2781">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/n/c5a1d2/40.png" class="avatar"> nova:</div>
<blockquote>
<p>Is it more safe to run openvpn under regular user?</p>
</blockquote>
</aside>
<p>Generally recommended.</p>
<p>I am myself skeptical about it:<br>
<a href="https://www.whonix.org/wiki/Dev/Permissions">https://www.whonix.org/wiki/Dev/Permissions</a></p>
          <p><a href="http://forums.whonix.org/t/alternative-vpn-setup/2781/4">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/alternative-vpn-setup/2781/4</link>
        <pubDate>Wed, 27 Jul 2016 12:36:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2781-4</guid>
        <source url="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss">Alternative VPN setup</source>
      </item>
      <item>
        <title>Alternative VPN setup</title>
        <dc:creator><![CDATA[nova]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="2" data-topic="2781">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>And user root is not a good choice as tunnel user because many things run under user root. The basic idea behind the fail closed mechanism is “only have the OpenVPN process” or “only have the tunnel user” allowed to establish external network connections.</p>
</blockquote>
</aside>
<p>Is it more safe to run openvpn under regular user?</p>
<p>As far as I understand using this setup I loose fail close mechanism only.<br>
And the only problem is that when VPN server is down my connections will go via TOR?<br>
I think it is not so bad in terms of privacy and anonymity.</p>
          <p><a href="http://forums.whonix.org/t/alternative-vpn-setup/2781/3">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/alternative-vpn-setup/2781/3</link>
        <pubDate>Tue, 26 Jul 2016 08:56:51 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2781-3</guid>
        <source url="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss">Alternative VPN setup</source>
      </item>
      <item>
        <title>Alternative VPN setup</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="1" data-topic="2781">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/n/c5a1d2/40.png" class="avatar"> nova:</div>
<blockquote>
<p>Is it possible to configure fail close mechanism here?</p>
</blockquote>
</aside>
<p>No, unless reinventing Whonix TUNNEL_FIREWALL / standalone VPN-Firewall.</p>
<aside class="quote" data-post="1" data-topic="2781">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/n/c5a1d2/40.png" class="avatar"> nova:</div>
<blockquote>
<p>Are there some security problems with this setup comparing using integrated Whonix TUNNEL_FIREWALL feature?</p>
</blockquote>
</aside>
<p>Yes, there is fail closed mechanism.</p>
<p>And user <code>root</code> is not a good choice as tunnel user because many things run under user <code>root</code>. The basic idea behind the fail closed mechanism is “only have the OpenVPN process” or “only have the tunnel user” allowed to establish external network connections.</p>
          <p><a href="http://forums.whonix.org/t/alternative-vpn-setup/2781/2">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/alternative-vpn-setup/2781/2</link>
        <pubDate>Mon, 25 Jul 2016 18:23:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2781-2</guid>
        <source url="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss">Alternative VPN setup</source>
      </item>
      <item>
        <title>Alternative VPN setup</title>
        <dc:creator><![CDATA[nova]]></dc:creator>
        <description><![CDATA[
            <p>I’m setting up Workstation -&gt; TOR -&gt; VPN -&gt; Web</p>
<p>For some reasons this instructions do not work for me -<br>
</p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://www.whonix.org/favicon.ico" class="site-icon" width="16" height="16">
      <a href="https://www.whonix.org/wiki/Tunnels/Connecting_to_Tor_before_a_VPN#Inside_Whonix-Workstation" target="_blank" rel="nofollow noopener">Whonix</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/452;"><img src="https://www.whonix.org/w/images/1/15/Ball-443853640.jpg" class="thumbnail"></div>

<h3><a href="https://www.whonix.org/wiki/Tunnels/Connecting_to_Tor_before_a_VPN#Inside_Whonix-Workstation" target="_blank" rel="nofollow noopener">Tunnels/Connecting to Tor before a VPN</a></h3>

<p>Instructions on how to connect to Tor before a VPN (User -&gt; Tor -&gt; VPN -&gt; Internet)</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<p></p>
<p>But I found other way to do it:<br>
In “clean” Workstation  I start<br>
sudo openvpn --config vpn-config.ovpn<br>
And untill I stop it all my connections go through VPN.</p>
<p>Is it possible to configure fail close mechanism here?</p>
<p>Are there some security problems with this setup comparing using integrated Whonix TUNNEL_FIREWALL feature?</p>
          <p><a href="http://forums.whonix.org/t/alternative-vpn-setup/2781/1">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/alternative-vpn-setup/2781/1</link>
        <pubDate>Mon, 25 Jul 2016 07:40:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-2781-1</guid>
        <source url="http://forums.whonix.org/t/alternative-vpn-setup/2781.rss">Alternative VPN setup</source>
      </item>
  </channel>
</rss>
