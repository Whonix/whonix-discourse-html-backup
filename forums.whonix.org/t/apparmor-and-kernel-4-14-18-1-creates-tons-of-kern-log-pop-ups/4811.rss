<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
    <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811</link>
    <description>Using Qubes 3.2 and Whonix 13 (wasn&#39;t sure to put this in AppArmor or Qubes-Whonix section) with AppArmor enabled. Updated dom0 and received a new vm kernel: `kernel-qubes-vm.x86_64 1000:4.14.18-1.pvops.qubes`. When this kernel is used on a Whonix 13 AppVM (workstation or gateway) with AppArmor enabled it produces pop up spam from the kern.log. Here is the entry:

```
Feb  9 16:44:31 host kernel: [   28.421099] audit: type=1400 audit(1518194671.669:36): apparmor=&quot;DENIED&quot; operation=&quot;signal&quot; profile=&quot;/usr/bin/whonixcheck&quot; pid=1002 comm=&quot;whonixcheck&quot; requested_mask=&quot;send&quot; denied_mask=&quot;send&quot; signal=rtmin+-93 peer=&quot;unconfined&quot;
```

Temporary fix is to select kernel `4.14.13-1` for my Whonix VMs.</description>
    <language>en</language>
    <lastBuildDate>Fri, 06 Jul 2018 09:17:52 +0000</lastBuildDate>
    <category>AppArmor</category>
    <atom:link href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[troubadour]]></dc:creator>
        <description><![CDATA[
            <p>Same kernel, same issue.<br>
Should be fixed in</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/troubadoour/whonixcheck/commit/1bb377bca29cdaa9af8745f8ae9ade42a4b879c9" target="_blank" rel="nofollow noopener">github.com/troubadoour/whonixcheck</a>
  </header>
  <article class="onebox-body">
    
<h4>
  <a href="https://github.com/troubadoour/whonixcheck/commit/1bb377bca29cdaa9af8745f8ae9ade42a4b879c9" target="_blank" rel="nofollow noopener">cleaning after merge, comment out signal rtmin, add /bin/readlink rix,</a>
</h4>


<div class="date">
  by <a href="http://forums.whonix.org"></a>
  on <a href="https://github.com/troubadoour/whonixcheck/commit/1bb377bca29cdaa9af8745f8ae9ade42a4b879c9" target="_blank" rel="nofollow noopener">08:53AM - 06 Jul 18</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>2 additions</strong>
  and <strong>8 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/38">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/38</link>
        <pubDate>Fri, 06 Jul 2018 09:17:52 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-38</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <pre><code>uname -r
4.14.41-1.pvops.qubes.x86_64</code></pre>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/37">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/37</link>
        <pubDate>Fri, 06 Jul 2018 06:25:11 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-37</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>This is a blocker for Whonix 14.</p>
<pre><code>sudo aa-enforce /etc/apparmor.d/usr.bin.whonixcheck
</code></pre>
<blockquote>
<p><code>ERROR: Invalid or unknown keywords in 'signal set=(rtmin+*) peer=unconfined</code></p>
</blockquote>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/36">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/36</link>
        <pubDate>Fri, 06 Jul 2018 06:18:22 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-36</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>These AppArmor warnings above (x2) don’t seem to appear in Whonix 14 that I could see in logs.</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/35">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/35</link>
        <pubDate>Tue, 03 Apr 2018 08:19:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-35</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>Actually, sys-whonix also shows something similar on shutdown:</p>
<blockquote>
<p>[XX.XXXXXXX] audit: type=1400 audit (XXXXXXXXXX.XXX:XX): apparmor=“DENIED” operation=“signal” profile="/usr/sbin/cpfpd" pid=1 com=“systemd_shutdow” requested_mask=“receive” denied_mask=“receive” signal=term peer=“unconfined”</p>
</blockquote>
<p>the <em>signal=</em> part above also shows signal=cont OR signal=kill in different lines.</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/34">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/34</link>
        <pubDate>Tue, 13 Mar 2018 07:41:27 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-34</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>AppArmor and cupsd denied messages (Qubes)</p>
<p>Seeing this on shutting down anon-whonix (Qubes R3.2, 4.14.18-1.pvops.qubes.x86_64):</p>
<blockquote>
<p>[XXXX.XXXXXX] audit: type=1400 audit (XXXXXXXXXX.XXX:XX): apparmor=“DENIED” operation=“signal” profile="/usr/sbin/cupsd" pid=1 comm=“systemd-shutdow” requested_mask=“receive” denied_mask=“receive” signal=stop peer=“unconfined”</p>
</blockquote>
<p>Appears over and over. Qubes eventually shutdowns the VM anyhow.</p>
<p>This has not appeared recently that I remember.</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/33">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/33</link>
        <pubDate>Tue, 13 Mar 2018 07:13:33 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-33</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="31" data-topic="4811">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/t/d9b06d/40.png" class="avatar"> troubadour:</div>
<blockquote>
<p>This is most likely happening when whonixcheck runs while TB is open</p>
</blockquote>
</aside>
<p>Confirmed. Thanks <code>troubadour</code>!</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/32">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/32</link>
        <pubDate>Sat, 10 Mar 2018 22:20:28 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-32</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[troubadour]]></dc:creator>
        <description><![CDATA[
            <p>This is most likely happening when whonixcheck runs while TB is open. I  could not reproduce it.</p>
<p>The profile is updated, blind folded as usual in this thread.</p>
<p><a href="https://github.com/troubadoour/apparmor-profile-torbrowser/commit/a6144ea7765a5537d17206a776be4470950e43c4" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/troubadoour/apparmor-profile-torbrowser/commit/a6144ea7765a5537d17206a776be4470950e43c4</a></p>
<p>Could you check, running whonixcheck.</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/31">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/31</link>
        <pubDate>Sat, 10 Mar 2018 20:00:47 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-31</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[0brand]]></dc:creator>
        <description><![CDATA[
            <p>Getting this intermittently in anon-whonix VM after upgrade to Qubes 4-rc5.  Adding raw Github profile to Ws-Template seemed to fix most of the popups but these still persist.</p>
<p><code>uname -r 4.14.18-1.pvops.qubes.x86_64</code><br>
Whonix repo:  Stable Proposed</p>
<p>audit: type=XXX audit(XXXXXXXXXX.XXX:XX): apparmor=“DENIED” operation=“signal” profile="/home/<strong>/tor-browser*/Browser/firefox" pid=XXXX comm=“ProcessHangMoni” requested_mask=“send” denied_mask=“send” signal=vtalrm peer="/home/</strong>/tor-browser*/Browser/firefox"</p>
<p>audit: type=XXXX audit(XXXXXXXXXX.XXX:XX): apparmor=“DENIED” operation=“ptrace” profile="/home/**/tor-browser*/Browser/firefox" pid=XXX comm=“ps” requested_mask=“tracedby” denied_mask=“tracedby” peer="/usr/bin/whonixcheck"</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/30">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/30</link>
        <pubDate>Sat, 10 Mar 2018 02:12:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-30</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>Great, works! Thank you all. You can mark this as resolved since 3 users now report it’s all good.</p>
<p>I updated the AppArmor page to reflect how to fix AppArmor problems in general, imitating the method outlined above. Also mentioned importance of using “raw” text from github.</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/28">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/28</link>
        <pubDate>Fri, 23 Feb 2018 11:49:08 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-28</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[qubenix]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="26" data-topic="4811" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Web view.</p>
<p><a href="https://github.com/Whonix/whonixcheck/blob/master/etc/apparmor.d/usr.bin.whonixcheck" rel="nofollow noopener">https://github.com/Whonix/whonixcheck/blob/master/etc/apparmor.d/usr.bin.whonixcheck</a></p>
<p>Always get it from raw (by clicking the raw button). Otherwise formatting might break or unwanted content (such as line numbers) might be copied which would then break it.</p>
<p><a href="https://raw.githubusercontent.com/Whonix/whonixcheck/master/etc/apparmor.d/usr.bin.whonixcheck" rel="nofollow noopener">https://raw.githubusercontent.com/Whonix/whonixcheck/master/etc/apparmor.d/usr.bin.whonixcheck</a></p>
<p>Make sure it does not have any weird content. Use a diff viewer. And/or get it using git and doing git commit gpg verification.</p>
</blockquote>
</aside>
<p>This solved my issues. Thanks for your hard work! Donation incoming.</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/27">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/27</link>
        <pubDate>Wed, 21 Feb 2018 17:09:15 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-27</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Web view.</p>
<p><a href="https://github.com/Whonix/whonixcheck/blob/master/etc/apparmor.d/usr.bin.whonixcheck">https://github.com/Whonix/whonixcheck/blob/master/etc/apparmor.d/usr.bin.whonixcheck</a></p>
<p>Always get it from raw (by clicking the raw button). Otherwise formatting might break or unwanted content (such as line numbers) might be copied which would then break it.</p>
<p><a href="https://raw.githubusercontent.com/Whonix/whonixcheck/master/etc/apparmor.d/usr.bin.whonixcheck">https://raw.githubusercontent.com/Whonix/whonixcheck/master/etc/apparmor.d/usr.bin.whonixcheck</a></p>
<p>Make sure it does not have any weird content. Use a diff viewer. And/or get it using git and doing git commit gpg verification.</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/26">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/26</link>
        <pubDate>Wed, 21 Feb 2018 12:23:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-26</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Old link.</p>
<blockquote>
<p><a href="https://github.com/Whonix/apparmor-profile-whonixcheck">https://github.com/Whonix/apparmor-profile-whonixcheck</a></p>
</blockquote>
<blockquote>
<p>Deprecated in Whonix 13 - because merged into package - AppArmor profile for whonixcheck</p>
</blockquote>
<p>Just now deleted.</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/25">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/25</link>
        <pubDate>Wed, 21 Feb 2018 12:16:51 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-25</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p><strong>Tor Browser profile</strong></p>
<p>In the Tor Browser profile on github, this text below is listed twice - not necessary I think:</p>
<blockquote>
<p>Added 20/12/2017<br>
deny @{PROC}/[0-9]<em>/net/route r,<br>
deny @{PROC}/[0-9]</em>/net/arp r,<br>
/dev/ r,<br>
/dev/shm/org.chromium.* rwk,</p>
</blockquote>
<p>Anyway, the updated Tor Browser profile seems to have solved all the other denied msgs I outlined further above for the whonix-ws AppVM. You’re a genius <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<aside class="quote" data-post="23" data-topic="4811">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/t/d9b06d/40.png" class="avatar"> troubadour:</div>
<blockquote>
<p>I did not try to fix that one. Shoud be easy if it persists.</p>
</blockquote>
</aside>
<p>Doesn’t persist.</p>
<p><strong>Whonixcheck profile</strong></p>
<p>But the whonixcheck updated profile doesn’t work for me. Maybe these steps are wrong below? Please point out my mistake if so:</p>
<p><strong>1.</strong> For whonixcheck, open Konsole in whonix-gw TemplateVM</p>
<p><strong>2.</strong> Run:</p>
<p>sudo rm /etc/apparmor.d/usr.bin.whonixcheck</p>
<p>sudo nano /etc/apparmor.d/usr.bin.whonixcheck</p>
<p><strong>3.</strong> Cut and paste the following text from here:</p>
<p><a href="https://github.com/Whonix/apparmor-profile-whonixcheck/blob/master/etc/apparmor.d/usr.bin.whonixcheck">https://github.com/Whonix/apparmor-profile-whonixcheck/blob/master/etc/apparmor.d/usr.bin.whonixcheck</a></p>
<p><strong>4.</strong> Exit and save.</p>
<p><strong>5.</strong> Repeat all steps above in whonix-ws TemplateVM</p>
<p>Restart sys-whonix and whonix-ws AppVMs</p>
<p>Annoying “signal rtm±93” denied messages should have disappeared. But they haven’t in either sys-whonix or whonix-ws.</p>
<p>Note, the only additional software I’ve ever installed is Firejail in whonix-ws-TemplateVM. I also run Tor Browser in a Firejail sandbox in combination with AppArmor. Possibly related since Patrick’s problem is solved?</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/24">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/24</link>
        <pubDate>Wed, 21 Feb 2018 10:03:50 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-24</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[troubadour]]></dc:creator>
        <description><![CDATA[
            <p>Nice to hear. <img src="//forums.whonix.org/images/emoji/twitter/slightly_smiling_face.png?v=5" title=":slightly_smiling_face:" class="emoji" alt=":slightly_smiling_face:"></p>
<p>The various AppaArmor docs are not quite clear on the subject, but although I’m blinded, perhaps the issues in Tor Browser  are fixed with the latest commits.</p>
<p><a class="mention" href="http://forums.whonix.org/u/torjunkie">@torjunkie</a>, could you merge and test?</p>
<aside class="quote" data-post="13" data-topic="4811">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/letter_avatar_proxy/v2/letter/t/f9ae1b/40.png" class="avatar"> torjunkie:</div>
<blockquote>
<p>1.Open operation</p>
<p>[XX.XXXXXXX] audit: type=XXXX audit(XXXXXXXXXX.XXXX:XX): apparmor=“DENIED” operation=“open” profile="/home/**/tor-browser*/Browser/firefox" name="/dev/" pid=XXXX comm=“firefox” requested_mask=“r” denied_mask=“r” fsuid=XXXX ouid=X</p>
</blockquote>
</aside>
<p>I did not try to fix that one. Shoud be easy if it persists.</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/23">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/23</link>
        <pubDate>Tue, 20 Feb 2018 21:22:34 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-23</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Merged. Tested. Works for me.</p>
<p>Awesome. Thanks! <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/22">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/22</link>
        <pubDate>Tue, 20 Feb 2018 16:32:00 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-22</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[troubadour]]></dc:creator>
        <description><![CDATA[
            <p>We keep trying…</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/troubadoour/whonixcheck/commit/4c2be936a02b1d49480fcd21601b6b9fbe5cd7f9" target="_blank" rel="nofollow noopener">github.com/troubadoour/whonixcheck</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/troubadoour" target="_blank" rel="nofollow noopener">
    <img alt="troubadoour" src="//forums.whonix.org/uploads/default/original/2X/e/e23c4fd133cb08d59359cdb0767c06553c476b98.png" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/troubadoour/whonixcheck/commit/4c2be936a02b1d49480fcd21601b6b9fbe5cd7f9" target="_blank" rel="nofollow noopener">+ signal (send)</a>
</h4>


<div class="date">
  by <a href="https://github.com/troubadoour" target="_blank" rel="nofollow noopener">troubadoour</a>
  on <a href="https://github.com/troubadoour/whonixcheck/commit/4c2be936a02b1d49480fcd21601b6b9fbe5cd7f9" target="_blank" rel="nofollow noopener">05:43PM - 19 Feb 18 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>1 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/21">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/21</link>
        <pubDate>Mon, 19 Feb 2018 19:16:01 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-21</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Merged. Testing. Keep getting this.</p>
<pre><code>Feb 18 22:23:01 host kernel: audit: type=1400 audit(1518992581.365:43): apparmor="DENIED" operation="signal" profile="/usr/bin/whonixcheck" pid=1425 comm="whonixcheck" requested_mask="send" denied_mask="send" signal=rtmin+-93 peer="unconfined"</code></pre>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/20">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/20</link>
        <pubDate>Sun, 18 Feb 2018 22:22:04 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-20</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[troubadour]]></dc:creator>
        <description><![CDATA[
            <p>BTW, I tried whonixcheck and Tor Browser in Qubes 3.2 Whonix 13. Did not get any denied message, including with TB 8.0a1.</p>
<p>So a fresh install seems clean apparmor-wise. In your and torjunkie’s configurations, there must be some extra software generating the messages. Does not mean we don’t have to try and fix them.</p>
<p>Edit:<br>
SteadySupplies</p>
<pre><code> apparmor messages repeatedly popping up from gateway after a 
 clean install of the Whonix 13 (Stable Proposed Updates),
 about whonixcheck
</code></pre>
<p>Reconsidering my above statement.</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/19">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/19</link>
        <pubDate>Sun, 18 Feb 2018 19:58:31 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-19</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[troubadour]]></dc:creator>
        <description><![CDATA[
            <p>Can you try</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/troubadoour/whonixcheck/commit/b0c710b074e76cd86974b00c8278d6546eb010d8" target="_blank" rel="nofollow noopener">github.com/troubadoour/whonixcheck</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/troubadoour" target="_blank" rel="nofollow noopener">
    <img alt="troubadoour" src="//forums.whonix.org/uploads/default/original/2X/e/e23c4fd133cb08d59359cdb0767c06553c476b98.png" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/troubadoour/whonixcheck/commit/b0c710b074e76cd86974b00c8278d6546eb010d8" target="_blank" rel="nofollow noopener">allow real time signals</a>
</h4>


<div class="date">
  by <a href="https://github.com/troubadoour" target="_blank" rel="nofollow noopener">troubadoour</a>
  on <a href="https://github.com/troubadoour/whonixcheck/commit/b0c710b074e76cd86974b00c8278d6546eb010d8" target="_blank" rel="nofollow noopener">07:45PM - 18 Feb 18 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>1 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/18">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/18</link>
        <pubDate>Sun, 18 Feb 2018 19:48:29 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-18</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Merged.</p>
<p>Still getting</p>
<pre><code>Feb 18 14:13:45 host kernel: [   78.177928] audit: type=1400 audit(1518963225.652:84): apparmor="DENIED" operation="signal" profile="/usr/bin/whonixcheck" pid=956 comm="whonixcheck" requested_mask="send" denied_mask="send" signal=rtmin+-93 peer="unconfined"</code></pre>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/17">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/17</link>
        <pubDate>Sun, 18 Feb 2018 14:12:53 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-17</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[troubadour]]></dc:creator>
        <description><![CDATA[
            <p>I’m advancing blinldy on those.</p>
<p>The torbrowser and whonixcheck profiles are updated with an opening for the ptrace and signal operations.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/troubadoour/apparmor-profile-torbrowser/commit/b70b19c86d386f3ffdd565c32a5f978f7aa979b8" target="_blank" rel="nofollow noopener">github.com/troubadoour/apparmor-profile-torbrowser</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/troubadoour" target="_blank" rel="nofollow noopener">
    <img alt="troubadoour" src="//forums.whonix.org/uploads/default/original/2X/e/e23c4fd133cb08d59359cdb0767c06553c476b98.png" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/troubadoour/apparmor-profile-torbrowser/commit/b70b19c86d386f3ffdd565c32a5f978f7aa979b8" target="_blank" rel="nofollow noopener">+ signal + ptrace</a>
</h4>


<div class="date">
  by <a href="https://github.com/troubadoour" target="_blank" rel="nofollow noopener">troubadoour</a>
  on <a href="https://github.com/troubadoour/apparmor-profile-torbrowser/commit/b70b19c86d386f3ffdd565c32a5f978f7aa979b8" target="_blank" rel="nofollow noopener">05:44PM - 17 Feb 18 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>3 additions</strong>
  and <strong>0 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/troubadoour/whonixcheck/commit/a10d7ecf4f558f58e1c224a984b640e2f9b4ab82" target="_blank" rel="nofollow noopener">github.com/troubadoour/whonixcheck</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/troubadoour" target="_blank" rel="nofollow noopener">
    <img alt="troubadoour" src="//forums.whonix.org/uploads/default/original/2X/e/e23c4fd133cb08d59359cdb0767c06553c476b98.png" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/troubadoour/whonixcheck/commit/a10d7ecf4f558f58e1c224a984b640e2f9b4ab82" target="_blank" rel="nofollow noopener">open ptrace and signal</a>
</h4>


<div class="date">
  by <a href="https://github.com/troubadoour" target="_blank" rel="nofollow noopener">troubadoour</a>
  on <a href="https://github.com/troubadoour/whonixcheck/commit/a10d7ecf4f558f58e1c224a984b640e2f9b4ab82" target="_blank" rel="nofollow noopener">07:22PM - 17 Feb 18 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>2 additions</strong>
  and <strong>2 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Could you please confirm that the whonixcheck profile works in Qubes 4 / Whonix 14 ?</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/16">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/16</link>
        <pubDate>Sat, 17 Feb 2018 19:48:39 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-16</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><code>sudo killall aa-notify</code> is not a persistent change. Will be undone on reboot. It only kills the process showing the notification but doesn’t prevent starting it at next boot. Made a small change in the wiki.</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/15">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/15</link>
        <pubDate>Sat, 17 Feb 2018 12:49:06 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-15</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="11" data-topic="4811">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//forums.whonix.org/user_avatar/forums.whonix.org/patrick/40/17_1.png" class="avatar"> Patrick:</div>
<blockquote>
<p>Less crude.</p>
</blockquote>
</aside>
<p>Thanks. Noted in wiki.</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/14">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/14</link>
        <pubDate>Sat, 17 Feb 2018 10:57:42 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-14</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
      <item>
        <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
        <dc:creator><![CDATA[torjunkie]]></dc:creator>
        <description><![CDATA[
            <p>Since we are having an AppArmor party (and everybody is invited <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> ), apart from the whonixcheck error, I note that in Qubes-Whonix (R3.2) Whonix-WS-AppVM the following AppArmor errors for the torbrowser profile:</p>
<p><strong>1.Open operation</strong></p>
<blockquote>
<p>[XX.XXXXXXX] audit: type=XXXX audit(XXXXXXXXXX.XXXX:XX): apparmor=“DENIED” operation=“open” profile="/home/**/tor-browser*/Browser/firefox" name="/dev/" pid=XXXX comm=“firefox” requested_mask=“r” denied_mask=“r” fsuid=XXXX ouid=X</p>
</blockquote>
<p><strong>2. Signal operation</strong></p>
<p><em>v1 (Timer)</em></p>
<blockquote>
<p>[XX.XXXXXXX] audit: type=XXXX audit(XXXXXXXXXX.XXX:XX): apparmor=“DENIED” operation=“signal” profile="/home/<strong>/tor-browser*/Browser/firefox" pid=XXXX comm=“Timer” requested_mask=“send” denied_mask=“send” signal=vtalrm peer="/home/</strong>/tor-browser*/Browser/firefox"</p>
</blockquote>
<p><em>v2 (ProcessHanMoni)</em></p>
<blockquote>
<p>[XX.XXXXXXX] audit: type=XXXX audit(XXXXXXXXXX.XXX:XX): apparmor=“DENIED” operation=“signal” profile="/home/<strong>/tor-browser*/Browser/firefox" pid=XXXX comm=“ProcessHangMoni” requested_mask=“send” denied_mask=“send” signal=vtalrm peer="/home/</strong>/tor-browser*/Browser/firefox"</p>
</blockquote>
<p><strong>3. Ptrace one</strong></p>
<blockquote>
<p>[XX.XXXXXXX] audit: type=XXXX audit(XXXXXXXX.XXX:XX): apparmor=“DENIED” operation=“ptrace” profile="/home/<strong>/tor-browser*/Browser/firefox" pid=XXXX comm=XXXXXXXXXXXXXX requested_mask=“trace” denied_mask=“trace” peer="/home/</strong>/tor-browser*/Browser/firefox"</p>
</blockquote>
<p>So I went and updated the torbrowser profile from github and the result is the same as above.</p>
          <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/13">Read full topic</a></p>
        ]]></description>
        <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811/13</link>
        <pubDate>Sat, 17 Feb 2018 10:45:07 +0000</pubDate>
        <guid isPermaLink="false">forums.whonix.org-post-4811-13</guid>
        <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
      </item>
  </channel>
</rss>
