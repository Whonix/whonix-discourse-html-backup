<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:discourse="http://www.discourse.org/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>AppArmor - Whonix Forum</title>
    <link>http://forums.whonix.org/c/apparmor/14</link>
    <description>Topics in the &#39;AppArmor&#39; category Discussion of &lt;a href=&quot;https://www.whonix.org/wiki/AppArmor&quot;&gt;Whonix AppArmor Profiles&lt;/a&gt; for better security. (&lt;a href=&quot;https://phabricator.whonix.org/tag/AppArmor&quot;&gt;devs&lt;/a&gt;)</description>
    <language>en</language>
      <lastBuildDate>Fri, 02 Sep 2022 21:49:02 +0000</lastBuildDate>
      <atom:link href="http://forums.whonix.org/c/apparmor/14.rss" rel="self" type="application/rss+xml" />
        <item>
          <title>Failed to start Load AppArmor profiles conflict system_tor and snowflake-client</title>
          <dc:creator><![CDATA[kesha]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Hi. I have a problem when load Whonix-Gateway-XFCE</p>
<p>What I need to do to fix this?</p>
<p>journalctl --unit apparmor.service</p>
<p>Sep 02 22:24:21 host systemd[1]: Starting Load AppArmor profiles…</p>
<p>Sep 02 22:24:21 host apparmor.systemd[248]: Restarting AppArmor</p>
<p>Sep 02 22:24:21 host apparmor.systemd[248]: Reloading AppArmor profiles</p>
<p>Sep 02 22:24:21 host apparmor.systemd[317]: profile system_tor: has merged rule /rw/usr/bin/snowflake-client with conflicting x modif&gt;</p>
<p>Sep 02 22:24:21 host apparmor.systemd[317]: ERROR merging rules for profile system_tor, failed to load</p>
<p>Sep 02 22:24:21 host apparmor.systemd[368]: profile system_tor: has merged rule /rw/usr/bin/snowflake-client with conflicting x modif&gt;</p>
<p>Sep 02 22:24:21 host apparmor.systemd[368]: ERROR merging rules for profile system_tor, failed to load</p>
<p>Sep 02 22:24:21 host apparmor.systemd[248]: Error: At least one profile failed to load</p>
<p>Sep 02 22:24:21 host systemd[1]: apparmor.service: Main process exited, code=exited, status=1/FAILURE</p>
<p>Sep 02 22:24:21 host systemd[1]: apparmor.service: Failed with result ‘exit-code’.</p>
<p>Sep 02 22:24:21 host systemd[1]: Failed to start Load AppArmor profiles.</p>
            <p><small>6 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/failed-to-start-load-apparmor-profiles-conflict-system-tor-and-snowflake-client/14727">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/failed-to-start-load-apparmor-profiles-conflict-system-tor-and-snowflake-client/14727</link>
          <pubDate>Fri, 02 Sep 2022 21:49:02 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14727</guid>
          <source url="http://forums.whonix.org/t/failed-to-start-load-apparmor-profiles-conflict-system-tor-and-snowflake-client/14727.rss">Failed to start Load AppArmor profiles conflict system_tor and snowflake-client</source>
        </item>
        <item>
          <title>Question about unconfined App Armor profiles &amp; processes &amp; complain mode</title>
          <dc:creator><![CDATA[Tenforthat]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>First of all I love Whonix. Thank you for your efforts! I’ve had some odd occurrences with my sys-whonix (I’m on latest Qubes) that i’ll describe after my specific question.</p>
<p>When I check the apparmor status I get this: Is it expected to have this many profiles &amp; processes in complain mode?</p>
<p>apparmor module is loaded.<br>
44 profiles are loaded.<br>
26 profiles are in enforce mode.<br>
/<strong>/*-browser/Browser/firefox<br>
/usr/bin/hexchat<br>
/usr/bin/man<br>
/usr/bin/onioncircuits<br>
/usr/bin/pidgin<br>
/usr/bin/pidgin//sanitized_helper<br>
/usr/bin/sdwdate<br>
/usr/bin/systemcheck<br>
/usr/bin/timesanitycheck<br>
/usr/bin/tor-circuit-established-check<br>
/usr/bin/totem<br>
/usr/bin/totem-audio-preview<br>
/usr/bin/totem-video-thumbnailer<br>
/usr/bin/totem//sanitized_helper<br>
/usr/bin/url_to_unixtime<br>
/usr/lib/onion-grater<br>
/usr/libexec/systemcheck/canary<br>
/usr/sbin/haveged<br>
apt-cacher-ng<br>
bootclockrandomization<br>
lsb_release<br>
man_filter<br>
man_groff<br>
nvidia_modprobe<br>
nvidia_modprobe//kmod<br>
system_tor<br>
18 profiles are in complain mode.<br>
/usr/bin/irssi<br>
/usr/bin/whonix_firewall<br>
/usr/libexec/whonix-firewall/</strong><br>
/usr/sbin/dnsmasq<br>
/usr/sbin/dnsmasq//libvirt_leaseshelper<br>
avahi-daemon<br>
identd<br>
klogd<br>
mdnsd<br>
nmbd<br>
nscd<br>
ping<br>
smbd<br>
smbldap-useradd<br>
smbldap-useradd///etc/init.d/nscd<br>
syslog-ng<br>
syslogd<br>
traceroute<br>
6 processes have profiles defined.<br>
3 processes are in enforce mode.<br>
/usr/bin/python3.9 (843) /usr/lib/onion-grater<br>
/usr/sbin/haveged (511)<br>
/usr/bin/tor (846) system_tor<br>
3 processes are in complain mode.<br>
/usr/bin/bash (704) /usr/libexec/whonix-firewall/**<br>
/usr/bin/bash (723) /usr/libexec/whonix-firewall/**<br>
/usr/bin/inotifywait (724) /usr/libexec/whonix-firewall/**<br>
0 processes are unconfined but have a profile defined.</p>
<p>When I run aa-unconfined I get:</p>
<p>815 /usr/bin/tinyproxy not confined<br>
820 /usr/bin/tinyproxy not confined<br>
821 /usr/bin/tinyproxy not confined<br>
843 /usr/bin/python3.9 (/usr/bin/python3) confined by ‘/usr/lib/onion-grater (enforce)’<br>
846 /usr/bin/tor confined by ‘system_tor (enforce)’<br>
1210 /usr/bin/tinyproxy not confined<br>
1279 /usr/bin/tinyproxy not confined<br>
1337 /usr/bin/tinyproxy not confined<br>
1391 /usr/bin/tinyproxy not confined<br>
1409 /usr/bin/tinyproxy not confined</p>
<p>I understand the concept that complain mode is there so that profiles and processes can tell you they have violations without that necessarily killing them, and you can adjust and test from there, but is this expected?</p>
<p>To my nonspecific question:</p>
<p>When I launch my sys-whonix on startup and run a whonix DVM &amp; my KeepassXC vault (on whonix) I’ve had sys-whonix crash randomly (yes, must be hacked then… <img src="//forums.whonix.org/images/emoji/twitter/smile.png?v=12" title=":smile:" class="emoji" alt=":smile:"> ) and when it loads back up it no longer shows keepassxc in the list when I click on the whonix lock icon (offline vault, should it even be in there?). Sometimes a dispvm that is currently running will no longer appear despite it still running and saying it is on tor.</p>
<p>I also had an occurance where in a DISPVM downloads were going to a mozilla folder, not .tb/tor-browser/… and when I ran ‘top’ I saw systemd-socket-. Does this strike you as just standard random bugs?</p>
<p>I’m sorry if this is long winded or misguided, but I love whonix and I tried to google key search terms to find out, but I’d love an explanation.</p>
<p>THANK YOU!!</p>
            <p><small>2 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/question-about-unconfined-app-armor-profiles-processes-complain-mode/14697">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/question-about-unconfined-app-armor-profiles-processes-complain-mode/14697</link>
          <pubDate>Wed, 31 Aug 2022 10:35:03 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14697</guid>
          <source url="http://forums.whonix.org/t/question-about-unconfined-app-armor-profiles-processes-complain-mode/14697.rss">Question about unconfined App Armor profiles &amp; processes &amp; complain mode</source>
        </item>
        <item>
          <title>Whonix: Are there any list of useful profiles?</title>
          <dc:creator><![CDATA[Ionixx]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Hello Users,</p>
<p>is there a list of profiles to install and put in enforce mode besides the ones already implemented? And in which whonix qubes is which profile useful?</p>
<p>I’m thinking for example of whonix-firewall and home.tor-browser-firefox, which I have installed and enabled, in all whonix qubes.</p>
<p>Thank you for opinions!</p>
            <p><small>2 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/whonix-are-there-any-list-of-useful-profiles/14228">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/whonix-are-there-any-list-of-useful-profiles/14228</link>
          <pubDate>Sun, 24 Jul 2022 09:50:01 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14228</guid>
          <source url="http://forums.whonix.org/t/whonix-are-there-any-list-of-useful-profiles/14228.rss">Whonix: Are there any list of useful profiles?</source>
        </item>
        <item>
          <title>torbrowser aa profile breaks Qubes split-browser and vm shutdown</title>
          <dc:creator><![CDATA[BEBF738VD]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Disclaimer: QubesOS-related issue</p>
<p>After installing <code>apparmor-profile-torbrowser</code> in a <code>whonix-ws-16</code> template dedicated to split-browser*, the latter ceases to function properly: keyboard shortcuts no longer work (and I can’t access nor create new bookmarks), and instead normal TorBrowser/Firefox bindings resume.</p>
<p>Furthermore, after closing TB the dispvm no longer shuts down. Instead it remains running.</p>
<p><em>*</em> github[dot]com/rustybird/qubes-app-split-browser</p>
            <p><small>5 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/torbrowser-aa-profile-breaks-qubes-split-browser-and-vm-shutdown/13778">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/torbrowser-aa-profile-breaks-qubes-split-browser-and-vm-shutdown/13778</link>
          <pubDate>Mon, 13 Jun 2022 09:06:30 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-13778</guid>
          <source url="http://forums.whonix.org/t/torbrowser-aa-profile-breaks-qubes-split-browser-and-vm-shutdown/13778.rss">torbrowser aa profile breaks Qubes split-browser and vm shutdown</source>
        </item>
        <item>
          <title>Failed to start Load AppArmor profiles</title>
          <dc:creator><![CDATA[oxi]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p><code>whonixcheck -v</code></p>
<blockquote>
<p>apparmor.service: Failed</p>
</blockquote>
<p>In whonix-ws-15:<br>
<code>sudo systemctl status apparmor.service</code></p>
<blockquote>
<p>status=4/NOPERMISSION</p>
</blockquote>
            <p><small>2 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/failed-to-start-load-apparmor-profiles/12002">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/failed-to-start-load-apparmor-profiles/12002</link>
          <pubDate>Fri, 23 Jul 2021 22:06:11 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-12002</guid>
          <source url="http://forums.whonix.org/t/failed-to-start-load-apparmor-profiles/12002.rss">Failed to start Load AppArmor profiles</source>
        </item>
        <item>
          <title>No audit / audit.log in /var/logs</title>
          <dc:creator><![CDATA[Steve_Boxer]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Hello Devs and Contributors<br>
Thanks for support<br>
I’ve apparmor profiles installed on workstation and enforced profiles but i don’t have adudit/audit.log file in /var/logs</p>
            <p><small>2 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/no-audit-audit-log-in-var-logs/9427">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/no-audit-audit-log-in-var-logs/9427</link>
          <pubDate>Sat, 25 Apr 2020 19:37:07 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-9427</guid>
          <source url="http://forums.whonix.org/t/no-audit-audit-log-in-var-logs/9427.rss">No audit / audit.log in /var/logs</source>
        </item>
        <item>
          <title>AppArmor for Complete System - Including init, PID1, Systemd, Everything! - Full System MAC policy</title>
          <dc:creator><![CDATA[madaidan]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Currently, Whonix only has AppArmor profiles for a few high-risk applications. This isn’t the best. It would be much better to have <em>everything</em> confined by default, including init which would greatly increase security.</p>
<p>This can also help a lot with the “<a href="https://forums.whonix.org/t/untrusted-root-does-it-make-sense-to-try-to-improve-security-by-restricting-root/7998">untrusted root</a>” idea as we can just develop a system-wide policy to restrict root.</p>
<p>AppArmor can do this by loading a profile for systemd in the initramfs.</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://gitlab.com/assets/favicon-7901bd695fb93edb07975966062049829afb56cf11511236e61bcf425070e36e.png" class="site-icon" width="32" height="32">
      <a href="https://gitlab.com/apparmor/apparmor/wikis/FullSystemPolicy" target="_blank">GitLab</a>
  </header>
  <article class="onebox-body">
    <img src="https://gitlab.com/uploads/-/system/project/avatar/4484878/apparmor-red-diag_1w2h.png" class="thumbnail onebox-avatar" width="128" height="128">

<h3><a href="https://gitlab.com/apparmor/apparmor/wikis/FullSystemPolicy" target="_blank">FullSystemPolicy · Wiki · AppArmor / apparmor</a></h3>

<p>The AppArmor user space development project.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Even when a user installs some sketchy malware, it will be restricted by default.</p>
<p>This isn’t something that can be done easily though. It will require a ton of work and testing.</p>
<p>Android also does this but with SELinux.</p>
<p>I’m not aware of any Linux distribution that does this (except Android).</p>
<hr>
<p>Edit by Patrick:</p>
<p>Link to source code:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://github.githubassets.com/favicon.ico" class="site-icon" width="32" height="32">
      <a href="https://github.com/Whonix/apparmor-profile-everything" target="_blank">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="https://avatars3.githubusercontent.com/u/4500165?s=400&amp;v=4" class="thumbnail onebox-avatar" width="400" height="400">

<h3><a href="https://github.com/Whonix/apparmor-profile-everything" target="_blank">Whonix/apparmor-profile-everything</a></h3>

<p>https://forums.whonix.org/t/apparmor-for-complete-system-including-init-pid1-systemd-everything-full-system-mac-policy/8339 - Whonix/apparmor-profile-everything</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

            <p><small>474 posts - 8 participants</small></p>
            <p><a href="http://forums.whonix.org/t/apparmor-for-complete-system-including-init-pid1-systemd-everything-full-system-mac-policy/8339">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/apparmor-for-complete-system-including-init-pid1-systemd-everything-full-system-mac-policy/8339</link>
          <pubDate>Wed, 23 Oct 2019 21:46:09 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-8339</guid>
          <source url="http://forums.whonix.org/t/apparmor-for-complete-system-including-init-pid1-systemd-everything-full-system-mac-policy/8339.rss">AppArmor for Complete System - Including init, PID1, Systemd, Everything! - Full System MAC policy</source>
        </item>
        <item>
          <title>apparmor-profiles / apparmor-profiles-extra vs broken sudo aa-enforce /etc/apparmor.d/*</title>
          <dc:creator><![CDATA[ThatNewDude]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Hope everything is having a great weekend. With that big update that came through the other day I felt it was a good time to do my routine fresh install just to keep things clean. When I applied the “hardened-debian” apparmor profiles I am getting these profiles in complain mode on the workstation:</p>
<p>16 profiles are in complain mode.<br>
/usr/bin/irssi<br>
/usr/sbin/dnsmasq<br>
/usr/sbin/dnsmasq//libvirt_leaseshelper<br>
avahi-daemon<br>
identd<br>
klogd<br>
mdnsd<br>
nmbd<br>
nscd<br>
ping<br>
smbd<br>
smbldap-useradd<br>
smbldap-useradd///etc/init.d/nscd<br>
syslog-ng<br>
syslogd<br>
traceroute</p>
<p>Is this a safety issue? Thanks</p>
            <p><small>7 posts - 5 participants</small></p>
            <p><a href="http://forums.whonix.org/t/apparmor-profiles-apparmor-profiles-extra-vs-broken-sudo-aa-enforce-etc-apparmor-d/8044">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/apparmor-profiles-apparmor-profiles-extra-vs-broken-sudo-aa-enforce-etc-apparmor-d/8044</link>
          <pubDate>Sat, 07 Sep 2019 17:30:05 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-8044</guid>
          <source url="http://forums.whonix.org/t/apparmor-profiles-apparmor-profiles-extra-vs-broken-sudo-aa-enforce-etc-apparmor-d/8044.rss">apparmor-profiles / apparmor-profiles-extra vs broken sudo aa-enforce /etc/apparmor.d/*</source>
        </item>
        <item>
          <title>SecBrowser AppArmor Profile - Help Wanted!</title>
          <dc:creator><![CDATA[Patrick]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Attempt on making it work.</p>
<aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/Whonix/apparmor-profile-torbrowser/commit/d8ba6c2d0d7812b7e3aad33a06c22d7c579c4586" target="_blank" rel="nofollow noopener">github.com/Whonix/apparmor-profile-torbrowser</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">
    <img alt="adrelanos" src="https://avatars3.githubusercontent.com/u/1985040?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/Whonix/apparmor-profile-torbrowser/commit/d8ba6c2d0d7812b7e3aad33a06c22d7c579c4586" target="_blank" rel="nofollow noopener">secbrowser support</a>
</h4>


<div class="date">
  by <a href="https://github.com/adrelanos" target="_blank" rel="nofollow noopener">adrelanos</a>
  on <a href="https://github.com/Whonix/apparmor-profile-torbrowser/commit/d8ba6c2d0d7812b7e3aad33a06c22d7c579c4586" target="_blank" rel="nofollow noopener">08:01AM - 23 Jun 19 UTC</a>
</div>

<div class="github-commit-stats">
  changed <strong>1 files</strong>
  with <strong>25 additions</strong>
  and <strong>3 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Breaks connectivity. No apparmor denied messages.</p>
            <p><small>8 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/secbrowser-apparmor-profile-help-wanted/7595">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/secbrowser-apparmor-profile-help-wanted/7595</link>
          <pubDate>Sun, 23 Jun 2019 08:04:18 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-7595</guid>
          <source url="http://forums.whonix.org/t/secbrowser-apparmor-profile-help-wanted/7595.rss">SecBrowser AppArmor Profile - Help Wanted!</source>
        </item>
        <item>
          <title>Why does the Tor Browser AppArmor profile have sys_admin, sys_chroot and ptrace capabilities?</title>
          <dc:creator><![CDATA[madaidan]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>The Tor Browser <a href="https://github.com/Whonix/apparmor-profile-torbrowser/blob/master/etc/apparmor.d/home.tor-browser.firefox" rel="nofollow noopener">AppArmor profile</a> has <code>capability sys_admin,</code>,<br>
<code>capability sys_chroot,</code> and <code>ptrace</code>. This looks pretty insecure.</p>
<p><code>ptrace</code> will allow the Tor Browser to modify and inspect other running processes.</p>
<p><code>sys_admin</code> will allow the Tor Browser to do a whole load of things that it probably shouldn’t be able to.</p>
<p><code>sys_chroot</code> will allow the Tor Browser to chroot which can make an attacker able to put a setuid program inside a chroot jail with a fake /etc/passwd and /etc/shadow which can fool it into giving it root access.</p>
<p><a href="http://man7.org/linux/man-pages/man7/capabilities.7.html" class="onebox" target="_blank" rel="nofollow noopener">http://man7.org/linux/man-pages/man7/capabilities.7.html</a></p>
<p><a href="https://en.wikipedia.org/wiki/Chroot#Limitations" rel="nofollow noopener">https://en.wikipedia.org/wiki/Chroot#Limitations</a></p>
<p>Are these needed for anything? I think they should be removed.</p>
            <p><small>19 posts - 5 participants</small></p>
            <p><a href="http://forums.whonix.org/t/why-does-the-tor-browser-apparmor-profile-have-sys-admin-sys-chroot-and-ptrace-capabilities/7409">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/why-does-the-tor-browser-apparmor-profile-have-sys-admin-sys-chroot-and-ptrace-capabilities/7409</link>
          <pubDate>Sat, 18 May 2019 14:00:32 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-7409</guid>
          <source url="http://forums.whonix.org/t/why-does-the-tor-browser-apparmor-profile-have-sys-admin-sys-chroot-and-ptrace-capabilities/7409.rss">Why does the Tor Browser AppArmor profile have sys_admin, sys_chroot and ptrace capabilities?</source>
        </item>
        <item>
          <title>Haroopad specific profile.</title>
          <dc:creator><![CDATA[backlit]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Haroopad is a markdown editor, I downloaded it from this website:</p>
<p><a href="http://pad.haroopress.com/user.html" rel="nofollow noopener">http://pad.haroopress.com/user.html</a> =&gt; <strong>haroopad-v0.13.1-x64.deb</strong> (minutes ago it was still the current version)</p>
<p>I’m on <strong>Ubuntu Linux 18.04</strong>.</p>
<p>By having AppArmor scan related events in the log file, I find plenty I’m unable to evaluate, such as accesses to ~/.Private/ECRYPTFS_&lt;long hash codes&gt;…</p>
<p>The filesystem encryption gets unlocked at boot time of course.<br>
So far I haven’t seen anything like that in the few other apparmor profiles I’ve gone through, e.g. Firefox and Thunderbird, but I didn’t make them from scratch either, I just added a few lines.</p>
<p>Could I have downloaded a compromised package? (I don’t see any signatures of the developers on that page that might serve to verify the package integrity.)</p>
<p>Or maybe those events are just fine and have nothing to do with any attempt of exploiting anything.</p>
<p><strong>Does anybody more knowledgeable have a suitable profile for this app?</strong><br>
<strong>Or can anybody more knowledgeable give it a try with AppArmor?</strong></p>
<p>Also, I might be excessively suspicious because I’ve found mention of the Haroopad markdown editor on some <strong>Steemit posts inviting to use Haroopad to format Steemit posts. Users log into Steemit by mean of private keys that - as far as I know - might give access to some extent to the crypto wallet associated to their Steemit/DTube accounts.</strong></p>
            <p><small>3 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/haroopad-specific-profile/6359">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/haroopad-specific-profile/6359</link>
          <pubDate>Mon, 19 Nov 2018 20:46:15 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-6359</guid>
          <source url="http://forums.whonix.org/t/haroopad-specific-profile/6359.rss">Haroopad specific profile.</source>
        </item>
        <item>
          <title>gwenview - apparmor=&quot;DENIED&quot; operation=&quot;mknod&quot; profile=&quot;/usr/bin/gwenview&quot; name=&quot;/home/user/.local/share/user-places.xbel.tbcache.SL2784&quot;</title>
          <dc:creator><![CDATA[TNT_BOM_BOM]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Gwenview error:</p>
<p></p><div class="lightbox-wrapper"><a class="lightbox" href="//forums.whonix.org/uploads/default/original/2X/2/2a365c0799c1f0ceeee4a507623a2ec76d0c439b.png" data-download-href="//forums.whonix.org/uploads/default/2a365c0799c1f0ceeee4a507623a2ec76d0c439b" title="testing7.png"><img src="//forums.whonix.org/uploads/default/optimized/2X/2/2a365c0799c1f0ceeee4a507623a2ec76d0c439b_2_690x364.png" alt="testing7" width="690" height="364" srcset="//forums.whonix.org/uploads/default/optimized/2X/2/2a365c0799c1f0ceeee4a507623a2ec76d0c439b_2_690x364.png, //forums.whonix.org/uploads/default/original/2X/2/2a365c0799c1f0ceeee4a507623a2ec76d0c439b.png 1.5x, //forums.whonix.org/uploads/default/original/2X/2/2a365c0799c1f0ceeee4a507623a2ec76d0c439b.png 2x" data-small-upload="//forums.whonix.org/uploads/default/optimized/2X/2/2a365c0799c1f0ceeee4a507623a2ec76d0c439b_2_10x10.png"></a></div><p></p>
            <p><small>2 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/gwenview-apparmor-denied-operation-mknod-profile-usr-bin-gwenview-name-home-user-local-share-user-places-xbel-tbcache-sl2784/6260">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/gwenview-apparmor-denied-operation-mknod-profile-usr-bin-gwenview-name-home-user-local-share-user-places-xbel-tbcache-sl2784/6260</link>
          <pubDate>Tue, 06 Nov 2018 15:10:43 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-6260</guid>
          <source url="http://forums.whonix.org/t/gwenview-apparmor-denied-operation-mknod-profile-usr-bin-gwenview-name-home-user-local-share-user-places-xbel-tbcache-sl2784/6260.rss">gwenview - apparmor=&quot;DENIED&quot; operation=&quot;mknod&quot; profile=&quot;/usr/bin/gwenview&quot; name=&quot;/home/user/.local/share/user-places.xbel.tbcache.SL2784&quot;</source>
        </item>
        <item>
          <title>update &#39;/etc/apparmor.d/local/usr.bin.thunderbird&#39;</title>
          <dc:creator><![CDATA[TNT_BOM_BOM]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>its better once someone install apparmor-profiles-hardened-debian to not see this message:</p>
<p><img src="//forums.whonix.org/uploads/default/original/2X/9/931be42351d5eaf183f25f0f6c96dcf16301d1b4.png" alt="testing6" width="640" height="462"></p>
            <p><small>2 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/update-etc-apparmor-d-local-usr-bin-thunderbird/6255">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/update-etc-apparmor-d-local-usr-bin-thunderbird/6255</link>
          <pubDate>Tue, 06 Nov 2018 14:57:09 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-6255</guid>
          <source url="http://forums.whonix.org/t/update-etc-apparmor-d-local-usr-bin-thunderbird/6255.rss">update &#39;/etc/apparmor.d/local/usr.bin.thunderbird&#39;</source>
        </item>
        <item>
          <title>live mode /etc/apparmor.d/tunables/home.d/live-mode breaks aa-enforce</title>
          <dc:creator><![CDATA[Patrick]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Continuing the discussion from <a href="https://forums.whonix.org/t/aa-genprof-is-broken-on-whonix/5731/2">aa-genprof is broken on Whonix.</a>:</p>
<p>Doesn’t only break aa-genproof.</p>
<pre><code>sudo aa-enforce /etc/apparmor.d/home.tor-browser.start-tor-browser ; echo $?
</code></pre>
<blockquote>
<pre><code>ERROR: Values added to a non-existing variable @{HOMEDIRS}: /rw/home/ in tunables/home.d/live-mode
1
</code></pre>
</blockquote>
<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/Whonix/apparmor-profile-anondist/blob/master/etc/apparmor.d/tunables/home.d/live-mode" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/apparmor-profile-anondist/blob/master/etc/apparmor.d/tunables/home.d/live-mode" target="_blank">Whonix/apparmor-profile-anondist/blob/master/etc/apparmor.d/tunables/home.d/live-mode</a></h4>
<pre><code class="lang-d/live-mode">## Copyright (C) 2018 - 2018 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## Copyright (C) 2018 Algernon &lt;33966997+Algernon-01@users.noreply.github.com&gt;
## See the file COPYING for copying conditions.

@{HOMEDIRS}+=/rw/home/
alias / -&gt; /rw/,
alias /var/lib/ -&gt; /rw/var/lib/,
alias /var/lib/tor/ -&gt; /rw/var/lib/tor/,
</code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>This makes debugging apparmor issues (currently on <a href="https://forums.whonix.org/t/tor-browser-8-wont-launch/5863/3">Tor Browser 8.* won't launch</a>) cumbersome. Any workaround?</p>
<p>//cc <a class="mention" href="http://forums.whonix.org/u/algernon">@Algernon</a></p>
            <p><small>14 posts - 4 participants</small></p>
            <p><a href="http://forums.whonix.org/t/live-mode-etc-apparmor-d-tunables-home-d-live-mode-breaks-aa-enforce/5868">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/live-mode-etc-apparmor-d-tunables-home-d-live-mode-breaks-aa-enforce/5868</link>
          <pubDate>Thu, 06 Sep 2018 07:24:20 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-5868</guid>
          <source url="http://forums.whonix.org/t/live-mode-etc-apparmor-d-tunables-home-d-live-mode-breaks-aa-enforce/5868.rss">live mode /etc/apparmor.d/tunables/home.d/live-mode breaks aa-enforce</source>
        </item>
        <item>
          <title>Tor Browser 8.* won&#39;t launch</title>
          <dc:creator><![CDATA[qubenix]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>My tbb updated today to version <code>8.0</code> and refused to launch with an <code>Error: 127</code>. Same error code I got when I had <a href="http://forums.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/t/solved-whonix14-qubes3-2-latest-upgrade-prevent-tor-browser-from-launching/5345/14" rel="nofollow noopener">this</a> problem with too many entries in <code>$XDG_CONFIG_DIRS</code>, even though that is not my current problem (I only have six entries there).</p>
<p>I have tried with all available tbb versions, and this happens on all versions <code>8.0</code> and higher.</p>
<p>Here is some output:</p>
<p><a href="https://paste.debian.net/plainh/a71f2e2d" rel="nofollow noopener">bash -x torbrowser</a></p>
<p>Something interesting here:</p>
<p><a href="https://paste.debian.net/plainh/b738e8a4" rel="nofollow noopener">bash -x start-tor-browser --debug</a></p>
            <p><small>4 posts - 3 participants</small></p>
            <p><a href="http://forums.whonix.org/t/tor-browser-8-wont-launch/5863">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/tor-browser-8-wont-launch/5863</link>
          <pubDate>Wed, 05 Sep 2018 21:23:08 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-5863</guid>
          <source url="http://forums.whonix.org/t/tor-browser-8-wont-launch/5863.rss">Tor Browser 8.* won&#39;t launch</source>
        </item>
        <item>
          <title>Tor denied message /etc/torrc.d/95_whonix.conf after upgrade from Whonix 13 to Whonix 14</title>
          <dc:creator><![CDATA[Harlem]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Ok, everything went fine until final reboot.</p>
<p>So after starting ws-gw tor connection is off.</p>
<p>Some logs:</p>
<blockquote>
<p>ERROR: Tor Pid Check Result:<br>
Tor not running. (tor_pid_message: Pid file /var/run/tor/tor.pid does not exist.)<br>
You have to fix this error, before you can use Tor.</p>
</blockquote>
<p>So I checked:</p>
<blockquote>
<p>ls -l /var/run/tor<br>
total 0</p>
<p>ls -l /var/run/tor/tor.pida<br>
ls: cannot access ‘/var/run/tor/tor.pid’: No such file or directory</p>
</blockquote>
<p>Next (from “systemctl status tor@default.service” and “journalctl -xe”):</p>
<blockquote>
<p>systemctl status tor@default.service</p>
<p>● tor@default.service - Anonymizing overlay network for TCP<br>
Loaded: loaded (/lib/systemd/system/tor@default.service; static; vendor preset: enabled)<br>
Drop-In: /lib/systemd/system/tor@default.service.d<br>
└─40_obfs4proxy-workaround.conf, 50_controlsocket-workaround.conf<br>
Active: failed (Result: exit-code) since Thu 2018-08-30 18:33:43 UTC; 1min 35s ago<br>
Process: 2968 ExecStart=/usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc ----RunAsDaemon 0 (code=exited, status=1/FAILURE)<br>
Process: 2964 ExecStartPre=/usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0 --verify-config (code=exited, status=0/SUCCESS)<br>
Process: 2963 ExecStartPre=/usr/bin/install -Z -m 02755 -o debian-tor -g debian-tor -d /var/run/tor (code=exited, status=0/SUCCESS)<br>
Main PID: 2968 (code=exited, status=1/FAILURE)</p>
<p>Aug 30 18:33:43 host systemd[1]: Failed to start Anonymizing overlay network for TCP.<br>
Aug 30 18:33:43 host systemd[1]: tor@default.service: Unit entered failed state.<br>
Aug 30 18:33:43 host systemd[1]: tor@default.service: Failed with result ‘exit-code’.<br>
Aug 30 18:33:43 host systemd[1]: tor@default.service: Service hold-off time over, scheduling restart.<br>
Aug 30 18:33:43 host systemd[1]: Stopped Anonymizing overlay network for TCP.<br>
Aug 30 18:33:43 host systemd[1]: tor@default.service: Start request repeated too quickly.<br>
Aug 30 18:33:43 host systemd[1]: Failed to start Anonymizing overlay network for TCP.<br>
Aug 30 18:33:43 host systemd[1]: tor@default.service: Unit entered failed state.<br>
Aug 30 18:33:43 host systemd[1]: tor@default.service: Failed with result ‘exit-code’.</p>
</blockquote>
<p>Also (this is going on an on…):</p>
<blockquote>
<p><strong>Aug 30 18:33:42 host systemd[1]: Starting Anonymizing overlay network for TCP…</strong><br>
<strong>– Subject: Unit tor@default.service has begun start-up</strong><br>
<strong>– Defined-By: systemd</strong><br>
<strong>– Support: <a href="https://www.debian.org/support" rel="nofollow noopener">https://www.debian.org/support</a></strong><br>
**-- **<br>
<strong>– Unit tor@default.service has begun starting up.</strong><br>
<strong>Aug 30 18:33:42 host tor[2964]: Aug 30 18:33:42.847 [notice] Tor 0.3.3.9 (git-ca1a436fa8e53a32) running on Linux with Libevent 2.0.21-stable, OpenSSL 1.1.0f, Zlib 1.2.8, Liblzma 5.2.2, and Libzstd 1.1.2.</strong><br>
<strong>Aug 30 18:33:42 host tor[2964]: Aug 30 18:33:42.848 [notice] Tor can’t help you if you use it wrong! Learn how to be safe at <a href="https://www.torproject.org/download/download#warning" rel="nofollow noopener">https://www.torproject.org/download/download#warning</a></strong><br>
<strong>Aug 30 18:33:42 host tor[2964]: Aug 30 18:33:42.849 [notice] Read configuration file “/usr/share/tor/tor-service-defaults-torrc”.</strong><br>
<strong>Aug 30 18:33:42 host tor[2964]: Aug 30 18:33:42.849 [notice] Read configuration file “/etc/tor/torrc”.</strong><br>
<strong>Aug 30 18:33:42 host tor[2964]: Aug 30 18:33:42.858 [warn] Option ‘DisableNetwork’ used more than once; all but the last value will be ignored.</strong><br>
<strong>Aug 30 18:33:42 host tor[2964]: Aug 30 18:33:42.858 [notice] You configured a non-loopback address ‘10.152.152.10:5300’ for DNSPort. This allows everybody on your local network to use your machine as a proxy. Make sure this is what you wanted.</strong><br>
<strong>Aug 30 18:33:42 host tor[2964]: Aug 30 18:33:42.858 [notice] You configured a non-loopback address ‘10.152.152.10:9040’ for TransPort. This allows everybody on your local network to use your machine as a proxy. Make sure this is what you wanted.</strong><br>
<strong>Aug 30 18:33:42 host tor[2964]: Configuration was valid</strong><br>
<strong>Aug 30 18:33:43 host tor[2968]: Aug 30 18:33:43.377 [notice] Tor 0.3.3.9 (git-ca1a436fa8e53a32) running on Linux with Libevent 2.0.21-stable, OpenSSL 1.1.0f, Zlib 1.2.8, Liblzma 5.2.2, and Libzstd 1.1.2.</strong><br>
<strong>Aug 30 18:33:43 host tor[2968]: Aug 30 18:33:43.379 [notice] Tor can’t help you if you use it wrong! Learn how to be safe at <a href="https://www.torproject.org/download/download#warning" rel="nofollow noopener">https://www.torproject.org/download/download#warning</a></strong><br>
<strong>Aug 30 18:33:43 host tor[2968]: Aug 30 18:33:43.380 [notice] Read configuration file “/usr/share/tor/tor-service-defaults-torrc”.</strong><br>
<strong>Aug 30 18:33:43 host tor[2968]: Aug 30 18:33:43.380 [notice] Read configuration file “/etc/tor/torrc”.</strong><br>
<strong>Aug 30 18:33:43 host audit[2968]: AVC apparmor=“DENIED” operation=“open” profile=“system_tor” name="/etc/torrc.d/95_whonix.conf" pid=2968 comm=“tor” requested_mask=“r” denied_mask=“r” fsuid=0 ouid=0</strong><br>
<strong>Aug 30 18:33:43 host audit[2968]: SYSCALL arch=40000003 syscall=5 success=no exit=-13 a0=a2ad20 a1=88000 a2=0 a3=b7278000 items=1 ppid=1 pid=2968 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=“tor” exe="/usr/bin/tor" key=(null)</strong><br>
<strong>Aug 30 18:33:43 host audit: CWD cwd="/"</strong><br>
<strong>Aug 30 18:33:43 host audit: PATH item=0 name="/etc/torrc.d/95_whonix.conf" inode=3016178 dev=08:01 mode=0100644 ouid=0 ogid=0 rdev=00:00 nametype=NORMAL</strong><br>
<strong>Aug 30 18:33:43 host audit: PROCTITLE proctitle=2F7573722F62696E2F746F72002D2D64656661756C74732D746F727263002F7573722F73686172652F746F722F746F722D736572766963652D64656661756C74732D746F727263002D66002F6574632F746F722F746F727263002D2D52756E41734461656D6F6E0030</strong><br>
<strong>Aug 30 18:33:43 host tor[2968]: Aug 30 18:33:43.389 [warn] Could not open “/etc/torrc.d/95_whonix.conf”: Permission denied</strong><br>
<strong>Aug 30 18:33:43 host tor[2968]: Aug 30 18:33:43.389 [warn] Error reading included configuration file or directory: “/etc/torrc.d/95_whonix.conf”.</strong><br>
<strong>Aug 30 18:33:43 host tor[2968]: Aug 30 18:33:43.389 [err] Reading config failed–see warnings above.</strong><br>
<strong>Aug 30 18:33:43 host systemd[1]: tor@default.service: Main process exited, code=exited, status=1/FAILURE</strong><br>
<strong>Aug 30 18:33:43 host audit[1]: SERVICE_START pid=1 uid=0 auid=4294967295 ses=4294967295 msg='unit=tor@default comm=“systemd” exe="/lib/systemd/systemd" hostname=? addr=? terminal=? res=failed’</strong><br>
<strong>Aug 30 18:33:43 host systemd[1]: Failed to start Anonymizing overlay network for TCP.</strong><br>
<strong>– Subject: Unit tor@default.service has failed</strong><br>
<strong>– Defined-By: systemd</strong><br>
<strong>– Support: <a href="https://www.debian.org/support" rel="nofollow noopener">https://www.debian.org/support</a></strong><br>
**-- **<br>
<strong>– Unit tor@default.service has failed.</strong><br>
**-- **<br>
<strong>– The result is failed.</strong><br>
<strong>Aug 30 18:33:43 host systemd[1]: tor@default.service: Unit entered failed state.</strong><br>
<strong>Aug 30 18:33:43 host systemd[1]: tor@default.service: Failed with result ‘exit-code’.</strong><br>
<strong>Aug 30 18:33:43 host systemd[1]: tor@default.service: Service hold-off time over, scheduling restart.</strong><br>
<strong>Aug 30 18:33:43 host audit[1]: SERVICE_START pid=1 uid=0 auid=4294967295 ses=4294967295 msg='unit=tor@default comm=“systemd” exe="/lib/systemd/systemd" hostname=? addr=? terminal=? res=success’</strong><br>
<strong>Aug 30 18:33:43 host systemd[1]: brltty.service: Cannot add dependency job, ignoring: Unit brltty.service is masked.</strong><br>
<strong>Aug 30 18:33:43 host audit[1]: SERVICE_STOP pid=1 uid=0 auid=4294967295 ses=4294967295 msg='unit=tor@default comm=“systemd” exe="/lib/systemd/systemd" hostname=? addr=? terminal=? res=success’</strong><br>
<strong>Aug 30 18:33:43 host systemd[1]: Stopped Anonymizing overlay network for TCP.</strong><br>
<strong>– Subject: Unit tor@default.service has finished shutting down</strong><br>
<strong>– Defined-By: systemd</strong><br>
<strong>– Support: <a href="https://www.debian.org/support" rel="nofollow noopener">https://www.debian.org/support</a></strong><br>
**-- **<br>
<strong>– Unit tor@default.service has finished shutting down.</strong><br>
<strong>Aug 30 18:33:43 host systemd[1]: tor@default.service: Start request repeated too quickly.</strong><br>
<strong>Aug 30 18:33:43 host systemd[1]: Failed to start Anonymizing overlay network for TCP.</strong></p>
</blockquote>
<p>I have checked network interfaces, it look ok (<a href="https://forums.whonix.org/t/whonixcheck-fail-tor-pid-does-not-exist-after-upgrade-from-whonix-11-to-whonix-12/1793/10">same as posted here</a>).</p>
            <p><small>23 posts - 4 participants</small></p>
            <p><a href="http://forums.whonix.org/t/tor-denied-message-etc-torrc-d-95-whonix-conf-after-upgrade-from-whonix-13-to-whonix-14/5806">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/tor-denied-message-etc-torrc-d-95-whonix-conf-after-upgrade-from-whonix-13-to-whonix-14/5806</link>
          <pubDate>Thu, 30 Aug 2018 19:53:38 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-5806</guid>
          <source url="http://forums.whonix.org/t/tor-denied-message-etc-torrc-d-95-whonix-conf-after-upgrade-from-whonix-13-to-whonix-14/5806.rss">Tor denied message /etc/torrc.d/95_whonix.conf after upgrade from Whonix 13 to Whonix 14</source>
        </item>
        <item>
          <title>My experimental Monero profiles.</title>
          <dc:creator><![CDATA[0xB44EFD8751077F97]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>I’ve made some profiles for Monero by forking/editing some profiles I found for Tails. I would love some feedback since these are the first profiles I’ve ever made, and I’m very fresh with AppArmor in general.</p>
<p>The profiles can be found here: <a href="https://github.com/0xB44EFD8751077F97/apparmor-monero-qubes-whonix" rel="nofollow noopener">https://github.com/0xB44EFD8751077F97/apparmor-monero-qubes-whonix</a>.</p>
<p>These were tested on Qubes 4.0/Whonix 14 with a non-networked wallet isolated from the daemon, but I tried to make the profiles flexible enough to work on a traditional set up as well.</p>
            <p><small>2 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/my-experimental-monero-profiles/5748">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/my-experimental-monero-profiles/5748</link>
          <pubDate>Fri, 24 Aug 2018 03:06:20 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-5748</guid>
          <source url="http://forums.whonix.org/t/my-experimental-monero-profiles/5748.rss">My experimental Monero profiles.</source>
        </item>
        <item>
          <title>xchat-based needs some rules</title>
          <dc:creator><![CDATA[0xB44EFD8751077F97]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>I noticed <code>hexchat</code> is having trouble with current profiles. Wouldn’t make any connections without a rule added to <code>abstractions/xchat-based</code> for <code>/etc/resolv.conf.anondist r,</code>.</p>
<p>There’s also some <code>DENIED</code> entries for <code>/etc/hosts</code>, but didn’t seem to effect functionality yet. Not sure if this one is intentional since not explicitly denied.</p>
<hr>
<p>Is there a better place to report these? Phabricator? Not familiar with it, but I made an account that’s waiting on approval.</p>
            <p><small>3 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/xchat-based-needs-some-rules/5747">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/xchat-based-needs-some-rules/5747</link>
          <pubDate>Fri, 24 Aug 2018 02:50:49 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>Yes</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-5747</guid>
          <source url="http://forums.whonix.org/t/xchat-based-needs-some-rules/5747.rss">xchat-based needs some rules</source>
        </item>
        <item>
          <title>aa-genprof is broken on Whonix.</title>
          <dc:creator><![CDATA[0xB44EFD8751077F97]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>I’m working on AppArmor profiles for Monero tools and right away I noticed <code>aa-genprof</code> is broken because of a Whonix file:</p>
<pre><code class="lang-auto">user@host:~$ sudo aa-genprof /usr/local/bin/monerod 

ERROR: Values added to a non-existing variable @{HOMEDIRS}: /rw/home/ in tunables/home.d/live-mode
user@host:~$ cat /etc/apparmor.d/tunables/home.d/live-mode 
## Copyright (C) 2018 - 2018 ENCRYPTED SUPPORT LP &lt;adrelanos@riseup.net&gt;
## Copyright (C) 2018 Algernon &lt;33966997+Algernon-01@users.noreply.github.com&gt;
## See the file COPYING for copying conditions.

@{HOMEDIRS}+=/rw/home/
alias / -&gt; /rw/,
alias /var/lib/ -&gt; /rw/var/lib/,
alias /var/lib/tor/ -&gt; /rw/var/lib/tor/,
</code></pre>
<p>This is on Qubes 4/Whonix 14, testers repo.</p>
            <p><small>3 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/aa-genprof-is-broken-on-whonix/5731">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/aa-genprof-is-broken-on-whonix/5731</link>
          <pubDate>Wed, 22 Aug 2018 17:23:24 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>Yes</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-5731</guid>
          <source url="http://forums.whonix.org/t/aa-genprof-is-broken-on-whonix/5731.rss">aa-genprof is broken on Whonix.</source>
        </item>
        <item>
          <title>Whonix 14 and AppArmor</title>
          <dc:creator><![CDATA[Norex]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Hello<br>
In documentation <a href="https://www.whonix.org/wiki/Documentation" rel="nofollow noopener">https://www.whonix.org/wiki/Documentation</a> it types AppArmor have some conflicts with obfs proxy<br>
In Whonix 14 it works okay ? Does apparmor have any conflicts with obfsproxy or other software from Whonix14 ?</p>
            <p><small>12 posts - 4 participants</small></p>
            <p><a href="http://forums.whonix.org/t/whonix-14-and-apparmor/5434">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/whonix-14-and-apparmor/5434</link>
          <pubDate>Sat, 07 Jul 2018 14:40:59 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-5434</guid>
          <source url="http://forums.whonix.org/t/whonix-14-and-apparmor/5434.rss">Whonix 14 and AppArmor</source>
        </item>
        <item>
          <title>Template Troubles with Qubes 4.0</title>
          <dc:creator><![CDATA[9jnc7]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Fresh install of Qubes 4.0. The wiki’s Security Guide appears to be outdated when it comes to Qubes 4.0. AppArmor for the Whonix TemplateVMs (different attempts using both fresh and restored) produced persistent AppArmor violation popups, along with no changes to kernelopts in the TemplateVM’s settings pages. Qubes 4.0 uses PVH virtualization wherever possible, and the qvm-pref man page states VM kernel parameters (–kernelopts) are available only for PV VMs.</p>
<p>So I assume AppArmor is currently unusable in this version of Qubes? I looked for any recent posts about this but saw nothing.</p>
            <p><small>7 posts - 4 participants</small></p>
            <p><a href="http://forums.whonix.org/t/template-troubles-with-qubes-4-0/5058">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/template-troubles-with-qubes-4-0/5058</link>
          <pubDate>Mon, 02 Apr 2018 20:56:17 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-5058</guid>
          <source url="http://forums.whonix.org/t/template-troubles-with-qubes-4-0/5058.rss">Template Troubles with Qubes 4.0</source>
        </item>
        <item>
          <title>Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</title>
          <dc:creator><![CDATA[qubenix]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Using Qubes 3.2 and Whonix 13 (wasn’t sure to put this in AppArmor or Qubes-Whonix section) with AppArmor enabled. Updated dom0 and received a new vm kernel: <code>kernel-qubes-vm.x86_64 1000:4.14.18-1.pvops.qubes</code>. When this kernel is used on a Whonix 13 AppVM (workstation or gateway) with AppArmor enabled it produces pop up spam from the kern.log. Here is the entry:</p>
<pre><code class="lang-auto">Feb  9 16:44:31 host kernel: [   28.421099] audit: type=1400 audit(1518194671.669:36): apparmor="DENIED" operation="signal" profile="/usr/bin/whonixcheck" pid=1002 comm="whonixcheck" requested_mask="send" denied_mask="send" signal=rtmin+-93 peer="unconfined"
</code></pre>
<p>Temporary fix is to select kernel <code>4.14.13-1</code> for my Whonix VMs.</p>
            <p><small>37 posts - 6 participants</small></p>
            <p><a href="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811</link>
          <pubDate>Fri, 09 Feb 2018 17:00:05 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-4811</guid>
          <source url="http://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811.rss">Apparmor and kernel 4.14.18-1 creates tons of kern.log pop ups.</source>
        </item>
        <item>
          <title>Qubes-Whonix AppArmor instructions with dom0 upgraded to 4.14 kernel breaks AppArmor</title>
          <dc:creator><![CDATA[torjunkie]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Patrick, have you tested the Qubes-Whonix AppArmor instructions with dom0 upgraded to 4.14 kernel?</p>
<p>Even though kernelopts are set correctly as per:</p>
<p><a href="http://kkkkkkkkkk63ava6.onion/wiki/AppArmor" class="onebox" target="_blank">http://kkkkkkkkkk63ava6.onion/wiki/AppArmor</a></p>
<p>The manual check in sys-whonix and Whonix-Workstation AppVM shows:</p>
<p>1</p>
<p>Not 0 as expected.</p>
<p>sudo aa-status shows “apparmor module is not loaded” in those AppVMs.</p>
<p>No evidence of AppArmor loading or profiles being enforced in logs as expected.</p>
<p>If this is a bug, this could affect a bunch of Whonix users when Qubes pushes 14.4 kernel, like I believe they intend to in the near term as it is next stable.</p>
            <p><small>5 posts - 3 participants</small></p>
            <p><a href="http://forums.whonix.org/t/qubes-whonix-apparmor-instructions-with-dom0-upgraded-to-4-14-kernel-breaks-apparmor/4723">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/qubes-whonix-apparmor-instructions-with-dom0-upgraded-to-4-14-kernel-breaks-apparmor/4723</link>
          <pubDate>Fri, 19 Jan 2018 10:38:54 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-4723</guid>
          <source url="http://forums.whonix.org/t/qubes-whonix-apparmor-instructions-with-dom0-upgraded-to-4-14-kernel-breaks-apparmor/4723.rss">Qubes-Whonix AppArmor instructions with dom0 upgraded to 4.14 kernel breaks AppArmor</source>
        </item>
        <item>
          <title>Error message while starting : [Failed to start LSB: AppArmor initialization</title>
          <dc:creator><![CDATA[Cottonwoodhill]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Hello Whonix Community,</p>
<p>I’m experiencing an error message while starting my Whonix-Workstation (doesn’t appear on the Gateway). I don’t know if this is very important, but I don’t like the red [Failed] lines so I would like to solve that if possible with your help.</p>
<p>Here is a capture : <a href="https://imgur.com/qHCIOuY" rel="nofollow noopener">https://imgur.com/qHCIOuY</a></p>
<p>What does it mean ? Is there something we can do to fix this ?</p>
<p>Thank you for your support and best regards.</p>
            <p><small>5 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/error-message-while-starting-failed-to-start-lsb-apparmor-initialization/4687">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/error-message-while-starting-failed-to-start-lsb-apparmor-initialization/4687</link>
          <pubDate>Fri, 05 Jan 2018 23:38:23 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-4687</guid>
          <source url="http://forums.whonix.org/t/error-message-while-starting-failed-to-start-lsb-apparmor-initialization/4687.rss">Error message while starting : [Failed to start LSB: AppArmor initialization</source>
        </item>
        <item>
          <title>anon-connection-wizard &amp; AppArmor</title>
          <dc:creator><![CDATA[iry]]></dc:creator>
          <category>AppArmor</category>
          <description><![CDATA[
            <p>Continuing the discussion from <a href="http://forums.kkkkkkkkkk63ava6.onion/t/graphical-gui-whonix-setup-wizard-anon-connection-wizard-technical-discussion/650/398" rel="nofollow noopener">[graphical gui] Whonix Setup Wizard / Anon Connection Wizard - Technical Discussion</a>:</p>
<p><a href="https://github.com/Whonix/anon-gw-anonymizer-config/pull/7" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/Whonix/anon-gw-anonymizer-config/pull/7</a></p>
<p>One thing I am not quiet sure:</p>
<pre><code class="lang-auto">
-  /usr/local/etc/torrc.d/ r,
-  /usr/local/etc/torrc.d/* r,
+  /usr/local/etc/torrc.d/ rw,
+  /usr/local/etc/torrc.d/* rw,
</code></pre>
<p>It seems we should give the write permissions, correct?</p>
            <p><small>4 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/anon-connection-wizard-apparmor/4665">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/anon-connection-wizard-apparmor/4665</link>
          <pubDate>Sat, 30 Dec 2017 12:21:55 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-4665</guid>
          <source url="http://forums.whonix.org/t/anon-connection-wizard-apparmor/4665.rss">anon-connection-wizard &amp; AppArmor</source>
        </item>
  </channel>
</rss>
