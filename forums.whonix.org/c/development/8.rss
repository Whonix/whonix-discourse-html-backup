<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:discourse="http://www.discourse.org/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Development - Whonix Forum</title>
    <link>http://forums.whonix.org/c/development/8</link>
    <description>Topics in the &#39;Development&#39; category Hacking on the Whonix software and code. (&lt;a href=&quot;https://phabricator.whonix.org/maniphest/query/open/&quot;&gt;devs&lt;/a&gt;) (&lt;a href=&quot;https://www.whonix.org/wiki/Contribute#Development&quot;&gt;list of components looking for maintainer&lt;/a&gt;)</description>
    <language>en</language>
      <lastBuildDate>Thu, 20 Oct 2022 19:17:49 +0000</lastBuildDate>
      <atom:link href="http://forums.whonix.org/c/development/8.rss" rel="self" type="application/rss+xml" />
        <item>
          <title>onion-grater-merger should support different hosts</title>
          <dc:creator><![CDATA[nyxnor]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>I didn’t test yet but it appears hosts are not being included</p>
<aside class="onebox githubblob" data-onebox-src="https://github.com/Whonix/onion-grater/blob/master/usr/lib/onion-grater#L64">
  <header class="source">

      <a href="https://github.com/Whonix/onion-grater/blob/master/usr/lib/onion-grater#L64" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/onion-grater/blob/master/usr/lib/onion-grater#L64" target="_blank" rel="noopener">Whonix/onion-grater/blob/master/usr/lib/onion-grater#L64</a></h4>



    <pre class="onebox">      <code class="lang-">
        <ol class="start lines" start="54" style="counter-reset: li-counter 53 ;">
            <li>#   with `*` matching anything. While this matcher always works for binaries,</li>
            <li>#   it only works for scripts with an enabled AppArmor profile (not</li>
            <li>#   necessarily enforced, complain mode is good enough).</li>
            <li>#</li>
            <li># * `users`: a list of strings, each describing the user of the</li>
            <li>#   client with `*` matching anything.</li>
            <li>#</li>
            <li># For remote (non-local) clients, the following qualifiers are</li>
            <li># relevant:</li>
            <li>#</li>
            <li class="selected"># * hosts: a list of strings, each describing the IPv4 address</li>
            <li>#   of the client with `*` matching anything.</li>
            <li>#</li>
            <li># A filter can serve both local and remote clients by having</li>
            <li># qualifiers of both types.</li>
            <li>#</li>
            <li># `commands` (optional) is a list where each item is a dictionary with</li>
            <li># the obligatory `pattern` key, which is a regular expression that is</li>
            <li># matched against the full argument part of the command. The default</li>
            <li># behavior is to just proxy the line through if matched, but it can be</li>
            <li># altered with these keys:</li>
        </ol>
      </code>
    </pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox githubblob" data-onebox-src="https://github.com/Whonix/onion-grater/blob/master/usr/lib/onion-grater-merger#L23">
  <header class="source">

      <a href="https://github.com/Whonix/onion-grater/blob/master/usr/lib/onion-grater-merger#L23" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/Whonix/onion-grater/blob/master/usr/lib/onion-grater-merger#L23" target="_blank" rel="noopener">Whonix/onion-grater/blob/master/usr/lib/onion-grater-merger#L23</a></h4>



    <pre class="onebox">      <code class="lang-">
        <ol class="start lines" start="13" style="counter-reset: li-counter 12 ;">
            <li>## Creates &lt;code&gt;/etc/onion-grater.d/30_autogenerated.yml&lt;/code&gt;.</li>
            <li>##</li>
            <li>## Only known use so far is by Whonix.</li>
            <li>#### meta end</li>
            <li>
            </li>
<li>import glob</li>
            <li>import yaml</li>
            <li>import os</li>
            <li>
            </li>
<li># Override elements</li>
            <li class="selected">no_merge_elements = ['suppress','match-hosts']</li>
            <li># Override elements with fixed value</li>
            <li>fixed_value_elements = {'match-exe-paths':'*','match-users':'*'}</li>
            <li>
            </li>
<li>def merge_yml(final_obj, parsing_obj):</li>
            <li>   # Inputs - 2 dictionaries/list from YML/YAML file</li>
            <li>   # "parsing_obj" is parsed and merged into "final_obj" and returned back</li>
            <li>   if isinstance(final_obj,dict) and isinstance(parsing_obj,dict):</li>
            <li>      for k,v in parsing_obj.items():</li>
            <li>         if k not in final_obj:</li>
            <li>            final_obj[k] = v</li>
        </ol>
      </code>
    </pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>This would favor Multiple Workstations and each one receiving a different set of rules of the controller set by onion-grater.</p>
<p>Requires onion-grater-merger support.</p>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="http://forums.whonix.org/t/onion-grater-merger-should-support-different-hosts/15857">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/onion-grater-merger-should-support-different-hosts/15857</link>
          <pubDate>Thu, 20 Oct 2022 19:17:49 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15857</guid>
          <source url="http://forums.whonix.org/t/onion-grater-merger-should-support-different-hosts/15857.rss">onion-grater-merger should support different hosts</source>
        </item>
        <item>
          <title>current state of whonix live</title>
          <dc:creator><![CDATA[quantum445]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>i want to know the current state of development for whonix live, if there is any and how can i help with it</p>
            <p><small>5 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/current-state-of-whonix-live/15855">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/current-state-of-whonix-live/15855</link>
          <pubDate>Thu, 20 Oct 2022 17:49:27 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15855</guid>
          <source url="http://forums.whonix.org/t/current-state-of-whonix-live/15855.rss">current state of whonix live</source>
        </item>
        <item>
          <title>download warnings</title>
          <dc:creator><![CDATA[quantum445]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>i believe in the <a href="https://www.whonix.org/wiki/Download" rel="noopener nofollow ugc">download page</a> there should be a warning when somebody attempts to download for windows or virtualbox, something along lines of “please read this” and it would redirect them to a whonix wiki page on windows host issues that can make whonix useless as well as virtualbox closed source nature</p>
            <p><small>3 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/download-warnings/15853">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/download-warnings/15853</link>
          <pubDate>Thu, 20 Oct 2022 17:41:42 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15853</guid>
          <source url="http://forums.whonix.org/t/download-warnings/15853.rss">download warnings</source>
        </item>
        <item>
          <title>obfs4proxy in 2022</title>
          <dc:creator><![CDATA[quantum445]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>apparently the developer for obfs4proxy does not want people to use his protocol because “it’s shelf-life expired years ago.  No one should be using<br>
it for anything at this point, and no one should have been using it<br>
for anything for the past however many years since I first started<br>
telling people to stop using it.”</p>
<p>source is directly from source code: <a href="https://gitlab.com/yawning/obfs4/-/blob/master/internal/README.md" class="inline-onebox" rel="noopener nofollow ugc">internal/README.md · master · Yawning Angel / obfs4 · GitLab</a></p>
<p>this is worth a wiki page on its own tbh</p>
            <p><small>7 posts - 3 participants</small></p>
            <p><a href="http://forums.whonix.org/t/obfs4proxy-in-2022/15850">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/obfs4proxy-in-2022/15850</link>
          <pubDate>Wed, 19 Oct 2022 21:41:14 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15850</guid>
          <source url="http://forums.whonix.org/t/obfs4proxy-in-2022/15850.rss">obfs4proxy in 2022</source>
        </item>
        <item>
          <title>onion-grater wiki improvements</title>
          <dc:creator><![CDATA[nyxnor]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>Tor Controller is not on the list but this <a href="https://www.whonix.org/wiki/Dev/Control_Port_Filter_Proxy#Talking_to_the_real_Tor_Control_Port" class="inline-onebox">onion-grater, a Tor Control Port Filter Proxy - filtering dangerous Tor Control Port commands - Design Documentation</a> should be moved entirely to <a href="https://www.whonix.org/wiki/Tor_Controller#Talking_to_the_real_Tor_Control_Port" class="inline-onebox">Control and Monitor Tor</a></p>
<p>The Control Proxy, or onion-grater should only have documentation related to its filter, the controller page should have the controller commands, the filter page should have explanation on how to filter, how to allow via profile etc, but not on how to connect.</p>
<p>Also, I fixed a bug recently on tor-ctrl to be able to run from the Workstation, so if you wish to test if a command is filtered or not, you can do through the command line to see what onion-grater lets through.</p>
<hr>
<h2>
<a name="simple-plan-1" class="anchor" href="http://forums.whonix.org#simple-plan-1"></a>Simple plan</h2>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Onion-grater">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Onion-grater" target="_blank" rel="noopener" title="10:16PM - 11 October 2022">Whonix – 11 Oct 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:640/426;"><img src="https://www.whonix.org/w/images/6/6b/Oniongrater123123.jpg?version=60f1c4ac5cae4c6a2548441982f13222" class="thumbnail" width="640" height="426"></div>

<h3><a href="https://www.whonix.org/wiki/Onion-grater" target="_blank" rel="noopener">onion-grater: a Tor Control Port Filter Proxy</a></h3>

  <p>information about onion-grater</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<ul>
<li>will be the last one to be done so after the Dev wording is done for the<br>
other pages, the simpler version can contain everything important for the<br>
user in an easy vocabulary</li>
<li>most important to mention onion-grater-add and onion-grater-remove and<br>
onion-grater-list, this is what an user faces with already compatible<br>
applications</li>
<li>source code not so important in the user facing page, maybe just keep it on<br>
the Dev/onio-grater page.</li>
<li>make the footnotes a topic, they are too big to be on the footnotes</li>
</ul>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Dev/onion-grater">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Dev/onion-grater" target="_blank" rel="noopener" title="12:55AM - 02 December 2021">Whonix – 2 Dec 21</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/388;"><img src="https://www.whonix.org/w/images/5/59/Whonix-twitter-post.jpg?version=54f067e87f7190deda500f4c79618b61" class="thumbnail" width="690" height="388"></div>

<h3><a href="https://www.whonix.org/wiki/Dev/onion-grater" target="_blank" rel="noopener">Dev/onion-grater</a></h3>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<ul>
<li>maybe merge this page with Dev/Control_Port_Filter_Proxy because the only<br>
filter proxy is onion-grater</li>
</ul>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Dev/Control_Port_Filter_Proxy">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Dev/Control_Port_Filter_Proxy" target="_blank" rel="noopener" title="10:07AM - 15 October 2022">Whonix – 15 Oct 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/388;"><img src="https://www.whonix.org/w/images/5/59/Whonix-twitter-post.jpg?version=54f067e87f7190deda500f4c79618b61" class="thumbnail" width="690" height="388"></div>

<h3><a href="https://www.whonix.org/wiki/Dev/Control_Port_Filter_Proxy" target="_blank" rel="noopener">onion-grater, a Tor Control Port Filter Proxy - filtering dangerous Tor...</a></h3>

  <p>onion-grater, a Tor Control Port Filter Proxy - filtering dangerous Tor Control Port commands - Design Documentation</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<ul>
<li>improve debugging of onion-grater</li>
<li>improve description of what commands do</li>
<li>separate onion-grater to a distinct section</li>
<li>s/qubes-netvm-gateway/qubes-gateway/</li>
<li>remove mentions of Tor Control such as <a href="https://www.whonix.org/wiki/Dev/Control_Port_Filter_Proxy#connect_to_onion-grater_from_workstation" class="inline-onebox">onion-grater, a Tor Control Port Filter Proxy - filtering dangerous Tor Control Port commands - Design Documentation</a><br>
because this is already done on<br>
<a href="https://www.whonix.org/wiki/Tor_Controller#Talking_to_the_real_Tor_Control_Port" class="inline-onebox">Control and Monitor Tor</a>
</li>
</ul>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/Dev/Control_Port_Filter_Proxy#connect_to_onion-grater_from_workstation">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/Dev/Control_Port_Filter_Proxy#connect_to_onion-grater_from_workstation" target="_blank" rel="noopener" title="10:07AM - 15 October 2022">Whonix – 15 Oct 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/388;"><img src="https://www.whonix.org/w/images/5/59/Whonix-twitter-post.jpg?version=54f067e87f7190deda500f4c79618b61" class="thumbnail" width="690" height="388"></div>

<h3><a href="https://www.whonix.org/wiki/Dev/Control_Port_Filter_Proxy#connect_to_onion-grater_from_workstation" target="_blank" rel="noopener">onion-grater, a Tor Control Port Filter Proxy - filtering dangerous Tor...</a></h3>

  <p>onion-grater, a Tor Control Port Filter Proxy - filtering dangerous Tor Control Port commands - Design Documentation</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<ul>
<li>merge this page with Dev/Control_Port_Filter_Proxy</li>
<li>this page is difficult to find</li>
<li>it should be on its own section of its parent page</li>
</ul>
<hr>
<p>Also, to each page, a good introduction.</p>
<p>I will do the changes to the Control_Port_Filter_Proxy but I believe it should be renamed to Dev/Onion-Grater as it is the only control proxy we have.</p>
            <p><small>46 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/onion-grater-wiki-improvements/15845">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/onion-grater-wiki-improvements/15845</link>
          <pubDate>Tue, 18 Oct 2022 16:52:19 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15845</guid>
          <source url="http://forums.whonix.org/t/onion-grater-wiki-improvements/15845.rss">onion-grater wiki improvements</source>
        </item>
        <item>
          <title>CI Whonix Testing</title>
          <dc:creator><![CDATA[bee]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>Currently, I have a repo working for automated whonix integration testing. This is a continuation of the WATS senior capstone project, and will be integrated in to the new CI stuff I built.</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://github.com/Mycobee/whonix_automated_test_suite">
  <header class="source">
      <img src="https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">

      <a href="https://github.com/Mycobee/whonix_automated_test_suite" target="_blank" rel="noopener nofollow ugc">GitHub</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/345;"><img src="https://opengraph.githubassets.com/ac3cc13952734d679beb4c48f278f622bcb331b69068c3c8042fb81748b3af06/Mycobee/whonix_automated_test_suite" class="thumbnail" width="690" height="345"></div>

<h3><a href="https://github.com/Mycobee/whonix_automated_test_suite" target="_blank" rel="noopener nofollow ugc">GitHub - Mycobee/whonix_automated_test_suite: An automated testing suite...</a></h3>

  <p>An automated testing suite using RSpec and Shell Scripting for the privacy focused Whonix distribution - GitHub - Mycobee/whonix_automated_test_suite: An automated testing suite using RSpec and She...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>I am creating a new thread to log my efforts and progress, so as to keep things readable and up to date.</p>
<p><a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> you had a list of desired test cases somewhere right? Can’t seem to find it at the moment.</p>
            <p><small>3 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/ci-whonix-testing/15839">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/ci-whonix-testing/15839</link>
          <pubDate>Mon, 17 Oct 2022 15:42:56 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15839</guid>
          <source url="http://forums.whonix.org/t/ci-whonix-testing/15839.rss">CI Whonix Testing</source>
        </item>
        <item>
          <title>Components in need of a maintainer / rewrite</title>
          <dc:creator><![CDATA[nobodySqr]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>Hi I am looking to use some of my free time to help out with Whonix development</p>
<p>I am looking for current components in need of a maintainer or a complete rewrite</p>
<p>Thanks.</p>
            <p><small>3 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/components-in-need-of-a-maintainer-rewrite/15829">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/components-in-need-of-a-maintainer-rewrite/15829</link>
          <pubDate>Sun, 16 Oct 2022 14:38:34 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15829</guid>
          <source url="http://forums.whonix.org/t/components-in-need-of-a-maintainer-rewrite/15829.rss">Components in need of a maintainer / rewrite</source>
        </item>
        <item>
          <title>support hushlogin - less output in terminal emulator</title>
          <dc:creator><![CDATA[Patrick]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p><a href="https://manpages.debian.org/unstable/login/login.1.en.html" class="onebox" target="_blank" rel="noopener">https://manpages.debian.org/unstable/login/login.1.en.html</a></p>
<blockquote>
<p><strong>HUSHLOGIN_FILE</strong> (string)</p>
</blockquote>
<blockquote>
<p>If defined, this file can inhibit all the usual chatter during the login sequence. If a full pathname is specified, then hushed mode will be enabled if the user’s name or shell are found in the file. If not a full pathname, then hushed mode will be enabled if the file exists in the user’s home directory.</p>
</blockquote>
<blockquote>
<p>$HOME/.hushlogin</p>
</blockquote>
<p><code>+</code> seems good to support:</p>
<p><code>/etc/hushlogin</code><br>
<code>/usr/local/etc/hushlogin</code></p>
            <p><small>2 posts - 1 participant</small></p>
            <p><a href="http://forums.whonix.org/t/support-hushlogin-less-output-in-terminal-emulator/15827">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/support-hushlogin-less-output-in-terminal-emulator/15827</link>
          <pubDate>Sun, 16 Oct 2022 11:40:55 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15827</guid>
          <source url="http://forums.whonix.org/t/support-hushlogin-less-output-in-terminal-emulator/15827.rss">support hushlogin - less output in terminal emulator</source>
        </item>
        <item>
          <title>more secure shell version in whonix experimental - ash - reduced attack surface</title>
          <dc:creator><![CDATA[quantum445]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>good idea for current whonix but whonix in general needs to have seperate branches, one for current whonix (stable) and other for “experiments” where maintainers can just put ash or dash or bash or zsh without starting a discussion then putting a download link to for testing/bug hunting under some kind “Experimental” page in wiki/download page</p>
<p>the shell in that version (experimental) should be ash due low amount of code and good security track when compared to bash/zsh</p>
            <p><small>15 posts - 4 participants</small></p>
            <p><a href="http://forums.whonix.org/t/more-secure-shell-version-in-whonix-experimental-ash-reduced-attack-surface/15825">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/more-secure-shell-version-in-whonix-experimental-ash-reduced-attack-surface/15825</link>
          <pubDate>Sat, 15 Oct 2022 22:17:41 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15825</guid>
          <source url="http://forums.whonix.org/t/more-secure-shell-version-in-whonix-experimental-ash-reduced-attack-surface/15825.rss">more secure shell version in whonix experimental - ash - reduced attack surface</source>
        </item>
        <item>
          <title>Current Whonix flaws and implementation musts for Whonix 2.0</title>
          <dc:creator><![CDATA[quantum445]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>this post details number of glaring security holes in Whonix and it’s current design, while most of Linux desktop is affected by this, the risks can be greatly reduced, massive performance gains and easier to audit</p>
<p>I am willing to develop a “testing sample” of how Whonix 2.0 should be, if approved I wont mind being maintainer. BUT first I have to explain major security issues and their resolution</p>
<p>if you look at modern desktop Linux with plenty of different flavors, you will see one thing in common, they all suck at security, they provide fake security with words “apparmor” “contained” when in reality these apps can access everything most of time.</p>
<p>linux kernel is huge, bloated attack surface but if that bloat is used, you can make very secure system examples!</p>
<ul>
<li>Replacing pipewire and pulseaudio with Linux’s built-in ALSA</li>
<li>Removing D-Bus, Polkit, Gsd, Gvfsd and more useless daemons</li>
<li>switching to Busybox is more secure than normal Linux</li>
<li>switching to Doas is more secure than Sudo</li>
<li>Switching away from super insecure XFCE xOrg to Wayland window manager</li>
<li>Switching Debian with alpine due to more updated packages, more secure package manager, Musl which is more secure than Glibc, Musl is lighter (around 1 million code less) and handles memory a lot more securely</li>
<li>switching from Debian to alpine should pose no technical challenge as alpine has plenty of packages and is used by professional companies and is not amateur project</li>
<li>Enforcing either SELinux or apparmor strictly and for all apps, it’s better if app breaks than app hacks <img src="//forums.whonix.org/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:">
</li>
<li>having a custom app in workstation that only starts on first startup which has nice interface and lets user click for software he wants to install instead of bundling everything in the Whonix image, what if he don’t want bitcoin wallet? or VLC(backdoored btw)? what if he just wants tor browser only? this helps reduce Whonix size and attack surface quite <strong>alot</strong>
</li>
<li>Whonix gateway should automatically set up it’s self without any user interaction, it should not even have a enviorment of any kind, user starts gateway then workstation thats it he dont setup gateway</li>
<li>Whonix could have app run on first startup that change passwords from changeme to something long random and secure without telling the user it, this can be option from the app chooser app to preserve freedom but with big warning</li>
<li>whonix live also based on alpine, with same exact setup except no apps but a preconfigured kvm whonix vms, encrypted host etc</li>
</ul>
<p>i can be maintainer for future whonix 2.0 which i can start work on from now if you agree with my point</p>
<p>it can be provided in download page under some “experimental Whonix 2.0” or “experimental live Whonix 2.0” and dedicated forum section</p>
<p>this is just thought, because current whonix state is sorry but i dont blame, if whonix do this it will be more secure than qube os and tails!</p>
            <p><small>28 posts - 5 participants</small></p>
            <p><a href="http://forums.whonix.org/t/current-whonix-flaws-and-implementation-musts-for-whonix-2-0/15823">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/current-whonix-flaws-and-implementation-musts-for-whonix-2-0/15823</link>
          <pubDate>Sat, 15 Oct 2022 22:11:40 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15823</guid>
          <source url="http://forums.whonix.org/t/current-whonix-flaws-and-implementation-musts-for-whonix-2-0/15823.rss">Current Whonix flaws and implementation musts for Whonix 2.0</source>
        </item>
        <item>
          <title>Keep an eye on Arti (Tor)</title>
          <dc:creator><![CDATA[yodawins]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>Paying some attention to <a href="https://gitlab.torproject.org/tpo/core/arti/-/blob/main/README.md" rel="noopener nofollow ugc">Arti</a>.</p>
<p>“Rust is more secure than C.  Despite our efforts, it’s all too simple to<br>
mess up when using a language that does not enforce memory safety.  We<br>
estimate that at least half of our tracked security vulnerabilities would<br>
have been impossible in Rust, and many of the others would have been very<br>
unlikely.”</p>
<p>and also think of how it could replace the current Tor C implementation, in a “safe” way, eventually.</p>
            <p><small>2 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/keep-an-eye-on-arti-tor/15815">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/keep-an-eye-on-arti-tor/15815</link>
          <pubDate>Fri, 14 Oct 2022 10:57:02 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15815</guid>
          <source url="http://forums.whonix.org/t/keep-an-eye-on-arti-tor/15815.rss">Keep an eye on Arti (Tor)</source>
        </item>
        <item>
          <title>Provision Whonix VPS (GUI) for Onion Services</title>
          <dc:creator><![CDATA[vpsgui]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>I’ve been very excited by the progress of the OnionJuggler project’s integration into Whonix, which makes administrating an Onion site accessible to individuals without sys admin experience through a TUI. <a class="mention" href="http://forums.whonix.org/u/patrick">@Patrick</a> <a class="mention" href="http://forums.whonix.org/u/nyxnor">@nyxnor</a></p>
<p>The question remains - how does this user provision and configure Whonix on a VPS, in order to be able to use OnionJuggler? I have a proposal and would love feedback on the design before getting started. In addition to being useful for individuals lacking sys admin experience, the hope with this project is to also provide greater security by reducing user error through an “infrastructure as code” approach.</p>
<h1>
<a name="qubes-whonix-or-whonix-kvm-1" class="anchor" href="http://forums.whonix.org#qubes-whonix-or-whonix-kvm-1"></a>Qubes-Whonix or Whonix KVM?</h1>
<p>The first question is whether the VPS should use Qubes-Whonix or Whonix KVM. Any recommendations on this are greatly appreciated. Neither option is particularly documented. The following assumes Whonix KVM, based on this comment made in Nov '20:</p>
<blockquote>
<p>Can Qubes-Whonix use it as server OS for hosting Tor onion hidden service?</p>
<p>If you mean through a remote server (VPS or root server): currently usability for this is still very lacking at time of writing.</p>
<ul>
<li>SSH into Qubes dom0 is hard</li>
<li>no CLI version</li>
<li>no documentation on how to use with CLI on a remote server as far as I am aware off</li>
</ul>
</blockquote>
<p>With the work on qubes-remote-support, does this change anything?</p>
<h1>
<a name="the-gui-design-proposal-2" class="anchor" href="http://forums.whonix.org#the-gui-design-proposal-2"></a>The GUI Design Proposal</h1>
<p>The User Experience I am looking for is something like this:</p>
<ul>
<li>Prior: use cryptocurrency to anonymously buy a VPS</li>
<li>use GUI to provision Debian on the VPS</li>
<li>use GUI to distromorph Debian to Kicksecure, then configure Whonix KVM on Kicksecure</li>
<li>use GUI to launch the Onion Juggler TUI window</li>
<li>use GUI to sync local static website with VPS</li>
</ul>
<p>I envision a docs website that would guide the user through this process. Perhaps the best way of sharing the proposed design is a description of each envisioned button:</p>
<p><strong>Button <span class="hashtag">#1:</span> Create VPS</strong></p>
<p>‘Create VPS’ links to a documentation website, which provides a step by step guide to provision a Debian VPS at several cloud providers that accept cryptocurrencies, such as:</p>
<ul>
<li>RamNode costs about $5 a month for a server with 1GB of memory and two virtual CPU (vCPU) cores. Only accepts Bitcoin.</li>
<li>NiceVPS costs about €14.99 a month for a server with 1GB of memory and one vCPU core. Accepts Monero and Zcash.</li>
<li>Cinfu costs about $4.79 a month for a server with 2GB of memory and one vCPU core. Supports Monero and Zcash.</li>
<li>PiVPS costs about $14.97 a month for a server with 1GB of memory and one vCPU core. Supports Monero and Zcash.</li>
<li>SecureDragon costs about $4.99 a month for a server with 1GB of memory and two vCPU cores. Only accepts Bitcoin.</li>
</ul>
<p>Ideally this button would actually do the provisioning with a technology like Terraform, though from what I can tell all of the Terraform Providers, which use the cloud provider API, don’t accept cryptocurrencies. All major cloud providers—AWS, Google Cloud, Microsoft Azure, Alibaba, and so on—require a credit card before approving your account. I haven’t looked into this closely.</p>
<p><strong>Button <span class="hashtag">#2:</span> Configure Whonix</strong></p>
<p>‘Configure Whonix’ takes a Debian VPS and uses configuration management technology to arrive at Kicksecure running Whonix via KVM.</p>
<p>I think that Ansible is the right choice for how this is implemented. It is trusted by the Freedom of Press Foundation (see their GitHub, as a new forum member I can’t hyperlink) for configuration management. In my view, the main benefit of Ansible (versus shell scripts) is that it can be ‘idempotent’ - it describes an end state of the system, so no matter how many times the user presses the GUI button, nothing changes if the VPS is already at the desired end state.</p>
<p>From “UNIX and Linux System Administration Handbook”:</p>
<blockquote>
<p>The traditional approach to sysadmin automation is an intricate complex of home-grown shell scripts supplemented by ad hoc fire fighting when scripts fail. This scheme works about as well as you might expect. Over time, systems managed in this way usually degenerate into a chaotic wreckage of package versions and configurations that can’t be reliably reproduced. It’s sometimes called the snowflake model of system administration because no two systems are ever alike.</p>
</blockquote>
<p>An Ansible Playbook would be maintained which</p>
<ul>
<li>Distromorphs Debian to Kicksecure</li>
<li>Configures Whonix KVM as per the Wiki</li>
<li>Configures an automated update mechanism</li>
<li>Etc.</li>
</ul>
<p>If Qubes-Whonix was the direction, this button would use Salt rather than Ansible.</p>
<p>The goal is that the user never needs to interact with a CLI in order for the VPS to be properly configured and up to date.</p>
<p><strong>Button <span class="hashtag">#3:</span> Onion Juggler</strong></p>
<p>‘Onion Juggler’ establishes an SSH connection and launches the Onion Juggler TUI in Whonix-Workstation.</p>
<p><strong>Button <span class="hashtag">#4:</span> Sync Static Website</strong></p>
<p>‘Sync Static Website’ will prompt the user for the directory location of the static website, establish an SSH connection, and syncs the local directory with the files served by Onion Juggler on the VPS.</p>
<p>The documentation also provides advice on how the user can create a static website. The most user friendly option is the desktop app Publii, though any Static Site Generator is possible of course.</p>
<p><strong>Button <span class="hashtag">#5:</span> Settings</strong></p>
<p>Any settings that need to be modified can be done in Settings: local SSH key location, local static website directory location, etc.</p>
<p>What do people think of a project like this? Is there a better approach? Any feedback is very appreciated!</p>
            <p><small>11 posts - 3 participants</small></p>
            <p><a href="http://forums.whonix.org/t/provision-whonix-vps-gui-for-onion-services/15807">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/provision-whonix-vps-gui-for-onion-services/15807</link>
          <pubDate>Thu, 13 Oct 2022 08:25:17 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15807</guid>
          <source url="http://forums.whonix.org/t/provision-whonix-vps-gui-for-onion-services/15807.rss">Provision Whonix VPS (GUI) for Onion Services</source>
        </item>
        <item>
          <title>Permission Denied with Flatpak (/sys/block)</title>
          <dc:creator><![CDATA[TNT_BOM_BOM]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <pre><code class="lang-auto">user@host:~$ flatpak run org.mozilla.firefox
bwrap: Can't find source path /sys/block: Permission denied
user@host:~$
</code></pre>
<p>Note: All these hardened features are enabled in my VM:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.kicksecure.com/wiki/Test#New_Security_Features_Looking_for_Testers">
  <header class="source">
      <img src="https://www.kicksecure.com/w/images/4/45/Kicksecure-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.kicksecure.com/wiki/Test#New_Security_Features_Looking_for_Testers" target="_blank" rel="noopener nofollow ugc" title="07:41PM - 13 August 2022">Kicksecure – 13 Aug 22</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:437/500;"><img src="https://www.kicksecure.com/w/images/c/ca/Wanted12312412.jpg?version=704cca23975f777025ba4c01fbabc001" class="thumbnail" width="437" height="500"></div>

<h3><a href="https://www.kicksecure.com/wiki/Test#New_Security_Features_Looking_for_Testers" target="_blank" rel="noopener nofollow ugc">Testers Wanted!</a></h3>

  <p>New Security Features Looking for Testers</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

            <p><small>2 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/permission-denied-with-flatpak-sys-block/15781">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/permission-denied-with-flatpak-sys-block/15781</link>
          <pubDate>Sun, 09 Oct 2022 14:06:27 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15781</guid>
          <source url="http://forums.whonix.org/t/permission-denied-with-flatpak-sys-block/15781.rss">Permission Denied with Flatpak (/sys/block)</source>
        </item>
        <item>
          <title>Reduce numbers of grub live-mode boot menu entries</title>
          <dc:creator><![CDATA[TNT_BOM_BOM]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>whonix startup confusing grub live-mode options:</p>
<p>whenever there is a new linux kernel version installed it will add up to the live-mode list instead of choosing the latest version.</p>
<p>the list going to be like this:</p>
<pre><code class="lang-auto">start whonix
advanced...
live-mode kernel x
live-mode kernel y
live-mode kernel z
</code></pre>
<p>facially and practically not great.</p>
<p>Solution:</p>
<aside class="onebox githubblob" data-onebox-src="https://github.com/Kicksecure/grub-live/blob/master/etc/grub.d/11_linux_live#L19">
  <header class="source">

      <a href="https://github.com/Kicksecure/grub-live/blob/master/etc/grub.d/11_linux_live#L19" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/Kicksecure/grub-live/blob/master/etc/grub.d/11_linux_live#L19" target="_blank" rel="noopener nofollow ugc">Kicksecure/grub-live/blob/master/etc/grub.d/11_linux_live#L19</a></h4>



    <pre class="onebox">      <code class="lang-d/11_linux_live">
        <ol class="start lines" start="9" style="counter-reset: li-counter 8 ;">
            <li>unset GRUB_DEVICE_UUID</li>
            <li>
            </li>
<li>## initramfs support</li>
            <li>GRUB_CMDLINE_LINUX="$GRUB_CMDLINE_LINUX boot=live plainroot union=overlay ip=frommedia noeject nopersistence"</li>
            <li>
            </li>
<li>## dracut support</li>
            <li>GRUB_CMDLINE_LINUX="$GRUB_CMDLINE_LINUX rootovl"</li>
            <li>
            </li>
<li>GRUB_DISTRIBUTOR="LIVE mode USER (For daily activities.)"</li>
            <li>GRUB_DISABLE_RECOVERY="true"</li>
            <li class="selected">GRUB_DISABLE_SUBMENU="y"</li>
            <li>
            </li>
<li>## Cannot use '&amp;&gt;' because it is a bashism.</li>
            <li>if dpkg-query --show initramfs-tools 1&gt;/dev/null 2&gt;/dev/null ; then</li>
            <li>   ## https://forums.whonix.org/t/bullseye-live-boot-needs-grub-disable-linux-uuid-true-parameter-in-etc-grub-d-11-linux-live/9066</li>
            <li>   ## https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=994138</li>
            <li>   ## https://askubuntu.com/a/283320</li>
            <li>   GRUB_DISABLE_LINUX_UUID="true"</li>
            <li>   export GRUB_DISABLE_LINUX_UUID</li>
            <li>fi</li>
            <li>
        </li>
</ol>
      </code>
    </pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>disable <code>GRUB_DISABLE_SUBMENU="y"</code></p>
<p>then its going to be:</p>
<pre><code class="lang-auto">start whonix
advanced...
Live mode
advanced...
</code></pre>
<p>way much better.</p>
            <p><small>2 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/reduce-numbers-of-grub-live-mode-boot-menu-entries/15710">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/reduce-numbers-of-grub-live-mode-boot-menu-entries/15710</link>
          <pubDate>Mon, 03 Oct 2022 11:43:12 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15710</guid>
          <source url="http://forums.whonix.org/t/reduce-numbers-of-grub-live-mode-boot-menu-entries/15710.rss">Reduce numbers of grub live-mode boot menu entries</source>
        </item>
        <item>
          <title>install dummy-dependency by default</title>
          <dc:creator><![CDATA[nyxnor]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>Reason why it is not installed by default? Couldn’t it solve a lot of issues?<br>
<a href="https://www.whonix.org/wiki/Electrum#Uninstallation" class="inline-onebox">How-to: Use Electrum Bitcoin Wallet in Whonix ™</a></p>
<p>On the <code>Uninstallation</code> section,<br>
It is saying to install <code>dummy-dependency</code>, but the correct package name is <code>dummy-dependency-electrum</code>.<br>
Also, there is the other package <code>dummy-dependency-hardened-electrum</code>, can’t it be also installed by default? Because depending on the system the user may have troubles.</p>
            <p><small>3 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/install-dummy-dependency-by-default/15650">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/install-dummy-dependency-by-default/15650</link>
          <pubDate>Fri, 30 Sep 2022 12:51:53 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15650</guid>
          <source url="http://forums.whonix.org/t/install-dummy-dependency-by-default/15650.rss">install dummy-dependency by default</source>
        </item>
        <item>
          <title>How to set global environment variables as a Linux distribution? - /etc/environment.d</title>
          <dc:creator><![CDATA[Patrick]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>How to set global environment variables as a Linux distribution?</p>
<p>Possibilities…</p>
<hr>
<p><strong>A)</strong> systemd <a href="https://www.freedesktop.org/software/systemd/man/environment.d.html">/etc/environment.d</a> might not be designed for that:</p>
<ul>
<li><a href="https://www.freedesktop.org/software/systemd/man/environment.d.html#Applicability">Applicability</a></li>
<li><a href="https://github.com/systemd/systemd/issues/12938#issuecomment-508381592" class="inline-onebox">config files in /etc/environment.d/*.conf don't work · Issue #12938 · systemd/systemd · GitHub</a></li>
<li><a href="https://github.com/QubesOS/qubes-issues/issues/6408" class="inline-onebox">Qubes VMs ignore /etc/environment.d drop-in folder · Issue #6408 · QubesOS/qubes-issues · GitHub</a></li>
</ul>
<p>Pretty weird that systemd implemented /etc/environment.d in a way that is different from what would be expected similar to /etc/environment.</p>
<hr>
<p><strong>B)</strong> Perhaps systemd <a href="https://www.freedesktop.org/software/systemd/man/systemd-system.conf.html#DefaultEnvironment=">DefaultEnvironment=</a>?</p>
<ul>
<li>
<code>/etc/systemd/user.conf</code>
<ul>
<li><code>DefaultEnvironment=TESTVAR=xxx</code></li>
<li>works for Qubes terminal emulator but fails for virtual console (dom0: <code>sudo xl console vm-name</code>).</li>
</ul>
</li>
<li>
<code>/etc/systemd/system.conf</code>
<ul>
<li><code>DefaultEnvironment=TESTVAR=xxx</code></li>
<li>works for
<ul>
<li>Qubes Debian terminal emulator and in virtual console</li>
<li>Debian terminal emulator and in virtual console</li>
</ul>
</li>
</ul>
</li>
<li><code>/usr/lib/systemd/system.conf.d/30_kicksecure.conf</code></li>
</ul>
<pre><code class="lang-auto">[Manager]
DefaultEnvironment=TESTVAR=1
</code></pre>
<ul>
<li>Works for Qubes terminal emulator and in virtual console.</li>
</ul>
<hr>
<p><strong>C)</strong>  Perhaps systemd <code>Environment=</code> for getty? (login shell)</p>
<hr>
<p><strong>D)</strong> Perhaps systemd <code>EnvironmentFile=</code> for getty? (login shell)</p>
<hr>
<p><strong>E)</strong>  <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=704054">Debian /etc/environment.d</a> but they didn’t like my feature request. That was probably pre systemd introducing their version of /etc/environment.d. Back then I failed to follow-up with use case examples for some reason as they requested to explain why this feature was requested.</p>
<p>Another attempt to for a feature request /etc/environment.d from Debian (now under a different folder since it’s already taken). Even if they reject it, they might suggest - ideally - an already existing better mechanism.</p>
<hr>
<p><strong>F)</strong> A feature request against PAM upstream, because quote:</p>
<blockquote>
<p>The /etc/environment file is owned by pam.</p>
</blockquote>
<aside class="onebox githubissue" data-onebox-src="https://github.com/linux-pam/linux-pam/issues/122">
  <header class="source">

      <a href="https://github.com/linux-pam/linux-pam/issues/122" target="_blank" rel="noopener">github.com/linux-pam/linux-pam</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/linux-pam/linux-pam/issues/122" target="_blank" rel="noopener">pam_env: environment variable configuration directory for packaging</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2019-07-04" data-time="13:13:20" data-timezone="UTC">01:13PM - 04 Jul 19 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/guoyunhe" target="_blank" rel="noopener">
          <img alt="guoyunhe" src="https://avatars.githubusercontent.com/u/5836790?v=4" class="onebox-avatar-inline" width="20" height="20">
          guoyunhe
        </a>
      </div>
    </div>

    <div class="labels">
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          enhancement
        </span>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">I am working on Fcitx on KDE Wayland. Need to add the following environment vari<span class="show-more-container"><a href="http://forums.whonix.org" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">ables:

```
INPUT_METHOD=fcitx
GTK_IM_MODULE=fcitx
QT_IM_MODULE=fcitx
```

It works when I write those into `/etc/environment`. But I need to package the configuration into package `fcitx` so it requires a separate file. I tried `/etc/environment.d/fcitx.conf` but it doesn't work.

Can pam support this? Thanks!</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<hr>
<p>Related discussions:</p>
<aside class="onebox githubissue" data-onebox-src="https://github.com/ayekat/localdir/issues/32">
  <header class="source">

      <a href="https://github.com/ayekat/localdir/issues/32" target="_blank" rel="noopener">github.com/ayekat/localdir</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/ayekat/localdir/issues/32" target="_blank" rel="noopener">Switch to environment.d for setting envvars</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-11-05" data-time="13:53:05" data-timezone="UTC">01:53PM - 05 Nov 20 UTC</span>
      </div>

        <div class="date">
          closed <span class="discourse-local-date" data-format="ll" data-date="2021-04-16" data-time="20:31:50" data-timezone="UTC">08:31PM - 16 Apr 21 UTC</span>
        </div>

      <div class="user">
        <a href="https://github.com/ayekat" target="_blank" rel="noopener">
          <img alt="ayekat" src="https://avatars.githubusercontent.com/u/299058?v=4" class="onebox-avatar-inline" width="20" height="20">
          ayekat
        </a>
      </div>
    </div>

    <div class="labels">
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          Enhancement/Feature
        </span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          Fixed
        </span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          pam
        </span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          XDG
        </span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          systemd
        </span>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">With PAM developers having switched to setting `user_readenv` to 0 by default re<span class="show-more-container"><a href="http://forums.whonix.org" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">cently, and now with them voicing their intent to [remove `~/.pam_environment` entirely](https://github.com/linux-pam/linux-pam/issues/7#issuecomment-721595903), it's a good moment to seriously start thinking about moving variable declaration to environment.d.

The downsides are:

* environment.d reads from `$XDG_CONFIG_HOME/environment.d`, so there is a bit of a bootstrapping issue here: with pam_env disappearing, one can no longer define `$XDG_CONFIG_HOME` before environment.d runs (so it will either default to the specification-defined default (`~/.config`), or whatever the local sysadmin decides to set system-wide). We'll need a not-too-painful way of adapting to the individual cases; probably by symlinking `~/system-specific-xdg_config_home/environment.d` to `~/.local/etc/environment.d` as part of the initial dotfiles setup.
* environment.d only applies to the systemd user daemon, but not the user *session*. So we will need a way to import variables into the login session as well. Either by `eval`ing the output of `systemctl show-environment`, or by reading the environment.d files directly (given that the `show-environment` output isn't POSIX conform, so we can't put that in `etc/sh/profile.d`).

It's less than ideal, but as far as I can see, it's the only thing that is currently left for setting environment variables.</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox githubcommit" data-onebox-src="https://github.com/ayekat/localdir/commit/81bc3dd62ba1555ecbcda988b3011696993634a3">
  <header class="source">

      <a href="https://github.com/ayekat/localdir/commit/81bc3dd62ba1555ecbcda988b3011696993634a3" target="_blank" rel="noopener">github.com/ayekat/localdir</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/ayekat/localdir/commit/81bc3dd62ba1555ecbcda988b3011696993634a3" target="_blank" rel="noopener">Move variable declaration from pam_environment to environment.d</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2021-04-16" data-time="18:36:12" data-timezone="UTC">06:36PM - 16 Apr 21 UTC</span>
      </div>

      <div class="user">
        <a href="https://github.com/ayekat" target="_blank" rel="noopener">
          <img alt="ayekat" src="https://avatars.githubusercontent.com/u/299058?v=4" class="onebox-avatar-inline" width="20" height="20">
          ayekat
        </a>
      </div>

      <div class="lines" title="changed 4 files with 103 additions and 42 deletions">
        <a href="https://github.com/ayekat/localdir/commit/81bc3dd62ba1555ecbcda988b3011696993634a3" target="_blank" rel="noopener">
          <span class="added">+103</span>
          <span class="removed">-42</span>
        </a>
      </div>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">Because environment.d only applies to the systemd user instance (but not
the use<span class="show-more-container"><a href="https://github.com/ayekat/localdir/commit/81bc3dd62ba1555ecbcda988b3011696993634a3" target="_blank" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">r session), we additionally need to process those files in the
login shell now. In the long term, we may want to move more variables to
environment.d (not just the ones for XDG).

We still keep pam_environment around for declaring XDG_CONFIG_HOME (to
solve the chicken-or-egg issue for systemd-environment-d-generator) and
ZDOTDIR (to solve the chicken-or-egg issue for zsh).

In cases where pam_env.so no longer loads ~/.pam_environment (either
because of local configuration, or because of pam_env.so dropping
support for that entirely), the work-around is to symlink ~/.config to
~/.local/lib/dotfiles/config (which then contains a single symlink for
environment.d) and symlink ~/.zlogin to ~/.local/etc/zsh/.zlogin.

An alternative would be to kindly ask the system administrator to set
XDG_CONFIG_HOME and ZDOTDIR to desired values for my user (though I
still have to find the most elegant way to achieve that).</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.reddit.com/r/zsh/comments/3ubrdr/proper_way_to_set_zdotdir/">
  <header class="source">
      <img src="https://www.redditstatic.com/desktop2x/img/favicon/android-icon-192x192.png" class="site-icon" width="192" height="192">

      <a href="https://www.reddit.com/r/zsh/comments/3ubrdr/proper_way_to_set_zdotdir/" target="_blank" rel="noopener">reddit</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://www.reddit.com/r/zsh/comments/3ubrdr/proper_way_to_set_zdotdir/" target="_blank" rel="noopener">r/zsh - Proper way to set $ZDOTDIR?</a></h3>

  <p>12 votes and 2 comments so far on Reddit</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

            <p><small>4 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/how-to-set-global-environment-variables-as-a-linux-distribution-etc-environment-d/15635">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/how-to-set-global-environment-variables-as-a-linux-distribution-etc-environment-d/15635</link>
          <pubDate>Tue, 27 Sep 2022 20:05:06 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15635</guid>
          <source url="http://forums.whonix.org/t/how-to-set-global-environment-variables-as-a-linux-distribution-etc-environment-d/15635.rss">How to set global environment variables as a Linux distribution? - /etc/environment.d</source>
        </item>
        <item>
          <title>/rw/config versus /usr/local/etc</title>
          <dc:creator><![CDATA[nyxnor]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>I know it is kind of another issue, but as I am doing the changes</p>
<pre><code class="lang-auto">      for i in \
         /etc/${tb_settings_folder}/*.conf \
         /rw/config/${tb_settings_folder}/*.conf \
         /usr/local/etc/${tb_settings_folder}/*.conf \
         ; do
            bash -n "$i"
            source "$i"
      done
</code></pre>
<p>what is the reasoning of parsing the <code>/rw</code> before the <code>/usr/local/etc</code> ?</p>
<p>If there is none, can I change that to:<br>
<code>/etc</code> → <code>/usr/local/etc</code> → <code>/rw/config</code><br>
?</p>
<p>I don’t see a reason for /rw/config being included in the middle and for me it is much more clear if it is the last option to be parsed as it is not between the standard directories.</p>
            <p><small>4 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/rw-config-versus-usr-local-etc/15621">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/rw-config-versus-usr-local-etc/15621</link>
          <pubDate>Sun, 25 Sep 2022 22:29:19 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15621</guid>
          <source url="http://forums.whonix.org/t/rw-config-versus-usr-local-etc/15621.rss">/rw/config versus /usr/local/etc</source>
        </item>
        <item>
          <title>CPU sidechannel destroys TBB inter-tab isolation</title>
          <dc:creator><![CDATA[HulaHoop]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>A CPU sidechannel attack breaks TBB tab isolation . The researchers’ solution was a browser add-on or the advice not to use the same browsing session for different identities.</p>
<p>If this is a fundamental design flaw that still applies (I think it does) we need to document it on TBB’s page so people take this into account for opsec. I don’t know if or how TPO responded to this attack discovered since Jan this year.</p>
<p><a href="https://www.schneier.com/blog/archives/2022/07/new-browser-de-anonymization-technique.html" class="onebox" target="_blank" rel="noopener">https://www.schneier.com/blog/archives/2022/07/new-browser-de-anonymization-technique.html</a></p>
<p><a href="https://leakuidatorplusteam.github.io/" class="onebox" target="_blank" rel="noopener">https://leakuidatorplusteam.github.io/</a></p>
            <p><small>3 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/cpu-sidechannel-destroys-tbb-inter-tab-isolation/15616">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/cpu-sidechannel-destroys-tbb-inter-tab-isolation/15616</link>
          <pubDate>Sun, 25 Sep 2022 07:43:06 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15616</guid>
          <source url="http://forums.whonix.org/t/cpu-sidechannel-destroys-tbb-inter-tab-isolation/15616.rss">CPU sidechannel destroys TBB inter-tab isolation</source>
        </item>
        <item>
          <title>change whonix source indentation</title>
          <dc:creator><![CDATA[nyxnor]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>Something is bugging me for quite a while, it may sound silly but it breaks my flow because I have to correct whonix indentation, and change my editor indentation to 3 only for whonix file just doesn’t work if you are not always working with whonix only files.</p>
<p>Currently whonix is using <code>3 spaces</code> for indentation, it is not standard to use an odd number. I also don’t know of anyone who manually indents to 3 spaces, they either indent to <code>2</code> or <code>4</code> or <code>8</code>, so my guess is that past and present developers use(d) their editor configuration to set 3 spaces for indentation.</p>
<p>Can this be corrected by the great search and replace to all whonix files?</p>
<p>Pattern tor search for is <code>^   .*</code> for the first degree of indentation and adding 3 spaces for other levels of indentation.</p>
<p><code>grep --color=auto "^   .*" /usr/bin/whonix-gateway-firewall</code>, of literally any whonix file and you will see it is using 3 spaces for indentation.</p>
<p>I made this for 5 levels of indentation:</p>
<pre><code class="lang-auto">sed \
        -e "s/^               /          /g" \
        -e "s/^            /        /g" \
        -e "s/^         /      /g" \ 
        -e "s/^      /    /g" \
        -e "s/^   /  /g" \
        FILE
</code></pre>
<p>15 spaces becomes 10, 12 become 8, 9 become 6, 6 becomes 4, 3 becomes 2.</p>
<p>I prefer 2 spaces because then it has less chances or hitting the 79 char mark,  but 4 spaces would also be fine, but not 3.</p>
            <p><small>7 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/change-whonix-source-indentation/15613">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/change-whonix-source-indentation/15613</link>
          <pubDate>Sat, 24 Sep 2022 17:33:07 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15613</guid>
          <source url="http://forums.whonix.org/t/change-whonix-source-indentation/15613.rss">change whonix source indentation</source>
        </item>
        <item>
          <title>bash scripts - set -o nounset / -n versus -v</title>
          <dc:creator><![CDATA[Patrick]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>The style…</p>
<pre><code>[ -n "$VARNAME" ] || VARNAME="xxx"
</code></pre>
<p>in Whonix source code served well but is not the most ideal. The following would be a bit better.</p>
<pre><code>[[ -v VARNAME ]] || VARNAME="xxx"
</code></pre>
<p>That is because then scripts could be improved and use:</p>
<pre><code>set -o nounset</code></pre>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="http://forums.whonix.org/t/bash-scripts-set-o-nounset-n-versus-v/15608">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/bash-scripts-set-o-nounset-n-versus-v/15608</link>
          <pubDate>Sat, 24 Sep 2022 11:19:22 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15608</guid>
          <source url="http://forums.whonix.org/t/bash-scripts-set-o-nounset-n-versus-v/15608.rss">bash scripts - set -o nounset / -n versus -v</source>
        </item>
        <item>
          <title>how to unset firewall array</title>
          <dc:creator><![CDATA[nyxnor]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>I want to be able to close all firewall ports that are used by default for whonix and open just a select few, and this of course has to be done solely on <code>/usr/local/etc/torrc.d/50_user.conf</code>.</p>
<p>This is targeted to single use Workstations that should only have access to the internet if a socksport is specified to the application.</p>
<p>I tried on the gateway:<br>
<code>unset INTERNAL_OPEN_PORTS</code><br>
<code>INTERNAL_OPEN_PORTS=""</code><br>
and browsed for how to unset array. It works on the cli if I test with arrays, but not with whonix firewall, maybe it is the way the firewall is parsed?</p>
<hr>
<p>It is a problem with how the firewall is parsed.</p>
<p><code>source_config_folder</code> function is called before the defaults is assigned.</p>
<p>The correct function order is:</p>
<pre><code class="lang-auto">main() {
   init
   firewall_mode_detection
   variables_defaults ## defaults first
   source_config_folder ## user conf later
  ......
}

main
</code></pre>
<p>If this is not done, user can not reset the firewall with <code>INTERNAL_OPEN_PORTS=""</code><br>
then the next firewall ports that he user wants open are specified below that line:</p>
<pre><code class="lang-auto">INTERNAL_OPEN_PORTS=""
INTERNAL_OPEN_PORTS+=" 91XY "
INTERNAL_OPEN_PORTS+=" 91XZ
</code></pre>
<p>can this be done?</p>
            <p><small>13 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/how-to-unset-firewall-array/15604">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/how-to-unset-firewall-array/15604</link>
          <pubDate>Sat, 24 Sep 2022 10:10:52 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15604</guid>
          <source url="http://forums.whonix.org/t/how-to-unset-firewall-array/15604.rss">how to unset firewall array</source>
        </item>
        <item>
          <title>new isolation flag</title>
          <dc:creator><![CDATA[nyxnor]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>Isolation flag. see man.</p>
<p>See <code>OnionTrafficOnly</code>. It does exactly what you are reading, per socks port.</p>
<p>Can ports be added with this flag by default?</p>
<p><code>IsolateDestAddr IsolateDestPort OnionTrafficOnly</code></p>
<p><code>IsolateDestAddr OnionTrafficOnly</code></p>
<p><code>IsolateDestPort OnionTrafficOnly</code></p>
<p><code>OnionTrafficOnly</code> → I don’t see much reason for this one alone, but you decide</p>
            <p><small>21 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/new-isolation-flag/15598">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/new-isolation-flag/15598</link>
          <pubDate>Fri, 23 Sep 2022 23:17:11 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15598</guid>
          <source url="http://forums.whonix.org/t/new-isolation-flag/15598.rss">new isolation flag</source>
        </item>
        <item>
          <title>print ports opened in the firewall.</title>
          <dc:creator><![CDATA[nyxnor]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <p>For me todo later if accepted.</p>
<p>on the respective <code>/usr/bin/whonix-TYPE-firewall</code></p>
<pre><code class="lang-auto">print_ports(){
  printf '%s\n' "INTERNAL_OPEN_PORTS=\"${INTERNAL_OPEN_PORTS[@]}\""
  printf '%s\n' "EXTERNAL_OPEN_PORTS=\"${EXTERNAL_OPEN_PORTS[@]}\""
}


end() {
   output_cmd "OK: Whonix firewall loaded."
   print_ports
   exit 0
}
</code></pre>
<p>Good? Can be default? I think it is very useful.</p>
            <p><small>11 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/print-ports-opened-in-the-firewall/15469">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/print-ports-opened-in-the-firewall/15469</link>
          <pubDate>Fri, 23 Sep 2022 22:11:20 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15469</guid>
          <source url="http://forums.whonix.org/t/print-ports-opened-in-the-firewall/15469.rss">print ports opened in the firewall.</source>
        </item>
        <item>
          <title>capitalize environment variables</title>
          <dc:creator><![CDATA[nyxnor]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <h2>
<a name="problem-1" class="anchor" href="http://forums.whonix.org#problem-1"></a>Problem</h2>
<p>Continuing the discussion from <a href="https://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298/2">inform user that torbrowser won't start</a>:</p>
<p>I was trying to avoid starting torbrowser from reading the script, and took some time to find <code>tb_no_start</code>.</p>
<ul>
<li>it is an environment variable
<ul>
<li>should be capitalized</li>
<li>should be on the ENVIRONMENT section of torbrowser man page</li>
</ul>
</li>
</ul>
<h2>
<a name="proof-2" class="anchor" href="http://forums.whonix.org#proof-2"></a>Proof:</h2>
<p>Run: <code>env</code>.<br>
It will display the environment variables, which are capitalized can be reused by other scripts.</p>
<p>Shellscript portability:<br>
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html#tag_08" class="onebox" target="_blank" rel="noopener nofollow ugc">https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html#tag_08</a></p>
<blockquote>
<p>Environment variable names used by the utilities in the Shell and Utilities volume of POSIX.1-2017 consist solely of uppercase letters, digits, and the  ( ‘_’ ) from the characters defined in <a href="https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap06.html#tagtcjh_3" rel="noopener nofollow ugc"><em>Portable Character Set</em></a> and do not begin with a digit. Other characters may be permitted by an implementation; applications shall tolerate the presence of such names. Uppercase and lowercase letters shall retain their unique identities and shall not be folded together. The name space of environment variable names containing lowercase letters is reserved for applications. Applications can define any environment variables with names from this name space without modifying the behavior of the standard utilities.</p>
</blockquote>
<p>Other programming languages may use uppercase variables even when they are not environment variables, such as python and rust that use uppercase for constants.</p>
<h2>
<a name="what-is-missing-from-whonix-3" class="anchor" href="http://forums.whonix.org#what-is-missing-from-whonix-3"></a>What is missing from whonix</h2>
<ul>
<li>capitalize all environment variables</li>
<li>add to man page the use case of each environment variable</li>
</ul>
            <p><small>9 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/capitalize-environment-variables/15308">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/capitalize-environment-variables/15308</link>
          <pubDate>Wed, 14 Sep 2022 16:48:30 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15308</guid>
          <source url="http://forums.whonix.org/t/capitalize-environment-variables/15308.rss">capitalize environment variables</source>
        </item>
        <item>
          <title>inform user that torbrowser won&#39;t start</title>
          <dc:creator><![CDATA[nyxnor]]></dc:creator>
          <category>Development</category>
          <description><![CDATA[
            <aside class="onebox githubblob" data-onebox-src="https://github.com/Kicksecure/tb-starter/blob/master/usr/bin/torbrowser#L747">
  <header class="source">

      <a href="https://github.com/Kicksecure/tb-starter/blob/master/usr/bin/torbrowser#L747" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/Kicksecure/tb-starter/blob/master/usr/bin/torbrowser#L747" target="_blank" rel="noopener nofollow ugc">Kicksecure/tb-starter/blob/master/usr/bin/torbrowser#L747</a></h4>



    <pre class="onebox">      <code class="lang-">
        <ol class="start lines" start="737" style="counter-reset: li-counter 736 ;">
            <li>
            </li>
<li>   tb_firejailopts[${#tb_firejailopts[@]}]="--profile=torbrowser-launcher"</li>
            <li>
            </li>
<li>   ## https://forums.whonix.org/t/automatically-firejailing-tor-browser/4767/21</li>
            <li>   #tb_firejailopts[${#tb_firejailopts[@]}]="--x11=xorg"</li>
            <li>
            </li>
<li>   tb_firejailopts[${#tb_firejailopts[@]}]="--quiet"</li>
            <li>}</li>
            <li>
            </li>
<li>tb_start_tor_browser() {</li>
            <li class="selected">   if [ "$tb_no_start" = "true" ]; then</li>
            <li>      true "INFO: not starting $tb_title because tb_no_start is set to true."</li>
            <li>      return 0</li>
            <li>   fi</li>
            <li>
            </li>
<li>   local temp</li>
            <li>   local tb_exit_code="0"</li>
            <li>   if [ "$tb_hardening" = "true" ]; then</li>
            <li>      temp="$tb_firejail_bin ${tb_firejailopts[@]} $tb_starter_bin_pre $tb_starter_bin --verbose --allow-remote $tb_starter_bin_post $@"</li>
            <li>      $tb_firejail_bin ${tb_firejailopts[@]} $tb_starter_bin_pre $tb_starter_bin --verbose --allow-remote $tb_starter_bin_post "$@" || { tb_exit_code="$?" ; true; };</li>
            <li>   else</li>
        </ol>
      </code>
    </pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p><code>export tb_no_start="true"</code></p>
<p>prevents torbrowser from starting, but no info message is shown on the gui or on the cli, would need to enabled <code>set -x</code> at the top.</p>
<p>What I want to do is print on both as the default behavior.</p>
<p>I want some of my qubes to not start the browser, but in the future I can forget why the browser is not starting as no info message is printed.</p>
<p>Another thing, <code>tb_no_start</code> should be capitalized as it is an environment variable.</p>
            <p><small>11 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298</link>
          <pubDate>Wed, 14 Sep 2022 10:43:53 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15298</guid>
          <source url="http://forums.whonix.org/t/inform-user-that-torbrowser-wont-start/15298.rss">inform user that torbrowser won&#39;t start</source>
        </item>
  </channel>
</rss>
