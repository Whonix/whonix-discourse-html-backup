<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:discourse="http://www.discourse.org/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>KVM - Whonix Forum</title>
    <link>http://forums.whonix.org/c/kvm/11</link>
    <description>Topics in the &#39;KVM&#39; category Everything specific to &lt;a href=&quot;https://www.whonix.org/wiki/KVM&quot;&gt;Whonix KVM&lt;/a&gt;. (&lt;a href=&quot;https://phabricator.whonix.org/tag/kvm/&quot;&gt;devs&lt;/a&gt;)</description>
    <language>en</language>
      <lastBuildDate>Fri, 11 Nov 2022 11:27:53 +0000</lastBuildDate>
      <atom:link href="http://forums.whonix.org/c/kvm/11.rss" rel="self" type="application/rss+xml" />
        <item>
          <title>Higher RAM usage of VMs in host live mode</title>
          <dc:creator><![CDATA[beemir]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>Hello,<br>
My Problem is, that I am running out of RAM in host live mode so that I can’t even run Gateway and Workstation at the same time and I am getting the error with “No space left on device”.<br>
I have used Whonix in the same setup on the same Computer before about one year ago. Back then I could run Gateway + 3x Workstation at once. It was Debian 11 and Whonix 16 as well.</p>
<p>I would like to understand why this is the case. Does anyone have a clue? I reinstalled all from scrap, so I also might have done a mistake there.</p>
<p>System memory:16GB<br>
Gateway memory: 512MB<br>
Workstation memory: 1,5GB</p>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="http://forums.whonix.org/t/higher-ram-usage-of-vms-in-host-live-mode/15944">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/higher-ram-usage-of-vms-in-host-live-mode/15944</link>
          <pubDate>Fri, 11 Nov 2022 11:27:53 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15944</guid>
          <source url="http://forums.whonix.org/t/higher-ram-usage-of-vms-in-host-live-mode/15944.rss">Higher RAM usage of VMs in host live mode</source>
        </item>
        <item>
          <title>Trouble extracting Whonix KVM </title>
          <dc:creator><![CDATA[Frank90s]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>Hey all, So i was trying to follow a tutorial on how to setup whonix KVM on a youtube video by Mental Outlaw on youtube and i’m stuck on the extraction part where I use the “tar” command to extract the archive but when I do it does not give me the Workstation iso but does give me the gateway iso. I’m confused as how to fix this and have been dealing with this for the past day trying to read the forums before i ask for help.</p>
<p>I attached a photo to this post so you can see where i’m at and point me in the right direction. <a href="https://imgur.com/a/pLoRTrU" class="inline-onebox" rel="noopener nofollow ugc">Imgur: The magic of the Internet</a></p>
            <p><small>4 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/trouble-extracting-whonix-kvm/15932">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/trouble-extracting-whonix-kvm/15932</link>
          <pubDate>Mon, 07 Nov 2022 18:48:26 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15932</guid>
          <source url="http://forums.whonix.org/t/trouble-extracting-whonix-kvm/15932.rss">Trouble extracting Whonix KVM </source>
        </item>
        <item>
          <title>How to disable DHCP in Whonix and ensure no leaks</title>
          <dc:creator><![CDATA[NotFound]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>Hello, I need to disable DHCP in Whonix, I have static IP on my host but running htop on my host shows dnsmasq is being ran with a “DHCP ip lease script”, which has the path to a binary with name “libvirtd_lease_script”. dnsmasq config file has DHCP disabled so the one running the binary is actually libvirtd, I managed to stop it by simply renaming the binary to “test” and killing dnsmasq</p>
<p>Now the problem is I am not sure if DHCP is disabled in Gateway, and most importantly that there were no leaks by me fiddling around with dnsmasq, so my question is actually 2 separate questions:</p>
<ol>
<li>
<p>How to absolutely make sure that there are no leaks from Whonix ? is there a list of standard tests used by you to ensure that there are no leaks?</p>
</li>
<li>
<p>How to disable DHCP and set static IP for Whonix</p>
</li>
</ol>
            <p><small>20 posts - 3 participants</small></p>
            <p><a href="http://forums.whonix.org/t/how-to-disable-dhcp-in-whonix-and-ensure-no-leaks/15912">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/how-to-disable-dhcp-in-whonix-and-ensure-no-leaks/15912</link>
          <pubDate>Thu, 03 Nov 2022 16:50:48 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15912</guid>
          <source url="http://forums.whonix.org/t/how-to-disable-dhcp-in-whonix-and-ensure-no-leaks/15912.rss">How to disable DHCP in Whonix and ensure no leaks</source>
        </item>
        <item>
          <title>recommend virt-viewer instead of virt-manager</title>
          <dc:creator><![CDATA[quantum445]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>virt-manager is big attack surface and gives the users opportunity to mess with settings (either accidentally or on purpose) that could de anonymize whonix.</p>
<p>virt-viewer and remote-viewer would connect to spice already running   on whonix and user can only turn on/off simple settings like “clipboard sharing”</p>
<p>remote-viewer source code is also a lot smaller than that of virt-manager</p>
<p>this change wouldn’t affect advanced users negatively as advanced users can just use virsh to edit settings</p>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="http://forums.whonix.org/t/recommend-virt-viewer-instead-of-virt-manager/15854">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/recommend-virt-viewer-instead-of-virt-manager/15854</link>
          <pubDate>Thu, 20 Oct 2022 17:46:07 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15854</guid>
          <source url="http://forums.whonix.org/t/recommend-virt-viewer-instead-of-virt-manager/15854.rss">recommend virt-viewer instead of virt-manager</source>
        </item>
        <item>
          <title>Why Whonix KVM need dnsmasq?</title>
          <dc:creator><![CDATA[kk221001]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>Hello.<br>
I am using Whonix KVM.<br>
The host OS is Debian 11.<br>
I would like to set up DNS over TLS on my host OS, but dnsmasq occupying port 53 and is interfering with the set up.<br>
Is there any problem to disable the DNS server by setting <code>port=0</code> in dnsmasq?<br>
I am planning to set up DNS over TLS with systemd-resolved.</p>
<p>For now, I have set up DNS over TLS by forwarding to unbound with the following settings.<br>
<strong>/etc/resolv.conf</strong></p>
<pre><code class="lang-auto">nameserver 127.0.0.1
</code></pre>
<p><strong>/etc/dnsmasq.conf</strong></p>
<pre><code class="lang-auto">no-resolv
server=127.0.0.1#5353
</code></pre>
<p><strong>/etc/unbound/unbound.conf</strong></p>
<pre><code class="lang-auto">server:
    interface: 127.0.0.1
    port: 5353
</code></pre>
            <p><small>4 posts - 3 participants</small></p>
            <p><a href="http://forums.whonix.org/t/why-whonix-kvm-need-dnsmasq/15655">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/why-whonix-kvm-need-dnsmasq/15655</link>
          <pubDate>Sat, 01 Oct 2022 05:10:08 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15655</guid>
          <source url="http://forums.whonix.org/t/why-whonix-kvm-need-dnsmasq/15655.rss">Why Whonix KVM need dnsmasq?</source>
        </item>
        <item>
          <title>virt-manager alternative</title>
          <dc:creator><![CDATA[tsarq]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>im looking for more lightweight alternative that doesnt depend on dbus daemon or polkit</p>
<p>if you know how to run virt-manager without dbus and polkit also let me know</p>
<p>also ik how to get a shell using cmd but not see screen</p>
            <p><small>3 posts - 3 participants</small></p>
            <p><a href="http://forums.whonix.org/t/virt-manager-alternative/15623">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/virt-manager-alternative/15623</link>
          <pubDate>Mon, 26 Sep 2022 19:03:01 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15623</guid>
          <source url="http://forums.whonix.org/t/virt-manager-alternative/15623.rss">virt-manager alternative</source>
        </item>
        <item>
          <title>Gateway KVM to specific NIC</title>
          <dc:creator><![CDATA[Marv]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>Hi,<br>
I have the whonix gateway running on debian with KVM.</p>
<p>The host has two network interfaces and I want that the Whonix Gateway to communicate only via one specific NIC.</p>
<p>Atm it is in NAT mode and communicates via the wrong NIC.</p>
<p>How can I set the whonix external network to a specific NIC ?<br>
Would this cause safety problems ?</p>
            <p><small>3 posts - 3 participants</small></p>
            <p><a href="http://forums.whonix.org/t/gateway-kvm-to-specific-nic/15600">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/gateway-kvm-to-specific-nic/15600</link>
          <pubDate>Sat, 24 Sep 2022 04:55:13 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15600</guid>
          <source url="http://forums.whonix.org/t/gateway-kvm-to-specific-nic/15600.rss">Gateway KVM to specific NIC</source>
        </item>
        <item>
          <title>Correct way of using Whonix KVM</title>
          <dc:creator><![CDATA[smashing_snek]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>I followed http:// www.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd. onion/wiki/KVM, and I feel I got it right installing. I intent to use multiple-workstations and gateways, and changed the Whonix-Internal and changed the harcoded IP, but all gateways use the same Whonix-External and I’m kinda worried. Is that normal? Won’t that bypass isolation? Is the DHCP-step required for regular usage?</p>
<p>Thank You.</p>
            <p><small>3 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/correct-way-of-using-whonix-kvm/15314">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/correct-way-of-using-whonix-kvm/15314</link>
          <pubDate>Wed, 14 Sep 2022 20:50:05 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-15314</guid>
          <source url="http://forums.whonix.org/t/correct-way-of-using-whonix-kvm/15314.rss">Correct way of using Whonix KVM</source>
        </item>
        <item>
          <title>Whonix-Workstation-XFCE-16.0.5.3.Intel_AMD64.qcow2 and Whonix-Gateway-XFCE-16.0.5.3.Intel_AMD64.qcow2 are each 100 gigabytes</title>
          <dc:creator><![CDATA[aaaa]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>why exactly are the images so big ? and are there any ways I can reduce their file sizes ?</p>
            <p><small>4 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/whonix-workstation-xfce-16-0-5-3-intel-amd64-qcow2-and-whonix-gateway-xfce-16-0-5-3-intel-amd64-qcow2-are-each-100-gigabytes/14732">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/whonix-workstation-xfce-16-0-5-3-intel-amd64-qcow2-and-whonix-gateway-xfce-16-0-5-3-intel-amd64-qcow2-are-each-100-gigabytes/14732</link>
          <pubDate>Sat, 03 Sep 2022 00:12:51 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>Yes</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14732</guid>
          <source url="http://forums.whonix.org/t/whonix-workstation-xfce-16-0-5-3-intel-amd64-qcow2-and-whonix-gateway-xfce-16-0-5-3-intel-amd64-qcow2-are-each-100-gigabytes/14732.rss">Whonix-Workstation-XFCE-16.0.5.3.Intel_AMD64.qcow2 and Whonix-Gateway-XFCE-16.0.5.3.Intel_AMD64.qcow2 are each 100 gigabytes</source>
        </item>
        <item>
          <title>Whonix KVM Install - Unraid</title>
          <dc:creator><![CDATA[atomz]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>Hi everyone. I am pretty good with Unraid OS however I have found out just now that I am a rookie on importing KVM images for VMs in unraid. Going through the building of Whonix vms in Unraid and am stuck. Does anyone have a good guide on how to spin up whonix using Unraid? Especially the xmls and networks?</p>
<p>I am also trying to to make sure both the gateway+ws also are on my lab interface in unraid and not my main interface. Essentially I am not sure what to also do with the internal and external xmls and to also make sure they are running through a specific interface other than my main interface. Thanks!</p>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="http://forums.whonix.org/t/whonix-kvm-install-unraid/14709">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/whonix-kvm-install-unraid/14709</link>
          <pubDate>Thu, 01 Sep 2022 20:21:52 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14709</guid>
          <source url="http://forums.whonix.org/t/whonix-kvm-install-unraid/14709.rss">Whonix KVM Install - Unraid</source>
        </item>
        <item>
          <title>Data Backup for Whonix KVM</title>
          <dc:creator><![CDATA[thomasvatter]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>Is there a recommended method to backup the data?</p>
            <p><small>6 posts - 3 participants</small></p>
            <p><a href="http://forums.whonix.org/t/data-backup-for-whonix-kvm/14699">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/data-backup-for-whonix-kvm/14699</link>
          <pubDate>Wed, 31 Aug 2022 11:24:15 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14699</guid>
          <source url="http://forums.whonix.org/t/data-backup-for-whonix-kvm/14699.rss">Data Backup for Whonix KVM</source>
        </item>
        <item>
          <title>No Whonix-Workstation</title>
          <dc:creator><![CDATA[helotbc]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>I downloaded Whonix-XFCE-16.0.5.3.Intel_AMD64.qcow2.libvirt.xz and there was only a Whonix-Gateway.qcow2 and no Workstation. Please review the zipped package.<br>
Thanks, helotbc</p>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="http://forums.whonix.org/t/no-whonix-workstation/14672">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/no-whonix-workstation/14672</link>
          <pubDate>Mon, 29 Aug 2022 03:03:23 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14672</guid>
          <source url="http://forums.whonix.org/t/no-whonix-workstation/14672.rss">No Whonix-Workstation</source>
        </item>
        <item>
          <title>unzip over 100G</title>
          <dc:creator><![CDATA[cloudymoon3626]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>Hey when I unzip these Whonix KVM files, the file size just keeps growing indefinitely.  It surpassed 100GB and just keeps going.</p>
<p>How do I unzip these as a normal size?</p>
            <p><small>5 posts - 3 participants</small></p>
            <p><a href="http://forums.whonix.org/t/unzip-over-100g/14653">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/unzip-over-100g/14653</link>
          <pubDate>Sun, 28 Aug 2022 03:28:06 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14653</guid>
          <source url="http://forums.whonix.org/t/unzip-over-100g/14653.rss">unzip over 100G</source>
        </item>
        <item>
          <title>Mounting removable media</title>
          <dc:creator><![CDATA[enduser]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>After spending time researching I cannot find a good way to mount removable media. I do not wish to share a folder nor do a hacky workaround every time. Simply plug and play with one specific device after setting it up. Searching the archive did not yield any results that helped me.</p>
<p>Is there any way to do this. thanks.</p>
            <p><small>3 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/mounting-removable-media/14537">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/mounting-removable-media/14537</link>
          <pubDate>Wed, 17 Aug 2022 10:25:17 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14537</guid>
          <source url="http://forums.whonix.org/t/mounting-removable-media/14537.rss">Mounting removable media</source>
        </item>
        <item>
          <title>Multiple workstations - Problem with following the guide</title>
          <dc:creator><![CDATA[Feiru]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>Hello there.<br>
I’m following the guide on the wiki for multiple Workstations.<br>
(Can’t include link)</p>
<p>But i don’t understand how to assign a new MAC address:<br>
The guide says:</p>
<blockquote>
<p>KVM: To change the internal network in KVM, see: Creating Multiple Internal Networks.</p>
</blockquote>
<p>Following the link it states:</p>
<blockquote>
<p>Open the Whonix ™ network XML file and change the name attribute to something different than the internal network that is currently running, for example ‘Whonix-Internal2’, ‘Whonix-Internal3’ and so on. The default network name in use is ‘Whonix-Internal’.</p>
</blockquote>
<p>I don’t understand what exactly i am supposed to do here?</p>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="http://forums.whonix.org/t/multiple-workstations-problem-with-following-the-guide/14477">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/multiple-workstations-problem-with-following-the-guide/14477</link>
          <pubDate>Sat, 13 Aug 2022 12:47:41 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14477</guid>
          <source url="http://forums.whonix.org/t/multiple-workstations-problem-with-following-the-guide/14477.rss">Multiple workstations - Problem with following the guide</source>
        </item>
        <item>
          <title>Guide: Easy Fix for Whonix Firewall Kill Switch</title>
          <dc:creator><![CDATA[alexa_tanner]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>Hi devs, you’re all doing an incredible job and I’ve donated twice already. Thank you!. <img src="//forums.whonix.org/images/emoji/twitter/upside_down_face.png?v=12" title=":upside_down_face:" class="emoji" alt=":upside_down_face:"> (I’m alex_tanner but forgot my pw)</p>
<p>There has been a <strong>lot</strong> of debate about a <strong>fail-closed</strong> mechanism or a kill switch for VPN users on Whonix. (Cutting off all traffic to TOR if the VPN drops).</p>
<p>This recommended script VPN-Firewall by adrelanos on Github is fine, but there is a <strong>much</strong> quicker, <strong>safer</strong> and more efficient way to achieve this.</p>
<p>This guide is for VPN that are set up on the host.<br>
Literally <strong>all</strong> you have to do is modify your Whonix-External.xml to reflect the following:</p>
<pre><code class="lang-auto">&lt;network&gt;
  &lt;name&gt;Whonix-External&lt;/name&gt;
  &lt;forward dev='tun0' mode='nat'/&gt;
  &lt;bridge name='virbr1' stp='on' delay='0'/&gt;
  &lt;ip address='10.0.2.2' netmask='255.255.255.0'&gt;
  &lt;/ip&gt;
&lt;/network&gt;
</code></pre>
<p>This is the key component, specifically telling libvirt to use tun0 for NAT.<br>
<code>  &lt;forward dev='tun0' mode='nat'/&gt;</code></p>
<p>Libvirt will <strong>automatically</strong> create these iptable rules when the Whonix-External Network is started, <strong>only</strong> allowing established forwarded traffic between the Whonix Gateway and the tun0 interface.<br>
<code>-A FORWARD -m conntrack --ctstate ESTABLISHED -j ACCEPT</code><br>
<code>-A FORWARD -s 10.0.2.0/24 -i virbr1 -o tun0 -j ACCEPT</code></p>
<p>That’s it.</p>
<p>If your VPN connection drops, all Whonix connectivity will die instantly, because tun0 is the only target for NAT.</p>
<p>Thus, incoming traffic can’t reach because the the ESTABLISHED connection rule points to the internal IP of your tun0 interface (which is not assigned if the VPN drops) and outgoing doesn’t work either for the same reason.</p>
<p>Hope this helps. <img src="//forums.whonix.org/images/emoji/twitter/grinning.png?v=12" title=":grinning:" class="emoji" alt=":grinning:"></p>
            <p><small>5 posts - 3 participants</small></p>
            <p><a href="http://forums.whonix.org/t/guide-easy-fix-for-whonix-firewall-kill-switch/14449">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/guide-easy-fix-for-whonix-firewall-kill-switch/14449</link>
          <pubDate>Thu, 11 Aug 2022 15:39:12 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14449</guid>
          <source url="http://forums.whonix.org/t/guide-easy-fix-for-whonix-firewall-kill-switch/14449.rss">Guide: Easy Fix for Whonix Firewall Kill Switch</source>
        </item>
        <item>
          <title>tar: Whonix-Workstation-XFCE-16.0.5.3.Intel_AMD64.qcow2: Cannot write: No space left on device</title>
          <dc:creator><![CDATA[jennma]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>Hello,</p>
<p>I’ve been trying to install Whonix on my PC running Linux Mint 20.3 (Cinnamon) for some days but haven’t been able to figure out what the problem is. It might have something to do with sparse files but I have no idea how to go about fixing the issue. Can’t find any fixes online.</p>
<p>Basically the problem arises when running the tar command on the archive file. It starts extracting and keeps doing the process until my disk is full and it can’t go on anymore. Each of the .qcow2 files go over a 100gb</p>
<p>The terminal goes as follows.</p>
<p>tar -xvf Whonix*.libvirt.xz<br>
WHONIX_BINARY_LICENSE_AGREEMENT<br>
WHONIX_DISCLAIMER<br>
Whonix-Gateway-XFCE-16.0.5.3.xml<br>
Whonix-Workstation-XFCE-16.0.5.3.xml<br>
Whonix_external_network-16.0.5.3.xml<br>
Whonix_internal_network-16.0.5.3.xml<br>
Whonix-Gateway-XFCE-16.0.5.3.Intel_AMD64.qcow2<br>
Whonix-Workstation-XFCE-16.0.5.3.Intel_AMD64.qcow2<br>
tar: Whonix-Workstation-XFCE-16.0.5.3.Intel_AMD64.qcow2: Cannot write: No space left on device<br>
tar: Exiting with failure status due to previous errors</p>
<p>Thanks for the response in advance!</p>
            <p><small>4 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/tar-whonix-workstation-xfce-16-0-5-3-intel-amd64-qcow2-cannot-write-no-space-left-on-device/14293">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/tar-whonix-workstation-xfce-16-0-5-3-intel-amd64-qcow2-cannot-write-no-space-left-on-device/14293</link>
          <pubDate>Sat, 30 Jul 2022 09:05:06 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14293</guid>
          <source url="http://forums.whonix.org/t/tar-whonix-workstation-xfce-16-0-5-3-intel-amd64-qcow2-cannot-write-no-space-left-on-device/14293.rss">tar: Whonix-Workstation-XFCE-16.0.5.3.Intel_AMD64.qcow2: Cannot write: No space left on device</source>
        </item>
        <item>
          <title>not existing link at &quot;http://libvirt.org/schemas/domain/qemu/1.0 doesnt work or archived, report in forums to make sure its ok to be kept&quot; section</title>
          <dc:creator><![CDATA[TNT_BOM_BOM]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <aside class="onebox allowlistedgeneric" data-onebox-src="https://www.whonix.org/wiki/KVM#Setting_up_gdb_to_work_with_qemu-kvm_via_libvirt">
  <header class="source">
      <img src="https://www.whonix.org/w/images/a/a4/Whonix-home-favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://www.whonix.org/wiki/KVM#Setting_up_gdb_to_work_with_qemu-kvm_via_libvirt" target="_blank" rel="noopener nofollow ugc" title="01:24AM - 21 July 2022">Whonix – 21 Jul 22</a>
  </header>

  <article class="onebox-body">
    <img src="https://www.whonix.org/w/images/thumb/0/0f/Kvm-new-logo.png/470px-Kvm-new-logo.png" class="thumbnail onebox-avatar" width="470" height="470">

<h3><a href="https://www.whonix.org/wiki/KVM#Setting_up_gdb_to_work_with_qemu-kvm_via_libvirt" target="_blank" rel="noopener nofollow ugc">Whonix ™ for KVM</a></h3>

  <p>Using Whonix ™ with KVM (Kernel Virtual Machine)</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p><code>http://libvirt.org/schemas/domain/qemu/1.0</code></p>
<p>The link itself doesn’t work or even archived, thats ok?</p>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="http://forums.whonix.org/t/not-existing-link-at-http-libvirt-org-schemas-domain-qemu-1-0-doesnt-work-or-archived-report-in-forums-to-make-sure-its-ok-to-be-kept-section/14225">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/not-existing-link-at-http-libvirt-org-schemas-domain-qemu-1-0-doesnt-work-or-archived-report-in-forums-to-make-sure-its-ok-to-be-kept-section/14225</link>
          <pubDate>Sat, 23 Jul 2022 22:37:03 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14225</guid>
          <source url="http://forums.whonix.org/t/not-existing-link-at-http-libvirt-org-schemas-domain-qemu-1-0-doesnt-work-or-archived-report-in-forums-to-make-sure-its-ok-to-be-kept-section/14225.rss">not existing link at &quot;http://libvirt.org/schemas/domain/qemu/1.0 doesnt work or archived, report in forums to make sure its ok to be kept&quot; section</source>
        </item>
        <item>
          <title>Installation error: &quot;could not get preferred machine&quot;</title>
          <dc:creator><![CDATA[tangerine]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>I’m installing Whonix for the first time and received this error message:</p>
<p>error: Failed to define domain from Whonix-Workstation-XFCE-16.0.5.3.xml<br>
error: invalid argument: could not get preferred machine for /usr/bin/qemu-system-x86_64 type=kvm</p>
<p>Not sure what to do, not sure if I missed something.</p>
            <p><small>2 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/installation-error-could-not-get-preferred-machine/14209">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/installation-error-could-not-get-preferred-machine/14209</link>
          <pubDate>Thu, 21 Jul 2022 22:58:34 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14209</guid>
          <source url="http://forums.whonix.org/t/installation-error-could-not-get-preferred-machine/14209.rss">Installation error: &quot;could not get preferred machine&quot;</source>
        </item>
        <item>
          <title>Remove uncessary packages from Whonix-KVM</title>
          <dc:creator><![CDATA[0x1f]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>Hello, I noticed in Whonix-KVM gateway we currently have pipewire AND pulseaudio even if the user assigns low ram (256 mb or lower) which doesn’t make sense since gateway does not need audio, it hell sure does not need pipewire over pulseaudio either.</p>
            <p><small>4 posts - 2 participants</small></p>
            <p><a href="http://forums.whonix.org/t/remove-uncessary-packages-from-whonix-kvm/14051">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/remove-uncessary-packages-from-whonix-kvm/14051</link>
          <pubDate>Mon, 27 Jun 2022 20:59:18 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14051</guid>
          <source url="http://forums.whonix.org/t/remove-uncessary-packages-from-whonix-kvm/14051.rss">Remove uncessary packages from Whonix-KVM</source>
        </item>
        <item>
          <title>Running Whonix on KVM in Linux containers</title>
          <dc:creator><![CDATA[nspin]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>I got Whonix running on KVM via libvirt’s <code>qemu:///session</code> inside of a Docker container. I’m sharing here as this may be of interest to the forum, or at least of use to anyone attempting anything similar in the future.</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://github.com/nspin/whonix-now">
  <header class="source">
      <img src="https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">

      <a href="https://github.com/nspin/whonix-now" target="_blank" rel="noopener nofollow ugc">GitHub</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="https://opengraph.githubassets.com/0990dee5ce66655fc49ce70605ac4943cee033f0e16cf28254f825a75b64bfdd/nspin/whonix-now" class="thumbnail" width="690" height="362"></div>

<h3><a href="https://github.com/nspin/whonix-now" target="_blank" rel="noopener nofollow ugc">GitHub - nspin/whonix-now: Whonix on KVM in Linux containers</a></h3>

  <p>Whonix on KVM in Linux containers. Contribute to nspin/whonix-now development by creating an account on GitHub.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<h3>
<a name="motivation-1" class="anchor" href="http://forums.whonix.org#motivation-1"></a>Motivation</h3>
<p>Docker serves to simplify the configuration and management of the network and filesystem resources associated with Whonix virtual machines. This approach enables reproducibility and ease of management for custom configurations of Whonix-based environments. On the other side of the spectrum, this approach also enables contained, side effect-free, single-command setup and teardown of pre-baked Whonix environments for new users.</p>
<h3>
<a name="implementation-notes-2" class="anchor" href="http://forums.whonix.org#implementation-notes-2"></a>Implementation notes</h3>
<p>libvirt runs inside of a Docker container which runs with <code>--device /dev/kvm</code>. virt-manager and virtual machine GUIs are forwarded to the host’s X11 session.</p>
<p>libvirt’s <code>qemu:///session</code> doesn’t have the privilege to manage virtual networking resources, so the container must set up the virtual networks on behalf of libvirt and then define them using <code>&lt;forward mode='bridge'/&gt;</code>.</p>
<p>To work around a libvirt-related networking issue which I have yet to diagnose, I had to include a patch for the Whonix-Gateway firewall [1][2]. This is a temporary hack which I will remove once I manage to find and resolve the underlying problem.</p>
<p>[1] <a href="https://github.com/nspin/whonix-now/blob/5b4937481465f60ce64f4beadf24386d48287b69/nix/whonix.nix#L80" class="inline-onebox" rel="noopener nofollow ugc">whonix-now/whonix.nix at 5b4937481465f60ce64f4beadf24386d48287b69 · nspin/whonix-now · GitHub</a><br>
[2] <a href="https://forums.whonix.org/t/have-firewall-accept-icmp-fragmentation-needed/10233/3" class="inline-onebox">Have firewall accept ICMP Fragmentation Needed - #3 by pege</a></p>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="http://forums.whonix.org/t/running-whonix-on-kvm-in-linux-containers/14048">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/running-whonix-on-kvm-in-linux-containers/14048</link>
          <pubDate>Mon, 27 Jun 2022 10:11:30 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-14048</guid>
          <source url="http://forums.whonix.org/t/running-whonix-on-kvm-in-linux-containers/14048.rss">Running Whonix on KVM in Linux containers</source>
        </item>
        <item>
          <title>Ownership of kvm images</title>
          <dc:creator><![CDATA[xXXXx]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>I followed the offical KVM manual.<br>
After the install the images at /var/lib/libvirt/images/ are NOT owned by libvirt-qemu.</p>
<p>$sudo chown libvirt-qemu:libvirt-qemu /var/lib/libvirt/images/Whonix-*</p>
<p>solves the problem.</p>
<p>You need to be root to preserve the ownership of the files, when using tar.</p>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="http://forums.whonix.org/t/ownership-of-kvm-images/13833">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/ownership-of-kvm-images/13833</link>
          <pubDate>Fri, 24 Jun 2022 20:50:38 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-13833</guid>
          <source url="http://forums.whonix.org/t/ownership-of-kvm-images/13833.rss">Ownership of kvm images</source>
        </item>
        <item>
          <title>Questions about installing Whonix KVM</title>
          <dc:creator><![CDATA[Peele]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>Hi,</p>
<ol>
<li>
<p>The requirements for the graphical environment for the host machine are <a href="https://www.whonix.org/wiki/System_Requirements#Non-Qubes-Whonix_System_Requirements" rel="noopener nofollow ugc">not specified here</a>.<br>
Does it require a graphical environment, or is a minimal console option enough?</p>
</li>
<li>
<p>In this <a href="http://www.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/KVM#Debian" rel="noopener nofollow ugc">Instruction</a>, during the installation of Whonix KVM, it is proposed to execute 2 reboot commands.<br>
Is this mandatory? Maybe one reboot command is enough?</p>
</li>
</ol>
            <p><small>3 posts - 3 participants</small></p>
            <p><a href="http://forums.whonix.org/t/questions-about-installing-whonix-kvm/13812">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/questions-about-installing-whonix-kvm/13812</link>
          <pubDate>Sun, 19 Jun 2022 21:37:46 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-13812</guid>
          <source url="http://forums.whonix.org/t/questions-about-installing-whonix-kvm/13812.rss">Questions about installing Whonix KVM</source>
        </item>
        <item>
          <title>Script for automatic installation of Whonix KVM</title>
          <dc:creator><![CDATA[Peele]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>I used to use Whonix VirtualBox and its installation was simple, fast and intuitive.<br>
I spent a whole day yesterday trying to install Whonix KVM on Debian.<br>
But it was not a installing but a continuous torment! <img src="//forums.whonix.org/images/emoji/twitter/disappointed_relieved.png?v=12" title=":disappointed_relieved:" class="emoji" alt=":disappointed_relieved:"></p>
<p>The <a href="http://www.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/KVM#Before_Installing" rel="noopener nofollow ugc">instruction</a> is huge - hundreds of lines! Moreover, with many reservations and nuances, many of which are incomprehensible and not mandatory.<br>
You need to read a lot, think, and not always everything from this instruction is clear to the average trained user.<br>
In the end, because of the complicated instructions, I did not succeed, and I gave up this painful task.</p>
<p>These difficulties hinder the popularity of Whonix KVM, because of this, many users are forced to use an insecure VirtualBox.</p>
<p>But the computer was invented in order to automate and simplify the work of a person, isn’t it?</p>
<p>Why don’t developers create a interactive user friendly installation Bash script that would greatly simplify and speed up the installation of Whonix KVM?</p>
<p>There are a many of examples of such a friendly attitude of developers to users.</p>
            <p><small>13 posts - 3 participants</small></p>
            <p><a href="http://forums.whonix.org/t/script-for-automatic-installation-of-whonix-kvm/13791">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/script-for-automatic-installation-of-whonix-kvm/13791</link>
          <pubDate>Wed, 15 Jun 2022 19:53:24 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-13791</guid>
          <source url="http://forums.whonix.org/t/script-for-automatic-installation-of-whonix-kvm/13791.rss">Script for automatic installation of Whonix KVM</source>
        </item>
        <item>
          <title>Error installing KVM on Debian 11</title>
          <dc:creator><![CDATA[Peele]]></dc:creator>
          <category>KVM</category>
          <description><![CDATA[
            <p>Hi,<br>
I installed a fresh Debian 11.3.0/64 and started installing KVM using this <a href="http://www.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/KVM#Before_Installing" rel="noopener nofollow ugc">instruction</a></p>
<p>However, these commands generate fatal errors <img src="//forums.whonix.org/images/emoji/twitter/disappointed_relieved.png?v=12" title=":disappointed_relieved:" class="emoji" alt=":disappointed_relieved:"> :</p>
<blockquote>
<p>sudo virsh -c qemu:///system define Whonix-Gateway*.xml<br>
error: Failed to define domain from Whonix-Gateway-XFCE-16.0.3.7.xml<br>
error: invalid argument: could not get preferred machine for /usr/bin/qemu-system-x86_64 type=kvm</p>
</blockquote>
<p>and</p>
<blockquote>
<p>sudo virsh -c qemu:///system define Whonix-Workstation*.xml<br>
error: Failed to define domain from Whonix-Workstation-XFCE-16.0.3.7.xml<br>
error: invalid argument: could not get preferred machine for /usr/bin/qemu-system-x86_64 type=kvm</p>
</blockquote>
<p>Correct the erroneous instructions, please!</p>
            <p><small>11 posts - 5 participants</small></p>
            <p><a href="http://forums.whonix.org/t/error-installing-kvm-on-debian-11/13789">Read full topic</a></p>
          ]]></description>
          <link>http://forums.whonix.org/t/error-installing-kvm-on-debian-11/13789</link>
          <pubDate>Wed, 15 Jun 2022 02:44:14 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forums.whonix.org-topic-13789</guid>
          <source url="http://forums.whonix.org/t/error-installing-kvm-on-debian-11/13789.rss">Error installing KVM on Debian 11</source>
        </item>
  </channel>
</rss>
